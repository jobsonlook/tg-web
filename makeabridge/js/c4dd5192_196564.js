var __reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);r.prototype=t.prototype,e.prototype=new r},RES;!function(e){var t=function(t){function r(){var r=t.call(this)||this;return r.resourceConfig=null,r.resourceConfig=e.configInstance,r}return __extends(r,t),r.prototype.addSubkey=function(e,t){this.resourceConfig.addSubkey(e,t)},r.prototype.loadFile=function(e,t,r){},r.prototype.getRes=function(e){},r.prototype.destroyRes=function(e){return!1},r.getStringPrefix=function(e){if(!e)return"";var t=e.indexOf(".");return-1!=t?e.substring(0,t):""},r.getStringTail=function(e){if(!e)return"";var t=e.indexOf(".");return-1!=t?e.substring(t+1):""},r}(egret.HashObject);e.AnalyzerBase=t,__reflect(t.prototype,"RES.AnalyzerBase")}(RES||(RES={}));var RES;!function(e){var t=function(t){function r(){var e=t.call(this)||this;return e.fileDic={},e.resItemDic=[],e._dataFormat=egret.HttpResponseType.ARRAY_BUFFER,e.recycler=[],e}return __extends(r,t),r.prototype.loadFile=function(t,r,i){if(this.fileDic[t.name])return void r.call(i,t);var n=this.getRequest();this.resItemDic[n.hashCode]={item:t,func:r,thisObject:i},n.open(e.$getVirtualUrl(t.url)),n.send()},r.prototype.getRequest=function(){var e=this.recycler.pop();return e||(e=new egret.HttpRequest,e.addEventListener(egret.Event.COMPLETE,this.onLoadFinish,this),e.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onLoadFinish,this)),e.responseType=this._dataFormat,e},r.prototype.onLoadFinish=function(e){var t=e.target,r=this.resItemDic[t.hashCode];delete this.resItemDic[t.hashCode];var i=r.item,n=r.func;i.loaded=e.type==egret.Event.COMPLETE,i.loaded&&this.analyzeData(i,t.response),this.recycler.push(t),n.call(r.thisObject,i)},r.prototype.analyzeData=function(e,t){var r=e.name;this.fileDic[r]||""!=t&&!t||(this.fileDic[r]=t)},r.prototype.getRes=function(e){return this.fileDic[e]},r.prototype.hasRes=function(e){var t=this.getRes(e);return null!=t},r.prototype.destroyRes=function(e){return this.fileDic[e]?(this.onResourceDestroy(this.fileDic[e]),delete this.fileDic[e],!0):!1},r.prototype.onResourceDestroy=function(e){},r}(e.AnalyzerBase);e.BinAnalyzer=t,__reflect(t.prototype,"RES.BinAnalyzer")}(RES||(RES={}));var RES;!function(e){var t=function(){function e(e,t,r){this.groupName="",this.data=null,this._loaded=!1,this.name=e,this.url=t,this.type=r}return Object.defineProperty(e.prototype,"loaded",{get:function(){return this.data?this.data.loaded:this._loaded},set:function(e){this.data&&(this.data.loaded=e),this._loaded=e},enumerable:!0,configurable:!0}),e.prototype.toString=function(){return'[ResourceItem name="'+this.name+'" url="'+this.url+'" type="'+this.type+'"]'},e.TYPE_XML="xml",e.TYPE_IMAGE="image",e.TYPE_BIN="bin",e.TYPE_TEXT="text",e.TYPE_JSON="json",e.TYPE_SHEET="sheet",e.TYPE_FONT="font",e.TYPE_SOUND="sound",e}();e.ResourceItem=t,__reflect(t.prototype,"RES.ResourceItem")}(RES||(RES={}));var RES;!function(e){var t=function(t){function r(){var e=t.call(this)||this;return e.sheetMap={},e.textureMap={},e.recyclerIamge=[],e._dataFormat=egret.HttpResponseType.TEXT,e}return __extends(r,t),r.prototype.getRes=function(t){var r=this.fileDic[t];if(r||(r=this.textureMap[t]),!r){var i=e.AnalyzerBase.getStringPrefix(t);if(r=this.fileDic[i]){var n=e.AnalyzerBase.getStringTail(t);r=r.getTexture(n)}}return r},r.prototype.onLoadFinish=function(e){var t=e.target,r=this.resItemDic[t.$hashCode];delete this.resItemDic[t.hashCode];var i=r.item,n=r.func;if(i.loaded=e.type==egret.Event.COMPLETE,i.loaded)if(t instanceof egret.HttpRequest){i.loaded=!1;var o=this.analyzeConfig(i,t.response);if(o)return this.loadImage(o,r),void this.recycler.push(t)}else{var s=new egret.Texture;s._setBitmapData(t.data),this.analyzeBitmap(i,s)}t instanceof egret.HttpRequest?this.recycler.push(t):this.recyclerIamge.push(t),n.call(r.thisObject,i)},r.prototype.analyzeConfig=function(e,t){var r,i=e.name,n="";try{var o=t;r=JSON.parse(o)}catch(s){egret.$warn(1017,e.url,t)}return r&&(this.sheetMap[i]=r,n=this.getRelativePath(e.url,r.file)),n},r.prototype.analyzeBitmap=function(e,t){var r=e.name;if(!this.fileDic[r]&&t){var i=this.sheetMap[r];delete this.sheetMap[r];var n=e.data&&e.data.subkeys?"":r,o=this.parseSpriteSheet(t,i,n);this.fileDic[r]=o}},r.prototype.getRelativePath=function(e,t){e=e.split("\\").join("/");var r=e.match(/#.*|\?.*/),i="";r&&(i=r[0]);var n=e.lastIndexOf("/");return e=-1!=n?e.substring(0,n+1)+t:t,e+i},r.prototype.parseSpriteSheet=function(e,t,r){var i=t.frames;if(!i)return null;var n=new egret.SpriteSheet(e),o=this.textureMap;for(var s in i){var a=i[s],u=n.createTexture(s,a.x,a.y,a.w,a.h,a.offX,a.offY,a.sourceW,a.sourceH);if(a.scale9grid){var c=a.scale9grid,l=c.split(",");u.scale9Grid=new egret.Rectangle(parseInt(l[0]),parseInt(l[1]),parseInt(l[2]),parseInt(l[3]))}null==o[s]&&(o[s]=u,r&&this.addSubkey(s,r))}return n},r.prototype.destroyRes=function(e){var t=this.fileDic[e];if(t){delete this.fileDic[e];var r=void 0;for(var i in t._textureMap)null==r&&(r=t._textureMap[i],this.onResourceDestroy(r),r=null),delete this.textureMap[i];return t.dispose&&t.dispose(),!0}return!1},r.prototype.loadImage=function(t,r){var i=this.getImageLoader();this.resItemDic[i.hashCode]=r,i.load(e.$getVirtualUrl(t))},r.prototype.getImageLoader=function(){var e=this.recyclerIamge.pop();return e||(e=new egret.ImageLoader,e.addEventListener(egret.Event.COMPLETE,this.onLoadFinish,this),e.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onLoadFinish,this)),e},r.prototype.onResourceDestroy=function(e){e&&e.dispose()},r}(e.BinAnalyzer);e.SheetAnalyzer=t,__reflect(t.prototype,"RES.SheetAnalyzer")}(RES||(RES={}));var RES;!function(e){}(RES||(RES={}));var RES;!function(e){var t=function(t){function r(){var e=t.call(this)||this;return e.fileDic={},e.resItemDic=[],e.recycler=[],e}return __extends(r,t),r.prototype.loadFile=function(t,r,i){if(this.fileDic[t.name])return void r.call(i,t);var n=this.getLoader();this.resItemDic[n.$hashCode]={item:t,func:r,thisObject:i},n.load(e.$getVirtualUrl(t.url))},r.prototype.getLoader=function(){var e=this.recycler.pop();return e||(e=new egret.ImageLoader,e.addEventListener(egret.Event.COMPLETE,this.onLoadFinish,this),e.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onLoadFinish,this)),e},r.prototype.onLoadFinish=function(e){var t=e.$target,r=this.resItemDic[t.$hashCode];delete this.resItemDic[t.$hashCode];var i=r.item,n=r.func;if(i.loaded=e.$type==egret.Event.COMPLETE,i.loaded){var o=new egret.Texture;o._setBitmapData(t.data),this.analyzeData(i,o)}this.recycler.push(t),n.call(r.thisObject,i)},r.prototype.analyzeData=function(e,t){var r=e.name;if(!this.fileDic[r]&&t){this.fileDic[r]=t;var i=e.data;if(i&&i.scale9grid){var n=i.scale9grid,o=n.split(",");t.scale9Grid=new egret.Rectangle(parseInt(o[0]),parseInt(o[1]),parseInt(o[2]),parseInt(o[3]))}}},r.prototype.getRes=function(e){return this.fileDic[e]},r.prototype.hasRes=function(e){var t=this.getRes(e);return null!=t},r.prototype.destroyRes=function(e){return this.fileDic[e]?(this.onResourceDestroy(this.fileDic[e]),delete this.fileDic[e],!0):!1},r.prototype.onResourceDestroy=function(e){e.dispose()},r}(e.AnalyzerBase);e.ImageAnalyzer=t,__reflect(t.prototype,"RES.ImageAnalyzer")}(RES||(RES={}));var RES;!function(e){var t=function(e){function t(){var t=e.call(this)||this;return t._dataFormat=egret.HttpResponseType.TEXT,t}return __extends(t,e),t}(e.BinAnalyzer);e.TextAnalyzer=t,__reflect(t.prototype,"RES.TextAnalyzer")}(RES||(RES={}));var RES;!function(e){var t=function(e){function t(){var t=e.call(this)||this;return t._dataFormat=egret.HttpResponseType.TEXT,t}return __extends(t,e),t.prototype.analyzeData=function(e,t){var r=e.name;if(!this.fileDic[r]&&t)try{var i=t;this.fileDic[r]=JSON.parse(i)}catch(n){egret.$warn(1017,e.url,t)}},t}(e.BinAnalyzer);e.JsonAnalyzer=t,__reflect(t.prototype,"RES.JsonAnalyzer")}(RES||(RES={}));var RES;!function(e){var t=function(t){function r(){var e=t.call(this)||this;return e.thread=2,e.loadingCount=0,e.callBack=null,e.resInstance=null,e.groupTotalDic={},e.numLoadedDic={},e.itemListDic={},e.groupErrorDic={},e.retryTimesDic={},e.maxRetryTimes=3,e.failedList=new Array,e.priorityQueue={},e.lazyLoadList=new Array,e.analyzerDic={},e.queueIndex=0,e}return __extends(r,t),r.prototype.isGroupInLoading=function(e){return void 0!==this.itemListDic[e]},r.prototype.loadGroup=function(t,r,i){if(void 0===i&&(i=0),!this.itemListDic[r]&&r){if(!t||0==t.length){egret.$warn(3201,r);var n=new e.ResourceEvent(e.ResourceEvent.GROUP_LOAD_ERROR);return n.groupName=r,void this.dispatchEvent(n)}this.priorityQueue[i]?this.priorityQueue[i].push(r):this.priorityQueue[i]=[r],this.itemListDic[r]=t;for(var o=t.length,s=0;o>s;s++){var a=t[s];a.groupName=r}this.groupTotalDic[r]=t.length,this.numLoadedDic[r]=0,this.next()}},r.prototype.loadItem=function(e){this.lazyLoadList.push(e),e.groupName="",this.next()},r.prototype.next=function(){for(;this.loadingCount<this.thread;){var e=this.getOneResourceItem();if(!e)break;if(this.loadingCount++,e.loaded)this.onItemComplete(e);else{var t=this.resInstance.$getAnalyzerByType(e.type);t.loadFile(e,this.onItemComplete,this)}}},r.prototype.getOneResourceItem=function(){if(this.failedList.length>0)return this.failedList.shift();var e=Number.NEGATIVE_INFINITY;for(var t in this.priorityQueue)e=Math.max(e,t);var r=this.priorityQueue[e];if(!r||0==r.length)return 0==this.lazyLoadList.length?null:this.lazyLoadList.pop();for(var i,n=r.length,o=0;n>o&&(this.queueIndex>=n&&(this.queueIndex=0),i=this.itemListDic[r[this.queueIndex]],!(i.length>0));o++)this.queueIndex++;return 0==i.length?null:i.shift()},r.prototype.onItemComplete=function(t){this.loadingCount--;var r=t.groupName;if(!t.loaded){var i=this.retryTimesDic[t.name]||1;if(!(i>this.maxRetryTimes))return this.retryTimesDic[t.name]=i+1,this.failedList.push(t),void this.next();delete this.retryTimesDic[t.name],e.ResourceEvent.dispatchResourceEvent(this.resInstance,e.ResourceEvent.ITEM_LOAD_ERROR,r,t)}if(r){this.numLoadedDic[r]++;var n=this.numLoadedDic[r],o=this.groupTotalDic[r];if(t.loaded||(this.groupErrorDic[r]=!0),e.ResourceEvent.dispatchResourceEvent(this.resInstance,e.ResourceEvent.GROUP_PROGRESS,r,t,n,o),n==o){var s=this.groupErrorDic[r];this.removeGroupName(r),delete this.groupTotalDic[r],delete this.numLoadedDic[r],delete this.itemListDic[r],delete this.groupErrorDic[r],s?e.ResourceEvent.dispatchResourceEvent(this,e.ResourceEvent.GROUP_LOAD_ERROR,r):e.ResourceEvent.dispatchResourceEvent(this,e.ResourceEvent.GROUP_COMPLETE,r)}}else this.callBack.call(this.resInstance,t);this.next()},r.prototype.removeGroupName=function(e){for(var t in this.priorityQueue){for(var r=this.priorityQueue[t],i=0,n=!1,o=r.length,s=0;o>s;s++){var a=r[s];if(a==e){r.splice(i,1),n=!0;break}i++}if(n){0==r.length&&delete this.priorityQueue[t];break}}},r}(egret.EventDispatcher);e.ResourceLoader=t,__reflect(t.prototype,"RES.ResourceLoader")}(RES||(RES={}));var RES;!function(e){var t=function(){function t(){this.keyMap={},this.groupDic={},e.configInstance=this}return t.prototype.getGroupByName=function(e){var t=new Array;if(!this.groupDic[e])return t;for(var r=this.groupDic[e],i=r.length,n=0;i>n;n++){var o=r[n];t.push(this.parseResourceItem(o))}return t},t.prototype.getRawGroupByName=function(e){return this.groupDic[e]?this.groupDic[e]:[]},t.prototype.createGroup=function(e,t,r){if(void 0===r&&(r=!1),!r&&this.groupDic[e]||!t||0==t.length)return!1;for(var i=this.groupDic,n=[],o=t.length,s=0;o>s;s++){var a=t[s],u=i[a];if(u)for(var c=u.length,l=0;c>l;l++){var p=u[l];-1==n.indexOf(p)&&n.push(p)}else{var p=this.keyMap[a];p?-1==n.indexOf(p)&&n.push(p):egret.$warn(3200,a)}}return 0==n.length?!1:(this.groupDic[e]=n,!0)},t.prototype.parseConfig=function(e,t){if(e){var r=e.resources;if(r)for(var i=r.length,n=0;i>n;n++){var o=r[n],s=o.url;s&&-1==s.indexOf("://")&&(o.url=t+s),this.addItemToKeyMap(o)}var a=e.groups;if(a)for(var u=a.length,n=0;u>n;n++){for(var c=a[n],l=[],p=c.keys.split(","),h=p.length,f=0;h>f;f++){var d=p[f].trim(),o=this.keyMap[d];o&&-1==l.indexOf(o)&&l.push(o)}this.groupDic[c.name]=l}}},t.prototype.addSubkey=function(e,t){var r=this.keyMap[t];r&&!this.keyMap[e]&&(this.keyMap[e]=r)},t.prototype.addItemToKeyMap=function(e){if(this.keyMap[e.name]||(this.keyMap[e.name]=e),e.hasOwnProperty("subkeys")){var t=e.subkeys.split(",");e.subkeys=t;for(var r=t.length,i=0;r>i;i++){var n=t[i];null==this.keyMap[n]&&(this.keyMap[n]=e)}}},t.prototype.getName=function(e){var t=this.keyMap[e];return t?t.name:""},t.prototype.getType=function(e){var t=this.keyMap[e];return t?t.type:""},t.prototype.getRawResourceItem=function(e){return this.keyMap[e]},t.prototype.getResourceItem=function(e){var t=this.keyMap[e];return t?this.parseResourceItem(t):null},t.prototype.parseResourceItem=function(t){var r=new e.ResourceItem(t.name,t.url,t.type);return r.data=t,r},t}();e.ResourceConfig=t,__reflect(t.prototype,"RES.ResourceConfig")}(RES||(RES={}));var RES;!function(e){var t=function(t){function r(){var e=t.call(this)||this;return e.soundDic={},e.resItemDic=[],e}return __extends(r,t),r.prototype.loadFile=function(t,r,i){if(this.soundDic[t.name])return void r.call(i,t);var n=new egret.Sound;n.addEventListener(egret.Event.COMPLETE,this.onLoadFinish,this),n.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onLoadFinish,this),this.resItemDic[n.$hashCode]={item:t,func:r,thisObject:i},n.load(e.$getVirtualUrl(t.url)),t.data&&(n.type=t.data.soundType)},r.prototype.onLoadFinish=function(e){var t=e.$target;t.removeEventListener(egret.Event.COMPLETE,this.onLoadFinish,this),t.removeEventListener(egret.IOErrorEvent.IO_ERROR,this.onLoadFinish,this);var r=this.resItemDic[t.$hashCode];delete this.resItemDic[t.$hashCode];var i=r.item,n=r.func;i.loaded=e.$type==egret.Event.COMPLETE,i.loaded&&this.analyzeData(i,t),n.call(r.thisObject,i)},r.prototype.analyzeData=function(e,t){var r=e.name;!this.soundDic[r]&&t&&(this.soundDic[r]=t)},r.prototype.getRes=function(e){return this.soundDic[e]},r.prototype.hasRes=function(e){return!!this.getRes(e)},r.prototype.destroyRes=function(e){return this.soundDic[e]?(delete this.soundDic[e],!0):!1},r}(e.AnalyzerBase);e.SoundAnalyzer=t,__reflect(t.prototype,"RES.SoundAnalyzer")}(RES||(RES={}));var RES;!function(e){var t=function(e){function t(){var t=e.call(this)||this;return t._dataFormat=egret.HttpResponseType.TEXT,t}return __extends(t,e),t.prototype.analyzeData=function(e,t){var r=e.name;if(!this.fileDic[r]&&t)try{var i=t,n=egret.XML.parse(i);this.fileDic[r]=n}catch(o){}},t}(e.BinAnalyzer);e.XMLAnalyzer=t,__reflect(t.prototype,"RES.XMLAnalyzer")}(RES||(RES={}));var RES;!function(e){var t=function(e){function t(t,r,i){void 0===r&&(r=!1),void 0===i&&(i=!1);var n=e.call(this,t,r,i)||this;return n.itemsLoaded=0,n.itemsTotal=0,n.groupName="",n.resItem=null,n}return __extends(t,e),t.dispatchResourceEvent=function(e,r,i,n,o,s){void 0===i&&(i=""),void 0===n&&(n=null),void 0===o&&(o=0),void 0===s&&(s=0);var a=egret.Event.create(t,r);a.groupName=i,a.resItem=n,a.itemsLoaded=o,a.itemsTotal=s;var u=e.dispatchEvent(a);return egret.Event.release(a),u},t.ITEM_LOAD_ERROR="itemLoadError",t.CONFIG_COMPLETE="configComplete",t.CONFIG_LOAD_ERROR="configLoadError",t.GROUP_PROGRESS="groupProgress",t.GROUP_COMPLETE="groupComplete",t.GROUP_LOAD_ERROR="groupLoadError",t}(egret.Event);e.ResourceEvent=t,__reflect(t.prototype,"RES.ResourceEvent")}(RES||(RES={}));var RES;!function(e){var t;!function(t){var r=function(e){function t(){var t=e.call(this)||this;return t._versionInfo={},t}return __extends(t,e),t.prototype.fetchVersion=function(e){e.onSuccess(null)},t.prototype.getChangeList=function(){return[]},t.prototype.getVirtualUrl=function(e){return e},t}(egret.EventDispatcher);t.Html5VersionController=r,__reflect(r.prototype,"RES.web.Html5VersionController",["RES.VersionController","RES.IVersionController"]),e.VersionController=r}(t=e.web||(e.web={}))}(RES||(RES={}));var RES;!function(e){var t=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.analyzeConfig=function(e,t){var r,i=e.name,n="";try{var o=t;r=JSON.parse(o)}catch(s){}return r?n=this.getRelativePath(e.url,r.file):(r=t,n=this.getTexturePath(e.url,r)),this.sheetMap[i]=r,n},t.prototype.analyzeBitmap=function(e,t){var r=e.name;if(!this.fileDic[r]&&t){var i=this.sheetMap[r];delete this.sheetMap[r];var n=new egret.BitmapFont(t,i);this.fileDic[r]=n}},t.prototype.getTexturePath=function(e,t){var r="",i=t.split("\n"),n=i[2],o=n.indexOf('file="');return-1!=o&&(n=n.substring(o+6),o=n.indexOf('"'),r=n.substring(0,o)),e=e.split("\\").join("/"),o=e.lastIndexOf("/"),e=-1!=o?e.substring(0,o+1)+r:r},t.prototype.onResourceDestroy=function(e){e&&e.dispose()},t}(e.SheetAnalyzer);e.FontAnalyzer=t,__reflect(t.prototype,"RES.FontAnalyzer")}(RES||(RES={}));var RES;!function(e){function t(e,t){L.registerAnalyzer(e,t)}function r(e){return L.$getAnalyzerByType(e)}function i(e){L.$registerVersionController(e)}function n(){return L.vcs}function o(e,t,r){void 0===t&&(t=""),void 0===r&&(r="json"),L.loadConfig(e,t,r)}function s(e,t){void 0===t&&(t=0),L.loadGroup(e,t)}function a(e){return L.isGroupLoaded(e)}function u(e){return L.getGroupByName(e)}function c(e,t,r){return void 0===r&&(r=!1),L.createGroup(e,t,r)}function l(e){return L.hasRes(e)}function p(e,t){void 0===t&&(t=""),L.parseConfig(e,t)}function h(e){return L.getRes(e)}function f(e,t,r){L.getResAsync(e,t,r)}function d(e,t,r,i){void 0===i&&(i=""),L.getResByUrl(e,t,r,i)}function y(e,t){return L.destroyRes(e,t)}function g(e){L.setMaxLoadingThread(e)}function v(e){L.setMaxRetryTimes(e)}function R(e,t,r,i,n){void 0===i&&(i=!1),void 0===n&&(n=0),L.addEventListener(e,t,r,i,n)}function m(e,t,r,i){void 0===i&&(i=!1),L.removeEventListener(e,t,r,i)}function E(e){return L.vcs?L.vcs.getVirtualUrl(e):e}e.registerAnalyzer=t,e.getAnalyzer=r,e.registerVersionController=i,e.getVersionController=n,e.loadConfig=o,e.loadGroup=s,e.isGroupLoaded=a,e.getGroupByName=u,e.createGroup=c,e.hasRes=l,e.parseConfig=p,e.getRes=h,e.getResAsync=f,e.getResByUrl=d,e.destroyRes=y,e.setMaxLoadingThread=g,e.setMaxRetryTimes=v,e.addEventListener=R,e.removeEventListener=m,e.$getVirtualUrl=E;var _=function(t){function r(){var e=t.call(this)||this;return e.analyzerDic={},e.analyzerClassMap={},e.configItemList=[],e.callLaterFlag=!1,e.configComplete=!1,e.loadedGroups=[],e.groupNameList=[],e.asyncDic={},e._loadedUrlTypes={},e.init(),e}return __extends(r,t),r.prototype.$getAnalyzerByType=function(e){var t=this.analyzerDic[e];if(!t){var r=this.analyzerClassMap[e];if(!r)return null;t=this.analyzerDic[e]=new r}return t},r.prototype.registerAnalyzer=function(e,t){this.analyzerClassMap[e]=t},r.prototype.$registerVersionController=function(e){this.vcs=e},r.prototype.init=function(){this.vcs=new e.VersionController;var t=this.analyzerClassMap;t[e.ResourceItem.TYPE_BIN]=e.BinAnalyzer,t[e.ResourceItem.TYPE_IMAGE]=e.ImageAnalyzer,t[e.ResourceItem.TYPE_TEXT]=e.TextAnalyzer,t[e.ResourceItem.TYPE_JSON]=e.JsonAnalyzer,t[e.ResourceItem.TYPE_SHEET]=e.SheetAnalyzer,t[e.ResourceItem.TYPE_FONT]=e.FontAnalyzer,t[e.ResourceItem.TYPE_SOUND]=e.SoundAnalyzer,t[e.ResourceItem.TYPE_XML]=e.XMLAnalyzer,this.resConfig=new e.ResourceConfig,this.resLoader=new e.ResourceLoader,this.resLoader.callBack=this.onResourceItemComp,this.resLoader.resInstance=this,this.resLoader.addEventListener(e.ResourceEvent.GROUP_COMPLETE,this.onGroupComp,this),this.resLoader.addEventListener(e.ResourceEvent.GROUP_LOAD_ERROR,this.onGroupError,this)},r.prototype.loadConfig=function(e,t,r){void 0===r&&(r="json");var i={url:e,resourceRoot:t,type:r};this.configItemList.push(i),this.callLaterFlag||(egret.callLater(this.startLoadConfig,this),this.callLaterFlag=!0)},r.prototype.startLoadConfig=function(){var t=this;this.callLaterFlag=!1;var i=this.configItemList;this.configItemList=[],this.loadingConfigList=i;for(var n=i.length,o=[],s=0;n>s;s++){var a=i[s],u=new e.ResourceItem(a.url,a.url,a.type);o.push(u)}var c={onSuccess:function(e){t.resLoader.loadGroup(o,r.GROUP_CONFIG,Number.MAX_VALUE)},onFail:function(r,i){e.ResourceEvent.dispatchResourceEvent(t,e.ResourceEvent.CONFIG_LOAD_ERROR)}};this.vcs?this.vcs.fetchVersion(c):this.resLoader.loadGroup(o,r.GROUP_CONFIG,Number.MAX_VALUE)},r.prototype.isGroupLoaded=function(e){return-1!=this.loadedGroups.indexOf(e)},r.prototype.getGroupByName=function(e){return this.resConfig.getGroupByName(e)},r.prototype.loadGroup=function(t,r){if(void 0===r&&(r=0),-1!=this.loadedGroups.indexOf(t))return void e.ResourceEvent.dispatchResourceEvent(this,e.ResourceEvent.GROUP_COMPLETE,t);if(!this.resLoader.isGroupInLoading(t))if(this.configComplete){var i=this.resConfig.getGroupByName(t);this.resLoader.loadGroup(i,t,r)}else this.groupNameList.push({name:t,priority:r})},r.prototype.createGroup=function(e,t,r){if(void 0===r&&(r=!1),r){var i=this.loadedGroups.indexOf(e);-1!=i&&this.loadedGroups.splice(i,1)}return this.resConfig.createGroup(e,t,r)},r.prototype.onGroupComp=function(t){if(t.groupName==r.GROUP_CONFIG){for(var i=this.loadingConfigList.length,n=0;i>n;n++){var o=this.loadingConfigList[n],s=this.$getAnalyzerByType(o.type),a=s.getRes(o.url);s.destroyRes(o.url),this.resConfig.parseConfig(a,o.resourceRoot)}this.configComplete=!0,this.loadingConfigList=null,e.ResourceEvent.dispatchResourceEvent(this,e.ResourceEvent.CONFIG_COMPLETE),this.loadDelayGroups()}else this.loadedGroups.push(t.groupName),this.dispatchEvent(t)},r.prototype.loadDelayGroups=function(){var e=this.groupNameList;this.groupNameList=[];for(var t=e.length,r=0;t>r;r++){var i=e[r];this.loadGroup(i.name,i.priority)}},r.prototype.onGroupError=function(t){t.groupName==r.GROUP_CONFIG?(this.loadingConfigList=null,e.ResourceEvent.dispatchResourceEvent(this,e.ResourceEvent.CONFIG_LOAD_ERROR)):this.dispatchEvent(t)},r.prototype.hasRes=function(t){var r=this.resConfig.getType(t);if(""==r){var i=e.AnalyzerBase.getStringTail(t);if(r=this.resConfig.getType(i),""==r)return!1}return!0},r.prototype.parseConfig=function(e,t){this.resConfig.parseConfig(e,t),this.configComplete||this.loadingConfigList||(this.configComplete=!0,this.loadDelayGroups())},r.prototype.getRes=function(t){var r=this.resConfig.getType(t);if(""==r){var i=e.AnalyzerBase.getStringPrefix(t);if(r=this.resConfig.getType(i),""==r)return null}var n=this.$getAnalyzerByType(r);return n.getRes(t)},r.prototype.getResAsync=function(t,r,i){var n=this.resConfig.getType(t),o=this.resConfig.getName(t);if(""==n&&(o=e.AnalyzerBase.getStringPrefix(t),n=this.resConfig.getType(o),""==n))return void egret.$callAsync(r,i);var s=this.$getAnalyzerByType(n),a=s.getRes(t);if(a)return void egret.$callAsync(r,i,a,t);var u={key:t,compFunc:r,thisObject:i};if(this.asyncDic[o])this.asyncDic[o].push(u);else{this.asyncDic[o]=[u];var c=this.resConfig.getResourceItem(o);this.resLoader.loadItem(c)}},r.prototype.getResByUrl=function(t,r,i,n){if(void 0===n&&(n=""),!t)return void egret.$callAsync(r,i);n||(n=this.getTypeByUrl(t)),null!=this._loadedUrlTypes[t]&&this._loadedUrlTypes[t]!=n&&egret.$warn(3202),this._loadedUrlTypes[t]=n;var o=this.$getAnalyzerByType(n),s=t,a=o.getRes(s);if(a)return void egret.$callAsync(r,i,a,t);var u={key:s,compFunc:r,thisObject:i};if(this.asyncDic[s])this.asyncDic[s].push(u);else{this.asyncDic[s]=[u];var c=new e.ResourceItem(s,t,n);this.resLoader.loadItem(c)}},r.prototype.getTypeByUrl=function(t){var r=t.substr(t.lastIndexOf(".")+1);r&&(r=r.toLowerCase());var i;switch(r){case e.ResourceItem.TYPE_XML:case e.ResourceItem.TYPE_JSON:case e.ResourceItem.TYPE_SHEET:i=r;break;case"png":case"jpg":case"gif":case"jpeg":case"bmp":i=e.ResourceItem.TYPE_IMAGE;break;case"fnt":i=e.ResourceItem.TYPE_FONT;break;case"txt":i=e.ResourceItem.TYPE_TEXT;break;case"mp3":case"ogg":case"mpeg":case"wav":case"m4a":case"mp4":case"aiff":case"wma":case"mid":i=e.ResourceItem.TYPE_SOUND;break;default:i=e.ResourceItem.TYPE_BIN}return i},r.prototype.onResourceItemComp=function(e){var t=this.asyncDic[e.name];delete this.asyncDic[e.name];for(var r=this.$getAnalyzerByType(e.type),i=t.length,n=0;i>n;n++){var o=t[n],s=r.getRes(o.key);o.compFunc.call(o.thisObject,s,o.key)}},r.prototype.destroyRes=function(e,t){void 0===t&&(t=!0);var r=this.resConfig.getRawGroupByName(e);if(r&&r.length>0){var i=this.loadedGroups.indexOf(e);-1!=i&&this.loadedGroups.splice(i,1);for(var n=r.length,o=0;n>o;o++){var s=r[o];if(!t&&this.isResInLoadedGroup(s.name));else{s.loaded=!1;var a=this.$getAnalyzerByType(s.type);a.destroyRes(s.name),this.removeLoadedGroupsByItemName(s.name)}}return!0}var u=this.resConfig.getType(e);if(""==u){if(u=this._loadedUrlTypes[e],null==u||""==u)return!1;delete this._loadedUrlTypes[e];var c=this.$getAnalyzerByType(u);return c.destroyRes(e),!0}var s=this.resConfig.getRawResourceItem(e);s.loaded=!1;var a=this.$getAnalyzerByType(u),l=a.destroyRes(e);return this.removeLoadedGroupsByItemName(s.name),l},r.prototype.removeLoadedGroupsByItemName=function(e){for(var t=this.loadedGroups,r=t.length,i=0;r>i;i++)for(var n=this.resConfig.getRawGroupByName(t[i]),o=n.length,s=0;o>s;s++){var a=n[s];if(a.name==e){t.splice(i,1),i--,r=t.length;break}}},r.prototype.isResInLoadedGroup=function(e){for(var t=this.loadedGroups,r=t.length,i=0;r>i;i++)for(var n=this.resConfig.getRawGroupByName(t[i]),o=n.length,s=0;o>s;s++){var a=n[s];if(a.name==e)return!0}return!1},r.prototype.setMaxLoadingThread=function(e){1>e&&(e=1),this.resLoader.thread=e},r.prototype.setMaxRetryTimes=function(e){e=Math.max(e,0),this.resLoader.maxRetryTimes=e},r.GROUP_CONFIG="RES__CONFIG",r}(egret.EventDispatcher);__reflect(_.prototype,"Resource");var L=new _}(RES||(RES={}));var RES;!function(e){var t=function(t){function r(){var e=t.call(this)||this;return e.sheetMap={},e.recyclerIamge=[],e._dataFormat=egret.HttpResponseType.TEXT,e}return __extends(r,t),r.prototype.onLoadFinish=function(e){var t=e.target,r=this.resItemDic[t.$hashCode];delete this.resItemDic[t.hashCode];var i=r.item,n=r.func;if(i.loaded=e.type==egret.Event.COMPLETE,i.loaded)if(t instanceof egret.HttpRequest){i.loaded=!1;var o=this.analyzeConfig(i,t.response);if(o)return this.loadImage(o,r),void this.recycler.push(t)}else this.analyzeBitmap(i,t.data);t instanceof egret.HttpRequest?this.recycler.push(t):this.recyclerIamge.push(t),n.call(r.thisObject,i)},r.prototype.analyzeConfig=function(e,t){var r,i=e.name,n="";try{var o=t;r=JSON.parse(o)}catch(s){egret.$warn(1017,e.url,t)}if(r)if(this.sheetMap[i]=r,r.file)n=this.getRelativePath(e.url,r.file);else{var a=e.url.split("?"),u=a[0].split("/");u[u.length-1]=u[u.length-1].split(".")[0]+".png",n="";for(var c=0;c<u.length;c++)n+=u[c]+(c<u.length-1?"/":"");2==a.length&&(n+=a[2])}return n},r.prototype.analyzeBitmap=function(e,t){var r=e.name;if(!this.fileDic[r]&&t){var i=this.sheetMap[r];delete this.sheetMap[r];var n=e.data&&e.data.subkeys?"":r,o=this.parseAnimation(t,i,n);this.fileDic[r]=o}},r.prototype.getRelativePath=function(e,t){e=e.split("\\").join("/");var r=e.lastIndexOf("/");return e=-1!=r?e.substring(0,r+1)+t:t},r.prototype.parseAnimation=function(e,t,r){for(var i,n=Object.keys(t.mc),o=t.mc[n[0]].frames,s=o.length,a=[],u=0;s>u;u++){i=t.res[o[u].res];var c=new egret.Texture;c.$bitmapData=e,c.$initData(i.x,i.y,i.w,i.h,o[u].x,o[u].y,o[u].sourceW,o[u].sourceH,e.width,e.height)}return a},r.prototype.destroyRes=function(e){var t=this.fileDic[e];return t?(delete this.fileDic[e],!0):!1},r.prototype.loadImage=function(t,r){var i=this.getImageLoader();this.resItemDic[i.hashCode]=r,i.load(e.$getVirtualUrl(t))},r.prototype.getImageLoader=function(){var e=this.recyclerIamge.pop();return e||(e=new egret.ImageLoader,e.addEventListener(egret.Event.COMPLETE,this.onLoadFinish,this),e.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onLoadFinish,this)),e},r}(e.BinAnalyzer);e.AnimationAnalyzer=t,__reflect(t.prototype,"RES.AnimationAnalyzer")}(RES||(RES={}));var egret;!function(e){e.$locale_strings=e.$locale_strings||{},e.$locale_strings.en_US=e.$locale_strings.en_US||{};var t=e.$locale_strings.en_US;t[3200]="RES.createGroup() passed in non-existed key value in configuration: {0}",t[3201]='RES loaded non-existed or empty resource group:"{0}"',t[3202]="Do not use the different types of ways to load the same material!",t[3203]="Can't find the analyzer of the specified file type:{0}。 Please register the specified analyzer in the initialization of the project first,then start the resource loading process。"}(egret||(egret={}));var egret;!function(e){e.$locale_strings=e.$locale_strings||{},e.$locale_strings.zh_CN=e.$locale_strings.zh_CN||{};var t=e.$locale_strings.zh_CN;t[3200]="RES.createGroup()传入了配置中不存在的键值: {0}",t[3201]='RES加载了不存在或空的资源组:"{0}"',t[3202]="请不要使用不同的类型方式来加载同一个素材！",t[3203]="找不到指定文件类型的解析器:{0}。 请先在项目初始化里注册指定文件类型的解析器，再启动资源加载。"}(egret||(egret={}));
var __reflect=this&&this.__reflect||function(t,e,n){t.__class__=e,n?n.push(e):n=[e],t.__types__=t.__types__?n.concat(t.__types__):n},egret;!function(t){var e=function(){function e(){t.$error(1014)}return e.get=function(t){return-1>t&&(t=-1),t>1&&(t=1),function(e){return 0==t?e:0>t?e*(e*-t+1+t):e*((2-e)*t+(1-t))}},e.getPowIn=function(t){return function(e){return Math.pow(e,t)}},e.getPowOut=function(t){return function(e){return 1-Math.pow(1-e,t)}},e.getPowInOut=function(t){return function(e){return(e*=2)<1?.5*Math.pow(e,t):1-.5*Math.abs(Math.pow(2-e,t))}},e.sineIn=function(t){return 1-Math.cos(t*Math.PI/2)},e.sineOut=function(t){return Math.sin(t*Math.PI/2)},e.sineInOut=function(t){return-.5*(Math.cos(Math.PI*t)-1)},e.getBackIn=function(t){return function(e){return e*e*((t+1)*e-t)}},e.getBackOut=function(t){return function(e){return--e*e*((t+1)*e+t)+1}},e.getBackInOut=function(t){return t*=1.525,function(e){return(e*=2)<1?.5*(e*e*((t+1)*e-t)):.5*((e-=2)*e*((t+1)*e+t)+2)}},e.circIn=function(t){return-(Math.sqrt(1-t*t)-1)},e.circOut=function(t){return Math.sqrt(1- --t*t)},e.circInOut=function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},e.bounceIn=function(t){return 1-e.bounceOut(1-t)},e.bounceOut=function(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},e.bounceInOut=function(t){return.5>t?.5*e.bounceIn(2*t):.5*e.bounceOut(2*t-1)+.5},e.getElasticIn=function(t,e){var n=2*Math.PI;return function(i){if(0==i||1==i)return i;var s=e/n*Math.asin(1/t);return-(t*Math.pow(2,10*(i-=1))*Math.sin((i-s)*n/e))}},e.getElasticOut=function(t,e){var n=2*Math.PI;return function(i){if(0==i||1==i)return i;var s=e/n*Math.asin(1/t);return t*Math.pow(2,-10*i)*Math.sin((i-s)*n/e)+1}},e.getElasticInOut=function(t,e){var n=2*Math.PI;return function(i){var s=e/n*Math.asin(1/t);return(i*=2)<1?-.5*(t*Math.pow(2,10*(i-=1))*Math.sin((i-s)*n/e)):t*Math.pow(2,-10*(i-=1))*Math.sin((i-s)*n/e)*.5+1}},e}();e.quadIn=e.getPowIn(2),e.quadOut=e.getPowOut(2),e.quadInOut=e.getPowInOut(2),e.cubicIn=e.getPowIn(3),e.cubicOut=e.getPowOut(3),e.cubicInOut=e.getPowInOut(3),e.quartIn=e.getPowIn(4),e.quartOut=e.getPowOut(4),e.quartInOut=e.getPowInOut(4),e.quintIn=e.getPowIn(5),e.quintOut=e.getPowOut(5),e.quintInOut=e.getPowInOut(5),e.backIn=e.getBackIn(1.7),e.backOut=e.getBackOut(1.7),e.backInOut=e.getBackInOut(1.7),e.elasticIn=e.getElasticIn(1,.3),e.elasticOut=e.getElasticOut(1,.3),e.elasticInOut=e.getElasticInOut(1,.3*1.5),t.Ease=e,__reflect(e.prototype,"egret.Ease")}(egret||(egret={}));var __reflect=this&&this.__reflect||function(t,e,n){t.__class__=e,n?n.push(e):n=[e],t.__types__=t.__types__?n.concat(t.__types__):n},__extends=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},egret;!function(t){var e=function(e){function n(t,n,i){var s=e.call(this)||this;return s._target=null,s._useTicks=!1,s.ignoreGlobalPause=!1,s.loop=!1,s.pluginData=null,s._steps=null,s.paused=!1,s.duration=0,s._prevPos=-1,s.position=null,s._prevPosition=0,s._stepPosition=0,s.passive=!1,s.initialize(t,n,i),s}return __extends(n,e),n.get=function(t,e,i,s){return void 0===i&&(i=null),void 0===s&&(s=!1),s&&n.removeTweens(t),new n(t,e,i)},n.removeTweens=function(t){if(t.tween_count){for(var e=n._tweens,i=e.length-1;i>=0;i--)e[i]._target==t&&(e[i].paused=!0,e.splice(i,1));t.tween_count=0}},n.pauseTweens=function(e){if(e.tween_count)for(var n=t.Tween._tweens,i=n.length-1;i>=0;i--)n[i]._target==e&&(n[i].paused=!0)},n.resumeTweens=function(e){if(e.tween_count)for(var n=t.Tween._tweens,i=n.length-1;i>=0;i--)n[i]._target==e&&(n[i].paused=!1)},n.tick=function(t,e){void 0===e&&(e=!1);var i=t-n._lastTime;n._lastTime=t;for(var s=n._tweens.concat(),r=s.length-1;r>=0;r--){var o=s[r];e&&!o.ignoreGlobalPause||o.paused||o.$tick(o._useTicks?1:i)}return!1},n._register=function(e,i){var s=e._target,r=n._tweens;if(i)s&&(s.tween_count=s.tween_count>0?s.tween_count+1:1),r.push(e),n._inited||(n._lastTime=t.getTimer(),tt.startTick(n.tick),n._inited=!0);else{s&&s.tween_count--;for(var o=r.length;o--;)if(r[o]==e)return void r.splice(o,1)}},n.removeAllTweens=function(){for(var t=n._tweens,e=0,i=t.length;i>e;e++){var s=t[e];s.paused=!0,s._target.tween_count=0}t.length=0},n.prototype.initialize=function(t,e,i){this._target=t,e&&(this._useTicks=e.useTicks,this.ignoreGlobalPause=e.ignoreGlobalPause,this.loop=e.loop,e.onChange&&this.addEventListener("change",e.onChange,e.onChangeObj),e.override&&n.removeTweens(t)),this.pluginData=i||{},this._curQueueProps={},this._initQueueProps={},this._steps=[],e&&e.paused?this.paused=!0:n._register(this,!0),e&&null!=e.position&&this.setPosition(e.position,n.NONE)},n.prototype.setPosition=function(t,e){void 0===e&&(e=1),0>t&&(t=0);var n=t,i=!1;if(n>=this.duration)if(this.loop){var s=n%this.duration;n=n>0&&0===s?this.duration:s}else n=this.duration,i=!0;if(n==this._prevPos)return i;i&&this.setPaused(!0);var r=this._prevPos;if(this.position=this._prevPos=n,this._prevPosition=t,this._target&&this._steps.length>0){for(var o=this._steps.length,u=-1,p=0;o>p&&!("step"==this._steps[p].type&&(u=p,this._steps[p].t<=n&&this._steps[p].t+this._steps[p].d>=n));p++);for(var p=0;o>p;p++)if("action"==this._steps[p].type)0!=e&&(this._useTicks?this._runAction(this._steps[p],n,n):1==e&&r>n?(r!=this.duration&&this._runAction(this._steps[p],r,this.duration),this._runAction(this._steps[p],0,n,!0)):this._runAction(this._steps[p],r,n));else if("step"==this._steps[p].type&&u==p){var a=this._steps[u];this._updateTargetProps(a,Math.min((this._stepPosition=n-a.t)/a.d,1))}}return this.dispatchEventWith("change"),i},n.prototype._runAction=function(t,e,n,i){void 0===i&&(i=!1);var s=e,r=n;e>n&&(s=n,r=e);var o=t.t;(o==r||o>s&&r>o||i&&o==e)&&t.f.apply(t.o,t.p)},n.prototype._updateTargetProps=function(t,e){var i,s,r,o,u,p;if(t||1!=e){if(this.passive=!!t.v,this.passive)return;t.e&&(e=t.e(e,0,1,1)),i=t.p0,s=t.p1}else this.passive=!1,i=s=this._curQueueProps;for(var a in this._initQueueProps){null==(o=i[a])&&(i[a]=o=this._initQueueProps[a]),null==(u=s[a])&&(s[a]=u=o),r=o==u||0==e||1==e||"number"!=typeof o?1==e?u:o:o+(u-o)*e;var h=!1;if(p=n._plugins[a])for(var c=0,_=p.length;_>c;c++){var f=p[c].tween(this,a,r,i,s,e,!!t&&i==s,!t);f==n.IGNORE?h=!0:r=f}h||(this._target[a]=r)}},n.prototype.setPaused=function(t){return this.paused==t?this:(this.paused=t,n._register(this,!t),this)},n.prototype._cloneProps=function(t){var e={};for(var n in t)e[n]=t[n];return e},n.prototype._addStep=function(t){return t.d>0&&(t.type="step",this._steps.push(t),t.t=this.duration,this.duration+=t.d),this},n.prototype._appendQueueProps=function(t){var e,i,s,r,o;for(var u in t)if(void 0===this._initQueueProps[u]){if(i=this._target[u],e=n._plugins[u])for(s=0,r=e.length;r>s;s++)i=e[s].init(this,u,i);this._initQueueProps[u]=this._curQueueProps[u]=void 0===i?null:i}else i=this._curQueueProps[u];for(var u in t){if(i=this._curQueueProps[u],e=n._plugins[u])for(o=o||{},s=0,r=e.length;r>s;s++)e[s].step&&e[s].step(this,u,i,t[u],o);this._curQueueProps[u]=t[u]}return o&&this._appendQueueProps(o),this._curQueueProps},n.prototype._addAction=function(t){return t.t=this.duration,t.type="action",this._steps.push(t),this},n.prototype._set=function(t,e){for(var n in t)e[n]=t[n]},n.prototype.wait=function(t,e){if(null==t||0>=t)return this;var n=this._cloneProps(this._curQueueProps);return this._addStep({d:t,p0:n,p1:n,v:e})},n.prototype.to=function(t,e,n){return void 0===n&&(n=void 0),(isNaN(e)||0>e)&&(e=0),this._addStep({d:e||0,p0:this._cloneProps(this._curQueueProps),e:n,p1:this._cloneProps(this._appendQueueProps(t))}),this.set(t)},n.prototype.call=function(t,e,n){return void 0===e&&(e=void 0),void 0===n&&(n=void 0),this._addAction({f:t,p:n?n:[],o:e?e:this._target})},n.prototype.set=function(t,e){return void 0===e&&(e=null),this._appendQueueProps(t),this._addAction({f:this._set,o:this,p:[t,e?e:this._target]})},n.prototype.play=function(t){return t||(t=this),this.call(t.setPaused,t,[!1])},n.prototype.pause=function(t){return t||(t=this),this.call(t.setPaused,t,[!0])},n.prototype.$tick=function(t){this.paused||this.setPosition(this._prevPosition+t)},n}(t.EventDispatcher);e.NONE=0,e.LOOP=1,e.REVERSE=2,e._tweens=[],e.IGNORE={},e._plugins={},e._inited=!1,e._lastTime=0,t.Tween=e,__reflect(e.prototype,"egret.Tween")}(egret||(egret={}));var tt;!function(t){function e(t){egret.Capabilities.runtimeType==egret.RuntimeType.WEB?window.setInterval(function(){t(egret.getTimer())},16):egret.startTick(t,null)}t.startTick=e}(tt||(tt={}));var __reflect=this&&this.__reflect||function(t,e,n){t.__class__=e,n?n.push(e):n=[e],t.__types__=t.__types__?n.concat(t.__types__):n},__extends=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},egret;!function(t){var e;!function(e){function n(e){if("function"==typeof e)return e;var n=t.Ease[e];return"function"==typeof n?n:null}function i(t,e,n,i){var s=t.prototype;s.__meta__=s.__meta__||{},s.__meta__[e]=n,i&&(s.__defaultProperty__=e)}var s=function(t){function e(){var e=t.apply(this,arguments)||this;return e.name="",e}return __extends(e,t),e}(t.EventDispatcher);e.BasePath=s,__reflect(s.prototype,"egret.tween.BasePath");var r=function(t){function e(){var e=t.apply(this,arguments)||this;return e.props=void 0,e.duration=500,e.ease=void 0,e}return __extends(e,t),e}(s);e.To=r,__reflect(r.prototype,"egret.tween.To");var o=function(t){function e(){var e=t.apply(this,arguments)||this;return e.duration=500,e.passive=void 0,e}return __extends(e,t),e}(s);e.Wait=o,__reflect(o.prototype,"egret.tween.Wait");var u=function(t){function e(){var e=t.apply(this,arguments)||this;return e.props=void 0,e}return __extends(e,t),e}(s);e.Set=u,__reflect(u.prototype,"egret.tween.Set");var p=function(t){function e(){var e=t.apply(this,arguments)||this;return e.delta=0,e}return __extends(e,t),e}(s);e.Tick=p,__reflect(p.prototype,"egret.tween.Tick");var a=function(e){function i(){var t=e.call(this)||this;return t.isStop=!1,t}return __extends(i,e),Object.defineProperty(i.prototype,"props",{get:function(){return this._props},set:function(t){this._props=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"target",{get:function(){return this._target},set:function(t){this._target=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"paths",{get:function(){return this._paths},set:function(t){this._paths=t||[]},enumerable:!0,configurable:!0}),i.prototype.play=function(t){this.tween?(this.tween.setPaused(!1),this.isStop&&void 0==t&&(t=0,this.isStop=!1),void 0!==t&&null!==t&&this.tween.setPosition(t)):this.createTween(t)},i.prototype.pause=function(){this.tween&&this.tween.setPaused(!0)},i.prototype.stop=function(){this.pause(),this.isStop=!0},i.prototype.createTween=function(e){this.tween=t.Tween.get(this._target,this._props),this._paths&&this.applyPaths(),void 0!==e&&null!==e&&this.tween.setPosition(e)},i.prototype.applyPaths=function(){for(var t=0;t<this._paths.length;t++){var e=this._paths[t];this.applyPath(e)}},i.prototype.applyPath=function(t){var e=this;t instanceof r?this.tween.to(t.props,t.duration,n(t.ease)):t instanceof o?this.tween.wait(t.duration,t.passive):t instanceof u?this.tween.set(t.props):t instanceof p&&this.tween.$tick(t.delta),this.tween.call(function(){return e.pathComplete(t)})},i.prototype.pathComplete=function(t){t.dispatchEventWith("complete"),this.dispatchEventWith("pathComplete",!1,t);var e=this._paths.indexOf(t);e>=0&&e===this._paths.length-1&&this.dispatchEventWith("complete")},i}(t.EventDispatcher);e.TweenItem=a,__reflect(a.prototype,"egret.tween.TweenItem"),i(a,"paths","Array",!0);var h=function(t){function e(){var e=t.call(this)||this;return e.completeCount=0,e}return __extends(e,t),Object.defineProperty(e.prototype,"items",{get:function(){return this._items},set:function(t){this.completeCount=0,this.registerEvent(!1),this._items=t,this.registerEvent(!0)},enumerable:!0,configurable:!0}),e.prototype.registerEvent=function(t){var e=this;this._items&&this._items.forEach(function(n){t?n.addEventListener("complete",e.itemComplete,e):n.removeEventListener("complete",e.itemComplete,e)})},e.prototype.play=function(t){if(this._items)for(var e=0;e<this._items.length;e++){var n=this._items[e];n.play(t)}},e.prototype.pause=function(){if(this._items)for(var t=0;t<this._items.length;t++){var e=this._items[t];e.pause()}},e.prototype.stop=function(){if(this._items)for(var t=0;t<this._items.length;t++){var e=this._items[t];e.stop()}},e.prototype.itemComplete=function(t){var e=t.currentTarget;this.completeCount++,this.dispatchEventWith("itemComplete",!1,e),this.completeCount===this.items.length&&(this.dispatchEventWith("complete"),this.completeCount=0)},e}(t.EventDispatcher);e.TweenGroup=h,__reflect(h.prototype,"egret.tween.TweenGroup"),i(h,"items","Array",!0)}(e=t.tween||(t.tween={}))}(egret||(egret={}));
var __reflect=this&&this.__reflect||function(t,e,r){t.__class__=e,r?r.push(e):r=[e],t.__types__=t.__types__?r.concat(t.__types__):r},__extends=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);r.prototype=e.prototype,t.prototype=new r},egret;!function(t){var e=function(){function t(){}return t.BINARY="binary",t.TEXT="text",t.VARIABLES="variables",t.TEXTURE="texture",t.SOUND="sound",t}();t.URLLoaderDataFormat=e,__reflect(e.prototype,"egret.URLLoaderDataFormat")}(egret||(egret={}));var egret;!function(t){var e=function(t){function e(e,r,i){var o=t.call(this)||this;return o._name=e,o._frame=0|r,i&&(o._end=0|i),o}return __extends(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"frame",{get:function(){return this._frame},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"end",{get:function(){return this._end},enumerable:!0,configurable:!0}),e.prototype.clone=function(){return new e(this._name,this._frame,this._end)},e}(t.EventDispatcher);t.FrameLabel=e,__reflect(e.prototype,"egret.FrameLabel")}(egret||(egret={}));var egret;!function(t){var e=function(e){function r(){var t=e.call(this)||this;return t.$mcData=null,t.numFrames=1,t.frames=[],t.labels=null,t.events=[],t.frameRate=0,t.textureData=null,t.spriteSheet=null,t}return __extends(r,e),r.prototype.$init=function(t,e,r){this.textureData=e,this.spriteSheet=r,this.setMCData(t)},r.prototype.getKeyFrameData=function(t){var e=this.frames[t-1];return e.frame&&(e=this.frames[e.frame-1]),e},r.prototype.getTextureByFrame=function(t){var e=this.getKeyFrameData(t);if(e.res){var r=this.getTextureByResName(e.res);return r}return null},r.prototype.$getOffsetByFrame=function(t,e){var r=this.getKeyFrameData(t);r.res&&e.setTo(0|r.x,0|r.y)},r.prototype.getTextureByResName=function(t){if(null==this.spriteSheet)return null;var e=this.spriteSheet.getTexture(t);if(!e){var r=this.textureData[t];e=this.spriteSheet.createTexture(t,r.x,r.y,r.w,r.h)}return e},r.prototype.$isDataValid=function(){return this.frames.length>0},r.prototype.$isTextureValid=function(){return null!=this.textureData&&null!=this.spriteSheet},r.prototype.$fillMCData=function(t){this.frameRate=t.frameRate||24,this.fillFramesData(t.frames),this.fillFrameLabelsData(t.labels),this.fillFrameEventsData(t.events)},r.prototype.fillFramesData=function(t){for(var e,r=this.frames,i=t?t.length:0,o=0;i>o;o++){var n=t[o];if(r.push(n),n.duration){var s=parseInt(n.duration);if(s>1){e=r.length;for(var a=1;s>a;a++)r.push({frame:e})}}}this.numFrames=r.length},r.prototype.fillFrameLabelsData=function(e){if(e){var r=e.length;if(r>0){this.labels=[];for(var i=0;r>i;i++){var o=e[i];this.labels.push(new t.FrameLabel(o.name,o.frame,o.end))}}}},r.prototype.fillFrameEventsData=function(t){if(t){var e=t.length;if(e>0){this.events=[];for(var r=0;e>r;r++){var i=t[r];this.events[i.frame]=i.name}}}},Object.defineProperty(r.prototype,"mcData",{get:function(){return this.$mcData},set:function(t){this.setMCData(t)},enumerable:!0,configurable:!0}),r.prototype.setMCData=function(t){this.$mcData!=t&&(this.$mcData=t,t&&this.$fillMCData(t))},r}(t.HashObject);t.MovieClipData=e,__reflect(e.prototype,"egret.MovieClipData")}(egret||(egret={}));var egret;!function(t){var e=function(e){function r(t,r){var i=e.call(this)||this;return i.enableCache=!0,i.$mcDataCache={},i.$mcDataSet=t,i.setTexture(r),i}return __extends(r,e),r.prototype.clearCache=function(){this.$mcDataCache={}},r.prototype.generateMovieClipData=function(e){if(void 0===e&&(e=""),""==e&&this.$mcDataSet)for(e in this.$mcDataSet.mc)break;if(""==e)return null;var r=this.findFromCache(e,this.$mcDataCache);return r||(r=new t.MovieClipData,this.fillData(e,r,this.$mcDataCache)),r},r.prototype.findFromCache=function(t,e){return this.enableCache&&e[t]?e[t]:null},r.prototype.fillData=function(t,e,r){if(this.$mcDataSet){var i=this.$mcDataSet.mc[t];i&&(e.$init(i,this.$mcDataSet.res,this.$spriteSheet),this.enableCache&&(r[t]=e))}},Object.defineProperty(r.prototype,"mcDataSet",{get:function(){return this.$mcDataSet},set:function(t){this.$mcDataSet=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"texture",{set:function(t){this.setTexture(t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"spriteSheet",{get:function(){return this.$spriteSheet},enumerable:!0,configurable:!0}),r.prototype.setTexture=function(e){this.$spriteSheet=e?new t.SpriteSheet(e):null},r}(t.EventDispatcher);t.MovieClipDataFactory=e,__reflect(e.prototype,"egret.MovieClipDataFactory")}(egret||(egret={}));var egret;!function(t){var e=function(e){function r(t,r,i,o){void 0===r&&(r=!1),void 0===i&&(i=!1),void 0===o&&(o=null);var n=e.call(this,t,r,i)||this;return n.frameLabel=null,n.frameLabel=o,n}return __extends(r,e),r.dispatchMovieClipEvent=function(e,i,o){void 0===o&&(o=null);var n=t.Event.create(r,i);n.frameLabel=o;var s=e.dispatchEvent(n);return t.Event.release(n),s},r.FRAME_LABEL="frame_label",r}(t.Event);t.MovieClipEvent=e,__reflect(e.prototype,"egret.MovieClipEvent")}(egret||(egret={}));var egret;!function(t){var e=function(){function e(){t.$error(1014)}return e.get=function(t){return-1>t&&(t=-1),t>1&&(t=1),function(e){return 0==t?e:0>t?e*(e*-t+1+t):e*((2-e)*t+(1-t))}},e.getPowOut=function(t){return function(e){return 1-Math.pow(1-e,t)}},e.quintOut=e.getPowOut(5),e.quartOut=e.getPowOut(4),e}();t.ScrollEase=e,__reflect(e.prototype,"egret.ScrollEase");var r=function(e){function r(t,r,i){var o=e.call(this)||this;return o._target=null,o._useTicks=!1,o.ignoreGlobalPause=!1,o.loop=!1,o.pluginData=null,o._steps=null,o._actions=null,o.paused=!1,o.duration=0,o._prevPos=-1,o.position=null,o._prevPosition=0,o._stepPosition=0,o.passive=!1,o.initialize(t,r,i),o}return __extends(r,e),r.get=function(t,e,i,o){return void 0===e&&(e=null),void 0===i&&(i=null),void 0===o&&(o=!1),o&&r.removeTweens(t),new r(t,e,i)},r.removeTweens=function(t){if(t.tween_count){for(var e=r._tweens,i=e.length-1;i>=0;i--)e[i]._target==t&&(e[i].paused=!0,e.splice(i,1));t.tween_count=0}},r.tick=function(t,e){void 0===e&&(e=!1);var i=t-r._lastTime;r._lastTime=t;for(var o=r._tweens.concat(),n=o.length-1;n>=0;n--){var s=o[n];e&&!s.ignoreGlobalPause||s.paused||s.tick(s._useTicks?1:i)}return!1},r._register=function(e,i){var o=e._target,n=r._tweens;if(i)o&&(o.tween_count=o.tween_count>0?o.tween_count+1:1),n.push(e),r._inited||(r._lastTime=t.getTimer(),t.ticker.$startTick(r.tick,null),r._inited=!0);else{o&&o.tween_count--;for(var s=n.length;s--;)if(n[s]==e)return void n.splice(s,1)}},r.prototype.initialize=function(t,e,i){this._target=t,e&&(this._useTicks=e.useTicks,this.ignoreGlobalPause=e.ignoreGlobalPause,this.loop=e.loop,e.onChange&&this.addEventListener("change",e.onChange,e.onChangeObj),e.override&&r.removeTweens(t)),this.pluginData=i||{},this._curQueueProps={},this._initQueueProps={},this._steps=[],this._actions=[],e&&e.paused?this.paused=!0:r._register(this,!0),e&&null!=e.position&&this.setPosition(e.position)},r.prototype.setPosition=function(t,e){void 0===e&&(e=1),0>t&&(t=0);var r=t,i=!1;if(r>=this.duration&&(this.loop?r%=this.duration:(r=this.duration,i=!0)),r==this._prevPos)return i;var o=this._prevPos;if(this.position=this._prevPos=r,this._prevPosition=t,this._target)if(i)this._updateTargetProps(null,1);else if(this._steps.length>0){var n=void 0,s=this._steps.length;for(n=0;s>n&&!(this._steps[n].t>r);n++);var a=this._steps[n-1];this._updateTargetProps(a,(this._stepPosition=r-a.t)/a.d)}return i&&this.setPaused(!0),0!=e&&this._actions.length>0&&(this._useTicks?this._runActions(r,r):1==e&&o>r?(o!=this.duration&&this._runActions(o,this.duration),this._runActions(0,r,!0)):this._runActions(o,r)),this.dispatchEventWith("change"),i},r.prototype._runActions=function(t,e,r){void 0===r&&(r=!1);var i=t,o=e,n=-1,s=this._actions.length,a=1;for(t>e&&(i=e,o=t,n=s,s=a=-1);(n+=a)!=s;){var h=this._actions[n],c=h.t;(c==o||c>i&&o>c||r&&c==t)&&h.f.apply(h.o,h.p)}},r.prototype._updateTargetProps=function(t,e){var i,o,n,s,a,h;if(t||1!=e){if(this.passive=!!t.v,this.passive)return;t.e&&(e=t.e(e,0,1,1)),i=t.p0,o=t.p1}else this.passive=!1,i=o=this._curQueueProps;for(var c in this._initQueueProps){null==(s=i[c])&&(i[c]=s=this._initQueueProps[c]),null==(a=o[c])&&(o[c]=a=s),n=s==a||0==e||1==e||"number"!=typeof s?1==e?a:s:s+(a-s)*e;var l=!1;if(h=r._plugins[c])for(var u=0,p=h.length;p>u;u++){var _=h[u].tween(this,c,n,i,o,e,!!t&&i==o,!t);_==r.IGNORE?l=!0:n=_}l||(this._target[c]=n)}},r.prototype.setPaused=function(t){return this.paused=t,r._register(this,!t),this},r.prototype._cloneProps=function(t){var e={};for(var r in t)e[r]=t[r];return e},r.prototype._addStep=function(t){return t.d>0&&(this._steps.push(t),t.t=this.duration,this.duration+=t.d),this},r.prototype._appendQueueProps=function(t){var e,i,o,n,s;for(var a in t)if(void 0===this._initQueueProps[a]){if(i=this._target[a],e=r._plugins[a])for(o=0,n=e.length;n>o;o++)i=e[o].init(this,a,i);this._initQueueProps[a]=this._curQueueProps[a]=void 0===i?null:i}else i=this._curQueueProps[a];for(var a in t){if(i=this._curQueueProps[a],e=r._plugins[a])for(s=s||{},o=0,n=e.length;n>o;o++)e[o].step&&e[o].step(this,a,i,t[a],s);this._curQueueProps[a]=t[a]}return s&&this._appendQueueProps(s),this._curQueueProps},r.prototype._addAction=function(t){return t.t=this.duration,this._actions.push(t),this},r.prototype.to=function(t,e,r){return void 0===r&&(r=void 0),(isNaN(e)||0>e)&&(e=0),this._addStep({d:e||0,p0:this._cloneProps(this._curQueueProps),e:r,p1:this._cloneProps(this._appendQueueProps(t))})},r.prototype.call=function(t,e,r){return void 0===e&&(e=void 0),void 0===r&&(r=void 0),this._addAction({f:t,p:r?r:[],o:e?e:this._target})},r.prototype.tick=function(t){this.paused||this.setPosition(this._prevPosition+t)},r._tweens=[],r.IGNORE={},r._plugins={},r._inited=!1,r._lastTime=0,r}(t.EventDispatcher);t.ScrollTween=r,__reflect(r.prototype,"egret.ScrollTween")}(egret||(egret={}));var egret;!function(t){var e=function(e){function r(r){void 0===r&&(r=null);var i=e.call(this)||this;return i.scrollBeginThreshold=10,i.scrollSpeed=1,i._content=null,i.delayTouchBeginEvent=null,i.touchBeginTimer=null,i.touchEnabled=!0,i._ScrV_Props_=new t.ScrollViewProperties,r&&i.setContent(r),i}return __extends(r,e),Object.defineProperty(r.prototype,"bounces",{get:function(){return this._ScrV_Props_._bounces},set:function(t){this._ScrV_Props_._bounces=!!t},enumerable:!0,configurable:!0}),r.prototype.setContent=function(t){this._content!==t&&(this.removeContent(),t&&(this._content=t,e.prototype.addChild.call(this,t),this._addEvents()))},r.prototype.removeContent=function(){this._content&&(this._removeEvents(),e.prototype.removeChildAt.call(this,0)),this._content=null},Object.defineProperty(r.prototype,"verticalScrollPolicy",{get:function(){return this._ScrV_Props_._verticalScrollPolicy},set:function(t){t!=this._ScrV_Props_._verticalScrollPolicy&&(this._ScrV_Props_._verticalScrollPolicy=t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"horizontalScrollPolicy",{get:function(){return this._ScrV_Props_._horizontalScrollPolicy},set:function(t){t!=this._ScrV_Props_._horizontalScrollPolicy&&(this._ScrV_Props_._horizontalScrollPolicy=t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"scrollLeft",{get:function(){return this._ScrV_Props_._scrollLeft},set:function(t){t!=this._ScrV_Props_._scrollLeft&&(this._ScrV_Props_._scrollLeft=t,this._validatePosition(!1,!0),this._updateContentPosition())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"scrollTop",{get:function(){return this._ScrV_Props_._scrollTop},set:function(t){t!=this._ScrV_Props_._scrollTop&&(this._ScrV_Props_._scrollTop=t,this._validatePosition(!0,!1),this._updateContentPosition())},enumerable:!0,configurable:!0}),r.prototype.setScrollPosition=function(t,e,r){if(void 0===r&&(r=!1),(!r||0!=t||0!=e)&&(r||this._ScrV_Props_._scrollTop!=t||this._ScrV_Props_._scrollLeft!=e)){var i=this._ScrV_Props_._scrollTop,o=this._ScrV_Props_._scrollLeft;if(r){var n=this.getMaxScrollLeft(),s=this.getMaxScrollTop();(0>=i||i>=s)&&(t/=2),(0>=o||o>=n)&&(e/=2);var a=i+t,h=o+e,c=this._ScrV_Props_._bounces;c||((0>=a||a>=s)&&(a=Math.max(0,Math.min(a,s))),(0>=h||h>=n)&&(h=Math.max(0,Math.min(h,n)))),this._ScrV_Props_._scrollTop=a,this._ScrV_Props_._scrollLeft=h}else this._ScrV_Props_._scrollTop=t,this._ScrV_Props_._scrollLeft=e;this._validatePosition(!0,!0),this._updateContentPosition()}},r.prototype._validatePosition=function(t,e){if(void 0===t&&(t=!1),void 0===e&&(e=!1),t){var r=this.height,i=this._getContentHeight();this._ScrV_Props_._scrollTop=Math.max(this._ScrV_Props_._scrollTop,(0-r)/2),this._ScrV_Props_._scrollTop=Math.min(this._ScrV_Props_._scrollTop,i>r?i-r/2:r/2)}if(e){var o=this.width,n=this._getContentWidth();this._ScrV_Props_._scrollLeft=Math.max(this._ScrV_Props_._scrollLeft,(0-o)/2),this._ScrV_Props_._scrollLeft=Math.min(this._ScrV_Props_._scrollLeft,n>o?n-o/2:o/2)}},r.prototype.$setWidth=function(t){this.$explicitWidth!=t&&(e.prototype.$setWidth.call(this,t),this._updateContentPosition())},r.prototype.$setHeight=function(t){this.$explicitHeight!=t&&(e.prototype.$setHeight.call(this,t),this._updateContentPosition())},r.prototype._updateContentPosition=function(){var e=this.height,r=this.width;this.scrollRect=new t.Rectangle(Math.round(this._ScrV_Props_._scrollLeft),Math.round(this._ScrV_Props_._scrollTop),r,e),this.dispatchEvent(new t.Event(t.Event.CHANGE))},r.prototype._checkScrollPolicy=function(){var t=this._ScrV_Props_._horizontalScrollPolicy,e=this.__checkScrollPolicy(t,this._getContentWidth(),this.width);this._ScrV_Props_._hCanScroll=e;var r=this._ScrV_Props_._verticalScrollPolicy,i=this.__checkScrollPolicy(r,this._getContentHeight(),this.height);return this._ScrV_Props_._vCanScroll=i,e||i},r.prototype.__checkScrollPolicy=function(t,e,r){return"on"==t?!0:"off"==t?!1:e>r},r.prototype._addEvents=function(){this.addEventListener(t.TouchEvent.TOUCH_BEGIN,this._onTouchBegin,this),this.addEventListener(t.TouchEvent.TOUCH_BEGIN,this._onTouchBeginCapture,this,!0),this.addEventListener(t.TouchEvent.TOUCH_END,this._onTouchEndCapture,this,!0)},r.prototype._removeEvents=function(){this.removeEventListener(t.TouchEvent.TOUCH_BEGIN,this._onTouchBegin,this),this.removeEventListener(t.TouchEvent.TOUCH_BEGIN,this._onTouchBeginCapture,this,!0),this.removeEventListener(t.TouchEvent.TOUCH_END,this._onTouchEndCapture,this,!0)},r.prototype._onTouchBegin=function(e){if(!e.$isDefaultPrevented){var r=this._checkScrollPolicy();r&&(this._ScrV_Props_._touchStartPosition.x=e.stageX,this._ScrV_Props_._touchStartPosition.y=e.stageY,(this._ScrV_Props_._isHTweenPlaying||this._ScrV_Props_._isVTweenPlaying)&&this._onScrollFinished(),this._tempStage=this.stage,this._tempStage.addEventListener(t.TouchEvent.TOUCH_MOVE,this._onTouchMove,this),this._tempStage.addEventListener(t.TouchEvent.TOUCH_END,this._onTouchEnd,this),this._tempStage.addEventListener(t.TouchEvent.LEAVE_STAGE,this._onTouchEnd,this),this.addEventListener(t.Event.ENTER_FRAME,this._onEnterFrame,this),this._logTouchEvent(e),e.preventDefault())}},r.prototype._onTouchBeginCapture=function(e){var r=this._checkScrollPolicy();if(r){for(var i=e.target;i!=this;){if("_checkScrollPolicy"in i&&(r=i._checkScrollPolicy()))return;i=i.parent}e.stopPropagation();var o=this.cloneTouchEvent(e);this.delayTouchBeginEvent=o,this.touchBeginTimer||(this.touchBeginTimer=new t.Timer(100,1),this.touchBeginTimer.addEventListener(t.TimerEvent.TIMER_COMPLETE,this._onTouchBeginTimer,this)),this.touchBeginTimer.start(),this._onTouchBegin(e)}},r.prototype._onTouchEndCapture=function(e){var r=this;if(this.delayTouchBeginEvent){this._onTouchBeginTimer(),e.stopPropagation();var i=this.cloneTouchEvent(e);t.callLater(function(){r.stage&&r.dispatchPropagationEvent(i)},this)}},r.prototype._onTouchBeginTimer=function(){this.touchBeginTimer.stop();var t=this.delayTouchBeginEvent;this.delayTouchBeginEvent=null,this.stage&&this.dispatchPropagationEvent(t)},r.prototype.dispatchPropagationEvent=function(e){for(var r=e.$target,i=this.$getPropagationList(r),o=i.length,n=.5*i.length,s=-1,a=0;o>a;a++)if(i[a]===this._content){s=a;break}i.splice(0,s+1),n-=s+1,this.$dispatchPropagationEvent(e,i,n),t.Event.release(e)},r.prototype._onTouchMove=function(t){if(this._ScrV_Props_._lastTouchPosition.x!=t.stageX||this._ScrV_Props_._lastTouchPosition.y!=t.stageY){if(!this._ScrV_Props_._scrollStarted){var e=t.stageX-this._ScrV_Props_._touchStartPosition.x,r=t.stageY-this._ScrV_Props_._touchStartPosition.y,i=Math.sqrt(e*e+r*r);if(i<this.scrollBeginThreshold)return void this._logTouchEvent(t)}this._ScrV_Props_._scrollStarted=!0,this.delayTouchBeginEvent&&(this.delayTouchBeginEvent=null,this.touchBeginTimer.stop()),this.touchChildren=!1;var o=this._getPointChange(t);this.setScrollPosition(o.y,o.x,!0),this._calcVelocitys(t),this._logTouchEvent(t)}},r.prototype._onTouchEnd=function(e){this.touchChildren=!0,this._ScrV_Props_._scrollStarted=!1,this._tempStage.removeEventListener(t.TouchEvent.TOUCH_MOVE,this._onTouchMove,this),this._tempStage.removeEventListener(t.TouchEvent.TOUCH_END,this._onTouchEnd,this),this._tempStage.removeEventListener(t.TouchEvent.LEAVE_STAGE,this._onTouchEnd,this),this.removeEventListener(t.Event.ENTER_FRAME,this._onEnterFrame,this),this._moveAfterTouchEnd()},r.prototype._onEnterFrame=function(e){var r=t.getTimer();r-this._ScrV_Props_._lastTouchTime>100&&r-this._ScrV_Props_._lastTouchTime<300&&this._calcVelocitys(this._ScrV_Props_._lastTouchEvent)},r.prototype._logTouchEvent=function(e){this._ScrV_Props_._lastTouchPosition.x=e.stageX,this._ScrV_Props_._lastTouchPosition.y=e.stageY,this._ScrV_Props_._lastTouchEvent=this.cloneTouchEvent(e),this._ScrV_Props_._lastTouchTime=t.getTimer()},r.prototype._getPointChange=function(t){return{x:this._ScrV_Props_._hCanScroll===!1?0:this._ScrV_Props_._lastTouchPosition.x-t.stageX,y:this._ScrV_Props_._vCanScroll===!1?0:this._ScrV_Props_._lastTouchPosition.y-t.stageY}},r.prototype._calcVelocitys=function(e){var r=t.getTimer();if(0==this._ScrV_Props_._lastTouchTime)return void(this._ScrV_Props_._lastTouchTime=r);var i=this._getPointChange(e),o=r-this._ScrV_Props_._lastTouchTime;i.x/=o,i.y/=o,this._ScrV_Props_._velocitys.push(i),this._ScrV_Props_._velocitys.length>5&&this._ScrV_Props_._velocitys.shift(),this._ScrV_Props_._lastTouchPosition.x=e.stageX,this._ScrV_Props_._lastTouchPosition.y=e.stageY},r.prototype._getContentWidth=function(){return this._content.$explicitWidth||this._content.width},r.prototype._getContentHeight=function(){return this._content.$explicitHeight||this._content.height},r.prototype.getMaxScrollLeft=function(){var t=this._getContentWidth()-this.width;return Math.max(0,t)},r.prototype.getMaxScrollTop=function(){var t=this._getContentHeight()-this.height;return Math.max(0,t)},r.prototype._moveAfterTouchEnd=function(){if(0!=this._ScrV_Props_._velocitys.length){for(var t={x:0,y:0},e=0,i=0;i<this._ScrV_Props_._velocitys.length;i++){var o=this._ScrV_Props_._velocitys[i],n=r.weight[i];t.x+=o.x*n,t.y+=o.y*n,e+=n}this._ScrV_Props_._velocitys.length=0,this.scrollSpeed<=0&&(this.scrollSpeed=1);var s=t.x/e*this.scrollSpeed,a=t.y/e*this.scrollSpeed,h=Math.abs(s),c=Math.abs(a),l=this.getMaxScrollLeft(),u=this.getMaxScrollTop(),p=h>.02?this.getAnimationDatas(s,this._ScrV_Props_._scrollLeft,l):{position:this._ScrV_Props_._scrollLeft,duration:1},_=c>.02?this.getAnimationDatas(a,this._ScrV_Props_._scrollTop,u):{position:this._ScrV_Props_._scrollTop,duration:1};this.setScrollLeft(p.position,p.duration),this.setScrollTop(_.position,_.duration)}},r.prototype.onTweenFinished=function(t){t==this._ScrV_Props_._vScrollTween&&(this._ScrV_Props_._isVTweenPlaying=!1),t==this._ScrV_Props_._hScrollTween&&(this._ScrV_Props_._isHTweenPlaying=!1),0==this._ScrV_Props_._isHTweenPlaying&&0==this._ScrV_Props_._isVTweenPlaying&&this._onScrollFinished()},r.prototype._onScrollStarted=function(){},r.prototype._onScrollFinished=function(){t.ScrollTween.removeTweens(this),this._ScrV_Props_._hScrollTween=null,this._ScrV_Props_._vScrollTween=null,this._ScrV_Props_._isHTweenPlaying=!1,this._ScrV_Props_._isVTweenPlaying=!1,this.dispatchEvent(new t.Event(t.Event.COMPLETE))},r.prototype.setScrollTop=function(e,r){void 0===r&&(r=0);var i=Math.min(this.getMaxScrollTop(),Math.max(e,0));if(0==r)return void(this.scrollTop=i);0==this._ScrV_Props_._bounces&&(e=i);var o=t.ScrollTween.get(this).to({scrollTop:e},r,t.ScrollEase.quartOut);i!=e&&o.to({scrollTop:i},300,t.ScrollEase.quintOut),this._ScrV_Props_._isVTweenPlaying=!0,this._ScrV_Props_._vScrollTween=o,o.call(this.onTweenFinished,this,[o]),this._ScrV_Props_._isHTweenPlaying||this._onScrollStarted()},r.prototype.setScrollLeft=function(e,r){void 0===r&&(r=0);var i=Math.min(this.getMaxScrollLeft(),Math.max(e,0));if(0==r)return void(this.scrollLeft=i);0==this._ScrV_Props_._bounces&&(e=i);var o=t.ScrollTween.get(this).to({scrollLeft:e},r,t.ScrollEase.quartOut);i!=e&&o.to({scrollLeft:i},300,t.ScrollEase.quintOut),this._ScrV_Props_._isHTweenPlaying=!0,this._ScrV_Props_._hScrollTween=o,o.call(this.onTweenFinished,this,[o]),this._ScrV_Props_._isVTweenPlaying||this._onScrollStarted()},r.prototype.getAnimationDatas=function(t,e,r){var i=Math.abs(t),o=.95,n=0,s=.998,a=.02,h=e+500*t;if(0>h||h>r)for(h=e;Math.abs(t)!=1/0&&Math.abs(t)>a;)h+=t,t*=0>h||h>r?s*o:s,n++;else n=500*-Math.log(a/i);var c={position:Math.min(r+50,Math.max(h,-50)),duration:n};return c},r.prototype.cloneTouchEvent=function(e){var r=new t.TouchEvent(e.type,e.bubbles,e.cancelable);return r.touchPointID=e.touchPointID,r.$stageX=e.stageX,r.$stageY=e.stageY,r.touchDown=e.touchDown,r.$isDefaultPrevented=!1,r.$target=e.target,r},r.prototype.throwNotSupportedError=function(){t.$error(1023)},r.prototype.addChild=function(t){return this.throwNotSupportedError(),null},r.prototype.addChildAt=function(t,e){return this.throwNotSupportedError(),null},r.prototype.removeChild=function(t){return this.throwNotSupportedError(),null},r.prototype.removeChildAt=function(t){return this.throwNotSupportedError(),null},r.prototype.setChildIndex=function(t,e){this.throwNotSupportedError()},r.prototype.swapChildren=function(t,e){this.throwNotSupportedError()},r.prototype.swapChildrenAt=function(t,e){this.throwNotSupportedError()},r.weight=[1,1.33,1.66,2,2.33],r}(t.DisplayObjectContainer);t.ScrollView=e,__reflect(e.prototype,"egret.ScrollView")}(egret||(egret={}));var egret;!function(t){var e=function(){function e(){this._verticalScrollPolicy="auto",this._horizontalScrollPolicy="auto",this._scrollLeft=0,this._scrollTop=0,this._hCanScroll=!1,this._vCanScroll=!1,this._lastTouchPosition=new t.Point(0,0),this._touchStartPosition=new t.Point(0,0),this._scrollStarted=!1,this._lastTouchTime=0,this._lastTouchEvent=null,this._velocitys=[],this._isHTweenPlaying=!1,this._isVTweenPlaying=!1,this._hScrollTween=null,this._vScrollTween=null,this._bounces=!0}return e}();t.ScrollViewProperties=e,__reflect(e.prototype,"egret.ScrollViewProperties")}(egret||(egret={}));var egret;!function(t){function e(e){var r=e.url;return-1==r.indexOf("?")&&e.method==t.URLRequestMethod.GET&&e.data&&e.data instanceof t.URLVariables&&(r=r+"?"+e.data.toString()),r}var r=function(r){function i(e){void 0===e&&(e=null);var i=r.call(this)||this;return i.dataFormat=t.URLLoaderDataFormat.TEXT,i.data=null,i._request=null,i._status=-1,e&&i.load(e),i}return __extends(i,r),i.prototype.load=function(r){this._request=r,this.data=null;var i=this;if(i.dataFormat==t.URLLoaderDataFormat.TEXTURE)return void this.loadTexture(i);if(i.dataFormat==t.URLLoaderDataFormat.SOUND)return void this.loadSound(i);var o=e(r),n=new t.HttpRequest;n.open(o,r.method==t.URLRequestMethod.POST?t.HttpMethod.POST:t.HttpMethod.GET);var s;if(r.method!=t.URLRequestMethod.GET&&r.data)if(r.data instanceof t.URLVariables){n.setRequestHeader("Content-Type","application/x-www-form-urlencoded");var a=r.data;s=a.toString()}else n.setRequestHeader("Content-Type","multipart/form-data"),s=r.data;else;for(var h=r.requestHeaders.length,c=0;h>c;c++){var l=r.requestHeaders[c];n.setRequestHeader(l.name,l.value)}n.addEventListener(t.Event.COMPLETE,function(){i.data=n.response,t.Event.dispatchEvent(i,t.Event.COMPLETE)},this),n.addEventListener(t.IOErrorEvent.IO_ERROR,function(){t.IOErrorEvent.dispatchIOErrorEvent(i)},this),n.responseType=i.dataFormat==t.URLLoaderDataFormat.BINARY?t.HttpResponseType.ARRAY_BUFFER:t.HttpResponseType.TEXT,n.send(s)},i.prototype.getResponseType=function(e){switch(e){case t.URLLoaderDataFormat.TEXT:case t.URLLoaderDataFormat.VARIABLES:return t.URLLoaderDataFormat.TEXT;case t.URLLoaderDataFormat.BINARY:return"arraybuffer";default:return e}},i.prototype.loadSound=function(e){var r=e._request.url,i=new t.Sound;this.sound=i,i.addEventListener(t.Event.COMPLETE,this.onSoundoadComplete,this),i.addEventListener(t.IOErrorEvent.IO_ERROR,this.onSoundLoaderError,this),i.addEventListener(t.ProgressEvent.PROGRESS,this.onSoundLoaderPostProgress,this),i.load(r)},i.prototype.onSoundoadComplete=function(e){var r=this;this.removeSoundLoaderListeners(),this.data=this.sound,window.setTimeout(function(){r.dispatchEventWith(t.Event.COMPLETE)},0)},i.prototype.onSoundLoaderPostProgress=function(t){this.dispatchEvent(t)},i.prototype.onSoundLoaderError=function(t){this.dispatchEvent(t)},i.prototype.removeSoundLoaderListeners=function(){this.sound.removeEventListener(t.Event.COMPLETE,this.onSoundoadComplete,this),this.sound.removeEventListener(t.IOErrorEvent.IO_ERROR,this.onSoundLoaderError,this),this.sound.removeEventListener(t.ProgressEvent.PROGRESS,this.onSoundLoaderPostProgress,this)},i.prototype.loadTexture=function(e){this.virtualUrl=e._request.url;var r=new t.ImageLoader;this.imageLoader=r,r.addEventListener(t.Event.COMPLETE,this.onImageLoadComplete,this),r.addEventListener(t.IOErrorEvent.IO_ERROR,this.onImageLoaderError,this),r.addEventListener(t.ProgressEvent.PROGRESS,this.onImageLoaderPostProgress,this),r.load(this.virtualUrl)},i.prototype.onImageLoadComplete=function(e){var r=this;this.removeImageLoaderListeners();var i=new t.Texture,o=this.imageLoader.data;o.source.setAttribute&&o.source.setAttribute("bitmapSrc",this.virtualUrl),i._setBitmapData(o),this.data=i,window.setTimeout(function(){r.dispatchEventWith(t.Event.COMPLETE)},0)},i.prototype.onImageLoaderPostProgress=function(t){this.dispatchEvent(t)},i.prototype.onImageLoaderError=function(t){this.dispatchEvent(t)},i.prototype.removeImageLoaderListeners=function(){this.imageLoader.removeEventListener(t.Event.COMPLETE,this.onImageLoadComplete,this),this.imageLoader.removeEventListener(t.IOErrorEvent.IO_ERROR,this.onImageLoaderError,this),this.imageLoader.removeEventListener(t.ProgressEvent.PROGRESS,this.onImageLoaderPostProgress,this)},i.prototype.__recycle=function(){this._request=null,this.data=null},i}(t.EventDispatcher);t.URLLoader=r,__reflect(r.prototype,"egret.URLLoader")}(egret||(egret={}));var egret;!function(t){var e=function(e){function r(r){var i=e.call(this)||this;return i.$texture=null,i.offsetPoint=t.Point.create(0,0),i.$movieClipData=null,i.frames=null,i.$totalFrames=0,i.frameLabels=null,i.$frameLabelStart=0,i.$frameLabelEnd=0,i.frameEvents=null,i.frameIntervalTime=0,i.$eventPool=null,i.$isPlaying=!1,i.isStopped=!0,i.playTimes=0,i.$currentFrameNum=0,i.$nextFrameNum=1,i.displayedKeyFrameNum=0,i.passedTime=0,i.$frameRate=0/0,i.lastTime=0,i.$smoothing=t.Bitmap.defaultSmoothing,i.setMovieClipData(r),t.nativeRender||(i.$renderNode=new t.sys.NormalBitmapNode),i}return __extends(r,e),r.prototype.createNativeDisplayObject=function(){this.$nativeDisplayObject=new egret_native.NativeDisplayObject(11)},Object.defineProperty(r.prototype,"smoothing",{get:function(){return this.$smoothing},set:function(t){t!=this.$smoothing&&(this.$smoothing=t)},enumerable:!0,configurable:!0}),r.prototype.$init=function(){this.$reset();var t=this.$movieClipData;t&&t.$isDataValid()&&(this.frames=t.frames,this.$totalFrames=t.numFrames,this.frameLabels=t.labels,this.frameEvents=t.events,this.$frameRate=t.frameRate,this.frameIntervalTime=1e3/this.$frameRate,this._initFrame())},r.prototype.$reset=function(){this.frames=null,this.playTimes=0,this.$isPlaying=!1,this.setIsStopped(!0),this.$currentFrameNum=0,this.$nextFrameNum=1,this.displayedKeyFrameNum=0,this.passedTime=0,this.$eventPool=[]},r.prototype._initFrame=function(){this.$movieClipData.$isTextureValid()&&(this.advanceFrame(),this.constructFrame())},r.prototype.$updateRenderNode=function(){var e=this.$texture;if(e){var r=Math.round(this.offsetPoint.x),i=Math.round(this.offsetPoint.y),o=e.$bitmapWidth,n=e.$bitmapHeight,s=e.$getTextureWidth(),a=e.$getTextureHeight(),h=Math.round(e.$getScaleBitmapWidth()),c=Math.round(e.$getScaleBitmapHeight()),l=e.$sourceWidth,u=e.$sourceHeight;t.sys.BitmapNode.$updateTextureData(this.$renderNode,e.$bitmapData,e.$bitmapX,e.$bitmapY,o,n,r,i,s,a,h,c,l,u,t.BitmapFillMode.SCALE,this.$smoothing)}},r.prototype.$measureContentBounds=function(t){var e=this.$texture;if(e){var r=this.offsetPoint.x,i=this.offsetPoint.y,o=e.$getTextureWidth(),n=e.$getTextureHeight();t.setTo(r,i,o,n)}else t.setEmpty()},r.prototype.$onAddToStage=function(t,r){e.prototype.$onAddToStage.call(this,t,r),this.$isPlaying&&this.$totalFrames>1&&this.setIsStopped(!1)},r.prototype.$onRemoveFromStage=function(){e.prototype.$onRemoveFromStage.call(this),this.setIsStopped(!0)},r.prototype.getFrameLabelByName=function(t,e){void 0===e&&(e=!1),e&&(t=t.toLowerCase());var r=this.frameLabels;if(r)for(var i=null,o=0;o<r.length;o++)if(i=r[o],e?i.name.toLowerCase()==t:i.name==t)return i;return null},r.prototype.getFrameStartEnd=function(t){var e=this.frameLabels;if(e)for(var r=null,i=0;i<e.length;i++)if(r=e[i],t==r.name){this.$frameLabelStart=r.frame,this.$frameLabelEnd=r.end;break}},r.prototype.getFrameLabelByFrame=function(t){var e=this.frameLabels;if(e)for(var r=null,i=0;i<e.length;i++)if(r=e[i],r.frame==t)return r;return null},r.prototype.getFrameLabelForFrame=function(t){var e=null,r=null,i=this.frameLabels;if(i)for(var o=0;o<i.length;o++){if(r=i[o],r.frame>t)return e;e=r}return e},r.prototype.play=function(e){void 0===e&&(e=0),this.lastTime=t.getTimer(),this.passedTime=0,this.$isPlaying=!0,this.setPlayTimes(e),this.$totalFrames>1&&this.$stage&&this.setIsStopped(!1)},r.prototype.stop=function(){this.$isPlaying=!1,this.setIsStopped(!0)},r.prototype.prevFrame=function(){this.gotoAndStop(this.$currentFrameNum-1)},r.prototype.nextFrame=function(){this.gotoAndStop(this.$currentFrameNum+1)},r.prototype.gotoAndPlay=function(e,r){void 0===r&&(r=0),(0==arguments.length||arguments.length>2)&&t.$error(1022,"MovieClip.gotoAndPlay()"),"string"==typeof e?this.getFrameStartEnd(e):(this.$frameLabelStart=0,this.$frameLabelEnd=0),this.play(r),this.gotoFrame(e)},r.prototype.gotoAndStop=function(e){1!=arguments.length&&t.$error(1022,"MovieClip.gotoAndStop()"),this.stop(),this.gotoFrame(e)},r.prototype.gotoFrame=function(e){var r;"string"==typeof e?r=this.getFrameLabelByName(e).frame:(r=parseInt(e+"",10),r!=e&&t.$error(1022,"Frame Label Not Found")),1>r?r=1:r>this.$totalFrames&&(r=this.$totalFrames),r!=this.$nextFrameNum&&(this.$nextFrameNum=r,this.advanceFrame(),this.constructFrame(),this.handlePendingEvent())},r.prototype.advanceTime=function(e){var r=this,i=e-r.lastTime;r.lastTime=e;var o=r.frameIntervalTime,n=r.passedTime+i;r.passedTime=n%o;var s=n/o;if(1>s)return!1;for(;s>=1;){if(s--,r.$nextFrameNum++,r.$nextFrameNum>r.$totalFrames||r.$frameLabelStart>0&&r.$nextFrameNum>r.$frameLabelEnd)if(-1==r.playTimes)r.$eventPool.push(t.Event.LOOP_COMPLETE),r.$nextFrameNum=1;else{if(r.playTimes--,!(r.playTimes>0)){r.$nextFrameNum=r.$totalFrames,r.$eventPool.push(t.Event.COMPLETE),r.stop();break}r.$eventPool.push(t.Event.LOOP_COMPLETE),r.$nextFrameNum=1}r.$currentFrameNum==r.$frameLabelEnd&&(r.$nextFrameNum=r.$frameLabelStart),r.advanceFrame()}return r.constructFrame(),r.handlePendingEvent(),!1},r.prototype.advanceFrame=function(){this.$currentFrameNum=this.$nextFrameNum;
var e=this.frameEvents[this.$nextFrameNum];e&&""!=e&&t.MovieClipEvent.dispatchMovieClipEvent(this,t.MovieClipEvent.FRAME_LABEL,e)},r.prototype.constructFrame=function(){var e=this,r=e.$currentFrameNum;if(e.displayedKeyFrameNum!=r){var i=e.$movieClipData.getTextureByFrame(r);if(e.$texture=i,e.$movieClipData.$getOffsetByFrame(r,e.offsetPoint),e.displayedKeyFrameNum=r,e.$renderDirty=!0,t.nativeRender)e.$nativeDisplayObject.setDataToBitmapNode(e.$nativeDisplayObject.id,i,[i.$bitmapX,i.$bitmapY,i.$bitmapWidth,i.$bitmapHeight,e.offsetPoint.x,e.offsetPoint.y,i.$getScaleBitmapWidth(),i.$getScaleBitmapHeight(),i.$sourceWidth,i.$sourceHeight]),e.$nativeDisplayObject.setWidth(i.$getTextureWidth()+e.offsetPoint.x),e.$nativeDisplayObject.setHeight(i.$getTextureHeight()+e.offsetPoint.y);else{var o=e.$parent;o&&!o.$cacheDirty&&(o.$cacheDirty=!0,o.$cacheDirtyUp());var n=e.$maskedObject;n&&!n.$cacheDirty&&(n.$cacheDirty=!0,n.$cacheDirtyUp())}}},r.prototype.$renderFrame=function(){var t=this;t.$texture=t.$movieClipData.getTextureByFrame(t.$currentFrameNum),t.$renderDirty=!0;var e=t.$parent;e&&!e.$cacheDirty&&(e.$cacheDirty=!0,e.$cacheDirtyUp());var r=t.$maskedObject;r&&!r.$cacheDirty&&(r.$cacheDirty=!0,r.$cacheDirtyUp())},r.prototype.handlePendingEvent=function(){if(0!=this.$eventPool.length){this.$eventPool.reverse();for(var e=this.$eventPool,r=e.length,i=!1,o=!1,n=0;r>n;n++){var s=e.pop();s==t.Event.LOOP_COMPLETE?o=!0:s==t.Event.COMPLETE?i=!0:this.dispatchEventWith(s)}o&&this.dispatchEventWith(t.Event.LOOP_COMPLETE),i&&this.dispatchEventWith(t.Event.COMPLETE)}},Object.defineProperty(r.prototype,"totalFrames",{get:function(){return this.$totalFrames},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"currentFrame",{get:function(){return this.$currentFrameNum},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"currentFrameLabel",{get:function(){var t=this.getFrameLabelByFrame(this.$currentFrameNum);return t&&t.name},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"currentLabel",{get:function(){var t=this.getFrameLabelForFrame(this.$currentFrameNum);return t?t.name:null},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"frameRate",{get:function(){return this.$frameRate},set:function(t){t!=this.$frameRate&&(this.$frameRate=t,this.frameIntervalTime=1e3/this.$frameRate)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"isPlaying",{get:function(){return this.$isPlaying},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"movieClipData",{get:function(){return this.$movieClipData},set:function(t){this.setMovieClipData(t)},enumerable:!0,configurable:!0}),r.prototype.setMovieClipData=function(t){this.$movieClipData!=t&&(this.$movieClipData=t,this.$init())},r.prototype.setPlayTimes=function(t){(0>t||t>=1)&&(this.playTimes=0>t?-1:Math.floor(t))},r.prototype.setIsStopped=function(e){this.isStopped!=e&&(this.isStopped=e,e?t.ticker.$stopTick(this.advanceTime,this):(this.playTimes=0==this.playTimes?1:this.playTimes,this.lastTime=t.getTimer(),t.ticker.$startTick(this.advanceTime,this)))},r}(t.DisplayObject);t.MovieClip=e,__reflect(e.prototype,"egret.MovieClip")}(egret||(egret={}));var egret;!function(t){var e=function(e){function r(r){void 0===r&&(r=null);var i=e.call(this)||this;return i.data=null,i.method=t.URLRequestMethod.GET,i.url="",i.requestHeaders=[],i.url=r,i}return __extends(r,e),r}(t.HashObject);t.URLRequest=e,__reflect(e.prototype,"egret.URLRequest")}(egret||(egret={}));var egret;!function(t){var e=function(){function t(t,e){this.name="",this.value="",this.name=t,this.value=e}return t}();t.URLRequestHeader=e,__reflect(e.prototype,"egret.URLRequestHeader")}(egret||(egret={}));var egret;!function(t){var e=function(){function t(){}return t.GET="get",t.POST="post",t}();t.URLRequestMethod=e,__reflect(e.prototype,"egret.URLRequestMethod")}(egret||(egret={}));var egret;!function(t){var e=function(t){function e(e){void 0===e&&(e=null);var r=t.call(this)||this;return r.variables=null,null!==e&&r.decode(e),r}return __extends(e,t),e.prototype.decode=function(t){this.variables||(this.variables={}),t=t.split("+").join(" ");for(var e,r=/[?&]?([^=]+)=([^&]*)/g;e=r.exec(t);){var i=decodeURIComponent(e[1]),o=decodeURIComponent(e[2]);if(i in this.variables!=0){var n=this.variables[i];n instanceof Array?n.push(o):this.variables[i]=[n,o]}else this.variables[i]=o}},e.prototype.toString=function(){if(!this.variables)return"";var t=this.variables,e=[];for(var r in t)e.push(this.encodeValue(r,t[r]));return e.join("&")},e.prototype.encodeValue=function(t,e){return e instanceof Array?this.encodeArray(t,e):encodeURIComponent(t)+"="+encodeURIComponent(e)},e.prototype.encodeArray=function(t,e){return t?0==e.length?encodeURIComponent(t)+"=":e.map(function(e){return encodeURIComponent(t)+"="+encodeURIComponent(e)}).join("&"):""},e}(t.HashObject);t.URLVariables=e,__reflect(e.prototype,"egret.URLVariables")}(egret||(egret={}));var egret;!function(t){var e=function(e){function r(){var i=e.call(this)||this;return i._timeScale=1,i._paused=!1,i._callIndex=-1,i._lastTime=0,i.callBackList=[],null!=r.instance,t.ticker.$startTick(i.update,i),i._lastTime=t.getTimer(),i}return __extends(r,e),r.prototype.update=function(t){var e=t-this._lastTime;if(this._lastTime=t,this._paused)return!1;var r=e*this._timeScale;for(this._callList=this.callBackList.concat(),this._callIndex=0;this._callIndex<this._callList.length;this._callIndex++){var i=this._callList[this._callIndex];i.listener.call(i.thisObject,r)}return this._callIndex=-1,this._callList=null,!1},r.prototype.register=function(t,e,r){void 0===r&&(r=0),this.$insertEventBin(this.callBackList,"",t,e,!1,r,!1)},r.prototype.unregister=function(t,e){this.$removeEventBin(this.callBackList,t,e)},r.prototype.setTimeScale=function(t){this._timeScale=t},r.prototype.getTimeScale=function(){return this._timeScale},r.prototype.pause=function(){this._paused=!0},r.prototype.resume=function(){this._paused=!1},r.getInstance=function(){return null==r.instance&&(r.instance=new r),r.instance},r}(t.EventDispatcher);t.Ticker=e,__reflect(e.prototype,"egret.Ticker")}(egret||(egret={}));var egret;!function(t){var e=function(e){function r(){return e.call(this)||this}return __extends(r,e),Object.defineProperty(r.prototype,"stage",{get:function(){return t.sys.$TempStage},enumerable:!0,configurable:!0}),Object.defineProperty(r,"instance",{get:function(){return null==r._instance&&(r._instance=new r),r._instance},enumerable:!0,configurable:!0}),r.deviceType=null,r.DEVICE_PC="web",r.DEVICE_MOBILE="native",r}(t.EventDispatcher);t.MainContext=e,__reflect(e.prototype,"egret.MainContext")}(egret||(egret={})),egret.testDeviceType1=function(){if(!window.navigator||!navigator)return!0;var t=navigator.userAgent.toLowerCase();return-1!=t.indexOf("mobile")||-1!=t.indexOf("android")},egret.MainContext.deviceType=egret.testDeviceType1()?egret.MainContext.DEVICE_MOBILE:egret.MainContext.DEVICE_PC,delete egret.testDeviceType1;var egret;!function(t){var e=function(e){function r(t){void 0===t&&(t=300);var r=e.call(this)||this;return r.objectPool=[],r._length=0,1>t&&(t=1),r.autoDisposeTime=t,r.frameCount=0,r}return __extends(r,e),r.$init=function(){t.ticker.$startTick(r.onUpdate,r)},r.onUpdate=function(t){for(var e=r._callBackList,i=e.length-1;i>=0;i--)e[i].$checkFrame();return!1},r.prototype.$checkFrame=function(){this.frameCount--,this.frameCount<=0&&this.dispose()},Object.defineProperty(r.prototype,"length",{get:function(){return this._length},enumerable:!0,configurable:!0}),r.prototype.push=function(t){var e=this.objectPool;-1==e.indexOf(t)&&(e.push(t),t.__recycle&&t.__recycle(),this._length++,0==this.frameCount&&(this.frameCount=this.autoDisposeTime,r._callBackList.push(this)))},r.prototype.pop=function(){return 0==this._length?null:(this._length--,this.objectPool.pop())},r.prototype.dispose=function(){this._length>0&&(this.objectPool=[],this._length=0),this.frameCount=0;var t=r._callBackList,e=t.indexOf(this);-1!=e&&t.splice(e,1)},r._callBackList=[],r}(t.HashObject);t.Recycler=e,__reflect(e.prototype,"egret.Recycler"),e.$init()}(egret||(egret={}));var egret;!function(t){function e(e,r,h){for(var c=[],l=3;l<arguments.length;l++)c[l-3]=arguments[l];var u={listener:e,thisObject:r,delay:h,originDelay:h,params:c};return s++,1==s&&(a=t.getTimer(),t.ticker.$startTick(i,null)),n++,o[n]=u,n}function r(e){o[e]&&(s--,delete o[e],0==s&&t.ticker.$stopTick(i,null))}function i(t){var e=t-a;a=t;for(var r in o){var i=o[r];i.delay-=e,i.delay<=0&&(i.delay=i.originDelay,i.listener.apply(i.thisObject,i.params))}return!1}var o={},n=0,s=0,a=0;t.setInterval=e,t.clearInterval=r}(egret||(egret={}));var egret;!function(t){function e(e,r,h){for(var c=[],l=3;l<arguments.length;l++)c[l-3]=arguments[l];var u={listener:e,thisObject:r,delay:h,params:c};return s++,1==s&&t.ticker&&(a=t.getTimer(),t.ticker.$startTick(i,null)),n++,o[n]=u,n}function r(e){o[e]&&(s--,delete o[e],0==s&&t.ticker&&t.ticker.$stopTick(i,null))}function i(t){var e=t-a;a=t;for(var i in o){var n=i,s=o[n];s.delay-=e,s.delay<=0&&(r(n),s.listener.apply(s.thisObject,s.params))}return!1}var o={},n=0,s=0,a=0;t.setTimeout=e,t.clearTimeout=r}(egret||(egret={}));
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.ES6Promise=e()}(this,function(){"use strict";function t(t){return"function"==typeof t||"object"==typeof t&&null!==t}function e(t){return"function"==typeof t}function n(t){I=t}function r(t){J=t}function o(){return function(){return process.nextTick(a)}}function i(){return"undefined"!=typeof H?function(){H(a)}:c()}function s(){var t=0,e=new V(a),n=document.createTextNode("");return e.observe(n,{characterData:!0}),function(){n.data=t=++t%2}}function u(){var t=new MessageChannel;return t.port1.onmessage=a,function(){return t.port2.postMessage(0)}}function c(){var t=setTimeout;return function(){return t(a,1)}}function a(){for(var t=0;G>t;t+=2){var e=$[t],n=$[t+1];e(n),$[t]=void 0,$[t+1]=void 0}G=0}function f(){try{var t=require,e=t("vertx");return H=e.runOnLoop||e.runOnContext,i()}catch(n){return c()}}function l(t,e){var n=arguments,r=this,o=new this.constructor(p);void 0===o[ee]&&k(o);var i=r._state;return i?!function(){var t=n[i-1];J(function(){return x(i,o,t,r._result)})}():E(r,o,t,e),o}function h(t){var e=this;if(t&&"object"==typeof t&&t.constructor===e)return t;var n=new e(p);return w(n,t),n}function p(){}function v(){return new TypeError("You cannot resolve a promise with itself")}function d(){return new TypeError("A promises callback cannot return that same promise.")}function _(t){try{return t.then}catch(e){return ie.error=e,ie}}function y(t,e,n,r){try{t.call(e,n,r)}catch(o){return o}}function m(t,e,n){J(function(t){var r=!1,o=y(n,e,function(n){r||(r=!0,e!==n?w(t,n):S(t,n))},function(e){r||(r=!0,j(t,e))},"Settle: "+(t._label||" unknown promise"));!r&&o&&(r=!0,j(t,o))},t)}function b(t,e){e._state===re?S(t,e._result):e._state===oe?j(t,e._result):E(e,void 0,function(e){return w(t,e)},function(e){return j(t,e)})}function g(t,n,r){n.constructor===t.constructor&&r===l&&n.constructor.resolve===h?b(t,n):r===ie?j(t,ie.error):void 0===r?S(t,n):e(r)?m(t,n,r):S(t,n)}function w(e,n){e===n?j(e,v()):t(n)?g(e,n,_(n)):S(e,n)}function A(t){t._onerror&&t._onerror(t._result),P(t)}function S(t,e){t._state===ne&&(t._result=e,t._state=re,0!==t._subscribers.length&&J(P,t))}function j(t,e){t._state===ne&&(t._state=oe,t._result=e,J(A,t))}function E(t,e,n,r){var o=t._subscribers,i=o.length;t._onerror=null,o[i]=e,o[i+re]=n,o[i+oe]=r,0===i&&t._state&&J(P,t)}function P(t){var e=t._subscribers,n=t._state;if(0!==e.length){for(var r=void 0,o=void 0,i=t._result,s=0;s<e.length;s+=3)r=e[s],o=e[s+n],r?x(n,r,o,i):o(i);t._subscribers.length=0}}function T(){this.error=null}function M(t,e){try{return t(e)}catch(n){return se.error=n,se}}function x(t,n,r,o){var i=e(r),s=void 0,u=void 0,c=void 0,a=void 0;if(i){if(s=M(r,o),s===se?(a=!0,u=s.error,s=null):c=!0,n===s)return void j(n,d())}else s=o,c=!0;n._state!==ne||(i&&c?w(n,s):a?j(n,u):t===re?S(n,s):t===oe&&j(n,s))}function C(t,e){try{e(function(e){w(t,e)},function(e){j(t,e)})}catch(n){j(t,n)}}function O(){return ue++}function k(t){t[ee]=ue++,t._state=void 0,t._result=void 0,t._subscribers=[]}function Y(t,e){this._instanceConstructor=t,this.promise=new t(p),this.promise[ee]||k(this.promise),B(e)?(this._input=e,this.length=e.length,this._remaining=e.length,this._result=new Array(this.length),0===this.length?S(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&S(this.promise,this._result))):j(this.promise,q())}function q(){return new Error("Array Methods must be provided an Array")}function F(t){return new Y(this,t).promise}function D(t){var e=this;return new e(B(t)?function(n,r){for(var o=t.length,i=0;o>i;i++)e.resolve(t[i]).then(n,r)}:function(t,e){return e(new TypeError("You must pass an array to race."))})}function K(t){var e=this,n=new e(p);return j(n,t),n}function L(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function N(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function U(t){this[ee]=O(),this._result=this._state=void 0,this._subscribers=[],p!==t&&("function"!=typeof t&&L(),this instanceof U?C(this,t):N())}function W(){var t=void 0;if("undefined"!=typeof global)t=global;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var n=t.Promise;if("undefined"!=typeof egret_native&&egret_native.capability&&!egret_native.capability("Promise")&&(n=void 0),n){var r=null;try{r=Object.prototype.toString.call(n.resolve())}catch(e){}if("[object Promise]"===r&&!n.cast)return}t.Promise=U}var z=void 0;z=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)};var B=z,G=0,H=void 0,I=void 0,J=function(t,e){$[G]=t,$[G+1]=e,G+=2,2===G&&(I?I(a):te())},Q="undefined"!=typeof window?window:void 0,R=Q||{},V=R.MutationObserver||R.WebKitMutationObserver,X="undefined"==typeof self&&"undefined"!=typeof process&&"[object process]"==={}.toString.call(process),Z="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,$=new Array(1e3),te=void 0;te=X?o():V?s():Z?u():void 0===Q&&"function"==typeof require?f():c();var ee=Math.random().toString(36).substring(16),ne=void 0,re=1,oe=2,ie=new T,se=new T,ue=0;return Y.prototype._enumerate=function(){for(var t=this.length,e=this._input,n=0;this._state===ne&&t>n;n++)this._eachEntry(e[n],n)},Y.prototype._eachEntry=function(t,e){var n=this._instanceConstructor,r=n.resolve;if(r===h){var o=_(t);if(o===l&&t._state!==ne)this._settledAt(t._state,e,t._result);else if("function"!=typeof o)this._remaining--,this._result[e]=t;else if(n===U){var i=new n(p);g(i,t,o),this._willSettleAt(i,e)}else this._willSettleAt(new n(function(e){return e(t)}),e)}else this._willSettleAt(r(t),e)},Y.prototype._settledAt=function(t,e,n){var r=this.promise;r._state===ne&&(this._remaining--,t===oe?j(r,n):this._result[e]=n),0===this._remaining&&S(r,this._result)},Y.prototype._willSettleAt=function(t,e){var n=this;E(t,void 0,function(t){return n._settledAt(re,e,t)},function(t){return n._settledAt(oe,e,t)})},U.all=F,U.race=D,U.resolve=h,U.reject=K,U._setScheduler=n,U._setAsap=r,U._asap=J,U.prototype={constructor:U,then:l,"catch":function(t){return this.then(null,t)}},U.polyfill=W,U.Promise=U,U}),ES6Promise.polyfill();
var __reflect=this&&this.__reflect||function(t,e,n){t.__class__=e,n?n.push(e):n=[e],t.__types__=t.__types__?n.concat(t.__types__):n},__extends=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},two;!function(t){var e=function(t){function e(e){var n=t.call(this,e)||this;return n.__isAdded=!1,n.__isCreated=!1,n.__isFirstCreated=!0,n.addEventListener(egret.Event.ADDED_TO_STAGE,function(t){t.target==t.currentTarget&&(n.__isAdded=!0,n.__isCreated&&n.addTo())},n),n}return __extends(e,t),e.prototype.childrenCreated=function(){var e=this;t.prototype.childrenCreated.call(this),this.addEventListener(egret.Event.REMOVED_FROM_STAGE,function(t){t.target==t.currentTarget&&(e.__isAdded=!1,e.removed())},this),this.__isCreated=!0,this.__isAdded&&this.addTo()},e.prototype.addTo=function(){this.__isFirstCreated&&this.created(),this.added(),this.__isFirstCreated&&this.createdEnd(),this.__isFirstCreated=!1},e.prototype.createdEnd=function(){},e.prototype.created=function(){},e.prototype.added=function(){},e.prototype.removed=function(){},e}(eui.Image);t.BaseImage=e,__reflect(e.prototype,"two.BaseImage")}(two||(two={}));var __reflect=this&&this.__reflect||function(t,e,n){t.__class__=e,n?n.push(e):n=[e],t.__types__=t.__types__?n.concat(t.__types__):n},__extends=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},two;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.__isAdded=!1,e.__isCreated=!1,e.__isFirstCreated=!0,e.addEventListener(egret.Event.ADDED_TO_STAGE,function(t){t.target==t.currentTarget&&(e.__isAdded=!0,e.__isCreated&&e.addTo())},e),e}return __extends(e,t),e.prototype.childrenCreated=function(){var e=this;t.prototype.childrenCreated.call(this),this.addEventListener(egret.Event.REMOVED_FROM_STAGE,function(t){t.target==t.currentTarget&&(e.__isAdded=!1,e.removed())},this),this.__isCreated=!0,this.__isAdded&&this.addTo()},e.prototype.addTo=function(){this.__isFirstCreated&&this.created(),this.__isFirstCreated=!1,this.added()},e.prototype.created=function(){},e.prototype.added=function(){},e.prototype.removed=function(){},e}(eui.ItemRenderer);t.BaseItemRenderer=e,__reflect(e.prototype,"two.BaseItemRenderer")}(two||(two={}));var __reflect=this&&this.__reflect||function(t,e,n){t.__class__=e,n?n.push(e):n=[e],t.__types__=t.__types__?n.concat(t.__types__):n},one;!function(t){var e=function(){function e(){this.position=0,this._volume=1,this.playCnt=0,this.duration=0,this.interID=-1,this.isClosed=!1}return Object.defineProperty(e.prototype,"volume",{get:function(){return this._volume},set:function(t){this._volume=t,this.bgChannel&&(this.bgChannel.volume=t)},enumerable:!0,configurable:!0}),e.prototype.playLastMusic=function(){this.bgChannel&&(this.position=this.bgChannel.position,this.bgChannel.stop(),this.bgChannel=null),this.play(this.bgName,this.startTime,this.position,this.playTimes,this.duration,!0)},e.prototype.play=function(e,n,i,r,o,s){this.duration=o,e=t.getSoundKey(e),null!=e&&(this.bgName!=e||!this.bgChannel||s)&&(this.playCnt++,this.bgName=e,this.startTime=n,this.playTimes=r,this.isLoop=0>=r,this.isClosed||this.next(i))},e.prototype.next=function(e){var n=this;if(this.bgChannel&&(this.bgChannel.stop(),t.clearInterval(this.interID),this.bgChannel=null),this.isLoop||this.playTimes>0){var i=RES.getRes(this.bgName);if(null==i){var r=this.playCnt;return void RES.getResAsync(this.bgName,function(){n.playCnt==r&&n.next(e)},this)}try{var o=this.bgChannel=i.play(e,1);o.volume=this._volume;var s=function(){t.clearInterval(n.interID),n.playTimes--,n.next(n.startTime)};o.once(egret.Event.SOUND_COMPLETE,s,o),this.duration>0&&(this.interID=t.setInterval(function(){var t=n.bgChannel.position;t>=n.duration&&(o.removeEventListener(egret.Event.SOUND_COMPLETE,s,o),s())},30))}catch(a){}}},e.prototype.close=function(){this.isClosed||(this.isClosed=!0,t.clearInterval(this.interID),this.bgChannel&&(this.position=this.bgChannel.position,this.bgChannel.stop(),this.bgChannel=null))},e.prototype.open=function(){this.isClosed&&(this.isClosed=!1,this.next(this.position),this.position=0)},e.prototype.stopAll=function(){t.clearInterval(this.interID),this.bgChannel&&(this.position=this.bgChannel.position,this.bgChannel.stop(),this.bgChannel=null)},e}();t.MusicCtr=e,__reflect(e.prototype,"one.MusicCtr")}(one||(one={}));var __reflect=this&&this.__reflect||function(t,e,n){t.__class__=e,n?n.push(e):n=[e],t.__types__=t.__types__?n.concat(t.__types__):n},__extends=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},two;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.__isAdded=!1,e.__isCreated=!1,e.__isFirstCreated=!0,e.addEventListener(egret.Event.ADDED_TO_STAGE,function(t){t.target==t.currentTarget&&(e.__isAdded=!0,e.__isCreated&&e.addTo())},e),e}return __extends(e,t),e.prototype.childrenCreated=function(){var e=this;t.prototype.childrenCreated.call(this),this.addEventListener(egret.Event.REMOVED_FROM_STAGE,function(t){t.target==t.currentTarget&&(e.__isAdded=!1,e.removed())},this),this.__isCreated=!0,this.__isAdded&&this.addTo()},e.prototype.addTo=function(){this.__isFirstCreated&&this.created(),this.__isFirstCreated=!1,this.added()},e.prototype.created=function(){},e.prototype.added=function(){},e.prototype.removed=function(){},e.prototype.refreshApi=function(t){},e.prototype.refreshData=function(t,e){},e}(eui.Group);t.BaseGroup=e,__reflect(e.prototype,"two.BaseGroup")}(two||(two={}));var __reflect=this&&this.__reflect||function(t,e,n){t.__class__=e,n?n.push(e):n=[e],t.__types__=t.__types__?n.concat(t.__types__):n},__extends=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},two;!function(t){var e=function(t){function e(e){var n=t.call(this)||this;return n._isClosed=!1,n.__isAdded=!1,n.__isCreated=!1,n.__isFirstCreated=!0,n.addEventListener(egret.Event.ADDED_TO_STAGE,function(t){t.target==t.currentTarget&&(n.__isAdded=!0,n.__isCreated&&n.addTo())},n),e&&(e.match(/Skin/)||(e+="Skin"),n.skinName=e),n}return __extends(e,t),Object.defineProperty(e.prototype,"isClosed",{get:function(){return this._isClosed},set:function(t){this._isClosed=t},enumerable:!0,configurable:!0}),e.prototype.childrenCreated=function(){var e=this;t.prototype.childrenCreated.call(this),this.addEventListener(egret.Event.REMOVED_FROM_STAGE,function(t){t.target==t.currentTarget&&(e.__isAdded=!1,e.removed())},this),this.__isCreated=!0,this.__isAdded&&this.addTo()},e.prototype.addTo=function(){this.__isFirstCreated&&this.created(),this.added(),this.__isFirstCreated&&this.createdEnd(),this.__isFirstCreated=!1},e.prototype.createdEnd=function(){},e.prototype.created=function(){},e.prototype.added=function(){},e.prototype.removed=function(){},e.prototype.refreshApi=function(t){},e.prototype.refreshData=function(t,e){},e}(eui.Component);t.BaseComponent=e,__reflect(e.prototype,"two.BaseComponent",["eui.UIComponent","egret.DisplayObject"])}(two||(two={}));var __reflect=this&&this.__reflect||function(t,e,n){t.__class__=e,n?n.push(e):n=[e],t.__types__=t.__types__?n.concat(t.__types__):n},one;!function(t){var e=function(){function e(){this._volume=1,this.onceSounds=[],this.sounds={},this.playCnt=0,this.isClosed=!1}return Object.defineProperty(e.prototype,"volume",{get:function(){return this._volume},set:function(t){this._volume=t},enumerable:!0,configurable:!0}),e.prototype.playSounds=function(n){var i=this;if(0!=this._volume&&!this.isClosed){var r=this;if(this.onceSounds.length>=e.TOTAL){var o=this.onceSounds.shift();o.stop()}var s=function(){if(0!=i._volume){var e=n.shift(),o=t.getSound(e);if(null==o)return void(n.length>0&&s());var a=o.play(0,1);a.volume=i.volume,i.onceSounds.push(a),a.once(egret.Event.SOUND_COMPLETE,function(){var t=r.onceSounds.indexOf(a);t>=0&&r.onceSounds.splice(t,1),n.length>0&&s()},a)}};s()}},e.prototype.stop=function(t){var e=this.sounds[t];if(e){e.stop();var n=this.onceSounds.indexOf(e);n>=0&&this.onceSounds.splice(n,1),delete this.sounds[t]}},e.prototype.play=function(n,i,r){var o=this;if(n=t.getSoundKey(n),0==this._volume)return-1;if(this.isClosed)return-1;if(this.onceSounds.length>=e.TOTAL){var s=this.onceSounds.shift();s.stop()}var a=this;this.playCnt++;var h=RES.getRes(n);if(null==h){var c=this.playCnt;return void RES.getResAsync(n,function(){o.playCnt==c&&o.play(n,i,r)},this)}try{var u=h.play(i,r);return u.volume=this._volume,u.once(egret.Event.SOUND_COMPLETE,function(){var t=a.onceSounds.indexOf(u);t>=0&&a.onceSounds.splice(t,1);for(var e in a.sounds)if(a.sounds[e]==u){delete a.sounds[e];break}},u),this.onceSounds.push(u),e.SOUND_COUNT++,this.sounds[e.SOUND_COUNT]=u,e.SOUND_COUNT}catch(p){return-1}},e.prototype.close=function(){for(this.isClosed=!0;this.onceSounds.length;){var t=this.onceSounds.shift();t.volume=1,t.stop()}this.onceSounds.length=0,this.sounds={}},e.prototype.open=function(){this.isClosed=!1},e.prototype.stopAll=function(){for(;this.onceSounds.length;){var t=this.onceSounds.shift();t.volume=1,t.stop()}this.onceSounds.length=0,this.sounds={}},e}();e.TOTAL=13,e.SOUND_COUNT=0,t.SoundCtr=e,__reflect(e.prototype,"one.SoundCtr")}(one||(one={}));var __reflect=this&&this.__reflect||function(t,e,n){t.__class__=e,n?n.push(e):n=[e],t.__types__=t.__types__?n.concat(t.__types__):n},__extends=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},two;!function(t){var e=function(t){function e(){var e=t.apply(this,arguments)||this;return e.isCircled=!1,e._second=0,e._direction=1,e}return __extends(e,t),e.prototype.added=function(){t.prototype.added.call(this),this.setCircle()},e.prototype.removed=function(){t.prototype.removed.call(this),egret.Tween.removeTweens(this)},Object.defineProperty(e.prototype,"second",{get:function(){return this._second},set:function(t){this._second>0&&0>=t&&egret.Tween.removeTweens(this),this._second=t,this.setCircle()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"direction",{get:function(){return this._direction},set:function(t){this._direction=t,this.setCircle()},enumerable:!0,configurable:!0}),e.prototype.setCircle=function(){this._second>0&&(egret.Tween.removeTweens(this),this.rotation=0,this.isCircled=!0,egret.Tween.get(this,{loop:!0}).to({rotation:360*this._direction},1e3*this._second))},e}(t.BaseImage);t.CircleImage=e,__reflect(e.prototype,"two.CircleImage")}(two||(two={}));var one;!function(t){function e(t,e){return egret.Capabilities.runtimeType==egret.RuntimeType.WEB?window.setTimeout(t,e):egret.setTimeout(t,null,e)}function n(t){return egret.Capabilities.runtimeType==egret.RuntimeType.WEB?window.clearTimeout(t):egret.clearTimeout(t)}function i(t,e){return egret.Capabilities.runtimeType==egret.RuntimeType.WEB?window.setInterval(t,e):egret.setInterval(t,null,e)}function r(t){return egret.Capabilities.runtimeType==egret.RuntimeType.WEB?window.clearInterval(t):egret.clearInterval(t)}function o(t,e){var n=function(){return 0>=e?void t():(e--,void egret.callLater(n,null))};e--,egret.callLater(n,null)}t.setTimeout=e,t.clearTimeout=n,t.setInterval=i,t.clearInterval=r,t.callLater=o}(one||(one={}));var __reflect=this&&this.__reflect||function(t,e,n){t.__class__=e,n?n.push(e):n=[e],t.__types__=t.__types__?n.concat(t.__types__):n},__extends=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},one;!function(t){var e=function(t){function e(e,n,i){void 0===i&&(i="png");var r=t.call(this)||this;return r.ext=i,r.isLoaded=!1,r._frameRate=24,r.startTime=0,r.$totalFrames=0,r.lastFrame=-1,r.horizontalCenter=0,r.verticalCenter=0,r.mcData=e,r.fileName=n,r.bitmap=new egret.Bitmap,r.addChild(r.bitmap),r.frameIntervalTime=1e3/r._frameRate,r.addEventListener(egret.Event.ADDED_TO_STAGE,function(t){t.currentTarget==t.target&&(egret.stopTick(r.advanceTime,r),egret.startTick(r.advanceTime,r))},r),r.addEventListener(egret.Event.REMOVED_FROM_STAGE,function(t){t.currentTarget==t.target&&egret.stopTick(r.advanceTime,r)},r),r.event=new egret.Event(egret.Event.COMPLETE),r.load(),r}return __extends(e,t),e.prototype.changeFileName=function(t){this.fileName=t,this.load()},e.prototype.load=function(){var t=this;this.isLoaded=!1;var e=0,n=0,i=this.fileName,r=function(){n++,n==e&&i==t.fileName&&(t.isLoaded=!0)};for(var o in this.mcData)for(var s=0;s<this.mcData[o].length;s++)e++;for(var o in this.mcData)for(var s=0;s<this.mcData[o].length;s++)RES.getResAsync(this.fileName+"_"+this.mcData[o][s]+"_"+this.ext,r,this)},Object.defineProperty(e.prototype,"frameRate",{get:function(){return this._frameRate},set:function(t){this._frameRate=t,this.frameIntervalTime=1e3/this._frameRate},enumerable:!0,configurable:!0}),e.prototype.play=function(t,e){void 0===e&&(e=0),this.animation=t,this.playTimes=e,this.countTimes=0,this.lastFrame=-1,this.startTime=egret.getTimer(),null==this.mcData[t]&&console.log(t+"   dddddd"),this.$totalFrames=this.mcData[t].length},e.prototype.advanceTime=function(t){if(!this.isLoaded)return!1;if(this.playTimes>0&&this.countTimes>=this.playTimes)return!1;var e=this,n=e.frameIntervalTime,i=egret.getTimer(),r=i-this.startTime;if(0>r)return!1;var o=Math.floor(r/n);this.playTimes>0&&o>=(this.countTimes+1)*this.$totalFrames&&(this.countTimes=Math.floor(o/this.$totalFrames),this.countTimes=Math.min(this.countTimes,this.playTimes));var s=0;return this.playTimes>0&&this.countTimes>=this.playTimes?(s=this.$totalFrames-1,this.showFrame(s),this.dispatchEvent(this.event)):(s=o%this.$totalFrames,this.showFrame(s)),!1},e.prototype.showFrame=function(t){if(this.lastFrame!=t){this.lastFrame=t;var e=RES.getRes(this.fileName+"_"+this.mcData[this.animation][t]+"_"+this.ext);e||console.warn(this.fileName+"_"+this.animation+"_"+t),this.bitmap.texture=e,this.bitmap.anchorOffsetX=e.textureWidth*this.horizontalCenter/100,this.bitmap.anchorOffsetY=e.textureHeight*this.verticalCenter/100}},e}(egret.DisplayObjectContainer);t.DynamicFrames=e,__reflect(e.prototype,"one.DynamicFrames")}(one||(one={}));var __reflect=this&&this.__reflect||function(t,e,n){t.__class__=e,n?n.push(e):n=[e],t.__types__=t.__types__?n.concat(t.__types__):n},one;!function(t){function e(t,e){var n=e;if(t=Math.floor(t),e.indexOf("h")>=0){var i=Math.floor(t/3600);t-=3600*i,n=e.indexOf("hh")>=0?n.replace("hh",o(i,2)):n.replace("h",i+"")}if(e.indexOf("m")>=0){var r=Math.floor(t/60);t-=60*r,n=e.indexOf("mm")>=0?n.replace("mm",o(r,2)):n.replace("m",r+"")}return n=e.indexOf("ss")>=0?n.replace("ss",o(t,2)):n.replace("s",t+"")}function n(t,e){var n=new Date;n.setTime(t);var i=e;i.match("YYYY")?i=i.replace("YYYY",o(n.getFullYear(),4)):i.match("YY")&&(i=i.replace("YY",o(n.getFullYear(),2))),i.match("MM")?i=i.replace("MM",o(n.getMonth()+1,2)):i.match("M")&&(i=i.replace("M",n.getMonth()+1+"")),i.match("DD")?i=i.replace("DD",o(n.getDate(),2)):i.match("D")&&(i=i.replace("D",n.getDate()+""));var r=n.getHours(),s=n.getMinutes(),a=n.getSeconds();return i.match("hh")?i=i.replace("hh",o(r,2)):i.match("h")&&(i=i.replace("h",r+"")),i.match("mm")?i=i.replace("mm",o(s,2)):i.match("m")&&(i=i.replace("m",s+"")),i.match("ss")?i=i.replace("ss",o(a,2)):i.match("s")&&(i=i.replace("s",a+"")),i}function i(t,e){var n=Date.now(),i=Math.round((n-t)/1e3);if(60>i)return i+"秒前";if(3600>i)return Math.round(i/60)+"分前";if(86400>i)return Math.round(i/60/60)+"小时前";var r=new Date;return r.setTime(t),this.formatTime(t,e)}function r(t,e){var n=Date.now(),i=Math.round((n-t)/1e3);return 60>i?i+"秒前":3600>i?Math.round(i/60)+"分前":86400>i?Math.round(i/60/60)+"小时前":Math.round(i/60/60/24)+"天前"}function o(t,e){var n=Math.round(t).toString();if(n.length==e)return n;if(n.length>e)return n.substr(0,e);for(;n.length<e;)n="0"+n;return n}var s=function(){function e(){this.isStarting=!1,this.seconds={}}return e.prototype.start=function(){this.isStarting||(this.isStarting=!0,this.intervalID=t.setInterval(this.onHandler.bind(this),100))},e.prototype.onHandler=function(){var t=Date.now();for(var e in this.seconds){var n=this.seconds[e];if(n.endTimeStamp<=t)delete this.seconds[e],n.call(0);else{var i=Math.ceil((n.endTimeStamp-t)/1e3);n.calledSecond>i&&(n.calledSecond=i,n.call(i))}}},e.prototype.stop=function(){this.isStarting=!1,t.clearInterval(this.intervalID)},e.prototype.addSecond=function(t,n,i){void 0===i&&(i=!1),e.count++;var r=Date.now()+1e3*t;return this.seconds[e.count]={calledSecond:t,endTimeStamp:r,call:n},i&&n(t),e.count},e.prototype.removeSecond=function(t){return delete this.seconds[t],!0},e}();s.count=1,t.SecondUtils=s,__reflect(s.prototype,"one.SecondUtils"),t.secondUtils=new t.SecondUtils,t.secondUtils.start(),t.formatSecond=e,t.formatTime=n,t.formatLastTime=i,t.formatLastTime2=r,t.toFixed=o}(one||(one={}));var __reflect=this&&this.__reflect||function(t,e,n){t.__class__=e,n?n.push(e):n=[e],t.__types__=t.__types__?n.concat(t.__types__):n},one;!function(t){var e=function(){function t(){this.count=0,this.timer=new egret.Timer(1e3)}return t.prototype.initTarget=function(t){this.target=t,this.initX=t.x,this.initY=t.y},t.prototype.shake=function(t,e,n){this.maxDis=n,this.count=t*e,this.rate=e,this.timer.delay=1e3/e,this.timer.repeatCount=this.count,this.timer.removeEventListener(egret.TimerEvent.TIMER,this.shaking,this),this.timer.removeEventListener(egret.TimerEvent.TIMER_COMPLETE,this.shakeComplete,this),this.timer.addEventListener(egret.TimerEvent.TIMER,this.shaking,this),this.timer.addEventListener(egret.TimerEvent.TIMER_COMPLETE,this.shakeComplete,this),this.timer.reset(),this.timer.start()},t.prototype.shaking=function(){egret.Tween.removeTweens(this.target),this.target.x=this.initX-this.maxDis+Math.random()*this.maxDis*2,this.target.y=this.initY-this.maxDis+Math.random()*this.maxDis*2,egret.Tween.get(this.target).to({x:this.initX,y:this.initY},999/this.rate)},t.prototype.shakeComplete=function(){this.target&&(egret.Tween.removeTweens(this.target),this.target.x=this.initX,this.target.y=this.initY),this.timer.stop(),this.timer.removeEventListener(egret.TimerEvent.TIMER,this.shaking,this),this.timer.removeEventListener(egret.TimerEvent.TIMER_COMPLETE,this.shakeComplete,this)},t.prototype.stop=function(){this.shakeComplete()},t}();t.Shake=e,__reflect(e.prototype,"one.Shake")}(one||(one={}));var __reflect=this&&this.__reflect||function(t,e,n){t.__class__=e,n?n.push(e):n=[e],t.__types__=t.__types__?n.concat(t.__types__):n},two;!function(t){var e=function(){function t(){}return t.getStorageKey=function(e){return t.UID+"_"+t.game+"_"+e},t.$init=function(){},t.initByType=function(t,e,n,i){this.timestamps[t]={effect:e,timestamp:-1,cd:n,total:1,used:0}},t.getLeftCount=function(t){var e=this.getTimestamp(t);if(0==e.timestamp)return e.used=0,e.total;var n=new Date(1e3*e.timestamp),i=new Date;return n.getDate()!=i.getDate()||n.getMonth()!=n.getMonth()?(e.used=0,e.total):e.total-e.used},t.startTimestamp=function(t){var e=Math.floor(Date.now()/1e3),n=this.getTimestamp(t);n.timestamp=e,n.used++,egret.localStorage.setItem(this.UID+"_timestamp_"+t,JSON.stringify({timestamp:n.timestamp,used:n.used}))},t.addDelayTime=function(t,e){var n=this.getTimestamp(t);n.timestamp-=e},t.getTimestamp=function(t){var e=this.timestamps[t].timestamp;if(-1==e){var n=egret.localStorage.getItem(this.UID+"_timestamp_"+t);if(n){var i=JSON.parse(n);this.timestamps[t].timestamp=i.timestamp,this.timestamps[t].used=i.used}else this.timestamps[t].timestamp=0,this.timestamps[t].used=0}return this.timestamps[t]},t.getCD=function(t){return this.timestamps[t].cd},t.getEffectCD=function(t){return this.timestamps[t].effect},t.getLeftCD=function(t){var e=Math.floor(Date.now()/1e3)-this.getTimestamp(t).timestamp,n=this.timestamps[t].cd;return n>e?n-e:0},t.getLeftEffect=function(t){var e=Math.floor(Date.now()/1e3)-this.getTimestamp(t).timestamp,n=this.timestamps[t].effect;return n>e?n-e:0},t}();e.game="demo",e.UID="1",e.timestamps={},t.Storage=e,__reflect(e.prototype,"two.Storage"),e.$init()}(two||(two={}));var __reflect=this&&this.__reflect||function(t,e,n){t.__class__=e,n?n.push(e):n=[e],t.__types__=t.__types__?n.concat(t.__types__):n},one;!function(t){var e=function(){function t(){this.finishTypes=[]}return t.prototype.addMonitor=function(t,e,n){void 0===n&&(n=!0),this.total=t,this.isUnique=n,this.call=e,this.finishTypes=[]},t.prototype.finish=function(t){if((!this.isUnique||this.finishTypes.indexOf(t)<0)&&this.finishTypes.push(t),this.finishTypes.length>=this.total&&this.call){var e=this.call;this.call=null,e()}},t.prototype.clear=function(){this.call=null},t}();t.Threads=e,__reflect(e.prototype,"one.Threads")}(one||(one={}));var one;!function(t){function e(){return 16777215*Math.random()}function n(t,n){void 0===n&&(n=0),(0>=n||n>t.length)&&(n=t.length);for(var i=n-1;i>=0;i--){var r=0|e()%(i+1),o=t[i];t[i]=t[r],t[r]=o}}function i(e){return 0==e.length?null:e[t.randomInt(0,e.length-1)]}function r(e,n){n=Math.min(n,e.length);for(var i=t.randomInts(0,e.length-1,n),r=[],o=0;o<i.length;o++)r.push(e[i[o]]);return r}function o(t,e){if(t>e){var n=e;e=t,t=n}return Math.floor(Math.random()*(e-t+1))+t}function s(){return 0==o(0,1)?-1:1}function a(t,e,n){for(var i=[],r=[{min:t,max:e}],o=0;n>o;o++){var s=h(r);i.push(s)}return i}function h(e){var n=t.randomInt(0,e.length-1),i=e[n];e.splice(n,1);var r=t.randomInt(i.min,i.max);return r==i.min?i.min+1<=i.max&&e.push({min:i.min+1,max:i.max}):r==i.max?i.min<=i.max-1&&e.push({min:i.min,max:i.max-1}):(e.push({min:i.min,max:r-1}),e.push({min:r+1,max:i.max})),r}function c(e){for(var n=0,i=0;i<e.length;i++)n+=e[i];if(0==n)return-1;var r=t.randomInt(1,n);n=0;for(var i=0;i<e.length;i++)if(n+=e[i],n>=r)return i;return-1}function u(){return t.randomInt(0,100)}function p(t,e){for(var n=[],i=0;e>i;i++)n.push(t+i);return n}function l(t,e){for(var n=[],i=0;e>i;i++)n.push(t);return n}function _(t){var e;if(t instanceof Array)e=[];else{if(!(t instanceof Object))return t;e={}}for(var n in t)t[n]instanceof Array?e[n]=_(t[n]):t[n]instanceof Object?e[n]=_(t[n]):e[n]=t[n];return e}function d(t,e){for(var n=0;n<t.length;n++)if(e.indexOf(t[n])<0)return!1;return!0}function f(t,e){return void 0===e&&(e=7),t.length<=e?t:t.substr(0,e)+"..."}function g(t,e){var n=e.italic,i=e.bold,r=e.size,o=e.fontFamily||egret.TextField.default_fontFamily;return egret.sys.measureText(t,o,r,i,n)}function m(t,e,n){if(void 0===n&&(n=300),g(e,t)<=n)return e;for(var i=e.length,r=0;;){if(r>=i-1)return e.substr(0,r)+"...";g(e.substr(0,Math.floor((i+r)/2)),t)<=n-2*t.size?r=Math.floor((i+r)/2):i=Math.floor((i+r)/2)}}function v(t,e){return void 0===e&&(e=2),1e4>t?t+"":(t/=1e4,1e4>t?t.toFixed(e)+"万":(t/=1e4,1e4>t?t.toFixed(e)+"亿":void 0))}function y(t){for(var e=t+"",n="",i=0;i<e.length;i++)i%3==0&&0!=i&&(n=","+n),n=e.charAt(e.length-1-i)+n;return n}function C(t,e){if(void 0===e&&(e=2),t=Math.floor(t),1e3>t)return t+"";for(var n=0,i=t;i>=10;)i/=10,n++;var r=n%3;n-=r;for(var o=0;n>o;o++)t/=10;t=Math.floor(t*Math.pow(10,e))/Math.pow(10,e);var s=["","k","m","b","t","a","b","c","d","e","f","g","h"];return t+s[n/3]}function w(){if(-1==T)if(egret.Capabilities.runtimeType==egret.RuntimeType.WEB&&egret.Capabilities.isMobile){var t=window.screen.width,e=window.screen.height;if(t>e){var n=e;e=t,t=n}var i=/iphone/gi.test(window.navigator.userAgent)&&window.devicePixelRatio&&3===window.devicePixelRatio&&375===t&&812===e,r=/iphone/gi.test(window.navigator.userAgent)&&window.devicePixelRatio&&3===window.devicePixelRatio&&414===t&&896===e,o=/iphone/gi.test(window.navigator.userAgent)&&window.devicePixelRatio&&2===window.devicePixelRatio&&414===t&&896===e;(i||o||r)&&(T=1)}else if(egret.Capabilities.runtimeType==egret.RuntimeType.WXGAME){var s=wx.getSystemInfoSync(),a=s.model;-1!=a.search("iPhone X")&&(T=1)}else T=0;var h=1==T?40:0;return h}function x(t,e){t.left=e+w()}function E(t,e){var n=w();isNaN(e)||(t.width=e-n)}t.shuffleArray=n,t.randomOne=i,t.randomSome=r,t.randomInt=o,t.randomDic=s,t.randomInts=a,t.randomIndexByWeight=c,t.randomPercent=u,t.getNumbers=p,t.getInitNumbers=l,t.clone=_,t.isAllInArray=d,t.cutName=f,t.cutText=m,t.formatCash=v,t.formatCount=y,t.formatCount2=C;var T=-1;t.getFixRap=w,t.fixLeft=x,t.fixWidth=E}(one||(one={}));var __reflect=this&&this.__reflect||function(t,e,n){t.__class__=e,n?n.push(e):n=[e],t.__types__=t.__types__?n.concat(t.__types__):n},__extends=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},two;!function(t){var e=function(t){function e(){return t.apply(this,arguments)||this}return __extends(e,t),e.prototype.added=function(){t.prototype.added.call(this),this.lang=one.langUtils.getAllLanguages()},e.prototype.removed=function(){t.prototype.removed.call(this),this.lang=null},e}(t.BaseComponent);t.BaseLangComponent=e,__reflect(e.prototype,"two.BaseLangComponent")}(two||(two={}));var __reflect=this&&this.__reflect||function(t,e,n){t.__class__=e,n?n.push(e):n=[e],t.__types__=t.__types__?n.concat(t.__types__):n},__extends=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},two;!function(t){var e=function(t){function e(){return t.apply(this,arguments)||this}return __extends(e,t),e.prototype.added=function(){t.prototype.added.call(this),this.lang=one.langUtils.getAllLanguages()},e.prototype.removed=function(){t.prototype.removed.call(this),this.lang=null},e}(t.BaseItemRenderer);t.BaseLangItemRenderer=e,__reflect(e.prototype,"two.BaseLangItemRenderer")}(two||(two={}));var __reflect=this&&this.__reflect||function(t,e,n){t.__class__=e,n?n.push(e):n=[e],t.__types__=t.__types__?n.concat(t.__types__):n},one;!function(t){var e=function(){function e(){}return e.prototype.setLanguage=function(t){this.languages=RES.getRes("language"+t+"_json")},e.prototype.getAllLanguages=function(){return t.clone(this.languages.normal)},e.prototype.getAreaStatement=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];var r=this.languages.normal[t];if(this.languages[e]&&this.languages[e][t]&&(r=this.languages[e][t]),null==n)return r;for(var o=0;o<n.length;o++){var s=new RegExp("<"+o+">","g");r=r.replace(s,n[o])}return r},e.prototype.getStatement=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var i=this.languages.normal[t];if(null==e)return i;for(var r=0;r<e.length;r++){var o=new RegExp("<"+r+">","g");i=i.replace(o,e[r])}return i},e.prototype.getLanguageStatement=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];var r=this.languages[t][e];if(null==n)return r;for(var o=0;o<n.length;o++){var s=new RegExp("<"+o+">","g");r=r.replace(s,n[o])}return r},e}();t.LanguageUtils=e,__reflect(e.prototype,"one.LanguageUtils"),t.langUtils=new e}(one||(one={}));var __reflect=this&&this.__reflect||function(t,e,n){t.__class__=e,n?n.push(e):n=[e],t.__types__=t.__types__?n.concat(t.__types__):n},one;!function(t){var e=function(){function e(){this.groupPros=[],this.groups={},this.listeners={},this.isPause=!1,this.maxLoadingThread=2,this.loadingCount=0,this.files=[]}return e.prototype.loadGroups=function(e,n,i){void 0===i&&(i=null);for(var r=[],o=[],s=0;s<e.length;s++){for(var a=RES.getGroupByName(e[s]),h=[],c=0;c<a.length;c++)RES.getRes(a[c].name)||(h.push(a[c].name),r.push(a[c].name));o.push({name:e[s],leftKeys:h,total:a.length})}return 0==r.length?void t.callLater(function(){i&&i(100,100)},1):(this.groupPros.push({groups:o,onprogress:i}),void this.load(r,n))},e.prototype.loadGroup=function(t,e,n){void 0===n&&(n=null);for(var i=RES.getGroupByName(t),r=[],o=0;o<i.length;o++)r.push(i[o].name);this.groups[t]={keys:r,onprogress:n,current:0,total:r.length},this.load(r,e)},e.prototype.stopGroup=function(t){for(var e=RES.getGroupByName(t),n=e.length;n>=0;n--)for(var i=this.files.length;i>=0;i--)this.files[i].key==e[n].name&&this.files.splice(i,1)},e.prototype.pause=function(){this.isPause=!0},e.prototype.goon=function(){this.isPause=!1,this.loadNexts()},e.prototype.load=function(t,e,n){void 0===n&&(n=null);for(var i=0;i<this.files.length;i++){var r=this.files[i].priority;if(e>r)return this.insert(t,e,i,n),void this.loadNexts()}this.insert(t,e,this.files.length,n),this.loadNexts()},e.prototype.reducePriorities=function(){for(var t=0;t<this.files.length;t++)this.files[t].priority-=1,this.files[t].priority=Math.max(this.files[t].priority,0)},e.prototype.getExistIdx=function(t){for(var e=0;e<this.files.length;e++)if(this.files[e].key==t)return e;return-1},e.prototype.addListener=function(t,e){null==this.listeners[t]?this.listeners[t]=[e]:this.listeners[t].push(e)},e.prototype.insert=function(t,e,n,i){for(var r=0;r<t.length;r++){var o=this.getExistIdx(t[r]);-1==o?(this.files.splice(n+r,0,{key:t[r],priority:e}),null!=i&&this.addListener(t[r],i)):n+r>=o?(null!=i&&this.addListener(t[r],i),n--):(this.files.splice(o,1),this.files.splice(n+r,0,{key:t[r],priority:e}),null!=i&&this.addListener(t[r],i))}},e.prototype.loadNexts=function(){var e=this;t.setTimeout(function(){for(var t=e.loadingCount;t<e.maxLoadingThread;t++)e.loadFile()},0)},e.prototype.loadFile=function(){var t=this;if(!(this.files.length<=0||this.loadingCount>=this.maxLoadingThread||this.isPause)){this.loadingCount++;var e=this.files.shift(),n=function(){for(var n=0;t.listeners[e.key]&&n<t.listeners[e.key].length;n++)t.listeners[e.key][n]();delete t.listeners[e.key];for(var i in t.groups){var r=t.groups[i].keys.indexOf(e.key);r>=0&&(t.groups[i].current++,t.groups[i].keys.splice(r,1),t.groups[i].onprogress&&t.groups[i].onprogress(t.groups[i].current,t.groups[i].total),0==t.groups[i].keys.length&&delete t.groups[i])}for(var n=0;n<t.groupPros.length;n++){for(var o=0,s=0,a=0;a<t.groupPros[n].groups.length;a++){for(var h=t.groupPros[n].groups[a].leftKeys,c=0;c<h.length;c++){var u=h.indexOf(e.key);u>=0&&h.splice(u,1)}o+=h.length,s+=t.groupPros[n].groups[a].total}t.groupPros[n].onprogress&&(t.groupPros[n].onprogress(s-o,s),0==o&&(t.groupPros.splice(n,1),n--))}t.loadingCount--,t.loadFile()};RES.getRes(e.key)?n():RES.getResAsync(e.key,function(i){null==i?RES.getResAsync(e.key,function(i){null==i?RES.getResAsync(e.key,function(t){n()},t):n()},t):n()},this)}},e}();t.LoaderManager=e,__reflect(e.prototype,"one.LoaderManager"),t.loaderManager=new e}(one||(one={}));var __reflect=this&&this.__reflect||function(t,e,n){t.__class__=e,n?n.push(e):n=[e],t.__types__=t.__types__?n.concat(t.__types__):n},one;!function(t){var e=function(){function t(){this.onCalls={}}return t.prototype.once=function(t,e,n){return this.addCall(t,e,n,1)},t.prototype.on=function(t,e,n){return this.addCall(t,e,n,-1)},t.prototype.addCall=function(t,e,n,i){var r=this.onCalls[t];if(null==r)r=this.onCalls[t]=[];else for(var o=0;o<r.length;o++){var s=r[o];if(s.call==e&&s.thisObj==n)return console.error("已经存在回调"+t),!1}return r.push({call:e,thisObj:n,count:i}),!0},t.prototype.off=function(t,e,n){var i=this.onCalls[t];if(i)for(var r=0;r<i.length;r++){var o=i[r];if(o.call==e&&o.thisObj==n)return i.splice(r,1),!0}return!1},t.prototype.emit=function(t,e){var n=this.onCalls[t];if(null!=n){for(var i=(n.length,n.concat()),r=0;r<n.length;r++){var o=n[r];null==o.call?(n.splice(r,1),r--):1==o.count&&(n.splice(r,1),r--)}for(var r=0;r<i.length;r++){var o=i[r];null==o.call?console.error("存在没有销毁的回调函数"):o.call.call(o.thisObj,e)}}},t}();t.Monitor=e,__reflect(e.prototype,"one.Monitor"),t.monitor=new e}(one||(one={}));var __reflect=this&&this.__reflect||function(t,e,n){t.__class__=e,n?n.push(e):n=[e],t.__types__=t.__types__?n.concat(t.__types__):n
},two;!function(t){var e=function(){function t(){}return t.getDataByNameAndID=function(e,n){if(this.tempJsonData[e]&&this.tempJsonData[e][n])return this.tempJsonData[e][n].obj;var i=t.getConfig(e)[n];if(!i)return null;var r=JSON.parse(i.value);return t.setAutoRecycle(r,e,n),r},t.getConfig=function(e){var n=t.map[e+"_json"];if(null==n){n=t.map[e+"_json"]=[];for(var i=t.getJsonValue(e),r=0;r<i.length;r++){var o=i[r][t.ID_KEY],s=i[r];null!=o&&(n[o]=s)}}return n},t.start=function(){this.isRunning||(this.isRunning=!0,one.setInterval(t.onRecycle,1e4))},t.getJsonList=function(e){var n=t.map[e+"_json"];if(null==n){n=t.map[e+"_json"]=[];for(var i=t.getJsonValue(e),r=0;r<i.length;r++){var o=i[r][t.ID_KEY],s=i[r];null!=o&&(n[o]=s)}}var a=[];for(var h in n){var c=JSON.parse(n[h].value);t.setAutoRecycle(c,e,parseInt(h)),a.push(c)}return a},t.getJsonValue=function(t){for(var e,n=0;e=RES.getRes("allConfig_"+n+"_json");){if(e[t+"_json"])return this.ID_KEY=e.ID_KEY,e[t+"_json"].data;n++}return null},t.onRecycle=function(){var e=Date.now();for(var n in t.tempJsonData)for(var i in t.tempJsonData[n])e-t.tempJsonData[n][i].time>3e4&&delete t.tempJsonData[n][i]},t.setAutoRecycle=function(e,n,i){null==t.tempJsonData[n]&&(t.tempJsonData[n]={}),t.tempJsonData[n][i]={obj:e,time:Date.now()}},t}();e.ID_KEY="",e.map={},e.isRunning=!1,e.tempJsonData={},t.LocalMap=e,__reflect(e.prototype,"two.LocalMap"),e.start()}(two||(two={}));var __reflect=this&&this.__reflect||function(t,e,n){t.__class__=e,n?n.push(e):n=[e],t.__types__=t.__types__?n.concat(t.__types__):n},one;!function(t){function e(t){if(RES.hasRes(t))return t;if("Android"==egret.Capabilities.os){if(RES.hasRes(t+"_ogg"))return t+"_ogg"}else if("iOS"==egret.Capabilities.os&&RES.hasRes(t+"_m4a"))return t+"_m4a";return RES.hasRes(t+"_mp3")?t+"_mp3":null}function n(t){var e;if("Android"==egret.Capabilities.os){if(e=RES.getRes(t+"_ogg"))return e}else if("iOS"==egret.Capabilities.os&&(e=RES.getRes(t+"_m4a")))return e;return e=RES.getRes(t+"_mp3"),e?e:RES.getRes(t)}t.getSoundKey=e,t.getSound=n;var i=function(){function e(){this.project="",this.musicCtr=new t.MusicCtr,this.soundCtr=new t.SoundCtr}return e.prototype.getKey=function(t){return this.project+"_"+t+"_not_open"},e.prototype.isOpened=function(t){return!egret.localStorage.getItem(this.getKey(t))},e.prototype.init=function(t){this.project=t;var e=this.isOpened(egret.Sound.MUSIC),n=this.isOpened(egret.Sound.EFFECT);e?this.musicCtr.open():this.musicCtr.close(),n?this.soundCtr.open():this.soundCtr.close()},e.prototype.playMusic=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=!1),this.musicCtr.play(t,0,0,-1,e,n)},e.prototype.playLastMusic=function(){this.musicCtr.playLastMusic()},e.prototype.playSound=function(t,e,n){return void 0===e&&(e=0),void 0===n&&(n=1),this.soundCtr.play(t,e,n)},e.prototype.stopSound=function(t){this.soundCtr.stop(t)},e.prototype.playSounds=function(t){this.soundCtr.playSounds(t)},e.prototype.stop=function(t){t==egret.Sound.MUSIC?this.musicCtr.stopAll():this.soundCtr.stopAll()},e.prototype.open=function(t){t==egret.Sound.MUSIC?this.musicCtr.open():this.soundCtr.open(),egret.localStorage.setItem(this.getKey(t),"")},e.prototype.close=function(t){t==egret.Sound.MUSIC?this.musicCtr.close():this.soundCtr.close(),egret.localStorage.setItem(this.getKey(t),"1")},e.prototype.setVolume=function(t,e){t==egret.Sound.MUSIC?this.musicCtr.volume=e:this.soundCtr.volume=e},e.prototype.getVolume=function(t){return t==egret.Sound.MUSIC?this.musicCtr.volume:this.soundCtr.volume},e}();i.defaultMusicVolume=1,i.defaultSoundVolume=1,t.SoundManager=i,__reflect(i.prototype,"one.SoundManager"),t.soundManager=new i}(one||(one={}));var __reflect=this&&this.__reflect||function(t,e,n){t.__class__=e,n?n.push(e):n=[e],t.__types__=t.__types__?n.concat(t.__types__):n},__extends=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},two;!function(t){var e=function(t){function e(){var e=t.apply(this,arguments)||this;return e._anchorX=0,e._anchorY=0,e}return __extends(e,t),Object.defineProperty(e.prototype,"anchorX",{get:function(){return this._anchorX},set:function(t){this._anchorX=t,this.anchorOffsetX=this.width*this._anchorX},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"anchorY",{get:function(){return this._anchorY},set:function(t){this._anchorY=t,this.anchorOffsetX=this.height*this._anchorX},enumerable:!0,configurable:!0}),e.prototype.updateDisplayList=function(e,n){t.prototype.updateDisplayList.call(this,e,n),e*n!=0&&(this.anchorOffsetX=e*this._anchorX,this.anchorOffsetY=n*this._anchorY)},e}(eui.BitmapLabel);t.AnchorBitmapLabel=e,__reflect(e.prototype,"two.AnchorBitmapLabel")}(two||(two={}));var __reflect=this&&this.__reflect||function(t,e,n){t.__class__=e,n?n.push(e):n=[e],t.__types__=t.__types__?n.concat(t.__types__):n},__extends=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},two;!function(t){var e=function(t){function e(){var e=t.apply(this,arguments)||this;return e._anchorX=0,e._anchorY=0,e}return __extends(e,t),Object.defineProperty(e.prototype,"anchorX",{get:function(){return this._anchorX},set:function(t){this._anchorX=t,this.anchorOffsetX=this.width*this._anchorX},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"anchorY",{get:function(){return this._anchorY},set:function(t){this._anchorY=t,this.anchorOffsetX=this.height*this._anchorX},enumerable:!0,configurable:!0}),e.prototype.updateDisplayList=function(e,n){t.prototype.updateDisplayList.call(this,e,n),e*n!=0&&(this.anchorOffsetX=e*this._anchorX,this.anchorOffsetY=n*this._anchorY)},e}(t.CircleImage);t.AnchorImage=e,__reflect(e.prototype,"two.AnchorImage")}(two||(two={}));var __reflect=this&&this.__reflect||function(t,e,n){t.__class__=e,n?n.push(e):n=[e],t.__types__=t.__types__?n.concat(t.__types__):n},__extends=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},two;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.__isAdded=!1,e.__isCreated=!1,e.__isFirst=!0,e.addEventListener(egret.Event.ADDED_TO_STAGE,function(t){t.target==t.currentTarget&&(e.__isAdded=!0,e.__isCreated&&e.addTo())},e),e}return __extends(e,t),e.prototype.childrenCreated=function(){var e=this;t.prototype.childrenCreated.call(this),this.addEventListener(egret.Event.REMOVED_FROM_STAGE,function(t){t.target==t.currentTarget&&(e.__isAdded=!1,e.removed())},this),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.__isCreated=!0,this.__isAdded&&this.addTo()},e.prototype.addTo=function(){this.__isFirst&&this.created(),this.__isFirst=!1,this.added()},e.prototype.onTap=function(t){},e.prototype.created=function(){},e.prototype.added=function(){},e.prototype.removed=function(){},e.prototype.refreshApi=function(t){},e.prototype.refreshData=function(t,e){},e}(eui.Button);t.BaseButton=e,__reflect(e.prototype,"two.BaseButton",["eui.UIComponent","egret.DisplayObject"])}(two||(two={}));var __reflect=this&&this.__reflect||function(t,e,n){t.__class__=e,n?n.push(e):n=[e],t.__types__=t.__types__?n.concat(t.__types__):n},__extends=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},one;!function(t){var e=function(t){function e(e,n){var i=t.call(this)||this;return i.count=0,i.timescale=1,i.change(e,n),i.addEventListener(egret.Event.ADDED_TO_STAGE,i.onAddTo,i),i.addEventListener(egret.Event.REMOVED_FROM_STAGE,i.onRmoveFrom,i),i}return __extends(e,t),e.prototype.change=function(t,e){this.key=t,this.destroy(),this.count++,this.load(t,e,this.count)},e.prototype.load=function(t,e,n){var i=this,r=!1,o=!1;RES.getResAsync(t+"_json",function(){o&&i.createMovie(t,e,n),r=!0},this),RES.getResAsync(t+"_png",function(){r&&i.createMovie(t,e,n),o=!0},this)},e.prototype.createMovie=function(t,n,i){if(this.count==i){var r=new egret.MovieClipDataFactory(RES.getRes(t+"_json"),RES.getRes(t+"_png")),o=this.mc=new egret.MovieClip(r.generateMovieClipData(n));this.addChild(o),this.frame&&this.mc.gotoAndPlay(this.frame,this.playTimes),this.addListeners(),this.dispatchEventWith(e.LOAD_COMPLETE)}},e.prototype.onAddTo=function(t){this.addListeners()},e.prototype.onRmoveFrom=function(t){t.currentTarget==t.target&&this.destroy()},e.prototype.addListeners=function(){this.mc&&this.mc.addEventListener(egret.Event.LOOP_COMPLETE,this.onListener,this)},e.prototype.onListener=function(t){this.dispatchEventWith(e.LOOP_COMPLETE)},e.prototype.destroy=function(){this.mc&&this.mc.removeEventListener(egret.Event.LOOP_COMPLETE,this.onListener,this)},e.prototype.play=function(t,e){this.frame=t,this.playTimes=e,this.mc&&this.mc.gotoAndPlay(this.frame,this.playTimes)},e.prototype.stop=function(){this.mc&&this.mc.stop()},e.prototype.setScale=function(t){this.timescale=t,this.mc&&(this.mc.frameRate=24*t)},e}(egret.DisplayObjectContainer);e.LOAD_COMPLETE="onLoadComplete",e.LOOP_COMPLETE="onLoopComplete",t.DynamicMovieClip=e,__reflect(e.prototype,"one.DynamicMovieClip")}(one||(one={}));var one;!function(t){function e(t,e){i[t]=e}function n(t){var e=egret.getOption("schemeUrl");if(e&&e.length>0)for(var n=e.indexOf("?"),i=e.substr(n+1),r=i.split("&"),o=r.length,s=0;o>s;s++){var a=r[s],h=a.split("=");if(h[0]==t)return h[1]}return null}var i={};t.getOption=function(e){var r=i[e];return r?r:(r=n(e),r?r:egret.Capabilities.runtimeType==egret.RuntimeType.WEB&&(r=t.getCookie(e))?r:egret.getOption(e))},t.setOption=e}(one||(one={}));var __reflect=this&&this.__reflect||function(t,e,n){t.__class__=e,n?n.push(e):n=[e],t.__types__=t.__types__?n.concat(t.__types__):n},one;!function(t){var e=function(){function e(){this.timeId=-1}return e.prototype.wait=function(e,n,i,r){t.clearTimeout(this.timeId),this.timeId=t.setTimeout(function(){n.apply(i,r)},1e3*e)},e.prototype.clear=function(){t.clearTimeout(this.timeId)},e}();t.DelayOp=e,__reflect(e.prototype,"one.DelayOp")}(one||(one={}));var __reflect=this&&this.__reflect||function(t,e,n){t.__class__=e,n?n.push(e):n=[e],t.__types__=t.__types__?n.concat(t.__types__):n},__extends=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},two;!function(t){var e=function(t){function e(){var e=t.apply(this,arguments)||this;return e.txts=[],e.bars=[],e.maxSecond=-1,e.secId=-1,e}return __extends(e,t),e.prototype.addTxtMonitor=function(t,e){this.txts.push({txt:t,format:e}),this.maxSecond>0&&(t.text=one.formatSecond(this.maxSecond,e))},e.prototype.addBarMonitor=function(t){this.bars.push({bar:t}),this.maxSecond>0&&(t.maximum=this.maxSecond,t.value=this.maxSecond)},e.prototype.reset=function(t){for(var e=0;e<this.txts.length;e++){var n=this.txts[e];n.txt.text=one.formatSecond(t,n.format)}for(var e=0;e<this.bars.length;e++){var i=this.bars[e];i.bar.value=t}},e.prototype.start=function(t){var e=this;this.maxSecond=t;for(var n=0;n<this.bars.length;n++){var i=this.bars[n];i.bar.maximum=this.maxSecond}this.reset(t),this.secId=one.secondUtils.addSecond(t,function(t){e.reset(t),0==t&&(one.secondUtils.removeSecond(e.secId),e.dispatchEventWith(egret.Event.COMPLETE))})},e.prototype.stop=function(){one.secondUtils.removeSecond(this.secId)},e}(egret.EventDispatcher);t.Countdown=e,__reflect(e.prototype,"two.Countdown")}(two||(two={}));var __reflect=this&&this.__reflect||function(t,e,n){t.__class__=e,n?n.push(e):n=[e],t.__types__=t.__types__?n.concat(t.__types__):n},__extends=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},two;!function(t){function e(){for(var e=!1,n=t.boxLayer.numChildren-1;n>=0;n--){var i=t.boxLayer.getChildAt(n);i.isSame&&i.hasRect()&&(e?i.setRectHide(!0):(i.setRectHide(!1),e=!0))}}function n(n,i,r,o){if(void 0===i&&(i=.5),void 0===r&&(r=!1),void 0===o&&(o=!1),n.parent&&n.parent.parent)return n.isClosed=!1,void n.parent.parent.addChild(n.parent);n.touchEnabled=!1,n.isClosed=!1;var s=new d(o);t.boxLayer.addChild(s),s.addView(n,i,r),e()}function i(e){void 0===e&&(e=!1);for(var n=t.boxLayer.numChildren-1;n>=0;n--){var i=t.boxLayer.getChildAt(n);if(i.isSame&&!i.isBoxClosed())return void i.removeView(e)}}function r(e,n){void 0===n&&(n=!1);for(var i=0;i<t.boxLayer.numChildren;i++){var r=t.boxLayer.getChildAt(i);if(r.isSame&&r.isSame(e)&&!r.isBoxClosed())return void r.removeView(n)}}function o(e){void 0===e&&(e=!1);for(var n=t.boxLayer.numChildren-1;n>=0;n--){var i=t.boxLayer.getChildAt(n);i.isSame&&!i.isBoxClosed()&&i.removeView(e)}}function s(e){t.boxLayer=new eui.UILayer,e.addChild(t.boxLayer),t.boxLayer.touchEnabled=!1,f=new eui.UILayer,e.addChild(f),f.touchEnabled=!1}function a(t){f.addChild(t)}function h(t){t.parent&&t.parent.removeChild(t)}function c(t,e,n){t.__isAddTap&&(egret.warn("多次点击设置"),egret.warn(t)),t.addEventListener(egret.TouchEvent.TOUCH_TAP,e,n),t.__isAddTap=!0}function u(t,e,n){t.removeEventListener(egret.TouchEvent.TOUCH_TAP,e,n),t.__isAddTap=!1}function p(t,e,n){t.__isAddChange&&(egret.warn("多次CHANGE设置"),egret.warn(t)),t.addEventListener(egret.Event.CHANGE,e,n),t.__isAddChange=!0}function l(t,e,n){t.addEventListener(egret.Event.CHANGE,e,n),t.__isAddChange=!1}function _(t){t&&t.parent&&t.parent.removeChild(t)}var d=function(n){function i(e){var i=n.call(this)||this;if(i._isImme=!1,RES.hasRes("box_mask_png")){var r=new eui.Image("box_mask_png");i.rect=r}else{var r=new eui.Rect;r.fillColor=0,r.fillAlpha=1,i.rect=r}return i.addChild(i.rect),i.rect.left=i.rect.right=i.rect.top=i.rect.bottom=0,i.percentHeight=100,i.percentWidth=100,e&&i.rect.once(egret.TouchEvent.TOUCH_TAP,function(){i.isBoxClosed()||t.closeBox(i.view,i._isImme)},i),i}return __extends(i,n),i.prototype.hasRect=function(){return this._hasRect},i.prototype.setRectHide=function(t){t?this.rect.visible=!1:this.rect.visible=!0},i.prototype.isSame=function(t){return this.viewHashID==t.hashCode},i.prototype.addView=function(t,e,n){this._isImme=n,this._hasRect=-1!=e,-1==e?this.rect.visible=!1:(this.rect.alpha=e,this.rect.visible=!0),t.isClosed=!1,t.percentHeight=100,t.percentWidth=100,this.viewHashID=t.hashCode,this.view=t,this.visible=!0,this.addChild(t),egret.Tween.removeTweens(this.view),n?(this.view.scaleX=this.view.scaleY=1,this.view.alpha=1):(this.view.scaleX=this.view.scaleY=0,this.view.alpha=0,egret.Tween.get(this.view).to({scaleX:1,scaleY:1,alpha:1},400,egret.Ease.backOut).call(function(){},this))},i.prototype.isBoxClosed=function(){return null!=this.view?this.view.isClosed:!0},i.prototype.removeView=function(t){var n=this;if(egret.Tween.removeTweens(this.view),t)this.view.isClosed=!0,this.removeChild(this.view),this.visible=!1,this.view=null,this.parent.removeChild(this),e();else{var i=this.view.touchEnabled,r=this.view.touchChildren;this.view.touchEnabled=!1,this.view.touchChildren=!1,this.view.isClosed=!0,egret.Tween.get(this.view).to({scaleX:0,scaleY:0,alpha:0},400,egret.Ease.backIn).call(function(){n.removeChild(n.view),n.view.touchEnabled=i,n.view.touchChildren=r,n.visible=!1,n.view=null,n.parent.removeChild(n),e()},this)}},i}(eui.Component);t.Box=d,__reflect(d.prototype,"two.Box",["eui.UIComponent","egret.DisplayObject"]),t.showBox=n,t.closeTopBox=i,t.closeBox=r,t.closeAllBoxes=o;var f;t.initBox=s,t.showTipView=a,t.removeTipView=h,t.addTap=c,t.removeTap=u,t.addChange=p,t.removeChange=l,t.removeSelf=_}(two||(two={}));var one;!function(t){function e(t){for(var e="",n=document.cookie,i=n.split("; "),r=0;r<i.length;r++){var o=i[r].split("=");if("userLoginInfo"==o[0]){e=o[1];break}}if(null!=e&&""!=e)return e=decodeURI(e),JSON.parse(e)[t];for(var r=0;r<i.length;r++){var s=i[r].indexOf("="),a=i[r].substr(0,s);if(t==a)return i[r].substring(s+1)}return null}t.getCookie=e}(one||(one={}));var __reflect=this&&this.__reflect||function(t,e,n){t.__class__=e,n?n.push(e):n=[e],t.__types__=t.__types__?n.concat(t.__types__):n},__extends=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},two;!function(t){var e=function(t){function e(){var e=t.apply(this,arguments)||this;return e.hasEvent=!1,e._frames=null,e.times=-1,e._animation="",e._fileName="",e._frameRate=24,e._vCenter=0,e._hCenter=0,e}return __extends(e,t),e.prototype.created=function(){t.prototype.created.call(this),this.removeChildren(),this.play()},e.prototype.play=function(){if(null!=this._frames&&""!=this._fileName){this.mc&&this.mc.removeEventListener(egret.Event.COMPLETE,this.onComplete,this);var t=this.mc=new one.DynamicFrames(this._frames,this._fileName);t.play(this._animation,this.times),t.frameRate=this._frameRate,this.mc.horizontalCenter=this._hCenter,this.mc.verticalCenter=this._vCenter,this.addChild(t),this.mc.addEventListener(egret.Event.COMPLETE,this.onComplete,this),this.hasEvent=!0}},e.prototype.added=function(){t.prototype.added.call(this),this.mc&&!this.hasEvent&&(this.mc.addEventListener(egret.Event.COMPLETE,this.onComplete,this),this.hasEvent=!0)},e.prototype.removed=function(){t.prototype.removed.call(this),this.mc&&this.hasEvent&&(this.mc.removeEventListener(egret.Event.COMPLETE,this.onComplete,this),this.hasEvent=!1)},e.prototype.onComplete=function(){if(this._totalIdles&&this._totalIdles.length>0)this.times=one.randomInt(1,3),this._animation=this._totalIdles[one.randomInt(0,this._totalIdles.length-1)],this.mc.play(this._animation,this.times);else for(var t in this._frames)return this._animation=t,this.times=-1,void this.mc.play(t,-1)},Object.defineProperty(e.prototype,"idles",{get:function(){return this._idles},set:function(t){this._idles=t,this._totalIdles=t.split(",")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"allFrames",{set:function(t){if(t){var e=t.split(";");this._frames={};for(var n=0;n<e.length;n++){var i=e[n].split(":"),r=i[1].split(",");this._frames[i[0]]=r}this.mc&&this._animation&&this.mc.play(this._animation,this.times)}},enumerable:!0,configurable:!0}),e.prototype.playAnimation=function(t,e){void 0===e&&(e=0),this._animation=t,this.times=e,this.mc&&this.mc.play(t,e)},Object.defineProperty(e.prototype,"animation",{get:function(){return this._animation},set:function(t){this._animation=t,this.times=-1,t&&this.mc&&this.mc.play(t,this.times)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"frames",{set:function(t){if(t){this._animation="run";var e=t.split(",");this._frames={run:e}}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fileName",{set:function(t){this._fileName=t,t&&this.mc&&this.mc.changeFileName(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"frameRate",{set:function(t){this._frameRate=t,this.mc&&(this.mc.frameRate=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"vCenter",{get:function(){return this._vCenter},set:function(t){this._vCenter=t,this.mc&&(this.mc.verticalCenter=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hCenter",{get:function(){return this._hCenter},set:function(t){this._hCenter=t,this.mc&&(this.mc.horizontalCenter=t)},enumerable:!0,configurable:!0}),e}(t.BaseGroup);t.EUIMC=e,__reflect(e.prototype,"two.EUIMC")}(two||(two={}));var __reflect=this&&this.__reflect||function(t,e,n){t.__class__=e,n?n.push(e):n=[e],t.__types__=t.__types__?n.concat(t.__types__):n},__extends=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},two;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e._value=0,e._maximum=0,e}return __extends(e,t),Object.defineProperty(e.prototype,"value",{get:function(){return this._value},set:function(t){this._value=t,this.setView()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maximum",{get:function(){return this._maximum},set:function(t){this._maximum=t,this.setView()},enumerable:!0,configurable:!0}),e.prototype.setView=function(){if(this.gp_bg&&this.gp_star)for(var t=0;t<this.gp_star.numElements;t++){var e=this.gp_star.getChildAt(t);e.visible=t==this._value,e.includeInLayout=t<this._maximum;var n=this.gp_bg.getChildAt(t);n.visible=t<this._maximum,n.includeInLayout=t<this._maximum}},e.prototype.created=function(){t.prototype.created.call(this),this.setView()},e}(t.BaseComponent);t.Footer=e,__reflect(e.prototype,"two.Footer")}(two||(two={}));var __reflect=this&&this.__reflect||function(t,e,n){t.__class__=e,n?n.push(e):n=[e],t.__types__=t.__types__?n.concat(t.__types__):n},__extends=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},two;!function(t){var e=function(){function t(){}return t.load=function(e,i){function r(e,n){t.icons[e]=n;for(var i=t.loadings[e].length-1;i>=0;i--)t.loadings[e][i](n);delete t.loadings[e]}return t.icons[e]?void i(t.icons[e]):RES.hasRes(e)?RES.getRes(e)?void i(RES.getRes(e)):void RES.getResAsync(e,function(t){return i(t)},this):t.loadings[e]?void t.loadings[e].push(i):(t.loadings[e]=[i],void(n.Base64Call?n.Base64Call(e,function(t){var n=new Image;n.src=t,n.crossOrigin="*",n.onload=function(){var t=new egret.Texture;t.bitmapData=new egret.BitmapData(n),r(e,t)}}):RES.getResByUrl(e,function(t){r(e,t)},this,RES.ResourceItem.TYPE_IMAGE)))},t}();e.icons={},e.loadings={},__reflect(e.prototype,"HeadLoader");var n=function(n){function i(){var t=n.apply(this,arguments)||this;return t._isCircle=!1,t}return __extends(i,n),Object.defineProperty(i.prototype,"source",{get:function(){return this._imageUrl},set:function(t){var n=this;return this._imageUrl=t,null==t||""==t?void(this.texture=null):RES.getRes(t)?void this.resetCircle(RES.getRes(t)):void e.load(t,function(t){n.resetCircle(t)})},enumerable:!0,configurable:!0}),i.prototype.resetCircle=function(e){if(!this._isCircle)return void(this.texture=e);var n=new egret.DisplayObjectContainer,i=new egret.Bitmap;i.width=this.width,i.height=this.height,i.texture=e,n.addChild(i);var r=this.getShape();n.addChild(r),t.sceneLayer.stage.addChild(n),i.mask=r;var o=new egret.RenderTexture;o.drawToTexture(n,new egret.Rectangle(0,0,this.width,this.height),1),i.mask=null,this.texture=o,t.removeSelf(n)},Object.defineProperty(i.prototype,"isCircle",{get:function(){return this._isCircle},set:function(t){this._isCircle=t,this.texture&&this.resetCircle(this.texture)},enumerable:!0,configurable:!0}),i.prototype.getShape=function(){var t=new egret.Shape;return t.graphics.beginFill(16777215,1),t.graphics.drawCircle(this.width/2,this.width/2,this.width/2),t.graphics.endFill(),t},i}(eui.Image);t.HeadImage=n,__reflect(n.prototype,"two.HeadImage")}(two||(two={}));var __reflect=this&&this.__reflect||function(t,e,n){t.__class__=e,n?n.push(e):n=[e],t.__types__=t.__types__?n.concat(t.__types__):n},__extends=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},two;!function(t){var e=function(t){function e(){var e=t.call(this,"RedPoint")||this;return e._needNum=!1,e._keys=[],e.touchEnabled=e.touchChildren=!1,e}return __extends(e,t),e._addItem=function(t){this._removeItem(t);for(var e=t.getKeys(),n=0;n<e.length;n++)this.points[e[n]]||(this.points[e[n]]=[]),this.points[e[n]].push(t);this.items[t.hashCode]=e.concat()},e.setCount=function(t,e){for(var n=t.split("_"),i=this.Red_Counts,r=0;r<n.length;r++)null==i[n[r]]&&(i[n[r]]={count:0,children:{}}),r==n.length-1&&(i[n[r]].count=e),i=i[n[r]].children;this.resetCounts(n,this.Red_Counts[n[0]])},e.resetCounts=function(t,e){var n=t.concat();n.shift();var i=0,r=!1;for(var o in e.children)r=!0,i+=this.resetCounts(n,e.children[o]);return r?(e.count=i,i):e.count},e._removeItem=function(t){if(this.items[t.hashCode]){for(var e=this.items[t.hashCode],n=0;n<e.length;n++)if(this.points[e[n]]){var i=this.points[e[n]].indexOf(t);i>=0&&this.points[e[n]].splice(i,1)}delete this.items[t.hashCode]}},e.setRedPoint=function(t,e){e=0>=e?0:e,this.setCount(t,e),this.resetKeyView(t)},e.resetKeyView=function(t){for(var e=t.split("_"),n="",i=0;i<e.length;i++)if(i>0&&(n+="_"),n+=e[i],this.points[n])for(var r=0;r<this.points[n].length;r++)this.points[n][r].resetView()},e.clearRedPoint=function(t){this.setRedPoint(t,0)},e.getRedCount=function(t){for(var e=t.split("_"),n=this.Red_Counts,i=0;i<e.length;i++){if(null==n[e[i]])return 0;if(i==e.length-1)return n[e[i]].count;n=n[e[i]].children}},e.prototype.added=function(){t.prototype.added.call(this),e._addItem(this),this.resetView()},e.prototype.removed=function(){t.prototype.removed.call(this),e._removeItem(this)},e.prototype.resetView=function(){for(var t=0,n=0;n<this._keys.length;n++)t+=e.getRedCount(this._keys[n]);this.visible=!0,t>0?this.needNum?this.txt_count.text=t+"":this.txt_count.text="":this.visible=!1},Object.defineProperty(e.prototype,"needNum",{get:function(){return this._needNum},set:function(t){this._needNum=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"keys",{get:function(){return""},set:function(t){this._keys=t.split(","),this.txt_count&&this.resetView()},enumerable:!0,configurable:!0}),e.prototype.getKeys=function(){return this._keys},e}(t.BaseComponent);e.Red_Counts={},e.points={},e.items={},t.RedPoint=e,__reflect(e.prototype,"two.RedPoint")}(two||(two={}));var __reflect=this&&this.__reflect||function(t,e,n){t.__class__=e,n?n.push(e):n=[e],t.__types__=t.__types__?n.concat(t.__types__):n},__extends=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},two;!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.$updateRenderNode=function(){if(this.$texture){var t=this.width/this.$texture.textureWidth,e=this.height/this.$texture.textureHeight,n=Math.min(t,e),i=this.$texture.textureWidth*n,r=this.$texture.textureHeight*n,o=(this.width-i)/2/n,s=(this.height-r)/2/n;egret.sys.BitmapNode.$updateTextureData(this.$renderNode,this.$bitmapData,this.$bitmapX,this.$bitmapY,this.$bitmapWidth,this.$bitmapHeight,this.$offsetX+o,this.$offsetY+s,this.$textureWidth,this.$textureHeight,i,r,this.$sourceWidth,this.$sourceHeight,egret.BitmapFillMode.SCALE,this.$smoothing)}},e}(t.CircleImage);t.ScaleImage=e,__reflect(e.prototype,"two.ScaleImage")}(two||(two={}));var __reflect=this&&this.__reflect||function(t,e,n){t.__class__=e,n?n.push(e):n=[e],t.__types__=t.__types__?n.concat(t.__types__):n},two;!function(t){function e(){return t.$pageLayer.stage.stageWidth}function n(){return t.$pageLayer.stage.stageHeight}function i(e,n,i){void 0===n&&(n=!1),void 0===i&&(i=50),g=n,m=i,t.$pageLayer=new eui.UILayer,e.addChild(t.$pageLayer),t.$pageLayer.touchEnabled=!1,t.sceneLayer=new eui.UILayer,e.addChild(t.sceneLayer),t.sceneLayer.touchEnabled=!1,e.stage.addEventListener(egret.Event.RESIZE,o,null),n&&r()}function r(){var e=!1,n=0,i=0,r=0;t.$pageLayer.addEventListener(egret.TouchEvent.TOUCH_BEGIN,function(o){if(o.stageX<m&&t.$pageLayer.numChildren>1){r=Date.now();var s=t.$pageLayer.getChildAt(t.$pageLayer.numChildren-1),a=t.$pageLayer.getChildAt(t.$pageLayer.numChildren-2);egret.Tween.removeTweens(s),egret.Tween.removeTweens(a),e=!0,n=o.stageX,i=o.stageX}},null),t.$pageLayer.addEventListener(egret.TouchEvent.TOUCH_MOVE,function(o){if(e&&o.stageX>n){var s=Date.now();if(20>s-r)return;r=s;var a=t.$pageLayer.getChildAt(t.$pageLayer.numChildren-1);a.x=o.stageX-n;var h=t.$pageLayer.getChildAt(t.$pageLayer.numChildren-2);h&&(h.x=v*((t.getStageWith()-a.x)/t.getStageWith())),i=o.stageX}},null),t.$pageLayer.addEventListener(egret.TouchEvent.TOUCH_END,function(n){if(e){var r=t.$pageLayer.getChildAt(t.$pageLayer.numChildren-1),o=t.$pageLayer.getChildAt(t.$pageLayer.numChildren-2);n.stageX>i+10||r.x>t.getStageWith()/2?t.popPage():(egret.Tween.get(r).to({x:0},300),egret.Tween.get(o).to({x:v},300)),e=!1}},null)}function o(){for(var e=(t.$pageLayer.stage.stageHeight,0);e<y.length;e++)s(y[e].group,y[e].min,y[e].max,y[e].minProps,y[e].maxProps,y[e].isH)}function s(e,n,i,r,o,s){if(s){var a=t.$pageLayer.stage.stageHeight;if(i>a)for(var h in o)e[h]=(o[h]-r[h])*(a-n)/(i-n)+r[h];else for(var h in o)e[h]=o[h]}else{var c=t.$pageLayer.stage.stageWidth;if(i>c)for(var h in o)e[h]=(o[h]-r[h])*(c-n)/(i-n)+r[h];else for(var h in o)e[h]=o[h]}}function a(t,e,n,i,r,o){void 0===o&&(o=!0),y.push({group:t,min:e,max:n,isH:o,minProps:i,maxProps:r}),s(t,e,n,i,r,o)}function h(t){for(var e=0;e<y.length;e++)if(y[e].group==t)return void y.splice(e,1)}function c(t,e){C[t]={clazz:e}}function u(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(C[t]){var i=C[t],r=egret.getDefinitionByName(i.clazz);return 0==e.length?new r:1==e.length?new r(e[0]):2==e.length?new r(e[0],e[1]):3==e.length?new r(e[0],e[1],e[2]):4==e.length?new r(e[0],e[1],e[2],e[3]):5==e.length?new r(e[0],e[1],e[2],e[3],e[4]):6==e.length?new r(e[0],e[1],e[2],e[3],e[4],e[5]):7==e.length?new r(e[0],e[1],e[2],e[3],e[4],e[5],e[6]):8==e.length?new r(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]):9==e.length?new r(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8]):10==e.length?new r(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9]):(egret.error("构造函数不要超过10个参数"),new r)}}function p(e,n){void 0===n&&(n=0);for(var i=[],r=2;r<arguments.length;r++)i[r-2]=arguments[r];if(t.currentPageType=e,w=[e],t.$pageLayer.numChildren>0)if(0==n)t.$pageLayer.removeChildren();else{var o=d(t.$pageLayer.stage,n,t.$pageLayer.stage.stageWidth,t.$pageLayer.stage.stageHeight);t.$pageLayer.removeChildren(),t.$pageLayer.addChild(o)}var s=u.apply(this,[e].concat(i));return s&&(s.touchEnabled=!1,s.percentWidth=s.percentHeight=100,t.$pageLayer.addChildAt(s,0)),s}function l(e,n){void 0===n&&(n=!1);for(var i=[],r=2;r<arguments.length;r++)i[r-2]=arguments[r];var o=t.$pageLayer.getChildAt(t.$pageLayer.numChildren-1);o.refreshData("onPageHide",{}),t.currentPageType=e,w.push(e);var s=u.apply(this,[e].concat(i));if(s){if(s.touchEnabled=!1,s.percentWidth=s.percentHeight=100,t.$pageLayer.addChild(s),!n){var a=Math.max(300,t.getStageWith()/2);t.$pageLayer.stage.touchChildren=!1,s.x=t.getStageWith(),egret.Tween.get(s).to({x:0},a).call(function(){t.$pageLayer.stage.touchChildren=!0}),egret.Tween.removeTweens(o),egret.Tween.get(o).to({x:v},a)}}else o.x=v;return s}function _(e){void 0===e&&(e=!1);var n=function(){t.$pageLayer.removeChildAt(t.$pageLayer.numChildren-1),w.pop(),t.currentPageType=w[w.length-1];var e=t.$pageLayer.getChildAt(t.$pageLayer.numChildren-1);e.x=0,e.refreshData("onPageShow",{})};if(t.$pageLayer.numChildren>1){t.$pageLayer.stage.touchChildren=!1;var i=t.$pageLayer.getChildAt(t.$pageLayer.numChildren-1);egret.Tween.removeTweens(i),egret.Tween.get(i).to({x:t.getStageWith()},300).call(function(){t.$pageLayer.stage.touchChildren=!0,n()});var r=t.$pageLayer.getChildAt(t.$pageLayer.numChildren-2);r&&(egret.Tween.removeTweens(r),egret.Tween.get(r).to({x:0},300))}else n()}function d(e,n,i,r){function o(){t.$pageLayer.touchChildren=!0,s&&s.parent&&s.parent.removeChild(s)}for(var s=new egret.DisplayObjectContainer,a=f(e,i,r),h=40,c=5,u=h/c,p=0;h>p;p++){var l=i/c,_=r/u,d=p%c*l,g=Math.floor(p/c)*_,m=new egret.Bitmap;m.texture=a.createTexture("mc_"+p,d,g,l,_),m.anchorOffsetX=l/2,m.anchorOffsetY=_/2,m.x=d+l/2,m.y=g+_/2,s.addChild(m);var v=egret.Tween.get(m);switch(n){case 1:v.to({scaleX:0,scaleY:0,alpha:0,rotation:359},800,egret.Ease.circIn);
break;case 2:var y=-i;p%2||(y=2*i),v.to({x:y,alpha:0},800,egret.Ease.circIn);break;case 3:v.to({scaleX:.2,scaleY:1,alpha:0,blurFliter:0},800,egret.Ease.backInOut);break;case 4:v.to({alpha:0},900,egret.Ease.circIn);break;default:v.to({scaleX:1,scaleY:0,alpha:0},800,egret.Ease.circIn)}p==h-1&&v.call(o,this)}return t.$pageLayer.touchChildren=!1,s}function f(t,e,n){null==x&&(x=new egret.RenderTexture),x.drawToTexture(t,new egret.Rectangle(0,0,e,n));var i=new E(x);return i}t.getStageWith=e,t.getStageHeight=n;var g=!1,m=0,v=-200;t.initScene=i;var y=[];t.addResizeMonitor=a,t.removeResizeMonitor=h;var C={};t.setClassMap=c,t.getClassObj=u;var w=[];t.changePage=p,t.pushPage=l,t.popPage=_,t.fixedLayer=d;var x,E=function(){function t(t){this._bitmapX=0,this._bitmapY=0,this.$texture=t}return t.prototype.createTexture=function(t,e,n,i,r,o,s,a,h){void 0===o&&(o=0),void 0===s&&(s=0),void 0===a&&(a=o+i),void 0===h&&(h=s+r),"webgl"==egret.Capabilities.renderMode&&(n=this.$texture.textureHeight-n-r);var c=new egret.Texture;return c.bitmapData=this.$texture.bitmapData,c.$initData(this._bitmapX+e,this._bitmapY+n,i,r,o,s,a,h,this.$texture.textureWidth,this.$texture.textureHeight),c},t.prototype.dispose=function(){this.$texture&&this.$texture.dispose()},t}();__reflect(E.prototype,"SpriteSheet")}(two||(two={}));var __reflect=this&&this.__reflect||function(t,e,n){t.__class__=e,n?n.push(e):n=[e],t.__types__=t.__types__?n.concat(t.__types__):n},__extends=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},two;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.maxIndex=0,e._selectIndex=0,e.isUp=!1,e.time=0,e.px=0,e.lastIdx=0,e.isMoved=!1,e.avg=0,e.count=0,e.index=0,e}return __extends(e,t),Object.defineProperty(e.prototype,"selectIndex",{get:function(){return this._selectIndex},set:function(t){if(this._selectIndex=t,this.index=t,this.viewport){this.viewport.selectedIndex=t;var e=this.viewport.width;this.viewport.scrollH=e*t}this.leftArrow&&this.rightArrow&&(this.leftArrow.visible=!0,this.rightArrow.visible=!0,0==t?this.leftArrow.visible=!1:t==this.maxIndex&&(this.rightArrow.visible=!1))},enumerable:!0,configurable:!0}),e.prototype.createChildren=function(){var e=this;t.prototype.createChildren.call(this),this.leftArrow&&this.leftArrow.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){if(e.viewport){var t=e.viewport.width;egret.Tween.get(e.viewport).to({scrollH:t*(e.index-1)},200).call(function(){e.selectIndex--,e.dispatchEventWith(egret.Event.CHANGE)})}},this),this.rightArrow&&this.rightArrow.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){if(e.viewport){var t=e.viewport.width;egret.Tween.get(e.viewport).to({scrollH:t*(e.index+1)},200).call(function(){e.selectIndex++,e.dispatchEventWith(egret.Event.CHANGE)})}},this),this.addEventListener(egret.Event.REMOVED_FROM_STAGE,function(t){t.currentTarget==t.target&&e.stage.removeEventListener(egret.TouchEvent.TOUCH_END,e.onEndHandler,e,!0)},this),this.stage.addEventListener(egret.TouchEvent.TOUCH_END,this.onEndHandler,this,!0),this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,function(t){this.isUp=!1,this.px=t.stageX,this.time=egret.getTimer(),this.isMoved=!1},this,!0),egret.callLater(function(){egret.callLater(function(){var t=e.viewport.contentWidth,n=e.viewport.width;e.maxIndex=Math.round(t/n)-1,e.selectIndex=e._selectIndex},e)},this)},e.prototype.onEndHandler=function(t){this.isUp=!0;var e=egret.getTimer()-this.time,n=this.viewport.contentWidth,i=this.viewport.width,r=this.viewport.scrollH,o=Math.round(r/i),s=t.stageX;s<this.px&&200>e&&o<=this.lastIdx?o=this.lastIdx+1:s>this.px&&200>e&&o>=this.lastIdx&&(o=this.lastIdx-1);var a=this.maxIndex=Math.round(n/i)-1;o=Math.min(a,o),o=Math.max(0,o),this.lastIdx=o,this.index=o;var h=i*o-this.viewport.scrollH;this.avg=h/20,this.count=0,this.stopAnimation(),egret.stopTick(this.onTicker,this),egret.startTick(this.onTicker,this)},e.prototype.onTicker=function(t){if(this.viewport.scrollH+=this.avg,this.count++,20==this.count){var e=this.viewport.width;this.viewport.scrollH=e*this.index,egret.stopTick(this.onTicker,this),this.selectIndex!=this.index&&(this.selectIndex=this.index,this.viewport.selectedIndex=this.index,this.dispatchEventWith(egret.Event.CHANGE))}return!1},e}(eui.Scroller);t.SelectScroller=e,__reflect(e.prototype,"two.SelectScroller")}(two||(two={}));var __reflect=this&&this.__reflect||function(t,e,n){t.__class__=e,n?n.push(e):n=[e],t.__types__=t.__types__?n.concat(t.__types__):n},__extends=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},two;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.__isAdded=!1,e.__isCreated=!1,e.__isFirst=!0,e._type=egret.Sound.MUSIC,e.addEventListener(egret.Event.ADDED_TO_STAGE,function(t){t.target==t.currentTarget&&(e.__isAdded=!0,e.__isCreated&&e.addTo())},e),e}return __extends(e,t),e.prototype.childrenCreated=function(){var e=this;t.prototype.childrenCreated.call(this),this.addEventListener(egret.Event.REMOVED_FROM_STAGE,function(t){t.target==t.currentTarget&&(e.__isAdded=!1,e.removed())},this),this.__isCreated=!0,this.__isAdded&&this.addTo()},e.prototype.addTo=function(){this.__isFirst&&this.created(),this.__isFirst=!1,this.added()},e.prototype.created=function(){this._type==e.ALL?this.selected=!!one.soundManager.isOpened(egret.Sound.MUSIC):this.selected=!!one.soundManager.isOpened(this._type)},e.prototype.added=function(){this.addEventListener(egret.Event.CHANGE,this.onChange,this)},e.prototype.removed=function(){this.removeEventListener(egret.Event.CHANGE,this.onChange,this)},e.prototype.onChange=function(t){this._type==e.ALL?this.selected?(one.soundManager.open(egret.Sound.MUSIC),one.soundManager.open(egret.Sound.EFFECT)):(one.soundManager.close(egret.Sound.MUSIC),one.soundManager.close(egret.Sound.EFFECT)):this.selected?one.soundManager.open(this._type):one.soundManager.close(this._type)},Object.defineProperty(e.prototype,"type",{get:function(){return this._type},set:function(t){this._type=t},enumerable:!0,configurable:!0}),e}(eui.CheckBox);e.ALL="all",t.SoundButton=e,__reflect(e.prototype,"two.SoundButton",["eui.UIComponent","egret.DisplayObject"])}(two||(two={}));var __reflect=this&&this.__reflect||function(t,e,n){t.__class__=e,n?n.push(e):n=[e],t.__types__=t.__types__?n.concat(t.__types__):n},__extends=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},two;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e._value=0,e._maximum=0,e}return __extends(e,t),Object.defineProperty(e.prototype,"value",{get:function(){return this._value},set:function(t){this._value=t,this.setView()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maximum",{get:function(){return this._maximum},set:function(t){this._maximum=t,this.setView()},enumerable:!0,configurable:!0}),e.prototype.setView=function(){if(this.gp_bg&&this.gp_star)for(var t=0;t<this.gp_star.numElements;t++){var e=this.gp_star.getChildAt(t);e.visible=t<this._value,e.includeInLayout=t<this._maximum;var n=this.gp_bg.getChildAt(t);n.visible=t<this._maximum,n.includeInLayout=t<this._maximum}},e.prototype.created=function(){t.prototype.created.call(this),this.setView()},e}(t.BaseComponent);t.Stars=e,__reflect(e.prototype,"two.Stars")}(two||(two={}));var __reflect=this&&this.__reflect||function(t,e,n){t.__class__=e,n?n.push(e):n=[e],t.__types__=t.__types__?n.concat(t.__types__):n},__extends=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},two;!function(t){var e=function(t){function e(){var e=t.apply(this,arguments)||this;return e._selectedIndex=0,e}return __extends(e,t),e.prototype.created=function(){var e=this;t.prototype.created.call(this),this.btns=[];for(var n=0;n<this.numElements;n++)this.btns.push(this.getElementAt(n)),this.getElementAt(n).addEventListener(egret.Event.CHANGE,function(t){e.setChoose(t.currentTarget),e.dispatchEvent(t)},null);this.setChoose(this.getElementAt(this._selectedIndex))},e.prototype.setChoose=function(t){if(this.btns){this._selectedIndex=this.btns.indexOf(t);for(var e=0;e<this._selectedIndex;e++)this.addChild(this.btns[e]),this.btns[e].selected=!1;for(var e=this.numChildren-1;e>this._selectedIndex;e--)this.addChild(this.btns[e]),this.btns[e].selected=!1;this.addChild(t),t.selected=!0}},Object.defineProperty(e.prototype,"selectedIndex",{get:function(){return this._selectedIndex},set:function(t){this._selectedIndex=t,this.btns&&this.setChoose(this.btns[t])},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectedItem",{get:function(){return this.btns?this.btns[this._selectedIndex]:null},enumerable:!0,configurable:!0}),e}(t.BaseGroup);t.TabGroup=e,__reflect(e.prototype,"two.TabGroup")}(two||(two={}));var __reflect=this&&this.__reflect||function(t,e,n){t.__class__=e,n?n.push(e):n=[e],t.__types__=t.__types__?n.concat(t.__types__):n},__extends=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},two;!function(t){var e=function(t){function e(){return t.apply(this,arguments)||this}return __extends(e,t),Object.defineProperty(e.prototype,"runningProps",{set:function(t){t=t.replace(/'/g,'"'),this.runObj=JSON.parse(t)},enumerable:!0,configurable:!0}),e.prototype.added=function(){if(t.prototype.added.call(this),this.runObj)for(var e=egret.Tween.get(this,{loop:!0}),n=0;n<this.runObj.length;n++)switch(this.runObj[n].type){case 1:e.set(this.runObj[n].props);break;case 2:e.to(this.runObj[n].props,this.runObj[n].time);break;case 3:e.wait(this.runObj[n].time)}},e.prototype.removed=function(){t.prototype.removed.call(this),egret.Tween.removeTweens(this)},e}(t.BaseGroup);t.TweenGroup=e,__reflect(e.prototype,"two.TweenGroup")}(two||(two={}));var two;!function(t){function e(e){n(e,t.$pageLayer),n(e,t.sceneLayer),n(e,t.boxLayer)}function n(t,e){for(var i=0;i<e.numChildren;i++){var r=e.getChildAt(i);r.isClosed||(r.numChildren&&n(t,r),r.refreshApi&&r.refreshApi(t))}}function i(e,n){r(e,n,t.sceneLayer),r(e,n,t.boxLayer)}function r(t,e,n){for(var i=0;i<n.numChildren;i++){var o=n.getChildAt(i);o.isClosed||(o.numChildren&&r(t,e,o),o.refreshApi&&o.refreshData(t,e))}}t.onRefreshApi=e,t.onRefreshData=i}(two||(two={}));
function __extends(e,t){function n(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);n.prototype=t.prototype,e.prototype=new n}var pk=window.pk||{};pk.PKMainSkin=function(e){function t(){e.call(this),this.skinParts=["bg","icon","txt_tip","bar"],this.height=640,this.width=960,this.elementsContent=[this.bg_i(),this.icon_i(),this._Group1_i()]}__extends(t,e);var n=function(e){function t(){e.call(this),this.skinParts=["thumb","labelDisplay"],this.elementsContent=[this._Image1_i(),this.thumb_i(),this.labelDisplay_i()]}__extends(t,e);var n=t.prototype;return n._Image1_i=function(){var e=new eui.Image;return e.percentHeight=100,e.left=0,e.right=0,e.scale9Grid=new egret.Rectangle(13,9,7,2),e.source="pk_loading_bar_bg_png",e.verticalCenter=0,e},n.thumb_i=function(){var e=new eui.Image;return this.thumb=e,e.left=4,e.right=4,e.scale9Grid=new egret.Rectangle(7,3,6,2),e.source="pk_loading_bar_png",e.verticalCenter=-3,e},n.labelDisplay_i=function(){var e=new eui.Label;return this.labelDisplay=e,e.horizontalCenter=0,e.size=15,e.textAlign="center",e.textColor=16777215,e.verticalAlign="middle",e.verticalCenter=0,e},t}(eui.Skin),o=t.prototype;return o.bg_i=function(){var e=new eui.Image;return this.bg=e,e.bottom=0,e.left=0,e.right=0,e.source="pk_loading_bg_jpg",e.top=0,e},o.icon_i=function(){var e=new eui.Image;return this.icon=e,e.height=200,e.horizontalCenter=0,e.source="pk_default_head_png",e.verticalCenter=-100,e.width=200,e},o._Group1_i=function(){var e=new eui.Group;return e.horizontalCenter=0,e.verticalCenter=123,e.elementsContent=[this.txt_tip_i(),this.bar_i()],e},o.txt_tip_i=function(){var e=new eui.Label;return this.txt_tip=e,e.size=24,e.stroke=2,e.strokeColor=0,e.text="Label",e.x=191,e.y=0,e},o.bar_i=function(){var e=new eui.ProgressBar;return this.bar=e,e.height=30,e.slideDuration=0,e.value=50,e.width=440,e.x=0,e.y=36,e.skinName=n,e},t}(eui.Skin),window.pk.ReplayButtonSkin=function(e){function t(){e.call(this),this.skinParts=["iconDisplay","labelDisplay"],this.elementsContent=[this._Group1_i()],this.states=[new eui.State("up",[]),new eui.State("down",[new eui.SetProperty("_Group1","scaleX",.9),new eui.SetProperty("_Group1","scaleY",.9)]),new eui.State("disabled",[new eui.SetProperty("iconDisplay","alpha",.5)])]}__extends(t,e);var n=t.prototype;return n._Group1_i=function(){var e=new eui.Group;return this._Group1=e,e.horizontalCenter=0,e.verticalCenter=0,e.elementsContent=[this.iconDisplay_i(),this.labelDisplay_i()],e},n.iconDisplay_i=function(){var e=new eui.Image;return this.iconDisplay=e,e.source="button_shop_png",e},n.labelDisplay_i=function(){var e=new eui.Label;return this.labelDisplay=e,e.horizontalCenter=0,e.size=20,e.text="",e.verticalCenter=0,e},t}(eui.Skin);var __reflect=this&&this.__reflect||function(e,t,n){e.__class__=t,n?n.push(t):n=[t],e.__types__=e.__types__?n.concat(e.__types__):n},__extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},two;!function(e){var t=function(e){function t(){var t=e.apply(this,arguments)||this;return t._overSecond=3,t.isStart=!1,t}return __extends(t,e),t.prototype.setOverDelay=function(e){this._overSecond=e},t.prototype.initLifecycle=function(){egret.lifecycle.onPause=function(){one.soundManager.musicCtr.close()},egret.lifecycle.onResume=function(){one.soundManager.musicCtr.open()}},t.prototype.onLoadStart=function(){},t.prototype.onLoadSuccess=function(){},t.prototype.onLoadFail=function(){},t.prototype.onGameStart=function(){this.isStart=!0},t.prototype.onGameFinish=function(e){return{win:0,flag:0}},t.prototype.callBackPlat=function(){},t.prototype.onError=function(e,t,n){void 0===n&&(n=!0)},t.prototype.onUserLeave=function(){},t.prototype.onRestart=function(){},t}(egret.EventDispatcher);e.BasePlat=t,__reflect(t.prototype,"two.BasePlat")}(two||(two={}));var __reflect=this&&this.__reflect||function(e,t,n){e.__class__=t,n?n.push(t):n=[t],e.__types__=e.__types__?n.concat(e.__types__):n},two;!function(e){var t=function(){function e(){}return e.prototype.getTheme=function(e,t,n,o){function r(e){t.call(o,e)}function i(t){t.resItem.url==e&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,i,null),n.call(o))}"undefined"!=typeof generateEUI?egret.callLater(function(){t.call(o,generateEUI)},this):(RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,i,null),RES.getResByUrl(e,r,this,RES.ResourceItem.TYPE_TEXT))},e}();e.ThemeAdapter=t,__reflect(t.prototype,"two.ThemeAdapter",["eui.IThemeAdapter"])}(two||(two={}));var __reflect=this&&this.__reflect||function(e,t,n){e.__class__=t,n?n.push(t):n=[t],e.__types__=e.__types__?n.concat(e.__types__):n},two;!function(e){var t=function(){function e(){}return e.prototype.getAsset=function(e,t,n){function o(o){t.call(n,o,e)}if(RES.hasRes(e)){var r=RES.getRes(e);r?o(r):RES.getResAsync(e,o,this)}else RES.getResByUrl(e,o,this,RES.ResourceItem.TYPE_IMAGE)},e}();e.AssetAdapter=t,__reflect(t.prototype,"two.AssetAdapter",["eui.IAssetAdapter"])}(two||(two={}));var two;!function(e){function t(e){return{avatar:e.avatar,name:e.name,sex:e.sex,uId:e.uId,matchine:1==e.robot}}e.changeUser=t}(two||(two={}));var pk;!function(e){}(pk||(pk={}));var __reflect=this&&this.__reflect||function(e,t,n){e.__class__=t,n?n.push(t):n=[t],e.__types__=e.__types__?n.concat(e.__types__):n},two;!function(e){var t=function(){function e(){}return e}();e.RoleType=t,__reflect(t.prototype,"two.RoleType");var n=function(){function n(){this.$users={}}return n.prototype.hasAI=function(){for(var e in this.$users)if(this.$users[e].matchine)return!0;return!1},n.prototype.addEventListeners=function(){var e=this;pk.gameProxy.onReceiveGameEvent(function(t){e.onEventResponse(t)}),pk.gameProxy.onGameResult(function(t){e.onGameResult(t)})},n.prototype.$setUser=function(e,n){this.$users[e.uId]=e,n&&(t.$_OWN_ID=e.uId)},n.prototype.login=function(e){this.addEventListeners(),pk.gameProxy.onServerReady(function(){e()})},n.prototype.stopGame=function(e,t){switch(e){case 1:e=2;break;case 2:e=3;break;case 3:e=1}pk.gameProxy.stopGame(e,t)},n.prototype.onGameResult=function(t){var n=e.platAdapter.onGameFinish(t);one.monitor.emit("onOver",n)},n.prototype.trans=function(e,t){pk.gameProxy.sendEvent(JSON.stringify({route:e,data:t}))},n.prototype.onEventResponse=function(e){var t=JSON.parse(e.event);one.monitor.emit(t.route,t.data)},n.getInstance=function(){return null==n.instance&&(n.instance=new n),n.instance},n}();e.Trans=n,__reflect(n.prototype,"two.Trans")}(two||(two={}));var __reflect=this&&this.__reflect||function(e,t,n){e.__class__=t,n?n.push(t):n=[t],e.__types__=e.__types__?n.concat(e.__types__):n},__extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},pk;!function(e){var t=function(t){function n(){var e=t.call(this)||this;return e.progress=0,e.percentWidth=e.percentHeight=100,e}return __extends(n,t),n.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this)},n.prototype.init=function(e,t,n){this.gameId=e,this.platform=t,this.connectCall=n,this.load()},n.prototype.load=function(){RES.parseConfig(this.getCfg(),""),RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.loadGroup("pk_loading")},n.prototype.onResourceLoadComplete=function(t){"pk_loading"==t.groupName&&(RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),this.skinName=e.PKMainSkin,this.icon.source="pk_game"+this.gameId+"_png",this.bar.value=0,this.txt_tip.text="Loading...",this.loginGame())},n.prototype.loginGame=function(){var t=this;e.gameProxy=new two.LocalGameProxy,e.gameProxy.init(1,"local","1","1",{},function(){if(t.connectCall){var e=t.connectCall;t.connectCall=null,e()}})},n.prototype.sendProgress=function(t){this.bar.value=t,t<=this.progress||Math.floor(t/10)<=Math.floor(this.progress/10)||(this.progress=t,e.gameProxy.sendProgress(t))},n.prototype.setEnd=function(){this.parent.removeChild(this)},n.prototype.getCfg=function(){var e={groups:[],resources:[{url:"libs/modules/entry/assetsPK/wanba/pk_default_head.png",type:"image",name:"pk_default_head_png"},{url:"libs/modules/entry/assetsPK/wanba/pk_loading_bar.png",type:"image",name:"pk_loading_bar_png"},{url:"libs/modules/entry/assetsPK/wanba/pk_loading_bar_bg.png",type:"image",name:"pk_loading_bar_bg_png"},{url:"libs/modules/entry/assetsPK/wanba/pk_loading_bg.jpg",type:"image",name:"pk_loading_bg_jpg"}]};return e.resources.push({url:"gameIcon/game"+this.gameId+".png",type:"image",name:"pk_game"+this.gameId+"_png"}),e.groups.push({keys:"pk_default_head_png,pk_loading_bar_bg_png,pk_loading_bar_png,pk_loading_bg_jpg,"+("pk_game"+this.gameId+"_png"),name:"pk_loading"}),e},n}(eui.Component);e.PKMain=t,__reflect(t.prototype,"pk.PKMain",["eui.UIComponent","egret.DisplayObject"]),two.setClassMap("pkMain","pk.PKMain")}(pk||(pk={}));var __reflect=this&&this.__reflect||function(e,t,n){e.__class__=t,n?n.push(t):n=[t],e.__types__=e.__types__?n.concat(e.__types__):n},__extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},two;!function(e){var t=function(t){function n(){return t.call(this)||this}return __extends(n,t),n.prototype.init=function(t,n,o,r,i,s){e.Trans.getInstance().$setUser({avatar:"",name:e.getName(),sex:1,uId:"1",matchine:!1},!0),e.Trans.getInstance().$setUser({avatar:"",name:e.getName(),sex:2,uId:"2",matchine:!0},!1),s()},n.prototype.onServerReady=function(e){e()},n.prototype.sendProgress=function(e){},n.prototype.sendEvent=function(e){var t=this;one.callLater(function(){t.receiveCall({event:e})},1)},n.prototype.onReceiveGameEvent=function(e){this.receiveCall=e},n.prototype.stopGame=function(t,n){var o="",r="";for(var i in e.Trans.getInstance().$users)i==e.RoleType.$_OWN_ID?o=i:r=i;1==t?this.resultCall({winUserId:o,flag:null!=n?n:0}):2==t?this.resultCall({winUserId:r,flag:null!=n?n:0}):this.resultCall({winUserId:"",flag:null!=n?n:0})},n.prototype.onGameResult=function(e){this.resultCall=e},n}(egret.EventDispatcher);e.LocalGameProxy=t,__reflect(t.prototype,"two.LocalGameProxy",["two.IGameProxy"])}(two||(two={}));var two;!function(e){function t(){var e=["安白","安柏","安波","安寒","安荷","安卉","安筠","安蕾","安莲","安露","安梦","安南","安青","安容","安珊","安双","安彤","安萱","安雁","安阳","傲安","傲白","傲柏","傲儿","傲芙","傲菡","傲蕾","傲南","傲晴","傲柔","傲珊","傲霜","傲丝","傲松","傲薇","傲旋","傲易","傲玉","傲云","傲之","白安","白柏","白翠","白凡","白风","白枫","白卉","白筠","白莲","白曼","白梅","白梦","白凝","白晴","白秋","白容","白山","白桃","白薇","白萱","白亦","白易","白玉","白竹","柏柳","半凡","半兰","半蕾","半莲","半梅","半梦","半芹","半青","半双","半雪","半烟","苞络","宝川","宝莹","闭月","碧凡","碧菡","碧灵","碧曼","碧琴","碧蓉","碧彤","碧萱","碧玉","冰蝶","冰凡","冰枫","冰海","冰姬","冰兰","冰岚","冰蓝","冰菱","冰露","冰绿","冰萍","冰巧","冰双","冰彤","冰薇","冰夏","冰香","冰旋","冰烟","冰颜","冰珍","冰真","冰之","不愁","不二","不悔","不乐","不平","不弱","不惜","采白","采波","采枫","采蓝","采柳","采梦","采珊","采文","采萱","藏花","藏今","藏鸟","涔雨","朝雪","沉鱼","初翠","初丹","初蝶","初兰","初蓝","初柳","初露","初曼","初南","初晴","初柔","初夏","初雪","初阳","初瑶","初珍","初之","从安","从波","从丹","从寒","从菡","从筠","从蕾","从灵","从露","从梦","从凝","从蓉","从霜","从彤","从雪","从阳","从云","翠安","翠柏","翠风","翠芙","翠绿","翠曼","翠梅","翠琴","翠容","翠霜","翠丝","翠桃","翠彤","翠萱","翠阳","大娘","大凄","代芙","代荷","代灵","代曼","代梅","代男","代芹","代秋","代容","代柔","代珊","代双","代桃","代天","代萱","代亦","代玉","代云","代真","丹翠","丹蝶","丹寒","丹妗","丹南","丹琴","丹秋","丹彤","丹萱","丹雪","丹烟","丹亦","丹云","丹珍","东蒽","冬寒","冬卉","冬莲","冬灵","冬菱","冬萱","冬亦","冬易","冬云","毒娘","尔安","尔白","尔蝶","尔冬","尔风","尔芙","尔槐","尔岚","尔柳","尔琴","尔容","尔蓉","尔丝","尔烟","尔云","尔珍","尔竹","二娘","凡白","凡波","凡儿","凡蕾","凡灵","凡梅","凡柔","凡双","凡霜","凡松","凡桃","凡旋","凡雁","凡阳","凡英","凡之","访波","访冬","访风","访枫","访卉","访曼","访梦","访蕊","访天","访彤","访文","访旋","访烟","访云","飞柏","飞丹","飞飞","飞凤","飞荷","飞槐","飞兰","飞莲","飞绿","飞双","飞松","飞薇","飞雪","飞烟","飞阳","飞瑶","飞珍","菲音","菲鹰","凤凰","凤灵","凤妖","芙蓉","高丽","宫苴","孤丹","孤兰","孤菱","孤萍","孤晴","孤容","孤丝","孤云","谷冬","谷槐","谷兰","谷蓝","谷菱","谷梦","谷南","谷芹","谷秋","谷蕊","谷丝","谷雪","谷云","寡妇","海安","海白","海冬","海菡","海蓝","海莲","海露","海秋","海雪","海瑶","海亦","海云","海之","含芙","含海","含卉","含蕾","含莲","含灵","含巧","含蕊","含双","含桃","含烟","含雁","含玉","含之","涵柏","涵菡","涵蕾","涵菱","涵柳","涵梅","涵山","涵双","涵雁","涵阳","涵瑶","涵易","寒安","寒凡","寒荷","寒蕾","寒梅","寒梦","寒凝","寒珊","寒松","寒天","寒香","寒烟","寒云","行云","怀蝶","怀寒","怀蕾","怀莲","怀绿","怀曼","怀梦","怀柔","怀蕊","怀薇","怀亦","幻柏","幻悲","幻波","幻翠","幻儿","幻枫","幻姬","幻莲","幻灵","幻露","幻梅","幻巧","幻然","幻珊","幻丝","幻桃","幻天","幻香","幻雪","幻嫣","幻竹","魂幽","寄翠","寄凡","寄风","寄灵","寄琴","寄容","寄柔","寄松","寄文","寄瑶","寄云","寄真","蛟凤","金连","靖柏","靖儿","靖荷","靖巧","靖柔","靖雁","靖易","静白","静柏","静丹","静枫","静芙","静槐","静蕾","静曼","静珊","静竹","绝音","可愁","可兰","可冥","可仁","可燕","葵阴","阑香","阑悦","老姆","老太","乐安","乐儿","乐枫","乐荷","乐菱","乐巧","乐蓉","乐蕊","乐双","乐松","乐天","乐萱","乐瑶","乐珍","冷安","冷荷","冷卉","冷菱","冷梅","冷霜","冷松","冷雪","冷雁","冷亦","冷玉","冷珍","冷之","梨愁","黎云","怜翠","怜寒","怜菡","怜蕾","怜梦","怜南","怜晴","怜容","怜珊","怜雪","怜阳","涟妖","灵安","灵波","灵凡","灵枫","灵寒","灵槐","灵煌","灵珊","灵松","灵薇","灵萱","灵雁","灵阳","灵竹","凌柏","凌波","凌翠","凌蝶","凌寒","凌兰","凌青","凌晴","凌丝","凌文","凌香","凌萱","凌旋","凌雪","凌瑶","凌珍","聋五","落雁","绿柏","绿蝶","绿海","绿兰","绿柳","绿凝","绿蓉","绿蕊","绿旋","绿真","绿竹","曼安","曼冬","曼凡","曼寒","曼荷","曼卉","曼岚","曼梅","曼凝","曼青","曼容","曼柔","曼彤","曼文","曼香","曼雁","曼易","曼云","媚颜","梦安","梦柏","梦凡","梦菲","梦寒","梦菡","梦槐","梦岚","梦露","梦曼","梦琪","梦秋","梦容","梦蕊","梦山","梦松","梦桃","梦旋","梦易","梦玉","梦之","梦芝","梦竹","觅波","觅翠","觅儿","觅风","觅海","觅荷","觅露","觅柔","觅山","觅双","觅夏","觅珍","妙柏","妙芙","妙菡","妙菱","妙梦","妙芹","妙晴","妙松","妙彤","妙旋","妙之","妙竹","灭绝","灭男","鸣凤","茗茗","冥茗","莫茗","莫言","莫英","慕儿","慕卉","慕灵","慕梅","慕凝","慕青","慕晴","慕蕊","慕山","南蕾","南莲","南露","南琴","南晴","南霜","南烟","南珍","念柏","念寒","念蕾","念露","念梦","念芹","念双","念桃","念薇","念文","念烟","念瑶","念云","念珍","念真","念之","凝安","凝丹","凝蝶","凝冬","凝芙","凝荷","凝莲","凝梦","凝琴","凝蕊","凝丝","凝天","凝旋","凝雁","凝阳","凝云","凝珍","凝竹","盼波","盼芙","盼海","盼兰","盼柳","盼曼","盼晴","盼秋","盼山","盼夏","盼烟","盼雁","盼易","沛白","沛春","沛儿","沛菡","沛槐","沛岚","沛蓝","沛凝","沛萍","沛芹","沛容","沛柔","沛珊","沛文","平安","平蝶","平凡","平卉","平蓝","平露","平松","平彤","平萱","岂愈","起眸","绮波","绮兰","绮菱","绮露","绮梅","绮南","绮琴","绮晴","绮山","绮烟","绮玉","千愁","千儿","千凡","千风","千兰","千柳","千凝","千萍","千琴","千青","千秋","千柔","千山","千雁","千亦","千易","虔纹","巧凡","巧荷","巧曼","巧蕊","青柏","青枫","青荷","青槐","青筠","青曼","青梦","青丝","青旋","青雪","青烟","青亦","青易","清涟","清炎","秋翠","秋蝶","秋寒","秋荷","秋尽","秋莲","秋灵","秋玲","秋凌","秋柳","秋柔","秋珊","秋双","秋烟","如柏","如冰","如波","如冬","如凡","如风","如花","如曼","如南","如娆","如容","如蓉","如霜","如松","如天","如彤","如萱","如雪","如音","如之","茹嫣","茹妖","汝燕","若冰","若翠","若枫","若灵","若菱","若魔","若男","若南","若蕊","若山","若血","若烟","若颜","若雁","若云","赛凤","赛君","三娘","三颜","傻姑","山柏","山蝶","山芙","山菡","山槐","山兰","山灵","山柳","山晴","山彤","山雁","珊珊","善愁","善斓","善若","盛男","诗翠","诗槐","诗筠","诗兰","诗蕾","诗柳","诗蕊","诗珊","诗双","诗霜","诗桃","书白","书翠","书蝶","书兰","书蕾","书南","书琴","书双","书桃","书文","书萱","书雪","书雁","书瑶","书易","书竹","双双","水儿","水风","水卉","水蓝","水绿","水蓉","水桃","水彤","水香","水瑶","水之","思枫","思卉","思菱","思柔","思山","思松","思天","思萱","思烟","思雁","思真","四娘","素阴","踏歌","太君","太兰","太清","太英","天荷","天蓝","天菱","天曼","天晴","天蓉","天薇","天亦","天玉","天真","听安","听白","听枫","听寒","听荷","听筠","听兰","听莲","听露","听南","听芹","听蓉","听双","听云","婷冉","外绣","宛白","宛儿","宛海","宛菡","宛筠","宛凝","宛秋","宛丝","宛亦","惋清","惋庭","绾绾","唯雪","问儿","问枫","问芙","问寒","问筠","问兰","问柳","问梅","问凝","问萍","问晴","问蕊","问丝","问薇","问夏","问旋","问雁","问玉","无春","无色","无心","无颜","舞仙","惜儿","惜海","惜寒","惜筠","惜灵","惜梦","惜萍","惜芹","惜蕊","惜珊","惜霜","惜天","惜文","惜萱","惜雪","溪灵","夏波","夏寒","夏菡","夏槐","夏兰","夏岚","夏柳","夏青","夏蓉","夏山","夏彤","夏旋","夏烟","夏瑶","夏云","夏真","夏之","香寒","香岚","香菱","香芦","香露","香魔","香彤","香薇","香萱","香旋","香之","向卉","向露","向梦","向南","向秋","向珊","向松","向彤","向薇","向雪","向雁","向真","小宸","小翠","小凡","小蕾"];return e[one.randomInt(0,e.length-1)]}e.getName=t}(two||(two={}));var __reflect=this&&this.__reflect||function(e,t,n){e.__class__=t,n?n.push(t):n=[t],e.__types__=e.__types__?n.concat(e.__types__):n},__extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},two;!function(e){var t=function(t){function n(){return t.apply(this,arguments)||this}return __extends(n,t),n.prototype.connect=function(){},n.prototype.initLifecycle=function(){t.prototype.initLifecycle.call(this)},n.prototype.onLoadStart=function(){},n.prototype.onLoadSuccess=function(){},n.prototype.onLoadFail=function(){},n.prototype.onGameStart=function(){},n.prototype.onGameFinish=function(t){var n=this;this.result=t;var o=0;o=""==t.winUserId?0:t.winUserId==e.RoleType.$_OWN_ID?1:-1;var r=1e3*this._overSecond;return egret.setTimeout(function(){n.callBackPlat()},this,r),this.resultWin=o,{win:o,flag:t.flag}},n.prototype.callBackPlat=function(){var e=this.resultWin;if(-1==e?e=1:0==e?e=2:1==e&&(e=3),null!=this.result){this.result;this.result=null;try{}catch(t){}}},n.prototype.onError=function(e,t,n){void 0===n&&(n=!0)},n.prototype.onRestart=function(){this.dispatchEventWith("onRestart")},n}(e.BasePlat);e.PKPlat=t,__reflect(t.prototype,"two.PKPlat")}(two||(two={}));var __reflect=this&&this.__reflect||function(e,t,n){e.__class__=t,n?n.push(t):n=[t],e.__types__=e.__types__?n.concat(e.__types__):n},__extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},two;!function(e){var t=function(t){function n(){var e=t.apply(this,arguments)||this;return e.isThemeLoadEnd=!1,e.isResourceLoadEnd=!1,e}return __extends(n,t),n.prototype.setConfigs=function(){e.platAdapter=new e.PKPlat,e.platAdapter.addEventListener("onRestart",this.restart,this),window.onerror=function(t,n,o){egret.log(t+n+o),e.platAdapter.onError("与服务器断开连接。。。。",t+n+o)}},n.prototype.createChildren=function(){t.prototype.createChildren.call(this),egret.ImageLoader.crossOrigin="anonymous",this.setConfigs(),one.secondUtils=new one.SecondUtils,one.secondUtils.start(),e.platAdapter.initLifecycle(),e.initScene(this),e.initBox(this),this.preRes()},n.prototype.preRes=function(){var t=new e.AssetAdapter;egret.registerImplementation("eui.IAssetAdapter",t),egret.registerImplementation("eui.IThemeAdapter",new e.ThemeAdapter),RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.loadConfig("resource/241dd242_14391.json","resource/");var n=new eui.Theme("resource/36d73032_58.json",this.stage);n.addEventListener(eui.UIEvent.COMPLETE,this.onThemeLoadComplete,this)},n.prototype.onConfigComplete=function(t){var n=this;RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),RES.getResAsync("config_plat_json",function(t){e.platAdapter.setOverDelay(t.overSecond);var o=t.gameId,r="local";n.pkMain=e.changePage("pkMain"),n.pkMain.init(o,r,function(){RES.loadGroup("games")})},this)},n.prototype.restart=function(){var t=this;e.Trans.getInstance().$users={};var n=RES.getRes("config_plat_json");e.platAdapter.setOverDelay(n.overSecond);var o=n.gameId,r="local";setLoadingVisible(!0,!0,function(){t.pkMain=e.changePage("pkMain"),t.pkMain.init(o,r,function(){t.pkMain.sendProgress(100),t.createScene()})})},n.prototype.onThemeLoadComplete=function(){this.isThemeLoadEnd=!0,this.createScene()},n.prototype.onResourceLoadComplete=function(e){"games"==e.groupName&&(RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),this.isResourceLoadEnd=!0,this.createScene())},n.prototype.createScene=function(){var t=this;this.isThemeLoadEnd&&this.isResourceLoadEnd&&e.Trans.getInstance().login(function(){t.pkMain.setEnd(),t.startCreateScene()})},n.prototype.onItemLoadError=function(t){e.platAdapter.onError("与服务器断开连接。。。。","Url:"+t.resItem.url+" has failed to load",!1),egret.log("Url:"+t.resItem.url+" has failed to load")},n.prototype.onResourceLoadError=function(t){e.platAdapter.onError("与服务器断开连接。。。。","Group:"+t.groupName+" has failed to load",!1),egret.log("Group:"+t.groupName+" has failed to load"),this.onResourceLoadComplete(t)},n.prototype.onResourceProgress=function(e){"games"==e.groupName&&this.pkMain.sendProgress(Math.floor(100*e.itemsLoaded/e.itemsTotal))},n.prototype.startCreateScene=function(){var t=this;one.soundManager.playMusic("bg"),this.stage.once(egret.TouchEvent.TOUCH_END,function(){one.soundManager.playLastMusic()},this),this.game=e.changePage("match"),one.setTimeout(function(){t.startGame()},200)},n.prototype.startGame=function(){var t=[];for(var n in e.Trans.getInstance().$users)t.push(n);t.sort(function(e,t){return e>t?1:-1}),console.log(JSON.stringify(t)),console.log(JSON.stringify(e.Trans.getInstance().$users)),e.Trans.getInstance().hasAI()?this.game.start(t,e.RoleType.$_OWN_ID+"",1,!0,e.Trans.getInstance().$users):this.game.start(t,e.RoleType.$_OWN_ID+"",2,!1,e.Trans.getInstance().$users)},n}(eui.UILayer);e.Main=t,__reflect(t.prototype,"two.Main")}(two||(two={}));
var __reflect=this&&this.__reflect||function(t,e,i){t.__class__=e,i?i.push(e):i=[e],t.__types__=t.__types__?i.concat(t.__types__):i},__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},two;!function(t){function e(t,e){window.createRewardedVideoAd?window.createRewardedVideoAd(t,e):e&&e({code:0})}t.createRewardedVideoAd=e;var i=function(t){function e(e){var i=t.call(this)||this;return i.adId=e,i.isAddBtn=!1,i}return __extends(e,t),e.prototype.childrenCreated=function(){var e=this;t.prototype.childrenCreated.call(this),this.addEventListener(egret.Event.REMOVED_FROM_STAGE,function(t){t.target==t.currentTarget&&e.removed()},this)},e.prototype.removed=function(){this.loginBtn&&(this.loginBtn.hide(),this.loginBtn.destroy()),this.visible=!1},e.prototype.updateDisplayList=function(e,i){t.prototype.updateDisplayList.call(this,e,i),!this.isAddBtn&&window.createBannerAd&&(this.isAddBtn=!0,this.loginBtn=window.createBannerAd(this.adId,{left:this.x,top:this.y,width:this.width,height:this.height}),this.loginBtn.show(),this.loginBtn?this.visible=!1:this.visible=!0)},e}(eui.Component);t.BannerAd=i,__reflect(i.prototype,"two.BannerAd")}(two||(two={}));var one;!function(t){function e(e,i){t.plat=e,t.plat.canUse()&&e.init(i)}t.initPlatform=e}(one||(one={}));
var __reflect=this&&this.__reflect||function(t,e,n){t.__class__=e,n?n.push(e):n=[e],t.__types__=t.__types__?n.concat(t.__types__):n},__extends=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},two;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.percentWidth=e.percentHeight=100,e}return __extends(e,t),e}(t.BaseComponent);t.BasePage=e,__reflect(e.prototype,"two.BasePage")}(two||(two={})),function(t){var e=function(e){function n(){var t=e.apply(this,arguments)||this;return t.opclazzs={},t.readyUids={},t._isOver=!1,t}return __extends(n,e),n.prototype.reset=function(){this.addMonitors()},n.prototype.created=function(){e.prototype.created.call(this),this.addMonitors(),this.onResize()},n.prototype.onResize=function(){},n.prototype.registerOp=function(t,e){this.opclazzs[t]=e},n.prototype.getOpInstance=function(e){var n=this.opclazzs[e];return null==n&&3==e&&(n=t.BaseOp),new n},n.prototype.getNextUid=function(t){var e=this.uIds.indexOf(t);return t=this.uIds[(e+1)%this.uIds.length]},n.prototype.setOp=function(t,e){this.getOp(t).setOp(e)},n.prototype.addMonitors=function(){this.stage.addEventListener(egret.Event.RESIZE,this.onResize,this),one.monitor.on("onInit",this.onInit,this),one.monitor.on("onOver",this.onOver,this),one.monitor.on("onGameReady",this.onGameReady,this)},n.prototype.removeMonitors=function(){this.stage.removeEventListener(egret.Event.RESIZE,this.onResize,this),one.monitor.off("onInit",this.onInit,this),one.monitor.off("onGameReady",this.onGameReady,this),one.monitor.off("onOver",this.onOver,this)},n.prototype.removed=function(){e.prototype.removed.call(this),this.removeMonitors()},n.prototype.start=function(e,n,i,o,s){this.useMachine=o,this.users=s,this.ownID=n,this.uIds=e,this.isOffline=1==i,this.isFirst=0==e.indexOf(n),this.initAIs(),this.isOffline?this.canSendData()&&t.init():this.ready()},n.prototype.ready=function(){var e={uId:this.ownID};t.Trans.getInstance().trans("onGameReady",e)},n.prototype.onGameReady=function(e){if(this.readyUids[e.uId]=1,this.uIds){for(var n=0;n<this.uIds.length;n++)if(!this.readyUids[this.uIds[n]])return;this.canSendData()&&t.init()}},n.prototype.initMatch=function(){},n.prototype.isInLocal=function(t){return this.isOffline?!0:this.ownID==t},n.prototype.canSendData=function(){return this.isFirst||this.isOffline},n.prototype.onReconnected=function(t){},n.prototype.getOp=function(t){return this.Ops[t]},n.prototype.initAIs=function(){this.AIs={},this.Ops={},this.manuals={};var t=this.uIds;if(this.useMachine){if(this.isOffline){for(var e=0;e<t.length;e++)if(t[e]!=this.ownID){var n=this.getOpInstance(1);this.AIs[t[e]]=n,this.Ops[t[e]]=n}var i=t.indexOf(this.ownID);0>i&&(this.ownID=t[0],this.isFirst=!0)}else if(this.uIds.indexOf(this.ownID)>=0){var n=this.getOpInstance(1);this.AIs[this.ownID]=n,this.Ops[this.ownID]=n}}else if(this.isOffline){for(var e=0;e<t.length;e++)if(t[e]!=this.ownID){var o=this.getOpInstance(2);this.Ops[t[e]]=o,this.manuals[t[e]]=o}}else for(var e=0;e<t.length;e++)if(t[e]!=this.ownID){var o=this.getOpInstance(3);this.Ops[t[e]]=o}for(var e=0;e<t.length;e++)if(null==this.Ops[t[e]])if(t[e]!=this.ownID){var o=this.getOpInstance(3);this.Ops[t[e]]=o}else{var o=this.getOpInstance(2);this.Ops[this.ownID]=o,this.manuals[t[e]]=o}this.initMatch();for(var s in this.Ops)this.Ops[s].init(s),this.initOp(s,this.Ops[s])},n.prototype.isManual=function(t){return null!=this.manuals[t]},n.prototype.initOp=function(t,e){},n.prototype.isAI=function(t){return null!=this.AIs[t]},n.prototype.isALLAIs=function(){for(var t=0;t<this.uIds.length;t++)if(!this.isAI(this.uIds[t]))return!1;return!0},n.prototype.isALLMLs=function(){for(var t=0;t<this.uIds.length;t++)if(!this.isManual(this.uIds[t]))return!1;return!0},n.prototype.onInit=function(t){this.onInitGame(t),this.onStartGame()},n.prototype.setOver=function(e,n){this.ownID==e?t.Trans.getInstance().stopGame(n):this.isOffline&&t.Trans.getInstance().stopGame(4-n)},n.prototype.onStartGame=function(){},n.prototype.onInitGame=function(t){},Object.defineProperty(n.prototype,"isOver",{get:function(){return this._isOver},enumerable:!0,configurable:!0}),n.prototype.onOver=function(e){var n=this;this._isOver=!0;for(var i in this.Ops)this.getOp(i).setOver();this.removeMonitors();var o="";if(e.flag>1)switch(e.flag){case 1:case 2:case 3:1==e.win?o="您的对手离开游戏！":-1==e.win&&(o="您的网络不稳定，已断开游戏！");break;case 4:1==e.win?o="您的对手认输！":-1==e.win&&(o="您已认输！");break;case 5:1==e.win?o="您的对手规定时间内未操作！":-1==e.win&&(o="您规定时间内未操作！")}if(o){var s=new t.MessageTip(o);t.showTipView(s),one.setTimeout(function(){s.parent.removeChild(s),n.showOverBox(e)},2e3)}else this.showOverBox(e)},n.prototype.showOverBox=function(t){},n}(t.BasePage);t.BaseGame=e,__reflect(e.prototype,"two.BaseGame",["two.IGame"])}(two||(two={}));var __reflect=this&&this.__reflect||function(t,e,n){t.__class__=e,n?n.push(e):n=[e],t.__types__=t.__types__?n.concat(t.__types__):n},two;!function(t){var e=function(){function t(){this.isOver=!1}return t.prototype.init=function(t){this.uid=t},t.prototype.setOp=function(t){},t.prototype.setOver=function(){this.isOver=!0},t}();t.BaseOp=e,__reflect(e.prototype,"two.BaseOp")}(two||(two={}));var __reflect=this&&this.__reflect||function(t,e,n){t.__class__=e,n?n.push(e):n=[e],t.__types__=t.__types__?n.concat(t.__types__):n},__extends=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},two;!function(t){function e(e,i,o){var s=new n(e,i,o);return t.showBox(s),s}t.showConfirm=e;var n=function(e){function n(t,n,i){var o=e.call(this,"ConfirmBox")||this;return o.message=t,o.needOK=n,o.needCancel=i,o.percentWidth=o.percentHeight=100,o}return __extends(n,e),n.prototype.childrenCreated=function(){var n=this;e.prototype.childrenCreated.call(this),this.txt_message.text=this.message,this.needOK?this.btn_ok.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){t.closeBox(n),n.dispatchEventWith("onOK")},this):this.btn_ok.parent.removeChild(this.btn_ok),this.needCancel?this.btn_cancel.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){t.closeBox(n),n.dispatchEventWith("onCancel")},this):this.btn_cancel.parent.removeChild(this.btn_cancel)},n}(t.BaseComponent);t.ConfirmBox=n,__reflect(n.prototype,"two.ConfirmBox")}(two||(two={}));var __reflect=this&&this.__reflect||function(t,e,n){t.__class__=e,n?n.push(e):n=[e],t.__types__=t.__types__?n.concat(t.__types__):n},__extends=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},two;!function(t){var e=function(t){function e(){var e=t.apply(this,arguments)||this;return e._leftSecond=7,e}return __extends(e,t),Object.defineProperty(e.prototype,"leftSecond",{get:function(){return this._leftSecond},set:function(t){this._leftSecond=t},enumerable:!0,configurable:!0}),e.prototype.$setText=function(e){var n=parseInt(e);if(isNaN(n)||n>this._leftSecond)return this.visible=!1,!1;var i=t.prototype.$setText.call(this,e);return i?(this.visible=!0,egret.Tween.removeTweens(this),this.scaleX=this.scaleY=.5,egret.Tween.get(this).to({scaleX:2,scaleY:2},900),!0):!1},e}(eui.BitmapLabel);t.LeftBitmapLabel=e,__reflect(e.prototype,"two.LeftBitmapLabel")}(two||(two={}));var __reflect=this&&this.__reflect||function(t,e,n){t.__class__=e,n?n.push(e):n=[e],t.__types__=t.__types__?n.concat(t.__types__):n},__extends=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},two;!function(t){function e(e,o){var s=Date.now();if(!(400>s-n)){n=s;var r=new i(e);return r.currentState=o,t.showTipView(r),r.alpha=0,egret.Tween.get(r).to({alpha:1},100).wait(500).to({alpha:0},200).call(function(){t.removeTipView(r)},r),r}}var n=0;t.showTip=e;var i=function(t){function e(e){var n=t.call(this,"MessageTip")||this;return n.message=e,n.percentWidth=n.percentHeight=100,n}return __extends(e,t),e.prototype.created=function(){t.prototype.created.call(this),this.txt_message.text=this.message},e}(t.BaseComponent);t.MessageTip=i,__reflect(i.prototype,"two.MessageTip")}(two||(two={}));var __reflect=this&&this.__reflect||function(t,e,n){t.__class__=e,n?n.push(e):n=[e],t.__types__=t.__types__?n.concat(t.__types__):n},__extends=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},two;!function(t){var e=function(t){function e(){return t.apply(this,arguments)||this}return __extends(e,t),e.prototype.getTip=function(t,e){var n=this,i=new eui.Image(t);this.addChild(i),i.scaleX=i.scaleY=0,egret.Tween.get(i).to({scaleX:1,scaleY:1},300,egret.Ease.bounceOut).wait(500).to({alpha:0},100).call(function(){i.parent.removeChild(i),e&&n.parent.removeChild(n)},this)},e.prototype.start=function(){var t=this;this.getTip("ready_png",!1),one.soundManager.playSound("ready",0,1),one.setTimeout(function(){t.dispatchEventWith(egret.Event.COMPLETE),one.soundManager.playSound("go",0,1),t.getTip("go_png",!0)},1e3)},e}(eui.Group);t.ReadyTip=e,__reflect(e.prototype,"two.ReadyTip")}(two||(two={}));
