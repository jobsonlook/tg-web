function __extends(e,t){function n(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);n.prototype=t.prototype,e.prototype=new n}var pk=window.pk||{};pk.PKMainSkin=function(e){function t(){e.call(this),this.skinParts=["bg","icon","txt_tip","bar"],this.height=640,this.width=960,this.elementsContent=[this.bg_i(),this.icon_i(),this._Group1_i()]}__extends(t,e);var n=function(e){function t(){e.call(this),this.skinParts=["thumb","labelDisplay"],this.elementsContent=[this._Image1_i(),this.thumb_i(),this.labelDisplay_i()]}__extends(t,e);var n=t.prototype;return n._Image1_i=function(){var e=new eui.Image;return e.percentHeight=100,e.left=0,e.right=0,e.scale9Grid=new egret.Rectangle(13,9,7,2),e.source="pk_loading_bar_bg_png",e.verticalCenter=0,e},n.thumb_i=function(){var e=new eui.Image;return this.thumb=e,e.left=4,e.right=4,e.scale9Grid=new egret.Rectangle(7,3,6,2),e.source="pk_loading_bar_png",e.verticalCenter=-3,e},n.labelDisplay_i=function(){var e=new eui.Label;return this.labelDisplay=e,e.horizontalCenter=0,e.size=15,e.textAlign="center",e.textColor=16777215,e.verticalAlign="middle",e.verticalCenter=0,e},t}(eui.Skin),o=t.prototype;return o.bg_i=function(){var e=new eui.Image;return this.bg=e,e.bottom=0,e.left=0,e.right=0,e.source="pk_loading_bg_jpg",e.top=0,e},o.icon_i=function(){var e=new eui.Image;return this.icon=e,e.height=200,e.horizontalCenter=0,e.source="pk_default_head_png",e.verticalCenter=-100,e.width=200,e},o._Group1_i=function(){var e=new eui.Group;return e.horizontalCenter=0,e.verticalCenter=123,e.elementsContent=[this.txt_tip_i(),this.bar_i()],e},o.txt_tip_i=function(){var e=new eui.Label;return this.txt_tip=e,e.size=24,e.stroke=2,e.strokeColor=0,e.text="Label",e.x=191,e.y=0,e},o.bar_i=function(){var e=new eui.ProgressBar;return this.bar=e,e.height=30,e.slideDuration=0,e.value=50,e.width=440,e.x=0,e.y=36,e.skinName=n,e},t}(eui.Skin),window.pk.ReplayButtonSkin=function(e){function t(){e.call(this),this.skinParts=["iconDisplay","labelDisplay"],this.elementsContent=[this._Group1_i()],this.states=[new eui.State("up",[]),new eui.State("down",[new eui.SetProperty("_Group1","scaleX",.9),new eui.SetProperty("_Group1","scaleY",.9)]),new eui.State("disabled",[new eui.SetProperty("iconDisplay","alpha",.5)])]}__extends(t,e);var n=t.prototype;return n._Group1_i=function(){var e=new eui.Group;return this._Group1=e,e.horizontalCenter=0,e.verticalCenter=0,e.elementsContent=[this.iconDisplay_i(),this.labelDisplay_i()],e},n.iconDisplay_i=function(){var e=new eui.Image;return this.iconDisplay=e,e.source="button_shop_png",e},n.labelDisplay_i=function(){var e=new eui.Label;return this.labelDisplay=e,e.horizontalCenter=0,e.size=20,e.text="",e.verticalCenter=0,e},t}(eui.Skin);var __reflect=this&&this.__reflect||function(e,t,n){e.__class__=t,n?n.push(t):n=[t],e.__types__=e.__types__?n.concat(e.__types__):n},__extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},two;!function(e){var t=function(e){function t(){var t=e.apply(this,arguments)||this;return t._overSecond=3,t.isStart=!1,t}return __extends(t,e),t.prototype.setOverDelay=function(e){this._overSecond=e},t.prototype.initLifecycle=function(){egret.lifecycle.onPause=function(){one.soundManager.musicCtr.close()},egret.lifecycle.onResume=function(){one.soundManager.musicCtr.open()}},t.prototype.onLoadStart=function(){},t.prototype.onLoadSuccess=function(){},t.prototype.onLoadFail=function(){},t.prototype.onGameStart=function(){this.isStart=!0},t.prototype.onGameFinish=function(e){return{win:0,flag:0}},t.prototype.callBackPlat=function(){},t.prototype.onError=function(e,t,n){void 0===n&&(n=!0)},t.prototype.onUserLeave=function(){},t.prototype.onRestart=function(){},t}(egret.EventDispatcher);e.BasePlat=t,__reflect(t.prototype,"two.BasePlat")}(two||(two={}));var __reflect=this&&this.__reflect||function(e,t,n){e.__class__=t,n?n.push(t):n=[t],e.__types__=e.__types__?n.concat(e.__types__):n},two;!function(e){var t=function(){function e(){}return e.prototype.getTheme=function(e,t,n,o){function r(e){t.call(o,e)}function i(t){t.resItem.url==e&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,i,null),n.call(o))}"undefined"!=typeof generateEUI?egret.callLater(function(){t.call(o,generateEUI)},this):(RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,i,null),RES.getResByUrl(e,r,this,RES.ResourceItem.TYPE_TEXT))},e}();e.ThemeAdapter=t,__reflect(t.prototype,"two.ThemeAdapter",["eui.IThemeAdapter"])}(two||(two={}));var __reflect=this&&this.__reflect||function(e,t,n){e.__class__=t,n?n.push(t):n=[t],e.__types__=e.__types__?n.concat(e.__types__):n},two;!function(e){var t=function(){function e(){}return e.prototype.getAsset=function(e,t,n){function o(o){t.call(n,o,e)}if(RES.hasRes(e)){var r=RES.getRes(e);r?o(r):RES.getResAsync(e,o,this)}else RES.getResByUrl(e,o,this,RES.ResourceItem.TYPE_IMAGE)},e}();e.AssetAdapter=t,__reflect(t.prototype,"two.AssetAdapter",["eui.IAssetAdapter"])}(two||(two={}));var two;!function(e){function t(e){return{avatar:e.avatar,name:e.name,sex:e.sex,uId:e.uId,matchine:1==e.robot}}e.changeUser=t}(two||(two={}));var pk;!function(e){}(pk||(pk={}));var __reflect=this&&this.__reflect||function(e,t,n){e.__class__=t,n?n.push(t):n=[t],e.__types__=e.__types__?n.concat(e.__types__):n},two;!function(e){var t=function(){function e(){}return e}();e.RoleType=t,__reflect(t.prototype,"two.RoleType");var n=function(){function n(){this.$users={}}return n.prototype.hasAI=function(){for(var e in this.$users)if(this.$users[e].matchine)return!0;return!1},n.prototype.addEventListeners=function(){var e=this;pk.gameProxy.onReceiveGameEvent(function(t){e.onEventResponse(t)}),pk.gameProxy.onGameResult(function(t){e.onGameResult(t)})},n.prototype.$setUser=function(e,n){this.$users[e.uId]=e,n&&(t.$_OWN_ID=e.uId)},n.prototype.login=function(e){this.addEventListeners(),pk.gameProxy.onServerReady(function(){e()})},n.prototype.stopGame=function(e,t){switch(e){case 1:e=2;break;case 2:e=3;break;case 3:e=1}pk.gameProxy.stopGame(e,t)},n.prototype.onGameResult=function(t){var n=e.platAdapter.onGameFinish(t);one.monitor.emit("onOver",n)},n.prototype.trans=function(e,t){pk.gameProxy.sendEvent(JSON.stringify({route:e,data:t}))},n.prototype.onEventResponse=function(e){var t=JSON.parse(e.event);one.monitor.emit(t.route,t.data)},n.getInstance=function(){return null==n.instance&&(n.instance=new n),n.instance},n}();e.Trans=n,__reflect(n.prototype,"two.Trans")}(two||(two={}));var __reflect=this&&this.__reflect||function(e,t,n){e.__class__=t,n?n.push(t):n=[t],e.__types__=e.__types__?n.concat(e.__types__):n},__extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},pk;!function(e){var t=function(t){function n(){var e=t.call(this)||this;return e.progress=0,e.percentWidth=e.percentHeight=100,e}return __extends(n,t),n.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this)},n.prototype.init=function(e,t,n){this.gameId=e,this.platform=t,this.connectCall=n,this.load()},n.prototype.load=function(){RES.parseConfig(this.getCfg(),""),RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.loadGroup("pk_loading")},n.prototype.onResourceLoadComplete=function(t){"pk_loading"==t.groupName&&(RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),this.skinName=e.PKMainSkin,this.icon.source="pk_game"+this.gameId+"_png",this.bar.value=0,this.txt_tip.text="Loading...",this.loginGame())},n.prototype.loginGame=function(){var t=this;e.gameProxy=new two.LocalGameProxy,e.gameProxy.init(1,"local","1","1",{},function(){if(t.connectCall){var e=t.connectCall;t.connectCall=null,e()}})},n.prototype.sendProgress=function(t){this.bar.value=t,t<=this.progress||Math.floor(t/10)<=Math.floor(this.progress/10)||(this.progress=t,e.gameProxy.sendProgress(t))},n.prototype.setEnd=function(){this.parent.removeChild(this)},n.prototype.getCfg=function(){var e={groups:[],resources:[{url:"libs/modules/entry/assetsPK/wanba/pk_default_head.png",type:"image",name:"pk_default_head_png"},{url:"libs/modules/entry/assetsPK/wanba/pk_loading_bar.png",type:"image",name:"pk_loading_bar_png"},{url:"libs/modules/entry/assetsPK/wanba/pk_loading_bar_bg.png",type:"image",name:"pk_loading_bar_bg_png"},{url:"libs/modules/entry/assetsPK/wanba/pk_loading_bg.jpg",type:"image",name:"pk_loading_bg_jpg"}]};return e.resources.push({url:"gameIcon/game"+this.gameId+".png",type:"image",name:"pk_game"+this.gameId+"_png"}),e.groups.push({keys:"pk_default_head_png,pk_loading_bar_bg_png,pk_loading_bar_png,pk_loading_bg_jpg,"+("pk_game"+this.gameId+"_png"),name:"pk_loading"}),e},n}(eui.Component);e.PKMain=t,__reflect(t.prototype,"pk.PKMain",["eui.UIComponent","egret.DisplayObject"]),two.setClassMap("pkMain","pk.PKMain")}(pk||(pk={}));var __reflect=this&&this.__reflect||function(e,t,n){e.__class__=t,n?n.push(t):n=[t],e.__types__=e.__types__?n.concat(e.__types__):n},__extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},two;!function(e){var t=function(t){function n(){return t.call(this)||this}return __extends(n,t),n.prototype.init=function(t,n,o,r,i,s){e.Trans.getInstance().$setUser({avatar:"",name:e.getName(),sex:1,uId:"1",matchine:!1},!0),e.Trans.getInstance().$setUser({avatar:"",name:e.getName(),sex:2,uId:"2",matchine:!0},!1),s()},n.prototype.onServerReady=function(e){e()},n.prototype.sendProgress=function(e){},n.prototype.sendEvent=function(e){var t=this;one.callLater(function(){t.receiveCall({event:e})},1)},n.prototype.onReceiveGameEvent=function(e){this.receiveCall=e},n.prototype.stopGame=function(t,n){var o="",r="";for(var i in e.Trans.getInstance().$users)i==e.RoleType.$_OWN_ID?o=i:r=i;1==t?this.resultCall({winUserId:o,flag:null!=n?n:0}):2==t?this.resultCall({winUserId:r,flag:null!=n?n:0}):this.resultCall({winUserId:"",flag:null!=n?n:0})},n.prototype.onGameResult=function(e){this.resultCall=e},n}(egret.EventDispatcher);e.LocalGameProxy=t,__reflect(t.prototype,"two.LocalGameProxy",["two.IGameProxy"])}(two||(two={}));var two;!function(e){function t(){var e=["安白","安柏","安波","安寒","安荷","安卉","安筠","安蕾","安莲","安露","安梦","安南","安青","安容","安珊","安双","安彤","安萱","安雁","安阳","傲安","傲白","傲柏","傲儿","傲芙","傲菡","傲蕾","傲南","傲晴","傲柔","傲珊","傲霜","傲丝","傲松","傲薇","傲旋","傲易","傲玉","傲云","傲之","白安","白柏","白翠","白凡","白风","白枫","白卉","白筠","白莲","白曼","白梅","白梦","白凝","白晴","白秋","白容","白山","白桃","白薇","白萱","白亦","白易","白玉","白竹","柏柳","半凡","半兰","半蕾","半莲","半梅","半梦","半芹","半青","半双","半雪","半烟","苞络","宝川","宝莹","闭月","碧凡","碧菡","碧灵","碧曼","碧琴","碧蓉","碧彤","碧萱","碧玉","冰蝶","冰凡","冰枫","冰海","冰姬","冰兰","冰岚","冰蓝","冰菱","冰露","冰绿","冰萍","冰巧","冰双","冰彤","冰薇","冰夏","冰香","冰旋","冰烟","冰颜","冰珍","冰真","冰之","不愁","不二","不悔","不乐","不平","不弱","不惜","采白","采波","采枫","采蓝","采柳","采梦","采珊","采文","采萱","藏花","藏今","藏鸟","涔雨","朝雪","沉鱼","初翠","初丹","初蝶","初兰","初蓝","初柳","初露","初曼","初南","初晴","初柔","初夏","初雪","初阳","初瑶","初珍","初之","从安","从波","从丹","从寒","从菡","从筠","从蕾","从灵","从露","从梦","从凝","从蓉","从霜","从彤","从雪","从阳","从云","翠安","翠柏","翠风","翠芙","翠绿","翠曼","翠梅","翠琴","翠容","翠霜","翠丝","翠桃","翠彤","翠萱","翠阳","大娘","大凄","代芙","代荷","代灵","代曼","代梅","代男","代芹","代秋","代容","代柔","代珊","代双","代桃","代天","代萱","代亦","代玉","代云","代真","丹翠","丹蝶","丹寒","丹妗","丹南","丹琴","丹秋","丹彤","丹萱","丹雪","丹烟","丹亦","丹云","丹珍","东蒽","冬寒","冬卉","冬莲","冬灵","冬菱","冬萱","冬亦","冬易","冬云","毒娘","尔安","尔白","尔蝶","尔冬","尔风","尔芙","尔槐","尔岚","尔柳","尔琴","尔容","尔蓉","尔丝","尔烟","尔云","尔珍","尔竹","二娘","凡白","凡波","凡儿","凡蕾","凡灵","凡梅","凡柔","凡双","凡霜","凡松","凡桃","凡旋","凡雁","凡阳","凡英","凡之","访波","访冬","访风","访枫","访卉","访曼","访梦","访蕊","访天","访彤","访文","访旋","访烟","访云","飞柏","飞丹","飞飞","飞凤","飞荷","飞槐","飞兰","飞莲","飞绿","飞双","飞松","飞薇","飞雪","飞烟","飞阳","飞瑶","飞珍","菲音","菲鹰","凤凰","凤灵","凤妖","芙蓉","高丽","宫苴","孤丹","孤兰","孤菱","孤萍","孤晴","孤容","孤丝","孤云","谷冬","谷槐","谷兰","谷蓝","谷菱","谷梦","谷南","谷芹","谷秋","谷蕊","谷丝","谷雪","谷云","寡妇","海安","海白","海冬","海菡","海蓝","海莲","海露","海秋","海雪","海瑶","海亦","海云","海之","含芙","含海","含卉","含蕾","含莲","含灵","含巧","含蕊","含双","含桃","含烟","含雁","含玉","含之","涵柏","涵菡","涵蕾","涵菱","涵柳","涵梅","涵山","涵双","涵雁","涵阳","涵瑶","涵易","寒安","寒凡","寒荷","寒蕾","寒梅","寒梦","寒凝","寒珊","寒松","寒天","寒香","寒烟","寒云","行云","怀蝶","怀寒","怀蕾","怀莲","怀绿","怀曼","怀梦","怀柔","怀蕊","怀薇","怀亦","幻柏","幻悲","幻波","幻翠","幻儿","幻枫","幻姬","幻莲","幻灵","幻露","幻梅","幻巧","幻然","幻珊","幻丝","幻桃","幻天","幻香","幻雪","幻嫣","幻竹","魂幽","寄翠","寄凡","寄风","寄灵","寄琴","寄容","寄柔","寄松","寄文","寄瑶","寄云","寄真","蛟凤","金连","靖柏","靖儿","靖荷","靖巧","靖柔","靖雁","靖易","静白","静柏","静丹","静枫","静芙","静槐","静蕾","静曼","静珊","静竹","绝音","可愁","可兰","可冥","可仁","可燕","葵阴","阑香","阑悦","老姆","老太","乐安","乐儿","乐枫","乐荷","乐菱","乐巧","乐蓉","乐蕊","乐双","乐松","乐天","乐萱","乐瑶","乐珍","冷安","冷荷","冷卉","冷菱","冷梅","冷霜","冷松","冷雪","冷雁","冷亦","冷玉","冷珍","冷之","梨愁","黎云","怜翠","怜寒","怜菡","怜蕾","怜梦","怜南","怜晴","怜容","怜珊","怜雪","怜阳","涟妖","灵安","灵波","灵凡","灵枫","灵寒","灵槐","灵煌","灵珊","灵松","灵薇","灵萱","灵雁","灵阳","灵竹","凌柏","凌波","凌翠","凌蝶","凌寒","凌兰","凌青","凌晴","凌丝","凌文","凌香","凌萱","凌旋","凌雪","凌瑶","凌珍","聋五","落雁","绿柏","绿蝶","绿海","绿兰","绿柳","绿凝","绿蓉","绿蕊","绿旋","绿真","绿竹","曼安","曼冬","曼凡","曼寒","曼荷","曼卉","曼岚","曼梅","曼凝","曼青","曼容","曼柔","曼彤","曼文","曼香","曼雁","曼易","曼云","媚颜","梦安","梦柏","梦凡","梦菲","梦寒","梦菡","梦槐","梦岚","梦露","梦曼","梦琪","梦秋","梦容","梦蕊","梦山","梦松","梦桃","梦旋","梦易","梦玉","梦之","梦芝","梦竹","觅波","觅翠","觅儿","觅风","觅海","觅荷","觅露","觅柔","觅山","觅双","觅夏","觅珍","妙柏","妙芙","妙菡","妙菱","妙梦","妙芹","妙晴","妙松","妙彤","妙旋","妙之","妙竹","灭绝","灭男","鸣凤","茗茗","冥茗","莫茗","莫言","莫英","慕儿","慕卉","慕灵","慕梅","慕凝","慕青","慕晴","慕蕊","慕山","南蕾","南莲","南露","南琴","南晴","南霜","南烟","南珍","念柏","念寒","念蕾","念露","念梦","念芹","念双","念桃","念薇","念文","念烟","念瑶","念云","念珍","念真","念之","凝安","凝丹","凝蝶","凝冬","凝芙","凝荷","凝莲","凝梦","凝琴","凝蕊","凝丝","凝天","凝旋","凝雁","凝阳","凝云","凝珍","凝竹","盼波","盼芙","盼海","盼兰","盼柳","盼曼","盼晴","盼秋","盼山","盼夏","盼烟","盼雁","盼易","沛白","沛春","沛儿","沛菡","沛槐","沛岚","沛蓝","沛凝","沛萍","沛芹","沛容","沛柔","沛珊","沛文","平安","平蝶","平凡","平卉","平蓝","平露","平松","平彤","平萱","岂愈","起眸","绮波","绮兰","绮菱","绮露","绮梅","绮南","绮琴","绮晴","绮山","绮烟","绮玉","千愁","千儿","千凡","千风","千兰","千柳","千凝","千萍","千琴","千青","千秋","千柔","千山","千雁","千亦","千易","虔纹","巧凡","巧荷","巧曼","巧蕊","青柏","青枫","青荷","青槐","青筠","青曼","青梦","青丝","青旋","青雪","青烟","青亦","青易","清涟","清炎","秋翠","秋蝶","秋寒","秋荷","秋尽","秋莲","秋灵","秋玲","秋凌","秋柳","秋柔","秋珊","秋双","秋烟","如柏","如冰","如波","如冬","如凡","如风","如花","如曼","如南","如娆","如容","如蓉","如霜","如松","如天","如彤","如萱","如雪","如音","如之","茹嫣","茹妖","汝燕","若冰","若翠","若枫","若灵","若菱","若魔","若男","若南","若蕊","若山","若血","若烟","若颜","若雁","若云","赛凤","赛君","三娘","三颜","傻姑","山柏","山蝶","山芙","山菡","山槐","山兰","山灵","山柳","山晴","山彤","山雁","珊珊","善愁","善斓","善若","盛男","诗翠","诗槐","诗筠","诗兰","诗蕾","诗柳","诗蕊","诗珊","诗双","诗霜","诗桃","书白","书翠","书蝶","书兰","书蕾","书南","书琴","书双","书桃","书文","书萱","书雪","书雁","书瑶","书易","书竹","双双","水儿","水风","水卉","水蓝","水绿","水蓉","水桃","水彤","水香","水瑶","水之","思枫","思卉","思菱","思柔","思山","思松","思天","思萱","思烟","思雁","思真","四娘","素阴","踏歌","太君","太兰","太清","太英","天荷","天蓝","天菱","天曼","天晴","天蓉","天薇","天亦","天玉","天真","听安","听白","听枫","听寒","听荷","听筠","听兰","听莲","听露","听南","听芹","听蓉","听双","听云","婷冉","外绣","宛白","宛儿","宛海","宛菡","宛筠","宛凝","宛秋","宛丝","宛亦","惋清","惋庭","绾绾","唯雪","问儿","问枫","问芙","问寒","问筠","问兰","问柳","问梅","问凝","问萍","问晴","问蕊","问丝","问薇","问夏","问旋","问雁","问玉","无春","无色","无心","无颜","舞仙","惜儿","惜海","惜寒","惜筠","惜灵","惜梦","惜萍","惜芹","惜蕊","惜珊","惜霜","惜天","惜文","惜萱","惜雪","溪灵","夏波","夏寒","夏菡","夏槐","夏兰","夏岚","夏柳","夏青","夏蓉","夏山","夏彤","夏旋","夏烟","夏瑶","夏云","夏真","夏之","香寒","香岚","香菱","香芦","香露","香魔","香彤","香薇","香萱","香旋","香之","向卉","向露","向梦","向南","向秋","向珊","向松","向彤","向薇","向雪","向雁","向真","小宸","小翠","小凡","小蕾"];return e[one.randomInt(0,e.length-1)]}e.getName=t}(two||(two={}));var __reflect=this&&this.__reflect||function(e,t,n){e.__class__=t,n?n.push(t):n=[t],e.__types__=e.__types__?n.concat(e.__types__):n},__extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},two;!function(e){var t=function(t){function n(){return t.apply(this,arguments)||this}return __extends(n,t),n.prototype.connect=function(){},n.prototype.initLifecycle=function(){t.prototype.initLifecycle.call(this)},n.prototype.onLoadStart=function(){},n.prototype.onLoadSuccess=function(){},n.prototype.onLoadFail=function(){},n.prototype.onGameStart=function(){},n.prototype.onGameFinish=function(t){var n=this;this.result=t;var o=0;o=""==t.winUserId?0:t.winUserId==e.RoleType.$_OWN_ID?1:-1;var r=1e3*this._overSecond;return egret.setTimeout(function(){n.callBackPlat()},this,r),this.resultWin=o,{win:o,flag:t.flag}},n.prototype.callBackPlat=function(){var e=this.resultWin;if(-1==e?e=1:0==e?e=2:1==e&&(e=3),null!=this.result){this.result;this.result=null;try{}catch(t){}}},n.prototype.onError=function(e,t,n){void 0===n&&(n=!0)},n.prototype.onRestart=function(){this.dispatchEventWith("onRestart")},n}(e.BasePlat);e.PKPlat=t,__reflect(t.prototype,"two.PKPlat")}(two||(two={}));var __reflect=this&&this.__reflect||function(e,t,n){e.__class__=t,n?n.push(t):n=[t],e.__types__=e.__types__?n.concat(e.__types__):n},__extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},two;!function(e){var t=function(t){function n(){var e=t.apply(this,arguments)||this;return e.isThemeLoadEnd=!1,e.isResourceLoadEnd=!1,e}return __extends(n,t),n.prototype.setConfigs=function(){e.platAdapter=new e.PKPlat,e.platAdapter.addEventListener("onRestart",this.restart,this),window.onerror=function(t,n,o){egret.log(t+n+o),e.platAdapter.onError("与服务器断开连接。。。。",t+n+o)}},n.prototype.createChildren=function(){t.prototype.createChildren.call(this),egret.ImageLoader.crossOrigin="anonymous",this.setConfigs(),one.secondUtils=new one.SecondUtils,one.secondUtils.start(),e.platAdapter.initLifecycle(),e.initScene(this),e.initBox(this),this.preRes()},n.prototype.preRes=function(){var t=new e.AssetAdapter;egret.registerImplementation("eui.IAssetAdapter",t),egret.registerImplementation("eui.IThemeAdapter",new e.ThemeAdapter),RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.loadConfig("resource/3149e6e0_11804.json","resource/");var n=new eui.Theme("resource/36d73032_58.json",this.stage);n.addEventListener(eui.UIEvent.COMPLETE,this.onThemeLoadComplete,this)},n.prototype.onConfigComplete=function(t){var n=this;RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),RES.getResAsync("config_plat_json",function(t){e.platAdapter.setOverDelay(t.overSecond);var o=t.gameId,r="local";n.pkMain=e.changePage("pkMain"),n.pkMain.init(o,r,function(){RES.loadGroup("games")})},this)},n.prototype.restart=function(){var t=this;e.Trans.getInstance().$users={};var n=RES.getRes("config_plat_json");e.platAdapter.setOverDelay(n.overSecond);var o=n.gameId,r="local";setLoadingVisible(!0,!0,function(){t.pkMain=e.changePage("pkMain"),t.pkMain.init(o,r,function(){t.pkMain.sendProgress(100),t.createScene()})})},n.prototype.onThemeLoadComplete=function(){this.isThemeLoadEnd=!0,this.createScene()},n.prototype.onResourceLoadComplete=function(e){"games"==e.groupName&&(RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),this.isResourceLoadEnd=!0,this.createScene())},n.prototype.createScene=function(){var t=this;this.isThemeLoadEnd&&this.isResourceLoadEnd&&e.Trans.getInstance().login(function(){t.pkMain.setEnd(),t.startCreateScene()})},n.prototype.onItemLoadError=function(t){e.platAdapter.onError("与服务器断开连接。。。。","Url:"+t.resItem.url+" has failed to load",!1),egret.log("Url:"+t.resItem.url+" has failed to load")},n.prototype.onResourceLoadError=function(t){e.platAdapter.onError("与服务器断开连接。。。。","Group:"+t.groupName+" has failed to load",!1),egret.log("Group:"+t.groupName+" has failed to load"),this.onResourceLoadComplete(t)},n.prototype.onResourceProgress=function(e){"games"==e.groupName&&this.pkMain.sendProgress(Math.floor(100*e.itemsLoaded/e.itemsTotal))},n.prototype.startCreateScene=function(){var t=this;one.soundManager.playMusic("bg"),this.stage.once(egret.TouchEvent.TOUCH_END,function(){one.soundManager.playLastMusic()},this),this.game=e.changePage("match"),one.setTimeout(function(){t.startGame()},200)},n.prototype.startGame=function(){var t=[];for(var n in e.Trans.getInstance().$users)t.push(n);t.sort(function(e,t){return e>t?1:-1}),console.log(JSON.stringify(t)),console.log(JSON.stringify(e.Trans.getInstance().$users)),e.Trans.getInstance().hasAI()?this.game.start(t,e.RoleType.$_OWN_ID+"",1,!0,e.Trans.getInstance().$users):this.game.start(t,e.RoleType.$_OWN_ID+"",2,!1,e.Trans.getInstance().$users)},n}(eui.UILayer);e.Main=t,__reflect(t.prototype,"two.Main")}(two||(two={}));
var __reflect=this&&this.__reflect||function(t,e,i){t.__class__=e,i?i.push(e):i=[e],t.__types__=t.__types__?i.concat(t.__types__):i},__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},two;!function(t){function e(t,e){window.createRewardedVideoAd?window.createRewardedVideoAd(t,e):e&&e({code:0})}t.createRewardedVideoAd=e;var i=function(t){function e(e){var i=t.call(this)||this;return i.adId=e,i.isAddBtn=!1,i}return __extends(e,t),e.prototype.childrenCreated=function(){var e=this;t.prototype.childrenCreated.call(this),this.addEventListener(egret.Event.REMOVED_FROM_STAGE,function(t){t.target==t.currentTarget&&e.removed()},this)},e.prototype.removed=function(){this.loginBtn&&(this.loginBtn.hide(),this.loginBtn.destroy()),this.visible=!1},e.prototype.updateDisplayList=function(e,i){t.prototype.updateDisplayList.call(this,e,i),!this.isAddBtn&&window.createBannerAd&&(this.isAddBtn=!0,this.loginBtn=window.createBannerAd(this.adId,{left:this.x,top:this.y,width:this.width,height:this.height}),this.loginBtn.show(),this.loginBtn?this.visible=!1:this.visible=!0)},e}(eui.Component);t.BannerAd=i,__reflect(i.prototype,"two.BannerAd")}(two||(two={}));var one;!function(t){function e(e,i){t.plat=e,t.plat.canUse()&&e.init(i)}t.initPlatform=e}(one||(one={}));
var __reflect=this&&this.__reflect||function(t,e,n){t.__class__=e,n?n.push(e):n=[e],t.__types__=t.__types__?n.concat(t.__types__):n},__extends=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},two;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.percentWidth=e.percentHeight=100,e}return __extends(e,t),e}(t.BaseComponent);t.BasePage=e,__reflect(e.prototype,"two.BasePage")}(two||(two={})),function(t){var e=function(e){function n(){var t=e.apply(this,arguments)||this;return t.opclazzs={},t.readyUids={},t._isOver=!1,t}return __extends(n,e),n.prototype.reset=function(){this.addMonitors()},n.prototype.created=function(){e.prototype.created.call(this),this.addMonitors(),this.onResize()},n.prototype.onResize=function(){},n.prototype.registerOp=function(t,e){this.opclazzs[t]=e},n.prototype.getOpInstance=function(e){var n=this.opclazzs[e];return null==n&&3==e&&(n=t.BaseOp),new n},n.prototype.getNextUid=function(t){var e=this.uIds.indexOf(t);return t=this.uIds[(e+1)%this.uIds.length]},n.prototype.setOp=function(t,e){this.getOp(t).setOp(e)},n.prototype.addMonitors=function(){this.stage.addEventListener(egret.Event.RESIZE,this.onResize,this),one.monitor.on("onInit",this.onInit,this),one.monitor.on("onOver",this.onOver,this),one.monitor.on("onGameReady",this.onGameReady,this)},n.prototype.removeMonitors=function(){this.stage.removeEventListener(egret.Event.RESIZE,this.onResize,this),one.monitor.off("onInit",this.onInit,this),one.monitor.off("onGameReady",this.onGameReady,this),one.monitor.off("onOver",this.onOver,this)},n.prototype.removed=function(){e.prototype.removed.call(this),this.removeMonitors()},n.prototype.start=function(e,n,i,o,s){this.useMachine=o,this.users=s,this.ownID=n,this.uIds=e,this.isOffline=1==i,this.isFirst=0==e.indexOf(n),this.initAIs(),this.isOffline?this.canSendData()&&t.init():this.ready()},n.prototype.ready=function(){var e={uId:this.ownID};t.Trans.getInstance().trans("onGameReady",e)},n.prototype.onGameReady=function(e){if(this.readyUids[e.uId]=1,this.uIds){for(var n=0;n<this.uIds.length;n++)if(!this.readyUids[this.uIds[n]])return;this.canSendData()&&t.init()}},n.prototype.initMatch=function(){},n.prototype.isInLocal=function(t){return this.isOffline?!0:this.ownID==t},n.prototype.canSendData=function(){return this.isFirst||this.isOffline},n.prototype.onReconnected=function(t){},n.prototype.getOp=function(t){return this.Ops[t]},n.prototype.initAIs=function(){this.AIs={},this.Ops={},this.manuals={};var t=this.uIds;if(this.useMachine){if(this.isOffline){for(var e=0;e<t.length;e++)if(t[e]!=this.ownID){var n=this.getOpInstance(1);this.AIs[t[e]]=n,this.Ops[t[e]]=n}var i=t.indexOf(this.ownID);0>i&&(this.ownID=t[0],this.isFirst=!0)}else if(this.uIds.indexOf(this.ownID)>=0){var n=this.getOpInstance(1);this.AIs[this.ownID]=n,this.Ops[this.ownID]=n}}else if(this.isOffline){for(var e=0;e<t.length;e++)if(t[e]!=this.ownID){var o=this.getOpInstance(2);this.Ops[t[e]]=o,this.manuals[t[e]]=o}}else for(var e=0;e<t.length;e++)if(t[e]!=this.ownID){var o=this.getOpInstance(3);this.Ops[t[e]]=o}for(var e=0;e<t.length;e++)if(null==this.Ops[t[e]])if(t[e]!=this.ownID){var o=this.getOpInstance(3);this.Ops[t[e]]=o}else{var o=this.getOpInstance(2);this.Ops[this.ownID]=o,this.manuals[t[e]]=o}this.initMatch();for(var s in this.Ops)this.Ops[s].init(s),this.initOp(s,this.Ops[s])},n.prototype.isManual=function(t){return null!=this.manuals[t]},n.prototype.initOp=function(t,e){},n.prototype.isAI=function(t){return null!=this.AIs[t]},n.prototype.isALLAIs=function(){for(var t=0;t<this.uIds.length;t++)if(!this.isAI(this.uIds[t]))return!1;return!0},n.prototype.isALLMLs=function(){for(var t=0;t<this.uIds.length;t++)if(!this.isManual(this.uIds[t]))return!1;return!0},n.prototype.onInit=function(t){this.onInitGame(t),this.onStartGame()},n.prototype.setOver=function(e,n){this.ownID==e?t.Trans.getInstance().stopGame(n):this.isOffline&&t.Trans.getInstance().stopGame(4-n)},n.prototype.onStartGame=function(){},n.prototype.onInitGame=function(t){},Object.defineProperty(n.prototype,"isOver",{get:function(){return this._isOver},enumerable:!0,configurable:!0}),n.prototype.onOver=function(e){var n=this;this._isOver=!0;for(var i in this.Ops)this.getOp(i).setOver();this.removeMonitors();var o="";if(e.flag>1)switch(e.flag){case 1:case 2:case 3:1==e.win?o="您的对手离开游戏！":-1==e.win&&(o="您的网络不稳定，已断开游戏！");break;case 4:1==e.win?o="您的对手认输！":-1==e.win&&(o="您已认输！");break;case 5:1==e.win?o="您的对手规定时间内未操作！":-1==e.win&&(o="您规定时间内未操作！")}if(o){var s=new t.MessageTip(o);t.showTipView(s),one.setTimeout(function(){s.parent.removeChild(s),n.showOverBox(e)},2e3)}else this.showOverBox(e)},n.prototype.showOverBox=function(t){},n}(t.BasePage);t.BaseGame=e,__reflect(e.prototype,"two.BaseGame",["two.IGame"])}(two||(two={}));var __reflect=this&&this.__reflect||function(t,e,n){t.__class__=e,n?n.push(e):n=[e],t.__types__=t.__types__?n.concat(t.__types__):n},two;!function(t){var e=function(){function t(){this.isOver=!1}return t.prototype.init=function(t){this.uid=t},t.prototype.setOp=function(t){},t.prototype.setOver=function(){this.isOver=!0},t}();t.BaseOp=e,__reflect(e.prototype,"two.BaseOp")}(two||(two={}));var __reflect=this&&this.__reflect||function(t,e,n){t.__class__=e,n?n.push(e):n=[e],t.__types__=t.__types__?n.concat(t.__types__):n},__extends=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},two;!function(t){function e(e,i,o){var s=new n(e,i,o);return t.showBox(s),s}t.showConfirm=e;var n=function(e){function n(t,n,i){var o=e.call(this,"ConfirmBox")||this;return o.message=t,o.needOK=n,o.needCancel=i,o.percentWidth=o.percentHeight=100,o}return __extends(n,e),n.prototype.childrenCreated=function(){var n=this;e.prototype.childrenCreated.call(this),this.txt_message.text=this.message,this.needOK?this.btn_ok.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){t.closeBox(n),n.dispatchEventWith("onOK")},this):this.btn_ok.parent.removeChild(this.btn_ok),this.needCancel?this.btn_cancel.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){t.closeBox(n),n.dispatchEventWith("onCancel")},this):this.btn_cancel.parent.removeChild(this.btn_cancel)},n}(t.BaseComponent);t.ConfirmBox=n,__reflect(n.prototype,"two.ConfirmBox")}(two||(two={}));var __reflect=this&&this.__reflect||function(t,e,n){t.__class__=e,n?n.push(e):n=[e],t.__types__=t.__types__?n.concat(t.__types__):n},__extends=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},two;!function(t){var e=function(t){function e(){var e=t.apply(this,arguments)||this;return e._leftSecond=7,e}return __extends(e,t),Object.defineProperty(e.prototype,"leftSecond",{get:function(){return this._leftSecond},set:function(t){this._leftSecond=t},enumerable:!0,configurable:!0}),e.prototype.$setText=function(e){var n=parseInt(e);if(isNaN(n)||n>this._leftSecond)return this.visible=!1,!1;var i=t.prototype.$setText.call(this,e);return i?(this.visible=!0,egret.Tween.removeTweens(this),this.scaleX=this.scaleY=.5,egret.Tween.get(this).to({scaleX:2,scaleY:2},900),!0):!1},e}(eui.BitmapLabel);t.LeftBitmapLabel=e,__reflect(e.prototype,"two.LeftBitmapLabel")}(two||(two={}));var __reflect=this&&this.__reflect||function(t,e,n){t.__class__=e,n?n.push(e):n=[e],t.__types__=t.__types__?n.concat(t.__types__):n},__extends=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},two;!function(t){function e(e,o){var s=Date.now();if(!(400>s-n)){n=s;var r=new i(e);return r.currentState=o,t.showTipView(r),r.alpha=0,egret.Tween.get(r).to({alpha:1},100).wait(500).to({alpha:0},200).call(function(){t.removeTipView(r)},r),r}}var n=0;t.showTip=e;var i=function(t){function e(e){var n=t.call(this,"MessageTip")||this;return n.message=e,n.percentWidth=n.percentHeight=100,n}return __extends(e,t),e.prototype.created=function(){t.prototype.created.call(this),this.txt_message.text=this.message},e}(t.BaseComponent);t.MessageTip=i,__reflect(i.prototype,"two.MessageTip")}(two||(two={}));var __reflect=this&&this.__reflect||function(t,e,n){t.__class__=e,n?n.push(e):n=[e],t.__types__=t.__types__?n.concat(t.__types__):n},__extends=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},two;!function(t){var e=function(t){function e(){return t.apply(this,arguments)||this}return __extends(e,t),e.prototype.getTip=function(t,e){var n=this,i=new eui.Image(t);this.addChild(i),i.scaleX=i.scaleY=0,egret.Tween.get(i).to({scaleX:1,scaleY:1},300,egret.Ease.bounceOut).wait(500).to({alpha:0},100).call(function(){i.parent.removeChild(i),e&&n.parent.removeChild(n)},this)},e.prototype.start=function(){var t=this;this.getTip("ready_png",!1),one.soundManager.playSound("ready",0,1),one.setTimeout(function(){t.dispatchEventWith(egret.Event.COMPLETE),one.soundManager.playSound("go",0,1),t.getTip("go_png",!0)},1e3)},e}(eui.Group);t.ReadyTip=e,__reflect(e.prototype,"two.ReadyTip")}(two||(two={}));
