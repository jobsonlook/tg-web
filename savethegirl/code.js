function getRandomNum(t, e) {
    var i = e - t, n = Math.random();
    return t + Math.round(n * i);
}

function colorRGBtoHex(t) {
    var e = t.split(",");
    return "#" + ((1 << 24) + (parseInt(e[0].split("(")[1]) << 16) + (parseInt(e[1]) << 8) + parseInt(e[2].split(")")[0])).toString(16).slice(1);
}

function randomColor() {
    var t = "rgb(" + this.random(100, 255) + "," + this.random(10, 255) + "," + this.random(10, 255) + ")";
    return t = colorRGBtoHex(t);
}

function intersectRect(t, e, i, n, s, a) {
    return !(n + a < e || n > e || i + s < t || i > t);
}

function getCurTime() {
    return new Date().getTime();
}

function getCurDate() {
    return new Date().getDate();
}

function getUseHistoryDay(t) {
    var e = {
        day: 0,
        h: 0,
        f: 0
    }, i = getCurTime() - t;
    if (i > 0) {
        var n = i / 1e3, s = Math.floor(n / 3600), a = Math.floor(n / 60);
        if (s > 0) {
            var r = Math.floor(s / 24);
            if (!(r > 0)) return e.day = 7, e;
            var o = 7 - r;
            if (o > 0) return e.day = o, e;
            if (s > 0) {
                if ((o = 168 - s) > 0) return e.day = 0, e.h = o, e;
                if (a > 0) return (o = 10080 - a) > 0 ? (e.day = 0, e.h = 0, e.f = o) : (e.day = 0,
                    e.h = 0, e.f = -1), e;
            }
        }
    }
    return e;
}

function getUseHistoryTime(t) {
    var e = getCurTime() - t;
    if (e > 0) {
        var i = e / 1e3, n = Math.floor(i / 3600), s = Math.floor(i % 3600 / 60), a = (Math.floor(i % 3600 % 60),
            "0");
        if (n >= 24) {
            a = Math.floor(n / 24) + "天前";
        } else a = n > 0 && n < 24 ? n + "小时前" : s > 0 ? s + "分钟前" : "刚刚";
        return a;
    }
    return "刚刚";
}

function getUseTime(t) {
    if (t > 0) {
        var e = t / 1e3, i = Math.floor(e / 3600), n = Math.floor(e % 3600 / 60), s = Math.floor(e % 3600 % 60), a = "0";
        if (i >= 24) {
            a = Math.floor(i / 24) + "天" + i % 24 + "时" + n + "分" + (s < 10 ? "0" + s : s) + "秒";
        } else a = i > 0 && i < 24 ? i + "时" + n + "分" + (s < 10 ? "0" + s : s) + "秒" : n + "分" + (s < 10 ? "0" + s : s) + "秒";
        return a;
    }
    return "0";
}

function getUseTime1(t) {
    if (t > 0) {
        var e = t, i = Math.floor(e / 3600), n = Math.floor(e % 3600 / 60), s = Math.floor(e % 3600 % 60), a = "0";
        if (i >= 24) {
            a = Math.floor(i / 24) + "天" + i % 24 + "时" + n + "分" + (s < 10 ? "0" + s : s) + "秒";
        } else a = i > 0 && i < 24 ? i + "时" + n + "分" + (s < 10 ? "0" + s : s) + "秒" : n + "分" + (s < 10 ? "0" + s : s) + "秒";
        return a;
    }
    return "0";
}

function upData(t, e) {
    this.arr.length > 1 && 0 !== e && (newArr = swapItems(t, e, e - 1));
}

function downData(t, e) {
    this.arr.length > 1 && e !== this.arr.length - 1 && (newArr = swapItems(this.arr, e, e + 1));
}

function drawColorText1(t, e, i) {
    if (t) for (var n = 0, s = 0; s < t.length; s++) {
        var a = drawText(t[s], e[s], i);
        a.x = n, n += a.width;
    }
}

function drawText(t, e, i) {
    var n = new Laya.Label();
   
    return n.color = e, n.fontSize = i, n.bold = !0, n.font = "Arial", n.text = t, n;
}

function getDateDiff(t) {
    var e = new Date().getTime() - t;
    if (!(e < 0)) {
        var i = e / 2592e6, n = e / 6048e5, s = e / 864e5, a = e / 36e5, r = e / 6e4;
        return i >= 1 ? i <= 12 ? Math.floor(i) + "月前" : Math.floor(i / 12) + "年前" : n >= 1 ? Math.floor(n) + "周前" : s >= 1 ? Math.floor(s) + "天前" : a >= 1 ? Math.floor(a) + "小时前" : r >= 1 ? Math.floor(r) + "分钟前" : "刚刚";
    }
}

function getJsonLength(t) {
    var e = 0;
    for (var i in t) e++;
    return e;
}

function drawTestbtn(t) {
    var e = drawText(t, "#FFFFFF", 40);
    e.bgColor = "#3dbd42", e.pivotX = e.width / 2, e.pivotY = e.height / 2, e.padding = [20, 40, 20, 40],
        e.on(Laya.Event.MOUSE_DOWN, this, function () {
            e.bgColor = "#2f9833";
        }), e.on(Laya.Event.MOUSE_UP, this, function () {
            e.bgColor = "#3dbd42";
        }), e.on(Laya.Event.MOUSE_OUT, this, function () {
            e.bgColor = "#3dbd42";
        });
    var i = new Laya.GlowFilter("#686968", 5, 5, 5);
    return e.filters = [i], e;
}

function fomatMoney(t) {
    var e = t;
    return e >= 1e4 ? toFixeds(e / 1e4) + "万" : "" + e;
}

function toFixeds(t) {
    return Math.floor(100 * t) / 100;
}

function toFixeds1(t) {
    return Math.floor(10 * t) / 10;
}

function extend(t, e) {
    for (var i in e) t[i] = e[i];
    return t;
}

function getTimeDown(t) {
    var e = new Date(t), i = new Date(), n = (parseInt(e) - parseInt(i)) / 1e3, s = Math.floor(n / 86400), a = n % 86400, r = Math.floor(a / 3600);
    a %= 3600;
    return "还剩:" + s + "天" + r + "小时" + Math.floor(a / 60) + "分钟" + a % 60 + "秒";
}

function getDayName(t) {
    var e = new Date();
    e = new Date(e.getFullYear(), e.getMonth(), e.getDate());
    var i = new Date(t), n = ((i = new Date(i.getFullYear(), i.getMonth(), i.getDate())) - e) / 1e3 / 60 / 60 / 24;
    return n < -2 ? -n + "天前" : n < -1 ? "前天" : n < 0 ? "昨天" : 0 == n ? "今天" : n < 2 ? "明天" : n < 3 ? "后天" : n + "天后";
}

function isGetCurToDay(t) {
    var e = new Date();
    e = new Date(e.getFullYear(), e.getMonth(), e.getDate());
    var i = new Date(t);
    return 0 == ((i = new Date(i.getFullYear(), i.getMonth(), i.getDate())) - e) / 1e3 / 60 / 60 / 24;
}

function isToday(t) {
    return new Date(t).toDateString() === new Date().toDateString() ? (console.log("       isToday当天"),
        !0) : new Date(t) < new Date() && (console.log("      isToday以前的日期"), !1);
}

function base64encode(t) {
    var e, i, n, s, a, r;
    for (n = t.length, i = 0, e = ""; i < n;) {
        if (s = 255 & t.charCodeAt(i++), i == n) {
            e += base64EncodeChars.charAt(s >> 2), e += base64EncodeChars.charAt((3 & s) << 4),
                e += "==";
            break;
        }
        if (a = t.charCodeAt(i++), i == n) {
            e += base64EncodeChars.charAt(s >> 2), e += base64EncodeChars.charAt((3 & s) << 4 | (240 & a) >> 4),
                e += base64EncodeChars.charAt((15 & a) << 2), e += "=";
            break;
        }
        r = t.charCodeAt(i++), e += base64EncodeChars.charAt(s >> 2), e += base64EncodeChars.charAt((3 & s) << 4 | (240 & a) >> 4),
            e += base64EncodeChars.charAt((15 & a) << 2 | (192 & r) >> 6), e += base64EncodeChars.charAt(63 & r);
    }
    return e;
}

function base64decode(t) {
    var e, i, n, s, a, r, o;
    for (r = t.length, a = 0, o = ""; a < r;) {
        do {
            e = base64DecodeChars[255 & t.charCodeAt(a++)];
        } while (a < r && -1 == e);
        if (-1 == e) break;
        do {
            i = base64DecodeChars[255 & t.charCodeAt(a++)];
        } while (a < r && -1 == i);
        if (-1 == i) break;
        o += String.fromCharCode(e << 2 | (48 & i) >> 4);
        do {
            if (61 == (n = 255 & t.charCodeAt(a++))) return o;
            n = base64DecodeChars[n];
        } while (a < r && -1 == n);
        if (-1 == n) break;
        o += String.fromCharCode((15 & i) << 4 | (60 & n) >> 2);
        do {
            if (61 == (s = 255 & t.charCodeAt(a++))) return o;
            s = base64DecodeChars[s];
        } while (a < r && -1 == s);
        if (-1 == s) break;
        o += String.fromCharCode((3 & n) << 6 | s);
    }
    return o;
}

var Laya = window.Laya = function (t, e) {
    var i = {
        __internals: [],
        __packages: {},
        __classmap: {
            Object: Object,
            Function: Function,
            Array: Array,
            String: String
        },
        __sysClass: {
            object: "Object",
            array: "Array",
            string: "String",
            dictionary: "Dictionary"
        },
        __propun: {
            writable: !0,
            enumerable: !1,
            configurable: !0
        },
        __presubstr: String.prototype.substr,
        __substr: function (t, e) {
            return 1 == arguments.length ? i.__presubstr.call(this, t) : i.__presubstr.call(this, t, e > 0 ? e : this.length + e);
        },
        __init: function (t) {
            t.forEach(function (t) {
                t.__init$ && t.__init$();
            });
        },
        __isClass: function (t) {
            return t && (t.__isclass || t == Object || t == String || t == Array);
        },
        __newvec: function (t, e) {
            var i = [];
            i.length = t;
            for (var n = 0; n < t; n++) i[n] = e;
            return i;
        },
        __extend: function (t, e) {
            function n() {
                i.un(this, "constructor", t);
            }
            for (var s in e) if (e.hasOwnProperty(s)) {
                var a = Object.getOwnPropertyDescriptor(e, s), r = a.get, o = a.set;
                r || o ? r && o ? Object.defineProperty(t, s, a) : (r && Object.defineProperty(t, s, r),
                    o && Object.defineProperty(t, s, o)) : t[s] = e[s];
            }
            n.prototype = e.prototype, t.prototype = new n(), i.un(t.prototype, "__imps", i.__copy({}, e.prototype.__imps));
        },
        __copy: function (t, e) {
            if (!e) return null;
            t = t || {};
            for (var i in e) t[i] = e[i];
            return t;
        },
        __package: function (e, n) {
            if (!i.__packages[e]) {
                i.__packages[e] = !0;
                var s = t, a = e.split(".");
                if (a.length > 1) for (var r = 0, o = a.length - 1; r < o; r++) {
                    var h = s[a[r]];
                    s = h || (s[a[r]] = {});
                }
                s[a[a.length - 1]] || (s[a[a.length - 1]] = n || {});
            }
        },
        __hasOwnProperty: function (t, e) {
            function i(t, e) {
                if (Object.hasOwnProperty.call(e.prototype, t)) return !0;
                var n = e.prototype.__super;
                return null == n ? null : i(t, n);
            }
            return e = e || this, Object.hasOwnProperty.call(e, t) || i(t, e.__class);
        },
        __typeof: function (t, e) {
            if (!t || !e) return !1;
            if (e === String) return "string" == typeof t;
            if (e === Number) return "number" == typeof t;
            if (e.__interface__) e = e.__interface__; else if ("string" != typeof e) return t instanceof e;
            return t.__imps && t.__imps[e] || t.__class == e;
        },
        __as: function (t, e) {
            return this.__typeof(t, e) ? t : null;
        },
        __int: function (t) {
            return t ? parseInt(t) : 0;
        },
        interface: function (e, n) {
            i.__package(e, {});
            var s = i.__internals, a = s[e] = s[e] || {
                self: e
            };
            if (n) {
                var r = n.split(",");
                a.extend = [];
                for (c = 0; c < r.length; c++) {
                    var o = r[c];
                    s[o] = s[o] || {
                        self: o
                    }, a.extend.push(s[o]);
                }
            }
            for (var h = t, l = e.split("."), c = 0; c < l.length - 1; c++) h = h[l[c]];
            h[l[l.length - 1]] = {
                __interface__: e
            };
        },
        class: function (e, n, s, a) {
            if (s && i.__extend(e, s), n) if (i.__package(n, e), i.__classmap[n] = e, n.indexOf(".") > 0) {
                if (0 == n.indexOf("laya.")) {
                    var r = n.split(".");
                    a = a || r[r.length - 1], i[a] && console.log("Warning!,this class[" + a + "] already exist:", i[a]),
                        i[a] = e;
                }
            } else "Main" == n ? t.Main = e : (i[n] && console.log("Error!,this class[" + n + "] already exist:", i[n]),
                i[n] = e);
            var o = i.un, h = e.prototype;
            o(h, "hasOwnProperty", i.__hasOwnProperty), o(h, "__class", e), o(h, "__super", s),
                o(h, "__className", n), o(e, "__super", s), o(e, "__className", n), o(e, "__isclass", !0),
                o(e, "super", function (t) {
                    this.__super.call(t);
                });
        },
        imps: function (t, e) {
            function n(t) {
                var e, a;
                if ((e = i.__internals[t]) && (s[t] = !0, a = e.extend)) for (var r = 0; r < a.length; r++) n(a[r].self);
            }
            if (!e) return null;
            var s = t.__imps || i.un(t, "__imps", {});
            for (var a in e) n(a);
        },
        superSet: function (t, e, i, n) {
            var s = t.prototype["_$set_" + i];
            s && s.call(e, n);
        },
        superGet: function (t, e, i) {
            var n = t.prototype["_$get_" + i];
            return n ? n.call(e) : null;
        },
        getset: function (t, e, n, s, a) {
            t ? (s && (e["_$GET_" + n] = s), a && (e["_$SET_" + n] = a)) : (s && i.un(e, "_$get_" + n, s),
                a && i.un(e, "_$set_" + n, a)), s && a ? Object.defineProperty(e, n, {
                    get: s,
                    set: a,
                    enumerable: !1,
                    configurable: !0
                }) : (s && Object.defineProperty(e, n, {
                    get: s,
                    enumerable: !1,
                    configurable: !0
                }), a && Object.defineProperty(e, n, {
                    set: a,
                    enumerable: !1,
                    configurable: !0
                }));
        },
        static: function (t, e) {
            for (var i = 0, n = e.length; i < n; i += 2) "length" == e[i] ? t.length = e[i + 1].call(t) : function () {
                var n = e[i], s = e[i + 1];
                Object.defineProperty(t, n, {
                    get: function () {
                        return delete this[n], this[n] = s.call(this);
                    },
                    set: function (t) {
                        delete this[n], this[n] = t;
                    },
                    enumerable: !0,
                    configurable: !0
                });
            }();
        },
        un: function (t, e, n) {
            return n || (n = t[e]), i.__propun.value = n, Object.defineProperty(t, e, i.__propun),
                n;
        },
        uns: function (t, e) {
            e.forEach(function (e) {
                i.un(t, e);
            });
        }
    };
    return t.console = t.console || {
        log: function () { }
    }, t.trace = t.console.log, Error.prototype.throwError = function () {
        throw arguments;
    }, Object.defineProperty(Array.prototype, "fixed", {
        enumerable: !1
    }), i;
}(window, document);

!function (t, e, i) {
    i.un, i.uns, i.static, i.class, i.getset, i.__newvec;
}(window, document, Laya), function (t, e, i) {
    i.un, i.uns;
    var n = i.static, s = i.class, a = i.getset;
    i.__newvec;
    i.interface("laya.runtime.IMarket"), i.interface("laya.filters.IFilter"), i.interface("laya.display.ILayout"),
        i.interface("laya.resource.IDispose"), i.interface("laya.runtime.IPlatform"), i.interface("laya.resource.IDestroy"),
        i.interface("laya.runtime.IConchNode"), i.interface("laya.filters.IFilterAction"),
        i.interface("laya.runtime.ICPlatformClass"), i.interface("laya.resource.ICreateResource"),
        i.interface("laya.runtime.IConchRenderObject"), i.interface("laya.runtime.IPlatformClass", "laya.runtime.IPlatform");
    var r = function () {
        function e() { }
        return s(e, "laya.utils.RunDriver"), e.FILTER_ACTIONS = [], e.pixelRatio = -1, e._charSizeTestDiv = null,
            e.now = function () {
                return Date.now();
            }, e.getWindow = function () {
                return t;
            }, e.getPixelRatio = function () {
                if (e.pixelRatio < 0) {
                    var t = O.context, i = t.backingStorePixelRatio || t.webkitBackingStorePixelRatio || t.mozBackingStorePixelRatio || t.msBackingStorePixelRatio || t.oBackingStorePixelRatio || t.backingStorePixelRatio || 1;
                    (e.pixelRatio = (O.window.devicePixelRatio || 1) / i) < 1 && (e.pixelRatio = 1);
                }
                return e.pixelRatio;
            }, e.getIncludeStr = function (t) {
                return null;
            }, e.createShaderCondition = function (t) {
                var e = "(function() {return " + t + ";})";
                return i._runScript(e);
            }, e.fontMap = [], e.measureText = function (t, i) {
                var n = e.hanzi.test(t);
                if (n && e.fontMap[i]) return e.fontMap[i];
                var s = O.context;
                s.font = i;
                var a = s.measureText(t);
                return n && (e.fontMap[i] = a), a;
            }, e.getWebGLContext = function (t) { }, e.beginFlush = function () { }, e.endFinish = function () { },
            e.addToAtlas = null, e.flashFlushImage = function (t) { }, e.drawToCanvas = function (t, e, i, n, s, a) {
                var r = yt.create("2D"), o = new D(i, n, r);
                return k.renders[e]._fun(t, o, s, a), r;
            }, e.createParticleTemplate2D = null, e.createGLTextur = null, e.createWebGLContext2D = null,
            e.changeWebGLSize = function (t, e) { }, e.createRenderSprite = function (t, e) {
                return new k(t, e);
            }, e.createFilterAction = function (t) {
                return new x();
            }, e.createGraphics = function () {
                return new f();
            }, e.clear = function (t) {
                P._context.ctx.clear();
            }, e.cancelLoadByUrl = function (t) { }, e.clearAtlas = function (t) { }, e.isAtlas = function (t) {
                return !1;
            }, e.addTextureToAtlas = function (t) { }, e.getTexturePixels = function (t, e, i, n, s) {
                return null;
            }, e.skinAniSprite = function () {
                return null;
            }, e.update3DLoop = function () { }, n(e, ["hanzi", function () {
                return this.hanzi = new RegExp("^[一-龥]$");
            }]), e;
    }(), o = (a(1, i, "alertGlobalError", null, function (t) {
        var e = 0;
        O.window.onerror = t ? function (t, i, n, s, a) {
            e++ < 5 && a && alert("出错啦，请把此信息截图给研发商\n" + t + "\n" + a.stack || a);
        } : null;
    }), i.init = function (t, e, n) {
        for (var s = [], a = 2, r = arguments.length; a < r; a++) s.push(arguments[a]);
        if (!i._isinit) {
            ArrayBuffer.prototype.slice || (ArrayBuffer.prototype.slice = i._arrayBufferSlice),
                i._isinit = !0, O.__init__(), F.__init__(), f.__init__(), i.timer = new K(), i.scaleTimer = new K(),
                i.loader = new ot(), Q.__init__();
            for (var a = 0, o = s.length; a < o; a++) s[a].enable && s[a].enable();
            return d.__init__(), u.__init__(), B.__init__(), G.beginCheck(), i._currentStage = i.stage = new vt(),
                i.stage.conchModel && i.stage.conchModel.setRootNode(), i._getUrlPath(), i.render = new P(0, 0),
                i.stage.size(t, e), k.__init__(), v.__init__(), m.instance.__init__(i.stage, P.canvas),
                xt.__init__(), A.autoStopMusic = !0, I.__init__(), P.canvas;
        }
    }, i._getUrlPath = function () {
        var t = O.window.location, e = t.pathname;
        e = ":" == e.charAt(2) ? e.substring(1) : e, R.rootPath = R.basePath = R.getPath("file:" == t.protocol ? e : t.protocol + "//" + t.host + t.pathname);
    }, i._arrayBufferSlice = function (t, e) {
        var i = new Uint8Array(this, t, e - t), n = new Uint8Array(i.length);
        return n.set(i), n.buffer;
    }, i._runScript = function (t) {
        return O.window[i._evcode](t);
    }, i.stage = null, i.timer = null, i.scaleTimer = null, i.loader = null, i.version = "1.8.8beta",
        i.render = null, i._currentStage = null, i._isinit = !1, i.MiniAdpter = {
            init: function () {
                t.navigator && t.navigator.userAgent && t.navigator.userAgent.indexOf("MiniGame") > -1 && console.error("请先引用小游戏适配库laya.wxmini.js,详细教程：https://ldc.layabox.com/doc/?nav=zh-ts-5-0-0");
            }
        }, n(i, ["conchMarket", function () {
            return this.conchMarket = t.conch ? conchMarket : null;
        }, "PlatformClass", function () {
            return this.PlatformClass = t.PlatformClass;
        }, "_evcode", function () {
            return this._evcode = "e" + String.fromCharCode(118) + "al";
        }]), function () {
            function t() { }
            return s(t, "Config"), t.WebGLTextCacheCount = 500, t.atlasEnable = !1, t.showCanvasMark = !1,
                t.animationInterval = 50, t.isAntialias = !1, t.isAlpha = !1, t.premultipliedAlpha = !0,
                t.isStencil = !0, t.preserveDrawingBuffer = !1, t.useRetinalCanvas = !1, t.CborderSize = 12,
                t;
        }()), h = function () {
            function t() {
                this._events = null;
            }
            var e;
            s(t, "laya.events.EventDispatcher");
            var i = t.prototype;
            return i.hasListener = function (t) {
                return !!(this._events && this._events[t]);
            }, i.event = function (t, e) {
                if (!this._events || !this._events[t]) return !1;
                var i = this._events[t];
                if (i.run) i.once && delete this._events[t], null != e ? i.runWith(e) : i.run(); else {
                    for (var n = 0, s = i.length; n < s; n++) {
                        var a = i[n];
                        a && (null != e ? a.runWith(e) : a.run()), a && !a.once || (i.splice(n, 1), n--,
                            s--);
                    }
                    0 === i.length && this._events && delete this._events[t];
                }
                return !0;
            }, i.on = function (t, e, i, n) {
                return this._createListener(t, e, i, n, !1);
            }, i.once = function (t, e, i, n) {
                return this._createListener(t, e, i, n, !0);
            }, i._createListener = function (t, i, n, s, a, r) {
                void 0 === r && (r = !0), r && this.off(t, i, n, a);
                var o = e.create(i || this, n, s, a);
                this._events || (this._events = {});
                var h = this._events;
                return h[t] ? h[t].run ? h[t] = [h[t], o] : h[t].push(o) : h[t] = o, this;
            }, i.off = function (t, e, i, n) {
                if (void 0 === n && (n = !1), !this._events || !this._events[t]) return this;
                var s = this._events[t];
                if (null != s) if (s.run) e && s.caller !== e || s.method !== i || n && !s.once || (delete this._events[t],
                    s.recover()); else {
                    for (var a = 0, r = 0, o = s.length; r < o; r++) {
                        var h = s[r];
                        h ? !h || e && h.caller !== e || h.method !== i || n && !h.once || (a++, s[r] = null,
                            h.recover()) : a++;
                    }
                    a === o && delete this._events[t];
                }
                return this;
            }, i.offAll = function (t) {
                var e = this._events;
                if (!e) return this;
                if (t) this._recoverHandlers(e[t]), delete e[t]; else {
                    for (var i in e) this._recoverHandlers(e[i]);
                    this._events = null;
                }
                return this;
            }, i._recoverHandlers = function (t) {
                if (t) if (t.run) t.recover(); else for (var e = t.length - 1; e > -1; e--) t[e] && (t[e].recover(),
                    t[e] = null);
            }, i.isMouseEvent = function (e) {
                return t.MOUSE_EVENTS[e];
            }, t.MOUSE_EVENTS = {
                rightmousedown: !0,
                rightmouseup: !0,
                rightclick: !0,
                mousedown: !0,
                mouseup: !0,
                mousemove: !0,
                mouseover: !0,
                mouseout: !0,
                click: !0,
                doubleclick: !0
            }, t.__init$ = function () {
                Object.defineProperty(laya.events.EventDispatcher.prototype, "_events", {
                    enumerable: !1,
                    writable: !0
                }), e = function (t) {
                    function e(t, i, n, s) {
                        e.__super.call(this, t, i, n, s);
                    }
                    s(e, "", l);
                    return e.prototype.recover = function () {
                        this._id > 0 && (this._id = 0, e._pool.push(this.clear()));
                    }, e.create = function (t, i, n, s) {
                        return void 0 === s && (s = !0), e._pool.length ? e._pool.pop().setTo(t, i, n, s) : new e(t, i, n, s);
                    }, e._pool = [], e;
                }();
            }, t;
        }(), l = function () {
            function t(t, e, i, n) {
                this.once = !1, this._id = 0, void 0 === n && (n = !1), this.setTo(t, e, i, n);
            }
            s(t, "laya.utils.Handler");
            var e = t.prototype;
            return e.setTo = function (e, i, n, s) {
                return this._id = t._gid++, this.caller = e, this.method = i, this.args = n, this.once = s,
                    this;
            }, e.run = function () {
                if (null == this.method) return null;
                var t = this._id, e = this.method.apply(this.caller, this.args);
                return this._id === t && this.once && this.recover(), e;
            }, e.runWith = function (t) {
                if (null == this.method) return null;
                var e = this._id;
                if (null == t) var i = this.method.apply(this.caller, this.args);
                else i = this.args || t.unshift
                    ? this.args
                        ? this.method.apply(this.caller, this.args.concat(t))
                        : this.method.apply(this.caller, t)
                    : this.method.call(this.caller, t);
                return this._id === e && this.once && this.recover(), i;
            }, e.clear = function () {
                return this.caller = null, this.method = null, this.args = null, this;
            }, e.recover = function () {
                this._id > 0 && (this._id = 0, t._pool.push(this.clear()));
            }, t.create = function (e, i, n, s) {
                return void 0 === s && (s = !0), t._pool.length ? t._pool.pop().setTo(e, i, n, s) : new t(e, i, n, s);
            }, t._pool = [], t._gid = 1, t;
        }(), c = function () {
            function t() {
                this._texture = null, this._fontCharDic = {}, this._fontWidthMap = {}, this._complete = null,
                    this._path = null, this._maxWidth = 0, this._spaceWidth = 10, this._padding = null,
                    this.fontSize = 12, this.autoScaleSize = !1, this.letterSpacing = 0;
            }
            s(t, "laya.display.BitmapFont");
            var e = t.prototype;
            return e.loadFont = function (t, e) {
                this._path = t, this._complete = e, i.loader.load([{
                    url: this._path,
                    type: "xml"
                }, {
                    url: this._path.replace(".fnt", ".png"),
                    type: "image"
                }], l.create(this, this.onLoaded));
            }, e.onLoaded = function () {
                this.parseFont(rt.getRes(this._path), rt.getRes(this._path.replace(".fnt", ".png"))),
                    this._complete && this._complete.runWith(this._texture ? this : null);
            }, e.parseFont = function (t, e) {
                if (null != t && null != e) {
                    this._texture = e;
                    var i = t.getElementsByTagName("info");
                    if (!i[0].getAttributeNode) return this.parseFont2(t, e);
                    this.fontSize = parseInt(i[0].getAttributeNode("size").nodeValue);
                    var n = i[0].getAttributeNode("padding").nodeValue.split(",");
                    this._padding = [parseInt(n[0]), parseInt(n[1]), parseInt(n[2]), parseInt(n[3])];
                    var s;
                    s = t.getElementsByTagName("char");
                    var a = 0;
                    for (a = 0; a < s.length; a++) {
                        var r = s[a], o = parseInt(r.getAttributeNode("id").nodeValue), h = parseInt(r.getAttributeNode("xoffset").nodeValue) / 1, l = parseInt(r.getAttributeNode("yoffset").nodeValue) / 1, c = parseInt(r.getAttributeNode("xadvance").nodeValue) / 1, u = new S();
                        u.x = parseInt(r.getAttributeNode("x").nodeValue), u.y = parseInt(r.getAttributeNode("y").nodeValue),
                            u.width = parseInt(r.getAttributeNode("width").nodeValue), u.height = parseInt(r.getAttributeNode("height").nodeValue);
                        var d = lt.create(e, u.x, u.y, u.width, u.height, h, l);
                        this._maxWidth = Math.max(this._maxWidth, c + this.letterSpacing), this._fontCharDic[o] = d,
                            this._fontWidthMap[o] = c;
                    }
                }
            }, e.parseFont2 = function (t, e) {
                if (null != t && null != e) {
                    this._texture = e;
                    var i = t.getElementsByTagName("info");
                    this.fontSize = parseInt(i[0].attributes.size.nodeValue);
                    var n = i[0].attributes.padding.nodeValue.split(",");
                    this._padding = [parseInt(n[0]), parseInt(n[1]), parseInt(n[2]), parseInt(n[3])];
                    var s = t.getElementsByTagName("char"), a = 0;
                    for (a = 0; a < s.length; a++) {
                        var r = s[a].attributes, o = parseInt(r.id.nodeValue), h = parseInt(r.xoffset.nodeValue) / 1, l = parseInt(r.yoffset.nodeValue) / 1, c = parseInt(r.xadvance.nodeValue) / 1, u = new S();
                        u.x = parseInt(r.x.nodeValue), u.y = parseInt(r.y.nodeValue), u.width = parseInt(r.width.nodeValue),
                            u.height = parseInt(r.height.nodeValue);
                        var d = lt.create(e, u.x, u.y, u.width, u.height, h, l);
                        this._maxWidth = Math.max(this._maxWidth, c + this.letterSpacing), this._fontCharDic[o] = d,
                            this._fontWidthMap[o] = c;
                    }
                }
            }, e.getCharTexture = function (t) {
                return this._fontCharDic[t.charCodeAt(0)];
            }, e.destroy = function () {
                if (this._texture) {
                    for (var t in this._fontCharDic) {
                        var e = this._fontCharDic[t];
                        e && e.destroy();
                    }
                    this._texture.destroy(), this._fontCharDic = null, this._fontWidthMap = null, this._texture = null;
                }
            }, e.setSpaceWidth = function (t) {
                this._spaceWidth = t;
            }, e.getCharWidth = function (t) {
                var e = t.charCodeAt(0);
                return this._fontWidthMap[e] ? this._fontWidthMap[e] + this.letterSpacing : " " == t ? this._spaceWidth + this.letterSpacing : 0;
            }, e.getTextWidth = function (t) {
                for (var e = 0, i = 0, n = t.length; i < n; i++) e += this.getCharWidth(t.charAt(i));
                return e;
            }, e.getMaxWidth = function () {
                return this._maxWidth;
            }, e.getMaxHeight = function () {
                return this.fontSize;
            }, e.drawText = function (t, e, i, n, s, a) {
                var r, o = this.getTextWidth(t), h = 0;
                "center" === s && (h = (a - o) / 2), "right" === s && (h = a - o);
                for (var l = 0, c = 0, u = t.length; c < u; c++) (r = this.getCharTexture(t.charAt(c))) && (e.graphics.drawTexture(r, i + l + h, n),
                    l += this.getCharWidth(t.charAt(c)));
            }, t;
        }(), u = function () {
            function t() {
                this.alpha = 1, this.visible = !0, this.scrollRect = null, this.blendMode = null,
                    this._type = 0, this.direction = "ltr", this._tf = t._TF_EMPTY;
            }
            s(t, "laya.display.css.Style");
            var e = t.prototype;
            return e.getTransform = function () {
                return this._tf;
            }, e.setTransform = function (e) {
                this._tf = "none" !== e && e ? e : t._TF_EMPTY;
            }, e.setTranslateX = function (e) {
                this._tf === t._TF_EMPTY && (this._tf = new _()), this._tf.translateX = e;
            }, e.setTranslateY = function (e) {
                this._tf === t._TF_EMPTY && (this._tf = new _()), this._tf.translateY = e;
            }, e.setScaleX = function (e) {
                this._tf === t._TF_EMPTY && (this._tf = new _()), this._tf.scaleX = e;
            }, e.setScale = function (e, i) {
                this._tf === t._TF_EMPTY && (this._tf = new _()), this._tf.scaleX = e, this._tf.scaleY = i;
            }, e.setScaleY = function (e) {
                this._tf === t._TF_EMPTY && (this._tf = new _()), this._tf.scaleY = e;
            }, e.setRotate = function (e) {
                this._tf === t._TF_EMPTY && (this._tf = new _()), this._tf.rotate = e;
            }, e.setSkewX = function (e) {
                this._tf === t._TF_EMPTY && (this._tf = new _()), this._tf.skewX = e;
            }, e.setSkewY = function (e) {
                this._tf === t._TF_EMPTY && (this._tf = new _()), this._tf.skewY = e;
            }, e.destroy = function () {
                this.scrollRect = null;
            }, e.render = function (t, e, i, n) { }, e.getCSSStyle = function () {
                return tt.EMPTY;
            }, e._enableLayout = function () {
                return !1;
            }, a(0, e, "scaleX", function () {
                return this._tf.scaleX;
            }, function (t) {
                this.setScaleX(t);
            }), a(0, e, "transform", function () {
                return this.getTransform();
            }, function (t) {
                this.setTransform(t);
            }), a(0, e, "translateX", function () {
                return this._tf.translateX;
            }, function (t) {
                this.setTranslateX(t);
            }), a(0, e, "translateY", function () {
                return this._tf.translateY;
            }, function (t) {
                this.setTranslateY(t);
            }), a(0, e, "scaleY", function () {
                return this._tf.scaleY;
            }, function (t) {
                this.setScaleY(t);
            }), a(0, e, "block", function () {
                return 0 != (1 & this._type);
            }), a(0, e, "skewY", function () {
                return this._tf.skewY;
            }, function (t) {
                this.setSkewY(t);
            }), a(0, e, "rotate", function () {
                return this._tf.rotate;
            }, function (t) {
                this.setRotate(t);
            }), a(0, e, "skewX", function () {
                return this._tf.skewX;
            }, function (t) {
                this.setSkewX(t);
            }), a(0, e, "paddingLeft", function () {
                return 0;
            }), a(0, e, "paddingTop", function () {
                return 0;
            }), a(0, e, "absolute", function () {
                return !0;
            }), t.__init__ = function () {
                t._TF_EMPTY = new _(), t.EMPTY = new t();
            }, t.EMPTY = null, t._TF_EMPTY = null, t;
        }(), d = function () {
            function t(e) {
                this._type = 0, this._weight = 0, this._decoration = null, this._text = null, this.indent = 0,
                    this._color = z.create(t.defaultColor), this.family = t.defaultFamily, this.stroke = t._STROKE,
                    this.size = t.defaultSize, e && e !== t.EMPTY && e.copyTo(this);
            }
            s(t, "laya.display.css.Font");
            var e = t.prototype;
            return e.set = function (t) {
                this._text = null;
                for (var e = t.split(" "), i = 0, n = e.length; i < n; i++) {
                    var s = e[i];
                    switch (s) {
                        case "italic":
                            this.italic = !0;
                            continue;

                        case "bold":
                            this.bold = !0;
                            continue;
                    }
                    s.indexOf("px") > 0 && (this.size = parseInt(s), this.family = e[i + 1], i++);
                }
            }, e.toString = function () {
                return this._text = "", this.italic && (this._text += "italic "), this.bold && (this._text += "bold "),
                    this._text += this.size + "px " + this.family;
            }, e.copyTo = function (e) {
                e._type = this._type, e._text = this._text, e._weight = this._weight, e._color = this._color,
                    e.family = this.family, e.stroke = this.stroke != t._STROKE ? this.stroke.slice() : t._STROKE,
                    e.indent = this.indent, e.size = this.size;
            }, a(0, e, "password", function () {
                return 0 != (1024 & this._type);
            }, function (t) {
                t ? this._type |= 1024 : this._type &= -1025;
            }), a(0, e, "color", function () {
                return this._color.strColor;
            }, function (t) {
                this._color = z.create(t);
            }), a(0, e, "italic", function () {
                return 0 != (512 & this._type);
            }, function (t) {
                t ? this._type |= 512 : this._type &= -513;
            }), a(0, e, "bold", function () {
                return 0 != (2048 & this._type);
            }, function (t) {
                t ? this._type |= 2048 : this._type &= -2049;
            }), a(0, e, "weight", function () {
                return "" + this._weight;
            }, function (t) {
                var e = 0;
                switch (t) {
                    case "normal":
                        break;

                    case "bold":
                        this.bold = !0, e = 700;
                        break;

                    case "bolder":
                        e = 800;
                        break;

                    case "lighter":
                        e = 100;
                        break;

                    default:
                        e = parseInt(t);
                }
                this._weight = e, this._text = null;
            }), a(0, e, "decoration", function () {
                return this._decoration ? this._decoration.value : null;
            }, function (t) {
                var e = t.split(" ");
                switch (this._decoration || (this._decoration = {}), e[0]) {
                    case "_":
                        this._decoration.type = "underline";
                        break;

                    case "-":
                        this._decoration.type = "line-through";
                        break;

                    case "overline":
                        this._decoration.type = "overline";
                        break;

                    default:
                        this._decoration.type = e[0];
                }
                e[1] && (this._decoration.color = z.create(e)), this._decoration.value = t;
            }), t.__init__ = function () {
                t.EMPTY = new t(null);
            }, t.EMPTY = null, t.defaultColor = "#000000", t.defaultSize = 12, t.defaultFamily = "Arial",
                t.defaultFont = "12px Arial", t._STROKE = [0, "#000000"], t._ITALIC = 512, t._PASSWORD = 1024,
                t._BOLD = 2048, t;
        }(), _ = function () {
            function t() {
                this.translateX = 0, this.translateY = 0, this.scaleX = 1, this.scaleY = 1, this.rotate = 0,
                    this.skewX = 0, this.skewY = 0;
            }
            return s(t, "laya.display.css.TransformInfo"), t;
        }(), f = function () {
            function e() {
                if (this._one = null, this._cmds = null, this._render = this._renderEmpty, P.isConchNode) {
                    this._nativeObj = new t._conchGraphics(), this.id = this._nativeObj.conchID;
                }
            }
            s(e, "laya.display.Graphics");
            var n = e.prototype;
            return n.destroy = function () {
                this.clear(), this._graphicBounds && this._graphicBounds.destroy(), this._graphicBounds = null,
                    this._vectorgraphArray = null, this._sp && (this._sp._renderType = 0), this._sp = null;
            }, n.clear = function (t) {
                void 0 === t && (t = !1);
                var i = 0, n = 0;
                if (t) {
                    var s = this._one;
                    if (this._cmds) {
                        for (n = this._cmds.length, i = 0; i < n; i++) !(s = this._cmds[i]) || s.callee !== P._context._drawTexture && s.callee !== P._context._drawTextureWithTransform || (s[0] = null,
                            e._cache.push(s));
                        this._cmds.length = 0;
                    } else s && (!s || s.callee !== P._context._drawTexture && s.callee !== P._context._drawTextureWithTransform || (s[0] = null,
                        e._cache.push(s)));
                } else this._cmds = null;
                if (this._one = null, this._render = this._renderEmpty, this._sp && (this._sp._renderType &= -514),
                    this._repaint(), this._vectorgraphArray) {
                    for (i = 0, n = this._vectorgraphArray.length; i < n; i++) $.getInstance().deleteShape(this._vectorgraphArray[i]);
                    this._vectorgraphArray.length = 0;
                }
            }, n._clearBoundsCache = function () {
                this._graphicBounds && this._graphicBounds.reset();
            }, n._initGraphicBounds = function () {
                this._graphicBounds || (this._graphicBounds = new p(), this._graphicBounds._graphics = this);
            }, n._repaint = function () {
                this._clearBoundsCache(), this._sp && this._sp.repaint();
            }, n._isOnlyOne = function () {
                return !this._cmds || 0 === this._cmds.length;
            }, n.getBounds = function (t) {
                return void 0 === t && (t = !1), this._initGraphicBounds(), this._graphicBounds.getBounds(t);
            }, n.getBoundPoints = function (t) {
                return void 0 === t && (t = !1), this._initGraphicBounds(), this._graphicBounds.getBoundPoints(t);
            }, n._addCmd = function (t) {
                this._cmds = this._cmds || [], t.callee = t.shift(), this._cmds.push(t);
            }, n.setFilters = function (t) {
                this._saveToCmd(P._context._setFilters, t);
            }, n.drawTexture = function (t, i, n, s, a, r, o) {
                if (void 0 === i && (i = 0), void 0 === n && (n = 0), void 0 === s && (s = 0), void 0 === a && (a = 0),
                    void 0 === o && (o = 1), !t || o < .01) return null;
                s || (s = t.sourceWidth), a || (a = t.sourceHeight), o = o < 0 ? 0 : o > 1 ? 1 : o;
                var h = !P.isWebGL && (O.onFirefox || O.onEdge || O.onIE || O.onSafari) ? .5 : 0, l = s / t.sourceWidth, c = a / t.sourceHeight;
                if (s = t.width * l, a = t.height * c, t.loaded && (s <= 0 || a <= 0)) return null;
                i += t.offsetX * l, n += t.offsetY * c, this._sp && (this._sp._renderType |= 512);
                var u;
                return i -= h, n -= h, s += 2 * h, a += 2 * h, e._cache.length ? ((u = e._cache.pop())[0] = t,
                    u[1] = i, u[2] = n, u[3] = s, u[4] = a, u[5] = r, u[6] = o) : u = [t, i, n, s, a, r, o],
                    u.callee = r || 1 != o ? P._context._drawTextureWithTransform : P._context._drawTexture,
                    null != this._one || r || 1 != o ? this._saveToCmd(u.callee, u) : (this._one = u,
                        this._render = this._renderOneImg), t.loaded || t.once("loaded", this, this._textureLoaded, [t, u]),
                    this._repaint(), u;
            }, n.cleanByTexture = function (t, e, i, n, s) {
                if (void 0 === n && (n = 0), void 0 === s && (s = 0), !t) return this.clear();
                if (this._one && this._render === this._renderOneImg) {
                    n || (n = t.sourceWidth), s || (s = t.sourceHeight);
                    var a = n / t.sourceWidth, r = s / t.sourceHeight;
                    n = t.width * a, s = t.height * r, e += t.offsetX * a, i += t.offsetY * r, this._one[0] = t,
                        this._one[1] = e, this._one[2] = i, this._one[3] = n, this._one[4] = s, this._repaint();
                } else this.clear(), t && this.drawTexture(t, e, i, n, s);
            }, n.drawTextures = function (t, e) {
                t && this._saveToCmd(P._context._drawTextures, [t, e]);
            }, n.fillTexture = function (t, e, i, n, s, a, r) {
                if (void 0 === n && (n = 0), void 0 === s && (s = 0), void 0 === a && (a = "repeat"),
                    t) {
                    var o = [t, e, i, n, s, a, r || T.EMPTY, {}];
                    t.loaded || t.once("loaded", this, this._textureLoaded, [t, o]), this._saveToCmd(P._context._fillTexture, o);
                }
            }, n._textureLoaded = function (t, e) {
                e[3] = e[3] || t.width, e[4] = e[4] || t.height, this._repaint();
            }, n.fillCircle = function (t, e, i, n, s, a, r) {
                i.bitmap.enableMerageInAtlas = !1;
                var o = new Float32Array(2 * (r + 1)), h = new Float32Array(2 * (r + 1)), l = new Uint16Array(3 * r), c = 2 * Math.PI / r, u = 0;
                o[0] = n, o[1] = s, h[0] = n / i.width, h[1] = s / i.height;
                for (var d = 2, _ = 0; _ < r; _++) {
                    var f = a * Math.cos(u) + n, p = a * Math.sin(u) + s;
                    o[d] = f, o[d + 1] = p, h[d] = f / i.width, h[d + 1] = p / i.height, u += c, d += 2;
                }
                for (d = 0, _ = 0; _ < r; _++) l[d++] = 0, l[d++] = _ + 1, l[d++] = _ + 2 >= r + 1 ? 1 : _ + 2;
                this.drawTriangles(i, t, e, o, h, l);
            }, n.drawTriangles = function (t, e, i, n, s, a, r, o, h, l) {
                void 0 === o && (o = 1), this._saveToCmd(P._context.drawTriangles, [t, e, i, n, s, a, r, o, h, l]);
            }, n._saveToCmd = function (t, e) {
                return this._sp && (this._sp._renderType |= 512), null == this._one ? (this._one = e,
                    this._render = this._renderOne) : (this._sp && (this._sp._renderType &= -2), this._render = this._renderAll,
                        0 === (this._cmds || (this._cmds = [])).length && this._cmds.push(this._one), this._cmds.push(e)),
                    e.callee = t, this._repaint(), e;
            }, n.clipRect = function (t, e, i, n) {
                this._saveToCmd(P._context._clipRect, [t, e, i, n]);
            }, n.fillText = function (t, e, i, n, s, a, r) {
                void 0 === r && (r = 0), this._saveToCmd(P._context._fillText, [t, e, i, n || d.defaultFont, s, a]);
            }, n.fillBorderText = function (t, e, i, n, s, a, r, o) {
                this._saveToCmd(P._context._fillBorderText, [t, e, i, n || d.defaultFont, s, a, r, o]);
            }, n.strokeText = function (t, e, i, n, s, a, r) {
                this._saveToCmd(P._context._strokeText, [t, e, i, n || d.defaultFont, s, a, r]);
            }, n.alpha = function (t) {
                t = t < 0 ? 0 : t > 1 ? 1 : t, this._saveToCmd(P._context._alpha, [t]);
            }, n.setAlpha = function (t) {
                t = t < 0 ? 0 : t > 1 ? 1 : t, this._saveToCmd(P._context._setAlpha, [t]);
            }, n.transform = function (t, e, i) {
                void 0 === e && (e = 0), void 0 === i && (i = 0), this._saveToCmd(P._context._transform, [t, e, i]);
            }, n.rotate = function (t, e, i) {
                void 0 === e && (e = 0), void 0 === i && (i = 0), this._saveToCmd(P._context._rotate, [t, e, i]);
            }, n.scale = function (t, e, i, n) {
                void 0 === i && (i = 0), void 0 === n && (n = 0), this._saveToCmd(P._context._scale, [t, e, i, n]);
            }, n.translate = function (t, e) {
                this._saveToCmd(P._context._translate, [t, e]);
            }, n.save = function () {
                this._saveToCmd(P._context._save, []);
            }, n.restore = function () {
                this._saveToCmd(P._context._restore, []);
            }, n.replaceText = function (t) {
                this._repaint();
                var e = this._cmds;
                if (e) {
                    for (var i = e.length - 1; i > -1; i--) if (this._isTextCmd(e[i].callee)) return e[i][0].toUpperCase ? e[i][0] = t : e[i][0].setText(t),
                        !0;
                } else if (this._one && this._isTextCmd(this._one.callee)) return this._one[0].toUpperCase ? this._one[0] = t : this._one[0].setText(t),
                    !0;
                return !1;
            }, n._isTextCmd = function (t) {
                return t === P._context._fillText || t === P._context._fillBorderText || t === P._context._strokeText;
            }, n.replaceTextColor = function (t) {
                this._repaint();
                var e = this._cmds;
                if (e) for (var i = e.length - 1; i > -1; i--) this._isTextCmd(e[i].callee) && (e[i][4] = t,
                    e[i][0].toUpperCase || (e[i][0].changed = !0)); else this._one && this._isTextCmd(this._one.callee) && (this._one[4] = t,
                        this._one[0].toUpperCase || (this._one[0].changed = !0));
            }, n.loadImage = function (t, e, n, s, a, r) {
                function o(t) {
                    t && (h.drawTexture(t, e, n, s, a), null != r && r.call(h._sp, t));
                }
                var h = this;
                void 0 === e && (e = 0), void 0 === n && (n = 0), void 0 === s && (s = 0), void 0 === a && (a = 0);
                var c = rt.getRes(t);
                c ? o(c) : i.loader.load(t, l.create(null, o), null, "image");
            }, n._renderEmpty = function (t, e, i, n) { }, n._renderAll = function (t, e, i, n) {
                for (var s, a = this._cmds, r = 0, o = a.length; r < o; r++) (s = a[r]).callee.call(e, i, n, s);
            }, n._renderOne = function (t, e, i, n) {
                this._one.callee.call(e, i, n, this._one);
            }, n._renderOneImg = function (t, e, i, n) {
                this._one.callee.call(e, i, n, this._one), 2305 !== t._renderType && (t._renderType |= 1);
            }, n.drawLine = function (t, e, i, n, s, a) {
                void 0 === a && (a = 1);
                var r = 0;
                P.isWebGL && (r = $.getInstance().getId(), null == this._vectorgraphArray && (this._vectorgraphArray = []),
                    this._vectorgraphArray.push(r));
                var o = a % 2 == 0 ? 0 : .5, h = [t + o, e + o, i + o, n + o, s, a, r];
                this._saveToCmd(P._context._drawLine, h);
            }, n.drawLines = function (t, e, i, n, s) {
                void 0 === s && (s = 1);
                var a = 0;
                if (i && !(i.length < 4)) {
                    P.isWebGL && (a = $.getInstance().getId(), null == this._vectorgraphArray && (this._vectorgraphArray = []),
                        this._vectorgraphArray.push(a));
                    var r = s % 2 == 0 ? 0 : .5, o = [t + r, e + r, i, n, s, a];
                    this._saveToCmd(P._context._drawLines, o);
                }
            }, n.drawCurves = function (t, e, i, n, s) {
                void 0 === s && (s = 1);
                var a = [t, e, i, n, s];
                this._saveToCmd(P._context._drawCurves, a);
            }, n.drawRect = function (t, e, i, n, s, a, r) {
                void 0 === r && (r = 1);
                var o = a ? r / 2 : 0, h = a ? r : 0, l = [t + o, e + o, i - h, n - h, s, a, r];
                this._saveToCmd(P._context._drawRect, l);
            }, n.drawCircle = function (t, e, i, n, s, a) {
                void 0 === a && (a = 1);
                var r = s ? a / 2 : 0, o = 0;
                P.isWebGL && (o = $.getInstance().getId(), null == this._vectorgraphArray && (this._vectorgraphArray = []),
                    this._vectorgraphArray.push(o));
                var h = [t, e, i - r, n, s, a, o];
                this._saveToCmd(P._context._drawCircle, h);
            }, n.drawPie = function (t, e, i, n, s, a, r, o) {
                void 0 === o && (o = 1);
                var h = r ? o / 2 : 0, l = r ? o : 0, c = 0;
                P.isWebGL && (c = $.getInstance().getId(), null == this._vectorgraphArray && (this._vectorgraphArray = []),
                    this._vectorgraphArray.push(c));
                var u = [t + h, e + h, i - l, n, s, a, r, o, c];
                u[3] = q.toRadian(n), u[4] = q.toRadian(s), this._saveToCmd(P._context._drawPie, u);
            }, n.drawPoly = function (t, e, i, n, s, a) {
                void 0 === a && (a = 1);
                var r = 0, o = !1;
                P.isWebGL && (r = $.getInstance().getId(), null == this._vectorgraphArray && (this._vectorgraphArray = []),
                    this._vectorgraphArray.push(r), o = !(i.length > 6));
                var h = s ? a % 2 == 0 ? 0 : .5 : 0, l = [t + h, e + h, i, n, s, a, r, o];
                this._saveToCmd(P._context._drawPoly, l);
            }, n.drawPath = function (t, e, i, n, s) {
                var a = [t, e, i, n, s];
                this._saveToCmd(P._context._drawPath, a);
            }, n.setDirection = function (t) { }, a(0, n, "cmds", function () {
                return this._cmds;
            }, function (t) {
                this._sp && (this._sp._renderType |= 512), this._cmds = t, this._render = this._renderAll,
                    this._repaint();
            }), e.__init__ = function () {
                if (P.isConchNode) {
                    for (var t = laya.display.Graphics.prototype, e = O.window.ConchGraphics.prototype, i = ["setDirection", "clear", "destroy", "alpha", "rotate", "transform", "scale", "translate", "save", "restore", "clipRect", "blendMode", "fillText", "fillBorderText", "_fands", "drawRect", "drawCircle", "drawPie", "drawPoly", "drawPath", "drawImageM", "drawLine", "drawLines", "_drawPs", "drawCurves", "replaceText", "replaceTextColor", "_fillImage", "fillTexture", "setSkinMesh", "drawParticle", "drawImageS"], n = 0, s = i.length; n <= s; n++) {
                        var a = i[n];
                        t[a] = e[a];
                    }
                    t._saveToCmd = null, e.drawImageS && (t.drawTextures = function (t, e) {
                        if (t && t.loaded && t.bitmap && t.source) {
                            var i = t.uv, n = t.bitmap.width, s = t.bitmap.height;
                            this.drawImageS(t.bitmap.source, i[0] * n, i[1] * s, (i[2] - i[0]) * n, (i[5] - i[3]) * s, t.offsetX, t.offsetY, t.width, t.height, e);
                        }
                    }), t.drawTexture = function (t, e, i, n, s, a, r) {
                        if (void 0 === e && (e = 0), void 0 === i && (i = 0), void 0 === n && (n = 0), void 0 === s && (s = 0),
                            void 0 === r && (r = 1), t) if (t.loaded) {
                                if (t.loaded && t.bitmap && t.source && (n || (n = t.sourceWidth), s || (s = t.sourceHeight),
                                    r = r < 0 ? 0 : r > 1 ? 1 : r, n = n - t.sourceWidth + t.width, s = s - t.sourceHeight + t.height,
                                    !(n <= 0 || s <= 0))) {
                                    e += t.offsetX, i += t.offsetY;
                                    var o = t.uv, h = t.bitmap.width, l = t.bitmap.height;
                                    o[4] < o[0] && o[5] < o[1] ? this.drawImageM(t.bitmap.source, o[4] * h, o[5] * l, (o[0] - o[4]) * h, (o[1] - o[5]) * l, e, i, n, s, a, r) : this.drawImageM(t.bitmap.source, o[0] * h, o[1] * l, (o[2] - o[0]) * h, (o[5] - o[3]) * l, e, i, n, s, a, r),
                                        this._repaint();
                                }
                            } else t.once("loaded", this, function () {
                                this.drawTexture(t, e, i, n, s, a);
                            });
                    }, t.fillTexture = function (t, e, i, n, s, a, r) {
                        if (void 0 === n && (n = 0), void 0 === s && (s = 0), void 0 === a && (a = "repeat"),
                            t && t.loaded) {
                            var o, h = P._context.ctx, l = t.bitmap.width, c = t.bitmap.height, u = t.uv;
                            o = t.uv != lt.DEF_UV ? h.createPattern(t.bitmap.source, a, u[0] * l, u[1] * c, (u[2] - u[0]) * l, (u[5] - u[3]) * c) : h.createPattern(t.bitmap.source, a);
                            var d = 0, _ = 0;
                            r && (e += r.x % t.width, i += r.y % t.height, d -= r.x % t.width, _ -= r.y % t.height),
                                this._fillImage(o, e, i, d, _, n, s);
                        }
                    };
                }
            }, e._cache = [], e;
        }(), p = function () {
            function t() {
                this._cacheBoundsType = !1;
            }
            s(t, "laya.display.GraphicsBounds");
            var e = t.prototype;
            return e.destroy = function () {
                this._graphics = null, this._temp = null, this._rstBoundPoints = null, this._bounds = null;
            }, e.reset = function () {
                this._temp && (this._temp.length = 0);
            }, e.getBounds = function (t) {
                return void 0 === t && (t = !1), (!this._bounds || !this._temp || this._temp.length < 1 || t != this._cacheBoundsType) && (this._bounds = S._getWrapRec(this.getBoundPoints(t), this._bounds)),
                    this._cacheBoundsType = t, this._bounds;
            }, e.getBoundPoints = function (t) {
                return void 0 === t && (t = !1), (!this._temp || this._temp.length < 1 || t != this._cacheBoundsType) && (this._temp = this._getCmdPoints(t)),
                    this._cacheBoundsType = t, this._rstBoundPoints = q.copyArray(this._rstBoundPoints, this._temp);
            }, e._getCmdPoints = function (e) {
                void 0 === e && (e = !1);
                var i, n = P._context, s = this._graphics.cmds;
                if (i = this._temp || (this._temp = []), i.length = 0, s || null == this._graphics._one || (t._tempCmds.length = 0,
                    t._tempCmds.push(this._graphics._one), s = t._tempCmds), !s) return i;
                var a;
                (a = t._tempMatrixArrays).length = 0;
                var r = t._initMatrix;
                r.identity();
                for (var o, h, l = t._tempMatrix, c = NaN, u = NaN, d = NaN, _ = NaN, f = NaN, p = NaN, g = 0, v = s.length; g < v; g++) if ((o = s[g]).callee) switch (o.callee) {
                    case n._save:
                    case 7:
                        a.push(r), r = r.clone();
                        break;

                    case n._restore:
                    case 8:
                        r = a.pop();
                        break;

                    case n._scale:
                    case 5:
                        l.identity(), l.translate(-o[2], -o[3]), l.scale(o[0], o[1]), l.translate(o[2], o[3]),
                            this._switchMatrix(r, l);
                        break;

                    case n._rotate:
                    case 3:
                        l.identity(), l.translate(-o[1], -o[2]), l.rotate(o[0]), l.translate(o[1], o[2]),
                            this._switchMatrix(r, l);
                        break;

                    case n._translate:
                    case 6:
                        l.identity(), l.translate(o[0], o[1]), this._switchMatrix(r, l);
                        break;

                    case n._transform:
                    case 4:
                        l.identity(), l.translate(-o[1], -o[2]), l.concat(o[0]), l.translate(o[1], o[2]),
                            this._switchMatrix(r, l);
                        break;

                    case 16:
                    case 24:
                        t._addPointArrToRst(i, S._getBoundPointS(o[0], o[1], o[2], o[3]), r);
                        break;

                    case 17:
                        r.copyTo(l), l.concat(o[4]), t._addPointArrToRst(i, S._getBoundPointS(o[0], o[1], o[2], o[3]), l);
                        break;

                    case n._drawTexture:
                        h = o[0], e ? o[3] && o[4] ? t._addPointArrToRst(i, S._getBoundPointS(o[1], o[2], o[3], o[4]), r) : (h = o[0],
                            t._addPointArrToRst(i, S._getBoundPointS(o[1], o[2], h.width, h.height), r)) : (c = (o[3] || h.sourceWidth) / h.width,
                                u = (o[4] || h.sourceHeight) / h.height, d = c * h.sourceWidth, _ = u * h.sourceHeight,
                                f = h.offsetX > 0 ? h.offsetX : 0, p = h.offsetY > 0 ? h.offsetY : 0, f *= c, p *= u,
                                t._addPointArrToRst(i, S._getBoundPointS(o[1] - f, o[2] - p, d, _), r));
                        break;

                    case n._fillTexture:
                        o[3] && o[4] ? t._addPointArrToRst(i, S._getBoundPointS(o[1], o[2], o[3], o[4]), r) : (h = o[0],
                            t._addPointArrToRst(i, S._getBoundPointS(o[1], o[2], h.width, h.height), r));
                        break;

                    case n._drawTextureWithTransform:
                        var m;
                        o[5] ? (r.copyTo(l), l.concat(o[5]), m = l) : m = r, e ? o[3] && o[4] ? t._addPointArrToRst(i, S._getBoundPointS(o[1], o[2], o[3], o[4]), m) : (h = o[0],
                            t._addPointArrToRst(i, S._getBoundPointS(o[1], o[2], h.width, h.height), m)) : (h = o[0],
                                c = (o[3] || h.sourceWidth) / h.width, u = (o[4] || h.sourceHeight) / h.height,
                                d = c * h.sourceWidth, _ = u * h.sourceHeight, f = h.offsetX > 0 ? h.offsetX : 0,
                                p = h.offsetY > 0 ? h.offsetY : 0, f *= c, p *= u, t._addPointArrToRst(i, S._getBoundPointS(o[1] - f, o[2] - p, d, _), m));
                        break;

                    case n._drawRect:
                    case 13:
                        t._addPointArrToRst(i, S._getBoundPointS(o[0], o[1], o[2], o[3]), r);
                        break;

                    case n._drawCircle:
                    case n._fillCircle:
                    case 14:
                        t._addPointArrToRst(i, S._getBoundPointS(o[0] - o[2], o[1] - o[2], o[2] + o[2], o[2] + o[2]), r);
                        break;

                    case n._drawLine:
                    case 20:
                        t._tempPoints.length = 0;
                        var y = NaN;
                        y = .5 * o[5], o[0] == o[2] ? t._tempPoints.push(o[0] + y, o[1], o[2] + y, o[3], o[0] - y, o[1], o[2] - y, o[3]) : o[1] == o[3] ? t._tempPoints.push(o[0], o[1] + y, o[2], o[3] + y, o[0], o[1] - y, o[2], o[3] - y) : t._tempPoints.push(o[0], o[1], o[2], o[3]),
                            t._addPointArrToRst(i, t._tempPoints, r);
                        break;

                    case n._drawCurves:
                    case 22:
                        t._addPointArrToRst(i, b.I.getBezierPoints(o[2]), r, o[0], o[1]);
                        break;

                    case n._drawPoly:
                    case n._drawLines:
                    case 18:
                        t._addPointArrToRst(i, o[2], r, o[0], o[1]);
                        break;

                    case n._drawPath:
                    case 19:
                        t._addPointArrToRst(i, this._getPathPoints(o[2]), r, o[0], o[1]);
                        break;

                    case n._drawPie:
                    case 15:
                        t._addPointArrToRst(i, this._getPiePoints(o[0], o[1], o[2], o[3], o[4]), r);
                }
                return i.length > 200 ? i = q.copyArray(i, S._getWrapRec(i)._getBoundPoints()) : i.length > 8 && (i = L.scanPList(i)),
                    i;
            }, e._switchMatrix = function (t, e) {
                e.concat(t), e.copyTo(t);
            }, e._getPiePoints = function (e, i, n, s, a) {
                var r = t._tempPoints;
                t._tempPoints.length = 0, r.push(e, i);
                var o = (a - s) % (2 * Math.PI) / 10, h = NaN, l = s;
                for (h = 0; h <= 10; h++) r.push(e + n * Math.cos(l), i + n * Math.sin(l)), l += o;
                return r;
            }, e._getPathPoints = function (e) {
                var i = 0, n = 0, s = t._tempPoints;
                s.length = 0, n = e.length;
                var a;
                for (i = 0; i < n; i++) (a = e[i]).length > 1 && (s.push(a[1], a[2]), a.length > 3 && s.push(a[3], a[4]));
                return s;
            }, t._addPointArrToRst = function (e, i, n, s, a) {
                void 0 === s && (s = 0), void 0 === a && (a = 0);
                var r = 0, o = 0;
                for (o = i.length, r = 0; r < o; r += 2) t._addPointToRst(e, i[r] + s, i[r + 1] + a, n);
            }, t._addPointToRst = function (t, e, i, n) {
                var s = T.TEMP;
                s.setTo(e || 0, i || 0), n.transformPoint(s), t.push(s.x, s.y);
            }, t._tempPoints = [], t._tempMatrixArrays = [], t._tempCmds = [], n(t, ["_tempMatrix", function () {
                return this._tempMatrix = new M();
            }, "_initMatrix", function () {
                return this._initMatrix = new M();
            }]), t;
        }(), g = function () {
            function t() { }
            s(t, "laya.events.Event");
            var e = t.prototype;
            return e.setTo = function (t, e, i) {
                return this.type = t, this.currentTarget = e, this.target = i, this;
            }, e.stopPropagation = function () {
                this._stoped = !0;
            }, a(0, e, "stageY", function () {
                return i.stage.mouseY;
            }), a(0, e, "charCode", function () {
                return this.nativeEvent.charCode;
            }), a(0, e, "touches", function () {
                var t = this.nativeEvent.touches;
                if (t) for (var e = i.stage, n = 0, s = t.length; n < s; n++) {
                    var a = t[n], r = T.TEMP;
                    r.setTo(a.clientX, a.clientY), e._canvasTransform.invertTransformPoint(r), e.transform.invertTransformPoint(r),
                        a.stageX = r.x, a.stageY = r.y;
                }
                return t;
            }), a(0, e, "keyLocation", function () {
                return this.nativeEvent.keyLocation;
            }), a(0, e, "ctrlKey", function () {
                return this.nativeEvent.ctrlKey;
            }), a(0, e, "altKey", function () {
                return this.nativeEvent.altKey;
            }), a(0, e, "shiftKey", function () {
                return this.nativeEvent.shiftKey;
            }), a(0, e, "stageX", function () {
                return i.stage.mouseX;
            }), t.EMPTY = new t(), t.MOUSE_DOWN = "mousedown", t.MOUSE_UP = "mouseup", t.CLICK = "click",
                t.RIGHT_MOUSE_DOWN = "rightmousedown", t.RIGHT_MOUSE_UP = "rightmouseup", t.RIGHT_CLICK = "rightclick",
                t.MOUSE_MOVE = "mousemove", t.MOUSE_OVER = "mouseover", t.MOUSE_OUT = "mouseout",
                t.MOUSE_WHEEL = "mousewheel", t.ROLL_OVER = "mouseover", t.ROLL_OUT = "mouseout",
                t.DOUBLE_CLICK = "doubleclick", t.CHANGE = "change", t.CHANGED = "changed", t.RESIZE = "resize",
                t.ADDED = "added", t.REMOVED = "removed", t.DISPLAY = "display", t.UNDISPLAY = "undisplay",
                t.ERROR = "error", t.COMPLETE = "complete", t.LOADED = "loaded", t.PROGRESS = "progress",
                t.INPUT = "input", t.RENDER = "render", t.OPEN = "open", t.MESSAGE = "message",
                t.CLOSE = "close", t.KEY_DOWN = "keydown", t.KEY_PRESS = "keypress", t.KEY_UP = "keyup",
                t.FRAME = "enterframe", t.DRAG_START = "dragstart", t.DRAG_MOVE = "dragmove", t.DRAG_END = "dragend",
                t.ENTER = "enter", t.SELECT = "select", t.BLUR = "blur", t.FOCUS = "focus", t.VISIBILITY_CHANGE = "visibilitychange",
                t.FOCUS_CHANGE = "focuschange", t.PLAYED = "played", t.PAUSED = "paused", t.STOPPED = "stopped",
                t.START = "start", t.END = "end", t.ENABLE_CHANGED = "enablechanged", t.ACTIVE_IN_HIERARCHY_CHANGED = "activeinhierarchychanged",
                t.COMPONENT_ADDED = "componentadded", t.COMPONENT_REMOVED = "componentremoved",
                t.LAYER_CHANGED = "layerchanged", t.HIERARCHY_LOADED = "hierarchyloaded", t.RECOVERED = "recovered",
                t.RELEASED = "released", t.LINK = "link", t.LABEL = "label", t.FULL_SCREEN_CHANGE = "fullscreenchange",
                t.DEVICE_LOST = "devicelost", t.MESH_CHANGED = "meshchanged", t.MATERIAL_CHANGED = "materialchanged",
                t.WORLDMATRIX_NEEDCHANGE = "worldmatrixneedchanged", t.ANIMATION_CHANGED = "animationchanged",
                t.TRIGGER_ENTER = "triggerenter", t.TRIGGER_STAY = "triggerstay", t.TRIGGER_EXIT = "triggerexit",
                t.TRAIL_FILTER_CHANGE = "trailfilterchange", t.DOMINO_FILTER_CHANGE = "dominofilterchange",
                t;
        }(), v = (function () {
            function t() { }
            s(t, "laya.events.Keyboard"), t.NUMBER_0 = 48, t.NUMBER_1 = 49, t.NUMBER_2 = 50,
                t.NUMBER_3 = 51, t.NUMBER_4 = 52, t.NUMBER_5 = 53, t.NUMBER_6 = 54, t.NUMBER_7 = 55,
                t.NUMBER_8 = 56, t.NUMBER_9 = 57, t.A = 65, t.B = 66, t.C = 67, t.D = 68, t.E = 69,
                t.F = 70, t.G = 71, t.H = 72, t.I = 73, t.J = 74, t.K = 75, t.L = 76, t.M = 77,
                t.N = 78, t.O = 79, t.P = 80, t.Q = 81, t.R = 82, t.S = 83, t.T = 84, t.U = 85,
                t.V = 86, t.W = 87, t.X = 88, t.Y = 89, t.Z = 90, t.F1 = 112, t.F2 = 113, t.F3 = 114,
                t.F4 = 115, t.F5 = 116, t.F6 = 117, t.F7 = 118, t.F8 = 119, t.F9 = 120, t.F10 = 121,
                t.F11 = 122, t.F12 = 123, t.F13 = 124, t.F14 = 125, t.F15 = 126, t.NUMPAD = 21,
                t.NUMPAD_0 = 96, t.NUMPAD_1 = 97, t.NUMPAD_2 = 98, t.NUMPAD_3 = 99, t.NUMPAD_4 = 100,
                t.NUMPAD_5 = 101, t.NUMPAD_6 = 102, t.NUMPAD_7 = 103, t.NUMPAD_8 = 104, t.NUMPAD_9 = 105,
                t.NUMPAD_ADD = 107, t.NUMPAD_DECIMAL = 110, t.NUMPAD_DIVIDE = 111, t.NUMPAD_ENTER = 108,
                t.NUMPAD_MULTIPLY = 106, t.NUMPAD_SUBTRACT = 109, t.SEMICOLON = 186, t.EQUAL = 187,
                t.COMMA = 188, t.MINUS = 189, t.PERIOD = 190, t.SLASH = 191, t.BACKQUOTE = 192,
                t.LEFTBRACKET = 219, t.BACKSLASH = 220, t.RIGHTBRACKET = 221, t.QUOTE = 222, t.ALTERNATE = 18,
                t.BACKSPACE = 8, t.CAPS_LOCK = 20, t.COMMAND = 15, t.CONTROL = 17, t.DELETE = 46,
                t.ENTER = 13, t.ESCAPE = 27, t.PAGE_UP = 33, t.PAGE_DOWN = 34, t.END = 35, t.HOME = 36,
                t.LEFT = 37, t.UP = 38, t.RIGHT = 39, t.DOWN = 40, t.SHIFT = 16, t.SPACE = 32, t.TAB = 9,
                t.INSERT = 45;
        }(), function () {
            function t() { }
            return s(t, "laya.events.KeyBoardManager"), t.__init__ = function () {
                t._addEvent("keydown"), t._addEvent("keypress"), t._addEvent("keyup");
            }, t._addEvent = function (t) {
                O.document.addEventListener(t, function (e) {
                    laya.events.KeyBoardManager._dispatch(e, t);
                }, !0);
            }, t._dispatch = function (e, n) {
                if (t.enabled) {
                    t._event._stoped = !1, t._event.nativeEvent = e, t._event.keyCode = e.keyCode || e.which || e.charCode,
                        "keydown" === n ? t._pressKeys[t._event.keyCode] = !0 : "keyup" === n && (t._pressKeys[t._event.keyCode] = null);
                    for (var s = i.stage.focus && null != i.stage.focus.event && i.stage.focus.displayedInStage ? i.stage.focus : i.stage, a = s; a;) a.event(n, t._event.setTo(n, a, s)),
                        a = a.parent;
                }
            }, t.hasKeyDown = function (e) {
                return t._pressKeys[e];
            }, t._pressKeys = {}, t.enabled = !0, n(t, ["_event", function () {
                return this._event = new g();
            }]), t;
        }()), m = (function () {
            function t() { }
            s(t, "laya.events.KeyLocation"), t.STANDARD = 0, t.LEFT = 1, t.RIGHT = 2, t.NUM_PAD = 3;
        }(), function () {
            function t() {
                this.mouseX = 0, this.mouseY = 0, this.disableMouseEvent = !1, this.mouseDownTime = 0,
                    this.mouseMoveAccuracy = 2, this._stage = null, this._target = null, this._lastMoveTimer = 0,
                    this._isLeftMouse = !1, this._eventList = [], this._touchIDs = {}, this._id = 1,
                    this._tTouchID = 0, this._event = new g(), this._matrix = new M(), this._point = new T(),
                    this._rect = new S(), this._prePoint = new T(), this._curTouchID = NaN;
            }
            s(t, "laya.events.MouseManager");
            var e = t.prototype;
            return e.__init__ = function (e, i) {
                var n = this;
                this._stage = e;
                var s = this, a = this._eventList;
                i.oncontextmenu = function (e) {
                    if (t.enabled) return !1;
                }, i.addEventListener("mousedown", function (e) {
                    t.enabled && (O.onIE || e.preventDefault(), a.push(e), s.mouseDownTime = O.now());
                }), i.addEventListener("mouseup", function (e) {
                    t.enabled && (e.preventDefault(), a.push(e), s.mouseDownTime = -O.now());
                }, !0), i.addEventListener("mousemove", function (e) {
                    if (t.enabled) {
                        e.preventDefault();
                        var i = O.now();
                        if (i - s._lastMoveTimer < 10) return;
                        s._lastMoveTimer = i, a.push(e);
                    }
                }, !0), i.addEventListener("mouseout", function (e) {
                    t.enabled && a.push(e);
                }), i.addEventListener("mouseover", function (e) {
                    t.enabled && a.push(e);
                }), i.addEventListener("touchstart", function (e) {
                    t.enabled && (a.push(e), t._isFirstTouch || xt.isInputting || e.preventDefault(),
                        s.mouseDownTime = O.now());
                }), i.addEventListener("touchend", function (e) {
                    t.enabled ? (t._isFirstTouch || xt.isInputting || e.preventDefault(), t._isFirstTouch = !1,
                        a.push(e), s.mouseDownTime = -O.now()) : n._curTouchID = NaN;
                }, !0), i.addEventListener("touchmove", function (e) {
                    t.enabled && (e.preventDefault(), a.push(e));
                }, !0), i.addEventListener("touchcancel", function (e) {
                    t.enabled ? (e.preventDefault(), a.push(e)) : n._curTouchID = NaN;
                }, !0), i.addEventListener("mousewheel", function (e) {
                    t.enabled && a.push(e);
                }), i.addEventListener("DOMMouseScroll", function (e) {
                    t.enabled && a.push(e);
                });
            }, e.initEvent = function (t, e) {
                this._event._stoped = !1, this._event.nativeEvent = e || t, this._target = null,
                    this._point.setTo(t.pageX || t.clientX, t.pageY || t.clientY), this._stage._canvasTransform.invertTransformPoint(this._point),
                    this.mouseX = this._point.x, this.mouseY = this._point.y, this._event.touchId = t.identifier || 0,
                    this._tTouchID = this._event.touchId;
                var i;
                (i = y.I._event)._stoped = !1, i.nativeEvent = this._event.nativeEvent, i.touchId = this._event.touchId;
            }, e.checkMouseWheel = function (t) {
                this._event.delta = t.wheelDelta ? .025 * t.wheelDelta : -t.detail;
                for (var e = y.I.getLastOvers(), i = 0, n = e.length; i < n; i++) {
                    var s = e[i];
                    s.event("mousewheel", this._event.setTo("mousewheel", s, this._target));
                }
            }, e.onMouseMove = function (t) {
                y.I.onMouseMove(t, this._tTouchID);
            }, e.onMouseDown = function (t) {
                if (xt.isInputting && i.stage.focus && i.stage.focus.focus && !i.stage.focus.contains(this._target)) {
                    var e = i.stage.focus._tf || i.stage.focus, n = t._tf || t;
                    n instanceof laya.display.Input && n.multiline == e.multiline ? e._focusOut() : e.focus = !1;
                }
                y.I.onMouseDown(t, this._tTouchID, this._isLeftMouse);
            }, e.onMouseUp = function (t) {
                y.I.onMouseUp(t, this._tTouchID, this._isLeftMouse);
            }, e.check = function (t, e, i, n) {
                this._point.setTo(e, i), t.fromParentPoint(this._point), e = this._point.x, i = this._point.y;
                var s = t.scrollRect;
                if (s && (this._rect.setTo(s.x, s.y, s.width, s.height), !this._rect.contains(e, i))) return !1;
                if (!this.disableMouseEvent) {
                    if (t.hitTestPrior && !t.mouseThrough && !this.hitTest(t, e, i)) return !1;
                    for (var a = t._childs.length - 1; a > -1; a--) {
                        var r = t._childs[a];
                        if (!r.destroyed && r.mouseEnabled && r.visible && this.check(r, e, i, n)) return !0;
                    }
                }
                var o = !(!t.hitTestPrior || t.mouseThrough || this.disableMouseEvent) || this.hitTest(t, e, i);
                return o ? (this._target = t, n.call(this, t)) : n === this.onMouseUp && t === this._stage && (this._target = this._stage,
                    n.call(this, this._target)), o;
            }, e.hitTest = function (t, e, i) {
                var n = !1;
                if (t.scrollRect && (e -= t.scrollRect.x, i -= t.scrollRect.y), t.hitArea instanceof laya.utils.HitArea) return t.hitArea.isHit(e, i);
                if (t.width > 0 && t.height > 0 || t.mouseThrough || t.hitArea) if (t.mouseThrough) n = t.getGraphicBounds().contains(e, i); else {
                    var s = this._rect;
                    t.hitArea ? s = t.hitArea : s.setTo(0, 0, t.width, t.height), n = s.contains(e, i);
                }
                return n;
            }, e.runEvent = function () {
                var e = this._eventList.length;
                if (e) {
                    for (var i, n = 0, s = 0, a = 0; n < e;) {
                        var r = this._eventList[n];
                        switch ("mousemove" !== r.type && (this._prePoint.x = this._prePoint.y = -1e6),
                        r.type) {
                            case "mousedown":
                                this._touchIDs[0] = this._id++, t._isTouchRespond ? t._isTouchRespond = !1 : (this._isLeftMouse = 0 === r.button,
                                    this.initEvent(r), this.check(this._stage, this.mouseX, this.mouseY, this.onMouseDown));
                                break;

                            case "mouseup":
                                this._isLeftMouse = 0 === r.button, this.initEvent(r), this.check(this._stage, this.mouseX, this.mouseY, this.onMouseUp);
                                break;

                            case "mousemove":
                                Math.abs(this._prePoint.x - r.clientX) + Math.abs(this._prePoint.y - r.clientY) >= this.mouseMoveAccuracy && (this._prePoint.x = r.clientX,
                                    this._prePoint.y = r.clientY, this.initEvent(r), this.check(this._stage, this.mouseX, this.mouseY, this.onMouseMove));
                                break;

                            case "touchstart":
                                t._isTouchRespond = !0, this._isLeftMouse = !0;
                                var o = r.changedTouches;
                                for (s = 0, a = o.length; s < a; s++) i = o[s], (t.multiTouchEnabled || isNaN(this._curTouchID)) && (this._curTouchID = i.identifier,
                                    this._id % 200 == 0 && (this._touchIDs = {}), this._touchIDs[i.identifier] = this._id++,
                                    this.initEvent(i, r), this.check(this._stage, this.mouseX, this.mouseY, this.onMouseDown));
                                break;

                            case "touchend":
                            case "touchcancel":
                                t._isTouchRespond = !0, this._isLeftMouse = !0;
                                var h = r.changedTouches;
                                for (s = 0, a = h.length; s < a; s++) if (i = h[s], t.multiTouchEnabled || i.identifier == this._curTouchID) {
                                    this._curTouchID = NaN, this.initEvent(i, r);
                                    this.check(this._stage, this.mouseX, this.mouseY, this.onMouseUp) || this.onMouseUp(null);
                                }
                                break;

                            case "touchmove":
                                var l = r.changedTouches;
                                for (s = 0, a = l.length; s < a; s++) i = l[s], (t.multiTouchEnabled || i.identifier == this._curTouchID) && (this.initEvent(i, r),
                                    this.check(this._stage, this.mouseX, this.mouseY, this.onMouseMove));
                                break;

                            case "wheel":
                            case "mousewheel":
                            case "DOMMouseScroll":
                                this.checkMouseWheel(r);
                                break;

                            case "mouseout":
                                y.I.stageMouseOut();
                                break;

                            case "mouseover":
                                this._stage.event("mouseover", this._event.setTo("mouseover", this._stage, this._stage));
                        }
                        n++;
                    }
                    this._eventList.length = 0;
                }
            }, t.enabled = !0, t.multiTouchEnabled = !0, t._isTouchRespond = !1, t._isFirstTouch = !0,
                n(t, ["instance", function () {
                    return this.instance = new t();
                }]), t;
        }()), y = function () {
            function t() {
                this.preOvers = [], this.preDowns = [], this.preRightDowns = [], this.enable = !0,
                    this._lastClickTime = 0, this._event = new g();
            }
            s(t, "laya.events.TouchManager");
            var e = t.prototype;
            return e._clearTempArrs = function () {
                t._oldArr.length = 0, t._newArr.length = 0, t._tEleArr.length = 0;
            }, e.getTouchFromArr = function (t, e) {
                var i = 0, n = 0;
                n = e.length;
                var s;
                for (i = 0; i < n; i++) if ((s = e[i]).id == t) return s;
                return null;
            }, e.removeTouchFromArr = function (t, e) {
                var i = 0;
                for (i = e.length - 1; i >= 0; i--) e[i].id == t && e.splice(i, 1);
            }, e.createTouchO = function (t, e) {
                var i;
                return i = Y.getItem("TouchData") || {}, i.id = e, i.tar = t, i;
            }, e.onMouseDown = function (e, i, n) {
                if (void 0 === n && (n = !1), this.enable) {
                    var s, a, r;
                    s = this.getTouchFromArr(i, this.preOvers), r = this.getEles(e, null, t._tEleArr),
                        s ? s.tar = e : (a = this.createTouchO(e, i), this.preOvers.push(a)), O.onMobile && this.sendEvents(r, "mouseover");
                    var o;
                    o = n ? this.preDowns : this.preRightDowns, (s = this.getTouchFromArr(i, o)) ? s.tar = e : (a = this.createTouchO(e, i),
                        o.push(a)), this.sendEvents(r, n ? "mousedown" : "rightmousedown"), this._clearTempArrs();
                }
            }, e.sendEvents = function (t, e) {
                var i = 0, n = 0;
                n = t.length, this._event._stoped = !1;
                var s;
                s = t[0];
                var a;
                for (i = 0; i < n; i++) {
                    if ((a = t[i]).destroyed) return;
                    if (a.event(e, this._event.setTo(e, a, s)), this._event._stoped) break;
                }
            }, e.getEles = function (t, e, i) {
                for (i ? i.length = 0 : i = []; t && t != e;) i.push(t), t = t.parent;
                return i;
            }, e.checkMouseOutAndOverOfMove = function (e, i, n) {
                if (void 0 === n && (n = 0), i != e) {
                    var s, a, r = 0, o = 0;
                    if (i.contains(e)) a = this.getEles(e, i, t._tEleArr), this.sendEvents(a, "mouseover"); else if (e.contains(i)) a = this.getEles(i, e, t._tEleArr),
                        this.sendEvents(a, "mouseout"); else {
                        (a = t._tEleArr).length = 0;
                        var h;
                        h = this.getEles(i, null, t._oldArr);
                        var l;
                        l = this.getEles(e, null, t._newArr), o = h.length;
                        var c = 0;
                        for (r = 0; r < o; r++) {
                            if (s = h[r], (c = l.indexOf(s)) >= 0) {
                                l.splice(c, l.length - c);
                                break;
                            }
                            a.push(s);
                        }
                        a.length > 0 && this.sendEvents(a, "mouseout"), l.length > 0 && this.sendEvents(l, "mouseover");
                    }
                }
            }, e.onMouseMove = function (e, i) {
                if (this.enable) {
                    var n, s;
                    (n = this.getTouchFromArr(i, this.preOvers)) ? (this.checkMouseOutAndOverOfMove(e, n.tar),
                        n.tar = e, s = this.getEles(e, null, t._tEleArr)) : (s = this.getEles(e, null, t._tEleArr),
                            this.sendEvents(s, "mouseover"), this.preOvers.push(this.createTouchO(e, i))), this.sendEvents(s, "mousemove"),
                        this._clearTempArrs();
                }
            }, e.getLastOvers = function () {
                return t._tEleArr.length = 0, this.preOvers.length > 0 && this.preOvers[0].tar ? this.getEles(this.preOvers[0].tar, null, t._tEleArr) : (t._tEleArr.push(i.stage),
                    t._tEleArr);
            }, e.stageMouseOut = function () {
                var t;
                t = this.getLastOvers(), this.preOvers.length = 0, this.sendEvents(t, "mouseout");
            }, e.onMouseUp = function (e, i, n) {
                if (void 0 === n && (n = !1), this.enable) {
                    var s, a, r, o, h, l = 0, c = 0, u = O.onMobile;
                    a = this.getEles(e, null, t._tEleArr), this.sendEvents(a, n ? "mouseup" : "rightmouseup");
                    var d;
                    if (d = n ? this.preDowns : this.preRightDowns, s = this.getTouchFromArr(i, d)) {
                        var _ = !1, f = O.now();
                        if (_ = f - this._lastClickTime < 300, this._lastClickTime = f, e == s.tar) h = a; else for (r = this.getEles(s.tar, null, t._oldArr),
                            (h = t._newArr).length = 0, c = r.length, l = 0; l < c; l++) o = r[l], a.indexOf(o) >= 0 && h.push(o);
                        h.length > 0 && this.sendEvents(h, n ? "click" : "rightclick"), n && _ && this.sendEvents(h, "doubleclick"),
                            this.removeTouchFromArr(i, d), s.tar = null, Y.recover("TouchData", s);
                    } else;
                    (s = this.getTouchFromArr(i, this.preOvers)) && u && ((h = this.getEles(s.tar, null, h)) && h.length > 0 && this.sendEvents(h, "mouseout"),
                        this.removeTouchFromArr(i, this.preOvers), s.tar = null, Y.recover("TouchData", s)),
                        this._clearTempArrs();
                }
            }, t._oldArr = [], t._newArr = [], t._tEleArr = [], n(t, ["I", function () {
                return this.I = new t();
            }]), t;
        }(), w = function () {
            function t() {
                this._action = null;
            }
            s(t, "laya.filters.Filter");
            var e = t.prototype;
            return i.imps(e, {
                "laya.filters.IFilter": !0
            }), e.callNative = function (t) { }, a(0, e, "type", function () {
                return -1;
            }), a(0, e, "action", function () {
                return this._action;
            }), t.BLUR = 16, t.COLOR = 32, t.GLOW = 8, t._filterStart = null, t._filterEnd = null,
                t._EndTarget = null, t._recycleScope = null, t._filter = null, t._useSrc = null,
                t._endSrc = null, t._useOut = null, t._endOut = null, t;
        }(), x = function () {
            function t() {
                this.data = null;
            }
            s(t, "laya.filters.ColorFilterAction");
            var e = t.prototype;
            return i.imps(e, {
                "laya.filters.IFilterAction": !0
            }), e.apply = function (t) {
                var e = t.ctx.ctx, i = t.ctx.ctx.canvas;
                if (0 == i.width || 0 == i.height) return i;
                for (var n, s = e.getImageData(0, 0, i.width, i.height), a = s.data, r = 0, o = a.length; r < o; r += 4) n = this.getColor(a[r], a[r + 1], a[r + 2], a[r + 3]),
                    0 != a[r + 3] && (a[r] = n[0], a[r + 1] = n[1], a[r + 2] = n[2], a[r + 3] = n[3]);
                return e.putImageData(s, 0, 0), t;
            }, e.getColor = function (t, e, i, n) {
                var s = [];
                if (this.data._mat && this.data._alpha) {
                    var a = this.data._mat, r = this.data._alpha;
                    s[0] = a[0] * t + a[1] * e + a[2] * i + a[3] * n + r[0], s[1] = a[4] * t + a[5] * e + a[6] * i + a[7] * n + r[1],
                        s[2] = a[8] * t + a[9] * e + a[10] * i + a[11] * n + r[2], s[3] = a[12] * t + a[13] * e + a[14] * i + a[15] * n + r[3];
                }
                return s;
            }, t;
        }(), b = (function () {
            function t() { }
            s(t, "laya.maths.Arith"), t.formatR = function (t) {
                return t > Math.PI && (t -= 2 * Math.PI), t < -Math.PI && (t += 2 * Math.PI), t;
            }, t.isPOT = function (t, e) {
                return t > 0 && 0 == (t & t - 1) && e > 0 && 0 == (e & e - 1);
            }, t.setMatToArray = function (t, e) {
                t.a, t.b, t.c, t.d, t.tx, t.ty, e[0] = t.a, e[1] = t.b, e[4] = t.c, e[5] = t.d,
                    e[12] = t.tx, e[13] = t.ty;
            };
        }(), function () {
            function t() {
                this._controlPoints = [new T(), new T(), new T()], this._calFun = this.getPoint2;
            }
            s(t, "laya.maths.Bezier");
            var e = t.prototype;
            return e._switchPoint = function (t, e) {
                var i = this._controlPoints.shift();
                i.setTo(t, e), this._controlPoints.push(i);
            }, e.getPoint2 = function (t, e) {
                var i = this._controlPoints[0], n = this._controlPoints[1], s = this._controlPoints[2], a = Math.pow(1 - t, 2) * i.x + 2 * t * (1 - t) * n.x + Math.pow(t, 2) * s.x, r = Math.pow(1 - t, 2) * i.y + 2 * t * (1 - t) * n.y + Math.pow(t, 2) * s.y;
                e.push(a, r);
            }, e.getPoint3 = function (t, e) {
                var i = this._controlPoints[0], n = this._controlPoints[1], s = this._controlPoints[2], a = this._controlPoints[3], r = Math.pow(1 - t, 3) * i.x + 3 * n.x * t * (1 - t) * (1 - t) + 3 * s.x * t * t * (1 - t) + a.x * Math.pow(t, 3), o = Math.pow(1 - t, 3) * i.y + 3 * n.y * t * (1 - t) * (1 - t) + 3 * s.y * t * t * (1 - t) + a.y * Math.pow(t, 3);
                e.push(r, o);
            }, e.insertPoints = function (t, e) {
                var i = NaN, n = NaN;
                for (n = 1 / (t = t > 0 ? t : 5), i = 0; i <= 1; i += n) this._calFun(i, e);
            }, e.getBezierPoints = function (t, e, i) {
                void 0 === e && (e = 5), void 0 === i && (i = 2);
                var n = 0, s = 0;
                if ((s = t.length) < 2 * (i + 1)) return [];
                var a;
                switch (a = [], i) {
                    case 2:
                        this._calFun = this.getPoint2;
                        break;

                    case 3:
                        this._calFun = this.getPoint3;
                        break;

                    default:
                        return [];
                }
                for (; this._controlPoints.length <= i;) this._controlPoints.push(new T());
                for (n = 0; n < 2 * i; n += 2) this._switchPoint(t[n], t[n + 1]);
                for (n = 2 * i; n < s; n += 2) this._switchPoint(t[n], t[n + 1]), n / 2 % i == 0 && this.insertPoints(e, a);
                return a;
            }, n(t, ["I", function () {
                return this.I = new t();
            }]), t;
        }()), L = function () {
            function t() { }
            return s(t, "laya.maths.GrahamScan"), t.multiply = function (t, e, i) {
                return (t.x - i.x) * (e.y - i.y) - (e.x - i.x) * (t.y - i.y);
            }, t.dis = function (t, e) {
                return (t.x - e.x) * (t.x - e.x) + (t.y - e.y) * (t.y - e.y);
            }, t._getPoints = function (e, i, n) {
                for (void 0 === i && (i = !1), t._mPointList || (t._mPointList = []); t._mPointList.length < e;) t._mPointList.push(new T());
                return n || (n = []), n.length = 0, i ? t.getFrom(n, t._mPointList, e) : t.getFromR(n, t._mPointList, e),
                    n;
            }, t.getFrom = function (t, e, i) {
                var n = 0;
                for (n = 0; n < i; n++) t.push(e[n]);
                return t;
            }, t.getFromR = function (t, e, i) {
                var n = 0;
                for (n = 0; n < i; n++) t.push(e.pop());
                return t;
            }, t.pListToPointList = function (e, i) {
                void 0 === i && (i = !1);
                var n = 0, s = e.length / 2, a = t._getPoints(s, i, t._tempPointList);
                for (n = 0; n < s; n++) a[n].setTo(e[n + n], e[n + n + 1]);
                return a;
            }, t.pointListToPlist = function (e) {
                var i, n = 0, s = e.length, a = t._temPList;
                for (a.length = 0, n = 0; n < s; n++) i = e[n], a.push(i.x, i.y);
                return a;
            }, t.scanPList = function (e) {
                return q.copyArray(e, t.pointListToPlist(t.scan(t.pListToPointList(e, !0))));
            }, t.scan = function (e) {
                var i, n, s, a = 0, r = 0, o = 0, h = e.length, l = {};
                for ((n = t._temArr).length = 0, a = (h = e.length) - 1; a >= 0; a--) s = (i = e[a]).x + "_" + i.y,
                    l.hasOwnProperty(s) || (l[s] = !0, n.push(i));
                for (h = n.length, q.copyArray(e, n), a = 1; a < h; a++) (e[a].y < e[o].y || e[a].y == e[o].y && e[a].x < e[o].x) && (o = a);
                for (i = e[0], e[0] = e[o], e[o] = i, a = 1; a < h - 1; a++) {
                    for (o = a, r = a + 1; r < h; r++) (t.multiply(e[r], e[o], e[0]) > 0 || 0 == t.multiply(e[r], e[o], e[0]) && t.dis(e[0], e[r]) < t.dis(e[0], e[o])) && (o = r);
                    i = e[a], e[a] = e[o], e[o] = i;
                }
                if (n = t._temArr, n.length = 0, e.length < 3) return q.copyArray(n, e);
                for (n.push(e[0], e[1], e[2]), a = 3; a < h; a++) {
                    for (; n.length >= 2 && t.multiply(e[a], n[n.length - 1], n[n.length - 2]) >= 0;) n.pop();
                    e[a] && n.push(e[a]);
                }
                return n;
            }, t._mPointList = null, t._tempPointList = [], t._temPList = [], t._temArr = [],
                t;
        }(), C = function () {
            function t() { }
            return s(t, "laya.maths.MathUtil"), t.subtractVector3 = function (t, e, i) {
                i[0] = t[0] - e[0], i[1] = t[1] - e[1], i[2] = t[2] - e[2];
            }, t.lerp = function (t, e, i) {
                return t * (1 - i) + e * i;
            }, t.scaleVector3 = function (t, e, i) {
                i[0] = t[0] * e, i[1] = t[1] * e, i[2] = t[2] * e;
            }, t.lerpVector3 = function (t, e, i, n) {
                var s = t[0], a = t[1], r = t[2];
                n[0] = s + i * (e[0] - s), n[1] = a + i * (e[1] - a), n[2] = r + i * (e[2] - r);
            }, t.lerpVector4 = function (t, e, i, n) {
                var s = t[0], a = t[1], r = t[2], o = t[3];
                n[0] = s + i * (e[0] - s), n[1] = a + i * (e[1] - a), n[2] = r + i * (e[2] - r),
                    n[3] = o + i * (e[3] - o);
            }, t.slerpQuaternionArray = function (t, e, i, n, s, a, r) {
                var o, h, l, c, u, d = t[e + 0], _ = t[e + 1], f = t[e + 2], p = t[e + 3], g = i[n + 0], v = i[n + 1], m = i[n + 2], y = i[n + 3];
                return (h = d * g + _ * v + f * m + p * y) < 0 && (h = -h, g = -g, v = -v, m = -m,
                    y = -y), 1 - h > 1e-6 ? (o = Math.acos(h), l = Math.sin(o), c = Math.sin((1 - s) * o) / l,
                        u = Math.sin(s * o) / l) : (c = 1 - s, u = s), a[r + 0] = c * d + u * g, a[r + 1] = c * _ + u * v,
                    a[r + 2] = c * f + u * m, a[r + 3] = c * p + u * y, a;
            }, t.getRotation = function (t, e, i, n) {
                return Math.atan2(n - e, i - t) / Math.PI * 180;
            }, t.sortBigFirst = function (t, e) {
                return t == e ? 0 : e > t ? 1 : -1;
            }, t.sortSmallFirst = function (t, e) {
                return t == e ? 0 : e > t ? -1 : 1;
            }, t.sortNumBigFirst = function (t, e) {
                return parseFloat(e) - parseFloat(t);
            }, t.sortNumSmallFirst = function (t, e) {
                return parseFloat(t) - parseFloat(e);
            }, t.sortByKey = function (e, i, n) {
                void 0 === i && (i = !1), void 0 === n && (n = !0);
                var s;
                return s = i ? n ? t.sortNumBigFirst : t.sortBigFirst : n ? t.sortNumSmallFirst : t.sortSmallFirst,
                    function (t, i) {
                        return s(t[e], i[e]);
                    };
            }, t;
        }(), M = function () {
            function t(t, e, i, n, s, a) {
                this.inPool = !1, this.bTransform = !1, void 0 === t && (t = 1), void 0 === e && (e = 0),
                    void 0 === i && (i = 0), void 0 === n && (n = 1), void 0 === s && (s = 0), void 0 === a && (a = 0),
                    this.a = t, this.b = e, this.c = i, this.d = n, this.tx = s, this.ty = a, this._checkTransform();
            }
            s(t, "laya.maths.Matrix");
            var e = t.prototype;
            return e.identity = function () {
                return this.a = this.d = 1, this.b = this.tx = this.ty = this.c = 0, this.bTransform = !1,
                    this;
            }, e._checkTransform = function () {
                return this.bTransform = 1 !== this.a || 0 !== this.b || 0 !== this.c || 1 !== this.d;
            }, e.setTranslate = function (t, e) {
                return this.tx = t, this.ty = e, this;
            }, e.translate = function (t, e) {
                return this.tx += t, this.ty += e, this;
            }, e.scale = function (t, e) {
                this.a *= t, this.d *= e, this.c *= t, this.b *= e, this.tx *= t, this.ty *= e,
                    this.bTransform = !0;
            }, e.rotate = function (t) {
                var e = Math.cos(t), i = Math.sin(t), n = this.a, s = this.c, a = this.tx;
                this.a = n * e - this.b * i, this.b = n * i + this.b * e, this.c = s * e - this.d * i,
                    this.d = s * i + this.d * e, this.tx = a * e - this.ty * i, this.ty = a * i + this.ty * e,
                    this.bTransform = !0;
            }, e.skew = function (t, e) {
                var i = Math.tan(t), n = Math.tan(e), s = this.a, a = this.b;
                return this.a += n * this.c, this.b += n * this.d, this.c += i * s, this.d += i * a,
                    this;
            }, e.invertTransformPoint = function (t) {
                var e = this.a, i = this.b, n = this.c, s = this.d, a = this.tx, r = e * s - i * n, o = s / r, h = -i / r, l = -n / r, c = e / r, u = (n * this.ty - s * a) / r, d = -(e * this.ty - i * a) / r;
                return t.setTo(o * t.x + l * t.y + u, h * t.x + c * t.y + d);
            }, e.transformPoint = function (t) {
                return t.setTo(this.a * t.x + this.c * t.y + this.tx, this.b * t.x + this.d * t.y + this.ty);
            }, e.transformPointN = function (t) {
                return t.setTo(this.a * t.x + this.c * t.y, this.b * t.x + this.d * t.y);
            }, e.transformPointArray = function (t, e) {
                for (var i = t.length, n = 0; n < i; n += 2) {
                    var s = t[n], a = t[n + 1];
                    e[n] = this.a * s + this.c * a + this.tx, e[n + 1] = this.b * s + this.d * a + this.ty;
                }
                return e;
            }, e.transformPointArrayScale = function (t, e) {
                for (var i = t.length, n = 0; n < i; n += 2) {
                    var s = t[n], a = t[n + 1];
                    e[n] = this.a * s + this.c * a, e[n + 1] = this.b * s + this.d * a;
                }
                return e;
            }, e.getScaleX = function () {
                return 0 === this.b ? this.a : Math.sqrt(this.a * this.a + this.b * this.b);
            }, e.getScaleY = function () {
                return 0 === this.c ? this.d : Math.sqrt(this.c * this.c + this.d * this.d);
            }, e.invert = function () {
                var t = this.a, e = this.b, i = this.c, n = this.d, s = this.tx, a = t * n - e * i;
                return this.a = n / a, this.b = -e / a, this.c = -i / a, this.d = t / a, this.tx = (i * this.ty - n * s) / a,
                    this.ty = -(t * this.ty - e * s) / a, this;
            }, e.setTo = function (t, e, i, n, s, a) {
                return this.a = t, this.b = e, this.c = i, this.d = n, this.tx = s, this.ty = a,
                    this;
            }, e.concat = function (t) {
                var e = this.a, i = this.c, n = this.tx;
                return this.a = e * t.a + this.b * t.c, this.b = e * t.b + this.b * t.d, this.c = i * t.a + this.d * t.c,
                    this.d = i * t.b + this.d * t.d, this.tx = n * t.a + this.ty * t.c + t.tx, this.ty = n * t.b + this.ty * t.d + t.ty,
                    this;
            }, e.scaleEx = function (t, e) {
                var i = this.a, n = this.b, s = this.c, a = this.d;
                0 !== n || 0 !== s ? (this.a = t * i, this.b = t * n, this.c = e * s, this.d = e * a) : (this.a = t * i,
                    this.b = 0 * a, this.c = 0 * i, this.d = e * a), this.bTransform = !0;
            }, e.rotateEx = function (t) {
                var e = Math.cos(t), i = Math.sin(t), n = this.a, s = this.b, a = this.c, r = this.d;
                0 !== s || 0 !== a ? (this.a = e * n + i * a, this.b = e * s + i * r, this.c = -i * n + e * a,
                    this.d = -i * s + e * r) : (this.a = e * n, this.b = i * r, this.c = -i * n, this.d = e * r),
                    this.bTransform = !0;
            }, e.clone = function () {
                var e = t.create();
                return e.a = this.a, e.b = this.b, e.c = this.c, e.d = this.d, e.tx = this.tx, e.ty = this.ty,
                    e.bTransform = this.bTransform, e;
            }, e.copyTo = function (t) {
                return t.a = this.a, t.b = this.b, t.c = this.c, t.d = this.d, t.tx = this.tx, t.ty = this.ty,
                    t.bTransform = this.bTransform, t;
            }, e.toString = function () {
                return this.a + "," + this.b + "," + this.c + "," + this.d + "," + this.tx + "," + this.ty;
            }, e.destroy = function () {
                if (!this.inPool) {
                    var e = t._cache;
                    this.inPool = !0, e._length || (e._length = 0), e[e._length++] = this, this.a = this.d = 1,
                        this.b = this.c = this.tx = this.ty = 0, this.bTransform = !1;
                }
            }, t.mul = function (t, e, i) {
                var n = t.a, s = t.b, a = t.c, r = t.d, o = t.tx, h = t.ty, l = e.a, c = e.b, u = e.c, d = e.d, _ = e.tx, f = e.ty;
                return 0 !== c || 0 !== u ? (i.a = n * l + s * u, i.b = n * c + s * d, i.c = a * l + r * u,
                    i.d = a * c + r * d, i.tx = l * o + u * h + _, i.ty = c * o + d * h + f) : (i.a = n * l,
                        i.b = s * d, i.c = a * l, i.d = r * d, i.tx = l * o + _, i.ty = d * h + f), i;
            }, t.mul16 = function (t, e, i) {
                var n = t.a, s = t.b, a = t.c, r = t.d, o = t.tx, h = t.ty, l = e.a, c = e.b, u = e.c, d = e.d, _ = e.tx, f = e.ty;
                return 0 !== c || 0 !== u ? (i[0] = n * l + s * u, i[1] = n * c + s * d, i[4] = a * l + r * u,
                    i[5] = a * c + r * d, i[12] = l * o + u * h + _, i[13] = c * o + d * h + f) : (i[0] = n * l,
                        i[1] = s * d, i[4] = a * l, i[5] = r * d, i[12] = l * o + _, i[13] = d * h + f),
                    i;
            }, t.mulPre = function (t, e, i, n, s, a, r, o) {
                var h = t.a, l = t.b, c = t.c, u = t.d, d = t.tx, _ = t.ty;
                return 0 !== i || 0 !== n ? (o.a = h * e + l * n, o.b = h * i + l * s, o.c = c * e + u * n,
                    o.d = c * i + u * s, o.tx = e * d + n * _ + a, o.ty = i * d + s * _ + r) : (o.a = h * e,
                        o.b = l * s, o.c = c * e, o.d = u * s, o.tx = e * d + a, o.ty = s * _ + r), o;
            }, t.mulPos = function (t, e, i, n, s, a, r, o) {
                var h = t.a, l = t.b, c = t.c, u = t.d, d = t.tx, _ = t.ty;
                return 0 !== l || 0 !== c ? (o.a = e * h + i * c, o.b = e * l + i * u, o.c = n * h + s * c,
                    o.d = n * l + s * u, o.tx = h * a + c * r + d, o.ty = l * a + u * r + _) : (o.a = e * h,
                        o.b = i * u, o.c = n * h, o.d = s * u, o.tx = h * a + d, o.ty = u * r + _), o;
            }, t.preMul = function (t, e, i) {
                var n = t.a, s = t.b, a = t.c, r = t.d, o = e.a, h = e.b, l = e.c, c = e.d, u = e.tx, d = e.ty;
                return i.a = o * n, i.b = i.c = 0, i.d = c * r, i.tx = u * n + t.tx, i.ty = d * r + t.ty,
                    0 === h && 0 === l && 0 === s && 0 === a || (i.a += h * a, i.d += l * s, i.b += o * s + h * r,
                        i.c += l * n + c * a, i.tx += d * a, i.ty += u * s), i;
            }, t.preMulXY = function (t, e, i, n) {
                var s = t.a, a = t.b, r = t.c, o = t.d;
                return n.a = s, n.b = a, n.c = r, n.d = o, n.tx = e * s + t.tx + i * r, n.ty = i * o + t.ty + e * a,
                    n;
            }, t.create = function () {
                var e = t._cache, i = e._length ? e[--e._length] : new t();
                return i.inPool = !1, i;
            }, t.EMPTY = new t(), t.TEMP = new t(), t._cache = [], t;
        }(), T = function () {
            function t(t, e) {
                void 0 === t && (t = 0), void 0 === e && (e = 0), this.x = t, this.y = e;
            }
            s(t, "laya.maths.Point");
            var e = t.prototype;
            return e.setTo = function (t, e) {
                return this.x = t, this.y = e, this;
            }, e.distance = function (t, e) {
                return Math.sqrt((this.x - t) * (this.x - t) + (this.y - e) * (this.y - e));
            }, e.toString = function () {
                return this.x + "," + this.y;
            }, e.normalize = function () {
                var t = Math.sqrt(this.x * this.x + this.y * this.y);
                if (t > 0) {
                    var e = 1 / t;
                    this.x *= e, this.y *= e;
                }
            }, t.TEMP = new t(), t.EMPTY = new t(), t;
        }(), S = function () {
            function t(t, e, i, n) {
                void 0 === t && (t = 0), void 0 === e && (e = 0), void 0 === i && (i = 0), void 0 === n && (n = 0),
                    this.x = t, this.y = e, this.width = i, this.height = n;
            }
            s(t, "laya.maths.Rectangle");
            var e = t.prototype;
            return e.setTo = function (t, e, i, n) {
                return this.x = t, this.y = e, this.width = i, this.height = n, this;
            }, e.copyFrom = function (t) {
                return this.x = t.x, this.y = t.y, this.width = t.width, this.height = t.height,
                    this;
            }, e.contains = function (t, e) {
                return !(this.width <= 0 || this.height <= 0) && (t >= this.x && t < this.right && e >= this.y && e < this.bottom);
            }, e.intersects = function (t) {
                return !(t.x > this.x + this.width || t.x + t.width < this.x || t.y > this.y + this.height || t.y + t.height < this.y);
            }, e.intersection = function (e, i) {
                return this.intersects(e) ? (i || (i = new t()), i.x = Math.max(this.x, e.x), i.y = Math.max(this.y, e.y),
                    i.width = Math.min(this.right, e.right) - i.x, i.height = Math.min(this.bottom, e.bottom) - i.y,
                    i) : null;
            }, e.union = function (e, i) {
                return i || (i = new t()), this.clone(i), e.width <= 0 || e.height <= 0 ? i : (i.addPoint(e.x, e.y),
                    i.addPoint(e.right, e.bottom), this);
            }, e.clone = function (e) {
                return e || (e = new t()), e.x = this.x, e.y = this.y, e.width = this.width, e.height = this.height,
                    e;
            }, e.toString = function () {
                return this.x + "," + this.y + "," + this.width + "," + this.height;
            }, e.equals = function (t) {
                return !(!t || t.x !== this.x || t.y !== this.y || t.width !== this.width || t.height !== this.height);
            }, e.addPoint = function (t, e) {
                return this.x > t && (this.width += this.x - t, this.x = t), this.y > e && (this.height += this.y - e,
                    this.y = e), this.width < t - this.x && (this.width = t - this.x), this.height < e - this.y && (this.height = e - this.y),
                    this;
            }, e._getBoundPoints = function () {
                var e = t._temB;
                return e.length = 0, 0 == this.width || 0 == this.height ? e : (e.push(this.x, this.y, this.x + this.width, this.y, this.x, this.y + this.height, this.x + this.width, this.y + this.height),
                    e);
            }, e.isEmpty = function () {
                return this.width <= 0 || this.height <= 0;
            }, a(0, e, "right", function () {
                return this.x + this.width;
            }), a(0, e, "bottom", function () {
                return this.y + this.height;
            }), t._getBoundPointS = function (e, i, n, s) {
                var a = t._temA;
                return a.length = 0, 0 == n || 0 == s ? a : (a.push(e, i, e + n, i, e, i + s, e + n, i + s),
                    a);
            }, t._getWrapRec = function (e, i) {
                if (!e || e.length < 1) return i ? i.setTo(0, 0, 0, 0) : t.TEMP.setTo(0, 0, 0, 0);
                i = i || new t();
                var n, s, a, r, o, h = e.length, l = T.TEMP;
                for (a = o = -(s = r = 99999), n = 0; n < h; n += 2) l.x = e[n], l.y = e[n + 1],
                    s = s < l.x ? s : l.x, r = r < l.y ? r : l.y, a = a > l.x ? a : l.x, o = o > l.y ? o : l.y;
                return i.setTo(s, r, a - s, o - r);
            }, t.EMPTY = new t(), t.TEMP = new t(), t._temB = [], t._temA = [], t;
        }(), A = function () {
            function t() { }
            return s(t, "laya.media.SoundManager"), a(1, t, "useAudioMusic", function () {
                return t._useAudioMusic;
            }, function (e) {
                t._useAudioMusic = e, t._musicClass = e ? et : null;
            }), a(1, t, "autoStopMusic", function () {
                return t._autoStopMusic;
            }, function (e) {
                i.stage.off("blur", null, t._stageOnBlur), i.stage.off("focus", null, t._stageOnFocus),
                    i.stage.off("visibilitychange", null, t._visibilityChange), t._autoStopMusic = e,
                    e && (i.stage.on("blur", null, t._stageOnBlur), i.stage.on("focus", null, t._stageOnFocus),
                        i.stage.on("visibilitychange", null, t._visibilityChange));
            }), a(1, t, "muted", function () {
                return t._muted;
            }, function (e) {
                e != t._muted && (e && t.stopAllSound(), t.musicMuted = e, t._muted = e);
            }), a(1, t, "musicMuted", function () {
                return t._musicMuted;
            }, function (e) {
                e != t._musicMuted && (e ? (t._tMusic && t._musicChannel && !t._musicChannel.isStopped ? P.isConchApp ? t._musicChannel._audio && (t._musicChannel._audio.muted = !0) : t._musicChannel.pause() : t._musicChannel = null,
                    t._musicMuted = e) : (t._musicMuted = e, t._tMusic && t._musicChannel && (P.isConchApp ? t._musicChannel._audio && (t._musicChannel._audio.muted = !1) : t._musicChannel.resume())));
            }), a(1, t, "soundMuted", function () {
                return t._soundMuted;
            }, function (e) {
                t._soundMuted = e;
            }), t.addChannel = function (e) {
                t._channels.indexOf(e) >= 0 || t._channels.push(e);
            }, t.removeChannel = function (e) {
                var i = 0;
                for (i = t._channels.length - 1; i >= 0; i--) t._channels[i] == e && t._channels.splice(i, 1);
            }, t.disposeSoundIfNotUsed = function (e) {
                var i = 0;
                for (i = t._channels.length - 1; i >= 0; i--) if (t._channels[i].url == e) return;
                t.destroySound(e);
            }, t._visibilityChange = function () {
                i.stage.isVisibility ? t._stageOnFocus() : t._stageOnBlur();
            }, t._stageOnBlur = function () {
                t._isActive = !1, t._musicChannel && (t._musicChannel.isStopped || (t._blurPaused = !0,
                    t._musicChannel.pause())), t.stopAllSound(), i.stage.once("mousedown", null, t._stageOnFocus);
            }, t._recoverWebAudio = function () {
                st.ctx && "running" != st.ctx.state && st.ctx.resume && st.ctx.resume();
            }, t._stageOnFocus = function () {
                t._isActive = !0, t._recoverWebAudio(), i.stage.off("mousedown", null, t._stageOnFocus),
                    t._blurPaused && t._musicChannel && t._musicChannel.isStopped && (t._blurPaused = !1,
                        t._musicChannel.resume());
            }, t.playSound = function (e, n, s, a, r) {
                if (void 0 === n && (n = 1), void 0 === r && (r = 0), !t._isActive || !e) return null;
                if (t._muted) return null;
                if (t._recoverWebAudio(), (e = R.formatURL(e)) == t._tMusic) {
                    if (t._musicMuted) return null;
                } else {
                    if (P.isConchApp) {
                        var o = q.getFileExtension(e);
                        if ("wav" != o && "ogg" != o) return alert("The sound only supports wav or ogg format,for optimal performance reason,please refer to the official website document."),
                            null;
                    }
                    if (t._soundMuted) return null;
                }
                var h;
                O.onMiniGame || O.onAlipayMiniGame || O.onBDMiniGame || O.onVVMiniGame || O.onKGMiniGame || O.onQGMiniGame || O.onAlipayMiniGame || (h = i.loader.getRes(e)),
                    a || (a = t._soundClass), h || ((h = new a()).load(e), O.onMiniGame || O.onAlipayMiniGame || O.onBDMiniGame || O.onVVMiniGame || O.onKGMiniGame || O.onQGMiniGame || O.onAlipayMiniGame || rt.cacheRes(e, h));
                var l;
                return (l = h.play(r, n)) ? (l.url = e, l.volume = e == t._tMusic ? t.musicVolume : t.soundVolume,
                    l.completeHandler = s, l) : null;
            }, t.destroySound = function (t) {
                var e = i.loader.getRes(t);
                e && (rt.clearRes(t), e.dispose());
            }, t.playMusic = function (e, i, n, s) {
                return void 0 === i && (i = 0), void 0 === s && (s = 0), e = R.formatURL(e), t._tMusic = e,
                    t._musicChannel && t._musicChannel.stop(), t._musicChannel = t.playSound(e, i, n, t._musicClass, s);
            }, t.stopSound = function (e) {
                e = R.formatURL(e);
                var i, n = 0;
                for (n = t._channels.length - 1; n >= 0; n--) (i = t._channels[n]).url == e && i.stop();
            }, t.stopAll = function () {
                t._tMusic = null;
                var e = 0;
                for (e = t._channels.length - 1; e >= 0; e--) t._channels[e].stop();
            }, t.stopAllSound = function () {
                var e, i = 0;
                for (i = t._channels.length - 1; i >= 0; i--) (e = t._channels[i]).url != t._tMusic && e.stop();
            }, t.stopMusic = function () {
                t._musicChannel && t._musicChannel.stop(), t._tMusic = null;
            }, t.setSoundVolume = function (e, i) {
                if (i) i = R.formatURL(i), t._setVolume(i, e); else {
                    t.soundVolume = e;
                    var n, s = 0;
                    for (s = t._channels.length - 1; s >= 0; s--) (n = t._channels[s]).url != t._tMusic && (n.volume = e);
                }
            }, t.setMusicVolume = function (e) {
                t.musicVolume = e, t._setVolume(t._tMusic, e);
            }, t._setVolume = function (e, i) {
                e = R.formatURL(e);
                var n, s = 0;
                for (s = t._channels.length - 1; s >= 0; s--) (n = t._channels[s]).url == e && (n.volume = i);
            }, t.musicVolume = 1, t.soundVolume = 1, t.playbackRate = 1, t._useAudioMusic = !0,
                t._muted = !1, t._soundMuted = !1, t._musicMuted = !1, t._tMusic = null, t._musicChannel = null,
                t._channels = [], t._autoStopMusic = !1, t._blurPaused = !1, t._isActive = !0, t._soundClass = null,
                t._musicClass = null, t.autoReleaseSound = !0, t;
        }(), I = function () {
            function e() { }
            var i;
            return s(e, "laya.net.LocalStorage"), e.__init__ = function () {
                e._baseClass || (e._baseClass = i, i.init()), e.items = e._baseClass.items, e.support = e._baseClass.support;
            }, e.setItem = function (t, i) {
                e._baseClass.setItem(t, i);
            }, e.getItem = function (t) {
                return e._baseClass.getItem(t);
            }, e.setJSON = function (t, i) {
                e._baseClass.setJSON(t, i);
            }, e.getJSON = function (t) {
                return e._baseClass.getJSON(t);
            }, e.removeItem = function (t) {
                e._baseClass.removeItem(t);
            }, e.clear = function () {
                e._baseClass.clear();
            }, e._baseClass = null, e.items = null, e.support = !1, e.__init$ = function () {
                i = function () {
                    function e() { }
                    return s(e, ""), e.init = function () {
                        try {
                            e.support = !0, e.items = t.localStorage, e.setItem("laya", "1"), e.removeItem("laya");
                        } catch (t) {
                            e.support = !1;
                        }
                        e.support || console.log("LocalStorage is not supprot or browser is private mode.");
                    }, e.setItem = function (t, i) {
                        try {
                            e.support && e.items.setItem(t, i);
                        } catch (t) {
                            console.warn("set localStorage failed", t);
                        }
                    }, e.getItem = function (t) {
                        return e.support ? e.items.getItem(t) : null;
                    }, e.setJSON = function (t, i) {
                        try {
                            e.support && e.items.setItem(t, JSON.stringify(i));
                        } catch (t) {
                            console.warn("set localStorage failed", t);
                        }
                    }, e.getJSON = function (t) {
                        return JSON.parse(e.support ? e.items.getItem(t) : null);
                    }, e.removeItem = function (t) {
                        e.support && e.items.removeItem(t);
                    }, e.clear = function () {
                        e.support && e.items.clear();
                    }, e.items = null, e.support = !1, e;
                }();
            }, e;
        }(), E = (function () {
            function t() { }
            s(t, "laya.net.ResourceVersion"), t.enable = function (e, n, s) {
                void 0 === s && (s = 2), laya.net.ResourceVersion.type = s, i.loader.load(e, l.create(null, t.onManifestLoaded, [n]), null, "json"),
                    R.customFormat = t.addVersionPrefix;
            }, t.onManifestLoaded = function (e, i) {
                t.manifest = i, e.run(), i || console.warn("资源版本清单文件不存在，不使用资源版本管理。忽略ERR_FILE_NOT_FOUND错误。");
            }, t.addVersionPrefix = function (e) {
                return t.manifest && t.manifest[e] ? 2 == t.type ? t.manifest[e] : t.manifest[e] + "/" + e : e;
            }, t.FOLDER_VERSION = 1, t.FILENAME_VERSION = 2, t.manifest = null, t.type = 1;
        }(), function () {
            function t() {
                this.fontName = null, this.complete = null, this.err = null, this._fontTxt = null,
                    this._url = null, this._div = null, this._txtWidth = NaN, this._http = null;
            }
            s(t, "laya.net.TTFLoader");
            var e = t.prototype;
            return e.load = function (t) {
                this._url = t;
                var e = t.split(".ttf")[0].split("/");
                this.fontName = e[e.length - 1], O.window.conch ? this._loadConch() : O.window.FontFace ? this._loadWithFontFace() : this._loadWithCSS();
            }, e._loadConch = function () {
                this._http = new at(), this._http.on("error", this, this._onErr), this._http.on("complete", this, this._onHttpLoaded),
                    this._http.send(this._url, null, "get", "arraybuffer");
            }, e._onHttpLoaded = function (t) {
                O.window.conch.setFontFaceFromBuffer(this.fontName, t), this._clearHttp(), this._complete();
            }, e._clearHttp = function () {
                this._http && (this._http.off("error", this, this._onErr), this._http.off("complete", this, this._onHttpLoaded),
                    this._http = null);
            }, e._onErr = function () {
                this._clearHttp(), this.err && (this.err.runWith("fail:" + this._url), this.err = null);
            }, e._complete = function () {
                i.timer.clear(this, this._complete), i.timer.clear(this, this._checkComplete), this._div && this._div.parentNode && (this._div.parentNode.removeChild(this._div),
                    this._div = null), this.complete && (this.complete.runWith(this), this.complete = null);
            }, e._checkComplete = function () {
                r.measureText("LayaTTFFont", this._fontTxt).width != this._txtWidth && this._complete();
            }, e._loadWithFontFace = function () {
                var t = new O.window.FontFace(this.fontName, "url('" + this._url + "')");
                O.window.document.fonts.add(t);
                var e = this;
                t.loaded.then(function () {
                    e._complete();
                }), t.load();
            }, e._createDiv = function () {
                this._div = O.createElement("div"), this._div.innerHTML = "laya";
                var t = this._div.style;
                t.fontFamily = this.fontName, t.position = "absolute", t.left = "-100px", t.top = "-100px",
                    O.document.body.appendChild(this._div);
            }, e._loadWithCSS = function () {
                var t = this, e = O.createElement("style");
                e.type = "text/css", O.document.body.appendChild(e), e.textContent = "@font-face { font-family:'" + this.fontName + "'; src:url('" + this._url + "');}",
                    this._fontTxt = "40px " + this.fontName, this._txtWidth = r.measureText("LayaTTFFont", this._fontTxt).width;
                var n = this;
                e.onload = function () {
                    i.timer.once(1e4, n, t._complete);
                }, i.timer.loop(20, this, this._checkComplete), this._createDiv();
            }, t._testString = "LayaTTFFont", t;
        }()), R = function () {
            function t(e) {
                this._url = null, this._path = null, this._url = t.formatURL(e), this._path = t.getPath(e);
            }
            s(t, "laya.net.URL");
            var e = t.prototype;
            return a(0, e, "path", function () {
                return this._path;
            }), a(0, e, "url", function () {
                return this._url;
            }), t.formatURL = function (e, i) {
                if (!e) return "null path";
                if (e.indexOf(":") > 0) return e;
                null != t.customFormat && (e = t.customFormat(e, i));
                var n = e.charAt(0);
                if ("." === n) return t.formatRelativePath((i || t.basePath) + e);
                if ("~" === n) return t.rootPath + e.substring(1);
                if ("d" === n) {
                    if (0 === e.indexOf("data:image")) return e;
                } else if ("/" === n) return e;
                return (i || t.basePath) + e;
            }, t.formatRelativePath = function (t) {
                for (var e = t.split("/"), i = 0, n = e.length; i < n; i++) ".." == e[i] && (e.splice(i - 1, 2),
                    i -= 2);
                return e.join("/");
            }, t.isAbsolute = function (t) {
                return t.indexOf(":") > 0 || "/" == t.charAt(0);
            }, t.getPath = function (t) {
                var e = t.lastIndexOf("/");
                return e > 0 ? t.substr(0, e + 1) : "";
            }, t.getFileName = function (t) {
                var e = t.lastIndexOf("/");
                return e > 0 ? t.substr(e + 1) : t;
            }, t.version = {}, t.basePath = "", t.rootPath = "", t.customFormat = function (e) {
                var i = t.version[e];
                return !P.isConchApp && i && (e += "?v=" + i), e;
            }, t;
        }(), P = function () {
            function e(t, n) {
                function s(t) {
                    i.stage._loop(), O.window.requestAnimationFrame(s);
                }
                this._timeId = 0;
                var a = e._mainCanvas.source.style;
                a.position = "absolute", a.top = a.left = "0px", a.background = "#000000", e._mainCanvas.source.id = "layaCanvas";
                var r = laya.renders.Render.isWebGL;
                e._mainCanvas.source.width = t, e._mainCanvas.source.height = n, r && e.WebGL.init(e._mainCanvas, t, n),
                    O.onKGMiniGame || O.container.appendChild(e._mainCanvas.source), (e._context = new D(t, n, r ? null : e._mainCanvas)).ctx.setIsMainContext(),
                    O.window.requestAnimationFrame(s), i.stage.on("visibilitychange", this, this._onVisibilitychange);
            }
            s(e, "laya.renders.Render");
            var n = e.prototype;
            return n._onVisibilitychange = function () {
                i.stage.isVisibility ? 0 != this._timeId && O.window.clearInterval(this._timeId) : this._timeId = O.window.setInterval(this._enterFrame, 1e3);
            }, n._enterFrame = function (t) {
                i.stage._loop();
            }, a(1, e, "context", function () {
                return e._context;
            }), a(1, e, "canvas", function () {
                return e._mainCanvas.source;
            }), e._context = null, e._mainCanvas = null, e.WebGL = null, e.isConchNode = !1,
                e.isConchApp = !1, e.isConchWebGL = !1, e.isWebGL = !1, e.is3DMode = !1, e.optimizeTextureMemory = function (t, e) {
                    return !0;
                }, e.__init$ = function () {
                    t.ConchRenderType = t.ConchRenderType || 1, t.ConchRenderType |= t.conch ? 4 : 0,
                        e.isConchNode = 5 == (5 & t.ConchRenderType), e.isConchApp = 4 == (4 & t.ConchRenderType),
                        e.isConchWebGL = 6 == t.ConchRenderType;
                }, e;
        }(), D = function () {
            function t(e, i, n) {
                this.x = 0, this.y = 0, this._drawTexture = function (t, e, i) {
                    i[0].loaded && this.ctx.drawTexture(i[0], i[1], i[2], i[3], i[4], t, e);
                }, this._fillTexture = function (t, e, i) {
                    i[0].loaded && this.ctx.fillTexture(i[0], i[1] + t, i[2] + e, i[3], i[4], i[5], i[6], i[7]);
                }, this._drawTextureWithTransform = function (t, e, i) {
                    i[0].loaded && this.ctx.drawTextureWithTransform(i[0], i[1], i[2], i[3], i[4], i[5], t, e, i[6]);
                }, this._fillQuadrangle = function (t, e, i) {
                    this.ctx.fillQuadrangle(i[0], i[1], i[2], i[3], i[4]);
                }, this._drawRect = function (t, e, i) {
                    var n = this.ctx;
                    null != i[4] && (n.fillStyle = i[4], n.fillRect(t + i[0], e + i[1], i[2], i[3], null)),
                        null != i[5] && (n.strokeStyle = i[5], n.lineWidth = i[6], n.strokeRect(t + i[0], e + i[1], i[2], i[3], i[6]));
                }, this._drawPie = function (t, e, i) {
                    var n = this.ctx;
                    P.isWebGL && n.setPathId(i[8]), n.beginPath(), P.isWebGL ? (n.movePath(i[0] + t, i[1] + e),
                        n.moveTo(0, 0)) : n.moveTo(t + i[0], e + i[1]), n.arc(t + i[0], e + i[1], i[2], i[3], i[4]),
                        n.closePath(), this._fillAndStroke(i[5], i[6], i[7], !0);
                }, this._clipRect = function (t, e, i) {
                    this.ctx.clipRect(t + i[0], e + i[1], i[2], i[3]);
                }, this._fillRect = function (t, e, i) {
                    this.ctx.fillRect(t + i[0], e + i[1], i[2], i[3], i[4]);
                }, this._drawCircle = function (e, i, n) {
                    var s = this.ctx;
                    P.isWebGL && s.setPathId(n[6]), X.drawCall++, s.beginPath(), P.isWebGL && s.movePath(n[0] + e, n[1] + i),
                        s.arc(n[0] + e, n[1] + i, n[2], 0, t.PI2), s.closePath(), this._fillAndStroke(n[3], n[4], n[5], !0);
                }, this._fillCircle = function (e, i, n) {
                    X.drawCall++;
                    var s = this.ctx;
                    s.beginPath(), s.fillStyle = n[3], s.arc(n[0] + e, n[1] + i, n[2], 0, t.PI2), s.fill();
                }, this._setShader = function (t, e, i) {
                    this.ctx.setShader(i[0]);
                }, this._drawLine = function (t, e, i) {
                    var n = this.ctx;
                    P.isWebGL && n.setPathId(i[6]), n.beginPath(), n.strokeStyle = i[4], n.lineWidth = i[5],
                        P.isWebGL ? (n.movePath(t, e), n.moveTo(i[0], i[1]), n.lineTo(i[2], i[3])) : (n.moveTo(t + i[0], e + i[1]),
                            n.lineTo(t + i[2], e + i[3])), n.stroke();
                }, this._drawLines = function (t, e, i) {
                    var n = this.ctx;
                    P.isWebGL && n.setPathId(i[5]), n.beginPath(), t += i[0], e += i[1], P.isWebGL && n.movePath(t, e),
                        n.strokeStyle = i[3], n.lineWidth = i[4];
                    var s = i[2], a = 2, r = s.length;
                    if (P.isWebGL) for (n.moveTo(s[0], s[1]); a < r;) n.lineTo(s[a++], s[a++]); else for (n.moveTo(t + s[0], e + s[1]); a < r;) n.lineTo(t + s[a++], e + s[a++]);
                    n.stroke();
                }, this._drawLinesWebGL = function (t, e, i) {
                    this.ctx.drawLines(t + this.x + i[0], e + this.y + i[1], i[2], i[3], i[4]);
                }, this._drawCurves = function (t, e, i) {
                    this.ctx.drawCurves(t, e, i);
                }, this._draw = function (t, e, i) {
                    i[0].call(null, this, t, e);
                }, this._transformByMatrix = function (t, e, i) {
                    this.ctx.transformByMatrix(i[0]);
                }, this._setTransform = function (t, e, i) {
                    this.ctx.setTransform(i[0], i[1], i[2], i[3], i[4], i[5]);
                }, this._setTransformByMatrix = function (t, e, i) {
                    this.ctx.setTransformByMatrix(i[0]);
                }, this._save = function (t, e, i) {
                    this.ctx.save();
                }, this._restore = function (t, e, i) {
                    this.ctx.restore();
                }, this._translate = function (t, e, i) {
                    this.ctx.translate(i[0], i[1]);
                }, this._transform = function (t, e, i) {
                    this.ctx.translate(i[1] + t, i[2] + e);
                    var n = i[0];
                    this.ctx.transform(n.a, n.b, n.c, n.d, n.tx, n.ty), this.ctx.translate(-t - i[1], -e - i[2]);
                }, this._rotate = function (t, e, i) {
                    this.ctx.translate(i[1] + t, i[2] + e), this.ctx.rotate(i[0]), this.ctx.translate(-t - i[1], -e - i[2]);
                }, this._scale = function (t, e, i) {
                    this.ctx.translate(i[2] + t, i[3] + e), this.ctx.scale(i[0], i[1]), this.ctx.translate(-t - i[2], -e - i[3]);
                }, this._alpha = function (t, e, i) {
                    this.ctx.globalAlpha *= i[0];
                }, this._setAlpha = function (t, e, i) {
                    this.ctx.globalAlpha = i[0];
                }, this._fillText = function (t, e, i) {
                    this.ctx.fillText(i[0], i[1] + t, i[2] + e, i[3], i[4], i[5]);
                }, this._strokeText = function (t, e, i) {
                    this.ctx.strokeText(i[0], i[1] + t, i[2] + e, i[3], i[4], i[5], i[6]);
                }, this._fillBorderText = function (t, e, i) {
                    this.ctx.fillBorderText(i[0], i[1] + t, i[2] + e, i[3], i[4], i[5], i[6], i[7]);
                }, this._blendMode = function (t, e, i) {
                    this.ctx.globalCompositeOperation = i[0];
                }, this._beginClip = function (t, e, i) {
                    this.ctx.beginClip && this.ctx.beginClip(t + i[0], e + i[1], i[2], i[3]);
                }, this._setIBVB = function (t, e, i) {
                    this.ctx.setIBVB(i[0] + t, i[1] + e, i[2], i[3], i[4], i[5], i[6], i[7]);
                }, this._fillTrangles = function (t, e, i) {
                    this.ctx.fillTrangles(i[0], i[1] + t, i[2] + e, i[3], i[4]);
                }, this._drawPath = function (t, e, i) {
                    var n = this.ctx;
                    P.isWebGL && n.setPathId(-1), n.beginPath(), t += i[0], e += i[1], P.isWebGL && n.movePath(t, e);
                    for (var s = i[2], a = 0, r = s.length; a < r; a++) {
                        var o = s[a];
                        switch (o[0]) {
                            case "moveTo":
                                P.isWebGL ? n.moveTo(o[1], o[2]) : n.moveTo(t + o[1], e + o[2]);
                                break;

                            case "lineTo":
                                P.isWebGL ? n.lineTo(o[1], o[2]) : n.lineTo(t + o[1], e + o[2]);
                                break;

                            case "arcTo":
                                P.isWebGL ? n.arcTo(o[1], o[2], o[3], o[4], o[5]) : n.arcTo(t + o[1], e + o[2], t + o[3], e + o[4], o[5]);
                                break;

                            case "closePath":
                                n.closePath();
                        }
                    }
                    var h = i[3];
                    null != h && (n.fillStyle = h.fillStyle, n.fill());
                    var l = i[4];
                    null != l && (n.strokeStyle = l.strokeStyle, n.lineWidth = l.lineWidth || 1, n.lineJoin = l.lineJoin,
                        n.lineCap = l.lineCap, n.miterLimit = l.miterLimit, n.stroke());
                }, this.drawPoly = function (t, e, i) {
                    this.ctx.drawPoly(t + this.x + i[0], e + this.y + i[1], i[2], i[3], i[4], i[5], i[6]);
                }, this._drawPoly = function (t, e, i) {
                    var n = this.ctx, s = i[2], a = 2, r = s.length;
                    if (P.isWebGL) for (n.setPathId(i[6]), n.beginPath(), t += i[0], e += i[1], n.movePath(t, e),
                        n.moveTo(s[0], s[1]); a < r;) n.lineTo(s[a++], s[a++]); else for (n.beginPath(),
                            t += i[0], e += i[1], n.moveTo(t + s[0], e + s[1]); a < r;) n.lineTo(t + s[a++], e + s[a++]);
                    n.closePath(), this._fillAndStroke(i[3], i[4], i[5], i[7]);
                }, this._drawSkin = function (t, e, i) {
                    var n = i[0];
                    if (n) {
                        var s = this.ctx;
                        n.render(s, t, e);
                    }
                }, this._drawParticle = function (t, e, i) {
                    this.ctx.drawParticle(t + this.x, e + this.y, i[0]);
                }, this._setFilters = function (t, e, i) {
                    this.ctx.setFilters(i);
                }, n ? this.ctx = n.getContext("2d") : (n = yt.create("3D"), this.ctx = r.createWebGLContext2D(n),
                    n._setContext(this.ctx)), n.size(e, i), this.canvas = n;
            }
            s(t, "laya.renders.RenderContext");
            var e = t.prototype;
            return e.destroy = function () {
                this.canvas && (this.canvas.destroy(), this.canvas = null, this.ctx = null), this.ctx && (this.ctx.destroy(),
                    this.ctx = null);
            }, e.drawTexture = function (t, e, i, n, s) {
                t.loaded && this.ctx.drawTexture(t, e, i, n, s, this.x, this.y);
            }, e._drawTextures = function (t, e, i) {
                i[0].loaded && this.ctx.drawTextures(i[0], i[1], t + this.x, e + this.y);
            }, e.drawTextureWithTransform = function (t, e, i, n, s, a, r) {
                t.loaded && this.ctx.drawTextureWithTransform(t, e, i, n, s, a, this.x, this.y, r);
            }, e.fillQuadrangle = function (t, e, i, n, s) {
                this.ctx.fillQuadrangle(t, e, i, n, s);
            }, e.drawCanvas = function (t, e, i, n, s) {
                this.ctx.drawCanvas(t, e + this.x, i + this.y, n, s);
            }, e.drawRect = function (t, e, i, n, s, a) {
                void 0 === a && (a = 1);
                var r = this.ctx;
                r.strokeStyle = s, r.lineWidth = a, r.strokeRect(t + this.x, e + this.y, i, n, a);
            }, e._fillAndStroke = function (t, e, i, n) {
                void 0 === n && (n = !1);
                var s = this.ctx;
                null != t && (s.fillStyle = t, P.isWebGL ? s.fill(n) : s.fill()), null != e && i > 0 && (s.strokeStyle = e,
                    s.lineWidth = i, s.stroke());
            }, e.clipRect = function (t, e, i, n) {
                this.ctx.clipRect(t + this.x, e + this.y, i, n);
            }, e.fillRect = function (t, e, i, n, s) {
                this.ctx.fillRect(t + this.x, e + this.y, i, n, s);
            }, e.drawCircle = function (e, i, n, s, a) {
                void 0 === a && (a = 1), X.drawCall++;
                var r = this.ctx;
                r.beginPath(), r.strokeStyle = s, r.lineWidth = a, r.arc(e + this.x, i + this.y, n, 0, t.PI2),
                    r.stroke();
            }, e.drawTriangles = function (t, e, i) {
                if (P.isWebGL) this.ctx.drawTriangles(i[0], t + i[1], e + i[2], i[3], i[4], i[5], i[6], i[7], i[8], i[9]); else {
                    var n = i[5], s = 0, a = n.length, r = this.ctx;
                    for (s = 0; s < a; s += 3) {
                        var o = 2 * n[s], h = 2 * n[s + 1], l = 2 * n[s + 2];
                        r.drawTriangle(i[0], i[3], i[4], o, h, l, i[6], !0);
                    }
                }
            }, e.fillCircle = function (e, i, n, s) {
                X.drawCall++;
                var a = this.ctx;
                a.beginPath(), a.fillStyle = s, a.arc(e + this.x, i + this.y, n, 0, t.PI2), a.fill();
            }, e.setShader = function (t) {
                this.ctx.setShader(t);
            }, e.drawLine = function (t, e, i, n, s, a) {
                void 0 === a && (a = 1);
                var r = this.ctx;
                r.beginPath(), r.strokeStyle = s, r.lineWidth = a, r.moveTo(this.x + t, this.y + e),
                    r.lineTo(this.x + i, this.y + n), r.stroke();
            }, e.clear = function () {
                this.ctx.clear();
            }, e.transformByMatrix = function (t) {
                this.ctx.transformByMatrix(t);
            }, e.setTransform = function (t, e, i, n, s, a) {
                this.ctx.setTransform(t, e, i, n, s, a);
            }, e.setTransformByMatrix = function (t) {
                this.ctx.setTransformByMatrix(t);
            }, e.save = function () {
                this.ctx.save();
            }, e.restore = function () {
                this.ctx.restore();
            }, e.translate = function (t, e) {
                this.ctx.translate(t, e);
            }, e.transform = function (t, e, i, n, s, a) {
                this.ctx.transform(t, e, i, n, s, a);
            }, e.rotate = function (t) {
                this.ctx.rotate(t);
            }, e.scale = function (t, e) {
                this.ctx.scale(t, e);
            }, e.alpha = function (t) {
                this.ctx.globalAlpha *= t;
            }, e.setAlpha = function (t) {
                this.ctx.globalAlpha = t;
            }, e.fillWords = function (t, e, i, n, s, a) {
                void 0 === a && (a = 0), this.ctx.fillWords(t, e, i, n, s, a);
            }, e.fillBorderWords = function (t, e, i, n, s, a, r) {
                this.ctx.fillBorderWords(t, e, i, n, s, a, r);
            }, e.fillText = function (t, e, i, n, s, a) {
                this.ctx.fillText(t, e + this.x, i + this.y, n, s, a);
            }, e.strokeText = function (t, e, i, n, s, a, r) {
                this.ctx.strokeText(t, e + this.x, i + this.y, n, s, a, r);
            }, e.blendMode = function (t) {
                this.ctx.globalCompositeOperation = t;
            }, e.flush = function () {
                this.ctx.flush && this.ctx.flush();
            }, e.addRenderObject = function (t) {
                this.ctx.addRenderObject(t);
            }, e.beginClip = function (t, e, i, n) {
                this.ctx.beginClip && this.ctx.beginClip(t, e, i, n);
            }, e.endClip = function () {
                this.ctx.endClip && this.ctx.endClip();
            }, e.fillTrangles = function (t, e, i) {
                this.ctx.fillTrangles(i[0], i[1], i[2], i[3], i.length > 4 ? i[4] : null);
            }, t.PI2 = 2 * Math.PI, t;
        }(), k = function () {
            function t(e, i) {
                switch (this._next = i || t.NORENDER, e) {
                    case 0:
                        return void (this._fun = this._no);

                    case 1:
                        return void (this._fun = this._image);

                    case 2:
                        return void (this._fun = this._alpha);

                    case 4:
                        return void (this._fun = this._transform);

                    case 8:
                        return void (this._fun = this._blend);

                    case 16:
                        return void (this._fun = this._canvas);

                    case 64:
                        return void (this._fun = this._mask);

                    case 128:
                        return void (this._fun = this._clip);

                    case 256:
                        return void (this._fun = this._style);

                    case 512:
                        return void (this._fun = this._graphics);

                    case 2048:
                        return void (this._fun = this._childs);

                    case 1024:
                        return void (this._fun = this._custom);

                    case 513:
                    case 517:
                        return void (this._fun = this._image2);

                    case 32:
                        return void (this._fun = w._filter);

                    case 69905:
                        return void (this._fun = t._initRenderFun);
                }
                this.onCreate(e);
            }
            s(t, "laya.renders.RenderSprite");
            var e = t.prototype;
            return e.onCreate = function (t) { }, e._style = function (t, e, i, n) {
                t._style.render(t, e, i, n);
                var s = this._next;
                s._fun.call(s, t, e, i, n);
            }, e._no = function (t, e, i, n) { }, e._custom = function (t, e, i, n) {
                t.customRender(e, i, n);
                var s = t._style._tf;
                this._next._fun.call(this._next, t, e, i - s.translateX, n - s.translateY);
            }, e._clip = function (e, i, n, s) {
                var a = this._next;
                if (a != t.NORENDER) {
                    var r = e._style.scrollRect;
                    i.ctx.save(), i.ctx.clipRect(n, s, r.width, r.height), a._fun.call(a, e, i, n - r.x, s - r.y),
                        i.ctx.restore();
                }
            }, e._blend = function (t, e, i, n) {
                var s = t._style;
                s.blendMode && (e.ctx.globalCompositeOperation = s.blendMode);
                var a = this._next;
                a._fun.call(a, t, e, i, n), e.ctx.globalCompositeOperation = "source-over";
            }, e._mask = function (t, e, i, n) {
                var s = this._next;
                s._fun.call(s, t, e, i, n);
                var a = t.mask;
                a && (e.ctx.globalCompositeOperation = "destination-in", (a.numChildren > 0 || !a.graphics._isOnlyOne()) && (a.cacheAsBitmap = !0),
                    a.render(e, i - t.pivotX, n - t.pivotY)), e.ctx.globalCompositeOperation = "source-over";
            }, e._graphics = function (t, e, i, n) {
                var s = t._style._tf;
                t._graphics && t._graphics._render(t, e, i - s.translateX, n - s.translateY);
                var a = this._next;
                a._fun.call(a, t, e, i, n);
            }, e._image = function (t, e, i, n) {
                var s = t._style;
                e.ctx.drawTexture2(i, n, s._tf.translateX, s._tf.translateY, t.transform, s.alpha, s.blendMode, t._graphics._one);
            }, e._image2 = function (t, e, i, n) {
                var s = t._style._tf;
                e.ctx.drawTexture2(i, n, s.translateX, s.translateY, t.transform, 1, null, t._graphics._one);
            }, e._alpha = function (t, e, i, n) {
                var s;
                if ((s = t._style.alpha) > .01 || t._needRepaint()) {
                    var a = e.ctx.globalAlpha;
                    e.ctx.globalAlpha *= s;
                    var r = this._next;
                    r._fun.call(r, t, e, i, n), e.ctx.globalAlpha = a;
                }
            }, e._transform = function (e, i, n, s) {
                var a = e.transform, r = this._next;
                a && r != t.NORENDER ? (i.save(), i.transform(a.a, a.b, a.c, a.d, a.tx + n, a.ty + s),
                    r._fun.call(r, e, i, 0, 0), i.restore()) : r._fun.call(r, e, i, n, s);
            }, e._childs = function (t, e, i, n) {
                var s = t._style, a = s._tf;
                if (i = i - a.translateX + s.paddingLeft, n = n - a.translateY + s.paddingTop, s._calculation) {
                    var r = t._getWords();
                    if (r) {
                        var o = s;
                        o && (o.stroke ? e.fillBorderWords(r, i, n, o.font, o.color, o.strokeColor, o.stroke) : e.fillWords(r, i, n, o.font, o.color, "none" != o.textDecoration && o.underLine ? 1 : 0));
                    }
                }
                var h, l = t._childs, c = l.length;
                if (t.viewport || t.optimizeScrollRect && t._style.scrollRect) {
                    var u = t.viewport || t._style.scrollRect, d = u.x, _ = u.y, f = u.right, p = u.bottom, g = NaN, v = NaN;
                    for (m = 0; m < c; ++m) (h = l[m]).visible && (g = h._x) < f && g + h.width > d && (v = h._y) < p && v + h.height > _ && h.render(e, i, n);
                } else for (var m = 0; m < c; ++m) (h = l[m])._style.visible && h.render(e, i, n);
            }, e._canvas = function (t, e, i, n) {
                var s = t._$P.cacheCanvas;
                if (s) {
                    "bitmap" === s.type ? X.canvasBitmap++ : X.canvasNormal++;
                    var a = s.ctx;
                    if (t._needRepaint() || !a) this._canvas_repaint(t, e, i, n); else {
                        var r = s._cacheRec;
                        e.drawCanvas(a.canvas, i + r.x, n + r.y, r.width, r.height);
                    }
                } else this._next._fun.call(this._next, t, e, i, n);
            }, e._canvas_repaint = function (t, e, n, s) {
                var a = t._$P.cacheCanvas, r = this._next;
                if (a) {
                    var o, h, l, c, u = a.ctx, d = t._needRepaint() || !u, _ = a.type;
                    if ("bitmap" === _ ? X.canvasBitmap++ : X.canvasNormal++, d) {
                        a._cacheRec || (a._cacheRec = new S());
                        var f, p;
                        P.isWebGL && "bitmap" !== _ ? a._cacheRec.setTo(-t.pivotX, -t.pivotY, 1, 1) : ((c = t.getSelfBounds()).x = c.x - t.pivotX,
                            c.y = c.y - t.pivotY, c.x = c.x - 16, c.y = c.y - 16, c.width = c.width + 32, c.height = c.height + 32,
                            c.x = Math.floor(c.x + n) - n, c.y = Math.floor(c.y + s) - s, c.width = Math.floor(c.width),
                            c.height = Math.floor(c.height), a._cacheRec.copyFrom(c)), c = a._cacheRec;
                        var g = P.isWebGL ? 1 : O.pixelRatio * i.stage.clientScaleX, v = P.isWebGL ? 1 : O.pixelRatio * i.stage.clientScaleY;
                        if (!P.isWebGL) {
                            var m, y = 1, w = 1;
                            for (m = t; m && m != i.stage;) y *= m.scaleX, w *= m.scaleY, m = m.parent;
                            P.isWebGL ? (y < 1 && (g *= y), w < 1 && (v *= w)) : (y > 1 && (g *= y), w > 1 && (v *= w));
                        }
                        if (t.scrollRect) {
                            var x = t.scrollRect;
                            c.x -= x.x, c.y -= x.y;
                        }
                        if (f = c.width * g, p = c.height * v, h = c.x, l = c.y, P.isWebGL && "bitmap" === _ && (f > 2048 || p > 2048)) return console.warn("cache bitmap size larger than 2048,cache ignored"),
                            a.ctx && (Y.recover("RenderContext", a.ctx), a.ctx.canvas.size(0, 0), a.ctx = null),
                            void r._fun.call(r, t, e, n, s);
                        u || (u = a.ctx = Y.getItem("RenderContext") || new D(f, p, yt.create("AUTO"))),
                            u.ctx.sprite = t, (o = u.canvas).clear(), (o.width != f || o.height != p) && o.size(f, p),
                            "bitmap" === _ ? o.context.asBitmap = !0 : "normal" === _ && (o.context.asBitmap = !1);
                        var b;
                        if (1 != g || 1 != v) {
                            var L = u.ctx;
                            L.save(), L.scale(g, v), !P.isConchWebGL && P.isConchApp && (b = t._$P.cf) && L.setFilterMatrix && L.setFilterMatrix(b._mat, b._alpha),
                                r._fun.call(r, t, u, -h, -l), L.restore(), P.isConchApp && !P.isConchWebGL || t._applyFilters();
                        } else L = u.ctx, !P.isConchWebGL && P.isConchApp && (b = t._$P.cf) && L.setFilterMatrix && L.setFilterMatrix(b._mat, b._alpha),
                            r._fun.call(r, t, u, -h, -l), P.isConchApp && !P.isConchWebGL || t._applyFilters();
                        t._$P.staticCache && (a.reCache = !1), X.canvasReCache++;
                    } else h = (c = a._cacheRec).x, l = c.y, o = u.canvas;
                    e.drawCanvas(o, n + h, s + l, c.width, c.height);
                } else r._fun.call(r, t, u, n, s);
            }, t.__init__ = function () {
                var e, i = 0, n = 0;
                for (e = r.createRenderSprite(69905, null), n = t.renders.length = 4096, i = 0; i < n; i++) t.renders[i] = e;
                t.renders[0] = r.createRenderSprite(0, null), function (e, i) {
                    for (var n = 0, s = 0; s < e.length; s++) n |= e[s], t.renders[n] = i;
                }([1, 512, 4, 2], new t(1, null)), t.renders[513] = r.createRenderSprite(513, null),
                    t.renders[517] = new t(517, null);
            }, t._initRenderFun = function (e, i, n, s) {
                var a = e._renderType;
                (t.renders[a] = t._getTypeRender(a))._fun(e, i, n, s);
            }, t._getTypeRender = function (t) {
                for (var e = null, i = 2048; i > 1;) i & t && (e = r.createRenderSprite(i, e)),
                    i >>= 1;
                return e;
            }, t.IMAGE = 1, t.ALPHA = 2, t.TRANSFORM = 4, t.BLEND = 8, t.CANVAS = 16, t.FILTERS = 32,
                t.MASK = 64, t.CLIP = 128, t.STYLE = 256, t.GRAPHICS = 512, t.CUSTOM = 1024, t.CHILDS = 2048,
                t.INIT = 69905, t.renders = [], t.NORENDER = new t(0, null), t;
        }(), F = function () {
            function t() {
                this._repaint = !1;
            }
            s(t, "laya.resource.Context");
            var e = t.prototype;
            return e.replaceReset = function () {
                var e = 0, i = 0;
                i = t.replaceKeys.length;
                var n;
                for (e = 0; e < i; e++) n = t.replaceKeys[e], this[t.newKeys[e]] = this[n];
            }, e.replaceResotre = function () {
                this.__restore(), this.__reset();
            }, e.setIsMainContext = function () { }, e.drawTextures = function (t, e, i, n) {
                X.drawCall += e.length / 2;
                for (var s = t.width, a = t.height, r = 0, o = e.length; r < o; r += 2) this.drawTexture(t, e[r], e[r + 1], s, a, i, n);
            }, e.drawCanvas = function (t, e, i, n, s) {
                X.drawCall++, this.drawImage(t.source, e, i, n, s);
            }, e.fillRect = function (t, e, i, n, s) {
                X.drawCall++, s && (this.fillStyle = s), this.__fillRect(t, e, i, n);
            }, e.fillText = function (t, e, i, n, s, a) {
                X.drawCall++, arguments.length > 3 && null != n && (this.font = n, this.fillStyle = s,
                    this.textAlign = a, this.textBaseline = "top"), this.__fillText(t, e, i);
            }, e.fillBorderText = function (t, e, i, n, s, a, r, o) {
                X.drawCall++, this.font = n, this.fillStyle = s, this.textBaseline = "top", this.strokeStyle = a,
                    this.lineWidth = r, this.textAlign = o, this.__strokeText(t, e, i), this.__fillText(t, e, i);
            }, e.strokeText = function (t, e, i, n, s, a, r) {
                X.drawCall++, arguments.length > 3 && null != n && (this.font = n, this.strokeStyle = s,
                    this.lineWidth = a, this.textAlign = r, this.textBaseline = "top"), this.__strokeText(t, e, i);
            }, e.transformByMatrix = function (t) {
                this.transform(t.a, t.b, t.c, t.d, t.tx, t.ty);
            }, e.setTransformByMatrix = function (t) {
                this.setTransform(t.a, t.b, t.c, t.d, t.tx, t.ty);
            }, e.clipRect = function (t, e, i, n) {
                X.drawCall++, this.beginPath(), this.rect(t, e, i, n), this.clip();
            }, e.drawTexture = function (t, e, i, n, s, a, r) {
                X.drawCall++;
                var o = t.uv, h = t.bitmap.width, l = t.bitmap.height;
                this.drawImage(t.source, o[0] * h, o[1] * l, (o[2] - o[0]) * h, (o[5] - o[3]) * l, e + a, i + r, n, s);
            }, e.drawTextureWithTransform = function (t, e, i, n, s, a, r, o, h) {
                X.drawCall++;
                var l = t.uv, c = t.bitmap.width, u = t.bitmap.height;
                this.save(), 1 != h && (this.globalAlpha *= h), a ? (this.transform(a.a, a.b, a.c, a.d, a.tx + r, a.ty + o),
                    this.drawImage(t.source, l[0] * c, l[1] * u, (l[2] - l[0]) * c, (l[5] - l[3]) * u, e, i, n, s)) : this.drawImage(t.source, l[0] * c, l[1] * u, (l[2] - l[0]) * c, (l[5] - l[3]) * u, e + r, i + o, n, s),
                    this.restore();
            }, e.drawTexture2 = function (t, e, i, n, s, a, r, o) {
                var h = o[0];
                if (h.loaded && h.bitmap && h.source) {
                    X.drawCall++;
                    var l = 1 !== a;
                    if (l) {
                        var c = this.globalAlpha;
                        this.globalAlpha *= a;
                    }
                    var u = h.uv, d = h.bitmap.width, _ = h.bitmap.height;
                    s ? (this.save(), this.transform(s.a, s.b, s.c, s.d, s.tx + t, s.ty + e), this.drawImage(h.source, u[0] * d, u[1] * _, (u[2] - u[0]) * d, (u[5] - u[3]) * _, o[1] - i, o[2] - n, o[3], o[4]),
                        this.restore()) : this.drawImage(h.source, u[0] * d, u[1] * _, (u[2] - u[0]) * d, (u[5] - u[3]) * _, o[1] - i + t, o[2] - n + e, o[3], o[4]),
                        l && (this.globalAlpha = c);
                }
            }, e.fillTexture = function (t, e, i, n, s, a, r, o) {
                if (!o.pat) {
                    if (t.uv != lt.DEF_UV) {
                        var h = new yt("2D");
                        h.getContext("2d"), h.size(t.width, t.height), h.context.drawTexture(t, 0, 0, t.width, t.height, 0, 0),
                            t = new lt(h);
                    }
                    o.pat = this.createPattern(t.bitmap.source, a);
                }
                var l = e, c = i, u = 0, d = 0;
                r && (l += r.x % t.width, c += r.y % t.height, u -= r.x % t.width, d -= r.y % t.height),
                    this.translate(l, c), this.fillRect(u, d, n, s, o.pat), this.translate(-l, -c);
            }, e.drawTriangle = function (t, e, i, n, s, a, r, o) {
                var h = t.bitmap, l = h.source, c = t.width, u = t.height, d = h.width, _ = h.height, f = i[n] * d, p = i[s] * d, g = i[a] * d, v = i[n + 1] * _, m = i[s + 1] * _, y = i[a + 1] * _, w = e[n], x = e[s], b = e[a], L = e[n + 1], C = e[s + 1], M = e[a + 1];
                if (o) {
                    var T = (w + x + b) / 3, S = (L + C + M) / 3, A = w - T, I = L - S, E = Math.sqrt(A * A + I * I);
                    w = T + A / E * (E + 1), L = S + I / E * (E + 1), I = C - S, x = T + (A = x - T) / (E = Math.sqrt(A * A + I * I)) * (E + 1),
                        C = S + I / E * (E + 1), I = M - S, b = T + (A = b - T) / (E = Math.sqrt(A * A + I * I)) * (E + 1),
                        M = S + I / E * (E + 1);
                }
                this.save(), r && this.transform(r.a, r.b, r.c, r.d, r.tx, r.ty), this.beginPath(),
                    this.moveTo(w, L), this.lineTo(x, C), this.lineTo(b, M), this.closePath(), this.clip();
                var R = 1 / (f * m + v * g + p * y - m * g - v * p - f * y), P = w * m + v * b + x * y - m * b - v * x - w * y, D = f * x + w * g + p * b - x * g - w * p - f * b, k = f * m * b + v * x * g + w * p * y - w * m * g - v * p * b - f * x * y, F = L * m + v * M + C * y - m * M - v * C - L * y, B = f * C + L * g + p * M - C * g - L * p - f * M, O = f * m * M + v * C * g + L * p * y - L * m * g - v * p * M - f * C * y;
                this.transform(P * R, F * R, D * R, B * R, k * R, O * R), this.drawImage(l, t.uv[0] * d, t.uv[1] * _, c, u, t.uv[0] * d, t.uv[1] * _, c, u),
                    this.restore();
            }, e.flush = function () {
                return 0;
            }, e.fillWords = function (t, e, i, n, s, a) {
                n && (this.font = n), s && (this.fillStyle = s);
                this.textBaseline = "top", this.textAlign = "left";
                for (var r = 0, o = t.length; r < o; r++) {
                    var h = t[r];
                    if (this.__fillText(h.char, h.x + e, h.y + i), 1 === a) {
                        var l = h.height, c = .5 * h.style.letterSpacing;
                        c || (c = 0), this.beginPath(), this.strokeStyle = s, this.lineWidth = 1, this.moveTo(e + h.x - c + .5, i + h.y + l + .5),
                            this.lineTo(e + h.x + h.width + c + .5, i + h.y + l + .5), this.stroke();
                    }
                }
            }, e.fillBorderWords = function (t, e, i, n, s, a, r) {
                n && (this.font = n), s && (this.fillStyle = s), this.textBaseline = "top", this.lineWidth = r,
                    this.textAlign = "left", this.strokeStyle = a;
                for (var o = 0, h = t.length; o < h; o++) {
                    var l = t[o];
                    this.__strokeText(l.char, l.x + e, l.y + i), this.__fillText(l.char, l.x + e, l.y + i);
                }
            }, e.destroy = function () {
                this.canvas.width = this.canvas.height = 0;
            }, e.clear = function () {
                this.clearRect(0, 0, this._canvas.width, this._canvas.height), this._repaint = !1;
            }, e.drawCurves = function (t, e, i) {
                this.beginPath(), this.strokeStyle = i[3], this.lineWidth = i[4];
                var n = i[2];
                t += i[0], e += i[1], this.moveTo(t + n[0], e + n[1]);
                for (var s = 2, a = n.length; s < a;) this.quadraticCurveTo(t + n[s++], e + n[s++], t + n[s++], e + n[s++]);
                this.stroke();
            }, t.__init__ = function (t) {
                var e = laya.resource.Context.prototype;
                if (!(t = t || CanvasRenderingContext2D.prototype).inited) {
                    t.inited = !0, t.__fillText = t.fillText, t.__fillRect = t.fillRect, t.__strokeText = t.strokeText;
                    ["drawTextures", "drawTriangle", "fillWords", "fillBorderWords", "setIsMainContext", "fillRect", "strokeText", "fillTexture", "fillText", "transformByMatrix", "setTransformByMatrix", "clipRect", "drawTexture", "drawTexture2", "drawTextureWithTransform", "flush", "clear", "destroy", "drawCanvas", "fillBorderText", "drawCurves"].forEach(function (i) {
                        t[i] = e[i];
                    });
                }
            }, t.replaceCanvasGetSet = function (t, e) {
                var i = Object.getOwnPropertyDescriptor(t, e);
                if (!i || !i.configurable) return !1;
                var n, s = {};
                for (n in i) "set" != n && (s[n] = i[n]);
                var a = i.set;
                return s.set = function (t) {
                    a.call(this, t);
                    var e = this.getContext("2d");
                    e && "__reset" in e && e.__reset();
                }, Object.defineProperty(t, e, s), !0;
            }, t.replaceGetSet = function (e, i) {
                var n = Object.getOwnPropertyDescriptor(e, i);
                if (!n || !n.configurable) return !1;
                var s, a = {};
                for (s in n) "set" != s && (a[s] = n[s]);
                var r = n.set, o = "___" + i + "__";
                return t.newKeys.push(o), a.set = function (t) {
                    t != this[o] && (this[o] = t, r.call(this, t));
                }, Object.defineProperty(e, i, a), !0;
            }, t._default = new t(), t.newKeys = [], n(t, ["replaceKeys", function () {
                return this.replaceKeys = ["font", "fillStyle", "textBaseline"];
            }]), t;
        }(), B = function () {
            function t(e) {
                this._id = 0, this._name = null, this._resources = null, this._memorySize = 0, this._garbageCollectionRate = NaN,
                    this._isOverflow = !1, this.autoRelease = !1, this.autoReleaseMaxSize = 0, this._id = ++t._uniqueIDCounter,
                    this._name = e || "Content Manager", t._isResourceManagersSorted = !1, this._memorySize = 0,
                    this._isOverflow = !1, this.autoRelease = !1, this.autoReleaseMaxSize = 536870912,
                    this._garbageCollectionRate = .2, t._resourceManagers.push(this), this._resources = [];
            }
            s(t, "laya.resource.ResourceManager");
            var e = t.prototype;
            return i.imps(e, {
                "laya.resource.IDispose": !0
            }), e.getResourceByIndex = function (t) {
                return this._resources[t];
            }, e.getResourcesLength = function () {
                return this._resources.length;
            }, e.addResource = function (t) {
                t.resourceManager && t.resourceManager.removeResource(t);
                return -1 === this._resources.indexOf(t) && (t._resourceManager = this, this._resources.push(t),
                    this.addSize(t.memorySize), !0);
            }, e.removeResource = function (t) {
                var e = this._resources.indexOf(t);
                return -1 !== e && (this._resources.splice(e, 1), t._resourceManager = null, this._memorySize -= t.memorySize,
                    !0);
            }, e.unload = function () {
                for (var t = this._resources.slice(0, this._resources.length), e = 0; e < t.length; e++) {
                    t[e].destroy();
                }
                t.length = 0;
            }, e.dispose = function () {
                if (this === t._systemResourceManager) throw new Error("systemResourceManager不能被释放！");
                t._resourceManagers.splice(t._resourceManagers.indexOf(this), 1), t._isResourceManagersSorted = !1;
                for (var e = this._resources.slice(0, this._resources.length), i = 0; i < e.length; i++) {
                    var n = e[i];
                    n.resourceManager.removeResource(n), n.destroy();
                }
                e.length = 0;
            }, e.addSize = function (t) {
                t && (this.autoRelease && t > 0 && this._memorySize + t > this.autoReleaseMaxSize && this.garbageCollection((1 - this._garbageCollectionRate) * this.autoReleaseMaxSize),
                    this._memorySize += t);
            }, e.garbageCollection = function (t) {
                var e = this._resources;
                (e = e.slice()).sort(function (t, e) {
                    if (!t || !e) throw new Error("a或b不能为空！");
                    return t.released && e.released ? 0 : t.released ? 1 : e.released ? -1 : t._lastUseFrameCount - e._lastUseFrameCount;
                });
                for (var i = X.loopCount, n = 0, s = e.length; n < s; n++) {
                    var a = e[n];
                    if (!(i - a._lastUseFrameCount > 1)) return void (this._memorySize >= t && (this._isOverflow = !0));
                    if (a.releaseResource(), this._memorySize < t) return void (this._isOverflow = !1);
                }
            }, a(0, e, "id", function () {
                return this._id;
            }), a(0, e, "name", function () {
                return this._name;
            }, function (e) {
                !e && "" === e || this._name === e || (this._name = e, t._isResourceManagersSorted = !1);
            }), a(0, e, "memorySize", function () {
                return this._memorySize;
            }), a(1, t, "systemResourceManager", function () {
                return t._systemResourceManager;
            }), t.__init__ = function () {
                t.currentResourceManager = t.systemResourceManager;
            }, t.getLoadedResourceManagerByIndex = function (e) {
                return t._resourceManagers[e];
            }, t.getLoadedResourceManagersCount = function () {
                return t._resourceManagers.length;
            }, t.recreateContentManagers = function (e) {
                void 0 === e && (e = !1);
                for (var i = t.currentResourceManager, n = 0; n < t._resourceManagers.length; n++) {
                    t.currentResourceManager = t._resourceManagers[n];
                    for (var s = 0; s < t.currentResourceManager._resources.length; s++) t.currentResourceManager._resources[s].releaseResource(e),
                        t.currentResourceManager._resources[s].activeResource(e);
                }
                t.currentResourceManager = i;
            }, t.releaseContentManagers = function (e) {
                void 0 === e && (e = !1);
                for (var i = t.currentResourceManager, n = 0; n < t._resourceManagers.length; n++) {
                    t.currentResourceManager = t._resourceManagers[n];
                    for (var s = 0; s < t.currentResourceManager._resources.length; s++) {
                        var a = t.currentResourceManager._resources[s];
                        !a.released && a.releaseResource(e);
                    }
                }
                t.currentResourceManager = i;
            }, t._uniqueIDCounter = 0, t._isResourceManagersSorted = !1, t._resourceManagers = [],
                n(t, ["_systemResourceManager", function () {
                    return this._systemResourceManager = new t("System Resource Manager");
                }, "currentResourceManager", function () {
                    return this.currentResourceManager = t._systemResourceManager;
                }]), t;
        }(), O = (function () {
            function t() { }
            s(t, "laya.system.System"), t.changeDefinition = function (t, e) {
                i[t] = e;
                var n = t + "=classObj";
                i._runScript(n);
            }, t.__init__ = function () {
                P.isConchApp && (conch.disableConchResManager(), conch.disableConchAutoRestoreLostedDevice());
            };
        }(), function () {
            function n() { }
            return s(n, "laya.utils.Browser"), a(1, n, "pixelRatio", function () {
                return n.__init__(), n.userAgent.indexOf("Mozilla/6.0(Linux; Android 6.0; HUAWEI NXT-AL10 Build/HUAWEINXT-AL10)") > -1 ? 2 : r.getPixelRatio();
            }), a(1, n, "height", function () {
                return n.__init__(), (i.stage && i.stage.canvasRotation ? n.clientWidth : n.clientHeight) * n.pixelRatio;
            }), a(1, n, "clientWidth", function () {
                return n.__init__(), n.window.innerWidth || n.document.body.clientWidth;
            }), a(1, n, "window", function () {
                return n.__init__(), n._window;
            }), a(1, n, "clientHeight", function () {
                return n.__init__(), n.window.innerHeight || n.document.body.clientHeight || n.document.documentElement.clientHeight;
            }), a(1, n, "width", function () {
                return n.__init__(), (i.stage && i.stage.canvasRotation ? n.clientHeight : n.clientWidth) * n.pixelRatio;
            }), a(1, n, "container", function () {
                return n.__init__(), n._container || ((n._container = n.createElement("div")).id = "layaContainer",
                    n.document.body.appendChild(n._container)), n._container;
            }, function (t) {
                n._container = t;
            }), a(1, n, "document", function () {
                return n.__init__(), n._document;
            }), n.__init__ = function () {
                if (!n._window) {
                    n._window = r.getWindow(), n._document = n.window.document, n._window.addEventListener("message", function (t) {
                        laya.utils.Browser._onMessage(t);
                    }, !1), n.document.__createElement = n.document.createElement, t.requestAnimationFrame = t.requestAnimationFrame || t.webkitRequestAnimationFrame || t.mozRequestAnimationFrame || t.oRequestAnimationFrame || t.msRequestAnimationFrame || function (e) {
                        return t.setTimeout(e, 1e3 / 60);
                    };
                    var i = t.document.body.style;
                    i["-webkit-user-select"] = "none", i["-webkit-tap-highlight-color"] = "rgba(200,200,200,0)",
                        n.userAgent = n.window.navigator.userAgent, n.onIOS = !!(n.u = n.userAgent).match(/\(i[^;]+;(U;)? CPU.+Mac OS X/),
                        n.onMobile = n.u.indexOf("Mobile") > -1, n.onIPhone = n.u.indexOf("iPhone") > -1,
                        n.onMac = n.u.indexOf("Mac OS X") > -1, n.onIPad = n.u.indexOf("iPad") > -1, n.onAndroid = n.u.indexOf("Android") > -1 || n.u.indexOf("Adr") > -1,
                        n.onWP = n.u.indexOf("Windows Phone") > -1, n.onQQBrowser = n.u.indexOf("QQBrowser") > -1,
                        n.onMQQBrowser = n.u.indexOf("MQQBrowser") > -1 || n.u.indexOf("Mobile") > -1 && n.u.indexOf("QQ") > -1,
                        n.onIE = !!n.window.ActiveXObject || "ActiveXObject" in n.window, n.onWeiXin = n.u.indexOf("MicroMessenger") > -1,
                        n.onPC = !n.onMobile, n.onSafari = n.u.indexOf("Safari") > -1, n.onFirefox = n.u.indexOf("Firefox") > -1,
                        n.onEdge = n.u.indexOf("Edge") > -1, n.onMiniGame = n.u.indexOf("MiniGame") > -1,
                        n.onTTMiniGame = n.u.indexOf("TTGame") > -1, n.onBDMiniGame = n.u.indexOf("SwanGame") > -1,
                        n.u.indexOf("OPPO") > -1 && n.u.indexOf("MiniGame") > -1 && (n.onQGMiniGame = !0,
                            n.onMiniGame = !1), laya.utils.Browser.window.hasOwnProperty("bl") && n.u.indexOf("MiniGame") > -1 && (n.onBLMiniGame = !0,
                                n.onMiniGame = !1), laya.utils.Browser.window.hasOwnProperty("qq") && n.u.indexOf("MiniGame") > -1 && (n.onQQMiniGame = !0,
                                    n.onMiniGame = !1), n.u.indexOf("VVGame") > -1 && (n.onVVMiniGame = !0), n.onKGMiniGame = n.u.indexOf("QuickGame") > -1,
                        n.onLimixiu = n.u.indexOf("limixiu") > -1, n.onIPhoneX = /iPhone/gi.test(n.window.navigator.userAgent) && 375 == Math.min(n.clientHeight, n.clientWidth) && 812 == Math.max(n.clientHeight, n.clientWidth),
                        n.httpProtocol = "http:" == n.window.location.protocol, n.u.indexOf("AlipayMiniGame") > -1 && (n.onAlipayMiniGame = !0,
                            n.onMiniGame = !1), n.onMiniGame && null == n.window.focus && console.error("请先初始化小游戏适配库，详细教程https://ldc.layabox.com/doc/?nav=zh-ts-5-0-0"),
                        n.webAudioEnabled = !!(n.window.AudioContext || n.window.webkitAudioContext || n.window.mozAudioContext),
                        n.soundType = n.webAudioEnabled ? "WEBAUDIOSOUND" : "AUDIOSOUND", nt = n.webAudioEnabled ? st : et,
                        n.webAudioEnabled && st.initWebAudio(), et._initMusicAudio(), n.enableTouch = "ontouchstart" in t || t.DocumentTouch && e instanceof DocumentTouch,
                        t.focus(), A._soundClass = nt, A._musicClass = et, P._mainCanvas = P._mainCanvas || yt.create("2D"),
                        n.canvas || (n.canvas = yt.create("2D"), n.context = n.canvas.getContext("2d"));
                }
            }, n._onMessage = function (t) {
                if (t.data && "size" == t.data.name) {
                    if (n.window.innerWidth = t.data.width, n.window.innerHeight = t.data.height, n.window.__innerHeight = t.data.clientHeight,
                        !n.document.createEvent) return void console.warn("no document.createEvent");
                    var e = n.document.createEvent("HTMLEvents");
                    return e.initEvent("resize", !1, !1), void n.window.dispatchEvent(e);
                }
            }, n.createElement = function (t) {
                return n.__init__(), n.document.__createElement(t);
            }, n.getElementById = function (t) {
                return n.__init__(), n.document.getElementById(t);
            }, n.removeElement = function (t) {
                t && t.parentNode && t.parentNode.removeChild(t);
            }, n.now = function () {
                return r.now();
            }, n._window = null, n._document = null, n._container = null, n.userAgent = null,
                n.u = null, n.onIOS = !1, n.onMac = !1, n.onMobile = !1, n.onIPhone = !1, n.onIPad = !1,
                n.onAndroid = !1, n.onWP = !1, n.onQQBrowser = !1, n.onMQQBrowser = !1, n.onSafari = !1,
                n.onFirefox = !1, n.onEdge = !1, n.onIE = !1, n.onWeiXin = !1, n.onMiniGame = !1,
                n.onTTMiniGame = !1, n.onBDMiniGame = !1, n.onKGMiniGame = !1, n.onQGMiniGame = !1,
                n.onVVMiniGame = !1, n.onQQMiniGame = !1, n.onLimixiu = !1, n.onBLMiniGame = !1,
                n.onAlipayMiniGame = !1, n.onPC = !1, n.httpProtocol = !1, n.webAudioEnabled = !1,
                n.soundType = null, n.enableTouch = !1, n.canvas = null, n.context = null, n.onIPhoneX = !1,
                n.__init$ = function () { }, n;
        }()), N = function () {
            function t(t) {
                this._xd_ = !0, this._allocated_ = 8, this._pos_ = 0, this._length = 0, t ? (this._u8d_ = new Uint8Array(t),
                    this._d_ = new DataView(this._u8d_.buffer), this._length = this._d_.byteLength) : this.___resizeBuffer(this._allocated_);
            }
            s(t, "laya.utils.Byte");
            var e = t.prototype;
            return e.___resizeBuffer = function (t) {
                try {
                    var e = new Uint8Array(t);
                    null != this._u8d_ && (this._u8d_.length <= t ? e.set(this._u8d_) : e.set(this._u8d_.subarray(0, t))),
                        this._u8d_ = e, this._d_ = new DataView(e.buffer);
                } catch (e) {
                    throw "___resizeBuffer err:" + t;
                }
            }, e.getString = function () {
                return this.rUTF(this.getUint16());
            }, e.getFloat32Array = function (t, e) {
                var i = t + e;
                i = i > this._length ? this._length : i;
                var n = new Float32Array(this._d_.buffer.slice(t, i));
                return this._pos_ = i, n;
            }, e.getUint8Array = function (t, e) {
                var i = t + e;
                i = i > this._length ? this._length : i;
                var n = new Uint8Array(this._d_.buffer.slice(t, i));
                return this._pos_ = i, n;
            }, e.getInt16Array = function (t, e) {
                var i = t + e;
                i = i > this._length ? this._length : i;
                var n = new Int16Array(this._d_.buffer.slice(t, i));
                return this._pos_ = i, n;
            }, e.getFloat32 = function () {
                if (this._pos_ + 4 > this._length) throw "getFloat32 error - Out of bounds";
                var t = this._d_.getFloat32(this._pos_, this._xd_);
                return this._pos_ += 4, t;
            }, e.getFloat64 = function () {
                if (this._pos_ + 8 > this._length) throw "getFloat64 error - Out of bounds";
                var t = this._d_.getFloat64(this._pos_, this._xd_);
                return this._pos_ += 8, t;
            }, e.writeFloat32 = function (t) {
                this.ensureWrite(this._pos_ + 4), this._d_.setFloat32(this._pos_, t, this._xd_),
                    this._pos_ += 4;
            }, e.writeFloat64 = function (t) {
                this.ensureWrite(this._pos_ + 8), this._d_.setFloat64(this._pos_, t, this._xd_),
                    this._pos_ += 8;
            }, e.getInt32 = function () {
                if (this._pos_ + 4 > this._length) throw "getInt32 error - Out of bounds";
                var t = this._d_.getInt32(this._pos_, this._xd_);
                return this._pos_ += 4, t;
            }, e.getUint32 = function () {
                if (this._pos_ + 4 > this._length) throw "getUint32 error - Out of bounds";
                var t = this._d_.getUint32(this._pos_, this._xd_);
                return this._pos_ += 4, t;
            }, e.writeInt32 = function (t) {
                this.ensureWrite(this._pos_ + 4), this._d_.setInt32(this._pos_, t, this._xd_), this._pos_ += 4;
            }, e.writeUint32 = function (t) {
                this.ensureWrite(this._pos_ + 4), this._d_.setUint32(this._pos_, t, this._xd_),
                    this._pos_ += 4;
            }, e.getInt16 = function () {
                if (this._pos_ + 2 > this._length) throw "getInt16 error - Out of bounds";
                var t = this._d_.getInt16(this._pos_, this._xd_);
                return this._pos_ += 2, t;
            }, e.getUint16 = function () {
                if (this._pos_ + 2 > this._length) throw "getUint16 error - Out of bounds";
                var t = this._d_.getUint16(this._pos_, this._xd_);
                return this._pos_ += 2, t;
            }, e.writeUint16 = function (t) {
                this.ensureWrite(this._pos_ + 2), this._d_.setUint16(this._pos_, t, this._xd_),
                    this._pos_ += 2;
            }, e.writeInt16 = function (t) {
                this.ensureWrite(this._pos_ + 2), this._d_.setInt16(this._pos_, t, this._xd_), this._pos_ += 2;
            }, e.getUint8 = function () {
                if (this._pos_ + 1 > this._length) throw "getUint8 error - Out of bounds";
                return this._d_.getUint8(this._pos_++);
            }, e.writeUint8 = function (t) {
                this.ensureWrite(this._pos_ + 1), this._d_.setUint8(this._pos_, t), this._pos_++;
            }, e._getUInt8 = function (t) {
                return this._d_.getUint8(t);
            }, e._getUint16 = function (t) {
                return this._d_.getUint16(t, this._xd_);
            }, e._getMatrix = function () {
                return new M(this.getFloat32(), this.getFloat32(), this.getFloat32(), this.getFloat32(), this.getFloat32(), this.getFloat32());
            }, e.rUTF = function (t) {
                for (var e = "", i = this._pos_ + t, n = 0, s = String.fromCharCode, a = this._u8d_; this._pos_ < i;) (n = a[this._pos_++]) < 128 ? 0 != n && (e += s(n)) : e += s(n < 224 ? (63 & n) << 6 | 127 & a[this._pos_++] : n < 240 ? (31 & n) << 12 | (127 & a[this._pos_++]) << 6 | 127 & a[this._pos_++] : (15 & n) << 18 | (127 & a[this._pos_++]) << 12 | a[this._pos_++] << 6 & 127 | 127 & a[this._pos_++]),
                    0;
                return e;
            }, e.getCustomString = function (t) {
                for (var e = "", i = 0, n = 0, s = String.fromCharCode, a = this._u8d_; t > 0;) if ((n = a[this._pos_]) < 128) e += s(n),
                    this._pos_++, t--; else for (i = n - 128, this._pos_++, t -= i; i > 0;) n = a[this._pos_++],
                        e += s(a[this._pos_++] << 8 | n), i--;
                return e;
            }, e.clear = function () {
                this._pos_ = 0, this.length = 0;
            }, e.__getBuffer = function () {
                return this._d_.buffer;
            }, e.writeUTFBytes = function (t) {
                for (var e = 0, i = (t += "").length; e < i; e++) {
                    var n = t.charCodeAt(e);
                    n <= 127 ? this.writeByte(n) : n <= 2047 ? (this.ensureWrite(this._pos_ + 2), this._u8d_.set([192 | n >> 6, 128 | 63 & n], this._pos_),
                        this._pos_ += 2) : n <= 65535 ? (this.ensureWrite(this._pos_ + 3), this._u8d_.set([224 | n >> 12, 128 | n >> 6 & 63, 128 | 63 & n], this._pos_),
                            this._pos_ += 3) : (this.ensureWrite(this._pos_ + 4), this._u8d_.set([240 | n >> 18, 128 | n >> 12 & 63, 128 | n >> 6 & 63, 128 | 63 & n], this._pos_),
                                this._pos_ += 4);
                }
            }, e.writeUTFString = function (t) {
                var e = this.pos;
                this.writeUint16(1), this.writeUTFBytes(t);
                var i = this.pos - e - 2;
                if (i >= 65536) throw "writeUTFString byte len more than 65536";
                this._d_.setUint16(e, i, this._xd_);
            }, e.readUTFString = function () {
                return this.readUTFBytes(this.getUint16());
            }, e.getUTFString = function () {
                return this.readUTFString();
            }, e.readUTFBytes = function (t) {
                if (void 0 === t && (t = -1), 0 == t) return "";
                var e = this.bytesAvailable;
                if (t > e) throw "readUTFBytes error - Out of bounds";
                return t = t > 0 ? t : e, this.rUTF(t);
            }, e.getUTFBytes = function (t) {
                return void 0 === t && (t = -1), this.readUTFBytes(t);
            }, e.writeByte = function (t) {
                this.ensureWrite(this._pos_ + 1), this._d_.setInt8(this._pos_, t), this._pos_ += 1;
            }, e.readByte = function () {
                if (this._pos_ + 1 > this._length) throw "readByte error - Out of bounds";
                return this._d_.getInt8(this._pos_++);
            }, e.getByte = function () {
                return this.readByte();
            }, e.ensureWrite = function (t) {
                this._length < t && (this._length = t), this._allocated_ < t && (this.length = t);
            }, e.writeArrayBuffer = function (t, e, i) {
                if (void 0 === e && (e = 0), void 0 === i && (i = 0), e < 0 || i < 0) throw "writeArrayBuffer error - Out of bounds";
                0 == i && (i = t.byteLength - e), this.ensureWrite(this._pos_ + i);
                var n = new Uint8Array(t);
                this._u8d_.set(n.subarray(e, e + i), this._pos_), this._pos_ += i;
            }, e.readArrayBuffer = function (t) {
                var e;
                return e = this._u8d_.buffer.slice(this._pos_, this._pos_ + t), this._pos_ = this._pos_ + t,
                    e;
            }, a(0, e, "buffer", function () {
                var t = this._d_.buffer;
                return t.byteLength == this.length ? t : t.slice(0, this.length);
            }), a(0, e, "endian", function () {
                return this._xd_ ? "littleEndian" : "bigEndian";
            }, function (t) {
                this._xd_ = "littleEndian" == t;
            }), a(0, e, "length", function () {
                return this._length;
            }, function (t) {
                this._allocated_ < t ? this.___resizeBuffer(this._allocated_ = Math.floor(Math.max(t, 2 * this._allocated_))) : this._allocated_ > t && this.___resizeBuffer(this._allocated_ = t),
                    this._length = t;
            }), a(0, e, "pos", function () {
                return this._pos_;
            }, function (t) {
                this._pos_ = t;
            }), a(0, e, "bytesAvailable", function () {
                return this._length - this._pos_;
            }), t.getSystemEndian = function () {
                if (!t._sysEndian) {
                    var e = new ArrayBuffer(2);
                    new DataView(e).setInt16(0, 256, !0), t._sysEndian = 256 === new Int16Array(e)[0] ? "littleEndian" : "bigEndian";
                }
                return t._sysEndian;
            }, t.BIG_ENDIAN = "bigEndian", t.LITTLE_ENDIAN = "littleEndian", t._sysEndian = null,
                t;
        }(), G = function () {
            function t() { }
            return s(t, "laya.utils.CacheManager"), t.regCacheByFunction = function (e, i) {
                t.unRegCacheByFunction(e, i);
                var n;
                n = {
                    tryDispose: e,
                    getCacheList: i
                }, t._cacheList.push(n);
            }, t.unRegCacheByFunction = function (e, i) {
                var n = 0, s = 0;
                for (s = t._cacheList.length, n = 0; n < s; n++) if (t._cacheList[n].tryDispose == e && t._cacheList[n].getCacheList == i) return void t._cacheList.splice(n, 1);
            }, t.forceDispose = function () {
                var e = 0, i = t._cacheList.length;
                for (e = 0; e < i; e++) t._cacheList[e].tryDispose(!0);
            }, t.beginCheck = function (e) {
                void 0 === e && (e = 15e3), i.timer.loop(e, null, t._checkLoop);
            }, t.stopCheck = function () {
                i.timer.clear(null, t._checkLoop);
            }, t._checkLoop = function () {
                var e = t._cacheList;
                if (!(e.length < 1)) {
                    var i = O.now(), n = 0, s = 0;
                    for (s = n = e.length; n > 0 && (t._index++, t._index = t._index % s, e[t._index].tryDispose(!1),
                        !(O.now() - i > t.loopTimeLimit));) n--;
                }
            }, t.loopTimeLimit = 2, t._cacheList = [], t._index = 0, t;
        }(), H = function () {
            function t() { }
            return s(t, "laya.utils.ClassUtils"), t.regClass = function (e, i) {
                t._classMap[e] = i;
            }, t.getRegClass = function (e) {
                return t._classMap[e];
            }, t.getInstance = function (e) {
                var i = t.getClass(e);
                return i ? new i() : (console.warn("[error] Undefined class:", e), null);
            }, t.createByJson = function (e, i, n, s, a) {
                "string" == typeof e && (e = JSON.parse(e));
                var r = e.props;
                if (!i && !(i = a ? a.runWith(e) : t.getInstance(r.runtime || e.type))) return null;
                var o = e.child;
                if (o) for (var h = 0, l = o.length; h < l; h++) {
                    var c = o[h];
                    if ("render" !== c.props.name && "render" !== c.props.renderType || !i._$set_itemRender) if ("Graphic" == c.type) t.addGraphicsToSprite(c, i); else if (t.isDrawType(c.type)) t.addGraphicToSprite(c, i, !0); else {
                        var u = t.createByJson(c, null, n, s, a);
                        "Script" == c.type ? u.hasOwnProperty("owner") ? u.owner = i : u.hasOwnProperty("target") && (u.target = i) : "mask" == c.props.renderType ? i.mask = u : i.addChild(u);
                    } else i.itemRender = c;
                }
                if (r) for (var d in r) {
                    var _ = r[d];
                    "var" === d && n ? n[_] = i : _ instanceof Array && "function" == typeof i[d] ? i[d].apply(i, _) : i[d] = _;
                }
                return s && e.customProps && s.runWith([i, e]), i.created && i.created(), i;
            }, t.addGraphicsToSprite = function (e, i) {
                var n;
                if ((n = e.child) && !(n.length < 1)) {
                    var s;
                    s = t._getGraphicsFromSprite(e, i);
                    var a = 0, r = 0;
                    e.props && (a = t._getObjVar(e.props, "x", 0), r = t._getObjVar(e.props, "y", 0)),
                        0 != a && 0 != r && s.translate(a, r);
                    var o = 0, h = 0;
                    for (h = n.length, o = 0; o < h; o++) t._addGraphicToGraphics(n[o], s);
                    0 != a && 0 != r && s.translate(-a, -r);
                }
            }, t.addGraphicToSprite = function (e, i, n) {
                void 0 === n && (n = !1);
                var s;
                s = n ? t._getGraphicsFromSprite(e, i) : i.graphics, t._addGraphicToGraphics(e, s);
            }, t._getGraphicsFromSprite = function (t, e) {
                var i;
                if (!t || !t.props) return e.graphics;
                var n;
                switch (n = t.props.renderType) {
                    case "hit":
                    case "unHit":
                        var s;
                        e.hitArea || (e.hitArea = new W()), (s = e.hitArea)[n] || (s[n] = new f()), i = s[n];
                }
                return i || (i = e.graphics), i;
            }, t._getTransformData = function (e) {
                var i;
                (e.hasOwnProperty("pivotX") || e.hasOwnProperty("pivotY")) && (i = i || new M()).translate(-t._getObjVar(e, "pivotX", 0), -t._getObjVar(e, "pivotY", 0));
                var n = t._getObjVar(e, "scaleX", 1), s = t._getObjVar(e, "scaleY", 1), a = t._getObjVar(e, "rotation", 0);
                t._getObjVar(e, "skewX", 0), t._getObjVar(e, "skewY", 0);
                return 1 == n && 1 == s && 0 == a || ((i = i || new M()).scale(n, s), i.rotate(.0174532922222222 * a)),
                    i;
            }, t._addGraphicToGraphics = function (e, i) {
                var n;
                if (n = e.props) {
                    var s;
                    if (s = t.DrawTypeDic[e.type]) {
                        var a;
                        a = i;
                        var r, o = t._getParams(n, s[1], s[2], s[3]);
                        ((r = t._tM) || 1 != t._alpha) && (a.save(), r && a.transform(r), 1 != t._alpha && a.alpha(t._alpha)),
                            a[s[0]].apply(a, o), (r || 1 != t._alpha) && a.restore();
                    }
                }
            }, t._adptLineData = function (t) {
                return t[2] = parseFloat(t[0]) + parseFloat(t[2]), t[3] = parseFloat(t[1]) + parseFloat(t[3]),
                    t;
            }, t._adptTextureData = function (t) {
                return t[0] = rt.getRes(t[0]), t;
            }, t._adptLinesData = function (e) {
                return e[2] = t._getPointListByStr(e[2]), e;
            }, t.isDrawType = function (e) {
                return "Image" != e && t.DrawTypeDic.hasOwnProperty(e);
            }, t._getParams = function (e, i, n, s) {
                void 0 === n && (n = 0);
                var a;
                (a = t._temParam).length = i.length;
                var r = 0, o = 0;
                for (o = i.length, r = 0; r < o; r++) a[r] = t._getObjVar(e, i[r][0], i[r][1]);
                t._alpha = t._getObjVar(e, "alpha", 1);
                var h;
                return (h = t._getTransformData(e)) ? (n || (n = 0), h.translate(a[n], a[n + 1]),
                    a[n] = a[n + 1] = 0, t._tM = h) : t._tM = null, s && t[s] && (a = t[s](a)), a;
            }, t._getPointListByStr = function (t) {
                var e, i = 0, n = 0;
                for (n = (e = t.split(",")).length, i = 0; i < n; i++) e[i] = parseFloat(e[i]);
                return e;
            }, t._getObjVar = function (t, e, i) {
                return t.hasOwnProperty(e) ? t[e] : i;
            }, t._temParam = [], t._classMap = {
                Sprite: "laya.display.Sprite",
                Text: "laya.display.Text",
                Animation: "laya.display.Animation",
                Skeleton: "laya.ani.bone.Skeleton",
                Particle2D: "laya.particle.Particle2D",
                div: "laya.html.dom.HTMLDivElement",
                p: "laya.html.dom.HTMLElement",
                img: "laya.html.dom.HTMLImageElement",
                span: "laya.html.dom.HTMLElement",
                br: "laya.html.dom.HTMLBrElement",
                style: "laya.html.dom.HTMLStyleElement",
                font: "laya.html.dom.HTMLElement",
                a: "laya.html.dom.HTMLElement",
                "#text": "laya.html.dom.HTMLElement"
            }, t.getClass = function (e) {
                var n = t._classMap[e] || e;
                return "string" == typeof n ? i.__classmap[n] : n;
            }, t._tM = null, t._alpha = NaN, n(t, ["DrawTypeDic", function () {
                return this.DrawTypeDic = {
                    Rect: ["drawRect", [["x", 0], ["y", 0], ["width", 0], ["height", 0], ["fillColor", null], ["lineColor", null], ["lineWidth", 1]]],
                    Circle: ["drawCircle", [["x", 0], ["y", 0], ["radius", 0], ["fillColor", null], ["lineColor", null], ["lineWidth", 1]]],
                    Pie: ["drawPie", [["x", 0], ["y", 0], ["radius", 0], ["startAngle", 0], ["endAngle", 0], ["fillColor", null], ["lineColor", null], ["lineWidth", 1]]],
                    Image: ["drawTexture", [["x", 0], ["y", 0], ["width", 0], ["height", 0]]],
                    Texture: ["drawTexture", [["skin", null], ["x", 0], ["y", 0], ["width", 0], ["height", 0]], 1, "_adptTextureData"],
                    FillTexture: ["fillTexture", [["skin", null], ["x", 0], ["y", 0], ["width", 0], ["height", 0], ["repeat", null]], 1, "_adptTextureData"],
                    FillText: ["fillText", [["text", ""], ["x", 0], ["y", 0], ["font", null], ["color", null], ["textAlign", null]], 1],
                    Line: ["drawLine", [["x", 0], ["y", 0], ["toX", 0], ["toY", 0], ["lineColor", null], ["lineWidth", 0]], 0, "_adptLineData"],
                    Lines: ["drawLines", [["x", 0], ["y", 0], ["points", ""], ["lineColor", null], ["lineWidth", 0]], 0, "_adptLinesData"],
                    Curves: ["drawCurves", [["x", 0], ["y", 0], ["points", ""], ["lineColor", null], ["lineWidth", 0]], 0, "_adptLinesData"],
                    Poly: ["drawPoly", [["x", 0], ["y", 0], ["points", ""], ["fillColor", null], ["lineColor", null], ["lineWidth", 1]], 0, "_adptLinesData"]
                };
            }]), t;
        }(), z = function () {
            function t(e) {
                if (this._color = [], "string" == typeof e) {
                    this.strColor = e, null === e && (e = "#000000"), "#" == e.charAt(0) && (e = e.substr(1));
                    var i = e.length;
                    if (3 == i || 4 == i) {
                        for (var n = "", s = 0; s < i; s++) n += e[s] + e[s];
                        e = n;
                    }
                    var a = this.numColor = parseInt(e, 16);
                    if (8 == e.length) return void (this._color = [parseInt(e.substr(0, 2), 16) / 255, ((16711680 & a) >> 16) / 255, ((65280 & a) >> 8) / 255, (255 & a) / 255]);
                } else a = this.numColor = e, this.strColor = q.toHexColor(a);
                this._color = [((16711680 & a) >> 16) / 255, ((65280 & a) >> 8) / 255, (255 & a) / 255, 1],
                    this._color.__id = ++t._COLODID;
            }
            return s(t, "laya.utils.Color"), t._initDefault = function () {
                t._DEFAULT = {};
                for (var e in t._COLOR_MAP) t._SAVE[e] = t._DEFAULT[e] = new t(t._COLOR_MAP[e]);
                return t._DEFAULT;
            }, t._initSaveMap = function () {
                t._SAVE_SIZE = 0, t._SAVE = {};
                for (var e in t._DEFAULT) t._SAVE[e] = t._DEFAULT[e];
            }, t.create = function (e) {
                var i = t._SAVE[e + ""];
                return null != i ? i : (t._SAVE_SIZE < 1e3 || t._initSaveMap(), t._SAVE[e + ""] = new t(e));
            }, t._SAVE = {}, t._SAVE_SIZE = 0, t._COLOR_MAP = {
                white: "#FFFFFF",
                red: "#FF0000",
                green: "#00FF00",
                blue: "#0000FF",
                black: "#000000",
                yellow: "#FFFF00",
                gray: "#AAAAAA"
            }, t._DEFAULT = t._initDefault(), t._COLODID = 1, t;
        }(), V = (function () {
            function t() {
                this._values = [], this._keys = [];
            }
            s(t, "laya.utils.Dictionary");
            var e = t.prototype;
            e.set = function (t, e) {
                var i = this.indexOf(t);
                i >= 0 ? this._values[i] = e : (this._keys.push(t), this._values.push(e));
            }, e.indexOf = function (t) {
                var e = this._keys.indexOf(t);
                return e >= 0 ? e : (t = "string" == typeof t ? Number(t) : "number" == typeof t ? t.toString() : t,
                    this._keys.indexOf(t));
            }, e.get = function (t) {
                var e = this.indexOf(t);
                return e < 0 ? null : this._values[e];
            }, e.remove = function (t) {
                var e = this.indexOf(t);
                return e >= 0 && (this._keys.splice(e, 1), this._values.splice(e, 1), !0);
            }, e.clear = function () {
                this._values.length = 0, this._keys.length = 0;
            }, a(0, e, "values", function () {
                return this._values;
            }), a(0, e, "keys", function () {
                return this._keys;
            });
        }(), function () {
            function t() {
                this.ratio = .92, this.maxOffset = 60, this._dragging = !1, this._clickOnly = !0;
            }
            s(t, "laya.utils.Dragging");
            var e = t.prototype;
            return e.start = function (t, e, n, s, a, r, o, h) {
                void 0 === h && (h = .92), this.clearTimer(), this.target = t, this.area = e, this.hasInertia = n,
                    this.elasticDistance = e ? s : 0, this.elasticBackTime = a, this.data = r, this._disableMouseEvent = o,
                    this.ratio = h, this._parent = t.parent, this._clickOnly = !0, this._dragging = !0,
                    this._elasticRateX = this._elasticRateY = 1, this._lastX = this._parent.mouseX,
                    this._lastY = this._parent.mouseY, i.stage.on("mouseup", this, this.onStageMouseUp),
                    i.stage.on("mouseout", this, this.onStageMouseUp), i.timer.frameLoop(1, this, this.loop);
            }, e.clearTimer = function () {
                i.timer.clear(this, this.loop), i.timer.clear(this, this.tweenMove), this._tween && (this._tween.recover(),
                    this._tween = null);
            }, e.stop = function () {
                this._dragging && (m.instance.disableMouseEvent = !1, i.stage.off("mouseup", this, this.onStageMouseUp),
                    i.stage.off("mouseout", this, this.onStageMouseUp), this._dragging = !1, this.target && this.area && this.backToArea(),
                    this.clear());
            }, e.loop = function () {
                var t = this._parent.getMousePoint(), e = t.x, n = t.y, s = e - this._lastX, a = n - this._lastY;
                if (this._clickOnly) {
                    if (!(Math.abs(s * i.stage._canvasTransform.getScaleX()) > 1 || Math.abs(a * i.stage._canvasTransform.getScaleY()) > 1)) return;
                    this._clickOnly = !1, this._offsets || (this._offsets = []), this._offsets.length = 0,
                        this.target.event("dragstart", this.data), m.instance.disableMouseEvent = this._disableMouseEvent,
                        this.target._set$P("$_MOUSEDOWN", !1);
                } else this._offsets.push(s, a);
                0 === s && 0 === a || (this._lastX = e, this._lastY = n, this.target.x += s * this._elasticRateX,
                    this.target.y += a * this._elasticRateY, this.area && this.checkArea(), this.target.event("dragmove", this.data));
            }, e.checkArea = function () {
                if (this.elasticDistance <= 0) this.backToArea(); else {
                    if (this.target.x < this.area.x) var t = this.area.x - this.target.x; else t = this.target.x > this.area.x + this.area.width ? this.target.x - this.area.x - this.area.width : 0;
                    if (this._elasticRateX = Math.max(0, 1 - t / this.elasticDistance), this.target.y < this.area.y) var e = this.area.y - this.target.y; else e = this.target.y > this.area.y + this.area.height ? this.target.y - this.area.y - this.area.height : 0;
                    this._elasticRateY = Math.max(0, 1 - e / this.elasticDistance);
                }
            }, e.backToArea = function () {
                this.target.x = Math.min(Math.max(this.target.x, this.area.x), this.area.x + this.area.width),
                    this.target.y = Math.min(Math.max(this.target.y, this.area.y), this.area.y + this.area.height);
            }, e.onStageMouseUp = function (t) {
                if (m.instance.disableMouseEvent = !1, i.stage.off("mouseup", this, this.onStageMouseUp),
                    i.stage.off("mouseout", this, this.onStageMouseUp), i.timer.clear(this, this.loop),
                    !this._clickOnly && this.target) if (this.hasInertia) {
                        this._offsets.length < 1 && this._offsets.push(this._parent.mouseX - this._lastX, this._parent.mouseY - this._lastY),
                            this._offsetX = this._offsetY = 0;
                        for (var e = this._offsets.length, n = Math.min(e, 6), s = this._offsets.length - n, a = e - 1; a > s; a--) this._offsetY += this._offsets[a--],
                            this._offsetX += this._offsets[a];
                        this._offsetX = this._offsetX / n * 2, this._offsetY = this._offsetY / n * 2, Math.abs(this._offsetX) > this.maxOffset && (this._offsetX = this._offsetX > 0 ? this.maxOffset : -this.maxOffset),
                            Math.abs(this._offsetY) > this.maxOffset && (this._offsetY = this._offsetY > 0 ? this.maxOffset : -this.maxOffset),
                            i.timer.frameLoop(1, this, this.tweenMove);
                    } else this.elasticDistance > 0 ? this.checkElastic() : this.clear();
            }, e.checkElastic = function () {
                var t = NaN, e = NaN;
                if (this.target.x < this.area.x ? t = this.area.x : this.target.x > this.area.x + this.area.width && (t = this.area.x + this.area.width),
                    this.target.y < this.area.y ? e = this.area.y : this.target.y > this.area.y + this.area.height && (e = this.area.y + this.area.height),
                    isNaN(t) && isNaN(e)) this.clear(); else {
                    var i = {};
                    isNaN(t) || (i.x = t), isNaN(e) || (i.y = e), this._tween = j.to(this.target, i, this.elasticBackTime, U.sineOut, l.create(this, this.clear), 0, !1, !1);
                }
            }, e.tweenMove = function () {
                this._offsetX *= this.ratio * this._elasticRateX, this._offsetY *= this.ratio * this._elasticRateY,
                    this.target.x += this._offsetX, this.target.y += this._offsetY, this.area && this.checkArea(),
                    this.target.event("dragmove", this.data), (Math.abs(this._offsetX) < 1 && Math.abs(this._offsetY) < 1 || this._elasticRateX < .5 || this._elasticRateY < .5) && (i.timer.clear(this, this.tweenMove),
                        this.elasticDistance > 0 ? this.checkElastic() : this.clear());
            }, e.clear = function () {
                if (this.target) {
                    this.clearTimer();
                    var t = this.target;
                    this.target = null, this._parent = null, t.event("dragend", this.data);
                }
            }, t;
        }()), U = function () {
            function t() { }
            return s(t, "laya.utils.Ease"), t.linearNone = function (t, e, i, n) {
                return i * t / n + e;
            }, t.linearIn = function (t, e, i, n) {
                return i * t / n + e;
            }, t.linearInOut = function (t, e, i, n) {
                return i * t / n + e;
            }, t.linearOut = function (t, e, i, n) {
                return i * t / n + e;
            }, t.bounceIn = function (e, i, n, s) {
                return n - t.bounceOut(s - e, 0, n, s) + i;
            }, t.bounceInOut = function (e, i, n, s) {
                return e < .5 * s ? .5 * t.bounceIn(2 * e, 0, n, s) + i : .5 * t.bounceOut(2 * e - s, 0, n, s) + .5 * n + i;
            }, t.bounceOut = function (t, e, i, n) {
                return (t /= n) < 1 / 2.75 ? i * (7.5625 * t * t) + e : t < 2 / 2.75 ? i * (7.5625 * (t -= 1.5 / 2.75) * t + .75) + e : t < 2.5 / 2.75 ? i * (7.5625 * (t -= 2.25 / 2.75) * t + .9375) + e : i * (7.5625 * (t -= 2.625 / 2.75) * t + .984375) + e;
            }, t.backIn = function (t, e, i, n, s) {
                return void 0 === s && (s = 1.70158), i * (t /= n) * t * ((s + 1) * t - s) + e;
            }, t.backInOut = function (t, e, i, n, s) {
                return void 0 === s && (s = 1.70158), (t /= .5 * n) < 1 ? .5 * i * (t * t * ((1 + (s *= 1.525)) * t - s)) + e : i / 2 * ((t -= 2) * t * ((1 + (s *= 1.525)) * t + s) + 2) + e;
            }, t.backOut = function (t, e, i, n, s) {
                return void 0 === s && (s = 1.70158), i * ((t = t / n - 1) * t * ((s + 1) * t + s) + 1) + e;
            }, t.elasticIn = function (e, i, n, s, a, r) {
                void 0 === a && (a = 0), void 0 === r && (r = 0);
                var o;
                return 0 == e ? i : 1 == (e /= s) ? i + n : (r || (r = .3 * s), !a || n > 0 && a < n || n < 0 && a < -n ? (a = n,
                    o = r / 4) : o = r / t.PI2 * Math.asin(n / a), -a * Math.pow(2, 10 * (e -= 1)) * Math.sin((e * s - o) * t.PI2 / r) + i);
            }, t.elasticInOut = function (e, i, n, s, a, r) {
                void 0 === a && (a = 0), void 0 === r && (r = 0);
                var o;
                return 0 == e ? i : 2 == (e /= .5 * s) ? i + n : (r || (r = s * (.3 * 1.5)), !a || n > 0 && a < n || n < 0 && a < -n ? (a = n,
                    o = r / 4) : o = r / t.PI2 * Math.asin(n / a), e < 1 ? a * Math.pow(2, 10 * (e -= 1)) * Math.sin((e * s - o) * t.PI2 / r) * -.5 + i : a * Math.pow(2, -10 * (e -= 1)) * Math.sin((e * s - o) * t.PI2 / r) * .5 + n + i);
            }, t.elasticOut = function (e, i, n, s, a, r) {
                void 0 === a && (a = 0), void 0 === r && (r = 0);
                var o;
                return 0 == e ? i : 1 == (e /= s) ? i + n : (r || (r = .3 * s), !a || n > 0 && a < n || n < 0 && a < -n ? (a = n,
                    o = r / 4) : o = r / t.PI2 * Math.asin(n / a), a * Math.pow(2, -10 * e) * Math.sin((e * s - o) * t.PI2 / r) + n + i);
            }, t.strongIn = function (t, e, i, n) {
                return i * (t /= n) * t * t * t * t + e;
            }, t.strongInOut = function (t, e, i, n) {
                return (t /= .5 * n) < 1 ? .5 * i * t * t * t * t * t + e : .5 * i * ((t -= 2) * t * t * t * t + 2) + e;
            }, t.strongOut = function (t, e, i, n) {
                return i * ((t = t / n - 1) * t * t * t * t + 1) + e;
            }, t.sineInOut = function (t, e, i, n) {
                return .5 * -i * (Math.cos(Math.PI * t / n) - 1) + e;
            }, t.sineIn = function (e, i, n, s) {
                return -n * Math.cos(e / s * t.HALF_PI) + n + i;
            }, t.sineOut = function (e, i, n, s) {
                return n * Math.sin(e / s * t.HALF_PI) + i;
            }, t.quintIn = function (t, e, i, n) {
                return i * (t /= n) * t * t * t * t + e;
            }, t.quintInOut = function (t, e, i, n) {
                return (t /= .5 * n) < 1 ? .5 * i * t * t * t * t * t + e : .5 * i * ((t -= 2) * t * t * t * t + 2) + e;
            }, t.quintOut = function (t, e, i, n) {
                return i * ((t = t / n - 1) * t * t * t * t + 1) + e;
            }, t.quartIn = function (t, e, i, n) {
                return i * (t /= n) * t * t * t + e;
            }, t.quartInOut = function (t, e, i, n) {
                return (t /= .5 * n) < 1 ? .5 * i * t * t * t * t + e : .5 * -i * ((t -= 2) * t * t * t - 2) + e;
            }, t.quartOut = function (t, e, i, n) {
                return -i * ((t = t / n - 1) * t * t * t - 1) + e;
            }, t.cubicIn = function (t, e, i, n) {
                return i * (t /= n) * t * t + e;
            }, t.cubicInOut = function (t, e, i, n) {
                return (t /= .5 * n) < 1 ? .5 * i * t * t * t + e : .5 * i * ((t -= 2) * t * t + 2) + e;
            }, t.cubicOut = function (t, e, i, n) {
                return i * ((t = t / n - 1) * t * t + 1) + e;
            }, t.quadIn = function (t, e, i, n) {
                return i * (t /= n) * t + e;
            }, t.quadInOut = function (t, e, i, n) {
                return (t /= .5 * n) < 1 ? .5 * i * t * t + e : .5 * -i * (--t * (t - 2) - 1) + e;
            }, t.quadOut = function (t, e, i, n) {
                return -i * (t /= n) * (t - 2) + e;
            }, t.expoIn = function (t, e, i, n) {
                return 0 == t ? e : i * Math.pow(2, 10 * (t / n - 1)) + e - .001 * i;
            }, t.expoInOut = function (t, e, i, n) {
                return 0 == t ? e : t == n ? e + i : (t /= .5 * n) < 1 ? .5 * i * Math.pow(2, 10 * (t - 1)) + e : .5 * i * (2 - Math.pow(2, -10 * --t)) + e;
            }, t.expoOut = function (t, e, i, n) {
                return t == n ? e + i : i * (1 - Math.pow(2, -10 * t / n)) + e;
            }, t.circIn = function (t, e, i, n) {
                return -i * (Math.sqrt(1 - (t /= n) * t) - 1) + e;
            }, t.circInOut = function (t, e, i, n) {
                return (t /= .5 * n) < 1 ? .5 * -i * (Math.sqrt(1 - t * t) - 1) + e : .5 * i * (Math.sqrt(1 - (t -= 2) * t) + 1) + e;
            }, t.circOut = function (t, e, i, n) {
                return i * Math.sqrt(1 - (t = t / n - 1) * t) + e;
            }, t.HALF_PI = .5 * Math.PI, t.PI2 = 2 * Math.PI, t;
        }(), W = function () {
            function t() {
                this._hit = null, this._unHit = null;
            }
            s(t, "laya.utils.HitArea");
            var e = t.prototype;
            return e.isHit = function (e, i) {
                return !!t.isHitGraphic(e, i, this.hit) && !t.isHitGraphic(e, i, this.unHit);
            }, e.contains = function (t, e) {
                return this.isHit(t, e);
            }, a(0, e, "hit", function () {
                return this._hit || (this._hit = new f()), this._hit;
            }, function (t) {
                this._hit = t;
            }), a(0, e, "unHit", function () {
                return this._unHit || (this._unHit = new f()), this._unHit;
            }, function (t) {
                this._unHit = t;
            }), t.isHitGraphic = function (e, i, n) {
                if (!n) return !1;
                var s;
                if (!(s = n.cmds) && n._one && ((s = t._cmds).length = 1, s[0] = n._one), !s) return !1;
                var a = 0, r = 0;
                r = s.length;
                var o;
                for (a = 0; a < r; a++) if (o = s[a]) {
                    var h = P._context;
                    switch (o.callee) {
                        case h._translate:
                        case 6:
                            e -= o[0], i -= o[1];
                    }
                    if (t.isHitCmd(e, i, o)) return !0;
                }
                return !1;
            }, t.isHitCmd = function (e, i, n) {
                if (!n) return !1;
                var s = P._context, a = !1;
                switch (n.callee) {
                    case s._drawRect:
                    case 13:
                        t._rec.setTo(n[0], n[1], n[2], n[3]), a = t._rec.contains(e, i);
                        break;

                    case s._drawCircle:
                    case s._fillCircle:
                    case 14:
                        a = (e -= n[0]) * e + (i -= n[1]) * i < n[2] * n[2];
                        break;

                    case s._drawPoly:
                    case 18:
                        e -= n[0], i -= n[1], a = t.ptInPolygon(e, i, n[2]);
                }
                return a;
            }, t.ptInPolygon = function (e, i, n) {
                var s;
                (s = t._ptPoint).setTo(e, i);
                var a = 0, r = NaN, o = NaN, h = NaN, l = NaN, c = 0;
                c = n.length;
                for (var u = 0; u < c; u += 2) if (r = n[u], o = n[u + 1], h = n[(u + 2) % c], l = n[(u + 3) % c],
                    o != l && !(s.y < Math.min(o, l) || s.y >= Math.max(o, l))) {
                    (s.y - o) * (h - r) / (l - o) + r > s.x && a++;
                }
                return a % 2 == 1;
            }, t._cmds = [], n(t, ["_rec", function () {
                return this._rec = new S();
            }, "_ptPoint", function () {
                return this._ptPoint = new T();
            }]), t;
        }(), Y = (function () {
            function t(e, i, n, s) {
                this.char = e, this.charNum = e.charCodeAt(0), this._x = this._y = 0, this.width = i,
                    this.height = n, this.style = s, this.isWord = !t._isWordRegExp.test(e);
            }
            s(t, "laya.utils.HTMLChar");
            var e = t.prototype;
            i.imps(e, {
                "laya.display.ILayout": !0
            }), e.setSprite = function (t) {
                this._sprite = t;
            }, e.getSprite = function () {
                return this._sprite;
            }, e._isChar = function () {
                return !0;
            }, e._getCSSStyle = function () {
                return this.style;
            }, a(0, e, "width", function () {
                return this._w;
            }, function (t) {
                this._w = t;
            }), a(0, e, "x", function () {
                return this._x;
            }, function (t) {
                this._sprite && (this._sprite.x = t), this._x = t;
            }), a(0, e, "y", function () {
                return this._y;
            }, function (t) {
                this._sprite && (this._sprite.y = t), this._y = t;
            }), a(0, e, "height", function () {
                return this._h;
            }, function (t) {
                this._h = t;
            }), t._isWordRegExp = new RegExp("[\\w.]", "");
        }(), function () {
            function t() { }
            s(t, "laya.utils.Log"), t.enable = function () {
                t._logdiv || (t._logdiv = O.window.document.createElement("div"), O.window.document.body.appendChild(t._logdiv),
                    t._logdiv.style.cssText = "pointer-events:none;border:white;overflow:hidden;z-index:1000000;background:rgba(100,100,100,0.6);color:white;position: absolute;left:0px;top:0px;width:50%;height:50%;");
            }, t.toggle = function () {
                var e = t._logdiv.style;
                "1px" == e.width ? e.width = e.height = "50%" : e.width = e.height = "1px";
            }, t.print = function (e) {
                t._logdiv && (t._count >= t.maxCount && t.clear(), t._count++, t._logdiv.innerText += e + "\n",
                    t._logdiv.scrollTop = t._logdiv.scrollHeight);
            }, t.clear = function () {
                t._logdiv.innerText = "", t._count = 0;
            }, t._logdiv = null, t._count = 0, t.maxCount = 20;
        }(), function () {
            function t() { }
            s(t, "laya.utils.Mouse"), a(1, t, "cursor", function () {
                return t._style.cursor;
            }, function (e) {
                t._style.cursor = e;
            }), t.hide = function () {
                "none" != t.cursor && (t._preCursor = t.cursor, t.cursor = "none");
            }, t.show = function () {
                "none" == t.cursor && (t.cursor = t._preCursor ? t._preCursor : "auto");
            }, t._preCursor = null, n(t, ["_style", function () {
                return this._style = O.document.body.style;
            }]);
        }(), function () {
            function t() { }
            return s(t, "laya.utils.Pool"), t.getPoolBySign = function (e) {
                return t._poolDic[e] || (t._poolDic[e] = []);
            }, t.clearBySign = function (e) {
                t._poolDic[e] && (t._poolDic[e].length = 0);
            }, t.recover = function (e, i) {
                i.__InPool || (i.__InPool = !0, t.getPoolBySign(e).push(i));
            }, t.getItemByClass = function (e, i) {
                var n = t.getPoolBySign(e), s = n.length ? n.pop() : new i();
                return s.__InPool = !1, s;
            }, t.getItemByCreateFun = function (e, i, n) {
                var s = t.getPoolBySign(e), a = s.length ? s.pop() : i.call(n);
                return a.__InPool = !1, a;
            }, t.getItem = function (e) {
                var i = t.getPoolBySign(e), n = i.length ? i.pop() : null;
                return n && (n.__InPool = !1), n;
            }, t._poolDic = {}, t.InPoolSign = "__InPool", t;
        }()), X = (function () {
            function t() {
                this.sign = null, this.maxCount = 1e3;
            }
            s(t, "laya.utils.PoolCache");
            var e = t.prototype;
            e.getCacheList = function () {
                return Y.getPoolBySign(this.sign);
            }, e.tryDispose = function (t) {
                var e;
                (e = Y.getPoolBySign(this.sign)).length > this.maxCount && e.splice(this.maxCount, e.length - this.maxCount);
            }, t.addPoolCacheManager = function (e, i) {
                void 0 === i && (i = 100);
                var n;
                (n = new t()).sign = e, n.maxCount = i, G.regCacheByFunction(q.bind(n.tryDispose, n), q.bind(n.getCacheList, n));
            };
        }(), function () {
            function t() { }
            return s(t, "laya.utils.Stat"), a(1, t, "onclick", null, function (e) {
                t._sp && t._sp.on("click", t._sp, e), t._canvas && (t._canvas.source.onclick = e,
                    t._canvas.source.style.pointerEvents = "");
            }), t.show = function (e, i) {
                void 0 === e && (e = 0), void 0 === i && (i = 0), !P.isConchApp || P.isConchWebGL ? (P.isConchWebGL || O.onMiniGame || O.onLimixiu || O.onKGMiniGame || O.onBDMiniGame || O.onTTMiniGame || O.onQGMiniGame || O.onVVMiniGame || O.onBLMiniGame || O.onAlipayMiniGame || O.onQQMiniGame || (t._useCanvas = !0),
                    t._show = !0, t._fpsData.length = 60, t._view[0] = {
                        title: "FPS(Canvas)",
                        value: "_fpsStr",
                        color: "yellow",
                        units: "int"
                    }, t._view[1] = {
                        title: "Sprite",
                        value: "_spriteStr",
                        color: "white",
                        units: "int"
                    }, t._view[2] = {
                        title: "DrawCall",
                        value: "drawCall",
                        color: "white",
                        units: "int"
                    }, t._view[3] = {
                        title: "CurMem",
                        value: "currentMemorySize",
                        color: "yellow",
                        units: "M"
                    }, P.isWebGL ? (t._view[4] = {
                        title: "Shader",
                        value: "shaderCall",
                        color: "white",
                        units: "int"
                    }, P.is3DMode ? (t._view[0].title = "FPS(3D)", t._view[5] = {
                        title: "TriFaces",
                        value: "trianglesFaces",
                        color: "white",
                        units: "int"
                    }, t._view[6] = {
                        title: "treeNodeColl",
                        value: "treeNodeCollision",
                        color: "white",
                        units: "int"
                    }, t._view[7] = {
                        title: "treeSpriteColl",
                        value: "treeSpriteCollision",
                        color: "white",
                        units: "int"
                    }) : (t._view[0].title = "FPS(WebGL)", t._view[5] = {
                        title: "Canvas",
                        value: "_canvasStr",
                        color: "white",
                        units: "int"
                    })) : t._view[4] = {
                        title: "Canvas",
                        value: "_canvasStr",
                        color: "white",
                        units: "int"
                    }, t._useCanvas ? t.createUIPre(e, i) : t.createUI(e, i), t.enable()) : O.window.conch.showFPS && O.window.conch.showFPS(e, i);
            }, t.createUIPre = function (e, n) {
                var s = O.pixelRatio;
                i.stage.useRetinalCanvas && (s = 3), t._width = 130 * s, t._vx = 75 * s, t._height = s * (12 * t._view.length + 3 * s) + 4,
                    t._fontSize = 12 * s;
                for (var a = 0; a < t._view.length; a++) t._view[a].x = 4, t._view[a].y = a * t._fontSize + 2 * s;
                t._canvas || ((t._canvas = new yt("2D")).size(t._width, t._height), (t._ctx = t._canvas.getContext("2d")).textBaseline = "top",
                    t._ctx.font = t._fontSize + "px Sans-serif", t._canvas.source.style.cssText = "pointer-events:none;background:rgba(150,150,150,0.8);z-index:100000;position: absolute;direction:ltr;left:" + e + "px;top:" + n + "px;width:" + t._width / s + "px;height:" + t._height / s + "px;"),
                    t._first = !0, t.loop(), t._first = !1, O.onKGMiniGame || O.container.appendChild(t._canvas.source);
            }, t.createUI = function (e, n) {
                var s = t._sp, a = O.pixelRatio;
                i.stage.useRetinalCanvas && (a = 3), s || (s = new ut(), (t._leftText = new gt()).pos(5, 5),
                    t._leftText.color = "#ffffff", s.addChild(t._leftText), (t._txt = new gt()).pos(80 * a, 5),
                    t._txt.color = "#ffffff", s.addChild(t._txt), t._sp = s), s.pos(e, n);
                for (var r = "", o = 0; o < t._view.length; o++) {
                    r += t._view[o].title + "\n";
                }
                t._leftText.text = r;
                var h = 138 * a, l = a * (12 * t._view.length + 3 * a) + 4;
                t._txt.fontSize = t._fontSize * a, t._leftText.fontSize = t._fontSize * a, s.size(h, l),
                    s.graphics.clear(), s.graphics.setAlpha(.5), s.graphics.drawRect(0, 0, h, l, "#999999"),
                    s.graphics.setAlpha(1), t.loop();
            }, t.enable = function () {
                i.timer.frameLoop(1, t, t.loop);
            }, t.hide = function () {
                t._show = !1, i.timer.clear(t, t.loop), t._canvas && O.removeElement(t._canvas.source);
            }, t.clear = function () {
                t.trianglesFaces = t.drawCall = t.shaderCall = t.spriteCount = t.spriteRenderUseCacheCount = t.treeNodeCollision = t.treeSpriteCollision = t.canvasNormal = t.canvasBitmap = t.canvasReCache = 0;
            }, t.loop = function () {
                t._count++;
                var e = O.now();
                if (!(e - t._timer < 1e3)) {
                    var i = t._count;
                    if (t.FPS = Math.round(1e3 * i / (e - t._timer)), t._show) {
                        t.trianglesFaces = Math.round(t.trianglesFaces / i), t._useCanvas ? (t.drawCall = Math.round(t.drawCall / i) - 2,
                            t.shaderCall = Math.round(t.shaderCall / i), t.spriteCount = Math.round(t.spriteCount / i) - 1) : (t.drawCall = Math.round(t.drawCall / i) - 2,
                                t.shaderCall = Math.round(t.shaderCall / i) - 4, t.spriteCount = Math.round(t.spriteCount / i) - 4),
                            t.spriteRenderUseCacheCount = Math.round(t.spriteRenderUseCacheCount / i), t.canvasNormal = Math.round(t.canvasNormal / i),
                            t.canvasBitmap = Math.round(t.canvasBitmap / i), t.canvasReCache = Math.ceil(t.canvasReCache / i),
                            t.treeNodeCollision = Math.round(t.treeNodeCollision / i), t.treeSpriteCollision = Math.round(t.treeSpriteCollision / i);
                        var n = t.FPS > 0 ? Math.floor(1e3 / t.FPS).toString() : " ";
                        t._fpsStr = t.FPS + (t.renderSlow ? " slow" : "") + " " + n, t._spriteStr = t.spriteCount + (t.spriteRenderUseCacheCount ? "/" + t.spriteRenderUseCacheCount : ""),
                            t._canvasStr = t.canvasReCache + "/" + t.canvasNormal + "/" + t.canvasBitmap, t.currentMemorySize = B.systemResourceManager.memorySize,
                            t._useCanvas ? t.renderInfoPre() : t.renderInfo(), t.clear();
                    }
                    t._count = 0, t._timer = e;
                }
            }, t.renderInfoPre = function () {
                if (t._canvas) {
                    var e = t._ctx;
                    e.clearRect(t._first ? 0 : t._vx, 0, t._width, t._height);
                    for (var i = 0; i < t._view.length; i++) {
                        var n = t._view[i];
                        t._first && (e.fillStyle = "white", e.fillText(n.title, n.x, n.y, null, null, null)),
                            e.fillStyle = n.color;
                        var s = t[n.value];
                        "M" == n.units && (s = Math.floor(s / 1048576 * 100) / 100 + " M"), e.fillText(s + "", n.x + t._vx, n.y, null, null, null);
                    }
                }
            }, t.renderInfo = function () {
                for (var e = "", i = 0; i < t._view.length; i++) {
                    var n = t._view[i], s = t[n.value];
                    "M" == n.units && (s = Math.floor(s / 1048576 * 100) / 100 + " M"), "K" == n.units && (s = Math.floor(s / 1024 * 100) / 100 + " K"),
                        e += s + "\n";
                }
                t._txt.text = e;
            }, t.FPS = 0, t.loopCount = 0, t.shaderCall = 0, t.drawCall = 0, t.trianglesFaces = 0,
                t.spriteCount = 0, t.spriteRenderUseCacheCount = 0, t.treeNodeCollision = 0, t.treeSpriteCollision = 0,
                t.canvasNormal = 0, t.canvasBitmap = 0, t.canvasReCache = 0, t.renderSlow = !1,
                t.currentMemorySize = 0, t._fpsStr = null, t._canvasStr = null, t._spriteStr = null,
                t._fpsData = [], t._timer = 0, t._count = 0, t._view = [], t._fontSize = 12, t._txt = null,
                t._leftText = null, t._sp = null, t._show = !1, t._useCanvas = !1, t._canvas = null,
                t._ctx = null, t._first = !1, t._vx = NaN, t._width = 0, t._height = 100, t;
        }()), K = (function () {
            function t() {
                this._strsToID = {}, this._idToStrs = [], this._length = 0;
            }
            s(t, "laya.utils.StringKey");
            var e = t.prototype;
            e.add = function (t) {
                var e = this._strsToID[t];
                return null != e ? e : (this._idToStrs[this._length] = t, this._strsToID[t] = this._length++);
            }, e.getID = function (t) {
                var e = this._strsToID[t];
                return null == e ? -1 : e;
            }, e.getName = function (t) {
                var e = this._idToStrs[t];
                return null == e ? void 0 : e;
            };
        }(), function () {
            function t() {
                this._delta = 0, this.scale = 1, this.currFrame = 0, this._mid = 1, this._map = [],
                    this._laters = [], this._handlers = [], this._temp = [], this._count = 0, this.currTimer = this._now(),
                    this._lastTimer = this._now(), this._init();
            }
            var e;
            s(t, "laya.utils.Timer");
            var n = t.prototype;
            return n._init = function () {
                i.timer && i.timer.frameLoop(1, this, this._update);
            }, n._now = function () {
                return Date.now();
            }, n._update = function () {
                if (this.scale <= 0) this._lastTimer = this._now(); else {
                    var t = this.currFrame = this.currFrame + this.scale, e = this._now();
                    this._delta = (e - this._lastTimer) * this.scale;
                    var i = this.currTimer = this.currTimer + this._delta;
                    this._lastTimer = e;
                    var n = this._handlers;
                    for (this._count = 0, r = 0, o = n.length; r < o; r++) if (null !== (h = n[r]).method) {
                        var s = h.userFrame ? t : i;
                        if (s >= h.exeTime) if (h.repeat) if (h.jumpFrame) for (; s >= h.exeTime;) h.exeTime += h.delay,
                            h.run(!1); else h.exeTime += h.delay, h.run(!1), s > h.exeTime && (h.exeTime += Math.ceil((s - h.exeTime) / h.delay) * h.delay); else h.run(!0);
                    } else this._count++;
                    (this._count > 30 || t % 200 == 0) && this._clearHandlers();
                    for (var a = this._laters, r = 0, o = a.length - 1; r <= o; r++) {
                        var h = a[r];
                        null !== h.method && (this._map[h.key] = null, h.run(!1)), this._recoverHandler(h),
                            r === o && (o = a.length - 1);
                    }
                    a.length = 0;
                }
            }, n._clearHandlers = function () {
                for (var t = this._handlers, e = 0, i = t.length; e < i; e++) {
                    var n = t[e];
                    null !== n.method ? this._temp.push(n) : this._recoverHandler(n);
                }
                this._handlers = this._temp, this._temp = t, this._temp.length = 0;
            }, n._recoverHandler = function (e) {
                this._map[e.key] == e && (this._map[e.key] = null), e.clear(), t._pool.push(e);
            }, n._create = function (i, n, s, a, r, o, h) {
                if (!s) return r.apply(a, o), null;
                if (h) {
                    var l = this._getHandler(a, r);
                    if (l) return l.repeat = n, l.userFrame = i, l.delay = s, l.caller = a, l.method = r,
                        l.args = o, l.exeTime = s + (i ? this.currFrame : this.currTimer + this._now() - this._lastTimer),
                        l;
                }
                return l = t._pool.length > 0 ? t._pool.pop() : new e(), l.repeat = n, l.userFrame = i,
                    l.delay = s, l.caller = a, l.method = r, l.args = o, l.exeTime = s + (i ? this.currFrame : this.currTimer + this._now() - this._lastTimer) + 1,
                    this._indexHandler(l), this._handlers.push(l), l;
            }, n._indexHandler = function (t) {
                var e = t.caller, i = t.method, n = e ? e.$_GID || (e.$_GID = q.getGID()) : 0, s = i.$_TID || (i.$_TID = 1e5 * this._mid++);
                t.key = n + s, this._map[t.key] = t;
            }, n.once = function (t, e, i, n, s) {
                void 0 === s && (s = !0), this._create(!1, !1, t, e, i, n, s);
            }, n.loop = function (t, e, i, n, s, a) {
                void 0 === s && (s = !0), void 0 === a && (a = !1);
                var r = this._create(!1, !0, t, e, i, n, s);
                r && (r.jumpFrame = a);
            }, n.frameOnce = function (t, e, i, n, s) {
                void 0 === s && (s = !0), this._create(!0, !1, t, e, i, n, s);
            }, n.frameLoop = function (t, e, i, n, s) {
                void 0 === s && (s = !0), this._create(!0, !0, t, e, i, n, s);
            }, n.toString = function () {
                return "callLater:" + this._laters.length + " handlers:" + this._handlers.length + " pool:" + t._pool.length;
            }, n.clear = function (t, e) {
                var i = this._getHandler(t, e);
                i && (this._map[i.key] = null, i.key = 0, i.clear());
            }, n.clearAll = function (t) {
                if (t) for (var e = 0, i = this._handlers.length; e < i; e++) {
                    var n = this._handlers[e];
                    n.caller === t && (this._map[n.key] = null, n.key = 0, n.clear());
                }
            }, n._getHandler = function (t, e) {
                var i = t ? t.$_GID || (t.$_GID = q.getGID()) : 0, n = e.$_TID || (e.$_TID = 1e5 * this._mid++);
                return this._map[i + n];
            }, n.callLater = function (i, n, s) {
                if (null == this._getHandler(i, n)) {
                    if (t._pool.length) var a = t._pool.pop(); else a = new e();
                    a.caller = i, a.method = n, a.args = s, this._indexHandler(a), this._laters.push(a);
                }
            }, n.runCallLater = function (t, e) {
                var i = this._getHandler(t, e);
                i && null != i.method && (this._map[i.key] = null, i.run(!0));
            }, n.runTimer = function (t, e) {
                this.runCallLater(t, e);
            }, a(0, n, "delta", function () {
                return this._delta;
            }), t._pool = [], t.__init$ = function () {
                e = function () {
                    function t() {
                        this.key = 0, this.repeat = !1, this.delay = 0, this.userFrame = !1, this.exeTime = 0,
                            this.caller = null, this.method = null, this.args = null, this.jumpFrame = !1;
                    }
                    s(t, "");
                    var e = t.prototype;
                    return e.clear = function () {
                        this.caller = null, this.method = null, this.args = null;
                    }, e.run = function (t) {
                        var e = this.caller;
                        if (e && e.destroyed) return this.clear();
                        var i = this.method, n = this.args;
                        t && this.clear(), null != i && (n ? i.apply(e, n) : i.call(e));
                    }, t;
                }();
            }, t;
        }()), j = function () {
            function t() {
                this.gid = 0;
            }
            s(t, "laya.utils.Tween");
            var e = t.prototype;
            return e.to = function (t, e, i, n, s, a, r) {
                return void 0 === a && (a = 0), void 0 === r && (r = !1), this._create(t, e, i, n, s, a, r, !0, !1, !0);
            }, e.from = function (t, e, i, n, s, a, r) {
                return void 0 === a && (a = 0), void 0 === r && (r = !1), this._create(t, e, i, n, s, a, r, !1, !1, !0);
            }, e._create = function (e, n, s, a, r, o, h, l, c, u) {
                if (!e) throw new Error("Tween:target is null");
                this._target = e, this._duration = s, this._ease = a || n.ease || t.easeNone, this._complete = r || n.complete,
                    this._delay = o, this._props = [], this._usedTimer = 0, this._startTimer = O.now(),
                    this._usedPool = c, this._delayParam = null, this.update = n.update;
                var d = e.$_GID || (e.$_GID = q.getGID());
                return t.tweenMap[d] ? (h && t.clearTween(e), t.tweenMap[d].push(this)) : t.tweenMap[d] = [this],
                    u ? o <= 0 ? this.firstStart(e, n, l) : (this._delayParam = [e, n, l], i.scaleTimer.once(o, this, this.firstStart, this._delayParam)) : this._initProps(e, n, l),
                    this;
            }, e.firstStart = function (t, e, i) {
                this._delayParam = null, t.destroyed ? this.clear() : (this._initProps(t, e, i),
                    this._beginLoop());
            }, e._initProps = function (t, e, i) {
                for (var n in e) if ("number" == typeof t[n]) {
                    var s = i ? t[n] : e[n], a = i ? e[n] : t[n];
                    this._props.push([n, s, a - s]), i || (t[n] = s);
                }
            }, e._beginLoop = function () {
                i.scaleTimer.frameLoop(1, this, this._doEase);
            }, e._doEase = function () {
                this._updateEase(O.now());
            }, e._updateEase = function (e) {
                var i = this._target;
                if (i) {
                    if (i.destroyed) return t.clearTween(i);
                    var n = this._usedTimer = e - this._startTimer - this._delay;
                    if (!(n < 0)) {
                        if (n >= this._duration) return this.complete();
                        for (var s = n > 0 ? this._ease(n, 0, 1, this._duration) : 0, a = this._props, r = 0, o = a.length; r < o; r++) {
                            var h = a[r];
                            i[h[0]] = h[1] + s * h[2];
                        }
                        this.update && this.update.run();
                    }
                }
            }, e.complete = function () {
                if (this._target) {
                    i.scaleTimer.runTimer(this, this.firstStart);
                    for (var t = this._target, e = this._props, n = this._complete, s = 0, a = e.length; s < a; s++) {
                        var r = e[s];
                        t[r[0]] = r[1] + r[2];
                    }
                    this.update && this.update.run(), this.clear(), n && n.run();
                }
            }, e.pause = function () {
                i.scaleTimer.clear(this, this._beginLoop), i.scaleTimer.clear(this, this._doEase),
                    i.scaleTimer.clear(this, this.firstStart);
                var t = NaN;
                (t = O.now() - this._startTimer - this._delay) < 0 && (this._usedTimer = t);
            }, e.setStartTime = function (t) {
                this._startTimer = t;
            }, e.clear = function () {
                this._target && (this._remove(), this._clear());
            }, e._clear = function () {
                this.pause(), i.scaleTimer.clear(this, this.firstStart), this._complete = null,
                    this._target = null, this._ease = null, this._props = null, this._delayParam = null,
                    this._usedPool && (this.update = null, Y.recover("tween", this));
            }, e.recover = function () {
                this._usedPool = !0, this._clear();
            }, e._remove = function () {
                var e = t.tweenMap[this._target.$_GID];
                if (e) for (var i = 0, n = e.length; i < n; i++) if (e[i] === this) {
                    e.splice(i, 1);
                    break;
                }
            }, e.restart = function () {
                if (this.pause(), this._usedTimer = 0, this._startTimer = O.now(), this._delayParam) i.scaleTimer.once(this._delay, this, this.firstStart, this._delayParam); else {
                    for (var t = this._props, e = 0, n = t.length; e < n; e++) {
                        var s = t[e];
                        this._target[s[0]] = s[1];
                    }
                    i.scaleTimer.once(this._delay, this, this._beginLoop);
                }
            }, e.resume = function () {
                this._usedTimer >= this._duration || (this._startTimer = O.now() - this._usedTimer - this._delay,
                    this._delayParam ? this._usedTimer < 0 ? i.scaleTimer.once(-this._usedTimer, this, this.firstStart, this._delayParam) : this.firstStart.apply(this, this._delayParam) : this._beginLoop());
            }, a(0, e, "progress", null, function (t) {
                var e = t * this._duration;
                this._startTimer = O.now() - this._delay - e;
            }), t.to = function (e, i, n, s, a, r, o, h) {
                return void 0 === r && (r = 0), void 0 === o && (o = !1), void 0 === h && (h = !0),
                    Y.getItemByClass("tween", t)._create(e, i, n, s, a, r, o, !0, h, !0);
            }, t.from = function (e, i, n, s, a, r, o, h) {
                return void 0 === r && (r = 0), void 0 === o && (o = !1), void 0 === h && (h = !0),
                    Y.getItemByClass("tween", t)._create(e, i, n, s, a, r, o, !1, h, !0);
            }, t.clearAll = function (e) {
                if (e && e.$_GID) {
                    var i = t.tweenMap[e.$_GID];
                    if (i) {
                        for (var n = 0, s = i.length; n < s; n++) i[n]._clear();
                        i.length = 0;
                    }
                }
            }, t.clear = function (t) {
                t.clear();
            }, t.clearTween = function (e) {
                t.clearAll(e);
            }, t.easeNone = function (t, e, i, n) {
                return i * t / n + e;
            }, t.tweenMap = {}, t;
        }(), q = function () {
            function t() { }
            return s(t, "laya.utils.Utils"), t.toRadian = function (e) {
                return e * t._pi2;
            }, t.toAngle = function (e) {
                return e * t._pi;
            }, t.toHexColor = function (t) {
                if (t < 0 || isNaN(t)) return null;
                for (var e = t.toString(16); e.length < 6;) e = "0" + e;
                return "#" + e;
            }, t.getGID = function () {
                return t._gid++;
            }, t.concatArray = function (t, e) {
                if (!e) return t;
                if (!t) return e;
                var i = 0, n = e.length;
                for (i = 0; i < n; i++) t.push(e[i]);
                return t;
            }, t.clearArray = function (t) {
                return t ? (t.length = 0, t) : t;
            }, t.copyArray = function (t, e) {
                if (t || (t = []), !e) return t;
                t.length = e.length;
                var i = 0, n = e.length;
                for (i = 0; i < n; i++) t[i] = e[i];
                return t;
            }, t.getGlobalRecByPoints = function (t, e, i, n, s) {
                var a;
                a = new T(e, i), a = t.localToGlobal(a);
                var r;
                return r = new T(n, s), r = t.localToGlobal(r), S._getWrapRec([a.x, a.y, r.x, r.y]);
            }, t.getGlobalPosAndScale = function (e) {
                return t.getGlobalRecByPoints(e, 0, 0, 1, 1);
            }, t.bind = function (t, e) {
                return t.bind(e);
            }, t.measureText = function (t, e) {
                return r.measureText(t, e);
            }, t.updateOrder = function (t) {
                if (!t || t.length < 2) return !1;
                for (var e, i = 1, n = 0, s = t.length, a = NaN; i < s;) {
                    for (e = t[n = i], a = t[n]._zOrder; --n > -1 && t[n]._zOrder > a;) t[n + 1] = t[n];
                    t[n + 1] = e, i++;
                }
                var r = e.parent.conchModel;
                if (r) if (null != r.updateZOrder) r.updateZOrder(); else {
                    for (i = 0; i < s; i++) r.removeChild(t[i].conchModel);
                    for (i = 0; i < s; i++) r.addChildAt(t[i].conchModel, i);
                }
                return !0;
            }, t.transPointList = function (t, e, i) {
                var n = 0, s = t.length;
                for (n = 0; n < s; n += 2) t[n] += e, t[n + 1] += i;
            }, t.parseInt = function (t, e) {
                void 0 === e && (e = 0);
                var i = O.window.parseInt(t, e);
                return isNaN(i) ? 0 : i;
            }, t.getFileExtension = function (e) {
                t._extReg.lastIndex = e.lastIndexOf(".");
                var i = t._extReg.exec(e);
                return i && i.length > 1 ? i[1].toLowerCase() : null;
            }, t.getTransformRelativeToWindow = function (t, e, n) {
                var s = i.stage, a = laya.utils.Utils.getGlobalPosAndScale(t), r = s._canvasTransform.clone(), o = r.tx, h = r.ty;
                r.rotate(-Math.PI / 180 * i.stage.canvasDegree), r.scale(i.stage.clientScaleX, i.stage.clientScaleY);
                var l = i.stage.canvasDegree % 180 != 0, c = NaN, u = NaN;
                l ? (c = n + a.y, u = e + a.x, c *= r.d, u *= r.a, 90 == i.stage.canvasDegree ? (c = o - c,
                    u += h) : (c += o, u = h - u)) : (c = e + a.x, u = n + a.y, c *= r.a, u *= r.d,
                        c += o, u += h);
                var d = NaN, _ = NaN;
                return l ? (d = r.d * a.height, _ = r.a * a.width) : (d = r.a * a.width, _ = r.d * a.height),
                {
                    x: c,
                    y: u,
                    scaleX: d,
                    scaleY: _
                };
            }, t.fitDOMElementInArea = function (e, n, s, a, r, o) {
                e._fitLayaAirInitialized || (e._fitLayaAirInitialized = !0, e.style.transformOrigin = e.style.webKittransformOrigin = "left top",
                    e.style.position = "absolute");
                var h = t.getTransformRelativeToWindow(n, s, a);
                e.style.transform = e.style.webkitTransform = "scale(" + h.scaleX + "," + h.scaleY + ") rotate(" + i.stage.canvasDegree + "deg)",
                    e.style.width = r + "px", e.style.height = o + "px", e.style.left = h.x + "px",
                    e.style.top = h.y + "px";
            }, t.isOkTextureList = function (t) {
                if (!t) return !1;
                var e, i = 0, n = t.length;
                for (i = 0; i < n; i++) if (!(e = t[i]) || !e.source) return !1;
                return !0;
            }, t.isOKCmdList = function (t) {
                if (!t) return !1;
                var e, i, n = 0, s = t.length, a = P._context;
                for (n = 0; n < s; n++) switch ((e = t[n]).callee) {
                    case a._drawTexture:
                    case a._fillTexture:
                    case a._drawTextureWithTransform:
                        if (!(i = e[0]) || !i.source) return !1;
                }
                return !0;
            }, t._gid = 1, t._pi = 180 / Math.PI, t._pi2 = Math.PI / 180, t._extReg = /\.(\w+)\??/g,
                t.parseXMLFromString = function (t) {
                    var e;
                    if (t = t.replace(/>\s+</g, "><"), (e = new DOMParser().parseFromString(t, "text/xml")).firstChild.textContent.indexOf("This page contains the following errors") > -1) throw new Error(e.firstChild.firstChild.textContent);
                    return e;
                }, t;
        }(), $ = function () {
            function t() {
                this.useDic = {}, this.shapeDic = {}, this.shapeLineDic = {}, this._id = 0, this._checkKey = !1,
                    this._freeIdArray = [], P.isWebGL && G.regCacheByFunction(q.bind(this.startDispose, this), q.bind(this.getCacheList, this));
            }
            s(t, "laya.utils.VectorGraphManager");
            var e = t.prototype;
            return e.getId = function () {
                return this._id++;
            }, e.addShape = function (t, e) {
                this.shapeDic[t] = e, this.useDic[t] || (this.useDic[t] = !0);
            }, e.addLine = function (t, e) {
                this.shapeLineDic[t] = e, this.shapeLineDic[t] || (this.shapeLineDic[t] = !0);
            }, e.getShape = function (t) {
                this._checkKey && null != this.useDic[t] && (this.useDic[t] = !0);
            }, e.deleteShape = function (t) {
                this.shapeDic[t] && (this.shapeDic[t] = null, delete this.shapeDic[t]), this.shapeLineDic[t] && (this.shapeLineDic[t] = null,
                    delete this.shapeLineDic[t]), null != this.useDic[t] && delete this.useDic[t];
            }, e.getCacheList = function () {
                var t, e = [];
                for (t in this.shapeDic) e.push(this.shapeDic[t]);
                for (t in this.shapeLineDic) e.push(this.shapeLineDic[t]);
                return e;
            }, e.startDispose = function (t) {
                var e;
                for (e in this.useDic) this.useDic[e] = !1;
                this._checkKey = !0;
            }, e.endDispose = function () {
                if (this._checkKey) {
                    var t;
                    for (t in this.useDic) this.useDic[t] || this.deleteShape(t);
                    this._checkKey = !1;
                }
            }, t.getInstance = function () {
                return t.instance = t.instance || new t();
            }, t.instance = null, t;
        }(), Q = function () {
            function t() {
                this._obj = null, this._obj = t.supportWeakMap ? new O.window.WeakMap() : {}, t.supportWeakMap || t._maps.push(this);
            }
            s(t, "laya.utils.WeakObject");
            var e = t.prototype;
            return e.set = function (e, i) {
                if (null != e) if (t.supportWeakMap) {
                    var n = e;
                    "string" != typeof e && "number" != typeof e || (n = t._keys[e]) || (n = t._keys[e] = {
                        k: e
                    }), this._obj.set(n, i);
                } else "string" == typeof e || "number" == typeof e ? this._obj[e] = i : (e.$_GID || (e.$_GID = q.getGID()),
                    this._obj[e.$_GID] = i);
            }, e.get = function (e) {
                if (null == e) return null;
                if (t.supportWeakMap) {
                    var i = "string" == typeof e || "number" == typeof e ? t._keys[e] : e;
                    return i ? this._obj.get(i) : null;
                }
                return "string" == typeof e || "number" == typeof e ? this._obj[e] : this._obj[e.$_GID];
            }, e.del = function (e) {
                if (null != e) if (t.supportWeakMap) {
                    var i = "string" == typeof e || "number" == typeof e ? t._keys[e] : e;
                    if (!i) return;
                    this._obj.delete(i);
                } else "string" == typeof e || "number" == typeof e ? delete this._obj[e] : delete this._obj[this._obj.$_GID];
            }, e.has = function (e) {
                if (null == e) return !1;
                if (t.supportWeakMap) {
                    var i = "string" == typeof e || "number" == typeof e ? t._keys[e] : e;
                    return this._obj.has(i);
                }
                return "string" == typeof e || "number" == typeof e ? null != this._obj[e] : null != this._obj[this._obj.$_GID];
            }, t.__init__ = function () {
                (t.supportWeakMap = null != O.window.WeakMap) || i.timer.loop(t.delInterval, null, t.clearCache);
            }, t.clearCache = function () {
                for (var e = 0, i = t._maps.length; e < i; e++) {
                    t._maps[e]._obj = {};
                }
            }, t.supportWeakMap = !1, t.delInterval = 3e5, t._keys = {}, t._maps = [], n(t, ["I", function () {
                return this.I = new t();
            }]), t;
        }(), Z = function () {
            function t() {
                this.id = NaN, this.save = [], this.toUpperCase = null, this.changed = !1, this._text = null;
            }
            s(t, "laya.utils.WordText");
            var e = t.prototype;
            return e.setText = function (t) {
                this.changed = !0, this._text = t;
            }, e.toString = function () {
                return this._text;
            }, e.charCodeAt = function (t) {
                return this._text ? this._text.charCodeAt(t) : NaN;
            }, e.charAt = function (t) {
                return this._text ? this._text.charAt(t) : null;
            }, a(0, e, "length", function () {
                return this._text ? this._text.length : 0;
            }), t;
        }(), J = function (t) {
            function e() {
                this._bits = 0, this._displayedInStage = !1, this._parent = null, this.conchModel = null,
                    this.name = "", this._destroyed = !1, e.__super.call(this), this._childs = e.ARRAY_EMPTY,
                    this._$P = e.PROP_EMPTY, this.timer = i.scaleTimer, this.conchModel = P.isConchNode ? this.createConchModel() : null;
            }
            s(e, "laya.display.Node", h);
            var n = e.prototype;
            return n._setBit = function (t, e) {
                if (1 == t) {
                    this._getBit(t) != e && this._updateDisplayedInstage();
                }
                e ? this._bits |= t : this._bits &= ~t;
            }, n._getBit = function (t) {
                return 0 != (this._bits & t);
            }, n._setUpNoticeChain = function () {
                this._getBit(1) && this._setUpNoticeType(1);
            }, n._setUpNoticeType = function (t) {
                var e = this;
                for (e._setBit(t, !0), e = e.parent; e;) {
                    if (e._getBit(t)) return;
                    e._setBit(t, !0), e = e.parent;
                }
            }, n.on = function (t, e, i, n) {
                return "display" !== t && "undisplay" !== t || this._getBit(1) || this._setUpNoticeType(1),
                    this._createListener(t, e, i, n, !1);
            }, n.once = function (t, e, i, n) {
                return "display" !== t && "undisplay" !== t || this._getBit(1) || this._setUpNoticeType(1),
                    this._createListener(t, e, i, n, !0);
            }, n.createConchModel = function () {
                return null;
            }, n.destroy = function (t) {
                void 0 === t && (t = !0), this._destroyed = !0, this._parent && this._parent.removeChild(this),
                    this._childs && (t ? this.destroyChildren() : this.removeChildren()), this._childs = null,
                    this._$P = null, this.offAll(), this.timer.clearAll(this);
            }, n.destroyChildren = function () {
                if (this._childs) for (var t = this._childs.length - 1; t > -1; t--) this._childs[t].destroy(!0);
            }, n.addChild = function (t) {
                if (!t || this.destroyed || t === this) return t;
                if (t.zOrder && this._set$P("hasZorder", !0), t._parent === this) {
                    var i = this.getChildIndex(t);
                    i !== this._childs.length - 1 && (this._childs.splice(i, 1), this._childs.push(t),
                        this.conchModel && (this.conchModel.removeChild(t.conchModel), this.conchModel.addChildAt(t.conchModel, this._childs.length - 1)),
                        this._childChanged());
                } else t.parent && t.parent.removeChild(t), this._childs === e.ARRAY_EMPTY && (this._childs = []),
                    this._childs.push(t), this.conchModel && this.conchModel.addChildAt(t.conchModel, this._childs.length - 1),
                    t.parent = this, this._childChanged();
                return t;
            }, n.addChildren = function (t) {
                for (var e = arguments, i = 0, n = e.length; i < n;) this.addChild(e[i++]);
            }, n.addChildAt = function (t, i) {
                if (!t || this.destroyed || t === this) return t;
                if (t.zOrder && this._set$P("hasZorder", !0), i >= 0 && i <= this._childs.length) {
                    if (t._parent === this) {
                        var n = this.getChildIndex(t);
                        this._childs.splice(n, 1), this._childs.splice(i, 0, t), this.conchModel && (this.conchModel.removeChild(t.conchModel),
                            this.conchModel.addChildAt(t.conchModel, i)), this._childChanged();
                    } else t.parent && t.parent.removeChild(t), this._childs === e.ARRAY_EMPTY && (this._childs = []),
                        this._childs.splice(i, 0, t), this.conchModel && this.conchModel.addChildAt(t.conchModel, i),
                        t.parent = this;
                    return t;
                }
                throw new Error("appendChildAt:The index is out of bounds");
            }, n.getChildIndex = function (t) {
                return this._childs.indexOf(t);
            }, n.getChildByName = function (t) {
                var e = this._childs;
                if (e) for (var i = 0, n = e.length; i < n; i++) {
                    var s = e[i];
                    if (s.name === t) return s;
                }
                return null;
            }, n._get$P = function (t) {
                return this._$P[t];
            }, n._set$P = function (t, i) {
                return this.destroyed || (this._$P === e.PROP_EMPTY && (this._$P = {}), this._$P[t] = i),
                    i;
            }, n.getChildAt = function (t) {
                return this._childs[t];
            }, n.setChildIndex = function (t, e) {
                var i = this._childs;
                if (e < 0 || e >= i.length) throw new Error("setChildIndex:The index is out of bounds.");
                var n = this.getChildIndex(t);
                if (n < 0) throw new Error("setChildIndex:node is must child of this object.");
                return i.splice(n, 1), i.splice(e, 0, t), this.conchModel && (this.conchModel.removeChild(t.conchModel),
                    this.conchModel.addChildAt(t.conchModel, e)), this._childChanged(), t;
            }, n._childChanged = function (t) { }, n.removeChild = function (t) {
                if (!this._childs) return t;
                var e = this._childs.indexOf(t);
                return this.removeChildAt(e);
            }, n.removeSelf = function () {
                return this._parent && this._parent.removeChild(this), this;
            }, n.removeChildByName = function (t) {
                var e = this.getChildByName(t);
                return e && this.removeChild(e), e;
            }, n.removeChildAt = function (t) {
                var e = this.getChildAt(t);
                return e && (this._childs.splice(t, 1), this.conchModel && this.conchModel.removeChild(e.conchModel),
                    e.parent = null), e;
            }, n.removeChildren = function (t, i) {
                if (void 0 === t && (t = 0), void 0 === i && (i = 2147483647), this._childs && this._childs.length > 0) {
                    var n = this._childs;
                    if (0 === t && i >= r) {
                        var s = n;
                        this._childs = e.ARRAY_EMPTY;
                    } else s = n.splice(t, i - t);
                    for (var a = 0, r = s.length; a < r; a++) s[a].parent = null, this.conchModel && this.conchModel.removeChild(s[a].conchModel);
                }
                return this;
            }, n.replaceChild = function (t, e) {
                var i = this._childs.indexOf(e);
                return i > -1 ? (this._childs.splice(i, 1, t), this.conchModel && (this.conchModel.removeChild(e.conchModel),
                    this.conchModel.addChildAt(t.conchModel, i)), e.parent = null, t.parent = this,
                    t) : null;
            }, n._updateDisplayedInstage = function () {
                var t;
                t = this;
                var e = i.stage;
                for (this._displayedInStage = !1; t;) {
                    if (t._getBit(1)) {
                        this._displayedInStage = t._displayedInStage;
                        break;
                    }
                    if (t == e || t._displayedInStage) {
                        this._displayedInStage = !0;
                        break;
                    }
                    t = t.parent;
                }
            }, n._setDisplay = function (t) {
                this._displayedInStage !== t && (this._displayedInStage = t, t ? this.event("display") : this.event("undisplay"));
            }, n._displayChild = function (t, e) {
                var i = t._childs;
                if (i) for (var n = 0, s = i.length; n < s; n++) {
                    var a = i[n];
                    a._getBit(1) && (a._childs.length > 0 ? this._displayChild(a, e) : a._setDisplay(e));
                }
                t._setDisplay(e);
            }, n.contains = function (t) {
                if (t === this) return !0;
                for (; t;) {
                    if (t.parent === this) return !0;
                    t = t.parent;
                }
                return !1;
            }, n.timerLoop = function (t, e, i, n, s, a) {
                void 0 === s && (s = !0), void 0 === a && (a = !1), this.timer.loop(t, e, i, n, s, a);
            }, n.timerOnce = function (t, e, i, n, s) {
                void 0 === s && (s = !0), this.timer._create(!1, !1, t, e, i, n, s);
            }, n.frameLoop = function (t, e, i, n, s) {
                void 0 === s && (s = !0), this.timer._create(!0, !0, t, e, i, n, s);
            }, n.frameOnce = function (t, e, i, n, s) {
                void 0 === s && (s = !0), this.timer._create(!0, !1, t, e, i, n, s);
            }, n.clearTimer = function (t, e) {
                this.timer.clear(t, e);
            }, a(0, n, "numChildren", function () {
                return this._childs.length;
            }), a(0, n, "destroyed", function () {
                return this._destroyed;
            }), a(0, n, "parent", function () {
                return this._parent;
            }, function (t) {
                this._parent !== t && (t ? (this._parent = t, this.event("added"), this._getBit(1) && (this._setUpNoticeChain(),
                    t.displayedInStage && this._displayChild(this, !0)), t._childChanged(this)) : (this.event("removed"),
                        this._parent._childChanged(), this._getBit(1) && this._displayChild(this, !1), this._parent = t));
            }), a(0, n, "displayedInStage", function () {
                return this._getBit(1) ? this._displayedInStage : (this._setUpNoticeType(1), this._displayedInStage);
            }), e.ARRAY_EMPTY = [], e.PROP_EMPTY = {}, e.NOTICE_DISPLAY = 1, e.MOUSEENABLE = 2,
                e;
        }(), tt = function (t) {
            function e(t) {
                this._bgground = null, this._border = null, this._rect = null, this.underLine = 0,
                    this.lineHeight = 0, e.__super.call(this), this._padding = e._PADDING, this._spacing = e._SPACING,
                    this._aligns = e._ALIGNS, this._font = d.EMPTY, this._ower = t;
            }
            s(e, "laya.display.css.CSSStyle", t);
            var i = e.prototype;
            return i.destroy = function () {
                this._ower = null, this._font = null, this._rect = null;
            }, i.inherit = function (t) {
                this._font = t._font, this._spacing = t._spacing === e._SPACING ? e._SPACING : t._spacing.slice(),
                    this.lineHeight = t.lineHeight;
            }, i._widthAuto = function () {
                return 0 != (262144 & this._type);
            }, i.widthed = function (t) {
                return 0 != (8 & this._type);
            }, i._calculation = function (t, e) {
                function i(t, e, i) {
                    return t * i[0] + e * i[1] + i[2];
                }
                function n(t) {
                    var e = a.width, n = s.width;
                    r.width && (s.width = i(e, n, r.width)), r.height && (s.height = i(e, n, r.height)),
                        r.left && (s.x = i(e, n, r.left)), r.top && (s.y = i(e, n, r.top));
                }
                if (e.indexOf("%") < 0) return !1;
                var s = this._ower, a = s.parent, r = this._rect;
                null === r && (a._getCSSStyle()._type |= 524288, a.on("resize", this, n), this._rect = r = {
                    input: {}
                });
                var o = e.split(" ");
                return o[0] = parseFloat(o[0]) / 100, 1 == o.length ? o[1] = o[2] = 0 : (o[1] = parseFloat(o[1]) / 100,
                    o[2] = parseFloat(o[2])), r[t] = o, r.input[t] = e, n(), !0;
            }, i.heighted = function (t) {
                return 0 != (8192 & this._type);
            }, i.size = function (t, e) {
                var i = this._ower, n = !1;
                -1 !== t && t != this._ower.width && (this._type |= 8, this._ower.width = t, n = !0),
                    -1 !== e && e != this._ower.height && (this._type |= 8192, this._ower.height = e,
                        n = !0), n && (i._layoutLater(), 524288 & this._type && i.event("resize", this));
            }, i._getAlign = function () {
                return this._aligns[0];
            }, i._getValign = function () {
                return this._aligns[1];
            }, i._getCssFloat = function () {
                return 0 != (32768 & this._type) ? 32768 : 0;
            }, i._createFont = function () {
                return 4096 & this._type ? this._font : (this._type |= 4096, this._font = new d(this._font));
            }, i.render = function (t, e, i, n) {
                var s = t.width, a = t.height;
                i -= t.pivotX, n -= t.pivotY, this._bgground && null != this._bgground.color && e.ctx.fillRect(i, n, s, a, this._bgground.color),
                    this._border && this._border.color && e.drawRect(i, n, s, a, this._border.color.strColor, this._border.size);
            }, i.getCSSStyle = function () {
                return this;
            }, i.cssText = function (t) {
                this.attrs(e.parseOneCSS(t, ";"));
            }, i.attrs = function (t) {
                if (t) for (var e = 0, i = t.length; e < i; e++) {
                    var n = t[e];
                    this[n[0]] = n[1];
                }
            }, i.setTransform = function (t) {
                "none" === t ? this._tf = u._TF_EMPTY : this.attrs(e.parseOneCSS(t, ","));
            }, i.translate = function (t, e) {
                this._tf === u._TF_EMPTY && (this._tf = new _()), this._tf.translateX = t, this._tf.translateY = e;
            }, i.scale = function (t, e) {
                this._tf === u._TF_EMPTY && (this._tf = new _()), this._tf.scaleX = t, this._tf.scaleY = e;
            }, i._enableLayout = function () {
                return 0 == (2 & this._type) && 0 == (4 & this._type);
            }, a(0, i, "block", t.prototype._$get_block, function (t) {
                t ? this._type |= 1 : this._type &= -2;
            }), a(0, i, "valign", function () {
                return e._valigndef[this._aligns[1]];
            }, function (t) {
                this._aligns === e._ALIGNS && (this._aligns = [0, 0, 0]), this._aligns[1] = e._valigndef[t];
            }), a(0, i, "height", null, function (t) {
                if (this._type |= 8192, "string" == typeof t) {
                    if (this._calculation("height", t)) return;
                    t = parseInt(t);
                }
                this.size(-1, t);
            }), a(0, i, "width", null, function (t) {
                if (this._type |= 8, "string" == typeof t) {
                    var e = t.indexOf("auto");
                    if (e >= 0 && (this._type |= 262144, t = t.substr(0, e)), this._calculation("width", t)) return;
                    t = parseInt(t);
                }
                this.size(t, -1);
            }), a(0, i, "fontWeight", function () {
                return this._font.weight;
            }, function (t) {
                this._createFont().weight = t;
            }), a(0, i, "left", null, function (t) {
                var e = this._ower;
                if ("string" == typeof t) {
                    if ("center" === t ? t = "50% -50% 0" : "right" === t && (t = "100% -100% 0"), this._calculation("left", t)) return;
                    t = parseInt(t);
                }
                e.x = t;
            }), a(0, i, "_translate", null, function (t) {
                this.translate(t[0], t[1]);
            }), a(0, i, "absolute", function () {
                return 0 != (4 & this._type);
            }), a(0, i, "top", null, function (t) {
                var e = this._ower;
                if ("string" == typeof t) {
                    if ("middle" === t ? t = "50% -50% 0" : "bottom" === t && (t = "100% -100% 0"),
                        this._calculation("top", t)) return;
                    t = parseInt(t);
                }
                e.y = t;
            }), a(0, i, "align", function () {
                return e._aligndef[this._aligns[0]];
            }, function (t) {
                this._aligns === e._ALIGNS && (this._aligns = [0, 0, 0]), this._aligns[0] = e._aligndef[t];
            }), a(0, i, "bold", function () {
                return this._font.bold;
            }, function (t) {
                this._createFont().bold = t;
            }), a(0, i, "padding", function () {
                return this._padding;
            }, function (t) {
                this._padding = t;
            }), a(0, i, "leading", function () {
                return this._spacing[1];
            }, function (t) {
                "string" == typeof t && (t = parseInt(t + "")), this._spacing === e._SPACING && (this._spacing = [0, 0]),
                    this._spacing[1] = t;
            }), a(0, i, "lineElement", function () {
                return 0 != (65536 & this._type);
            }, function (t) {
                t ? this._type |= 65536 : this._type &= -65537;
            }), a(0, i, "cssFloat", function () {
                return 0 != (32768 & this._type) ? "right" : "left";
            }, function (t) {
                this.lineElement = !1, "right" === t ? this._type |= 32768 : this._type &= -32769;
            }), a(0, i, "textDecoration", function () {
                return this._font.decoration;
            }, function (t) {
                this._createFont().decoration = t;
            }), a(0, i, "whiteSpace", function () {
                return 131072 & this._type ? "nowrap" : "";
            }, function (t) {
                "nowrap" === t && (this._type |= 131072), "none" === t && (this._type &= -131073);
            }), a(0, i, "background", null, function (t) {
                t ? (this._bgground || (this._bgground = {}), this._bgground.color = t, this._ower.conchModel && this._ower.conchModel.bgColor(t),
                    this._type |= 16384, this._ower._renderType |= 256) : this._bgground = null;
            }), a(0, i, "wordWrap", function () {
                return 0 == (131072 & this._type);
            }, function (t) {
                t ? this._type &= -131073 : this._type |= 131072;
            }), a(0, i, "color", function () {
                return this._font.color;
            }, function (t) {
                this._createFont().color = t;
            }), a(0, i, "password", function () {
                return this._font.password;
            }, function (t) {
                this._createFont().password = t;
            }), a(0, i, "backgroundColor", function () {
                return this._bgground ? this._bgground.color : null;
            }, function (t) {
                "none" === t ? this._bgground = null : (this._bgground || (this._bgground = {}),
                    this._bgground.color = t), this._ower.conchModel && this._ower.conchModel.bgColor(t),
                    this._ower._renderType |= 256;
            }), a(0, i, "font", function () {
                return this._font.toString();
            }, function (t) {
                this._createFont().set(t);
            }), a(0, i, "weight", null, function (t) {
                this._createFont().weight = t;
            }), a(0, i, "letterSpacing", function () {
                return this._spacing[0];
            }, function (t) {
                "string" == typeof t && (t = parseInt(t + "")), this._spacing === e._SPACING && (this._spacing = [0, 0]),
                    this._spacing[0] = t;
            }), a(0, i, "fontSize", function () {
                return this._font.size;
            }, function (t) {
                this._createFont().size = t;
            }), a(0, i, "italic", function () {
                return this._font.italic;
            }, function (t) {
                this._createFont().italic = t;
            }), a(0, i, "fontFamily", function () {
                return this._font.family;
            }, function (t) {
                this._createFont().family = t;
            }), a(0, i, "stroke", function () {
                return this._font.stroke[0];
            }, function (t) {
                this._createFont().stroke === d._STROKE && (this._font.stroke = [0, "#000000"]),
                    this._font.stroke[0] = t;
            }), a(0, i, "strokeColor", function () {
                return this._font.stroke[1];
            }, function (t) {
                this._createFont().stroke === d._STROKE && (this._font.stroke = [0, "#000000"]),
                    this._font.stroke[1] = t;
            }), a(0, i, "border", function () {
                return this._border ? this._border.value : "";
            }, function (t) {
                if ("none" != t) {
                    this._border || (this._border = {}), this._border.value = t;
                    var e = t.split(" ");
                    if (this._border.color = z.create(e[e.length - 1]), 1 == e.length) return this._border.size = 1,
                        void (this._border.type = "solid");
                    var i = 0;
                    e[0].indexOf("px") > 0 ? (this._border.size = parseInt(e[0]), i++) : this._border.size = 1,
                        this._border.type = e[i], this._ower._renderType |= 256;
                } else this._border = null;
            }), a(0, i, "borderColor", function () {
                return this._border && this._border.color ? this._border.color.strColor : null;
            }, function (t) {
                t ? (this._border || (this._border = {
                    size: 1,
                    type: "solid"
                }), this._border.color = null == t ? null : z.create(t), this._ower.conchModel && this._ower.conchModel.border(this._border.color.strColor),
                    this._ower._renderType |= 256) : this._border = null;
            }), a(0, i, "position", function () {
                return 4 & this._type ? "absolute" : "";
            }, function (t) {
                "absolute" == t ? this._type |= 4 : this._type &= -5;
            }), a(0, i, "display", null, function (t) {
                switch (t) {
                    case "":
                        this._type &= -3, this.visible = !0;
                        break;

                    case "none":
                        this._type |= 2, this.visible = !1, this._ower._layoutLater();
                }
            }), a(0, i, "paddingLeft", function () {
                return this.padding[3];
            }), a(0, i, "paddingTop", function () {
                return this.padding[0];
            }), a(0, i, "_scale", null, function (t) {
                this._ower.scale(t[0], t[1]);
            }), a(0, i, "_rotate", null, function (t) {
                this._ower.rotation = t;
            }), e.parseOneCSS = function (t, i) {
                for (var n, s = [], a = t.split(i), r = 0, o = a.length; r < o; r++) {
                    var h = a[r], l = h.indexOf(":"), c = h.substr(0, l).replace(/^\s+|\s+$/g, "");
                    if (0 != c.length) {
                        var u = h.substr(l + 1).replace(/^\s+|\s+$/g, ""), d = [c, u];
                        switch (c) {
                            case "italic":
                            case "bold":
                                d[1] = "true" == u;
                                break;

                            case "line-height":
                                d[0] = "lineHeight", d[1] = parseInt(u);
                                break;

                            case "font-size":
                                d[0] = "fontSize", d[1] = parseInt(u);
                                break;

                            case "padding":
                                (n = u.split(" ")).length > 1 || (n[1] = n[2] = n[3] = n[0]), d[1] = [parseInt(n[0]), parseInt(n[1]), parseInt(n[2]), parseInt(n[3])];
                                break;

                            case "rotate":
                                d[0] = "_rotate", d[1] = parseFloat(u);
                                break;

                            case "scale":
                                n = u.split(" "), d[0] = "_scale", d[1] = [parseFloat(n[0]), parseFloat(n[1])];
                                break;

                            case "translate":
                                n = u.split(" "), d[0] = "_translate", d[1] = [parseInt(n[0]), parseInt(n[1])];
                                break;

                            default:
                                (d[0] = e._CSSTOVALUE[c]) || (d[0] = c);
                        }
                        s.push(d);
                    }
                }
                return s;
            }, e.parseCSS = function (t, i) {
                for (var n; null != (n = e._parseCSSRegExp.exec(t));) e.styleSheets[n[1]] = e.parseOneCSS(n[2], ";");
            }, e.EMPTY = new e(null), e._CSSTOVALUE = {
                "letter-spacing": "letterSpacing",
                "line-spacing": "lineSpacing",
                "white-space": "whiteSpace",
                "line-height": "lineHeight",
                "scale-x": "scaleX",
                "scale-y": "scaleY",
                "translate-x": "translateX",
                "translate-y": "translateY",
                "font-family": "fontFamily",
                "font-weight": "fontWeight",
                "vertical-align": "valign",
                "text-decoration": "textDecoration",
                "background-color": "backgroundColor",
                "border-color": "borderColor",
                float: "cssFloat"
            }, e._parseCSSRegExp = new RegExp("([.#]\\w+)\\s*{([\\s\\S]*?)}", "g"), e._aligndef = {
                left: 0,
                center: 1,
                right: 2,
                0: "left",
                1: "center",
                2: "right"
            }, e._valigndef = {
                top: 0,
                middle: 1,
                bottom: 2,
                0: "top",
                1: "middle",
                2: "bottom"
            }, e.styleSheets = {}, e.ALIGN_CENTER = 1, e.ALIGN_RIGHT = 2, e.VALIGN_MIDDLE = 1,
                e.VALIGN_BOTTOM = 2, e._CSS_BLOCK = 1, e._DISPLAY_NONE = 2, e._ABSOLUTE = 4, e._WIDTH_SET = 8,
                e._PADDING = [0, 0, 0, 0], e._RECT = [-1, -1, -1, -1], e._SPACING = [0, 0],
                e._ALIGNS = [0, 0, 0], e.ADDLAYOUTED = 512, e._NEWFONT = 4096, e._HEIGHT_SET = 8192,
                e._BACKGROUND_SET = 16384, e._FLOAT_RIGHT = 32768, e._LINE_ELEMENT = 65536, e._NOWARP = 131072,
                e._WIDTHAUTO = 262144, e._LISTERRESZIE = 524288, e;
        }(u), et = function (t) {
            function e() {
                this.url = null, this.audio = null, this.loaded = !1, e.__super.call(this);
            }
            s(e, "laya.media.h5audio.AudioSound", h);
            var i = e.prototype;
            return i.dispose = function () {
                var t = e._audioCache[this.url];
                Y.clearBySign("audio:" + this.url), t && (P.isConchApp || (t.src = ""), delete e._audioCache[this.url]);
            }, i.load = function (t) {
                function i() {
                    s(), r.loaded = !0, r.event("complete");
                }
                function n() {
                    a.load = null, s(), r.event("error");
                }
                function s() {
                    a.removeEventListener("canplaythrough", i), a.removeEventListener("error", n);
                }
                t = R.formatURL(t), this.url = t;
                var a;
                if (t == A._tMusic ? (e._initMusicAudio(), (a = e._musicAudio).src != t && (e._audioCache[a.src] = null,
                    a = null)) : a = e._audioCache[t], a && a.readyState >= 2) this.event("complete"); else {
                    a || (t == A._tMusic ? (e._initMusicAudio(), a = e._musicAudio) : a = O.createElement("audio"),
                        e._audioCache[t] = a, a.src = t), a.addEventListener("canplaythrough", i), a.addEventListener("error", n);
                    var r = this;
                    this.audio = a, a.load ? a.load() : n();
                }
            }, i.play = function (t, i) {
                if (void 0 === t && (t = 0), void 0 === i && (i = 0), !this.url) return null;
                var n;
                if (!(n = this.url == A._tMusic ? e._musicAudio : e._audioCache[this.url])) return null;
                var s;
                s = Y.getItem("audio:" + this.url), P.isConchApp ? s || ((s = O.createElement("audio")).src = this.url) : this.url == A._tMusic ? (e._initMusicAudio(),
                    (s = e._musicAudio).src = this.url) : s = s || n.cloneNode(!0);
                var a = new dt(s);
                return a.url = this.url, a.loops = i, a.startTime = t, a.play(), A.addChannel(a),
                    a;
            }, a(0, i, "duration", function () {
                var t;
                return (t = e._audioCache[this.url]) ? t.duration : 0;
            }), e._initMusicAudio = function () {
                e._musicAudio || (e._musicAudio || (e._musicAudio = O.createElement("audio")), P.isConchApp || O.document.addEventListener("mousedown", e._makeMusicOK));
            }, e._makeMusicOK = function () {
                O.document.removeEventListener("mousedown", e._makeMusicOK), e._musicAudio.src ? e._musicAudio.play() : (e._musicAudio.src = "",
                    e._musicAudio.load());
            }, e._audioCache = {}, e._musicAudio = null, e;
        }(), it = function (t) {
            function e() {
                this.url = null, this.loops = 0, this.startTime = NaN, this.isStopped = !1, this.completeHandler = null,
                    e.__super.call(this);
            }
            s(e, "laya.media.SoundChannel", h);
            var i = e.prototype;
            return i.play = function () { }, i.stop = function () {
                this.completeHandler && this.completeHandler.run();
            }, i.pause = function () { }, i.resume = function () { }, i.__runComplete = function (t) {
                t && t.run();
            }, a(0, i, "volume", function () {
                return 1;
            }, function (t) { }), a(0, i, "position", function () {
                return 0;
            }), a(0, i, "duration", function () {
                return 0;
            }), e;
        }(), nt = function (t) {
            function e() {
                e.__super.call(this);
            }
            s(e, "laya.media.Sound", h);
            var i = e.prototype;
            return i.load = function (t) { }, i.play = function (t, e) {
                return void 0 === t && (t = 0), void 0 === e && (e = 0), null;
            }, i.dispose = function () { }, a(0, i, "duration", function () {
                return 0;
            }), e;
        }(), st = function (t) {
            function e() {
                this.url = null, this.loaded = !1, this.data = null, this.audioBuffer = null, this.__toPlays = null,
                    this._disposed = !1, e.__super.call(this);
            }
            s(e, "laya.media.webaudio.WebAudioSound", h);
            var i = e.prototype;
            return i.load = function (t) {
                var i = this;
                if (t = R.formatURL(t), this.url = t, this.audioBuffer = e._dataCache[t], this.audioBuffer) this._loaded(this.audioBuffer); else if (e.e.on("loaded:" + t, this, this._loaded),
                    e.e.on("err:" + t, this, this._err), !e.__loadingSound[t]) {
                    e.__loadingSound[t] = !0;
                    var n = new O.window.XMLHttpRequest();
                    n.open("GET", t, !0), n.responseType = "arraybuffer", n.onload = function () {
                        i._disposed ? i._removeLoadEvents() : (i.data = n.response, e.buffs.push({
                            buffer: i.data,
                            url: i.url
                        }), e.decode());
                    }, n.onerror = function (t) {
                        i._err();
                    }, n.send();
                }
            }, i._err = function () {
                if (this._removeLoadEvents(), e.__loadingSound[this.url] = !1, this.event("error"),
                    this.__toPlays) {
                    var t, i = 0, n = 0;
                    n = (t = this.__toPlays).length;
                    var s;
                    for (i = 0; i < n; i++) (s = t[i])[2] && !s[2].isStopped && s[2].event("error");
                    this.__toPlays.length = 0;
                }
            }, i._loaded = function (t) {
                this._removeLoadEvents(), this._disposed || (this.audioBuffer = t, e._dataCache[this.url] = this.audioBuffer,
                    this.loaded = !0, this.event("complete"));
            }, i._removeLoadEvents = function () {
                e.e.off("loaded:" + this.url, this, this._loaded), e.e.off("err:" + this.url, this, this._err);
            }, i.__playAfterLoaded = function () {
                if (this.__toPlays) {
                    var t, e = 0, i = 0;
                    i = (t = this.__toPlays).length;
                    var n;
                    for (e = 0; e < i; e++) (n = t[e])[2] && !n[2].isStopped && this.play(n[0], n[1], n[2]);
                    this.__toPlays.length = 0;
                }
            }, i.play = function (t, e, i) {
                return void 0 === t && (t = 0), void 0 === e && (e = 0), i = i || new _t(), this.audioBuffer || this.url && (this.__toPlays || (this.__toPlays = []),
                    this.__toPlays.push([t, e, i]), this.once("complete", this, this.__playAfterLoaded),
                    this.load(this.url)), i.url = this.url, i.loops = e, i.audioBuffer = this.audioBuffer,
                    i.startTime = t, i.play(), A.addChannel(i), i;
            }, i.dispose = function () {
                this._disposed = !0, delete e._dataCache[this.url], delete e.__loadingSound[this.url],
                    this.audioBuffer = null, this.data = null, this.__toPlays = [];
            }, a(0, i, "duration", function () {
                return this.audioBuffer ? this.audioBuffer.duration : 0;
            }), e.decode = function () {
                e.buffs.length <= 0 || e.isDecoding || (e.isDecoding = !0, e.tInfo = e.buffs.shift(),
                    e.ctx.decodeAudioData(e.tInfo.buffer, e._done, e._fail));
            }, e._done = function (t) {
                e.e.event("loaded:" + e.tInfo.url, t), e.isDecoding = !1, e.decode();
            }, e._fail = function () {
                e.e.event("err:" + e.tInfo.url, null), e.isDecoding = !1, e.decode();
            }, e._playEmptySound = function () {
                if (null != e.ctx) {
                    var t = e.ctx.createBufferSource();
                    t.buffer = e._miniBuffer, t.connect(e.ctx.destination), t.start(0, 0, 0);
                }
            }, e._unlock = function () {
                e._unlocked || (e._playEmptySound(), "running" == e.ctx.state && (O.document.removeEventListener("mousedown", e._unlock, !0),
                    O.document.removeEventListener("touchend", e._unlock, !0), O.document.removeEventListener("touchstart", e._unlock, !0),
                    e._unlocked = !0));
            }, e.initWebAudio = function () {
                "running" != e.ctx.state && (e._unlock(), O.document.addEventListener("mousedown", e._unlock, !0),
                    O.document.addEventListener("touchend", e._unlock, !0), O.document.addEventListener("touchstart", e._unlock, !0));
            }, e._dataCache = {}, e.buffs = [], e.isDecoding = !1, e._unlocked = !1, e.tInfo = null,
                e.__loadingSound = {}, n(e, ["window", function () {
                    return this.window = O.window;
                }, "webAudioEnabled", function () {
                    return this.webAudioEnabled = e.window.AudioContext || e.window.webkitAudioContext || e.window.mozAudioContext;
                }, "ctx", function () {
                    return this.ctx = e.webAudioEnabled ? new (e.window.AudioContext || e.window.webkitAudioContext || e.window.mozAudioContext)() : void 0;
                }, "_miniBuffer", function () {
                    return this._miniBuffer = e.ctx.createBuffer(1, 1, 22050);
                }, "e", function () {
                    return this.e = new h();
                }]), e;
        }(), at = function (t) {
            function e() {
                this._responseType = null, this._data = null, e.__super.call(this), this._http = new O.window.XMLHttpRequest();
            }
            s(e, "laya.net.HttpRequest", h);
            var i = e.prototype;
            return i.send = function (t, e, i, n, s) {
                void 0 === i && (i = "get"), void 0 === n && (n = "text"), this._responseType = n,
                    this._data = null, (O.onQGMiniGame || O.onVVMiniGame || O.onQQMiniGame || O.onBDMiniGame) && (t = encodeURI(t));
                var a = this, r = this._http;
                if (r.open(i, t, !0), s) for (var o = 0; o < s.length; o++) r.setRequestHeader(s[o++], s[o]); else P.isConchApp || (e && "string" != typeof e ? r.setRequestHeader("Content-Type", "application/json") : r.setRequestHeader("Content-Type", "application/x-www-form-urlencoded"));
                var h = "arraybuffer" !== n ? "text" : "arraybuffer";
                r.responseType = h, r.dataType && (r.dataType = h), r.onerror = function (t) {
                    a._onError(t);
                }, r.onabort = function (t) {
                    a._onAbort(t);
                }, r.onprogress = function (t) {
                    a._onProgress(t);
                }, r.onload = function (t) {
                    a._onLoad(t);
                }, r.send(e);
            }, i._onProgress = function (t) {
                t && t.lengthComputable && this.event("progress", t.loaded / t.total);
            }, i._onAbort = function (t) {
                this.error("Request was aborted by user");
            }, i._onError = function (t) {
                this.error("Request failed Status:" + this._http.status + " text:" + this._http.statusText);
            }, i._onLoad = function (t) {
                var e = this._http, i = void 0 !== e.status ? e.status : 200;
                200 === i || 204 === i || 0 === i ? this.complete() : this.error("[" + e.status + "]" + e.statusText + ":" + e.responseURL);
            }, i.error = function (t) {
                this.clear(), this.event("error", t);
            }, i.complete = function () {
                this.clear();
                var t = !0;
                try {
                    "json" === this._responseType ? this._data = JSON.parse(this._http.responseText) : "xml" === this._responseType ? this._data = q.parseXMLFromString(this._http.responseText) : this._data = this._http.response || this._http.responseText;
                } catch (e) {
                    t = !1, this.error(e.message);
                }
                t && this.event("complete", this._data instanceof Array ? [this._data] : this._data);
            }, i.clear = function () {
                var t = this._http;
                t.onerror = t.onabort = t.onprogress = t.onload = null;
            }, a(0, i, "url", function () {
                return this._http.responseURL;
            }), a(0, i, "http", function () {
                return this._http;
            }), a(0, i, "data", function () {
                return this._data;
            }), e;
        }(), rt = function (t) {
            function e() {
                this._data = null, this._class = null, this._url = null, this._type = null, this._cache = !1,
                    this._http = null, this._customParse = !1, e.__super.call(this);
            }
            s(e, "laya.net.Loader", h);
            var n = e.prototype;
            return n.load = function (t, i, n, s, a) {
                if (void 0 === n && (n = !0), void 0 === a && (a = !1), this._url = t, 0 === t.indexOf("data:image") ? this._type = i = "image" : (this._type = i || (i = this.getTypeFromUrl(t)),
                    t = R.formatURL(t)), this._cache = n, this._data = null, !a && e.loadedMap[t]) return this._data = e.loadedMap[t],
                        this.event("progress", 1), void this.event("complete", this._data);
                if (s && e.setGroup(t, s), null != e.parserMap[i]) return this._customParse = !0,
                    void (e.parserMap[i] instanceof laya.utils.Handler ? e.parserMap[i].runWith(this) : e.parserMap[i].call(null, this));
                if ("image" === i || "htmlimage" === i || "nativeimage" === i) return this._loadImage(t);
                if ("sound" === i) return this._loadSound(t);
                if ("ttf" === i) return this._loadTTF(t);
                var r;
                switch (i) {
                    case "atlas":
                    case "plf":
                        r = "json";
                        break;

                    case "font":
                        r = "xml";
                        break;

                    case "pkm":
                        r = "arraybuffer";
                        break;

                    default:
                        r = i;
                }
                e.preLoadedMap[t] ? this.onLoaded(e.preLoadedMap[t]) : (O.onVVMiniGame ? this._http = new at() : this._http || (this._http = new at()),
                    this._http.on("progress", this, this.onProgress), this._http.on("error", this, this.onError),
                    this._http.on("complete", this, this.onLoaded), this._http.send(t, null, "get", r));
            }, n.getTypeFromUrl = function (t) {
                var i = q.getFileExtension(t);
                return i ? e.typeMap[i] : (console.warn("Not recognize the resources suffix", t),
                    "text");
            }, n._loadTTF = function (t) {
                t = R.formatURL(t);
                var e = new E();
                e.complete = l.create(this, this.onLoaded), e.load(t);
            }, n._loadImage = function (t) {
                function i() {
                    n.onload = null, n.onerror = null, delete e.imgCache[t];
                }
                t = R.formatURL(t);
                var n, s = this, a = function () {
                    i(), s.onLoaded(n);
                }, r = function () {
                    i(), s.event("error", "Load image failed");
                };
                "nativeimage" === this._type ? ((n = new O.window.Image()).crossOrigin = "", n.onload = a,
                    n.onerror = r, n.src = t, e.imgCache[t] = n) : new bt.create(t, {
                        onload: a,
                        onerror: r,
                        onCreate: function (i) {
                            n = i, e.imgCache[t] = i;
                        }
                    });
            }, n._loadSound = function (t) {
                function e() {
                    i.offAll();
                }
                var i = new A._soundClass(), n = this;
                i.on("complete", this, function () {
                    e(), n.onLoaded(i);
                }), i.on("error", this, function () {
                    e(), i.dispose(), n.event("error", "Load sound failed");
                }), i.load(t);
            }, n.onProgress = function (t) {
                "atlas" === this._type ? this.event("progress", .3 * t) : this.event("progress", t);
            }, n.onError = function (t) {
                this.event("error", t);
            }, n.onLoaded = function (t) {
                var i = this._type;
                if ("plf" == i) this.parsePLFData(t), this.complete(t); else if ("image" === i) {
                    var n = new lt(t);
                    n.url = this._url, this.complete(n);
                } else if ("sound" === i || "htmlimage" === i || "nativeimage" === i) this.complete(t); else if ("atlas" === i) {
                    if (!t.src && !t._setContext) {
                        if (!this._data) {
                            if (this._data = t, t.meta && t.meta.image) for (var s = t.meta.image.split(","), a = this._url.indexOf("/") >= 0 ? "/" : "\\", r = this._url.lastIndexOf(a), o = r >= 0 ? this._url.substr(0, r + 1) : "", h = 0, l = s.length; h < l; h++) s[h] = o + s[h]; else s = [this._url.replace(".json", ".png")];
                            s.reverse(), t.toLoads = s, t.pics = [];
                        }
                        return this.event("progress", .3 + 1 / s.length * .6), this._loadImage(s.pop());
                    }
                    if (this._data.pics.push(t), this._data.toLoads.length > 0) return this.event("progress", .3 + 1 / this._data.toLoads.length * .6),
                        this._loadImage(this._data.toLoads.pop());
                    var u = this._data.frames, d = this._url.split("?")[0], _ = this._data.meta && this._data.meta.prefix ? this._data.meta.prefix : d.substring(0, d.lastIndexOf(".")) + "/", f = this._data.pics, p = R.formatURL(this._url), g = e.atlasMap[p] || (e.atlasMap[p] = []);
                    g.dir = _;
                    var v = 1;
                    if (this._data.meta && this._data.meta.scale && 1 != this._data.meta.scale) {
                        v = parseFloat(this._data.meta.scale);
                        for (var m in u) {
                            var y = u[m], w = f[y.frame.idx ? y.frame.idx : 0], x = R.formatURL(_ + m);
                            w.scaleRate = v;
                            var b;
                            b = lt.create(w, y.frame.x, y.frame.y, y.frame.w, y.frame.h, y.spriteSourceSize.x, y.spriteSourceSize.y, y.sourceSize.w, y.sourceSize.h),
                                e.cacheRes(x, b), b.url = x, g.push(x);
                        }
                    } else for (m in u) w = f[(y = u[m]).frame.idx ? y.frame.idx : 0], x = R.formatURL(_ + m),
                        e.cacheRes(x, lt.create(w, y.frame.x, y.frame.y, y.frame.w, y.frame.h, y.spriteSourceSize.x, y.spriteSourceSize.y, y.sourceSize.w, y.sourceSize.h)),
                        e.loadedMap[x].url = x, g.push(x);
                    delete this._data.pics, this.complete(this._data);
                } else if ("font" == i) {
                    if (!t.src) return this._data = t, this.event("progress", .5), this._loadImage(this._url.replace(".fnt", ".png"));
                    var L = new c();
                    L.parseFont(this._data, t);
                    var C = this._url.split(".fnt")[0].split("/"), M = C[C.length - 1];
                    gt.registerBitmapFont(M, L), this._data = L, this.complete(this._data);
                } else if ("pkm" == i) {
                    var T = bt.create(t, this._url), S = new lt(T);
                    S.url = this._url, this.complete(S);
                } else this.complete(t);
            }, n.parsePLFData = function (t) {
                var i, n, s;
                for (i in t) switch (s = t[i], i) {
                    case "json":
                    case "text":
                        for (n in s) e.preLoadedMap[R.formatURL(n)] = s[n];
                        break;

                    default:
                        for (n in s) e.preLoadedMap[R.formatURL(n)] = s[n];
                }
            }, n.complete = function (t) {
                this._data = t, this._customParse ? this.event("loaded", t instanceof Array ? [t] : t) : (e._loaders.push(this),
                    e._isWorking || e.checkNext());
            }, n.endLoad = function (t) {
                t && (this._data = t), this._cache && e.cacheRes(this._url, this._data), this.event("progress", 1),
                    this.event("complete", this.data instanceof Array ? [this.data] : this.data);
            }, a(0, n, "url", function () {
                return this._url;
            }), a(0, n, "data", function () {
                return this._data;
            }), a(0, n, "cache", function () {
                return this._cache;
            }), a(0, n, "type", function () {
                return this._type;
            }), e.checkNext = function () {
                e._isWorking = !0;
                for (var t = O.now(); e._startIndex < e._loaders.length;) if (O.now(), e._loaders[e._startIndex].endLoad(),
                    e._startIndex++, O.now() - t > e.maxTimeOut) return console.warn("loader callback cost a long time:" + (O.now() - t) + " url=" + e._loaders[e._startIndex - 1].url),
                        void i.timer.frameOnce(1, null, e.checkNext);
                e._loaders.length = 0, e._startIndex = 0, e._isWorking = !1;
            }, e.clearRes = function (t, i) {
                void 0 === i && (i = !1), t = R.formatURL(t);
                var n = e.getAtlas(t);
                if (n) {
                    for (var s = 0, a = n.length; s < a; s++) {
                        var r = n[s], o = e.getRes(r);
                        delete e.loadedMap[r], o && o.destroy(i);
                    }
                    n.length = 0, delete e.atlasMap[t], delete e.loadedMap[t];
                } else {
                    var h = e.loadedMap[t];
                    h && (delete e.loadedMap[t], h instanceof laya.resource.Texture && h.bitmap && h.destroy(i));
                }
            }, e.clearTextureRes = function (t) {
                t = R.formatURL(t);
                var e = laya.net.Loader.getAtlas(t), i = e && e.length > 0 ? laya.net.Loader.getRes(e[0]) : laya.net.Loader.getRes(t);
                i && i.bitmap && (P.isConchApp && !P.isConchWebGL ? i.bitmap.source.releaseTexture && i.bitmap.source.releaseTexture() : null == i.bitmap._atlaser && i.bitmap.releaseResource(!0));
            }, e.getRes = function (t) {
                return e.loadedMap[R.formatURL(t)];
            }, e.getAtlas = function (t) {
                return e.atlasMap[R.formatURL(t)];
            }, e.cacheRes = function (t, i) {
                t = R.formatURL(t), null != e.loadedMap[t] ? console.warn("Resources already exist,is repeated loading:", t) : e.loadedMap[t] = i;
            }, e.setGroup = function (t, i) {
                e.groupMap[i] || (e.groupMap[i] = []), e.groupMap[i].push(t);
            }, e.clearResByGroup = function (t) {
                if (e.groupMap[t]) {
                    var i = e.groupMap[t], n = 0, s = i.length;
                    for (n = 0; n < s; n++) e.clearRes(i[n]);
                    i.length = 0;
                }
            }, e.TEXT = "text", e.JSON = "json", e.XML = "xml", e.BUFFER = "arraybuffer", e.IMAGE = "image",
                e.SOUND = "sound", e.ATLAS = "atlas", e.FONT = "font", e.TTF = "ttf", e.PLF = "plf",
                e.PKM = "pkm", e.typeMap = {
                    png: "image",
                    jpg: "image",
                    jpeg: "image",
                    txt: "text",
                    json: "json",
                    xml: "xml",
                    als: "atlas",
                    atlas: "atlas",
                    mp3: "sound",
                    ogg: "sound",
                    wav: "sound",
                    part: "json",
                    fnt: "font",
                    pkm: "pkm",
                    ttf: "ttf",
                    plf: "plf",
                    ani: "json",
                    sk: "arraybuffer"
                }, e.parserMap = {}, e.groupMap = {}, e.maxTimeOut = 100, e.loadedMap = {}, e.preLoadedMap = {},
                e.atlasMap = {}, e._loaders = [], e._isWorking = !1, e._startIndex = 0, e.imgCache = {},
                e;
        }(), ot = function (t) {
            function e() {
                this.retryNum = 1, this.retryDelay = 0, this.maxLoader = 5, this._loaders = [],
                    this._loaderCount = 0, this._resInfos = [], this._infoPool = [], this._maxPriority = 5,
                    this._failRes = {}, e.__super.call(this);
                for (var t = 0; t < this._maxPriority; t++) this._resInfos[t] = [];
            }
            var a;
            s(e, "laya.net.LoaderManager", h);
            var r = e.prototype;
            return r.create = function (t, e, i, n, s, a, r, o) {
                if (void 0 === a && (a = 1), void 0 === r && (r = !0), t instanceof Array) {
                    var h = t, c = h.length, u = 0;
                    if (i) var d = l.create(i.caller, i.method, i.args, !1);
                    for (var _ = 0; _ < c; _++) {
                        var f = h[_];
                        "string" == typeof f && (f = h[_] = {
                            url: f
                        }), f.progress = 0;
                    }
                    for (_ = 0; _ < c; _++) {
                        f = h[_];
                        var p = i ? l.create(null, function (t, e) {
                            t.progress = e;
                            for (var i = 0, n = 0; n < c; n++) i += h[n].progress;
                            var s = i / c;
                            d.runWith(s);
                        }, [f], !1) : null, g = i || e ? l.create(null, function (t, i) {
                            u++, t.progress = 1, u === c && e && e.run();
                        }, [f]) : null;
                        this._create(f.url, g, p, f.clas || n, f.params || s, f.priority || a, r, f.group || o);
                    }
                    return !0;
                }
                return this._create(t, e, i, n, s, a, r, o);
            }, r._create = function (t, n, s, a, r, o, h, c) {
                void 0 === o && (o = 1), void 0 === h && (h = !0);
                var u = R.formatURL(t), d = this.getRes(u);
                if (d) !d.hasOwnProperty("loaded") || d.loaded ? (s && s.runWith(1), n && n.run()) : n && i.loader._createListener(t, n.caller, n.method, n.args, !0, !1); else {
                    var _ = q.getFileExtension(t), f = e.createMap[_];
                    if (!f) throw new Error("LoaderManager:unknown file(" + t + ") extension with: " + _ + ".");
                    a || (a = f[0]);
                    var p = f[1];
                    "atlas" == _ ? this.load(t, n, s, p, o, h) : (a === lt && (p = "htmlimage"), (d = a ? new a() : null).hasOwnProperty("_loaded") && (d._loaded = !1),
                        d._setUrl(t), c && d._setGroup(c), this._createLoad(d, t, l.create(null, function (e) {
                            d && !d.destroyed && e && d.onAsynLoaded.call(d, t, e, r), n && n.run(), i.loader.event(t);
                        }), s, p, o, !1, c, !0), h && this.cacheRes(u, d));
                }
                return d;
            }, r.load = function (t, n, s, r, o, h, l, c) {
                var u = this;
                if (void 0 === o && (o = 1), void 0 === h && (h = !0), void 0 === c && (c = !1),
                    t instanceof Array) return this._loadAssets(t, n, s, r, o, h, l);
                var d = rt.getRes(t);
                if (null != d) i.timer.frameOnce(1, null, function () {
                    s && s.runWith(1), n && n.runWith(d), u._loaderCount || u.event("complete");
                }); else {
                    var _ = e._resMap[t];
                    _ ? (n && _._createListener("complete", n.caller, n.method, n.args, !1, !1), s && _._createListener("progress", s.caller, s.method, s.args, !1, !1)) : ((_ = this._infoPool.length ? this._infoPool.pop() : new a()).url = t,
                        _.type = r, _.cache = h, _.group = l, _.ignoreCache = c, n && _.on("complete", n.caller, n.method, n.args),
                        s && _.on("progress", s.caller, s.method, s.args), e._resMap[t] = _, o = o < this._maxPriority ? o : this._maxPriority - 1,
                        this._resInfos[o].push(_), this._next());
                }
                return this;
            }, r._createLoad = function (t, n, s, r, o, h, l, c, u) {
                var d = this;
                if (void 0 === h && (h = 1), void 0 === l && (l = !0), void 0 === u && (u = !1),
                    n instanceof Array) return this._loadAssets(n, s, r, o, h, l, c);
                var _ = rt.getRes(n);
                if (null != _) i.timer.frameOnce(1, null, function () {
                    r && r.runWith(1), s && s.runWith(_), d._loaderCount || d.event("complete");
                }); else {
                    var f = e._resMap[n];
                    f ? (s && f._createListener("complete", s.caller, s.method, s.args, !1, !1), r && f._createListener("progress", r.caller, r.method, r.args, !1, !1)) : ((f = this._infoPool.length ? this._infoPool.pop() : new a()).url = n,
                        f.clas = t, f.type = o, f.cache = l, f.group = c, f.ignoreCache = u, s && f.on("complete", s.caller, s.method, s.args),
                        r && f.on("progress", r.caller, r.method, r.args), e._resMap[n] = f, h = h < this._maxPriority ? h : this._maxPriority - 1,
                        this._resInfos[h].push(f), this._next());
                }
                return this;
            }, r._next = function () {
                if (!(this._loaderCount >= this.maxLoader)) {
                    for (var t = 0; t < this._maxPriority; t++) for (var e = this._resInfos[t]; e.length > 0;) {
                        var i = e.shift();
                        if (i) return this._doLoad(i);
                    }
                    this._loaderCount || this.event("complete");
                }
            }, r._doLoad = function (t) {
                function e(e) {
                    i.offAll(), i._data = null, i._customParse = !1, n._loaders.push(i), n._endLoad(t, e instanceof Array ? [e] : e),
                        n._loaderCount--, n._next();
                }
                this._loaderCount++;
                var i = this._loaders.length ? this._loaders.pop() : new rt();
                i.on("complete", null, e), i.on("progress", null, function (e) {
                    t.event("progress", e);
                }), i.on("error", null, function (t) {
                    e(null);
                });
                var n = this;
                i._class = t.clas, i.load(t.url, t.type, t.cache, t.group, t.ignoreCache);
            }, r._endLoad = function (t, n) {
                var s = t.url;
                if (null == n) {
                    var a = this._failRes[s] || 0;
                    if (a < this.retryNum) return console.warn("[warn]Retry to load:", s), this._failRes[s] = a + 1,
                        void i.timer.once(this.retryDelay, this, this._addReTry, [t], !1);
                    console.warn("[error]Failed to load:", s), this.event("error", s);
                }
                this._failRes[s] && (this._failRes[s] = 0), delete e._resMap[s], t.event("complete", n),
                    t.offAll(), this._infoPool.push(t);
            }, r._addReTry = function (t) {
                this._resInfos[this._maxPriority - 1].push(t), this._next();
            }, r.clearRes = function (t, e) {
                void 0 === e && (e = !1), rt.clearRes(t, e);
            }, r.getRes = function (t) {
                return rt.getRes(t);
            }, r.cacheRes = function (t, e) {
                rt.cacheRes(t, e);
            }, r.clearTextureRes = function (t) {
                rt.clearTextureRes(t);
            }, r.setGroup = function (t, e) {
                rt.setGroup(t, e);
            }, r.clearResByGroup = function (t) {
                rt.clearResByGroup(t);
            }, r.clearUnLoaded = function () {
                for (var t = 0; t < this._maxPriority; t++) {
                    for (var i = this._resInfos[t], n = i.length - 1; n > -1; n--) {
                        var s = i[n];
                        s && (s.offAll(), this._infoPool.push(s));
                    }
                    i.length = 0;
                }
                this._loaderCount = 0, e._resMap = {};
            }, r.cancelLoadByUrls = function (t) {
                if (t) for (var e = 0, i = t.length; e < i; e++) this.cancelLoadByUrl(t[e]);
            }, r.cancelLoadByUrl = function (t) {
                for (var i = 0; i < this._maxPriority; i++) for (var n = this._resInfos[i], s = n.length - 1; s > -1; s--) {
                    var a = n[s];
                    a && a.url === t && (n[s] = null, a.offAll(), this._infoPool.push(a));
                }
                e._resMap[t] && delete e._resMap[t];
            }, r._loadAssets = function (t, e, i, n, s, a, r) {
                void 0 === s && (s = 1), void 0 === a && (a = !0);
                for (var o = t.length, h = 0, c = 0, u = [], d = !0, _ = 0; _ < o; _++) {
                    var f = t[_];
                    "string" == typeof f && (f = {
                        url: f,
                        type: n,
                        size: 1,
                        priority: s
                    }), f.size || (f.size = 1), f.progress = 0, c += f.size, u.push(f);
                    var p = i ? l.create(null, function (t, e) {
                        if (null != i) {
                            t.progress = e;
                            for (var n = 0, s = 0; s < u.length; s++) {
                                var a = u[s];
                                n += a.size * a.progress;
                            }
                            var r = n / c;
                            i.runWith(r);
                        }
                    }, [f], !1) : null, g = e || i ? l.create(null, function (t, i) {
                        h++, t.progress = 1, i || (d = !1), h === o && e && e.runWith(d);
                    }, [f]) : null;
                    this.load(f.url, g, p, f.type, f.priority || 1, a, f.group || r);
                }
                return this;
            }, e.cacheRes = function (t, e) {
                rt.cacheRes(t, e);
            }, e._resMap = {}, n(e, ["createMap", function () {
                return this.createMap = {
                    atlas: [null, "atlas"]
                };
            }]), e.__init$ = function () {
                a = function (t) {
                    function e() {
                        this.url = null, this.type = null, this.cache = !1, this.group = null, this.ignoreCache = !1,
                            this.clas = null, e.__super.call(this);
                    }
                    return s(e, "", h), e;
                }();
            }, e;
        }(), ht = (function (t) {
            function e(t) {
                e.__super.call(this), t || (t = [.3, .59, .11, 0, 0, .3, .59, .11, 0, 0, .3, .59, .11, 0, 0, 0, 0, 0, 1, 0]),
                    this._mat = new Float32Array(16), this._alpha = new Float32Array(4);
                for (var i = 0, n = 0, s = 0; s < 20; s++) s % 5 != 4 ? this._mat[i++] = t[s] : this._alpha[n++] = t[s];
                this._action = r.createFilterAction(32), this._action.data = this;
            }
            s(e, "laya.filters.ColorFilter", w);
            var n = e.prototype;
            i.imps(n, {
                "laya.filters.IFilter": !0
            }), n.callNative = function (t) {
                t._$P.cf = this;
                t.conchModel && t.conchModel.setFilterMatrix && t.conchModel.setFilterMatrix(this._mat, this._alpha);
            }, a(0, n, "type", function () {
                return 32;
            }), a(0, n, "action", function () {
                return this._action;
            });
        }(), function (t) {
            function e(t, i, n) {
                this._endian = null, this._stamp = NaN, this._socket = null, this._connected = !1,
                    this._addInputPosition = 0, this._input = null, this._output = null, this.timeout = 0,
                    this.objectEncoding = 0, this.disableInput = !1, this._byteClass = null, this.protocols = [],
                    void 0 === i && (i = 0), e.__super.call(this), this._byteClass = n || N, this.endian = "bigEndian",
                    this.timeout = 2e4, this._addInputPosition = 0, t && i > 0 && i < 65535 && this.connect(t, i);
            }
            s(e, "laya.net.Socket", h);
            var i = e.prototype;
            i.connect = function (t, e) {
                var i = "ws://" + t + ":" + e;
                i = "https:" == O.window.location.protocol ? "wss://" + t + ":" + e : "ws://" + t + ":" + e,
                    this.connectByUrl(i);
            }, i.connectByUrl = function (t) {
                var e = this;
                null != this._socket && this.close(), this._socket && this.cleanSocket(), this.protocols && 0 != this.protocols.length ? this._socket = new O.window.WebSocket(t, this.protocols) : this._socket = new O.window.WebSocket(t),
                    this._socket.binaryType = "arraybuffer", this._output = new this._byteClass(), this._output.endian = this.endian,
                    this._input = new this._byteClass(), this._input.endian = this.endian, this._addInputPosition = 0,
                    this._socket.onopen = function (t) {
                        e._onOpen(t);
                    }, this._socket.onmessage = function (t) {
                        e._onMessage(t);
                    }, this._socket.onclose = function (t) {
                        e._onClose(t);
                    }, this._socket.onerror = function (t) {
                        e._onError(t);
                    };
            }, i.cleanSocket = function () {
                try {
                    this._socket.close();
                } catch (t) { }
                this._connected = !1, this._socket.onopen = null, this._socket.onmessage = null,
                    this._socket.onclose = null, this._socket.onerror = null, this._socket = null;
            }, i.close = function () {
                if (null != this._socket) try {
                    this._socket.close();
                } catch (t) { }
            }, i._onOpen = function (t) {
                this._connected = !0, this.event("open", t);
            }, i._onMessage = function (t) {
                if (t && t.data) {
                    var e = t.data;
                    if (this.disableInput && e) this.event("message", e); else {
                        this._input.length > 0 && this._input.bytesAvailable < 1 && (this._input.clear(),
                            this._addInputPosition = 0);
                        var i = this._input.pos;
                        !this._addInputPosition && (this._addInputPosition = 0), this._input.pos = this._addInputPosition,
                            e && ("string" == typeof e ? this._input.writeUTFBytes(e) : this._input.writeArrayBuffer(e),
                                this._addInputPosition = this._input.pos, this._input.pos = i), this.event("message", e);
                    }
                }
            }, i._onClose = function (t) {
                this._connected = !1, this.event("close", t);
            }, i._onError = function (t) {
                this.event("error", t);
            }, i.send = function (t) {
                this._socket.send(t);
            }, i.flush = function () {
                if (this._output && this._output.length > 0) {
                    var t;
                    try {
                        this._socket && this._socket.send(this._output.__getBuffer().slice(0, this._output.length));
                    } catch (e) {
                        t = e;
                    }
                    this._output.endian = this.endian, this._output.clear(), t && this.event("error", t);
                }
            }, a(0, i, "input", function () {
                return this._input;
            }), a(0, i, "output", function () {
                return this._output;
            }), a(0, i, "connected", function () {
                return this._connected;
            }), a(0, i, "endian", function () {
                return this._endian;
            }, function (t) {
                this._endian = t, null != this._input && (this._input.endian = t), null != this._output && (this._output.endian = t);
            }), e.LITTLE_ENDIAN = "littleEndian", e.BIG_ENDIAN = "bigEndian";
        }(), function (t) {
            function e() {
                this.worker = null, e.__super.call(this);
                var t = this;
                this.worker = new O.window.Worker(e.workerPath), this.worker.onmessage = function (e) {
                    t.workerMessage(e.data);
                };
            }
            s(e, "laya.net.WorkerLoader", h);
            var i = e.prototype;
            i.workerMessage = function (t) {
                if (t) switch (t.type) {
                    case "Image":
                        this.imageLoaded(t);
                        break;

                    case "Msg":
                        this.event("image_msg", t.msg);
                }
            }, i.imageLoaded = function (t) {
                if (t && t.buffer && t.buffer.length < 10) return e._enable = !1, this._myTrace("buffer lost when postmessage ,disable workerloader"),
                    this.event(t.url, null), void this.event("image_err", t.url + "\n" + t.msg);
                if (!t.dataType) return this.event(t.url, null), void this.event("image_err", t.url + "\n" + t.msg);
                var i, n, s;
                switch (t.dataType) {
                    case "buffer":
                        (s = (n = (i = new yt("2D")).source.getContext("2d")).createImageData(t.width, t.height)).data.set(t.buffer),
                            i.size(s.width, s.height), n.putImageData(s, 0, 0), i.memorySize = 0;
                        break;

                    case "imagedata":
                        n = (i = new yt("2D")).source.getContext("2d"), s = t.imagedata, i.size(s.width, s.height),
                            n.putImageData(s, 0, 0), s = t.imagedata, i.memorySize = 0;
                        break;

                    case "imageBitmap":
                        s = t.imageBitmap, P.isWebGL ? i = s : (n = (i = new yt("2D")).source.getContext("2d"),
                            i.size(s.width, s.height), n.drawImage(s, 0, 0), i.src = t.url);
                }
                P.isWebGL && (i = new laya.webgl.resource.WebGLImage(i, t.url)), this.event(t.url, i);
            }, i._myTrace = function (t) {
                var e = arguments, i = [], n = 0, s = e.length;
                for (n = 0; n < s; n++) i.push(e[n]);
                this.event("image_msg", i.join(" "));
            }, i.loadImage = function (t) {
                var e;
                (e = {}).type = "load", e.url = t, this.worker.postMessage(e);
            }, i._loadImage = function (t) {
                var i = this;
                if (!e._enable || t.toLowerCase().indexOf(".png") < 0) e._preLoadFun.call(i, t); else {
                    t = R.formatURL(t);
                    var n = function (s) {
                        laya.net.WorkerLoader.I.off(t, i, n), s ? i.onLoaded(s) : e._preLoadFun.call(i, t);
                    };
                    laya.net.WorkerLoader.I.on(t, i, n), laya.net.WorkerLoader.I.loadImage(t);
                }
            }, a(1, e, "enable", function () {
                return e._enable;
            }, function (t) {
                e.disableJSDecode && !O.window.createImageBitmap || (e._enable = t) && null == e._preLoadFun && (e._enable = e.__init__());
            }), e.__init__ = function () {
                return null == e._preLoadFun && (!!O.window.Worker && (e._preLoadFun = rt.prototype._loadImage,
                    rt.prototype._loadImage = e.prototype._loadImage, e.I || (e.I = new e()), !0));
            }, e.workerSupported = function () {
                return !!O.window.Worker;
            }, e.IMAGE_LOADED = "image_loaded", e.IMAGE_ERR = "image_err", e.IMAGE_MSG = "image_msg",
                e.I = null, e._preLoadFun = null, e._enable = !1, e.workerPath = "libs/worker.js",
                e.disableJSDecode = !0;
        }(), function (t) {
            function e() {
                e.__super.call(this), this._$1__id = ++e._uniqueIDCounter, this.__loaded = !0, this._destroyed = !1,
                    this._referenceCount = 0, e._idResourcesMap[this.id] = this, this._released = !0,
                    this.lock = !1, this._memorySize = 0, this._lastUseFrameCount = -1, B.currentResourceManager && B.currentResourceManager.addResource(this);
            }
            s(e, "laya.resource.Resource", h);
            var n = e.prototype;
            return i.imps(n, {
                "laya.resource.ICreateResource": !0,
                "laya.resource.IDispose": !0
            }), n._setUrl = function (t) {
                if (this._url !== t) {
                    var i;
                    this._url && ((i = e._urlResourcesMap[this._url]).splice(i.indexOf(this), 1), 0 === i.length && delete e._urlResourcesMap[this._url]),
                        t && ((i = e._urlResourcesMap[t]) || (e._urlResourcesMap[t] = i = []), i.push(this)),
                        this._url = t;
                }
            }, n._getGroup = function () {
                return this._group;
            }, n._setGroup = function (t) {
                if (this._group !== t) {
                    var i;
                    this._group && ((i = e._groupResourcesMap[this._group]).splice(i.indexOf(this), 1),
                        0 === i.length && delete e._groupResourcesMap[this._group]), t && ((i = e._groupResourcesMap[t]) || (e._groupResourcesMap[t] = i = []),
                            i.push(this)), this._group = t;
                }
            }, n._addReference = function () {
                this._referenceCount++;
            }, n._removeReference = function () {
                this._referenceCount--;
            }, n._clearReference = function () {
                this._referenceCount = 0;
            }, n._endLoaded = function () {
                this.__loaded = !0, this.event("loaded", this);
            }, n.recreateResource = function () {
                this.completeCreate();
            }, n.disposeResource = function () { }, n.activeResource = function (t) {
                void 0 === t && (t = !1), this._lastUseFrameCount = X.loopCount, !this._destroyed && this.__loaded && (this._released || t) && this.recreateResource();
            }, n.releaseResource = function (t) {
                return void 0 === t && (t = !1), !(!t && this.lock) && (!(this._released && !t) && (this.disposeResource(),
                    this._released = !0, this._lastUseFrameCount = -1, this.event("released", this),
                    !0));
            }, n.onAsynLoaded = function (t, e, i) {
                throw new Error("Resource: must override this function!");
            }, n.destroy = function () {
                if (!this._destroyed) {
                    null !== this._resourceManager && this._resourceManager.removeResource(this), this._destroyed = !0,
                        this.lock = !1, this.releaseResource(), delete e._idResourcesMap[this.id];
                    var t;
                    this._url && ((t = e._urlResourcesMap[this._url]) && (t.splice(t.indexOf(this), 1),
                        0 === t.length && delete e._urlResourcesMap[this.url]), rt.clearRes(this._url),
                        this.__loaded || r.cancelLoadByUrl(this._url)), this._group && ((t = e._groupResourcesMap[this._group]).splice(t.indexOf(this), 1),
                            0 === t.length && delete e._groupResourcesMap[this.url]);
                }
            }, n.completeCreate = function () {
                this._released = !1, this.event("recovered", this);
            }, n.dispose = function () {
                this.destroy();
            }, a(0, n, "memorySize", function () {
                return this._memorySize;
            }, function (t) {
                var e = t - this._memorySize;
                this._memorySize = t, this.resourceManager && this.resourceManager.addSize(e);
            }), a(0, n, "_loaded", null, function (t) {
                this.__loaded = t;
            }), a(0, n, "loaded", function () {
                return this.__loaded;
            }), a(0, n, "id", function () {
                return this._$1__id;
            }), a(0, n, "destroyed", function () {
                return this._destroyed;
            }), a(0, n, "group", function () {
                return this._getGroup();
            }, function (t) {
                this._setGroup(t);
            }), a(0, n, "resourceManager", function () {
                return this._resourceManager;
            }), a(0, n, "url", function () {
                return this._url;
            }), a(0, n, "released", function () {
                return this._released;
            }), a(0, n, "referenceCount", function () {
                return this._referenceCount;
            }), e.getResourceByID = function (t) {
                return e._idResourcesMap[t];
            }, e.getResourceByURL = function (t, i) {
                return void 0 === i && (i = 0), e._urlResourcesMap[t][i];
            }, e.getResourceCountByURL = function (t) {
                return e._urlResourcesMap[t].length;
            }, e.destroyUnusedResources = function (t) {
                var i;
                if (t) {
                    var n = e._groupResourcesMap[t];
                    if (n) for (var s = n.slice(), a = 0, r = s.length; a < r; a++) (i = s[a]).lock || 0 !== i._referenceCount || i.destroy();
                } else for (var o in e._idResourcesMap) (i = e._idResourcesMap[o]).lock || 0 !== i._referenceCount || i.destroy();
            }, e._uniqueIDCounter = 0, e._idResourcesMap = {}, e._urlResourcesMap = {}, e._groupResourcesMap = {},
                e;
        }()), lt = function (e) {
            function n(t, e) {
                this.offsetX = 0, this.offsetY = 0, this.sourceWidth = 0, this.sourceHeight = 0,
                    this._w = 0, this._h = 0, this._uvID = 0, this._atlasID = -1, this.scaleRate = 1,
                    n.__super.call(this), t && null != t._addReference && t._addReference(), this.setTo(t, e);
            }
            s(n, "laya.resource.Texture", h);
            var o = n.prototype;
            return o._setUrl = function (t) {
                this.url = t;
            }, o.setTo = function (e, i) {
                if (e instanceof t.HTMLElement) {
                    var s = yt.create("2D", e);
                    this.bitmap = s;
                } else this.bitmap = e;
                if (this.uv = i || n.DEF_UV, e) {
                    this._w = e.width, this._h = e.height, this.sourceWidth = this.sourceWidth || this._w,
                        this.sourceHeight = this.sourceHeight || this._h, this._loaded = this._w > 0;
                    var a = this;
                    if (this._loaded) r.addToAtlas && r.addToAtlas(a); else {
                        var o = e;
                        o instanceof laya.resource.HTMLImage && o.image && o.image.addEventListener("load", function (t) {
                            r.addToAtlas && r.addToAtlas(a);
                        }, !1);
                    }
                }
            }, o.active = function () {
                this.bitmap && this.bitmap.activeResource();
            }, o.destroy = function (t) {
                if (void 0 === t && (t = !1), this.bitmap && this.bitmap.referenceCount > 0) {
                    var e = this.bitmap;
                    t ? (P.isConchApp && e.source && e.source.conchDestroy && this.bitmap.source.conchDestroy(),
                        this.bitmap = null, e.dispose(), e._clearReference()) : (e._removeReference(), 0 == e.referenceCount && (P.isConchApp && e.source && e.source.conchDestroy && this.bitmap.source.conchDestroy(),
                            this.bitmap = null, e.dispose())), this.url && this === i.loader.getRes(this.url) && i.loader.clearRes(this.url, t),
                        this._loaded = !1;
                }
            }, o.load = function (t) {
                var e = this;
                this._loaded = !1, t = R.customFormat(t);
                var i = this.bitmap || (this.bitmap = bt.create(t));
                i && i._addReference();
                var n = this;
                i.onload = function () {
                    i.onload = null, n._loaded = !0, e.sourceWidth = e._w = i.width, e.sourceHeight = e._h = i.height,
                        n.event("loaded", this), r.addToAtlas && r.addToAtlas(n);
                };
            }, o.addTextureToAtlas = function (t) {
                r.addTextureToAtlas(this);
            }, o.getPixels = function (t, e, i, n) {
                if (P.isConchApp) {
                    var s = this.bitmap;
                    if (s.source && s.source.getImageData) {
                        var a = s.source.getImageData(t, e, i, n), o = new Uint8Array(a);
                        return Array.from(o);
                    }
                    return null;
                }
                if (P.isWebGL) return r.getTexturePixels(this, t, e, i, n);
                O.canvas.size(i, n), O.canvas.clear(), O.context.drawTexture(this, -t, -e, this.width, this.height, 0, 0);
                return O.context.getImageData(0, 0, i, n).data;
            }, o.onAsynLoaded = function (t, e) {
                e && e._addReference(), this.setTo(e, this.uv);
            }, a(0, o, "source", function () {
                return this.bitmap ? (this.bitmap.activeResource(), this.bitmap.source) : null;
            }), a(0, o, "loaded", function () {
                return this._loaded;
            }), a(0, o, "released", function () {
                return !this.bitmap || this.bitmap.released;
            }), a(0, o, "width", function () {
                return this._w ? this._w : this.uv && this.uv !== n.DEF_UV ? (this.uv[2] - this.uv[0]) * this.bitmap.width : this.bitmap.width;
            }, function (t) {
                this._w = t, this.sourceWidth || (this.sourceWidth = t);
            }), a(0, o, "repeat", function () {
                return !P.isWebGL || !this.bitmap || this.bitmap.repeat;
            }, function (t) {
                t && P.isWebGL && this.bitmap && (this.bitmap.repeat = t, t && (this.bitmap.enableMerageInAtlas = !1));
            }), a(0, o, "height", function () {
                return this._h ? this._h : this.uv && this.uv !== n.DEF_UV ? (this.uv[5] - this.uv[1]) * this.bitmap.height : this.bitmap.height;
            }, function (t) {
                this._h = t, this.sourceHeight || (this.sourceHeight = t);
            }), a(0, o, "isLinearSampling", function () {
                return !P.isWebGL || 9728 != this.bitmap.minFifter;
            }, function (t) {
                !t && P.isWebGL && (t || -1 != this.bitmap.minFifter || -1 != this.bitmap.magFifter || (this.bitmap.minFifter = 9728,
                    this.bitmap.magFifter = 9728, this.bitmap.enableMerageInAtlas = !1));
            }), n.moveUV = function (t, e, i) {
                for (var n = 0; n < 8; n += 2) i[n] += t, i[n + 1] += e;
                return i;
            }, n.create = function (t, e, i, s, a, o, h, l, c) {
                void 0 === o && (o = 0), void 0 === h && (h = 0), void 0 === l && (l = 0), void 0 === c && (c = 0);
                var u = t instanceof laya.resource.Texture, d = u ? t.uv : n.DEF_UV, _ = u ? t.bitmap : t, f = r.isAtlas(_);
                if (f) {
                    var p = _._atlaser, g = t._atlasID;
                    if (-1 == g) throw new Error("create texture error");
                    _ = p._inAtlasTextureBitmapValue[g], d = p._inAtlasTextureOriUVValue[g];
                }
                var v = new n(_, null);
                _.width && e + s > _.width && (s = _.width - e), _.height && i + a > _.height && (a = _.height - i),
                    v.width = s, v.height = a, v.offsetX = o, v.offsetY = h, v.sourceWidth = l || s,
                    v.sourceHeight = c || a;
                var m = 1 / _.width, y = 1 / _.height;
                e *= m, i *= y, s *= m, a *= y;
                var w = v.uv[0], x = v.uv[1], b = v.uv[4], L = v.uv[5], C = b - w, M = L - x, T = n.moveUV(d[0], d[1], [e, i, e + s, i, e + s, i + a, e, i + a]);
                v.uv = [w + T[0] * C, x + T[1] * M, b - (1 - T[2]) * C, x + T[3] * M, b - (1 - T[4]) * C, L - (1 - T[5]) * M, w + T[6] * C, L - (1 - T[7]) * M],
                    f && v.addTextureToAtlas();
                var S = _.scaleRate;
                return S && 1 != S ? (v.sourceWidth /= S, v.sourceHeight /= S, v.width /= S, v.height /= S,
                    v.scaleRate = S, v.offsetX /= S, v.offsetY /= S) : v.scaleRate = 1, v;
            }, n.createFromTexture = function (t, e, i, s, a) {
                var r = t.scaleRate;
                1 != r && (e *= r, i *= r, s *= r, a *= r);
                var o = S.TEMP.setTo(e - t.offsetX, i - t.offsetY, s, a), h = o.intersection(n._rect1.setTo(0, 0, t.width, t.height), n._rect2);
                if (!h) return null;
                var l = n.create(t, h.x, h.y, h.width, h.height, h.x - o.x, h.y - o.y, s, a);
                return l.bitmap._removeReference(), l;
            }, n.DEF_UV = [0, 0, 1, 0, 1, 1, 0, 1], n.INV_UV = [0, 1, 1, 1, 1, 0, 0, 0],
                n._rect1 = new S(), n._rect2 = new S(), n;
        }(), ct = function (t) {
            function e() {
                this._labelDic = null, this._tweenDic = {}, this._tweenDataList = [], this._endTweenDataList = null,
                    this._currTime = 0, this._lastTime = 0, this._startTime = 0, this._index = 0, this._gidIndex = 0,
                    this._firstTweenDic = {}, this._startTimeSort = !1, this._endTimeSort = !1, this._loopKey = !1,
                    this.scale = 1, this._frameRate = 60, this._frameIndex = 0, this._total = 0, e.__super.call(this);
            }
            var n;
            s(e, "laya.utils.TimeLine", h);
            var r = e.prototype;
            return r.to = function (t, e, i, n, s) {
                return void 0 === s && (s = 0), this._create(t, e, i, n, s, !0);
            }, r.from = function (t, e, i, n, s) {
                return void 0 === s && (s = 0), this._create(t, e, i, n, s, !1);
            }, r._create = function (t, e, i, s, a, r) {
                var o = Y.getItemByClass("tweenData", n);
                return o.isTo = r, o.type = 0, o.target = t, o.duration = i, o.data = e, o.startTime = this._startTime + a,
                    o.endTime = o.startTime + o.duration, o.ease = s, this._startTime = Math.max(o.endTime, this._startTime),
                    this._tweenDataList.push(o), this._startTimeSort = !0, this._endTimeSort = !0, this;
            }, r.addLabel = function (t, e) {
                var i = Y.getItemByClass("tweenData", n);
                return i.type = 1, i.data = t, i.endTime = i.startTime = this._startTime + e, this._labelDic || (this._labelDic = {}),
                    this._labelDic[t] = i, this._tweenDataList.push(i), this;
            }, r.removeLabel = function (t) {
                if (this._labelDic && this._labelDic[t]) {
                    var e = this._labelDic[t];
                    if (e) {
                        var i = this._tweenDataList.indexOf(e);
                        i > -1 && this._tweenDataList.splice(i, 1);
                    }
                    delete this._labelDic[t];
                }
            }, r.gotoTime = function (t) {
                if (null != this._tweenDataList && 0 != this._tweenDataList.length) {
                    var e, i;
                    for (var n in this._firstTweenDic) if (i = this._firstTweenDic[n]) for (var s in i) i.diyTarget.hasOwnProperty(s) && (i.diyTarget[s] = i[s]);
                    for (n in this._tweenDic) (e = this._tweenDic[n]).clear(), delete this._tweenDic[n];
                    this._index = 0, this._gidIndex = 0, this._currTime = t, this._lastTime = O.now();
                    var a;
                    null == this._endTweenDataList || this._endTimeSort ? (this._endTimeSort = !1, this._endTweenDataList = a = this._tweenDataList.concat(),
                        a.sort(function (t, e) {
                            return t.endTime > e.endTime ? 1 : t.endTime < e.endTime ? -1 : 0;
                        })) : a = this._endTweenDataList;
                    for (var r, o = 0, h = a.length; o < h; o++) if (0 == (r = a[o]).type) {
                        if (!(t >= r.endTime)) break;
                        this._index = Math.max(this._index, o + 1);
                        var c = r.data;
                        if (r.isTo) for (var u in c) r.target[u] = c[u];
                    }
                    for (o = 0, h = this._tweenDataList.length; o < h; o++) 0 == (r = this._tweenDataList[o]).type && t >= r.startTime && t < r.endTime && (this._index = Math.max(this._index, o + 1),
                        this._gidIndex++, (e = Y.getItemByClass("tween", j))._create(r.target, r.data, r.duration, r.ease, l.create(this, this._animComplete, [this._gidIndex]), 0, !1, r.isTo, !0, !1),
                        e.setStartTime(this._currTime - (t - r.startTime)), e._updateEase(this._currTime),
                        e.gid = this._gidIndex, this._tweenDic[this._gidIndex] = e);
                }
            }, r.gotoLabel = function (t) {
                if (null != this._labelDic) {
                    var e = this._labelDic[t];
                    e && this.gotoTime(e.startTime);
                }
            }, r.pause = function () {
                i.timer.clear(this, this._update);
            }, r.resume = function () {
                this.play(this._currTime, this._loopKey);
            }, r.play = function (t, e) {
                if (void 0 === t && (t = 0), void 0 === e && (e = !1), this._tweenDataList) {
                    if (this._startTimeSort) {
                        this._startTimeSort = !1, this._tweenDataList.sort(function (t, e) {
                            return t.startTime > e.startTime ? 1 : t.startTime < e.startTime ? -1 : 0;
                        });
                        for (var n = 0, s = this._tweenDataList.length; n < s; n++) {
                            var a = this._tweenDataList[n];
                            if (null != a && 0 == a.type) {
                                var r = a.target, o = r.$_GID || (r.$_GID = q.getGID()), h = null;
                                null == this._firstTweenDic[o] ? ((h = {}).diyTarget = r, this._firstTweenDic[o] = h) : h = this._firstTweenDic[o];
                                for (var l in a.data) null == h[l] && (h[l] = r[l]);
                            }
                        }
                    }
                    "string" == typeof t ? this.gotoLabel(t) : this.gotoTime(t), this._loopKey = e,
                        this._lastTime = O.now(), i.timer.frameLoop(1, this, this._update);
                }
            }, r._update = function () {
                if (this._currTime >= this._startTime) {
                    if (!this._loopKey) {
                        for (var t in this._tweenDic) (s = this._tweenDic[t]).complete();
                        return this._complete(), void this.pause();
                    }
                    if (this._complete(), !this._tweenDataList) return;
                    this.gotoTime(0);
                }
                var e = O.now(), i = e - this._lastTime, n = this._currTime += i * this.scale;
                this._lastTime = e;
                for (t in this._tweenDic) (s = this._tweenDic[t])._updateEase(n);
                var s;
                if (0 != this._tweenDataList.length && this._index < this._tweenDataList.length) {
                    var a = this._tweenDataList[this._index];
                    n >= a.startTime && (this._index++, 0 == a.type ? (this._gidIndex++, (s = Y.getItemByClass("tween", j))._create(a.target, a.data, a.duration, a.ease, l.create(this, this._animComplete, [this._gidIndex]), 0, !1, a.isTo, !0, !1),
                        s.setStartTime(n), s.gid = this._gidIndex, this._tweenDic[this._gidIndex] = s, s._updateEase(n)) : this.event("label", a.data));
                }
            }, r._animComplete = function (t) {
                this._tweenDic[t] && delete this._tweenDic[t];
            }, r._complete = function () {
                this.event("complete");
            }, r.reset = function () {
                var t;
                if (this._labelDic) for (t in this._labelDic) delete this._labelDic[t];
                for (t in this._tweenDic) this._tweenDic[t].clear(), delete this._tweenDic[t];
                for (t in this._firstTweenDic) delete this._firstTweenDic[t];
                if (this._endTweenDataList = null, this._tweenDataList && this._tweenDataList.length) {
                    var e = 0, n = 0;
                    for (n = this._tweenDataList.length, e = 0; e < n; e++) this._tweenDataList[e] && this._tweenDataList[e].destroy();
                }
                this._tweenDataList.length = 0, this._currTime = 0, this._lastTime = 0, this._startTime = 0,
                    this._index = 0, this._gidIndex = 0, this.scale = 1, i.timer.clear(this, this._update);
            }, r.destroy = function () {
                this.reset(), this._labelDic = null, this._tweenDic = null, this._tweenDataList = null,
                    this._firstTweenDic = null;
            }, a(0, r, "index", function () {
                return this._frameIndex;
            }, function (t) {
                this._frameIndex = t, this.gotoTime(this._frameIndex / this._frameRate * 1e3);
            }), a(0, r, "total", function () {
                return this._total = Math.floor(this._startTime / 1e3 * this._frameRate), this._total;
            }), e.to = function (t, i, n, s, a) {
                return void 0 === a && (a = 0), new e().to(t, i, n, s, a);
            }, e.from = function (t, i, n, s, a) {
                return void 0 === a && (a = 0), new e().from(t, i, n, s, a);
            }, e.__init$ = function () {
                n = function () {
                    function t() {
                        this.type = 0, this.isTo = !0, this.startTime = NaN, this.endTime = NaN, this.target = null,
                            this.duration = NaN, this.ease = null, this.data = null;
                    }
                    s(t, "");
                    return t.prototype.destroy = function () {
                        this.target = null, this.ease = null, this.data = null, this.isTo = !0, this.type = 0,
                            Y.recover("tweenData", this);
                    }, t;
                }();
            }, e;
        }(), ut = function (e) {
            function o() {
                this._transform = null, this._tfChanged = !1, this._x = 0, this._y = 0, this._width = 0,
                    this._height = 0, this._repaint = 1, this._mouseEnableState = 0, this._zOrder = 0,
                    this._graphics = null, this._renderType = 0, this._optimizeScrollRect = !1, this._texture = null,
                    this.mouseThrough = !1, this.autoSize = !1, this.hitTestPrior = !1, this.viewport = null,
                    o.__super.call(this), this._style = u.EMPTY;
            }
            s(o, "laya.display.Sprite", e);
            var h = o.prototype;
            return i.imps(h, {
                "laya.display.ILayout": !0
            }), h.createConchModel = function () {
                return new ConchNode();
            }, h.destroy = function (t) {
                void 0 === t && (t = !0), this._releaseMem(), e.prototype.destroy.call(this, t),
                    this._style && this._style.destroy(), this._transform && this._transform.destroy(),
                    this._transform = null, this._style = null, this._graphics = null;
            }, h.updateZOrder = function () {
                q.updateOrder(this._childs) && this.repaint();
            }, h.reCache = function () {
                this._$P.cacheCanvas && (this._$P.cacheCanvas.reCache = !0), this._repaint = 1;
            }, h.setBounds = function (t) {
                this._set$P("uBounds", t);
            }, h.getBounds = function () {
                return this._$P.mBounds || this._set$P("mBounds", new S()), S._getWrapRec(this._boundPointsToParent(), this._$P.mBounds);
            }, h.getSelfBounds = function () {
                return this._$P.uBounds ? this._$P.uBounds : (this._$P.mBounds || this._set$P("mBounds", new S()),
                    S._getWrapRec(this._getBoundPointsM(!1), this._$P.mBounds));
            }, h._boundPointsToParent = function (t) {
                void 0 === t && (t = !1);
                var e = 0, i = 0;
                this._style && (e = this._style._tf.translateX, i = this._style._tf.translateY,
                    t = t || 0 !== this._style._tf.rotate, this._style.scrollRect && (e += this._style.scrollRect.x,
                        i += this._style.scrollRect.y));
                var n = this._getBoundPointsM(t);
                if (!n || n.length < 1) return n;
                if (8 != n.length && (n = t ? L.scanPList(n) : S._getWrapRec(n, S.TEMP)._getBoundPoints()),
                    !this.transform) return q.transPointList(n, this._x - e, this._y - i), n;
                var s = T.TEMP, a = 0, r = n.length;
                for (a = 0; a < r; a += 2) s.x = n[a], s.y = n[a + 1], this.toParentPoint(s), n[a] = s.x,
                    n[a + 1] = s.y;
                return n;
            }, h.getGraphicBounds = function (t) {
                return void 0 === t && (t = !1), this._graphics ? this._graphics.getBounds(t) : S.TEMP.setTo(0, 0, 0, 0);
            }, h._getBoundPointsM = function (t) {
                if (void 0 === t && (t = !1), this._$P.uBounds) return this._$P.uBounds._getBoundPoints();
                if (this._$P.temBM || this._set$P("temBM", []), this.scrollRect) {
                    var e = q.clearArray(this._$P.temBM), i = S.TEMP;
                    return i.copyFrom(this.scrollRect), q.concatArray(e, i._getBoundPoints()), e;
                }
                for (var n, s, a, r = this._graphics ? this._graphics.getBoundPoints() : q.clearArray(this._$P.temBM), o = 0, h = (a = this._childs).length; o < h; o++) (n = a[o]) instanceof laya.display.Sprite && 1 == n.visible && (s = n._boundPointsToParent(t)) && (r = r ? q.concatArray(r, s) : s);
                return r;
            }, h.getStyle = function () {
                return this._style === u.EMPTY && (this._style = new u()), this._style;
            }, h.setStyle = function (t) {
                this._style = t;
            }, h._adjustTransform = function () {
                this._tfChanged = !1;
                var t, e = this._style._tf, i = e.scaleX, n = e.scaleY;
                if (e.rotate || 1 !== i || 1 !== n || e.skewX || e.skewY) {
                    (t = this._transform || (this._transform = M.create())).bTransform = !0;
                    var s = .0174532922222222 * (e.rotate - e.skewX), a = .0174532922222222 * (e.rotate + e.skewY), r = Math.cos(a), o = Math.sin(a), h = Math.sin(s), l = Math.cos(s);
                    return t.a = i * r, t.b = i * o, t.c = -n * h, t.d = n * l, t.tx = t.ty = 0, t;
                }
                return this._transform && this._transform.destroy(), this._transform = null, this._renderType &= -5,
                    t;
            }, h.pos = function (t, e, i) {
                if (void 0 === i && (i = !1), this._x !== t || this._y !== e) {
                    if (this.destroyed) return this;
                    if (i) {
                        this._x = t, this._y = e, this.conchModel && this.conchModel.pos(this._x, this._y);
                        var n = this._parent;
                        n && 0 === n._repaint && (n._repaint = 1, n.parentRepaint()), this._$P.maskParent && 0 === this._$P.maskParent._repaint && (this._$P.maskParent._repaint = 1,
                            this._$P.maskParent.parentRepaint());
                    } else this.x = t, this.y = e;
                }
                return this;
            }, h.pivot = function (t, e) {
                return this.pivotX = t, this.pivotY = e, this;
            }, h.size = function (t, e) {
                return this.width = t, this.height = e, this;
            }, h.scale = function (t, e, i) {
                void 0 === i && (i = !1);
                var n = this.getStyle(), s = n._tf;
                if (s.scaleX != t || s.scaleY != e) {
                    if (this.destroyed) return this;
                    if (i) {
                        n.setScale(t, e), this._tfChanged = !0, this.conchModel && this.conchModel.scale(t, e),
                            this._renderType |= 4;
                        var a = this._parent;
                        a && 0 === a._repaint && (a._repaint = 1, a.parentRepaint());
                    } else this.scaleX = t, this.scaleY = e;
                }
                return this;
            }, h.skew = function (t, e) {
                return this.skewX = t, this.skewY = e, this;
            }, h.render = function (t, e, i) {
                X.spriteCount++, k.renders[this._renderType]._fun(this, t, e + this._x, i + this._y),
                    this._repaint = 0;
            }, h.drawToCanvas = function (t, e, i, n) {
                if (P.isConchNode) {
                    var s = yt.create("2D");
                    return new D(t, e, s).ctx.setCanvasType(1), this.conchModel.drawToCanvas(s.source, i, n),
                        s;
                }
                return r.drawToCanvas(this, this._renderType, t, e, i, n);
            }, h.customRender = function (t, e, i) {
                this._renderType |= 1024;
            }, h._applyFilters = function () {
                if (!P.isWebGL) {
                    var t;
                    if ((t = this._$P.filters) && !(t.length < 1)) for (var e = 0, i = t.length; e < i; e++) t[e].action.apply(this._$P.cacheCanvas);
                }
            }, h._isHaveGlowFilter = function () {
                var t = 0, e = 0;
                if (this.filters) for (t = 0; t < this.filters.length; t++) if (8 == this.filters[t].type) return !0;
                for (t = 0, e = this._childs.length; t < e; t++) if (this._childs[t]._isHaveGlowFilter()) return !0;
                return !1;
            }, h.localToGlobal = function (t, e) {
                void 0 === e && (e = !1), !0 === e && (t = new T(t.x, t.y));
                for (var n = this; n && n != i.stage;) t = n.toParentPoint(t), n = n.parent;
                return t;
            }, h.globalToLocal = function (t, e) {
                void 0 === e && (e = !1), e && (t = new T(t.x, t.y));
                for (var n = this, s = []; n && n != i.stage;) s.push(n), n = n.parent;
                for (var a = s.length - 1; a >= 0;) t = (n = s[a]).fromParentPoint(t), a--;
                return t;
            }, h.toParentPoint = function (t) {
                if (!t) return t;
                t.x -= this.pivotX, t.y -= this.pivotY, this.transform && this._transform.transformPoint(t),
                    t.x += this._x, t.y += this._y;
                var e = this._style.scrollRect;
                return e && (t.x -= e.x, t.y -= e.y), t;
            }, h.fromParentPoint = function (t) {
                if (!t) return t;
                t.x -= this._x, t.y -= this._y;
                var e = this._style.scrollRect;
                return e && (t.x += e.x, t.y += e.y), this.transform && this._transform.invertTransformPoint(t),
                    t.x += this.pivotX, t.y += this.pivotY, t;
            }, h.on = function (t, i, n, s) {
                return 1 !== this._mouseEnableState && this.isMouseEvent(t) ? (this.mouseEnabled = !0,
                    this._setBit(2, !0), this._parent && this._$2__onDisplay(), this._createListener(t, i, n, s, !1)) : e.prototype.on.call(this, t, i, n, s);
            }, h.once = function (t, i, n, s) {
                return 1 !== this._mouseEnableState && this.isMouseEvent(t) ? (this.mouseEnabled = !0,
                    this._setBit(2, !0), this._parent && this._$2__onDisplay(), this._createListener(t, i, n, s, !0)) : e.prototype.once.call(this, t, i, n, s);
            }, h._$2__onDisplay = function () {
                if (1 !== this._mouseEnableState) {
                    var t = this;
                    for (t = t.parent; t && 1 !== t._mouseEnableState && !t._getBit(2);) t.mouseEnabled = !0,
                        t._setBit(2, !0), t = t.parent;
                }
            }, h.loadImage = function (t, e, i, n, s, a) {
                var r = this;
                return void 0 === e && (e = 0), void 0 === i && (i = 0), void 0 === n && (n = 0),
                    void 0 === s && (s = 0), this.graphics.loadImage(t, e, i, n, s, function (t) {
                        r.destroyed || (r.size(e + (n || t.width), i + (s || t.height)), r.repaint(), a && a.runWith(t));
                    }), this;
            }, h.repaint = function () {
                this.conchModel && this.conchModel.repaint && this.conchModel.repaint(), 0 === this._repaint && (this._repaint = 1,
                    this.parentRepaint()), this._$P && this._$P.maskParent && this._$P.maskParent.repaint();
            }, h._needRepaint = function () {
                return 0 !== this._repaint && this._$P.cacheCanvas && this._$P.cacheCanvas.reCache;
            }, h._childChanged = function (t) {
                this._childs.length ? this._renderType |= 2048 : this._renderType &= -2049, t && this._get$P("hasZorder") && i.timer.callLater(this, this.updateZOrder),
                    this.repaint();
            }, h.parentRepaint = function () {
                var t = this._parent;
                t && 0 === t._repaint && (t._repaint = 1, t.parentRepaint());
            }, h.startDrag = function (t, e, i, n, s, a, r) {
                void 0 === e && (e = !1), void 0 === i && (i = 0), void 0 === n && (n = 300), void 0 === a && (a = !1),
                    void 0 === r && (r = .92), this._$P.dragging || this._set$P("dragging", new V()),
                    this._$P.dragging.start(this, t, e, i, n, s, a, r);
            }, h.stopDrag = function () {
                this._$P.dragging && this._$P.dragging.stop();
            }, h._releaseMem = function () {
                if (this._$P) {
                    var t = this._$P.cacheCanvas;
                    t && t.ctx && (Y.recover("RenderContext", t.ctx), t.ctx.canvas.size(0, 0), t.ctx = null);
                    var e = this._$P._filterCache;
                    e && (e.destroy(), e.recycle(), this._set$P("_filterCache", null)), this._$P._isHaveGlowFilter && this._set$P("_isHaveGlowFilter", !1),
                        this._$P._isHaveGlowFilter = null;
                }
            }, h._setDisplay = function (t) {
                t || this._releaseMem(), e.prototype._setDisplay.call(this, t);
            }, h.hitTestPoint = function (t, e) {
                var i = this.globalToLocal(T.TEMP.setTo(t, e));
                t = i.x, e = i.y;
                return (this._$P.hitArea ? this._$P.hitArea : this._width > 0 && this._height > 0 ? S.TEMP.setTo(0, 0, this._width, this._height) : this.getSelfBounds()).contains(t, e);
            }, h.getMousePoint = function () {
                return this.globalToLocal(T.TEMP.setTo(i.stage.mouseX, i.stage.mouseY));
            }, h._getWords = function () {
                return null;
            }, h._addChildsToLayout = function (t) {
                var e = this._getWords();
                if (null == e && 0 == this._childs.length) return !1;
                if (e) for (var i = 0, n = e.length; i < n; i++) t.push(e[i]);
                return this._childs.forEach(function (e, i, n) {
                    e._style._enableLayout() && e._addToLayout(t);
                }), !0;
            }, h._addToLayout = function (t) {
                this._style.absolute || (this._style.block ? t.push(this) : this._addChildsToLayout(t) && (this.x = this.y = 0));
            }, h._isChar = function () {
                return !1;
            }, h._getCSSStyle = function () {
                return this._style.getCSSStyle();
            }, h._setAttributes = function (t, e) {
                switch (t) {
                    case "x":
                        this.x = parseFloat(e);
                        break;

                    case "y":
                        this.y = parseFloat(e);
                        break;

                    case "width":
                        this.width = parseFloat(e);
                        break;

                    case "height":
                        this.height = parseFloat(e);
                        break;

                    default:
                        this[t] = e;
                }
            }, h._layoutLater = function () {
                this.parent && this.parent._layoutLater();
            }, a(0, h, "optimizeScrollRect", function () {
                return this._optimizeScrollRect;
            }, function (t) {
                this._optimizeScrollRect != t && (this._optimizeScrollRect = t, this.conchModel && this.conchModel.optimizeScrollRect(t));
            }), a(0, h, "customRenderEnable", null, function (t) {
                if (t && (this._renderType |= 1024, P.isConchNode)) {
                    o.CustomList.push(this);
                    var e = new yt("2d");
                    e._setContext(new CanvasRenderingContext2D()), this.customContext = new D(0, 0, e),
                        e.context.setCanvasType && e.context.setCanvasType(2), this.conchModel.custom(e.context);
                }
            }), a(0, h, "cacheAsBitmap", function () {
                return "none" !== this.cacheAs;
            }, function (t) {
                this.cacheAs = t ? this._$P.hasFilter ? "none" : "normal" : "none";
            }), a(0, h, "cacheAs", function () {
                return null == this._$P.cacheCanvas ? "none" : this._$P.cacheCanvas.type;
            }, function (t) {
                var e = this._$P.cacheCanvas;
                if (t !== (e ? e.type : "none")) {
                    if ("none" !== t) this._getBit(1) || this._setUpNoticeType(1), e || (e = this._set$P("cacheCanvas", Y.getItemByClass("cacheCanvas", Object))),
                        e.type = t, e.reCache = !0, this._renderType |= 16, "bitmap" == t && this.conchModel && this.conchModel.cacheAs(1),
                        this._set$P("cacheForFilters", !1); else if (this._$P._mask); else if (this._$P.hasFilter) this._set$P("cacheForFilters", !0); else {
                            if (e) {
                                var i = e;
                                i && i.ctx && (Y.recover("RenderContext", i.ctx), i.ctx.canvas.size(0, 0), i.ctx = null),
                                    Y.recover("cacheCanvas", e);
                            }
                            this._$P.cacheCanvas = null, this._renderType &= -17, this.conchModel && this.conchModel.cacheAs(0);
                        }
                    this.repaint();
                }
            }), a(0, h, "zOrder", function () {
                return this._zOrder;
            }, function (t) {
                this._zOrder != t && (this._zOrder = t, this.conchModel && this.conchModel.setZOrder && this.conchModel.setZOrder(t),
                    this._parent && (t && this._parent._set$P("hasZorder", !0), i.timer.callLater(this._parent, this.updateZOrder)));
            }), a(0, h, "rotation", function () {
                return this._style._tf.rotate;
            }, function (t) {
                var e = this.getStyle();
                if (e._tf.rotate !== t) {
                    e.setRotate(t), this._tfChanged = !0, this.conchModel && this.conchModel.rotate(t),
                        this._renderType |= 4;
                    var i = this._parent;
                    i && 0 === i._repaint && (i._repaint = 1, i.parentRepaint());
                }
            }), a(0, h, "width", function () {
                return this.autoSize ? this.getSelfBounds().width : this._width;
            }, function (t) {
                this._width !== t && (this._width = t, this.conchModel && this.conchModel.size(t, this._height),
                    this.repaint());
            }), a(0, h, "x", function () {
                return this._x;
            }, function (t) {
                if (this._x !== t) {
                    if (this.destroyed) return;
                    this._x = t, this.conchModel && this.conchModel.pos(t, this._y);
                    var e = this._parent;
                    e && 0 === e._repaint && (e._repaint = 1, e.parentRepaint()), this._$P.maskParent && 0 === this._$P.maskParent._repaint && (this._$P.maskParent._repaint = 1,
                        this._$P.maskParent.parentRepaint());
                }
            }), a(0, h, "globalScaleY", function () {
                for (var t = 1, e = this; e && e !== i.stage;) t *= e.scaleY, e = e.parent;
                return t;
            }), a(0, h, "hitArea", function () {
                return this._$P.hitArea;
            }, function (t) {
                this._set$P("hitArea", t);
            }), a(0, h, "staticCache", function () {
                return this._$P.staticCache;
            }, function (t) {
                this._set$P("staticCache", t), t || this.reCache();
            }), a(0, h, "texture", function () {
                return this._texture;
            }, function (t) {
                this._texture != t && (this._texture = t, this.graphics.cleanByTexture(t, 0, 0));
            }), a(0, h, "y", function () {
                return this._y;
            }, function (t) {
                if (this._y !== t) {
                    if (this.destroyed) return;
                    this._y = t, this.conchModel && this.conchModel.pos(this._x, t);
                    var e = this._parent;
                    e && 0 === e._repaint && (e._repaint = 1, e.parentRepaint()), this._$P.maskParent && 0 === this._$P.maskParent._repaint && (this._$P.maskParent._repaint = 1,
                        this._$P.maskParent.parentRepaint());
                }
            }), a(0, h, "height", function () {
                return this.autoSize ? this.getSelfBounds().height : this._height;
            }, function (t) {
                this._height !== t && (this._height = t, this.conchModel && this.conchModel.size(this._width, t),
                    this.repaint());
            }), a(0, h, "blendMode", function () {
                return this._style.blendMode;
            }, function (t) {
                this.getStyle().blendMode = t, this.conchModel && this.conchModel.blendMode(t),
                    t && "source-over" != t ? this._renderType |= 8 : this._renderType &= -9, this.parentRepaint();
            }), a(0, h, "scaleX", function () {
                return this._style._tf.scaleX;
            }, function (t) {
                var e = this.getStyle();
                if (e._tf.scaleX !== t) {
                    e.setScaleX(t), this._tfChanged = !0, this.conchModel && this.conchModel.scale(t, e._tf.scaleY),
                        this._renderType |= 4;
                    var i = this._parent;
                    i && 0 === i._repaint && (i._repaint = 1, i.parentRepaint());
                }
            }), a(0, h, "scaleY", function () {
                return this._style._tf.scaleY;
            }, function (t) {
                var e = this.getStyle();
                if (e._tf.scaleY !== t) {
                    e.setScaleY(t), this._tfChanged = !0, this.conchModel && this.conchModel.scale(e._tf.scaleX, t),
                        this._renderType |= 4;
                    var i = this._parent;
                    i && 0 === i._repaint && (i._repaint = 1, i.parentRepaint());
                }
            }), a(0, h, "stage", function () {
                return i.stage;
            }), a(0, h, "skewX", function () {
                return this._style._tf.skewX;
            }, function (t) {
                var e = this.getStyle();
                if (e._tf.skewX !== t) {
                    e.setSkewX(t), this._tfChanged = !0, this.conchModel && this.conchModel.skew(t, e._tf.skewY),
                        this._renderType |= 4;
                    var i = this._parent;
                    i && 0 === i._repaint && (i._repaint = 1, i.parentRepaint());
                }
            }), a(0, h, "scrollRect", function () {
                return this._style.scrollRect;
            }, function (t) {
                this.getStyle().scrollRect = t, this.repaint(), t ? (this._renderType |= 128, this.conchModel && this.conchModel.scrollRect(t.x, t.y, t.width, t.height)) : (this._renderType &= -129,
                    this.conchModel && (o.RUNTIMEVERION < "0.9.1" ? this.conchModel.removeType(64) : this.conchModel.removeType(128)));
            }), a(0, h, "skewY", function () {
                return this._style._tf.skewY;
            }, function (t) {
                var e = this.getStyle();
                if (e._tf.skewY !== t) {
                    e.setSkewY(t), this._tfChanged = !0, this.conchModel && this.conchModel.skew(e._tf.skewX, t),
                        this._renderType |= 4;
                    var i = this._parent;
                    i && 0 === i._repaint && (i._repaint = 1, i.parentRepaint());
                }
            }), a(0, h, "transform", function () {
                return this._tfChanged ? this._adjustTransform() : this._transform;
            }, function (t) {
                this._tfChanged = !1, this._transform = t, t && (this._x = t.tx, this._y = t.ty,
                    t.tx = t.ty = 0, this.conchModel && this.conchModel.transform(t.a, t.b, t.c, t.d, this._x, this._y)),
                    t ? this._renderType |= 4 : (this._renderType &= -5, this.conchModel && this.conchModel.removeType(4)),
                    this.parentRepaint();
            }), a(0, h, "pivotX", function () {
                return this._style._tf.translateX;
            }, function (t) {
                this.getStyle().setTranslateX(t), this.conchModel && this.conchModel.pivot(t, this._style._tf.translateY),
                    this.repaint();
            }), a(0, h, "pivotY", function () {
                return this._style._tf.translateY;
            }, function (t) {
                this.getStyle().setTranslateY(t), this.conchModel && this.conchModel.pivot(this._style._tf.translateX, t),
                    this.repaint();
            }), a(0, h, "alpha", function () {
                return this._style.alpha;
            }, function (t) {
                this._style && this._style.alpha !== t && (t = t < 0 ? 0 : t > 1 ? 1 : t, this.getStyle().alpha = t,
                    this.conchModel && this.conchModel.alpha(t), 1 !== t ? this._renderType |= 2 : this._renderType &= -3,
                    this.parentRepaint());
            }), a(0, h, "visible", function () {
                return this._style.visible;
            }, function (t) {
                this._style && this._style.visible !== t && (this.getStyle().visible = t, this.conchModel && this.conchModel.visible(t),
                    this.parentRepaint());
            }), a(0, h, "graphics", function () {
                return this._graphics || (this.graphics = r.createGraphics());
            }, function (t) {
                this._graphics && (this._graphics._sp = null), this._graphics = t, t ? (this._renderType &= -2,
                    this._renderType |= 512, t._sp = this, this.conchModel && this.conchModel.graphics(this._graphics)) : (this._renderType &= -513,
                        this._renderType &= -2, this.conchModel && (o.RUNTIMEVERION < "0.9.1" ? this.conchModel.removeType(256) : this.conchModel.removeType(512))),
                    this.repaint();
            }), a(0, h, "filters", function () {
                return this._$P.filters;
            }, function (t) {
                t && 0 === t.length && (t = null), this._$P.filters != t && (this._set$P("filters", t ? t.slice() : null),
                    P.isConchApp && (this.conchModel && (o.RUNTIMEVERION < "0.9.1" ? this.conchModel.removeType(16) : this.conchModel.removeType(32)),
                        this._$P.filters && 1 == this._$P.filters.length && this._$P.filters[0].callNative(this)),
                    P.isWebGL && (t && t.length ? this._renderType |= 32 : this._renderType &= -33),
                    t && t.length > 0 ? (this._getBit(1) || this._setUpNoticeType(1), P.isWebGL && 1 == t.length && t[0] instanceof laya.filters.ColorFilter || ("bitmap" != this.cacheAs && (P.isConchNode || (this.cacheAs = "bitmap"),
                        this._set$P("cacheForFilters", !0)), this._set$P("hasFilter", !0))) : (this._set$P("hasFilter", !1),
                            this._$P.cacheForFilters && "bitmap" == this.cacheAs && (this.cacheAs = "none")),
                    this.repaint());
            }), a(0, h, "parent", e.prototype._$get_parent, function (t) {
                i.superSet(J, this, "parent", t), t && this._getBit(2) && this._$2__onDisplay();
            }), a(0, h, "mask", function () {
                return this._$P._mask;
            }, function (t) {
                t && this.mask && this.mask._$P.maskParent || (t ? (this.cacheAs = "bitmap", this._set$P("_mask", t),
                    t._set$P("maskParent", this)) : (this.mask && this.mask._set$P("maskParent", null),
                        this._set$P("_mask", t), this.cacheAs = "none"), this.conchModel && this.conchModel.mask(t ? t.conchModel : null),
                    this._renderType |= 64, this.parentRepaint());
            }), a(0, h, "mouseEnabled", function () {
                return this._mouseEnableState > 1;
            }, function (t) {
                this._mouseEnableState = t ? 2 : 1;
            }), a(0, h, "globalScaleX", function () {
                for (var t = 1, e = this; e && e !== i.stage;) t *= e.scaleX, e = e.parent;
                return t;
            }), a(0, h, "mouseX", function () {
                return this.getMousePoint().x;
            }), a(0, h, "mouseY", function () {
                return this.getMousePoint().y;
            }), o.fromImage = function (t) {
                return new o().loadImage(t);
            }, o.CustomList = [], n(o, ["RUNTIMEVERION", function () {
                return this.RUNTIMEVERION = t.conch ? conchConfig.getRuntimeVersion().substr(conchConfig.getRuntimeVersion().lastIndexOf("-") + 1) : "";
            }]), o;
        }(J), dt = function (t) {
            function e(t) {
                this._audio = null, this._onEnd = null, this._resumePlay = null, e.__super.call(this),
                    this._onEnd = q.bind(this.__onEnd, this), this._resumePlay = q.bind(this.__resumePlay, this),
                    t.addEventListener("ended", this._onEnd), this._audio = t;
            }
            s(e, "laya.media.h5audio.AudioSoundChannel", it);
            var n = e.prototype;
            return n.__onEnd = function () {
                if (1 == this.loops) return this.completeHandler && (i.timer.once(10, this, this.__runComplete, [this.completeHandler], !1),
                    this.completeHandler = null), this.stop(), void this.event("complete");
                this.loops > 0 && this.loops--, this.startTime = 0, this.play();
            }, n.__resumePlay = function () {
                if (this._audio && this._audio.removeEventListener("canplay", this._resumePlay),
                    !this.isStopped) try {
                        this._audio.currentTime = this.startTime, O.container.appendChild(this._audio),
                            this._audio.play();
                    } catch (t) {
                        this.event("error");
                    }
            }, n.play = function () {
                if (this.isStopped = !1, this._audio) {
                    try {
                        this._audio.playbackRate = A.playbackRate, this._audio.currentTime = this.startTime;
                    } catch (t) {
                        return void this._audio.addEventListener("canplay", this._resumePlay);
                    }
                    A.addChannel(this), O.container.appendChild(this._audio), "play" in this._audio && this._audio.play();
                }
            }, n.stop = function () {
                this.isStopped = !0, A.removeChannel(this), this.completeHandler = null, this._audio && ("pause" in this._audio && P.isConchApp && this._audio.stop(),
                    this._audio.pause(), this._audio.removeEventListener("ended", this._onEnd), this._audio.removeEventListener("canplay", this._resumePlay),
                    O.onIE || this._audio != et._musicAudio && Y.recover("audio:" + this.url, this._audio),
                    O.removeElement(this._audio), this._audio = null);
            }, n.pause = function () {
                this.isStopped = !0, A.removeChannel(this), "pause" in this._audio && this._audio.pause();
            }, n.resume = function () {
                this._audio && (this.isStopped = !1, A.addChannel(this), "play" in this._audio && this._audio.play());
            }, a(0, n, "position", function () {
                return this._audio ? this._audio.currentTime : 0;
            }), a(0, n, "duration", function () {
                return this._audio ? this._audio.duration : 0;
            }), a(0, n, "volume", function () {
                return this._audio ? this._audio.volume : 1;
            }, function (t) {
                this._audio && (this._audio.volume = t);
            }), e;
        }(), _t = function (t) {
            function e() {
                this.audioBuffer = null, this.gain = null, this.bufferSource = null, this._currentTime = 0,
                    this._volume = 1, this._startTime = 0, this._pauseTime = 0, this._onPlayEnd = null,
                    this.context = st.ctx, e.__super.call(this), this._onPlayEnd = q.bind(this.__onPlayEnd, this),
                    this.context.createGain ? this.gain = this.context.createGain() : this.gain = this.context.createGainNode();
            }
            s(e, "laya.media.webaudio.WebAudioSoundChannel", t);
            var n = e.prototype;
            return n.play = function () {
                if (A.addChannel(this), this.isStopped = !1, this._clearBufferSource(), this.audioBuffer) {
                    if (this.startTime >= this.duration) return this.stop();
                    var t = this.context, e = this.gain, i = t.createBufferSource();
                    this.bufferSource = i, i.buffer = this.audioBuffer, i.connect(e), e && e.disconnect(),
                        e.connect(t.destination), i.onended = this._onPlayEnd, this._startTime = O.now(),
                        this.gain.gain.setTargetAtTime ? this.gain.gain.setTargetAtTime(this._volume, this.context.currentTime, .001) : this.gain.gain.value = this._volume,
                        0 == this.loops && (i.loop = !0), i.playbackRate.setTargetAtTime ? i.playbackRate.setTargetAtTime(A.playbackRate, this.context.currentTime, .001) : i.playbackRate.value = A.playbackRate,
                        i.start(0, this.startTime), this._currentTime = 0;
                }
            }, n.__onPlayEnd = function () {
                if (1 == this.loops) return this.completeHandler && (i.timer.once(10, this, this.__runComplete, [this.completeHandler], !1),
                    this.completeHandler = null), this.stop(), void this.event("complete");
                this.loops > 0 && this.loops--, this.startTime = 0, this.play();
            }, n._clearBufferSource = function () {
                if (this.bufferSource) {
                    var t = this.bufferSource;
                    t.stop ? t.stop(0) : t.noteOff(0), t.disconnect(0), t.onended = null, e._tryCleanFailed || this._tryClearBuffer(t),
                        this.bufferSource = null;
                }
            }, n._tryClearBuffer = function (t) {
                if (O.onMac) try {
                    t.buffer = st._miniBuffer;
                } catch (t) {
                    e._tryCleanFailed = !0;
                } else try {
                    t.buffer = null;
                } catch (t) {
                    e._tryCleanFailed = !0;
                }
            }, n.stop = function () {
                t.prototype.stop.call(this), this._clearBufferSource(), this.audioBuffer = null,
                    this.gain && this.gain.disconnect(), this.isStopped = !0, A.removeChannel(this),
                    this.completeHandler = null, A.autoReleaseSound && i.timer.once(5e3, null, A.disposeSoundIfNotUsed, [this.url], !1);
            }, n.pause = function () {
                this.isStopped || (this._pauseTime = this.position), this._clearBufferSource(),
                    this.gain && this.gain.disconnect(), this.isStopped = !0, A.removeChannel(this),
                    A.autoReleaseSound && i.timer.once(5e3, null, A.disposeSoundIfNotUsed, [this.url], !1);
            }, n.resume = function () {
                this.startTime = this._pauseTime, this.play();
            }, a(0, n, "position", function () {
                return this.bufferSource ? (O.now() - this._startTime) / 1e3 + this.startTime : 0;
            }), a(0, n, "duration", function () {
                return this.audioBuffer ? this.audioBuffer.duration : 0;
            }), a(0, n, "volume", function () {
                return this._volume;
            }, function (t) {
                this.isStopped || (this._volume = t, this.gain.gain.setTargetAtTime ? this.gain.gain.setTargetAtTime(t, this.context.currentTime, .001) : this.gain.gain.value = t);
            }), e._tryCleanFailed = !1, e.SetTargetDelay = .001, e;
        }(it), ft = function (t) {
            function e() {
                e.__super.call(this), this._w = 0, this._h = 0;
            }
            s(e, "laya.resource.Bitmap", ht);
            var i = e.prototype;
            return a(0, i, "width", function () {
                return this._w;
            }), a(0, i, "height", function () {
                return this._h;
            }), a(0, i, "source", function () {
                return this._source;
            }), e;
        }(), pt = function (t) {
            function e() {
                this.loop = !1, this.wrapMode = 0, this._index = 0, this._count = 0, this._isPlaying = !1,
                    this._labels = null, this._isReverse = !1, this._frameRateChanged = !1, this._controlNode = null,
                    this._actionName = null, e.__super.call(this), this._interval = o.animationInterval,
                    this._setUpNoticeType(1);
            }
            s(e, "laya.display.AnimationPlayerBase", t);
            var i = e.prototype;
            return i.play = function (t, e, i, n) {
                void 0 === t && (t = 0), void 0 === e && (e = !0), void 0 === i && (i = ""), void 0 === n && (n = !0),
                    this._isPlaying = !0, this.index = "string" == typeof t ? this._getFrameByLabel(t) : t,
                    this.loop = e, this._actionName = i, this._isReverse = 1 == this.wrapMode, this.interval > 0 && this.timerLoop(this.interval, this, this._frameLoop, null, !0, !0);
            }, i._getFrameByLabel = function (t) {
                var e = 0;
                for (e = 0; e < this._count; e++) if (this._labels[e] && this._labels[e].indexOf(t) >= 0) return e;
                return 0;
            }, i._frameLoop = function () {
                if (this._isReverse) {
                    if (this._index--, this._index < 0) {
                        if (!this.loop) return this._index = 0, this.stop(), void this.event("complete");
                        2 == this.wrapMode ? (this._index = this._count > 0 ? 1 : 0, this._isReverse = !1) : this._index = this._count - 1,
                            this.event("complete");
                    }
                } else if (this._index++, this._index >= this._count) {
                    if (!this.loop) return this._index--, this.stop(), void this.event("complete");
                    2 == this.wrapMode ? (this._index = this._count - 2 >= 0 ? this._count - 2 : 0,
                        this._isReverse = !0) : this._index = 0, this.event("complete");
                }
                this.index = this._index;
            }, i._setControlNode = function (t) {
                this._controlNode && (this._controlNode.off("display", this, this._checkResumePlaying),
                    this._controlNode.off("undisplay", this, this._checkResumePlaying)), this._controlNode = t,
                    t && t != this && (t.on("display", this, this._checkResumePlaying), t.on("undisplay", this, this._checkResumePlaying));
            }, i._setDisplay = function (e) {
                t.prototype._setDisplay.call(this, e), this._checkResumePlaying();
            }, i._checkResumePlaying = function () {
                this._isPlaying && (this._controlNode.displayedInStage ? this.play(this._index, this.loop, this._actionName) : this.clearTimer(this, this._frameLoop));
            }, i.stop = function () {
                this._isPlaying = !1, this.clearTimer(this, this._frameLoop);
            }, i.addLabel = function (t, e) {
                this._labels || (this._labels = {}), this._labels[e] || (this._labels[e] = []),
                    this._labels[e].push(t);
            }, i.removeLabel = function (t) {
                if (t) {
                    if (this._labels) for (var e in this._labels) this._removeLabelFromLabelList(this._labels[e], t);
                } else this._labels = null;
            }, i._removeLabelFromLabelList = function (t, e) {
                if (t) for (var i = t.length - 1; i >= 0; i--) t[i] == e && t.splice(i, 1);
            }, i.gotoAndStop = function (t) {
                this.index = "string" == typeof t ? this._getFrameByLabel(t) : t, this.stop();
            }, i._displayToIndex = function (t) { }, i.clear = function () {
                this.stop(), this._labels = null;
            }, a(0, i, "interval", function () {
                return this._interval;
            }, function (t) {
                this._interval != t && (this._frameRateChanged = !0, this._interval = t, this._isPlaying && t > 0 && this.timerLoop(t, this, this._frameLoop, null, !0, !0));
            }), a(0, i, "isPlaying", function () {
                return this._isPlaying;
            }), a(0, i, "index", function () {
                return this._index;
            }, function (t) {
                if (this._index = t, this._displayToIndex(t), this._labels && this._labels[t]) for (var e = this._labels[t], i = 0, n = e.length; i < n; i++) this.event("label", e[i]);
            }), a(0, i, "count", function () {
                return this._count;
            }), e.WRAP_POSITIVE = 0, e.WRAP_REVERSE = 1, e.WRAP_PINGPONG = 2, e;
        }(ut), gt = function (t) {
            function e() {
                this._clipPoint = null, this._currBitmapFont = null, this._text = null, this._isChanged = !1,
                    this._textWidth = 0, this._textHeight = 0, this._lines = [], this._lineWidths = [],
                    this._startX = NaN, this._startY = NaN, this._lastVisibleLineIndex = -1, this._words = null,
                    this._charSize = {}, this.underline = !1, this._underlineColor = null, e.__super.call(this),
                    this.overflow = e.VISIBLE, this._style = new tt(this), this._style.wordWrap = !1;
            }
            s(e, "laya.display.Text", t);
            var r = e.prototype;
            return r.destroy = function (e) {
                void 0 === e && (e = !0), t.prototype.destroy.call(this, e), this._lines = null,
                    this._words && (this._words.length = 0, this._words = null);
            }, r._getBoundPointsM = function (t) {
                void 0 === t && (t = !1);
                var e = S.TEMP;
                return e.setTo(0, 0, this.width, this.height), e._getBoundPoints();
            }, r.getGraphicBounds = function (t) {
                void 0 === t && (t = !1);
                var e = S.TEMP;
                return e.setTo(0, 0, this.width, this.height), e;
            }, r._getCSSStyle = function () {
                return this._style;
            }, r.lang = function (t, i, n, s, a, r, o, h, l, c, u) {
                if (t = e.langPacks && e.langPacks[t] ? e.langPacks[t] : t, arguments.length < 2) this._text = t; else {
                    for (var d = 0, _ = arguments.length; d < _; d++) t = t.replace("{" + d + "}", arguments[d + 1]);
                    this._text = t;
                }
            }, r._isPassWordMode = function () {
                var t = this._style.password;
                return "prompt" in this && this.prompt == this._text && (t = !1), t;
            }, r._getPassWordTxt = function (t) {
                var e;
                e = "";
                for (var i = t.length; i > 0; i--) e += "●";
                return e;
            }, r.renderText = function (t, e) {
                var i = this.graphics;
                i.clear(!0);
                var n = (this.italic ? "italic " : "") + (this.bold ? "bold " : "") + this.fontSize + "px " + (O.onIPhone ? laya.display.Text._fontFamilyMap[this.font] || this.font : this.font);
                O.context.font = n, P.isConchNode && (O.context.direction = this.direction, i.setDirection && i.setDirection(this.direction));
                var s = this.padding, a = s[3], r = "left", o = this._lines, h = this.leading + this._charSize.height, l = this._currBitmapFont;
                l && (h = this.leading + l.getMaxHeight());
                var c = s[0];
                if (!l && this._width > 0 && this._textWidth <= this._width && ("right" == this.align ? (r = "right",
                    a = this._width - s[1]) : "center" == this.align && (r = "center", a = .5 * this._width + s[3] - s[1])),
                    this._height > 0) {
                    var u = this._textHeight > this._height ? "top" : this.valign;
                    "middle" === u ? c = .5 * (this._height - e * h) + s[0] - s[2] : "bottom" === u && (c = this._height - e * h - s[2]);
                }
                var d = this._style;
                if (l && l.autoScaleSize) var _ = l.fontSize / this.fontSize;
                if (this._clipPoint) if (i.save(), l && l.autoScaleSize) {
                    var f = 0, p = 0;
                    f = this._width ? this._width - s[3] - s[1] : this._textWidth, p = this._height ? this._height - s[0] - s[2] : this._textHeight,
                        f *= _, p *= _, i.clipRect(s[3], s[0], f, p);
                } else i.clipRect(s[3], s[0], this._width ? this._width - s[3] - s[1] : this._textWidth, this._height ? this._height - s[0] - s[2] : this._textHeight);
                var g = d.password;
                "prompt" in this && this.prompt == this._text && (g = !1);
                for (var v = 0, m = 0, y = Math.min(this._lines.length, e + t) || 1, w = t; w < y; w++) {
                    var x, b = o[w];
                    if (g) {
                        var L = b.length;
                        b = "";
                        for (var C = L; C > 0; C--) b += "●";
                    }
                    if (void 0 === b && (b = ""), v = a - (this._clipPoint ? this._clipPoint.x : 0),
                        m = c + h * w - (this._clipPoint ? this._clipPoint.y : 0), this.underline && this.drawUnderline(r, v, m, w),
                        l) {
                        var M = this.width;
                        l.autoScaleSize && (M = this.width * _), l.drawText(b, this, v, m, this.align, M);
                    } else P.isWebGL ? (this._words || (this._words = []), (x = this._words.length > w - t ? this._words[w - t] : new Z()).setText(b)) : x = b,
                        d.stroke ? i.fillBorderText(x, v, m, n, this.color, d.strokeColor, d.stroke, r) : i.fillText(x, v, m, n, this.color, r);
                }
                if (l && l.autoScaleSize) {
                    var T = 1 / _;
                    this.scale(T, T);
                }
                this._clipPoint && i.restore(), this._startX = a, this._startY = c;
            }, r.drawUnderline = function (t, e, i, n) {
                var s = this._lineWidths[n];
                switch (t) {
                    case "center":
                        e -= s / 2;
                        break;

                    case "right":
                        e -= s;
                }
                i += this._charSize.height, this._graphics.drawLine(e, i, e + s, i, this.underlineColor || this.color, 1);
            }, r.typeset = function () {
                if (this._isChanged = !1, !this._text) return this._clipPoint = null, this._textWidth = this._textHeight = 0,
                    void this.graphics.clear(!0);
                if (P.isConchApp) {
                    var t = "" + this._getCSSStyle().font;
                    this._getCSSStyle().stroke && this._getCSSStyle().strokeColor && (t += " 1 " + this._getCSSStyle().strokeColor),
                        O.context.font = t, P.isConchNode && (O.context.direction = this.direction, this.graphics.setDirection && this.graphics.setDirection(this.direction));
                } else O.context.font = this._getCSSStyle().font;
                this._lines.length = 0, this._lineWidths.length = 0, this._isPassWordMode() ? this.parseLines(this._getPassWordTxt(this._text)) : this.parseLines(this._text),
                    this.evalTextSize(), this.checkEnabledViewportOrNot() ? this._clipPoint || (this._clipPoint = new T(0, 0)) : this._clipPoint = null;
                var i = this._lines.length;
                if (this.overflow != e.VISIBLE) {
                    var n = this.overflow == e.HIDDEN ? Math.floor : Math.ceil;
                    i = Math.min(i, n((this.height - this.padding[0] - this.padding[2]) / (this.leading + this._charSize.height)));
                }
                var s = this.scrollY / (this._charSize.height + this.leading) | 0;
                this.renderText(s, i), this.repaint();
            }, r.evalTextSize = function () {
                var t = NaN, e = NaN;
                t = Math.max.apply(this, this._lineWidths), e = this._currBitmapFont ? this._lines.length * (this._currBitmapFont.getMaxHeight() + this.leading) + this.padding[0] + this.padding[2] : this._lines.length * (this._charSize.height + this.leading) + this.padding[0] + this.padding[2],
                    t == this._textWidth && e == this._textHeight || (this._textWidth = t, this._textHeight = e,
                        this._width && this._height || this.conchModel && this.conchModel.size(this._width || this._textWidth, this._height || this._textHeight));
            }, r.checkEnabledViewportOrNot = function () {
                return this.overflow == e.SCROLL && (this._width > 0 && this._textWidth > this._width || this._height > 0 && this._textHeight > this._height);
            }, r.changeText = function (t) {
                this._text !== t && (this.lang(t + ""), this._graphics && this._graphics.replaceText(this._text) || this.typeset());
            }, r.parseLines = function (t) {
                var i = this.wordWrap || this.overflow == e.HIDDEN;
                if (i) var n = this.getWordWrapWidth();
                if (this._currBitmapFont) this._charSize.width = this._currBitmapFont.getMaxWidth(),
                    this._charSize.height = this._currBitmapFont.getMaxHeight(); else {
                    var s = O.context.measureText(e._testWord);
                    P.isConchApp && 0 === s.width && 0 === s.height && (s = O.context.measureText("W")),
                        this._charSize.width = s.width, this._charSize.height = s.height || this.fontSize;
                }
                for (var a = t.replace(/\r\n/g, "\n").split("\n"), r = 0, o = a.length; r < o; r++) {
                    var h = a[r];
                    i ? this.parseLine(h, n) : (this._lineWidths.push(this.getTextWidth(h)), this._lines.push(h));
                }
            }, r.parseLine = function (t, i) {
                O.context;
                var n, s = this._lines, a = 0, r = NaN, o = NaN, h = 0;
                if ((r = this.getTextWidth(t)) <= i) return s.push(t), void this._lineWidths.push(r);
                r = this._charSize.width, 0 == (a = Math.floor(i / r)) && (a = 1), o = r = this.getTextWidth(t.substring(0, a));
                for (var l = a, c = t.length; l < c; l++) if (r = this.getTextWidth(t.charAt(l)),
                    (o += r) > i) if (this.wordWrap) {
                        var u = t.substring(h, l);
                        if (u.charCodeAt(u.length - 1) < 255 ? (n = /(?:\w|-)+$/.exec(u)) && (l = n.index + h,
                            0 == n.index ? l += u.length : u = t.substring(h, l)) : e.RightToLeft && (n = /([\u0600-\u06FF])+$/.exec(u)) && (l = n.index + h,
                                0 == n.index ? l += u.length : u = t.substring(h, l)), s.push(u), this._lineWidths.push(o - r),
                            h = l, !(l + a < c)) {
                            s.push(t.substring(h, c)), this._lineWidths.push(this.getTextWidth(s[s.length - 1])),
                                h = -1;
                            break;
                        }
                        l += a, o = r = this.getTextWidth(t.substring(h, l)), l--;
                    } else if (this.overflow == e.HIDDEN) return s.push(t.substring(0, l)), void this._lineWidths.push(this.getTextWidth(s[s.length - 1]));
                this.wordWrap && -1 != h && (s.push(t.substring(h, c)), this._lineWidths.push(this.getTextWidth(s[s.length - 1])));
            }, r.getTextWidth = function (t) {
                return this._currBitmapFont ? this._currBitmapFont.getTextWidth(t) : O.context.measureText(t).width;
            }, r.getWordWrapWidth = function () {
                var t = this.padding, e = NaN;
                return (e = this._currBitmapFont && this._currBitmapFont.autoScaleSize ? this._width * (this._currBitmapFont.fontSize / this.fontSize) : this._width) <= 0 && (e = this.wordWrap ? 100 : O.width),
                    e <= 0 && (e = 100), e - t[3] - t[1];
            }, r.getCharPoint = function (t, e) {
                this._isChanged && i.timer.runCallLater(this, this.typeset);
                for (var n = 0, s = this._lines, a = 0, r = 0, o = s.length; r < o; r++) {
                    if (n += s[r].length, t < n) {
                        var h = r;
                        break;
                    }
                    a = n;
                }
                var l = (this.italic ? "italic " : "") + (this.bold ? "bold " : "") + this.fontSize + "px " + this.font;
                O.context.font = l, P.isConchNode && (O.context.direction = this.direction, this.graphics.setDirection && this.graphics.setDirection(this.direction));
                var c = this.getTextWidth(this._text.substring(a, t));
                return (e || new T()).setTo(this._startX + c - (this._clipPoint ? this._clipPoint.x : 0), this._startY + h * (this._charSize.height + this.leading) - (this._clipPoint ? this._clipPoint.y : 0));
            }, a(0, r, "width", function () {
                return this._width ? this._width : this.textWidth + this.padding[1] + this.padding[3];
            }, function (t) {
                t != this._width && (i.superSet(ut, this, "width", t), this.isChanged = !0);
            }), a(0, r, "textWidth", function () {
                return this._isChanged && i.timer.runCallLater(this, this.typeset), this._textWidth;
            }), a(0, r, "height", function () {
                return this._height ? this._height : this.textHeight;
            }, function (t) {
                t != this._height && (i.superSet(ut, this, "height", t), this.isChanged = !0);
            }), a(0, r, "textHeight", function () {
                return this._isChanged && i.timer.runCallLater(this, this.typeset), this._textHeight;
            }), a(0, r, "padding", function () {
                return this._getCSSStyle().padding;
            }, function (t) {
                this._getCSSStyle().padding = t, this.isChanged = !0;
            }), a(0, r, "bold", function () {
                return this._getCSSStyle().bold;
            }, function (t) {
                this._getCSSStyle().bold = t, this.isChanged = !0;
            }), a(0, r, "text", function () {
                return this._text || "";
            }, function (t) {
                this._text !== t && (this.lang(t + ""), this.isChanged = !0, this.event("change"));
            }), a(0, r, "color", function () {
                return this._getCSSStyle().color;
            }, function (t) {
                this._getCSSStyle().color != t && (this._getCSSStyle().color = t, !this._isChanged && this._graphics ? this._graphics.replaceTextColor(this.color) : this.isChanged = !0);
            }), a(0, r, "font", function () {
                return this._getCSSStyle().fontFamily;
            }, function (t) {
                this._currBitmapFont && (this._currBitmapFont = null, this.scale(1, 1)), e._bitmapFonts && e._bitmapFonts[t] && (this._currBitmapFont = e._bitmapFonts[t]),
                    this._getCSSStyle().fontFamily = t, this.isChanged = !0;
            }), a(0, r, "fontSize", function () {
                return this._getCSSStyle().fontSize;
            }, function (t) {
                this._getCSSStyle().fontSize = t, this.isChanged = !0;
            }), a(0, r, "italic", function () {
                return this._getCSSStyle().italic;
            }, function (t) {
                this._getCSSStyle().italic = t, this.isChanged = !0;
            }), a(0, r, "align", function () {
                return this._getCSSStyle().align;
            }, function (t) {
                this._getCSSStyle().align = t, this.isChanged = !0;
            }), a(0, r, "valign", function () {
                return this._getCSSStyle().valign;
            }, function (t) {
                this._getCSSStyle().valign = t, this.isChanged = !0;
            }), a(0, r, "wordWrap", function () {
                return this._getCSSStyle().wordWrap;
            }, function (t) {
                this._getCSSStyle().wordWrap = t, this.isChanged = !0;
            }), a(0, r, "leading", function () {
                return this._getCSSStyle().leading;
            }, function (t) {
                this._getCSSStyle().leading = t, this.isChanged = !0;
            }), a(0, r, "bgColor", function () {
                return this._getCSSStyle().backgroundColor;
            }, function (t) {
                this._getCSSStyle().backgroundColor = t, this.isChanged = !0;
            }), a(0, r, "borderColor", function () {
                return this._getCSSStyle().borderColor;
            }, function (t) {
                this._getCSSStyle().borderColor = t, this.isChanged = !0;
            }), a(0, r, "stroke", function () {
                return this._getCSSStyle().stroke;
            }, function (t) {
                this._getCSSStyle().stroke = t, this.isChanged = !0;
            }), a(0, r, "strokeColor", function () {
                return this._getCSSStyle().strokeColor;
            }, function (t) {
                this._getCSSStyle().strokeColor = t, this.isChanged = !0;
            }), a(0, r, "direction", function () {
                return this._getCSSStyle().direction;
            }, function (t) {
                this._getCSSStyle().direction = t, this.isChanged = !0;
            }), a(0, r, "isChanged", null, function (t) {
                this._isChanged !== t && (this._isChanged = t, t && i.timer.callLater(this, this.typeset));
            }), a(0, r, "scrollX", function () {
                return this._clipPoint ? this._clipPoint.x : 0;
            }, function (t) {
                if (!(this.overflow != e.SCROLL || this.textWidth < this._width) && this._clipPoint) {
                    t = t < this.padding[3] ? this.padding[3] : t;
                    var i = this._textWidth - this._width;
                    t = t > i ? i : t;
                    var n = this._height / (this._charSize.height + this.leading) | 1;
                    this._clipPoint.x = t, this.renderText(this._lastVisibleLineIndex, n);
                }
            }), a(0, r, "scrollY", function () {
                return this._clipPoint ? this._clipPoint.y : 0;
            }, function (t) {
                if (!(this.overflow != e.SCROLL || this.textHeight < this._height) && this._clipPoint) {
                    t = t < this.padding[0] ? this.padding[0] : t;
                    var i = this._textHeight - this._height, n = (t = t > i ? i : t) / (this._charSize.height + this.leading) | 0;
                    this._lastVisibleLineIndex = n;
                    var s = 1 + (this._height / (this._charSize.height + this.leading) | 0);
                    this._clipPoint.y = t, this.renderText(n, s);
                }
            }), a(0, r, "maxScrollX", function () {
                return this.textWidth < this._width ? 0 : this._textWidth - this._width;
            }), a(0, r, "maxScrollY", function () {
                return this.textHeight < this._height ? 0 : this._textHeight - this._height;
            }), a(0, r, "lines", function () {
                return this._isChanged && this.typeset(), this._lines;
            }), a(0, r, "underlineColor", function () {
                return this._underlineColor;
            }, function (t) {
                this._underlineColor = t, this._isChanged = !0, this.typeset();
            }), e.registerBitmapFont = function (t, i) {
                e._bitmapFonts || (e._bitmapFonts = {}), e._bitmapFonts[t] = i;
            }, e.unregisterBitmapFont = function (t, i) {
                if (void 0 === i && (i = !0), e._bitmapFonts && e._bitmapFonts[t]) {
                    var n = e._bitmapFonts[t];
                    i && n.destroy(), delete e._bitmapFonts[t];
                }
            }, e.setTextRightToLeft = function () {
                var t;
                (t = O.canvas.source.style).display = "none", t.position = "absolute", t.direction = "rtl",
                    P._mainCanvas.source.style.direction = "rtl", laya.display.Text.RightToLeft = !0,
                    O.document.body.appendChild(O.canvas.source);
            }, e.supportFont = function (t) {
                O.context.font = "10px sans-serif";
                var e = O.context.measureText("abcji").width;
                O.context.font = "10px " + t;
                var i = O.context.measureText("abcji").width;
                return console.log(e, i), e !== i;
            }, e._testWord = "游", e.langPacks = null, e.VISIBLE = "visible", e.SCROLL = "scroll",
                e.HIDDEN = "hidden", e.CharacterCache = !0, e.RightToLeft = !1, e._bitmapFonts = null,
                n(e, ["_fontFamilyMap", function () {
                    return this._fontFamilyMap = {
                        "报隶": "报隶-简",
                        "黑体": "黑体-简",
                        "楷体": "楷体-简",
                        "兰亭黑": "兰亭黑-简",
                        "隶变": "隶变-简",
                        "凌慧体": "凌慧体-简",
                        "翩翩体": "翩翩体-简",
                        "苹方": "苹方-简",
                        "手札体": "手札体-简",
                        "宋体": "宋体-简",
                        "娃娃体": "娃娃体-简",
                        "魏碑": "魏碑-简",
                        "行楷": "行楷-简",
                        "雅痞": "雅痞-简",
                        "圆体": "圆体-简"
                    };
                }]), e;
        }(ut), vt = function (t) {
            function e() {
                this.focus = null, this.designWidth = 0, this.designHeight = 0, this.canvasRotation = !1,
                    this.canvasDegree = 0, this.renderingEnabled = !0, this.screenAdaptationEnabled = !0,
                    this._screenMode = "none", this._scaleMode = "noscale", this._alignV = "top", this._alignH = "left",
                    this._bgColor = "black", this._mouseMoveTime = 0, this._renderCount = 0, this._frameStartTime = NaN,
                    this._isFocused = !1, this._isVisibility = !1, this._scenes = null, this._frameRate = "fast",
                    this.useRetinalCanvas = !1, e.__super.call(this), this.offset = new T(), this._canvasTransform = new M(),
                    this._previousOrientation = O.window.orientation;
                var t = this;
                this.transform = M.create(), this._scenes = [], this.mouseEnabled = !0, this.hitTestPrior = !0,
                    this.autoSize = !1, this._displayedInStage = !0, this._isFocused = !0, this._isVisibility = !0,
                    this.useRetinalCanvas = o.useRetinalCanvas;
                var i = O.window, n = this;
                i.addEventListener("focus", function () {
                    t._isFocused = !0, n.event("focus"), n.event("focuschange");
                }), i.addEventListener("blur", function () {
                    t._isFocused = !1, n.event("blur"), n.event("focuschange"), n._isInputting() && (xt.inputElement.target.focus = !1);
                });
                var s = "visibilityState", a = "visibilitychange", r = i.document;
                void 0 !== r.hidden ? (a = "visibilitychange", s = "visibilityState") : void 0 !== r.mozHidden ? (a = "mozvisibilitychange",
                    s = "mozVisibilityState") : void 0 !== r.msHidden ? (a = "msvisibilitychange", s = "msVisibilityState") : void 0 !== r.webkitHidden && (a = "webkitvisibilitychange",
                        s = "webkitVisibilityState"), i.document.addEventListener(a, function () {
                            "hidden" == O.document[s] ? n._setStageVisible(!1) : n._setStageVisible(!0);
                        }), i.document.addEventListener("qbrowserVisibilityChange", function (t) {
                            n._setStageVisible(!t.hidden);
                        }), i.addEventListener("resize", function () {
                            var e = O.window.orientation;
                            null != e && e != t._previousOrientation && n._isInputting() && (xt.inputElement.target.focus = !1),
                                t._previousOrientation = e, n._isInputting() || n._resetCanvas();
                        }), i.addEventListener("orientationchange", function (t) {
                            n._resetCanvas();
                        }), this.on("mousemove", this, this._onmouseMove), O.onMobile && this.on("mousedown", this, this._onmouseMove);
            }
            s(e, "laya.display.Stage", t);
            var h = e.prototype;
            return h._setStageVisible = function (t) {
                this._isVisibility != t && (this._isVisibility = t, this._isVisibility || this._isInputting() && (xt.inputElement.target.focus = !1),
                    this.event("visibilitychange"));
            }, h._isInputting = function () {
                return O.onMobile && xt.isInputting;
            }, h._changeCanvasSize = function () {
                this.setScreenSize(O.clientWidth * O.pixelRatio, O.clientHeight * O.pixelRatio);
            }, h._resetCanvas = function () {
                if (this.screenAdaptationEnabled) {
                    var t = P._mainCanvas;
                    t.source.style;
                    t.size(1, 1), i.timer.once(100, this, this._changeCanvasSize);
                }
            }, h.setScreenSize = function (t, e) {
                var i = !1;
                if ("none" !== this._screenMode) {
                    if (i = (t / e < 1 ? "vertical" : "horizontal") !== this._screenMode) {
                        var n = e;
                        e = t, t = n;
                    }
                }
                this.canvasRotation = i;
                var s = P._mainCanvas, a = s.source.style, h = this._canvasTransform.identity(), l = this._scaleMode, c = t / this.designWidth, u = e / this.designHeight, d = o.useRetinalCanvas ? t : this.designWidth, _ = o.useRetinalCanvas ? e : this.designHeight, f = t, p = e, g = O.pixelRatio;
                switch (this._width = this.designWidth, this._height = this.designHeight, l) {
                    case "noscale":
                        c = u = 1, f = this.designWidth, p = this.designHeight;
                        break;

                    case "showall":
                        c = u = Math.min(c, u), d = f = Math.round(this.designWidth * c), _ = p = Math.round(this.designHeight * u);
                        break;

                    case "noborder":
                        c = u = Math.max(c, u), f = Math.round(this.designWidth * c), p = Math.round(this.designHeight * u);
                        break;

                    case "full":
                        c = u = 1, this._width = d = t, this._height = _ = e;
                        break;

                    case "fixedwidth":
                        u = c, this._height = _ = Math.round(e / c);
                        break;

                    case "fixedheight":
                        c = u, this._width = d = Math.round(t / u);
                        break;

                    case "fixedauto":
                        t / e < this.designWidth / this.designHeight ? (u = c, this._height = _ = Math.round(e / c)) : (c = u,
                            this._width = d = Math.round(t / u));
                }
                this.conchModel && this.conchModel.size(this._width, this._height), o.useRetinalCanvas && (d = t,
                    _ = e), c *= this.scaleX, u *= this.scaleY, 1 === c && 1 === u ? this.transform.identity() : (this.transform.a = this._formatData(c / (f / d)),
                        this.transform.d = this._formatData(u / (p / _)), this.conchModel && this.conchModel.scale(this.transform.a, this.transform.d)),
                    s.size(d, _), r.changeWebGLSize(d, _), h.scale(f / d / g, p / _ / g), "left" === this._alignH ? this.offset.x = 0 : "right" === this._alignH ? this.offset.x = (t - f) / g : this.offset.x = .5 * (t - f) / g,
                    "top" === this._alignV ? this.offset.y = 0 : "bottom" === this._alignV ? this.offset.y = (e - p) / g : this.offset.y = .5 * (e - p) / g,
                    this.offset.x = Math.round(this.offset.x), this.offset.y = Math.round(this.offset.y),
                    h.translate(this.offset.x, this.offset.y), this.canvasDegree = 0, i && ("horizontal" === this._screenMode ? (h.rotate(Math.PI / 2),
                        h.translate(e / g, 0), this.canvasDegree = 90) : (h.rotate(-Math.PI / 2), h.translate(0, t / g),
                            this.canvasDegree = -90)), h.a = this._formatData(h.a), h.d = this._formatData(h.d),
                    h.tx = this._formatData(h.tx), h.ty = this._formatData(h.ty), a.transformOrigin = a.webkitTransformOrigin = a.msTransformOrigin = a.mozTransformOrigin = a.oTransformOrigin = "0px 0px 0px",
                    a.transform = a.webkitTransform = a.msTransform = a.mozTransform = a.oTransform = "matrix(" + h.toString() + ")",
                    h.translate(parseInt(a.left) || 0, parseInt(a.top) || 0), this.visible = !0, this._repaint = 1,
                    this.event("resize");
            }, h._formatData = function (t) {
                return Math.abs(t) < 1e-6 ? 0 : Math.abs(1 - t) < .001 ? t > 0 ? 1 : -1 : t;
            }, h.getMousePoint = function () {
                return T.TEMP.setTo(this.mouseX, this.mouseY);
            }, h.repaint = function () {
                this._repaint = 1;
            }, h.parentRepaint = function () { }, h._loop = function () {
                return this.render(P.context, 0, 0), !0;
            }, h._onmouseMove = function (t) {
                this._mouseMoveTime = O.now();
            }, h.getTimeFromFrameStart = function () {
                return O.now() - this._frameStartTime;
            }, h.render = function (e, n, s) {
                if ("sleep" === this._frameRate && !P.isConchApp) {
                    var a = O.now();
                    if (!(a - this._frameStartTime >= 1e3)) return;
                    this._frameStartTime = a;
                }
                if (this._renderCount++, P.isFlash && this.repaint(), this._style.visible) {
                    this._frameStartTime = O.now();
                    var o = "slow" !== ("mouse" === this._frameRate ? this._frameStartTime - this._mouseMoveTime < 2e3 ? "fast" : "slow" : this._frameRate), h = this._renderCount % 2 == 0;
                    if (X.renderSlow = !o, o || h || P.isConchApp) {
                        X.loopCount++, m.instance.runEvent(), i.timer._update(), r.update3DLoop();
                        var l, c = 0, u = 0;
                        if (P.isConchNode) for (c = 0, u = this._scenes.length; c < u; c++) (l = this._scenes[c]) && l._updateSceneConch(); else for (c = 0,
                            u = this._scenes.length; c < u; c++) (l = this._scenes[c]) && l._updateScene();
                        if (P.isConchNode) {
                            var d = ut.CustomList;
                            for (c = 0, u = d.length; c < u; c++) {
                                var _ = d[c];
                                _.customRender(_.customContext, 0, 0);
                            }
                            return;
                        }
                    }
                    P.isConchNode || this.renderingEnabled && (o || !h || P.isConchWebGL) && (P.isWebGL ? (e.clear(),
                        t.prototype.render.call(this, e, n, s), X._show && X._sp && X._sp.render(e, n, s),
                        r.clear(this._bgColor), r.beginFlush(), e.flush(), r.endFinish(), $.instance && $.getInstance().endDispose()) : (r.clear(this._bgColor),
                            t.prototype.render.call(this, e, n, s), X._show && X._sp && X._sp.render(e, n, s)));
                } else this._renderCount % 5 == 0 && (X.loopCount++, m.instance.runEvent(), i.timer._update());
            }, h._requestFullscreen = function () {
                var t = O.document.documentElement;
                t.requestFullscreen ? t.requestFullscreen() : t.mozRequestFullScreen ? t.mozRequestFullScreen() : t.webkitRequestFullscreen ? t.webkitRequestFullscreen() : t.msRequestFullscreen && t.msRequestFullscreen();
            }, h._fullScreenChanged = function () {
                i.stage.event("fullscreenchange");
            }, h.exitFullscreen = function () {
                var t = O.document;
                t.exitFullscreen ? t.exitFullscreen() : t.mozCancelFullScreen ? t.mozCancelFullScreen() : t.webkitExitFullscreen && t.webkitExitFullscreen();
            }, a(0, h, "clientScaleX", function () {
                return this._transform ? this._transform.getScaleX() : 1;
            }), a(0, h, "desginHeight", function () {
                return console.debug("desginHeight已经弃用，请使用designHeight代替"), this.designHeight;
            }), a(0, h, "frameRate", function () {
                return this._frameRate;
            }, function (t) {
                if (this._frameRate = t, P.isConchApp) switch (this._frameRate) {
                    case "slow":
                        O.window.conch && O.window.conchConfig.setSlowFrame && O.window.conchConfig.setSlowFrame(!0);
                        break;

                    case "fast":
                        O.window.conch && O.window.conchConfig.setSlowFrame && O.window.conchConfig.setSlowFrame(!1);
                        break;

                    case "mouse":
                        O.window.conch && O.window.conchConfig.setMouseFrame && O.window.conchConfig.setMouseFrame(2e3);
                        break;

                    case "sleep":
                        O.window.conch && O.window.conchConfig.setLimitFPS && O.window.conchConfig.setLimitFPS(1);
                        break;

                    default:
                        throw new Error("Stage:frameRate invalid.");
                }
            }), a(0, h, "clientScaleY", function () {
                return this._transform ? this._transform.getScaleY() : 1;
            }), a(0, h, "width", t.prototype._$get_width, function (t) {
                this.designWidth = t, i.superSet(ut, this, "width", t), i.timer.callLater(this, this._changeCanvasSize);
            }), a(0, h, "alignH", function () {
                return this._alignH;
            }, function (t) {
                this._alignH = t, i.timer.callLater(this, this._changeCanvasSize);
            }), a(0, h, "isFocused", function () {
                return this._isFocused;
            }), a(0, h, "height", t.prototype._$get_height, function (t) {
                this.designHeight = t, i.superSet(ut, this, "height", t), i.timer.callLater(this, this._changeCanvasSize);
            }), a(0, h, "transform", function () {
                return this._tfChanged && this._adjustTransform(), this._transform = this._transform || M.create();
            }, t.prototype._$set_transform), a(0, h, "isVisibility", function () {
                return this._isVisibility;
            }), a(0, h, "desginWidth", function () {
                return console.debug("desginWidth已经弃用，请使用designWidth代替"), this.designWidth;
            }), a(0, h, "scaleMode", function () {
                return this._scaleMode;
            }, function (t) {
                this._scaleMode = t, i.timer.callLater(this, this._changeCanvasSize);
            }), a(0, h, "alignV", function () {
                return this._alignV;
            }, function (t) {
                this._alignV = t, i.timer.callLater(this, this._changeCanvasSize);
            }), a(0, h, "bgColor", function () {
                return this._bgColor;
            }, function (t) {
                this._bgColor = t, this.conchModel && this.conchModel.bgColor(t), P.isWebGL && (t ? e._wgColor = z.create(t)._color : O.onMiniGame || O.onQGMiniGame || O.onVVMiniGame || (e._wgColor = null)),
                    O.onLimixiu ? e._wgColor = z.create(t)._color : P.canvas.style.background = t || "none";
            }), a(0, h, "mouseX", function () {
                return Math.round(m.instance.mouseX / this.clientScaleX);
            }), a(0, h, "mouseY", function () {
                return Math.round(m.instance.mouseY / this.clientScaleY);
            }), a(0, h, "screenMode", function () {
                return this._screenMode;
            }, function (t) {
                this._screenMode = t;
            }), a(0, h, "visible", t.prototype._$get_visible, function (t) {
                if (this.visible !== t) {
                    i.superSet(ut, this, "visible", t);
                    P._mainCanvas.source.style.visibility = t ? "visible" : "hidden";
                }
            }), a(0, h, "fullScreenEnabled", null, function (t) {
                var e = O.document, i = P.canvas;
                t ? (i.addEventListener("mousedown", this._requestFullscreen), i.addEventListener("touchstart", this._requestFullscreen),
                    e.addEventListener("fullscreenchange", this._fullScreenChanged), e.addEventListener("mozfullscreenchange", this._fullScreenChanged),
                    e.addEventListener("webkitfullscreenchange", this._fullScreenChanged), e.addEventListener("msfullscreenchange", this._fullScreenChanged)) : (i.removeEventListener("mousedown", this._requestFullscreen),
                        i.removeEventListener("touchstart", this._requestFullscreen), e.removeEventListener("fullscreenchange", this._fullScreenChanged),
                        e.removeEventListener("mozfullscreenchange", this._fullScreenChanged), e.removeEventListener("webkitfullscreenchange", this._fullScreenChanged),
                        e.removeEventListener("msfullscreenchange", this._fullScreenChanged));
            }), e.SCALE_NOSCALE = "noscale", e.SCALE_EXACTFIT = "exactfit", e.SCALE_SHOWALL = "showall",
                e.SCALE_NOBORDER = "noborder", e.SCALE_FULL = "full", e.SCALE_FIXED_WIDTH = "fixedwidth",
                e.SCALE_FIXED_HEIGHT = "fixedheight", e.SCALE_FIXED_AUTO = "fixedauto", e.ALIGN_LEFT = "left",
                e.ALIGN_RIGHT = "right", e.ALIGN_CENTER = "center", e.ALIGN_TOP = "top", e.ALIGN_MIDDLE = "middle",
                e.ALIGN_BOTTOM = "bottom", e.SCREEN_NONE = "none", e.SCREEN_HORIZONTAL = "horizontal",
                e.SCREEN_VERTICAL = "vertical", e.FRAME_FAST = "fast", e.FRAME_SLOW = "slow", e.FRAME_MOUSE = "mouse",
                e.FRAME_SLEEP = "sleep", e.FRAME_MOUSE_THREDHOLD = 2e3, n(e, ["_wgColor", function () {
                    return this._wgColor = [0, 0, 0, 1];
                }]), e;
        }(ut), mt = (function (t) {
            function e() {
                this.url = null, this._channel = null, this._tar = null, this._playEvents = null,
                    this._stopEvents = null, e.__super.call(this), this.visible = !1, this.on("added", this, this._onParentChange),
                    this.on("removed", this, this._onParentChange);
            }
            s(e, "laya.media.SoundNode", ut);
            var i = e.prototype;
            i._onParentChange = function () {
                this.target = this.parent;
            }, i.play = function (t, e) {
                void 0 === t && (t = 1), isNaN(t) && (t = 1), this.url && (this.stop(), this._channel = A.playSound(this.url, t, e));
            }, i.stop = function () {
                this._channel && !this._channel.isStopped && this._channel.stop(), this._channel = null;
            }, i._setPlayAction = function (t, e, i, n) {
                void 0 === n && (n = !0), this[i] && t && (n ? t.on(e, this, this[i]) : t.off(e, this, this[i]));
            }, i._setPlayActions = function (t, e, i, n) {
                if (void 0 === n && (n = !0), t && e) {
                    var s = e.split(","), a = 0, r = 0;
                    for (r = s.length, a = 0; a < r; a++) this._setPlayAction(t, s[a], i, n);
                }
            }, a(0, i, "playEvent", null, function (t) {
                this._playEvents = t, t && this._tar && this._setPlayActions(this._tar, t, "play");
            }), a(0, i, "target", null, function (t) {
                this._tar && (this._setPlayActions(this._tar, this._playEvents, "play", !1), this._setPlayActions(this._tar, this._stopEvents, "stop", !1)),
                    this._tar = t, this._tar && (this._setPlayActions(this._tar, this._playEvents, "play", !0),
                        this._setPlayActions(this._tar, this._stopEvents, "stop", !0));
            }), a(0, i, "stopEvent", null, function (t) {
                this._stopEvents = t, t && this._tar && this._setPlayActions(this._tar, t, "stop");
            });
        }(), function (t) {
            function e() {
                this._src = null, this._onload = null, this._onerror = null, e.__super.call(this);
            }
            s(e, "laya.resource.FileBitmap", ft);
            var i = e.prototype;
            return a(0, i, "src", function () {
                return this._src;
            }, function (t) {
                this._src = t;
            }), a(0, i, "onload", null, function (t) { }), a(0, i, "onerror", null, function (t) { }),
                e;
        }()), yt = function (t) {
            function e(t, i) {
                this._is2D = !1, e.__super.call(this);
                var n = this;
                if (this._source = this, "2D" === t || "AUTO" === t && !P.isWebGL) {
                    this._is2D = !0, this._source = i || O.createElement("canvas"), this._w = this._source.width,
                        this._h = this._source.height;
                    var s = this;
                    s.getContext = function (t, e) {
                        if (n._ctx) return n._ctx;
                        var i = n._ctx = n._source.getContext(t, e);
                        return i && (i._canvas = s, P.isFlash || O.onLimixiu || (i.size = function (t, e) { })),
                            i;
                    };
                }
                this.lock = !0;
            }
            s(e, "laya.resource.HTMLCanvas", ft);
            var i = e.prototype;
            return i.clear = function () {
                this._ctx && this._ctx.clear();
            }, i.destroy = function () {
                this._ctx && this._ctx.destroy(), this._ctx = null, laya.resource.Resource.prototype.destroy.call(this);
            }, i.release = function () { }, i._setContext = function (t) {
                this._ctx = t;
            }, i.getContext = function (t, i) {
                return this._ctx ? this._ctx : this._ctx = e._createContext(this);
            }, i.getMemSize = function () {
                return 0;
            }, i.size = function (t, e) {
                (this._w != t || this._h != e || this._source && (this._source.width != t || this._source.height != e)) && (this._w = t,
                    this._h = e, this.memorySize = this._w * this._h * 4, this._ctx && this._ctx.size(t, e),
                    this._source && (this._source.height = e, this._source.width = t));
            }, i.getCanvas = function () {
                return this._source;
            }, i.toBase64 = function (t, e, i) {
                if (this._source) if (P.isConchApp && this._source.toBase64) this._source.toBase64(t, e, i); else {
                    var n = this._source.toDataURL(t, e);
                    i.call(this, n);
                }
            }, a(0, i, "context", function () {
                return this._ctx;
            }), a(0, i, "asBitmap", null, function (t) { }), e.create = function (t, i) {
                return new e(t, i);
            }, e.TYPE2D = "2D", e.TYPE3D = "3D", e.TYPEAUTO = "AUTO", e._createContext = null,
                e;
        }(), wt = (function (t) {
            function e(t, i, n, s, a, r, o, h) {
                throw e.__super.call(this), new Error("不允许new！");
            }
            s(e, "laya.resource.HTMLSubImage", ft), e.create = function (t, i, n, s, a, r, o, h) {
                return void 0 === h && (h = !1), new e(t, i, n, s, a, r, o, h);
            };
        }(), function (t) {
            function e() {
                this._frames = null, this._url = null, e.__super.call(this), this._setControlNode(this);
            }
            s(e, "laya.display.Animation", t);
            var n = e.prototype;
            n.destroy = function (t) {
                void 0 === t && (t = !0), this.stop(), laya.display.Sprite.prototype.destroy.call(this, t),
                    this._frames = null, this._labels = null;
            }, n.play = function (t, e, i, n) {
                void 0 === t && (t = 0), void 0 === e && (e = !0), void 0 === i && (i = ""), void 0 === n && (n = !0),
                    i && this._setFramesFromCache(i, n), this._isPlaying = !0, this.index = "string" == typeof t ? this._getFrameByLabel(t) : t,
                    this.loop = e, this._actionName = i, this._isReverse = 1 == this.wrapMode, this._frames && this.interval > 0 && this.timerLoop(this.interval, this, this._frameLoop, null, !0, !0);
            }, n._setFramesFromCache = function (t, i) {
                if (void 0 === i && (i = !1), this._url && (t = this._url + "#" + t), t && e.framesMap[t]) {
                    var n;
                    return (n = e.framesMap[t]) instanceof Array ? (this._frames = e.framesMap[t], this._count = this._frames.length) : (n.nodeRoot && (e.framesMap[t] = this._parseGraphicAnimationByData(n),
                        n = e.framesMap[t]), this._frames = n.frames, this._count = this._frames.length,
                        this._frameRateChanged || (this._interval = n.interval), this._labels = this._copyLabels(n.labels)),
                        !0;
                }
                return i && console.log("ani not found:", t), !1;
            }, n._copyLabels = function (t) {
                if (!t) return null;
                var e;
                e = {};
                var i;
                for (i in t) e[i] = q.copyArray([], t[i]);
                return e;
            }, n._frameLoop = function () {
                this._style.visible && this._style.alpha > .01 && t.prototype._frameLoop.call(this);
            }, n._displayToIndex = function (t) {
                this._frames && (this.graphics = this._frames[t]);
            }, n.clear = function () {
                this.stop(), this.graphics = null, this._frames = null, this._labels = null;
            }, n.loadImages = function (t, i) {
                return void 0 === i && (i = ""), this._url = "", this._setFramesFromCache(i) || (this.frames = e.framesMap[i] ? e.framesMap[i] : e.createFrames(t, i)),
                    this;
            }, n.loadAtlas = function (t, n, s) {
                function a(i) {
                    t === i && (r.frames = e.framesMap[s] ? e.framesMap[s] : e.createFrames(t, s), n && n.run());
                }
                void 0 === s && (s = ""), this._url = "";
                var r = this;
                return r._setFramesFromCache(s) || (rt.getAtlas(t) ? a(t) : i.loader.load(t, l.create(null, a, [t]), null, "atlas")),
                    this;
            }, n.loadAnimation = function (t, e, n) {
                this._url = t;
                return this._actionName || (this._actionName = ""), this._setFramesFromCache(this._actionName) ? (this._setFramesFromCache(this._actionName, !0),
                    this.index = 0, e && e.run()) : !n || rt.getAtlas(n) ? this._loadAnimationData(t, e, n) : i.loader.load(n, l.create(this, this._loadAnimationData, [t, e, n]), null, "atlas"),
                    this;
            }, n._loadAnimationData = function (t, n, s) {
                function a(i) {
                    if (rt.getRes(i) && t === i) {
                        var s;
                        if (e.framesMap[t + "#"]) o._setFramesFromCache(r._actionName, !0), r.index = 0,
                            r._checkResumePlaying(); else {
                            var a = o._parseGraphicAnimation(rt.getRes(t));
                            if (!a) return;
                            var h, l = a.animationList, c = 0, u = l.length;
                            for (c = 0; c < u; c++) s = l[c], e.framesMap[t + "#" + s.name] = s, h || (h = s);
                            h && (e.framesMap[t + "#"] = h, o._setFramesFromCache(r._actionName, !0), r.index = 0),
                                r._checkResumePlaying();
                        }
                        n && n.run();
                    }
                }
                var r = this;
                if (!s || rt.getAtlas(s)) {
                    var o = this;
                    rt.getRes(t) ? a(t) : i.loader.load(t, l.create(null, a, [t]), null, "json"),
                        rt.clearRes(t);
                } else console.warn("atlas load fail:" + s);
            }, n._parseGraphicAnimation = function (t) {
                return Lt.parseAnimationData(t);
            }, n._parseGraphicAnimationByData = function (t) {
                return Lt.parseAnimationByData(t);
            }, a(0, n, "frames", function () {
                return this._frames;
            }, function (t) {
                this._frames = t, t && (this._count = t.length, this._isPlaying ? this.play(this._index, this.loop, this._actionName) : this.index = this._index);
            }), a(0, n, "autoPlay", null, function (t) {
                t ? this.play() : this.stop();
            }), a(0, n, "source", null, function (t) {
                t.indexOf(".ani") > -1 ? this.loadAnimation(t) : t.indexOf(".json") > -1 || t.indexOf("als") > -1 || t.indexOf("atlas") > -1 ? this.loadAtlas(t) : this.loadImages(t.split(","));
            }), a(0, n, "autoAnimation", null, function (t) {
                this.play(0, !0, t, !1);
            }), e.createFrames = function (t, i) {
                var n, s, a = 0, o = 0;
                if ("string" == typeof t) {
                    var h = rt.getAtlas(t);
                    if (h && h.length) for (n = [], a = 0, o = h.length; a < o; a++) (s = new r.createGraphics()).drawTexture(rt.getRes(h[a]), 0, 0),
                        n.push(s);
                } else if (t instanceof Array) for (n = [], a = 0, o = t.length; a < o; a++) (s = new r.createGraphics()).loadImage(t[a], 0, 0),
                    n.push(s);
                return i && (e.framesMap[i] = n), n;
            }, e.clearCache = function (t) {
                var i, n = e.framesMap, s = t + "#";
                for (i in n) i !== t && 0 != i.indexOf(s) || delete e.framesMap[i];
            }, e.framesMap = {};
        }(pt), function (t) {
            function e() {
                this._targetDic = null, this._animationData = null, this._animationNewFrames = null,
                    e.__super.call(this), null == e._sortIndexFun && (e._sortIndexFun = C.sortByKey("index", !1, !0));
            }
            s(e, "laya.display.FrameAnimation", t);
            var i = e.prototype;
            return i._setUp = function (t, e) {
                this._labels = null, this._animationNewFrames = null, this._targetDic = t, this._animationData = e,
                    this.interval = 1e3 / e.frameRate, e.parsed ? (this._count = e.count, this._labels = e.labels,
                        this._animationNewFrames = e.animationNewFrames) : (this._animationNewFrames = [],
                            this._calculateDatas()), e.parsed = !0, e.labels = this._labels, e.count = this._count,
                    e.animationNewFrames = this._animationNewFrames;
            }, i.clear = function () {
                t.prototype.clear.call(this), this._targetDic = null, this._animationData = null;
            }, i._displayToIndex = function (t) {
                if (this._animationData) {
                    t < 0 && (t = 0), t > this._count && (t = this._count);
                    var e = this._animationData.nodes, i = 0, n = e.length;
                    for (i = 0; i < n; i++) this._displayNodeToFrame(e[i], t);
                }
            }, i._displayNodeToFrame = function (t, e, i) {
                i || (i = this._targetDic);
                var n = i[t.target];
                if (n) {
                    var s, a, r, o = t.frames, h = t.keys, l = 0, c = h.length;
                    for (l = 0; l < c; l++) r = (a = o[s = h[l]]).length > e ? a[e] : a[a.length - 1],
                        n[s] = r;
                }
            }, i._calculateDatas = function () {
                if (this._animationData) {
                    var t, e = this._animationData.nodes, i = 0, n = e.length;
                    for (this._count = 0, i = 0; i < n; i++) t = e[i], this._calculateNodeKeyFrames(t);
                    this._count += 1;
                }
            }, i._calculateNodeKeyFrames = function (t) {
                var i, n, s = t.keyframes, a = t.target;
                t.frames || (t.frames = {}), t.keys ? t.keys.length = 0 : t.keys = [], t.initValues || (t.initValues = {});
                for (i in s) n = s[i], t.frames[i] || (t.frames[i] = []), this._targetDic && this._targetDic[a] && (t.initValues[i] = this._targetDic[a][i]),
                    n.sort(e._sortIndexFun), t.keys.push(i), this._calculateNodePropFrames(n, t.frames[i], i, a);
            }, i.resetToInitState = function () {
                if (this._targetDic && this._animationData) {
                    var t, e, i = this._animationData.nodes, n = 0, s = i.length;
                    for (n = 0; n < s; n++) if (t = i[n], e = t.initValues) {
                        var a = this._targetDic[t.target];
                        if (a) {
                            var r;
                            for (r in e) a[r] = e[r];
                        }
                    }
                }
            }, i._calculateNodePropFrames = function (t, e, i, n) {
                var s = 0, a = t.length - 1;
                for (e.length = t[a].index + 1, s = 0; s < a; s++) this._dealKeyFrame(t[s]), this._calculateFrameValues(t[s], t[s + 1], e);
                0 == a && (e[t[0].index] = t[0].value, this._animationNewFrames && (this._animationNewFrames[t[0].index] = !0)),
                    this._dealKeyFrame(t[s]);
            }, i._dealKeyFrame = function (t) {
                t.label && "" != t.label && this.addLabel(t.label, t.index);
            }, i._calculateFrameValues = function (t, e, i) {
                var n, s = 0, a = t.index, r = e.index, o = t.value, h = e.value - t.value, l = r - a;
                if (r > this._count && (this._count = r), t.tween) for (null == (n = U[t.tweenMethod]) && (n = U.linearNone),
                    s = a; s < r; s++) i[s] = n(s - a, o, h, l), this._animationNewFrames && (this._animationNewFrames[s] = !0); else for (s = a; s < r; s++) i[s] = o;
                this._animationNewFrames && (this._animationNewFrames[t.index] = !0, this._animationNewFrames[e.index] = !0),
                    i[e.index] = e.value;
            }, e._sortIndexFun = null, e;
        }(pt)), xt = function (t) {
            function e() {
                this._focus = !1, this._multiline = !1, this._editable = !0, this._restrictPattern = null,
                    this._type = "text", this._prompt = "", this._promptColor = "#A9A9A9", this._originColor = "#000000",
                    this._content = "", e.__super.call(this), this._maxChars = 1e5, this._width = 100,
                    this._height = 20, this.multiline = !1, this.overflow = gt.SCROLL, this.on("mousedown", this, this._onMouseDown),
                    this.on("undisplay", this, this._onUnDisplay);
            }
            s(e, "laya.display.Input", t);
            var r = e.prototype;
            return r.setSelection = function (t, e) {
                this.focus = !0, laya.display.Input.inputElement.selectionStart = t, laya.display.Input.inputElement.selectionEnd = e;
            }, r._onUnDisplay = function (t) {
                this.focus = !1;
            }, r._onMouseDown = function (t) {
                this.focus = !0;
            }, r._syncInputTransform = function () {
                var t = this.nativeInput, n = q.getTransformRelativeToWindow(this, this.padding[3], this.padding[0]), s = this._width - this.padding[1] - this.padding[3], a = this._height - this.padding[0] - this.padding[2];
                P.isConchApp ? (t.setScale(n.scaleX, n.scaleY), t.setSize(s, a), t.setPos(n.x, n.y)) : (e.inputContainer.style.transform = e.inputContainer.style.webkitTransform = "scale(" + n.scaleX + "," + n.scaleY + ") rotate(" + i.stage.canvasDegree + "deg)",
                    t.style.width = s + "px", t.style.height = a + "px", e.inputContainer.style.left = n.x + "px",
                    e.inputContainer.style.top = n.y + "px");
            }, r.select = function () {
                this.nativeInput.select();
            }, r._setInputMethod = function () {
                e.input.parentElement && e.inputContainer.removeChild(e.input), e.area.parentElement && e.inputContainer.removeChild(e.area),
                    e.inputElement = this._multiline ? e.area : e.input, e.inputContainer.appendChild(e.inputElement),
                    gt.RightToLeft && (e.inputElement.style.direction = "rtl");
            }, r._focusIn = function () {
                laya.display.Input.isInputting = !0;
                var t = this.nativeInput;
                this._focus = !0;
                var e = t.style;
                e.whiteSpace = this.wordWrap ? "pre-wrap" : "nowrap", this._setPromptColor(), t.readOnly = !this._editable,
                    P.isConchApp && (t.setType(this._type), t.setForbidEdit(!this._editable)), t.maxLength = this._maxChars;
                this.padding;
                if (t.type = this._type, t.value = this._content, t.placeholder = this._prompt,
                    i.stage.off("keydown", this, this._onKeyDown), i.stage.on("keydown", this, this._onKeyDown),
                    i.stage.focus = this, this.event("focus"), O.onPC && t.focus(), !(O.onMiniGame || O.onBDMiniGame || O.onTTMiniGame || O.onQGMiniGame || O.onVVMiniGame || O.onBLMiniGame || O.onAlipayMiniGame)) {
                    this._text;
                    this._text = null;
                }
                this.typeset(), t.setColor(this._originColor), t.setBgColor && t.setBgColor(this.bgColor),
                    t.setFontSize(this.fontSize), t.setFontFace(O.onIPhone ? gt._fontFamilyMap[this.font] || this.font : this.font),
                    P.isConchApp && t.setMultiAble && t.setMultiAble(this._multiline), e.lineHeight = this.leading + this.fontSize + "px",
                    e.fontStyle = this.italic ? "italic" : "normal", e.fontWeight = this.bold ? "bold" : "normal",
                    e.textAlign = this.align, e.padding = "0 0", this._syncInputTransform(), !P.isConchApp && O.onPC && i.timer.frameLoop(1, this, this._syncInputTransform);
            }, r._setPromptColor = function () {
                (e.promptStyleDOM = O.getElementById("promptStyle")) || ((e.promptStyleDOM = O.createElement("style")).setAttribute("id", "promptStyle"),
                    O.document.head.appendChild(e.promptStyleDOM)), e.promptStyleDOM.innerText = "input::-webkit-input-placeholder, textarea::-webkit-input-placeholder {color:" + this._promptColor + "}input:-moz-placeholder, textarea:-moz-placeholder {color:" + this._promptColor + "}input::-moz-placeholder, textarea::-moz-placeholder {color:" + this._promptColor + "}input:-ms-input-placeholder, textarea:-ms-input-placeholder {color:" + this._promptColor + "}";
            }, r._focusOut = function () {
                laya.display.Input.isInputting = !1, this._focus = !1, this._text = null, this._content = this.nativeInput.value,
                    this._content ? (i.superSet(gt, this, "text", this._content), i.superSet(gt, this, "color", this._originColor)) : (i.superSet(gt, this, "text", this._prompt),
                        i.superSet(gt, this, "color", this._promptColor)), i.stage.off("keydown", this, this._onKeyDown),
                    i.stage.focus = null, this.event("blur"), P.isConchApp && this.nativeInput.blur(),
                    O.onPC && i.timer.clear(this, this._syncInputTransform);
            }, r._onKeyDown = function (t) {
                13 === t.keyCode && (O.onMobile && !this._multiline && (this.focus = !1), this.event("enter"));
            }, r.changeText = function (e) {
                this._content = e, this._focus ? (this.nativeInput.value = e || "", this.event("change")) : t.prototype.changeText.call(this, e);
            }, a(0, r, "color", t.prototype._$get_color, function (t) {
                this._focus && this.nativeInput.setColor(t), i.superSet(gt, this, "color", this._content ? t : this._promptColor),
                    this._originColor = t;
            }), a(0, r, "inputElementYAdjuster", function () {
                return console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementYAdjuster已弃用。"),
                    0;
            }, function (t) {
                console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementYAdjuster已弃用。");
            }), a(0, r, "multiline", function () {
                return this._multiline;
            }, function (t) {
                this._multiline = t, this.valign = t ? "top" : "middle";
            }), a(0, r, "maxChars", function () {
                return this._maxChars;
            }, function (t) {
                t <= 0 && (t = 1e5), this._maxChars = t;
            }), a(0, r, "text", function () {
                return this._focus ? this.nativeInput.value : this._content || "";
            }, function (t) {
                i.superSet(gt, this, "color", this._originColor), t += "", this._focus ? (this.nativeInput.value = t || "",
                    this.event("change")) : (this._multiline || (t = t.replace(/\r?\n/g, "")), this._content = t,
                        t ? i.superSet(gt, this, "text", t) : (i.superSet(gt, this, "text", this._prompt),
                            i.superSet(gt, this, "color", this.promptColor)));
            }), a(0, r, "nativeInput", function () {
                return this._multiline ? e.area : e.input;
            }), a(0, r, "prompt", function () {
                return this._prompt;
            }, function (t) {
                !this._text && t && i.superSet(gt, this, "color", this._promptColor), this.promptColor = this._promptColor,
                    this._text ? i.superSet(gt, this, "text", this._text == this._prompt ? t : this._text) : i.superSet(gt, this, "text", t),
                    this._prompt = gt.langPacks && gt.langPacks[t] ? gt.langPacks[t] : t;
            }), a(0, r, "focus", function () {
                return this._focus;
            }, function (t) {
                var i = this.nativeInput;
                this._focus !== t && (t ? (i.target ? i.target._focusOut() : this._setInputMethod(),
                    i.target = this, this._focusIn()) : (i.target = null, this._focusOut(), O.document.body.scrollTop = 0,
                        i.blur(), P.isConchApp ? i.setPos(-1e4, -1e4) : e.inputContainer.contains(i) && e.inputContainer.removeChild(i)));
            }), a(0, r, "restrict", function () {
                return this._restrictPattern ? this._restrictPattern.source : "";
            }, function (t) {
                t ? ((t = "[^" + t + "]").indexOf("^^") > -1 && (t = t.replace("^^", "")), this._restrictPattern = new RegExp(t, "g")) : this._restrictPattern = null;
            }), a(0, r, "editable", function () {
                return this._editable;
            }, function (t) {
                this._editable = t, P.isConchApp && e.input.setForbidEdit(!t);
            }), a(0, r, "promptColor", function () {
                return this._promptColor;
            }, function (t) {
                this._promptColor = t, this._content || i.superSet(gt, this, "color", t);
            }), a(0, r, "type", function () {
                return this._type;
            }, function (t) {
                this._getCSSStyle().password = "password" == t, this._type = t, P.isConchApp && this.nativeInput.setType(t);
            }), a(0, r, "inputElementXAdjuster", function () {
                return console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementXAdjuster已弃用。"),
                    0;
            }, function (t) {
                console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementXAdjuster已弃用。");
            }), a(0, r, "asPassword", function () {
                return this._getCSSStyle().password;
            }, function (t) {
                this._getCSSStyle().password = t, this._type = "password", console.warn('deprecated: 使用type="password"替代设置asPassword, asPassword将在下次重大更新时删去'),
                    this.isChanged = !0;
            }), e.__init__ = function () {
                if (e._createInputElement(), O.onMobile) {
                    var t = !1;
                    (O.onMiniGame || O.onBDMiniGame || O.onKGMiniGame || O.onTTMiniGame || O.onQGMiniGame || O.onVVMiniGame || O.onBLMiniGame || O.onAlipayMiniGame || O.onQQMiniGame) && (t = !0),
                        P.canvas.addEventListener(e.IOS_IFRAME ? t ? "touchend" : "click" : "touchend", e._popupInputMethod);
                }
            }, e._popupInputMethod = function (t) {
                if (laya.display.Input.isInputting) {
                    laya.display.Input.inputElement.focus();
                }
            }, e._createInputElement = function () {
                e._initInput(e.area = O.createElement("textarea")), e._initInput(e.input = O.createElement("input")),
                    (e.inputContainer = O.createElement("div")).style.position = "absolute", e.inputContainer.style.zIndex = 1e5,
                    O.container.appendChild(e.inputContainer), e.inputContainer.setPos = function (t, i) {
                        e.inputContainer.style.left = t + "px", e.inputContainer.style.top = i + "px";
                    };
            }, e._initInput = function (t) {
                var i = t.style;
                i.cssText = "position:absolute;overflow:hidden;resize:none;transform-origin:0 0;-webkit-transform-origin:0 0;-moz-transform-origin:0 0;-o-transform-origin:0 0;",
                    i.resize = "none", i.backgroundColor = "transparent", i.border = "none", i.outline = "none",
                    i.zIndex = 1, t.addEventListener("input", e._processInputting), t.addEventListener("mousemove", e._stopEvent),
                    t.addEventListener("mousedown", e._stopEvent), t.addEventListener("touchmove", e._stopEvent),
                    t.setFontFace = function (e) {
                        t.style.fontFamily = e;
                    }, P.isConchApp || (t.setColor = function (e) {
                        t.style.color = e;
                    }, t.setFontSize = function (e) {
                        t.style.fontSize = e + "px";
                    });
            }, e._processInputting = function (t) {
                var e = laya.display.Input.inputElement.target;
                if (e) {
                    var i = laya.display.Input.inputElement.value;
                    e._restrictPattern && (i = i.replace(/\u2006|\x27/g, ""), e._restrictPattern.test(i) && (i = i.replace(e._restrictPattern, ""),
                        laya.display.Input.inputElement.value = i)), e._text = i, e.event("input");
                }
            }, e._stopEvent = function (t) {
                "touchmove" == t.type && t.preventDefault(), t.stopPropagation && t.stopPropagation();
            }, e.TYPE_TEXT = "text", e.TYPE_PASSWORD = "password", e.TYPE_EMAIL = "email", e.TYPE_URL = "url",
                e.TYPE_NUMBER = "number", e.TYPE_RANGE = "range", e.TYPE_DATE = "date", e.TYPE_MONTH = "month",
                e.TYPE_WEEK = "week", e.TYPE_TIME = "time", e.TYPE_DATE_TIME = "datetime", e.TYPE_DATE_TIME_LOCAL = "datetime-local",
                e.TYPE_SEARCH = "search", e.input = null, e.area = null, e.inputElement = null,
                e.inputContainer = null, e.confirmButton = null, e.promptStyleDOM = null, e.inputHeight = 45,
                e.isInputting = !1, e.stageMatrix = null, n(e, ["IOS_IFRAME", function () {
                    return this.IOS_IFRAME = O.onIOS && O.window.top != O.window.self;
                }]), e;
        }(gt), bt = function (t) {
            function e(t, i) {
                this._recreateLock = !1, this._needReleaseAgain = !1, this._enableMerageInAtlas = !0,
                    e.__super.call(this), this._init_(t, i);
            }
            s(e, "laya.resource.HTMLImage", mt);
            var i = e.prototype;
            return i._init_ = function (t, e) {
                this._src = t, this._source = new O.window.Image(), e && (e.onload && (this.onload = e.onload),
                    e.onerror && (this.onerror = e.onerror), e.onCreate && e.onCreate(this)), 0 != t.indexOf("data:image") && (this._source.crossOrigin = ""),
                    t && (this._source.src = t);
            }, i.recreateResource = function () {
                var t = this;
                if ("" === this._src) throw new Error("src no null！");
                if (this._needReleaseAgain = !1, this._source) {
                    if (this._recreateLock) return;
                    this.memorySize = this._w * this._h * 4, this._recreateLock = !1, this.completeCreate();
                } else {
                    this._recreateLock = !0;
                    var e = this;
                    this._source = new O.window.Image(), this._source.crossOrigin = "", this._source.onload = function () {
                        if (e._needReleaseAgain) return e._needReleaseAgain = !1, e._source.onload = null,
                            void (e._source = null);
                        e._source.onload = null, e.memorySize = t._w * t._h * 4, e._recreateLock = !1, e.completeCreate();
                    }, this._source.src = this._src;
                }
            }, i.disposeResource = function () {
                this._recreateLock && (this._needReleaseAgain = !0), this._source && (this._source = null,
                    this.memorySize = 0);
            }, i.onresize = function () {
                this._w = this._source.width, this._h = this._source.height;
            }, a(0, i, "onload", null, function (t) {
                var e = this;
                this._onload = t, this._source && (this._source.onload = null != this._onload ? function () {
                    e.onresize(), e._onload();
                } : null);
            }), a(0, i, "onerror", null, function (t) {
                var e = this;
                this._onerror = t, this._source && (this._source.onerror = null != this._onerror ? function () {
                    e._onerror();
                } : null);
            }), a(0, i, "enableMerageInAtlas", function () {
                return this._enableMerageInAtlas;
            }, function (t) {
                this._enableMerageInAtlas = t, P.isConchApp && this._source && (this._source.enableMerageInAtlas = t);
            }), e.create = function (t, i) {
                return new e(t, i);
            }, e;
        }(), Lt = (function (t) {
            function e() {
                this._target = null, this._playEvents = null, this._initData = {}, this._aniKeys = null,
                    this._effectClass = null, e.__super.call(this);
            }
            s(e, "laya.display.EffectAnimation", t);
            var i = e.prototype;
            i._onOtherBegin = function (t) {
                t != this && this.stop();
            }, i.addEvent = function () {
                this._target && this._playEvents && (this._setControlNode(this._target), this._target.on(this._playEvents, this, this._onPlayAction));
            }, i._onPlayAction = function () {
                this.play(0, !1);
            }, i.play = function (t, e, i, n) {
                void 0 === t && (t = 0), void 0 === e && (e = !0), void 0 === i && (i = ""), void 0 === n && (n = !0),
                    this._target && (this._target.event("effectanimationbegin", [this]), this._recordInitData(),
                        laya.display.AnimationPlayerBase.prototype.play.call(this, t, e, i, n));
            }, i._recordInitData = function () {
                if (this._aniKeys) {
                    var t = 0, e = 0;
                    e = this._aniKeys.length;
                    var i;
                    for (t = 0; t < e; t++) i = this._aniKeys[t], this._initData[i] = this._target[i];
                }
            }, i._displayToIndex = function (t) {
                if (this._animationData) {
                    t < 0 && (t = 0), t > this._count && (t = this._count);
                    var e = this._animationData.nodes, i = 0, n = e.length;
                    for (n = n > 1 ? 1 : n, i = 0; i < n; i++) this._displayNodeToFrame(e[i], t);
                }
            }, i._displayNodeToFrame = function (t, e, i) {
                if (this._target) {
                    var n;
                    n = this._target;
                    var s, a, r, o, h = t.frames, l = t.keys, c = 0, u = l.length;
                    o = t.secondFrames;
                    var d, _, f, p, g = 0;
                    for (c = 0; c < u; c++) a = h[s = l[c]], -1 == (g = o[s]) ? r = this._initData[s] : e < g ? (f = (_ = t.keyframes[s])[0]).tween ? (null == (d = U[f.tweenMethod]) && (d = U.linearNone),
                        p = _[1], r = d(e, this._initData[s], p.value - this._initData[s], p.index)) : r = this._initData[s] : r = a.length > e ? a[e] : a[a.length - 1],
                        n[s] = r;
                }
            }, i._calculateNodeKeyFrames = function (e) {
                t.prototype._calculateNodeKeyFrames.call(this, e);
                var i, n, s, a = e.keyframes;
                e.target;
                s = {}, e.secondFrames = s;
                for (i in a) (n = a[i]).length <= 1 ? s[i] = -1 : s[i] = n[1].index;
            }, a(0, i, "target", function () {
                return this._target;
            }, function (t) {
                this._target && this._target.off("effectanimationbegin", this, this._onOtherBegin),
                    this._target = t, this._target && this._target.on("effectanimationbegin", this, this._onOtherBegin),
                    this.addEvent();
            }), a(0, i, "playEvent", null, function (t) {
                this._playEvents = t, t && this.addEvent();
            }), a(0, i, "effectData", null, function (t) {
                if (t) {
                    var e;
                    (e = t.animations) && e[0] && (this._setUp({}, e[0]), e[0].nodes && e[0].nodes[0] && (this._aniKeys = e[0].nodes[0].keys));
                }
            }), a(0, i, "effectClass", null, function (t) {
                if (this._effectClass = H.getClass(t), this._effectClass) {
                    var e;
                    if (e = this._effectClass.uiView) {
                        var i;
                        (i = e.animations) && i[0] && (this._setUp({}, i[0]), i[0].nodes && i[0].nodes[0] && (this._aniKeys = i[0].nodes[0].keys));
                    }
                }
            }), e.EffectAnimationBegin = "effectanimationbegin";
        }(wt), function (t) {
            function e() {
                this.animationList = null, this.animationDic = null, this._nodeList = null, this._nodeDefaultProps = null,
                    this._gList = null, this._nodeIDAniDic = {}, this._rootNode = null, this._nodeGDic = null,
                    e.__super.call(this);
            }
            var i;
            s(e, "laya.utils.GraphicAnimation", t);
            var a = e.prototype;
            return a._parseNodeList = function (t) {
                this._nodeList || (this._nodeList = []), this._nodeDefaultProps[t.compId] = t.props,
                    t.compId && this._nodeList.push(t.compId);
                var e = t.child;
                if (e) {
                    var i = 0, n = e.length;
                    for (i = 0; i < n; i++) this._parseNodeList(e[i]);
                }
            }, a._calGraphicData = function (t) {
                if (this._setUp(null, t), this._createGraphicData(), this._nodeIDAniDic) {
                    var e;
                    for (e in this._nodeIDAniDic) this._nodeIDAniDic[e] = null;
                }
            }, a._createGraphicData = function () {
                var t = [], e = 0, i = this.count, n = this._animationNewFrames;
                n || (n = []);
                var s;
                for (e = 0; e < i; e++) !n[e] && s || (s = this._createFrameGraphic(e)), t.push(s);
                this._gList = t;
            }, a._createFrameGraphic = function (t) {
                var i = r.createGraphics();
                return e._rootMatrix || (e._rootMatrix = new M()), this._updateNodeGraphic(this._rootNode, t, e._rootMatrix, i),
                    i;
            }, a._updateNodeGraphic = function (t, e, i, n, s) {
                void 0 === s && (s = 1);
                var a, r = (a = this._nodeGDic[t.compId] = this._getNodeGraphicData(t.compId, e, this._nodeGDic[t.compId])).alpha * s;
                if (!(r < .01)) {
                    a.resultTransform || (a.resultTransform = M.create());
                    var o;
                    o = a.resultTransform, M.mul(a.transform, i, o);
                    var h;
                    a.skin && (h = this._getTextureByUrl(a.skin)) && (o._checkTransform() ? (n.drawTexture(h, 0, 0, a.width, a.height, o, r),
                        a.resultTransform = null) : n.drawTexture(h, o.tx, o.ty, a.width, a.height, null, r));
                    var l;
                    if (l = t.child) {
                        var c = 0, u = 0;
                        for (u = l.length, c = 0; c < u; c++) this._updateNodeGraphic(l[c], e, o, n, r);
                    }
                }
            }, a._updateNoChilds = function (t, e) {
                if (t.skin) {
                    var i = this._getTextureByUrl(t.skin);
                    if (i) {
                        var n = t.transform;
                        n._checkTransform();
                        !n.bTransform ? e.drawTexture(i, n.tx, n.ty, t.width, t.height, null, t.alpha) : e.drawTexture(i, 0, 0, t.width, t.height, n.clone(), t.alpha);
                    }
                }
            }, a._updateNodeGraphic2 = function (t, e, i) {
                var n;
                if (n = this._nodeGDic[t.compId] = this._getNodeGraphicData(t.compId, e, this._nodeGDic[t.compId]),
                    t.child) {
                    var s = n.transform;
                    s._checkTransform();
                    var a = !1, r = !1;
                    r = (a = !s.bTransform) && (0 != s.tx || 0 != s.ty);
                    var o = !1;
                    (o = s.bTransform || 1 != n.alpha) && i.save(), 1 != n.alpha && i.alpha(n.alpha),
                        a ? r && i.translate(s.tx, s.ty) : i.transform(s.clone());
                    var h;
                    h = t.child;
                    var l;
                    if (n.skin && (l = this._getTextureByUrl(n.skin)) && i.drawTexture(l, 0, 0, n.width, n.height),
                        h) {
                        var c = 0, u = 0;
                        for (u = h.length, c = 0; c < u; c++) this._updateNodeGraphic2(h[c], e, i);
                    }
                    o ? i.restore() : a ? r && i.translate(-s.tx, -s.ty) : i.transform(s.clone().invert());
                } else this._updateNoChilds(n, i);
            }, a._calculateNodeKeyFrames = function (e) {
                t.prototype._calculateNodeKeyFrames.call(this, e), this._nodeIDAniDic[e.target] = e;
            }, a.getNodeDataByID = function (t) {
                return this._nodeIDAniDic[t];
            }, a._getParams = function (t, i, n, s) {
                var a = e._temParam;
                a.length = i.length;
                var r = 0, o = i.length;
                for (r = 0; r < o; r++) a[r] = this._getObjVar(t, i[r][0], n, i[r][1], s);
                return a;
            }, a._getObjVar = function (t, e, i, n, s) {
                if (t.hasOwnProperty(e)) {
                    var a = t[e];
                    if (i >= a.length && (i = a.length - 1), void 0 != t[e][i]) return t[e][i];
                }
                return s.hasOwnProperty(e) ? s[e] : n;
            }, a._getNodeGraphicData = function (t, n, s) {
                s || (s = i.create()), s.transform ? s.transform.identity() : s.transform = M.create();
                var a = this.getNodeDataByID(t);
                if (!a) return s;
                var r = a.frames, o = this._getParams(r, e._drawTextureCmd, n, this._nodeDefaultProps[t]), h = o[0], l = NaN, c = NaN, u = o[5], d = o[6], _ = o[13], f = o[14], p = o[7], g = o[8], v = o[9], m = o[11], y = o[12];
                l = o[3], c = o[4], 0 != l && 0 != c || (h = null), -1 == l && (l = 0), -1 == c && (c = 0);
                var w;
                s.skin = h, s.width = l, s.height = c, h && ((w = this._getTextureByUrl(h)) ? (l || (l = w.sourceWidth),
                    c || (c = w.sourceHeight)) : console.warn("lost skin:", h, ",you may load pics first")),
                    s.alpha = o[10];
                var x;
                x = s.transform, 0 != _ && (u = _ * l), 0 != f && (d = f * c), 0 == u && 0 == d || x.translate(-u, -d);
                var b = null;
                if (v || 1 !== p || 1 !== g || m || y) {
                    (b = e._tempMt).identity(), b.bTransform = !0;
                    var L = .0174532922222222 * (v - m), C = .0174532922222222 * (v + y), T = Math.cos(C), S = Math.sin(C), A = Math.sin(L), I = Math.cos(L);
                    b.a = p * T, b.b = p * S, b.c = -g * A, b.d = g * I, b.tx = b.ty = 0;
                }
                return b && (x = M.mul(x, b, x)), x.translate(o[1], o[2]), s;
            }, a._getTextureByUrl = function (t) {
                return rt.getRes(t);
            }, a.setAniData = function (t, i) {
                if (t.animations) {
                    this._nodeDefaultProps = {}, this._nodeGDic = {}, this._nodeList && (this._nodeList.length = 0),
                        this._rootNode = t, this._parseNodeList(t);
                    var n, s = {}, a = [], r = t.animations, o = 0, h = r.length;
                    for (o = 0; o < h; o++) if (n = r[o], this._labels = null, (!i || i == n.name) && n) {
                        try {
                            this._calGraphicData(n);
                        } catch (t) {
                            console.warn("parse animation fail:" + n.name + ",empty animation created"), this._gList = [];
                        }
                        var l = {};
                        l.interval = 1e3 / n.frameRate, l.frames = this._gList, l.labels = this._labels,
                            l.name = n.name, a.push(l), s[n.name] = l;
                    }
                    this.animationList = a, this.animationDic = s;
                }
                e._temParam.length = 0;
            }, a.parseByData = function (t) {
                var e, i;
                e = t.nodeRoot, i = t.aniO, delete t.nodeRoot, delete t.aniO, this._nodeDefaultProps = {},
                    this._nodeGDic = {}, this._nodeList && (this._nodeList.length = 0), this._rootNode = e,
                    this._parseNodeList(e), this._labels = null;
                try {
                    this._calGraphicData(i);
                } catch (t) {
                    console.warn("parse animation fail:" + i.name + ",empty animation created"), this._gList = [];
                }
                var n = t;
                return n.interval = 1e3 / i.frameRate, n.frames = this._gList, n.labels = this._labels,
                    n.name = i.name, n;
            }, a.setUpAniData = function (t) {
                if (t.animations) {
                    var e, i = {}, n = [], s = t.animations, a = 0, r = s.length;
                    for (a = 0; a < r; a++) if (e = s[a]) {
                        var o = {};
                        o.name = e.name, o.aniO = e, o.nodeRoot = t, n.push(o), i[e.name] = o;
                    }
                    this.animationList = n, this.animationDic = i;
                }
            }, a._clear = function () {
                if (this.animationList = null, this.animationDic = null, this._gList = null, this._nodeGDic) {
                    var t, e;
                    for (t in this._nodeGDic) (e = this._nodeGDic[t]) && e.recover();
                }
                this._nodeGDic = null;
            }, e.parseAnimationByData = function (t) {
                e._I || (e._I = new e());
                var i;
                return i = e._I.parseByData(t), e._I._clear(), i;
            }, e.parseAnimationData = function (t) {
                e._I || (e._I = new e()), e._I.setUpAniData(t);
                var i;
                return i = {}, i.animationList = e._I.animationList, i.animationDic = e._I.animationDic,
                    e._I._clear(), i;
            }, e._drawTextureCmd = [["skin", null], ["x", 0], ["y", 0], ["width", -1], ["height", -1], ["pivotX", 0], ["pivotY", 0], ["scaleX", 1], ["scaleY", 1], ["rotation", 0], ["alpha", 1], ["skewX", 0], ["skewY", 0], ["anchorX", 0], ["anchorY", 0]],
                e._temParam = [], e._I = null, e._rootMatrix = null, n(e, ["_tempMt", function () {
                    return this._tempMt = new M();
                }]), e.__init$ = function () {
                    i = function () {
                        function t() {
                            this.skin = null, this.transform = null, this.resultTransform = null, this.width = NaN,
                                this.height = NaN, this.alpha = 1;
                        }
                        s(t, "");
                        return t.prototype.recover = function () {
                            this.skin = null, this.width = 0, this.height = 0, this.alpha = 1, this.transform && (this.transform.destroy(),
                                this.transform = null), this.resultTransform && (this.resultTransform.destroy(),
                                    this.resultTransform = null), Y.recover("GraphicNode", this);
                        }, t.create = function () {
                            return Y.getItemByClass("GraphicNode", t);
                        }, t;
                    }();
                }, e;
        }(wt));
    i.__init([ot, h, Lt, P, O, K, I, ct]);
}(window, document, Laya), function (t, e, i) {
    i.un, i.uns, i.static;
    var n = i.class;
    i.getset, i.__newvec;
    new (function () {
        function t() { }
        return n(t, "LayaMain"), t;
    }())();
}(window, document, Laya), "function" == typeof define && define.amd && define("laya.core", ["require", "exports"], function (t, e) {
    "use strict";
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    for (var i in Laya) {
        var n = Laya[i];
        n && n.__isclass && (e[i] = n);
    }
}), function (t, e, i) {
    i.un, i.uns;
    var n = i.static, s = i.class, a = i.getset, r = (i.__newvec, laya.utils.Browser), o = (laya.events.Event,
        laya.events.EventDispatcher), h = laya.resource.HTMLImage, l = laya.utils.Handler, c = laya.display.Input, u = laya.net.Loader, d = laya.net.LocalStorage, _ = (laya.maths.Matrix,
            laya.renders.Render), f = laya.utils.RunDriver, p = (laya.media.Sound, laya.media.SoundChannel), g = laya.media.SoundManager, v = laya.net.URL, m = laya.utils.Utils, y = function () {
                function e() { }
                return s(e, "laya.wx.mini.MiniAdpter"), e.getJson = function (t) {
                    return JSON.parse(t);
                }, e.init = function (n, s) {
                    if (void 0 === n && (n = !1), void 0 === s && (s = !1), !e._inited && (e._inited = !0,
                        (e.window = t).hasOwnProperty("wx") && !(e.window.navigator.userAgent.indexOf("MiniGame") < 0))) {
                        e.isZiYu = s, e.isPosMsgYu = n, e.EnvConfig = {};
                        try {
                            laya.webgl.resource.WebGLCanvas.premulAlpha = !0;
                        } catch (t) { }
                        if (e.isZiYu || (w.setNativeFileDir("/layaairGame"), w.existDir(w.fileNativeDir, l.create(e, e.onMkdirCallBack))),
                            "ios 10.1.1" === (e.systemInfo = e.window.wx.getSystemInfoSync()).system.toLowerCase()) try {
                                laya.webgl.resource.WebGLCharImage.canUseCanvas = !1;
                            } catch (t) { }
                        e.window.focus = function () { }, i._getUrlPath = function () { }, i.getUrlPath = function () { },
                            e.window.logtime = function (t) { }, e.window.alertTimeLog = function (t) { }, e.window.resetShareInfo = function () { },
                            e.window.CanvasRenderingContext2D = function () { }, e.window.CanvasRenderingContext2D.prototype = e.window.wx.createCanvas().getContext("2d").__proto__,
                            e.window.document.body.appendChild = function () { }, e.EnvConfig.pixelRatioInt = 0,
                            f.getPixelRatio = e.pixelRatio, e._preCreateElement = r.createElement, r.createElement = e.createElement,
                            f.createShaderCondition = e.createShaderCondition, m.parseXMLFromString = e.parseXMLFromString,
                            c._createInputElement = b._createInputElement, e.EnvConfig.load = u.prototype.load,
                            u.prototype.load = C.prototype.load, u.prototype._loadImage = x.prototype._loadImage,
                            d._baseClass = L, L.__init__(), e.onReciveData();
                    }
                }, e.onReciveData = function () {
                    laya.wx.mini.MiniAdpter.isZiYu && e.window.wx.onMessage(function (t) {
                        "opendatacontext" == t.isLoad ? t.url && (w.ziyuFileData[t.url] = t.atlasdata, w.ziyuFileTextureData[t.imgReadyUrl] = t.imgNativeUrl) : "openJsondatacontext" == t.isLoad ? t.url && (w.ziyuFileData[t.url] = t.atlasdata) : "openJsondatacontextPic" == t.isLoad && (w.ziyuFileTextureData[t.imgReadyUrl] = t.imgNativeUrl);
                    });
                }, e.measureText = function (t) {
                    var i = e._measureText(t);
                    return i || (i = {
                        width: 16
                    }, console.warn("-------微信获取文字宽度失败----等待修复---------")), i;
                }, e.getUrlEncode = function (t, e) {
                    return "arraybuffer" == e ? "" : "utf8";
                }, e.downLoadFile = function (t, e, i, n) {
                    void 0 === e && (e = ""), void 0 === n && (n = "utf8");
                    w.getFileInfo(t) ? null != i && i.runWith([0]) : w.downLoadFile(t, e, i, n);
                }, e.remove = function (t, e) {
                    w.deleteFile("", t, e, "", 0);
                }, e.removeAll = function () {
                    w.deleteAll();
                }, e.hasNativeFile = function (t) {
                    return w.isLocalNativeFile(t);
                }, e.getFileInfo = function (t) {
                    return w.getFileInfo(t);
                }, e.getFileList = function () {
                    return w.filesListObj;
                }, e.exitMiniProgram = function () {
                    e.window.wx.exitMiniProgram();
                }, e.onMkdirCallBack = function (t, e) {
                    t || (w.filesListObj = JSON.parse(e.data), w.fakeObj = w.filesListObj);
                }, e.pixelRatio = function () {
                    if (!e.EnvConfig.pixelRatioInt) try {
                        return e.EnvConfig.pixelRatioInt = e.systemInfo.pixelRatio, e.systemInfo.pixelRatio;
                    } catch (t) { }
                    return e.EnvConfig.pixelRatioInt;
                }, e.createElement = function (t) {
                    if ("canvas" == t) {
                        var i;
                        return 1 == e.idx ? e.isZiYu ? (i = e.window.sharedCanvas).style = {} : i = e.window.canvas : i = e.window.wx.createCanvas(),
                            e.idx++, i;
                    }
                    if ("textarea" == t || "input" == t) return e.onCreateInput(t);
                    if ("div" == t) {
                        var n = e._preCreateElement(t);
                        return n.contains = function (t) {
                            return null;
                        }, n.removeChild = function (t) { }, n;
                    }
                    return e._preCreateElement(t);
                }, e.onCreateInput = function (t) {
                    var i = e._preCreateElement(t);
                    return i.focus = b.wxinputFocus, i.blur = b.wxinputblur, i.style = {}, i.value = 0,
                        i.parentElement = {}, i.placeholder = {}, i.type = {}, i.setColor = function (t) { },
                        i.setType = function (t) { }, i.setFontFace = function (t) { }, i.addEventListener = function (t) { },
                        i.contains = function (t) {
                            return null;
                        }, i.removeChild = function (t) { }, i;
                }, e.createShaderCondition = function (t) {
                    var e = this;
                    return function () {
                        return e[t.replace("this.", "")];
                    };
                }, e.sendAtlasToOpenDataContext = function (t) {
                    if (!laya.wx.mini.MiniAdpter.isZiYu) {
                        var i = u.getRes(v.formatURL(t));
                        if (!i) throw "传递的url没有获取到对应的图集数据信息，请确保图集已经过！";
                        i.meta.image.split(",");
                        if (i.meta && i.meta.image) for (var n = i.meta.image.split(","), s = t.indexOf("/") >= 0 ? "/" : "\\", a = t.lastIndexOf(s), r = a >= 0 ? t.substr(0, a + 1) : "", o = 0, h = n.length; o < h; o++) n[o] = r + n[o]; else n = [t.replace(".json", ".png")];
                        for (o = 0; o < n.length; o++) {
                            var l = n[o];
                            e.postInfoToContext(t, l, i);
                        }
                    }
                }, e.postInfoToContext = function (t, i, n) {
                    var s = {
                        frames: n.frames,
                        meta: n.meta
                    }, a = i, r = w.getFileInfo(v.formatURL(i));
                    if (r) var o = r.md5, h = w.getFileNativePath(o); else h = a;
                    if (!h) throw "获取图集的磁盘url路径不存在！";
                    e.window.wx.postMessage({
                        url: t,
                        atlasdata: s,
                        imgNativeUrl: h,
                        imgReadyUrl: a,
                        isLoad: "opendatacontext"
                    });
                }, e.sendSinglePicToOpenDataContext = function (t) {
                    var i = v.formatURL(t), n = w.getFileInfo(i);
                    if (n) {
                        var s = n.md5, a = w.getFileNativePath(s);
                        t = i;
                    } else a = t;
                    if (!a) throw "获取图集的磁盘url路径不存在！";
                    e.window.wx.postMessage({
                        url: t,
                        imgNativeUrl: a,
                        imgReadyUrl: t,
                        isLoad: "openJsondatacontextPic"
                    });
                }, e.sendJsonDataToDataContext = function (t) {
                    if (!laya.wx.mini.MiniAdpter.isZiYu) {
                        var i = u.getRes(t);
                        if (!i) throw "传递的url没有获取到对应的图集数据信息，请确保图集已经过！";
                        e.window.wx.postMessage({
                            url: t,
                            atlasdata: i,
                            isLoad: "openJsondatacontext"
                        });
                    }
                }, e.EnvConfig = null, e.window = null, e._preCreateElement = null, e._inited = !1,
                    e.systemInfo = null, e.isZiYu = !1, e.isPosMsgYu = !1, e.autoCacheFile = !0, e.minClearSize = 5242880,
                    e.subNativeFiles = null, e.subNativeheads = [], e.subMaps = [], e.AutoCacheDownFile = !1,
                    e._measureText = null, e.parseXMLFromString = function (e) {
                        var i;
                        e = e.replace(/>\s+</g, "><");
                        try {
                            i = new t.Parser.DOMParser().parseFromString(e, "text/xml");
                        } catch (t) {
                            throw "需要引入xml解析库文件";
                        }
                        return i;
                    }, e.idx = 1, n(e, ["nativefiles", function () {
                        return this.nativefiles = ["layaNativeDir", "wxlocal"];
                    }]), e;
            }(), w = function () {
                function t() { }
                return s(t, "laya.wx.mini.MiniFileMgr"), t.isLocalNativeFile = function (t) {
                    for (var e = 0, i = y.nativefiles.length; e < i; e++) if (-1 != t.indexOf(y.nativefiles[e])) return !0;
                    return !1;
                }, t.getFileInfo = function (e) {
                    var i = t.fakeObj[e];
                    return null == i ? null : i;
                }, t.read = function (e, i, n, s, a, r) {
                    void 0 === i && (i = "utf8"), void 0 === s && (s = ""), void 0 === a && (a = !1),
                        void 0 === r && (r = "");
                    var o;
                    o = "" == s || -1 == s.indexOf("http://") && -1 == s.indexOf("https://") ? e : t.getFileNativePath(e),
                        t.fs.readFile({
                            filePath: o,
                            encoding: i,
                            success: function (t) {
                                null != n && n.runWith([0, t]);
                            },
                            fail: function (e) {
                                e && "" != s ? t.downFiles(s, i, n, s, a, r) : null != n && n.runWith([1]);
                            }
                        });
                }, t.downFiles = function (e, i, n, s, a, r, o) {
                    void 0 === i && (i = "ascii"), void 0 === s && (s = ""), void 0 === a && (a = !1),
                        void 0 === r && (r = ""), void 0 === o && (o = !0);
                    t.wxdown({
                        url: e,
                        success: function (h) {
                            200 === h.statusCode ? t.readFile(h.tempFilePath, i, n, s, a, r, o) : 403 === h.statusCode ? null != n && n.runWith([0, e]) : null != n && n.runWith([1, h]);
                        },
                        fail: function (t) {
                            null != n && n.runWith([1, t]);
                        }
                    }).onProgressUpdate(function (t) {
                        null != n && n.runWith([2, t.progress]);
                    });
                }, t.readFile = function (e, i, n, s, a, r, o) {
                    void 0 === i && (i = "utf8"), void 0 === s && (s = ""), void 0 === a && (a = !1),
                        void 0 === r && (r = ""), void 0 === o && (o = !0), t.fs.readFile({
                            filePath: e,
                            encoding: i,
                            success: function (r) {
                                (-1 != e.indexOf("http://") || -1 != e.indexOf("https://")) && (y.autoCacheFile || a) ? (null != n && n.runWith([0, r]),
                                    t.copyFile(e, s, null, i, o)) : null != n && n.runWith([0, r]);
                            },
                            fail: function (t) {
                                t && null != n && n.runWith([1, t]);
                            }
                        });
                }, t.downOtherFiles = function (e, i, n, s, a) {
                    void 0 === n && (n = ""), void 0 === s && (s = !1), void 0 === a && (a = !0), t.wxdown({
                        url: e,
                        success: function (e) {
                            200 === e.statusCode ? (y.autoCacheFile || s) && -1 == n.indexOf("wx.qlogo.cn") && -1 == n.indexOf(".php") ? (null != i && i.runWith([0, e.tempFilePath]),
                                t.copyFile(e.tempFilePath, n, null, "", a)) : null != i && i.runWith([0, e.tempFilePath]) : null != i && i.runWith([1, e]);
                        },
                        fail: function (t) {
                            null != i && i.runWith([1, t]);
                        }
                    });
                }, t.downLoadFile = function (e, n, s, a) {
                    void 0 === n && (n = ""), void 0 === a && (a = "ascii"), y.window.navigator.userAgent.indexOf("MiniGame") < 0 ? i.loader.load(e, s) : "image" == n || "sound" == n ? t.downOtherFiles(e, s, e, !0, !1) : t.downFiles(e, a, s, e, !0, n, !1);
                }, t.copyFile = function (e, i, n, s, a) {
                    void 0 === s && (s = ""), void 0 === a && (a = !0);
                    var o = e.split("/"), h = o[o.length - 1], l = t.getFileInfo(i), c = t.getFileNativePath(h);
                    t.fakeObj[i] = {
                        md5: h,
                        readyUrl: i,
                        size: 0,
                        times: r.now(),
                        encoding: s
                    };
                    var u = t.getCacheUseSize();
                    l ? l.readyUrl != i ? t.fs.getFileInfo({
                        filePath: e,
                        success: function (r) {
                            a && u + 4194304 + r.size >= 52428800 && (r.size > y.minClearSize && (y.minClearSize = r.size),
                                t.onClearCacheRes()), t.deleteFile(e, i, n, s, r.size);
                        },
                        fail: function (t) {
                            null != n && n.runWith([1, t]);
                        }
                    }) : null != n && n.runWith([0]) : t.fs.getFileInfo({
                        filePath: e,
                        success: function (r) {
                            a && u + 4194304 + r.size >= 52428800 && (r.size > y.minClearSize && (y.minClearSize = r.size),
                                t.onClearCacheRes()), t.fs.copyFile({
                                    srcPath: e,
                                    destPath: c,
                                    success: function (e) {
                                        t.onSaveFile(i, h, !0, s, n, r.size);
                                    },
                                    fail: function (t) {
                                        null != n && n.runWith([1, t]);
                                    }
                                });
                        },
                        fail: function (t) {
                            null != n && n.runWith([1, t]);
                        }
                    });
                }, t.onClearCacheRes = function () {
                    var e = y.minClearSize, i = [];
                    for (var n in t.filesListObj) i.push(t.filesListObj[n]);
                    t.sortOn(i, "times", 16);
                    for (var s = 0, a = 1, r = i.length; a < r; a++) {
                        var o = i[a];
                        if (s >= e) break;
                        s += o.size, t.deleteFile("", o.readyUrl);
                    }
                }, t.sortOn = function (t, e, i) {
                    return void 0 === i && (i = 0), 16 == i ? t.sort(function (t, i) {
                        return t[e] - i[e];
                    }) : 18 == i ? t.sort(function (t, i) {
                        return i[e] - t[e];
                    }) : t.sort(function (t, i) {
                        return t[e] - i[e];
                    });
                }, t.getFileNativePath = function (t) {
                    return laya.wx.mini.MiniFileMgr.fileNativeDir + "/" + t;
                }, t.deleteFile = function (e, i, n, s, a) {
                    void 0 === i && (i = ""), void 0 === s && (s = ""), void 0 === a && (a = 0);
                    var r = t.getFileInfo(i), o = t.getFileNativePath(r.md5);
                    t.fs.unlink({
                        filePath: o,
                        success: function (r) {
                            var o = "" != e;
                            if ("" != e) {
                                var h = t.getFileNativePath(e);
                                t.fs.copyFile({
                                    srcPath: e,
                                    destPath: h,
                                    success: function (a) {
                                        t.onSaveFile(i, e, o, s, n, a.size);
                                    },
                                    fail: function (t) {
                                        null != n && n.runWith([1, t]);
                                    }
                                });
                            } else t.onSaveFile(i, e, o, s, n, a);
                        },
                        fail: function (t) { }
                    });
                }, t.deleteAll = function () {
                    var e = [];
                    for (var i in t.filesListObj) e.push(t.filesListObj[i]);
                    for (var n = 1, s = e.length; n < s; n++) {
                        var a = e[n];
                        t.deleteFile("", a.readyUrl);
                    }
                    laya.wx.mini.MiniFileMgr.filesListObj && laya.wx.mini.MiniFileMgr.filesListObj.fileUsedSize && (laya.wx.mini.MiniFileMgr.filesListObj.fileUsedSize = 0),
                        laya.wx.mini.MiniFileMgr.writeFilesList("", JSON.stringify({}), !1);
                }, t.onSaveFile = function (e, i, n, s, a, o) {
                    void 0 === n && (n = !0), void 0 === s && (s = ""), void 0 === o && (o = 0);
                    var h = e;
                    if (null == t.filesListObj.fileUsedSize && (t.filesListObj.fileUsedSize = 0), n) {
                        t.getFileNativePath(i);
                        t.filesListObj[h] = {
                            md5: i,
                            readyUrl: e,
                            size: o,
                            times: r.now(),
                            encoding: s
                        }, t.filesListObj.fileUsedSize = parseInt(t.filesListObj.fileUsedSize) + o, t.writeFilesList(h, JSON.stringify(t.filesListObj), !0),
                            null != a && a.runWith([0]);
                    } else if (t.filesListObj[h]) {
                        var l = parseInt(t.filesListObj[h].size);
                        t.filesListObj.fileUsedSize = parseInt(t.filesListObj.fileUsedSize) - l, delete t.filesListObj[h],
                            t.writeFilesList(h, JSON.stringify(t.filesListObj), !1), null != a && a.runWith([0]);
                    }
                }, t.writeFilesList = function (e, i, n) {
                    var s = t.fileNativeDir + "/" + t.fileListName;
                    t.fs.writeFile({
                        filePath: s,
                        encoding: "utf8",
                        data: i,
                        success: function (t) { },
                        fail: function (t) { }
                    }), !y.isZiYu && y.isPosMsgYu && y.window.wx.postMessage && y.window.wx.postMessage({
                        url: e,
                        data: t.filesListObj[e],
                        isLoad: "filenative",
                        isAdd: n
                    });
                }, t.getCacheUseSize = function () {
                    return t.filesListObj && t.filesListObj.fileUsedSize ? t.filesListObj.fileUsedSize : 0;
                }, t.existDir = function (e, i) {
                    t.fs.mkdir({
                        dirPath: e,
                        success: function (t) {
                            null != i && i.runWith([0, {
                                data: JSON.stringify({})
                            }]);
                        },
                        fail: function (e) {
                            -1 != e.errMsg.indexOf("file already exists") ? t.readSync(t.fileListName, "utf8", i) : null != i && i.runWith([1, e]);
                        }
                    });
                }, t.readSync = function (e, i, n, s) {
                    void 0 === i && (i = "utf8"), void 0 === s && (s = "");
                    var a, r = t.getFileNativePath(e);
                    try {
                        a = t.fs.readFileSync(r, i), null != n && n.runWith([0, {
                            data: a
                        }]);
                    } catch (t) {
                        null != n && n.runWith([1]);
                    }
                }, t.setNativeFileDir = function (e) {
                    t.fileNativeDir = y.window.wx.env.USER_DATA_PATH + e;
                }, t.filesListObj = {}, t.fakeObj = {}, t.fileNativeDir = null, t.fileListName = "layaairfiles.txt",
                    t.ziyuFileData = {}, t.ziyuFileTextureData = {}, t.loadPath = "", t.DESCENDING = 2,
                    t.NUMERIC = 16, n(t, ["fs", function () {
                        return this.fs = y.window.wx.getFileSystemManager();
                    }, "wxdown", function () {
                        return this.wxdown = y.window.wx.downloadFile;
                    }]), t;
            }(), x = function () {
                function t() { }
                s(t, "laya.wx.mini.MiniImage");
                return t.prototype._loadImage = function (e) {
                    if (y.isZiYu) t.onCreateImage(e, this, !0); else {
                        var i = !1;
                        if (w.isLocalNativeFile(e)) {
                            if (-1 != e.indexOf("http://") || -1 != e.indexOf("https://")) if ("" != w.loadPath) e = e.split(w.loadPath)[1]; else {
                                var n = "" != v.rootPath ? v.rootPath : v.basePath, s = e;
                                "" != n && (e = e.split(n)[1]), e || (e = s);
                            }
                            if (y.subNativeFiles && 0 == y.subNativeheads.length) for (var a in y.subNativeFiles) {
                                var r = y.subNativeFiles[a];
                                y.subNativeheads = y.subNativeheads.concat(r);
                                for (var o = 0; o < r.length; o++) y.subMaps[r[o]] = a + "/" + r[o];
                            }
                            if (y.subNativeFiles && -1 != e.indexOf("/")) {
                                var h = e.split("/")[0] + "/";
                                if (h && -1 != y.subNativeheads.indexOf(h)) {
                                    var c = y.subMaps[h];
                                    e = e.replace(h, c);
                                }
                            }
                        } else i = !0, e = v.formatURL(e);
                        w.getFileInfo(e) ? t.onCreateImage(e, this, !i) : -1 != e.indexOf("http://") || -1 != e.indexOf("https://") ? y.isZiYu ? t.onCreateImage(e, this, !0) : w.downOtherFiles(e, new l(t, t.onDownImgCallBack, [e, this]), e) : t.onCreateImage(e, this, !0);
                    }
                }, t.onDownImgCallBack = function (e, i, n, s) {
                    void 0 === s && (s = ""), n ? i.onError(null) : t.onCreateImage(e, i, !1, s);
                }, t.onCreateImage = function (t, e, i, n) {
                    function s() {
                        c.onload = null, c.onerror = null, delete e.imgCache[t];
                    }
                    void 0 === i && (i = !1), void 0 === n && (n = "");
                    var a;
                    if (y.autoCacheFile) if (i) if (y.isZiYu) {
                        var o = v.formatURL(t);
                        a = w.ziyuFileTextureData[o] ? w.ziyuFileTextureData[o] : t;
                    } else a = t; else if ("" != n) a = n; else {
                        var l = w.getFileInfo(t).md5;
                        a = w.getFileNativePath(l);
                    } else a = i ? t : n;
                    null == e.imgCache && (e.imgCache = {});
                    var c, u = function () {
                        s(), e.onLoaded(c);
                    }, d = function () {
                        s(), delete w.filesListObj[t], delete w.fakeObj[t], e.event("error", "Load image failed");
                    };
                    "nativeimage" == e._type ? ((c = new r.window.Image()).crossOrigin = "", c.onload = u,
                        c.onerror = d, c.src = a, e.imgCache[t] = c) : new h.create(a, {
                            onload: u,
                            onerror: d,
                            onCreate: function (i) {
                                c = i, e.imgCache[t] = i;
                            }
                        });
                }, t;
            }(), b = function () {
                function e() { }
                return s(e, "laya.wx.mini.MiniInput"), e._createInputElement = function () {
                    c._initInput(c.area = r.createElement("textarea")), c._initInput(c.input = r.createElement("input")),
                        c.inputContainer = r.createElement("div"), c.inputContainer.style.position = "absolute",
                        c.inputContainer.style.zIndex = 1e5, r.container.appendChild(c.inputContainer),
                        c.inputContainer.setPos = function (t, e) {
                            c.inputContainer.style.left = t + "px", c.inputContainer.style.top = e + "px";
                        }, i.stage.on("resize", null, e._onStageResize), wx.onWindowResize && wx.onWindowResize(function (e) {
                            t.dispatchEvent && t.dispatchEvent("resize");
                        }), g._soundClass = M, g._musicClass = M;
                    var n = y.systemInfo.model, s = y.systemInfo.system;
                    -1 != n.indexOf("iPhone") && (r.onIPhone = !0, r.onIOS = !0, r.onIPad = !0, r.onAndroid = !1),
                        -1 == s.indexOf("Android") && -1 == s.indexOf("Adr") || (r.onAndroid = !0, r.onIPhone = !1,
                            r.onIOS = !1, r.onIPad = !1);
                }, e._onStageResize = function () {
                    i.stage._canvasTransform.identity().scale(r.width / _.canvas.width / f.getPixelRatio(), r.height / _.canvas.height / f.getPixelRatio());
                }, e.wxinputFocus = function (t) {
                    var e = c.inputElement.target;
                    e && !e.editable || (y.window.wx.offKeyboardConfirm(), y.window.wx.offKeyboardInput(),
                        y.window.wx.showKeyboard({
                            defaultValue: e.text,
                            maxLength: e.maxChars,
                            multiple: e.multiline,
                            confirmHold: !0,
                            confirmType: "done",
                            success: function (t) { },
                            fail: function (t) { }
                        }), y.window.wx.onKeyboardConfirm(function (t) {
                            var i = t ? t.value : "";
                            e.text = i, e.event("input"), laya.wx.mini.MiniInput.inputEnter();
                        }), y.window.wx.onKeyboardInput(function (t) {
                            var i = t ? t.value : "";
                            e.multiline || -1 == i.indexOf("\n") ? (e.text = i, e.event("input")) : laya.wx.mini.MiniInput.inputEnter();
                        }));
                }, e.inputEnter = function () {
                    c.inputElement.target.focus = !1;
                }, e.wxinputblur = function () {
                    e.hideKeyboard();
                }, e.hideKeyboard = function () {
                    y.window.wx.offKeyboardConfirm(), y.window.wx.offKeyboardInput(), y.window.wx.hideKeyboard({
                        success: function (t) {
                            console.log("隐藏键盘");
                        },
                        fail: function (t) {
                            console.log("隐藏键盘出错:" + (t ? t.errMsg : ""));
                        }
                    });
                }, e;
            }(), L = function () {
                function t() { }
                return s(t, "laya.wx.mini.MiniLocalStorage"), t.__init__ = function () {
                    t.items = t;
                }, t.setItem = function (t, e) {
                    try {
                        wx.setStorageSync(t, e);
                    } catch (i) {
                        wx.setStorage({
                            key: t,
                            data: e
                        });
                    }
                }, t.getItem = function (t) {
                    return wx.getStorageSync(t);
                }, t.setJSON = function (e, i) {
                    t.setItem(e, i);
                }, t.getJSON = function (e) {
                    return t.getItem(e);
                }, t.removeItem = function (t) {
                    wx.removeStorageSync(t);
                }, t.clear = function () {
                    wx.clearStorageSync();
                }, t.getStorageInfoSync = function () {
                    try {
                        var t = wx.getStorageInfoSync();
                        return console.log(t.keys), console.log(t.currentSize), console.log(t.limitSize),
                            t;
                    } catch (t) { }
                    return null;
                }, t.support = !0, t.items = null, t;
            }(), C = (function () {
                function t() { }
                s(t, "laya.wx.mini.MiniLocation"), t.__init__ = function () {
                    y.window.navigator.geolocation.getCurrentPosition = t.getCurrentPosition, y.window.navigator.geolocation.watchPosition = t.watchPosition,
                        y.window.navigator.geolocation.clearWatch = t.clearWatch;
                }, t.getCurrentPosition = function (t, e, i) {
                    var n;
                    (n = {}).success = function (e) {
                        null != t && t(e);
                    }, n.fail = e, y.window.wx.getLocation(n);
                }, t.watchPosition = function (e, n, s) {
                    t._curID++;
                    var a;
                    return a = {}, a.success = e, a.error = n, t._watchDic[t._curID] = a, i.timer.loop(1e3, null, t._myLoop),
                        t._curID;
                }, t.clearWatch = function (e) {
                    delete t._watchDic[e], t._hasWatch() || i.timer.clear(null, t._myLoop);
                }, t._hasWatch = function () {
                    var e;
                    for (e in t._watchDic) if (t._watchDic[e]) return !0;
                    return !1;
                }, t._myLoop = function () {
                    t.getCurrentPosition(t._mySuccess, t._myError);
                }, t._mySuccess = function (e) {
                    var i = {};
                    i.coords = e, i.timestamp = r.now();
                    var n;
                    for (n in t._watchDic) t._watchDic[n].success && t._watchDic[n].success(i);
                }, t._myError = function (e) {
                    var i;
                    for (i in t._watchDic) t._watchDic[i].error && t._watchDic[i].error(e);
                }, t._watchDic = {}, t._curID = 0;
            }(), function () {
                function t(t, e) {
                    this.videoend = !1, this.videourl = "", this.videoElement = null, this.onPlayFunc = null,
                        this.onEndedFunC = null, this._duration = NaN, this.position = NaN, void 0 === t && (t = 320),
                        void 0 === e && (e = 240), this.videoElement = y.window.wx.createVideo({
                            width: t,
                            height: e,
                            autoplay: !0
                        });
                }
                s(t, "laya.wx.mini.MiniVideo");
                var e = t.prototype;
                e.on = function (t, e, i) {
                    "loadedmetadata" == t ? (this.onPlayFunc = i.bind(e), this.videoElement.onPlay = this.onPlayFunction.bind(this)) : "ended" == t && (this.onEndedFunC = i.bind(e),
                        this.videoElement.onEnded = this.onEndedFunction.bind(this)), this.videoElement.onTimeUpdate = this.onTimeUpdateFunc.bind(this);
                }, e.onTimeUpdateFunc = function (t) {
                    this.position = t.position, this._duration = t.duration;
                }, e.onPlayFunction = function () {
                    this.videoElement && (this.videoElement.readyState = 200), console.log("=====视频加载完成========"),
                        null != this.onPlayFunc && this.onPlayFunc();
                }, e.onEndedFunction = function () {
                    this.videoElement && (this.videoend = !0, console.log("=====视频播放完毕========"), null != this.onEndedFunC && this.onEndedFunC());
                }, e.off = function (t, e, i) {
                    "loadedmetadata" == t ? (this.onPlayFunc = i.bind(e), this.videoElement.offPlay = this.onPlayFunction.bind(this)) : "ended" == t && (this.onEndedFunC = i.bind(e),
                        this.videoElement.offEnded = this.onEndedFunction.bind(this));
                }, e.load = function (t) {
                    this.videoElement && (this.videoElement.src = t);
                }, e.play = function () {
                    this.videoElement && (this.videoend = !1, this.videoElement.play());
                }, e.pause = function () {
                    this.videoElement && (this.videoend = !0, this.videoElement.pause());
                }, e.size = function (t, e) {
                    this.videoElement && (this.videoElement.width = t, this.videoElement.height = e);
                }, e.destroy = function () {
                    this.videoElement && this.videoElement.destroy(), this.videoElement = null, this.onEndedFunC = null,
                        this.onPlayFunc = null, this.videoend = !1, this.videourl = null;
                }, e.reload = function () {
                    this.videoElement && (this.videoElement.src = this.videourl);
                }, a(0, e, "duration", function () {
                    return this._duration;
                }), a(0, e, "paused", function () {
                    return !!this.videoElement && this.videoElement.paused;
                }), a(0, e, "loop", function () {
                    return !!this.videoElement && this.videoElement.loop;
                }, function (t) {
                    this.videoElement && (this.videoElement.loop = t);
                }), a(0, e, "currentTime", function () {
                    return this.videoElement ? this.videoElement.initialTime : 0;
                }, function (t) {
                    this.videoElement && (this.videoElement.initialTime = t);
                }), a(0, e, "ended", function () {
                    return this.videoend;
                }), a(0, e, "muted", function () {
                    return !!this.videoElement && this.videoElement.muted;
                }, function (t) {
                    this.videoElement && (this.videoElement.muted = t);
                }), a(0, e, "videoWidth", function () {
                    return this.videoElement ? this.videoElement.width : 0;
                }), a(0, e, "videoHeight", function () {
                    return this.videoElement ? this.videoElement.height : 0;
                }), a(0, e, "playbackRate", function () {
                    return this.videoElement ? this.videoElement.playbackRate : 0;
                }, function (t) {
                    this.videoElement && (this.videoElement.playbackRate = t);
                }), a(0, e, "x", function () {
                    return this.videoElement ? this.videoElement.x : 0;
                }, function (t) {
                    this.videoElement && (this.videoElement.x = t);
                }), a(0, e, "y", function () {
                    return this.videoElement ? this.videoElement.y : 0;
                }, function (t) {
                    this.videoElement && (this.videoElement.y = t);
                }), a(0, e, "currentSrc", function () {
                    return this.videoElement.src;
                }), t.__init__ = function () {
                    laya.device.media.Video = t;
                };
            }(), function (t) {
                function e() {
                    e.__super.call(this);
                }
                s(e, "laya.wx.mini.MiniAccelerator", t);
                var i = e.prototype;
                i.on = function (i, n, s, a) {
                    return t.prototype.on.call(this, i, n, s, a), e.startListen(this.onDeviceOrientationChange),
                        this;
                }, i.off = function (i, n, s, a) {
                    return void 0 === a && (a = !1), this.hasListener(i) || e.stopListen(), t.prototype.off.call(this, i, n, s, a);
                }, e.__init__ = function () {
                    try {
                        var t;
                        if (!(t = laya.device.motion.Accelerator)) return;
                        t.prototype.on = e.prototype.on, t.prototype.off = e.prototype.off;
                    } catch (t) { }
                }, e.startListen = function (t) {
                    if (e._callBack = t, !e._isListening) {
                        e._isListening = !0;
                        try {
                            y.window.wx.onAccelerometerChange(laya.wx.mini.MiniAccelerator.onAccelerometerChange);
                        } catch (t) { }
                    }
                }, e.stopListen = function () {
                    e._isListening = !1;
                    try {
                        y.window.wx.stopAccelerometer({});
                    } catch (t) { }
                }, e.onAccelerometerChange = function (t) {
                    var i;
                    (i = {}).acceleration = t, i.accelerationIncludingGravity = t, i.rotationRate = {},
                        null != e._callBack && e._callBack(i);
                }, e._isListening = !1, e._callBack = null;
            }(o), function (t) {
                function e() {
                    e.__super.call(this);
                }
                s(e, "laya.wx.mini.MiniLoader", o);
                var i = e.prototype;
                return i.load = function (t, i, n, s, a) {
                    void 0 === n && (n = !0), void 0 === a && (a = !1);
                    if (this._url = t, 0 === t.indexOf("data:image") ? this._type = i = "image" : this._type = i || (i = this.getTypeFromUrl(t)),
                        this._cache = n, this._data = null, !a && u.loadedMap[v.formatURL(t)]) return this._data = u.loadedMap[v.formatURL(t)],
                            this.event("progress", 1), void this.event("complete", this._data);
                    if (null != u.parserMap[i]) return this._customParse = !0, void (u.parserMap[i] instanceof laya.utils.Handler ? u.parserMap[i].runWith(this) : u.parserMap[i].call(null, this));
                    var r = y.getUrlEncode(t, i), o = m.getFileExtension(t);
                    if (-1 != e._fileTypeArr.indexOf(o) || "image" == i) y.EnvConfig.load.call(this, t, i, n, s, a); else {
                        if (y.isZiYu && !w.ziyuFileData[t] && (t = v.formatURL(t)), y.isZiYu && w.ziyuFileData[t]) {
                            var h = w.ziyuFileData[t];
                            return void this.onLoaded(h);
                        }
                        if (w.getFileInfo(v.formatURL(t))) {
                            var c = w.getFileInfo(v.formatURL(t));
                            c.encoding = null == c.encoding ? "utf8" : c.encoding;
                            var d = w.getFileNativePath(c.md5);
                            w.readFile(d, c.encoding, new l(e, e.onReadNativeCallBack, [r, t, i, n, s, a, this]), v.formatURL(t));
                        } else {
                            if (w.isLocalNativeFile(t)) {
                                if (y.subNativeFiles && 0 == y.subNativeheads.length) for (var _ in y.subNativeFiles) {
                                    var f = y.subNativeFiles[_];
                                    y.subNativeheads = y.subNativeheads.concat(f);
                                    for (var p = 0; p < f.length; p++) y.subMaps[f[p]] = _ + "/" + f[p];
                                }
                                if (y.subNativeFiles && -1 != t.indexOf("/")) {
                                    var g = t.split("/")[0] + "/";
                                    if (g && -1 != y.subNativeheads.indexOf(g)) {
                                        var x = y.subMaps[g];
                                        t = t.replace(g, x);
                                    }
                                }
                                return void ("sound" == i ? this._loadSound(t) : w.read(t, r, new l(e, e.onReadNativeCallBack, [r, t, i, n, s, a, this])));
                            }
                            var b = t;
                            -1 != v.formatURL(t).indexOf(y.window.wx.env.USER_DATA_PATH) || -1 == t.indexOf("http://") && -1 == t.indexOf("https://") || y.AutoCacheDownFile ? (c = w.getFileInfo(t)) ? (c.encoding = null == c.encoding ? "utf8" : c.encoding,
                                w.readFile(c.url, r, new l(e, e.onReadNativeCallBack, [r, t, i, n, s, a, this]), t)) : "image" == this.type || "htmlimage" == this.type ? y.EnvConfig.load.call(this, t, i, n, s, a) : (t = v.formatURL(t),
                                    "image" != i && (-1 == t.indexOf("http://") && -1 == t.indexOf("https://") || w.isLocalNativeFile(t)) ? w.readFile(t, r, new l(e, e.onReadNativeCallBack, [r, t, i, n, s, a, this]), t) : w.downFiles(t, r, new l(e, e.onReadNativeCallBack, [r, t, i, n, s, a, this]), t, !0)) : "sound" == i ? this._loadSound(t) : y.EnvConfig.load.call(this, b, i, n, s, a);
                        }
                    }
                }, i._loadSound = function (t) {
                    var i;
                    if (w.isLocalNativeFile(t)) {
                        var n = "" != v.rootPath ? v.rootPath : v.basePath, s = t;
                        "" == n || -1 == t.indexOf("http://") && -1 == t.indexOf("https://") || (i = t.split(n)[1]),
                            i || (i = s), laya.wx.mini.MiniLoader.onDownLoadCallBack(t, this, 0);
                    } else {
                        var a = v.formatURL(t);
                        !w.isLocalNativeFile(t) && -1 == a.indexOf("http://") && -1 == a.indexOf("https://") || -1 != a.indexOf(y.window.wx.env.USER_DATA_PATH) ? laya.wx.mini.MiniLoader.onDownLoadCallBack(t, this, 0) : w.downOtherFiles(encodeURI(a), l.create(e, laya.wx.mini.MiniLoader.onDownLoadCallBack, [a, this]), a);
                    }
                }, e.onDownLoadCallBack = function (t, e, i, n) {
                    if (i) e.event("error", "Load sound failed"); else {
                        var s;
                        if (y.autoCacheFile) if (n) s = n; else if (w.isLocalNativeFile(t)) {
                            var a = "" != v.rootPath ? v.rootPath : v.basePath, r = t;
                            "" == a || -1 == t.indexOf("http://") && -1 == t.indexOf("https://") || (s = t.split(a)[1]),
                                s || (s = r);
                        } else {
                            var o = w.getFileInfo(t);
                            if (o && o.md5) {
                                var h = o.md5;
                                s = w.getFileNativePath(h);
                            } else s = t;
                        }
                        t = s;
                        var l = new g._soundClass();
                        l.load(encodeURI(t)), e.onLoaded(l);
                    }
                }, e.onReadNativeCallBack = function (t, e, i, n, s, a, r, o, h) {
                    if (void 0 === n && (n = !0), void 0 === a && (a = !1), void 0 === o && (o = 0),
                        o) 1 == o && (console.log("-----------本地加载失败，尝试外网加载----url:" + e), y.EnvConfig.load.call(r, e, i, n, s, a)); else {
                        var l;
                        l = "json" == i || "atlas" == i ? y.getJson(h.data) : "xml" == i ? m.parseXMLFromString(h.data) : h.data,
                            !y.isZiYu && y.isPosMsgYu && "arraybuffer" != i && y.window.wx && y.window.wx.postMessage({
                                url: e,
                                data: l,
                                isLoad: "filedata"
                            }), r.onLoaded(l);
                    }
                }, n(e, ["_fileTypeArr", function () {
                    return this._fileTypeArr = ["png", "jpg", "bmp", "jpeg", "gif"];
                }]), e;
            }()), M = function (t) {
                function e() {
                    this._sound = null, this.url = null, this.loaded = !1, this.readyUrl = null, e.__super.call(this);
                }
                s(e, "laya.wx.mini.MiniSound", o);
                var i = e.prototype;
                return i.load = function (t) {
                    if (w.isLocalNativeFile(t)) {
                        if (-1 != t.indexOf("http://") || -1 != t.indexOf("https://")) if ("" != w.loadPath) t = t.split(w.loadPath)[1]; else {
                            var i = "" != v.rootPath ? v.rootPath : v.basePath;
                            "" != i && (t = t.split(i)[1]);
                        }
                    } else t = v.formatURL(t);
                    if (this.url = t, this.readyUrl = t, e._audioCache[this.readyUrl]) this.event("complete"); else if (y.autoCacheFile && w.getFileInfo(t)) this.onDownLoadCallBack(t, 0); else if (y.autoCacheFile) if (w.isLocalNativeFile(t)) {
                        var n = t;
                        if ("" != (i = "" != v.rootPath ? v.rootPath : v.basePath) && (t = t.split(i)[1]),
                            t || (t = n), y.subNativeFiles && 0 == y.subNativeheads.length) for (var s in y.subNativeFiles) {
                                var a = y.subNativeFiles[s];
                                y.subNativeheads = y.subNativeheads.concat(a);
                                for (var r = 0; r < a.length; r++) y.subMaps[a[r]] = s + "/" + a[r];
                            }
                        if (y.subNativeFiles && -1 != t.indexOf("/")) {
                            var o = t.split("/")[0] + "/";
                            if (o && -1 != y.subNativeheads.indexOf(o)) {
                                var h = y.subMaps[o];
                                t = t.replace(o, h);
                            }
                        }
                        this.onDownLoadCallBack(t, 0);
                    } else w.downOtherFiles(encodeURI(t), l.create(this, this.onDownLoadCallBack, [t]), t); else this.onDownLoadCallBack(t, 0);
                }, i.onDownLoadCallBack = function (t, i) {
                    if (i) this.event("error"); else {
                        var n;
                        if (y.autoCacheFile) {
                            if (w.isLocalNativeFile(t)) {
                                var s = "" != v.rootPath ? v.rootPath : v.basePath, a = t;
                                "" == s || -1 == t.indexOf("http://") && -1 == t.indexOf("https://") || (n = t.split(s)[1]),
                                    n || (n = a);
                            } else {
                                var r = w.getFileInfo(t);
                                if (r && r.md5) {
                                    var o = r.md5;
                                    n = w.getFileNativePath(o);
                                } else n = encodeURI(t);
                            }
                            this._sound = e._createSound(), this._sound.src = this.url = n;
                        } else this._sound = e._createSound(), this._sound.src = encodeURI(t);
                        this._sound.onCanplay(e.bindToThis(this.onCanPlay, this)), this._sound.onError(e.bindToThis(this.onError, this));
                    }
                }, i.onError = function (t) {
                    this.event("error"), this._sound.offError(null);
                }, i.onCanPlay = function () {
                    this.loaded = !0, this.event("complete"), this._sound.offCanplay(null);
                }, i.play = function (t, i) {
                    void 0 === t && (t = 0), void 0 === i && (i = 0);
                    var n;
                    if (this.url == g._tMusic ? (e._musicAudio || (e._musicAudio = e._createSound()),
                        n = e._musicAudio) : n = e._audioCache[this.readyUrl] ? e._audioCache[this.readyUrl]._sound : e._createSound(),
                        y.autoCacheFile && w.getFileInfo(this.url)) {
                        var s = w.getFileInfo(this.url).md5;
                        n.src = this.url = w.getFileNativePath(s);
                    } else n.src = encodeURI(this.url);
                    var a = new T(n, this);
                    return a.url = this.url, a.loops = i, a.loop = 0 === i, a.startTime = t, a.play(),
                        g.addChannel(a), a;
                }, i.dispose = function () {
                    var t = e._audioCache[this.readyUrl];
                    t && (t.src = "", t._sound && (t._sound.destroy(), t._sound = null, t = null), delete e._audioCache[this.readyUrl]),
                        this._sound && (this._sound.destroy(), this._sound = null), this.url = this.readyUrl = null;
                }, a(0, i, "duration", function () {
                    return this._sound.duration;
                }), e._createSound = function () {
                    return e._id++, y.window.wx.createInnerAudioContext();
                }, e.bindToThis = function (t, e) {
                    return t.bind(e);
                }, e._musicAudio = null, e._id = 0, e._audioCache = {}, e;
            }(), T = function (t) {
                function e(t, i) {
                    this._audio = null, this._onEnd = null, this._miniSound = null, e.__super.call(this),
                        this._audio = t, this._miniSound = i, this._onEnd = e.bindToThis(this.__onEnd, this),
                        t.onEnded(this._onEnd);
                }
                s(e, "laya.wx.mini.MiniSoundChannel", p);
                var n = e.prototype;
                return n.__onEnd = function () {
                    if (1 == this.loops) return this.completeHandler && (i.timer.once(10, this, this.__runComplete, [this.completeHandler], !1),
                        this.completeHandler = null), this.stop(), void this.event("complete");
                    this.loops > 0 && this.loops--, this.startTime = 0, this.play();
                }, n.play = function () {
                    this.isStopped = !1, g.addChannel(this), this._audio.play();
                }, n.stop = function () {
                    this.isStopped = !0, g.removeChannel(this), this.completeHandler = null, this._audio && (this._audio.stop(),
                        this._audio.offEnded(null), this._audio.destroy(), this._audio = null, this._miniSound = null,
                        this._onEnd = null);
                }, n.pause = function () {
                    this.isStopped = !0, this._audio.pause();
                }, n.resume = function () {
                    this._audio && (this.isStopped = !1, g.addChannel(this), this._audio.play());
                }, a(0, n, "startTime", null, function (t) {
                    this._audio && (this._audio.startTime = t);
                }), a(0, n, "autoplay", function () {
                    return this._audio.autoplay;
                }, function (t) {
                    this._audio.autoplay = t;
                }), a(0, n, "position", function () {
                    return this._audio ? this._audio.currentTime : 0;
                }), a(0, n, "duration", function () {
                    return this._audio ? this._audio.duration : 0;
                }), a(0, n, "loop", function () {
                    return this._audio.loop;
                }, function (t) {
                    this._audio.loop = t;
                }), a(0, n, "volume", function () {
                    return this._audio ? this._audio.volume : 1;
                }, function (t) {
                    this._audio && (this._audio.volume = t);
                }), e.bindToThis = function (t, e) {
                    return t.bind(e);
                }, e;
            }();
}(window, document, Laya), "function" == typeof define && define.amd && define("laya.core", ["require", "exports"], function (t, e) {
    "use strict";
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    for (var i in Laya) {
        var n = Laya[i];
        n && n.__isclass && (e[i] = n);
    }
}), function (t, e, i) {
    i.un, i.uns;
    var n = i.static, s = i.class, a = i.getset, r = i.__newvec, o = laya.maths.Arith, h = laya.maths.Bezier, l = laya.resource.Bitmap, c = laya.utils.Browser, u = laya.utils.Byte, d = laya.utils.Color, _ = (laya.filters.ColorFilter,
        i.Config), f = laya.resource.Context, p = (laya.events.Event, laya.filters.Filter), g = laya.display.Graphics, v = laya.resource.HTMLCanvas, m = (laya.utils.HTMLChar,
            laya.resource.HTMLImage), y = laya.resource.HTMLSubImage, w = (laya.utils.Handler,
                laya.net.Loader, laya.maths.Matrix), x = laya.maths.Point, b = laya.maths.Rectangle, L = laya.renders.Render, C = (laya.renders.RenderContext,
                    laya.renders.RenderSprite), M = laya.resource.Resource, T = laya.resource.ResourceManager, S = laya.utils.RunDriver, A = laya.display.Sprite, I = laya.display.Stage, E = laya.utils.Stat, R = laya.utils.StringKey, P = (laya.display.css.Style,
                        laya.system.System), D = laya.display.Text, k = laya.resource.Texture, F = (laya.display.css.TransformInfo,
                            laya.net.URL, laya.utils.Utils), B = laya.utils.VectorGraphManager;
    laya.utils.WordText;
    i.interface("laya.webgl.shapes.IShape"), i.interface("laya.webgl.submit.ISubmit"),
        i.interface("laya.webgl.text.ICharSegment"), i.interface("laya.webgl.canvas.save.ISaveData"),
        i.interface("laya.webgl.resource.IMergeAtlasBitmap"), i.interface("laya.filters.IFilterActionGL", "laya.filters.IFilterAction");
    var O = function () {
        function t() { }
        s(t, "laya.filters.webgl.FilterActionGL");
        var e = t.prototype;
        return i.imps(e, {
            "laya.filters.IFilterActionGL": !0
        }), e.setValue = function (t) { }, e.setValueMix = function (t) { }, e.apply3d = function (t, e, i, n, s) {
            return null;
        }, e.apply = function (t) {
            return null;
        }, a(0, e, "typeMix", function () {
            return 0;
        }), t;
    }(), N = function () {
        function t() { }
        return s(t, "laya.webgl.shader.ShaderValue"), t;
    }(), G = function () {
        function t(t, e, n) {
            this._atlasID = 0, this._width = 0, this._height = 0, this._texCount = 0, this._rowInfo = null,
                this._cells = null, this._failSize = new i(), void 0 === t && (t = 0), void 0 === e && (e = 0),
                void 0 === n && (n = 0), this._cells = null, this._rowInfo = null, this._init(t, e),
                this._atlasID = n;
        }
        var e, i;
        s(t, "laya.webgl.atlas.AtlasGrid");
        var n = t.prototype;
        return n.getAltasID = function () {
            return this._atlasID;
        }, n.setAltasID = function (t) {
            t >= 0 && (this._atlasID = t);
        }, n.addTex = function (t, e, i) {
            var n = this._get(e, i);
            return 0 == n.ret ? n : (this._fill(n.x, n.y, e, i, t), this._texCount++, n);
        }, n._release = function () {
            null != this._cells && (this._cells.length = 0, this._cells = null), this._rowInfo && (this._rowInfo.length = 0,
                this._rowInfo = null);
        }, n._init = function (t, i) {
            if (this._width = t, this._height = i, this._release(), 0 == this._width) return !1;
            this._cells = new Uint8Array(this._width * this._height * 3), this._rowInfo = r(this._height);
            for (var n = 0; n < this._height; n++) this._rowInfo[n] = new e();
            return this._clear(), !0;
        }, n._get = function (t, e) {
            var i = new z();
            if (t >= this._failSize.width && e >= this._failSize.height) return i;
            for (var n = -1, s = -1, a = this._width, r = this._height, o = this._cells, h = 0; h < r; h++) if (!(this._rowInfo[h].spaceCount < t)) for (var l = 0; l < a;) {
                var c = 3 * (h * a + l);
                if (0 != o[c] || o[c + 1] < t || o[c + 2] < e) l += o[c + 1]; else {
                    n = l, s = h;
                    for (var u = 0; u < t; u++) if (o[3 * u + c + 2] < e) {
                        n = -1;
                        break;
                    }
                    if (!(n < 0)) return i.ret = !0, i.x = n, i.y = s, i;
                    l += o[c + 1];
                }
            }
            return i;
        }, n._fill = function (t, e, i, n, s) {
            var a = this._width, r = this._height;
            this._check(t + i <= a && e + n <= r);
            for (var o = e; o < n + e; ++o) {
                this._check(this._rowInfo[o].spaceCount >= i), this._rowInfo[o].spaceCount -= i;
                for (var h = 0; h < i; h++) {
                    var l = 3 * (t + o * a + h);
                    this._check(0 == this._cells[l]), this._cells[l] = s, this._cells[l + 1] = i, this._cells[l + 2] = n;
                }
            }
            if (t > 0) for (o = 0; o < n; ++o) {
                var c = 0;
                for (h = t - 1; h >= 0 && 0 == this._cells[3 * ((e + o) * a + h)]; --h, ++c);
                for (h = c; h > 0; --h) this._cells[3 * ((e + o) * a + t - h) + 1] = h, this._check(h > 0);
            }
            if (e > 0) for (h = t; h < t + i; ++h) {
                for (c = 0, o = e - 1; o >= 0 && 0 == this._cells[3 * (h + o * a)]; --o, c++);
                for (o = c; o > 0; --o) this._cells[3 * (h + (e - o) * a) + 2] = o, this._check(o > 0);
            }
        }, n._check = function (t) {
            0 == t && console.log("xtexMerger 错误啦");
        }, n._clear = function () {
            this._texCount = 0;
            for (var t = 0; t < this._height; t++) this._rowInfo[t].spaceCount = this._width;
            for (var e = 0; e < this._height; e++) for (var i = 0; i < this._width; i++) {
                var n = 3 * (e * this._width + i);
                this._cells[n] = 0, this._cells[n + 1] = this._width - i, this._cells[n + 2] = this._width - e;
            }
            this._failSize.width = this._width + 1, this._failSize.height = this._height + 1;
        }, t.__init$ = function () {
            e = function () {
                function t() {
                    this.spaceCount = 0;
                }
                return s(t, ""), t;
            }(), i = function () {
                function t() {
                    this.width = 0, this.height = 0;
                }
                return s(t, ""), t;
            }();
        }, t;
    }(), H = function () {
        function t(t, e, i, n) {
            this._currentAtlasCount = 0, this._maxAtlaserCount = 0, this._width = 0, this._height = 0,
                this._gridSize = 0, this._gridNumX = 0, this._gridNumY = 0, this._init = !1, this._curAtlasIndex = 0,
                this._setAtlasParam = !1, this._atlaserArray = null, this._needGC = !1, this._setAtlasParam = !0,
                this._width = t, this._height = e, this._gridSize = i, this._maxAtlaserCount = n,
                this._gridNumX = t / i, this._gridNumY = e / i, this._curAtlasIndex = 0, this._atlaserArray = [];
        }
        s(t, "laya.webgl.atlas.AtlasResourceManager");
        var e = t.prototype;
        return e.setAtlasParam = function (e, i, n, s) {
            if (1 == this._setAtlasParam) return t._sid_ = 0, this._width = e, this._height = i,
                this._gridSize = n, this._maxAtlaserCount = s, this._gridNumX = e / n, this._gridNumY = i / n,
                this._curAtlasIndex = 0, this.freeAll(), !0;
            throw console.log("设置大图合集参数错误，只能在开始页面设置各种参数"), -1;
        }, e.pushData = function (e) {
            var i = e.bitmap, n = -1, s = null, a = 0, r = 0, o = 0;
            for (a = 0, r = this._atlaserArray.length; a < r && (o = (this._curAtlasIndex + a) % r,
                s = this._atlaserArray[o], -1 == (n = s.findBitmapIsExist(i))); a++);
            if (-1 != n) {
                var h = s.InAtlasWebGLImagesOffsetValue[n];
                return p = h[0], g = h[1], s.addToAtlas(e, p, g), !0;
            }
            this._setAtlasParam = !1;
            for (var l = Math.ceil((e.bitmap.width + 2) / this._gridSize), c = Math.ceil((e.bitmap.height + 2) / this._gridSize), u = !1, d = 0; d < 2; d++) {
                var _ = this._maxAtlaserCount;
                for (a = 0; a < _; a++) {
                    o = (this._curAtlasIndex + a) % _, this._atlaserArray.length - 1 >= o || this._atlaserArray.push(new St(this._gridNumX, this._gridNumY, this._width, this._height, t._sid_++));
                    var f = this._atlaserArray[o], p = 0, g = 0, v = f.addTex(1, l, c);
                    if (v.ret) {
                        p = v.x * this._gridSize + 1, g = v.y * this._gridSize + 1, i.lock = !0, f.addToAtlasTexture(i, p, g),
                            f.addToAtlas(e, p, g), u = !0, this._curAtlasIndex = o;
                        break;
                    }
                }
                if (u) break;
                this._atlaserArray.push(new St(this._gridNumX, this._gridNumY, this._width, this._height, t._sid_++)),
                    this._needGC = !0, this.garbageCollection(), this._curAtlasIndex = this._atlaserArray.length - 1;
            }
            return u || console.log(">>>AtlasManager pushData error"), u;
        }, e.addToAtlas = function (t) {
            laya.webgl.atlas.AtlasResourceManager.instance.pushData(t);
        }, e.garbageCollection = function () {
            if (!0 === this._needGC) {
                for (var t = this._atlaserArray.length - this._maxAtlaserCount, e = 0; e < t; e++) this._atlaserArray[e].dispose(),
                    console.log("AtlasResourceManager:Dispose the inner Atlas。");
                console.log(">>>>altas garbageCollection =" + t), this._atlaserArray.splice(0, t),
                    this._needGC = !1;
            }
            return !0;
        }, e.freeAll = function () {
            for (var t = 0, e = this._atlaserArray.length; t < e; t++) this._atlaserArray[t].dispose();
            this._atlaserArray.length = 0, this._curAtlasIndex = 0;
        }, e.getAtlaserCount = function () {
            return this._atlaserArray.length;
        }, e.getAtlaserByIndex = function (t) {
            return this._atlaserArray[t];
        }, a(1, t, "instance", function () {
            return t._Instance || (t._Instance = new t(laya.webgl.atlas.AtlasResourceManager.atlasTextureWidth, laya.webgl.atlas.AtlasResourceManager.atlasTextureHeight, 16, laya.webgl.atlas.AtlasResourceManager.maxTextureCount)),
                t._Instance;
        }), a(1, t, "enabled", function () {
            return _.atlasEnable;
        }), a(1, t, "atlasLimitWidth", function () {
            return t._atlasLimitWidth;
        }, function (e) {
            t._atlasLimitWidth = e;
        }), a(1, t, "atlasLimitHeight", function () {
            return t._atlasLimitHeight;
        }, function (e) {
            t._atlasLimitHeight = e;
        }), t._enable = function () {
            _.atlasEnable = !0;
        }, t._disable = function () {
            _.atlasEnable = !1;
        }, t.__init__ = function () {
            t.atlasTextureWidth = 2048, t.atlasTextureHeight = 2048, t.maxTextureCount = 6,
                t.atlasLimitWidth = 512, t.atlasLimitHeight = 512;
        }, t._atlasLimitWidth = 0, t._atlasLimitHeight = 0, t.gridSize = 16, t.atlasTextureWidth = 0,
            t.atlasTextureHeight = 0, t.maxTextureCount = 0, t._atlasRestore = 0, t.BOARDER_TYPE_NO = 0,
            t.BOARDER_TYPE_RIGHT = 1, t.BOARDER_TYPE_LEFT = 2, t.BOARDER_TYPE_BOTTOM = 4, t.BOARDER_TYPE_TOP = 8,
            t.BOARDER_TYPE_ALL = 15, t._sid_ = 0, t._Instance = null, t;
    }(), z = function () {
        function t() {
            this.x = 0, this.y = 0, this.ret = !1, this.ret = !1, this.x = 0, this.y = 0;
        }
        return s(t, "laya.webgl.atlas.MergeFillInfo"), t;
    }(), V = function () {
        function t() { }
        return s(t, "laya.webgl.canvas.BlendMode"), t._init_ = function (e) {
            t.fns = [t.BlendNormal, t.BlendAdd, t.BlendMultiply, t.BlendScreen, t.BlendOverlay, t.BlendLight, t.BlendMask, t.BlendDestinationOut],
                t.targetFns = [t.BlendNormalTarget, t.BlendAddTarget, t.BlendMultiplyTarget, t.BlendScreenTarget, t.BlendOverlayTarget, t.BlendLightTarget, t.BlendMask, t.BlendDestinationOut];
        }, t.BlendNormal = function (t) {
            t.blendFunc(1, 771);
        }, t.BlendAdd = function (t) {
            t.blendFunc(1, 772);
        }, t.BlendMultiply = function (t) {
            t.blendFunc(774, 771);
        }, t.BlendScreen = function (t) {
            t.blendFunc(1, 1);
        }, t.BlendOverlay = function (t) {
            t.blendFunc(1, 769);
        }, t.BlendLight = function (t) {
            t.blendFunc(1, 1);
        }, t.BlendNormalTarget = function (t) {
            t.blendFunc(1, 771);
        }, t.BlendAddTarget = function (t) {
            t.blendFunc(1, 772);
        }, t.BlendMultiplyTarget = function (t) {
            t.blendFunc(774, 771);
        }, t.BlendScreenTarget = function (t) {
            t.blendFunc(1, 1);
        }, t.BlendOverlayTarget = function (t) {
            t.blendFunc(1, 769);
        }, t.BlendLightTarget = function (t) {
            t.blendFunc(1, 1);
        }, t.BlendMask = function (t) {
            t.blendFunc(0, 770);
        }, t.BlendDestinationOut = function (t) {
            t.blendFunc(0, 0);
        }, t.activeBlendFunction = null, t.NAMES = ["normal", "add", "multiply", "screen", "overlay", "light", "mask", "destination-out"],
            t.TOINT = {
                normal: 0,
                add: 1,
                multiply: 2,
                screen: 3,
                lighter: 1,
                overlay: 4,
                light: 5,
                mask: 6,
                "destination-out": 7
            }, t.NORMAL = "normal", t.ADD = "add", t.MULTIPLY = "multiply", t.SCREEN = "screen",
            t.LIGHT = "light", t.OVERLAY = "overlay", t.DESTINATIONOUT = "destination-out",
            t.fns = [], t.targetFns = [], t;
    }(), U = function () {
        function t(t) {
            this._color = d.create("black"), this.setValue(t);
        }
        s(t, "laya.webgl.canvas.DrawStyle");
        var e = t.prototype;
        return e.setValue = function (t) {
            if (t) {
                if ("string" == typeof t) return void (this._color = d.create(t));
                if (t instanceof laya.utils.Color) return void (this._color = t);
            }
        }, e.reset = function () {
            this._color = d.create("black");
        }, e.equal = function (t) {
            return "string" == typeof t ? this._color.strColor === t : t instanceof laya.utils.Color && this._color.numColor === t.numColor;
        }, e.toColorStr = function () {
            return this._color.strColor;
        }, t.create = function (e) {
            if (e) {
                var i;
                if ("string" == typeof e ? i = d.create(e) : e instanceof laya.utils.Color && (i = e),
                    i) return i._drawStyle || (i._drawStyle = new t(e));
            }
            return laya.webgl.canvas.DrawStyle.DEFAULT;
        }, n(t, ["DEFAULT", function () {
            return this.DEFAULT = new t("#000000");
        }]), t;
    }(), W = function () {
        function t() {
            this._x = 0, this._y = 0, this.dirty = !1, this.offset = 0, this.count = 0, this.geoStart = 0,
                this.tempArray = [], this.closePath = !1, this.geomatrys = [];
            wt.mainContext;
            this.ib = Zt.create(35048), this.vb = Jt.create(5);
        }
        s(t, "laya.webgl.canvas.Path");
        var e = t.prototype;
        return e.addPoint = function (t, e) {
            this.tempArray.push(t, e);
        }, e.getEndPointX = function () {
            return this.tempArray[this.tempArray.length - 2];
        }, e.getEndPointY = function () {
            return this.tempArray[this.tempArray.length - 1];
        }, e.polygon = function (t, e, i, n, s, a) {
            var r;
            return this.geomatrys.push(this._curGeomatry = r = new Rt(t, e, i, n, s, a)), n || (r.fill = !1),
                void 0 == a && (r.borderWidth = 0), r;
        }, e.setGeomtry = function (t) {
            this.geomatrys.push(this._curGeomatry = t);
        }, e.drawLine = function (t, e, i, n, s) {
            var a;
            return this.closePath ? this.geomatrys.push(this._curGeomatry = a = new Et(t, e, i, n, s)) : this.geomatrys.push(this._curGeomatry = a = new It(t, e, i, n, s)),
                a.fill = !1, a;
        }, e.update = function () {
            var t = this.ib._byteLength, e = this.geomatrys.length;
            this.offset = t;
            for (var i = this.geoStart; i < e; i++) this.geomatrys[i].getData(this.ib, this.vb, this.vb._byteLength / 20);
            this.geoStart = e, this.count = (this.ib._byteLength - t) / pt.BYTES_PIDX;
        }, e.reset = function () {
            this.vb.clear(), this.ib.clear(), this.offset = this.count = this.geoStart = 0,
                this.geomatrys.length = 0;
        }, e.recover = function () {
            this._curGeomatry = null, this.vb.destory(), this.vb = null, this.ib.destory(),
                this.ib = null;
        }, t;
    }(), Y = function () {
        function t() { }
        s(t, "laya.webgl.canvas.save.SaveBase");
        var e = t.prototype;
        return i.imps(e, {
            "laya.webgl.canvas.save.ISaveData": !0
        }), e.isSaveMark = function () {
            return !1;
        }, e.restore = function (e) {
            this._dataObj[this._valueName] = this._value, t._cache[t._cache._length++] = this,
                this._newSubmit && (e._curSubmit = at.RENDERBASE, e._renderKey = 0);
        }, t._createArray = function () {
            var t = [];
            return t._length = 0, t;
        }, t._init = function () {
            var e = t._namemap = {};
            return e[1] = "ALPHA", e[2] = "fillStyle", e[8] = "font", e[256] = "lineWidth",
                e[512] = "strokeStyle", e[8192] = "_mergeID", e[1024] = e[2048] = e[4096] = [],
                e[16384] = "textBaseline", e[32768] = "textAlign", e[65536] = "_nBlendType", e[1048576] = "shader",
                e[2097152] = "filters", e;
        }, t.save = function (e, i, n, s) {
            if ((e._saveMark._saveuse & i) !== i) {
                e._saveMark._saveuse |= i;
                var a = t._cache, r = a._length > 0 ? a[--a._length] : new t();
                r._value = n[r._valueName = t._namemap[i]], r._dataObj = n, r._newSubmit = s;
                var o = e._save;
                o[o._length++] = r;
            }
        }, t._cache = laya.webgl.canvas.save.SaveBase._createArray(), t._namemap = t._init(),
            t;
    }(), X = function () {
        function t() {
            this._clipRect = new b();
        }
        s(t, "laya.webgl.canvas.save.SaveClipRect");
        var e = t.prototype;
        return i.imps(e, {
            "laya.webgl.canvas.save.ISaveData": !0
        }), e.isSaveMark = function () {
            return !1;
        }, e.restore = function (e) {
            e._clipRect = this._clipSaveRect, t._cache[t._cache._length++] = this, this._submitScissor.submitLength = e._submits._length - this._submitScissor.submitIndex,
                e._curSubmit = at.RENDERBASE, e._renderKey = 0;
        }, t.save = function (e, i) {
            if (131072 != (131072 & e._saveMark._saveuse)) {
                e._saveMark._saveuse |= 131072;
                var n = t._cache, s = n._length > 0 ? n[--n._length] : new t();
                s._clipSaveRect = e._clipRect, e._clipRect = s._clipRect.copyFrom(e._clipRect),
                    s._submitScissor = i;
                var a = e._save;
                a[a._length++] = s;
            }
        }, n(t, ["_cache", function () {
            return this._cache = Y._createArray();
        }]), t;
    }(), K = function () {
        function t() {
            this._contextX = 0, this._contextY = 0, this._clipRect = new b(), this._rect = new b(),
                this._matrix = new w();
        }
        s(t, "laya.webgl.canvas.save.SaveClipRectStencil");
        var e = t.prototype;
        return i.imps(e, {
            "laya.webgl.canvas.save.ISaveData": !0
        }), e.isSaveMark = function () {
            return !1;
        }, e.restore = function (e) {
            ct.restore(e, this._rect, this._saveMatrix, this._contextX, this._contextY), e._clipRect = this._clipSaveRect,
                e._curMat = this._saveMatrix, e._x = this._contextX, e._y = this._contextY, t._cache[t._cache._length++] = this,
                e._curSubmit = at.RENDERBASE;
        }, t.save = function (e, i, n, s, a, r, o, h, l, c) {
            if (262144 != (262144 & e._saveMark._saveuse)) {
                e._saveMark._saveuse |= 262144;
                var u = t._cache, d = u._length > 0 ? u[--u._length] : new t();
                d._clipSaveRect = e._clipRect, d._clipRect.setTo(o, h, l, c), e._clipRect = d._clipRect,
                    d._rect.x = n, d._rect.y = s, d._rect.width = a, d._rect.height = r, d._contextX = e._x,
                    d._contextY = e._y, d._saveMatrix = e._curMat, e._curMat.copyTo(d._matrix), e._curMat = d._matrix,
                    d._submitStencil = i;
                var _ = e._save;
                _[_._length++] = d;
            }
        }, n(t, ["_cache", function () {
            return this._cache = Y._createArray();
        }]), t;
    }(), j = function () {
        function t() {
            this._saveuse = 0;
        }
        s(t, "laya.webgl.canvas.save.SaveMark");
        var e = t.prototype;
        return i.imps(e, {
            "laya.webgl.canvas.save.ISaveData": !0
        }), e.isSaveMark = function () {
            return !0;
        }, e.restore = function (e) {
            e._saveMark = this._preSaveMark, t._no[t._no._length++] = this;
        }, t.Create = function (e) {
            var i = t._no, n = i._length > 0 ? i[--i._length] : new t();
            return n._saveuse = 0, n._preSaveMark = e._saveMark, e._saveMark = n, n;
        }, n(t, ["_no", function () {
            return this._no = Y._createArray();
        }]), t;
    }(), q = function () {
        function t() {
            this._matrix = new w();
        }
        s(t, "laya.webgl.canvas.save.SaveTransform");
        var e = t.prototype;
        return i.imps(e, {
            "laya.webgl.canvas.save.ISaveData": !0
        }), e.isSaveMark = function () {
            return !1;
        }, e.restore = function (e) {
            e._curMat = this._savematrix, t._no[t._no._length++] = this;
        }, t.save = function (e) {
            var i = e._saveMark;
            if (2048 != (2048 & i._saveuse)) {
                i._saveuse |= 2048;
                var n = t._no, s = n._length > 0 ? n[--n._length] : new t();
                s._savematrix = e._curMat, e._curMat = e._curMat.copyTo(s._matrix);
                var a = e._save;
                a[a._length++] = s;
            }
        }, n(t, ["_no", function () {
            return this._no = Y._createArray();
        }]), t;
    }(), $ = function () {
        function t() { }
        s(t, "laya.webgl.canvas.save.SaveTranslate");
        var e = t.prototype;
        return i.imps(e, {
            "laya.webgl.canvas.save.ISaveData": !0
        }), e.isSaveMark = function () {
            return !1;
        }, e.restore = function (e) {
            e._curMat;
            e._x = this._x, e._y = this._y, t._no[t._no._length++] = this;
        }, t.save = function (e) {
            var i = t._no, n = i._length > 0 ? i[--i._length] : new t();
            n._x = e._x, n._y = e._y;
            var s = e._save;
            s[s._length++] = n;
        }, n(t, ["_no", function () {
            return this._no = Y._createArray();
        }]), t;
    }(), Q = function () {
        function t() {
            this.target = null, this.repaint = !1, this._width = NaN, this._height = NaN, this._sp = null,
                this._clipRect = new b();
        }
        s(t, "laya.webgl.resource.RenderTargetMAX");
        var e = t.prototype;
        return e.setSP = function (t) {
            this._sp = t;
        }, e.size = function (t, e) {
            var n = this;
            this._width !== t || this._height !== e ? (this.repaint = !0, this._width = t, this._height = e,
                this.target ? this.target.size(t, e) : this.target = Bt.create(t, e), this.target.hasListener("recovered") || this.target.on("recovered", this, function (t) {
                    i.timer.callLater(n._sp, n._sp.repaint);
                })) : this.target.size(t, e);
        }, e._flushToTarget = function (t, e) {
            if (!e._destroy) {
                var i = mt.worldScissorTest, n = mt.worldClipRect;
                mt.worldClipRect = this._clipRect, this._clipRect.x = this._clipRect.y = 0, this._clipRect.width = this._width,
                    this._clipRect.height = this._height, mt.worldScissorTest = !1, wt.mainContext.disable(3089);
                var s = mt.worldAlpha, a = mt.worldMatrix4, r = mt.worldMatrix, o = mt.worldFilters, h = mt.worldShaderDefines;
                if (mt.worldMatrix = w.EMPTY, mt.restoreTempArray(), mt.worldMatrix4 = mt.TEMPMAT4_ARRAY,
                    mt.worldAlpha = 1, mt.worldFilters = null, mt.worldShaderDefines = null, Ft.activeShader = null,
                    e.start(), _.showCanvasMark ? e.clear(0, 1, 0, .3) : e.clear(0, 0, 0, 0), t.flush(),
                    e.end(), Ft.activeShader = null, mt.worldAlpha = s, mt.worldMatrix4 = a, mt.worldMatrix = r,
                    mt.worldFilters = o, mt.worldShaderDefines = h, mt.worldScissorTest = i, i) {
                    var l = mt.height - n.y - n.height;
                    wt.mainContext.scissor(n.x, l, n.width, n.height), wt.mainContext.enable(3089);
                }
                mt.worldClipRect = n;
            }
        }, e.flush = function (t) {
            this.repaint && (this._flushToTarget(t, this.target), this.repaint = !1);
        }, e.drawTo = function (t, e, i, n, s) {
            t.drawTexture(this.target.getTexture(), e, i, n, s, 0, 0);
        }, e.destroy = function () {
            this.target && (this.target.destroy(), this.target = null, this._sp = null);
        }, t;
    }(), Z = function () {
        function t() {
            this.ALPHA = 1, this.shaderType = 0, this.defines = new At();
        }
        s(t, "laya.webgl.shader.d2.Shader2D");
        return t.prototype.destroy = function () {
            this.defines = null, this.filters = null, this.glTexture = null, this.strokeStyle = null,
                this.fillStyle = null;
        }, t.__init__ = function () {
            jt.addInclude("parts/ColorFilter_ps_uniform.glsl", "uniform vec4 colorAlpha;\nuniform mat4 colorMat;"),
                jt.addInclude("parts/ColorFilter_ps_logic.glsl", "mat4 alphaMat =colorMat;\n\nalphaMat[0][3] *= gl_FragColor.a;\nalphaMat[1][3] *= gl_FragColor.a;\nalphaMat[2][3] *= gl_FragColor.a;\n\ngl_FragColor = gl_FragColor * alphaMat;\ngl_FragColor += colorAlpha/255.0*gl_FragColor.a;\n"),
                jt.addInclude("parts/GlowFilter_ps_uniform.glsl", "uniform vec4 u_color;\nuniform float u_strength;\nuniform float u_blurX;\nuniform float u_blurY;\nuniform float u_offsetX;\nuniform float u_offsetY;\nuniform float u_textW;\nuniform float u_textH;"),
                jt.addInclude("parts/GlowFilter_ps_logic.glsl", "const float c_IterationTime = 10.0;\nfloat floatIterationTotalTime = c_IterationTime * c_IterationTime;\nvec4 vec4Color = vec4(0.0,0.0,0.0,0.0);\nvec2 vec2FilterDir = vec2(-(u_offsetX)/u_textW,-(u_offsetY)/u_textH);\nvec2 vec2FilterOff = vec2(u_blurX/u_textW/c_IterationTime * 2.0,u_blurY/u_textH/c_IterationTime * 2.0);\nfloat maxNum = u_blurX * u_blurY;\nvec2 vec2Off = vec2(0.0,0.0);\nfloat floatOff = c_IterationTime/2.0;\nfor(float i = 0.0;i<=c_IterationTime; ++i){\n\tfor(float j = 0.0;j<=c_IterationTime; ++j){\n\t\tvec2Off = vec2(vec2FilterOff.x * (i - floatOff),vec2FilterOff.y * (j - floatOff));\n\t\tvec4Color += texture2D(texture, v_texcoord + vec2FilterDir + vec2Off)/floatIterationTotalTime;\n\t}\n}\ngl_FragColor = vec4(u_color.rgb,vec4Color.a * u_strength);\ngl_FragColor.rgb *= gl_FragColor.a;"),
                jt.addInclude("parts/BlurFilter_ps_logic.glsl", "gl_FragColor =   blur();\ngl_FragColor.w*=alpha;"),
                jt.addInclude("parts/BlurFilter_ps_uniform.glsl", "uniform vec4 strength_sig2_2sig2_gauss1;\nuniform vec2 blurInfo;\n\n#define PI 3.141593\n\n//float sigma=strength/3.0;//3σ以外影响很小。即当σ=1的时候，半径为3\n//float sig2 = sigma*sigma;\n//float _2sig2 = 2.0*sig2;\n//return 1.0/(2*PI*sig2)*exp(-(x*x+y*y)/_2sig2)\n//float gauss1 = 1.0/(2.0*PI*sig2);\n\nfloat getGaussian(float x, float y){\n    return strength_sig2_2sig2_gauss1.w*exp(-(x*x+y*y)/strength_sig2_2sig2_gauss1.z);\n}\n\nvec4 blur(){\n    const float blurw = 9.0;\n    vec4 vec4Color = vec4(0.0,0.0,0.0,0.0);\n    vec2 halfsz=vec2(blurw,blurw)/2.0/blurInfo;    \n    vec2 startpos=v_texcoord-halfsz;\n    vec2 ctexcoord = startpos;\n    vec2 step = 1.0/blurInfo;  //每个像素      \n    \n    for(float y = 0.0;y<=blurw; ++y){\n        ctexcoord.x=startpos.x;\n        for(float x = 0.0;x<=blurw; ++x){\n            //TODO 纹理坐标的固定偏移应该在vs中处理\n            vec4Color += texture2D(texture, ctexcoord)*getGaussian(x-blurw/2.0,y-blurw/2.0);\n            ctexcoord.x+=step.x;\n        }\n        ctexcoord.y+=step.y;\n    }\n    return vec4Color;\n}"),
                jt.addInclude("parts/ColorAdd_ps_uniform.glsl", "uniform vec4 colorAdd;\n"), jt.addInclude("parts/ColorAdd_ps_logic.glsl", "gl_FragColor = vec4(colorAdd.rgb,colorAdd.a*gl_FragColor.a);\ngl_FragColor.xyz *= colorAdd.a;");
            var t, e;
            t = "attribute vec4 position;\nattribute vec2 texcoord;\nuniform vec2 size;\n\n#ifdef WORLDMAT\nuniform mat4 mmat;\n#endif\nvarying vec2 v_texcoord;\nvoid main() {\n  #ifdef WORLDMAT\n  vec4 pos=mmat*position;\n  gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n  #else\n  gl_Position =vec4((position.x/size.x-0.5)*2.0,(0.5-position.y/size.y)*2.0,position.z,1.0);\n  #endif\n  \n  v_texcoord = texcoord;\n}",
                e = 'precision mediump float;\n//precision highp float;\nvarying vec2 v_texcoord;\nuniform sampler2D texture;\nuniform float alpha;\n#include?BLUR_FILTER  "parts/BlurFilter_ps_uniform.glsl";\n#include?COLOR_FILTER "parts/ColorFilter_ps_uniform.glsl";\n#include?GLOW_FILTER "parts/GlowFilter_ps_uniform.glsl";\n#include?COLOR_ADD "parts/ColorAdd_ps_uniform.glsl";\n\nvoid main() {\n   vec4 color= texture2D(texture, v_texcoord);\n   color.a*=alpha;\n   color.rgb*=alpha;\n   gl_FragColor=color;\n   #include?COLOR_ADD "parts/ColorAdd_ps_logic.glsl";   \n   #include?BLUR_FILTER  "parts/BlurFilter_ps_logic.glsl";\n   #include?COLOR_FILTER "parts/ColorFilter_ps_logic.glsl";\n   #include?GLOW_FILTER "parts/GlowFilter_ps_logic.glsl";\n}',
                jt.preCompile2D(0, 1, t, e, null), t = "attribute vec4 position;\nuniform vec2 size;\nuniform mat4 mmat;\nvoid main() {\n  vec4 pos=mmat*position;\n  gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n}",
                e = 'precision mediump float;\nuniform vec4 color;\nuniform float alpha;\n#include?COLOR_FILTER "parts/ColorFilter_ps_uniform.glsl";\nvoid main() {\n\tvec4 a = vec4(color.r, color.g, color.b, color.a);\n\ta.w = alpha;\n\ta.xyz *= alpha;\n\tgl_FragColor = a;\n\t#include?COLOR_FILTER "parts/ColorFilter_ps_logic.glsl";\n}',
                jt.preCompile2D(0, 2, t, e, null), t = "attribute vec4 position;\nattribute vec3 a_color;\nuniform mat4 mmat;\nuniform mat4 u_mmat2;\nuniform vec2 u_pos;\nuniform vec2 size;\nvarying vec3 color;\nvoid main(){\n  vec4 tPos = vec4(position.x + u_pos.x,position.y + u_pos.y,position.z,position.w);\n  vec4 pos=mmat*u_mmat2*tPos;\n  gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n  color=a_color;\n}",
                e = "precision mediump float;\n//precision mediump float;\nvarying vec3 color;\nuniform float alpha;\nvoid main(){\n\t//vec4 a=vec4(color.r, color.g, color.b, 1);\n\t//a.a*=alpha;\n    gl_FragColor=vec4(color.r, color.g, color.b, alpha);\n\tgl_FragColor.rgb*=alpha;\n}",
                jt.preCompile2D(0, 4, t, e, null), t = "attribute vec4 position;\nattribute vec2 texcoord;\nuniform vec2 size;\n\n#ifdef WORLDMAT\nuniform mat4 mmat;\n#endif\nvarying vec2 v_texcoord;\nvoid main() {\n  #ifdef WORLDMAT\n  vec4 pos=mmat*position;\n  gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n  #else\n  gl_Position =vec4((position.x/size.x-0.5)*2.0,(0.5-position.y/size.y)*2.0,position.z,1.0);\n  #endif\n  \n  v_texcoord = texcoord;\n}",
                e = '#ifdef FSHIGHPRECISION\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n//precision highp float;\nvarying vec2 v_texcoord;\nuniform sampler2D texture;\nuniform float alpha;\nuniform vec4 u_TexRange;\nuniform vec2 u_offset;\n#include?BLUR_FILTER  "parts/BlurFilter_ps_uniform.glsl";\n#include?COLOR_FILTER "parts/ColorFilter_ps_uniform.glsl";\n#include?GLOW_FILTER "parts/GlowFilter_ps_uniform.glsl";\n#include?COLOR_ADD "parts/ColorAdd_ps_uniform.glsl";\n\nvoid main() {\n   vec2 newTexCoord;\n   newTexCoord.x = mod(u_offset.x + v_texcoord.x,u_TexRange.y) + u_TexRange.x;\n   newTexCoord.y = mod(u_offset.y + v_texcoord.y,u_TexRange.w) + u_TexRange.z;\n   vec4 color= texture2D(texture, newTexCoord);\n   color.a*=alpha;\n   gl_FragColor=color;\n   #include?COLOR_ADD "parts/ColorAdd_ps_logic.glsl";   \n   #include?BLUR_FILTER  "parts/BlurFilter_ps_logic.glsl";\n   #include?COLOR_FILTER "parts/ColorFilter_ps_logic.glsl";\n   #include?GLOW_FILTER "parts/GlowFilter_ps_logic.glsl";\n}',
                jt.preCompile2D(0, 256, t, e, null), t = "attribute vec2 position;\nattribute vec2 texcoord;\nattribute vec4 color;\nuniform vec2 size;\nuniform float offsetX;\nuniform float offsetY;\nuniform mat4 mmat;\nuniform mat4 u_mmat2;\nvarying vec2 v_texcoord;\nvarying vec4 v_color;\nvoid main() {\n  vec4 pos=mmat*u_mmat2*vec4(offsetX+position.x,offsetY+position.y,0,1 );\n  gl_Position = vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n  v_color = color;\n  v_color.rgb *= v_color.a;\n  v_texcoord = texcoord;  \n}",
                e = "precision mediump float;\nvarying vec2 v_texcoord;\nvarying vec4 v_color;\nuniform sampler2D texture;\nuniform float alpha;\nvoid main() {\n\tvec4 t_color = texture2D(texture, v_texcoord);\n\tgl_FragColor = t_color.rgba * v_color;\n\tgl_FragColor *= alpha;\n}",
                jt.preCompile2D(0, 512, t, e, null);
        }, t;
    }(), J = function () {
        function t(t, e, i) {
            this._value = 0, this._name2int = t, this._int2name = e, this._int2nameMap = i;
        }
        s(t, "laya.webgl.shader.ShaderDefines");
        var e = t.prototype;
        return e.add = function (t) {
            return "string" == typeof t && (t = this._name2int[t]), this._value |= t, this._value;
        }, e.addInt = function (t) {
            return this._value |= t, this._value;
        }, e.remove = function (t) {
            return "string" == typeof t && (t = this._name2int[t]), this._value &= ~t, this._value;
        }, e.isDefine = function (t) {
            return (this._value & t) === t;
        }, e.getValue = function () {
            return this._value;
        }, e.setValue = function (t) {
            this._value = t;
        }, e.toNameDic = function () {
            var e = this._int2nameMap[this._value];
            return e || t._toText(this._value, this._int2name, this._int2nameMap);
        }, t._reg = function (t, e, i, n) {
            i[t] = e, n[e] = t;
        }, t._toText = function (t, e, i) {
            var n = i[t];
            if (n) return n;
            for (var s = {}, a = 1, r = 0; r < 32 && !((a = 1 << r) > t); r++) if (t & a) {
                var o = e[a];
                o && (s[o] = "");
            }
            return i[t] = s, s;
        }, t._toInt = function (t, e) {
            for (var i = t.split("."), n = 0, s = 0, a = i.length; s < a; s++) {
                var r = e[i[s]];
                if (!r) throw new Error("Defines to int err:" + t + "/" + i[s]);
                n |= r;
            }
            return n;
        }, t;
    }(), tt = function () {
        function t() {
            this.mVBBuffer = null, this.mIBBuffer = null, this.mVBData = null, this.mIBData = null,
                this.mEleNum = 0, this.mTexture = null, this.transform = null, this._vs = null,
                this._ps = null, this._indexStart = -1, this._verticles = null, this._uvs = null,
                this._tempMatrix = new w();
        }
        s(t, "laya.webgl.shader.d2.skinAnishader.SkinMesh");
        var e = t.prototype;
        return e.init = function (e, i, n) {
            if (i) this._vs = i; else {
                this._vs = [];
                var s = e.width, a = e.height;
                this._vs.push(0, 0, 0, 0, 1, 1, 1, 1), this._vs.push(s, 0, 1, 0, 1, 1, 1, 1), this._vs.push(s, a, 1, 1, 1, 1, 1, 1),
                    this._vs.push(0, a, 0, 1, 1, 1, 1, 1);
            }
            n ? this._ps = n : (t._defaultPS || (t._defaultPS = []).push(0, 1, 3, 3, 1, 2),
                this._ps = t._defaultPS), this.mVBData = new Float32Array(this._vs), this.mIBData = new Uint16Array(this._ps.length),
                this.mIBData.start = -1, this.mEleNum = this._ps.length, this.mTexture = e;
        }, e.init2 = function (t, e, i, n, s) {
            this.transform && (this.transform = null), i ? this._ps = i : (this._ps = [], this._ps.push(0, 1, 3, 3, 1, 2)),
                this._verticles = n, this._uvs = s, this.mEleNum = this._ps.length, this.mTexture = t,
                (L.isConchNode || L.isConchApp) && (this._initMyData(), this.mVBData = new Float32Array(this._vs));
        }, e._initMyData = function () {
            var e = 0, i = 0, n = 4 * this._verticles.length;
            this._vs = t._tempVS;
            var s = !1;
            if (L.isConchNode || L.isConchApp ? (this._vs.length = n, s = !0) : this._vs.length < n && (this._vs.length = n,
                s = !0), t._tVSLen = n, s) for (; e < n;) this._vs[e] = this._verticles[i], this._vs[e + 1] = this._verticles[i + 1],
                    this._vs[e + 2] = this._uvs[i], this._vs[e + 3] = this._uvs[i + 1], this._vs[e + 4] = 1,
                    this._vs[e + 5] = 1, this._vs[e + 6] = 1, this._vs[e + 7] = 1, e += 8, i += 2; else for (; e < n;) this._vs[e] = this._verticles[i],
                        this._vs[e + 1] = this._verticles[i + 1], this._vs[e + 2] = this._uvs[i], this._vs[e + 3] = this._uvs[i + 1],
                        e += 8, i += 2;
        }, e.getData2 = function (e, i, n) {
            this.mVBBuffer = e, this.mIBBuffer = i, this._initMyData(), e.appendEx2(this._vs, Float32Array, t._tVSLen, 4),
                this._indexStart = i._byteLength;
            var s;
            (s = t._tempIB).length < this._ps.length && (s.length = this._ps.length);
            for (var a = 0, r = this._ps.length; a < r; a++) s[a] = this._ps[a] + n;
            i.appendEx2(s, Uint16Array, this._ps.length, 2);
        }, e.getData = function (t, e, i) {
            if (this.mVBBuffer = t, this.mIBBuffer = e, t.append(this.mVBData), this._indexStart = e._byteLength,
                this.mIBData.start != i) {
                for (var n = 0, s = this._ps.length; n < s; n++) this.mIBData[n] = this._ps[n] + i;
                this.mIBData.start = i;
            }
            e.append(this.mIBData);
        }, e.render = function (t, e, i) {
            if (L.isWebGL && this.mTexture) {
                t._renderKey = 0, t._shader2D.glTexture = null, et.getInstance().addSkinMesh(this);
                var n = at.createShape(t, this.mIBBuffer, this.mVBBuffer, this.mEleNum, this._indexStart, Ct.create(512, 0));
                this.transform || (this.transform = w.EMPTY), this.transform.translate(e, i), w.mul(this.transform, t._curMat, this._tempMatrix),
                    this.transform.translate(-e, -i);
                var s = n.shaderValue, a = s.u_mmat2 || mt.getMatrArray();
                mt.mat2MatArray(this._tempMatrix, a), s.textureHost = this.mTexture, s.offsetX = 0,
                    s.offsetY = 0, s.u_mmat2 = a, s.ALPHA = t._shader2D.ALPHA, t._submits[t._submits._length++] = n;
            } else L.isConchApp && this.mTexture && (this.transform || (this.transform = w.EMPTY),
                t.setSkinMesh && t.setSkinMesh(e, i, this._ps, this.mVBData, this.mEleNum, 0, this.mTexture, this.transform));
        }, t._tempVS = [], t._tempIB = [], t._defaultPS = null, t._tVSLen = 0, t;
    }(), et = function () {
        function t() {
            this.ib = null, this.vb = null;
            wt.mainContext;
            this.ib = Zt.create(35048), this.vb = Jt.create(8);
        }
        s(t, "laya.webgl.shader.d2.skinAnishader.SkinMeshBuffer");
        var e = t.prototype;
        return e.addSkinMesh = function (t) {
            t.getData2(this.vb, this.ib, this.vb._byteLength / 32);
        }, e.reset = function () {
            this.vb.clear(), this.ib.clear();
        }, t.getInstance = function () {
            return t.instance = t.instance || new t();
        }, t.instance = null, t;
    }(), it = function () {
        function t(t, e, i, n, s, a, r, o, h) {
            this.r0 = 0, this.fill = !0, this.r1 = Math.PI / 2, void 0 === h && (h = 0), this.x = t,
                this.y = e, this.width = i, this.height = n, this.edges = s, this.color = a, this.borderWidth = r,
                this.borderColor = o;
        }
        s(t, "laya.webgl.shapes.BasePoly");
        var e = t.prototype;
        return i.imps(e, {
            "laya.webgl.shapes.IShape": !0
        }), e.getData = function (t, e, i) { }, e.rebuild = function (t) { }, e.setMatrix = function (t) { },
            e.needUpdate = function (t) {
                return !0;
            }, e.sector = function (t, e, i) {
                var n = this.x, s = this.y, a = this.edges, r = (this.r1 - this.r0) / a, o = this.width, h = this.height, l = this.color, c = (l >> 16 & 255) / 255, u = (l >> 8 & 255) / 255, d = (255 & l) / 255;
                t.push(n, s, c, u, d);
                for (var _ = 0; _ < a + 1; _++) t.push(n + Math.sin(r * _ + this.r0) * o, s + Math.cos(r * _ + this.r0) * h),
                    t.push(c, u, d);
                for (_ = 0; _ < a; _++) e.push(i, i + _ + 1, i + _ + 2);
            }, e.createLine2 = function (t, e, i, n, s, a) {
                var r, o, h, l, c, u, d, _, f, p, g, v, m, y, w, x, b, L, C, M, T = t.concat(), S = s, A = this.borderColor, I = (A >> 16 & 255) / 255, E = (A >> 8 & 255) / 255, R = (255 & A) / 255, P = T.length / 2, D = n, k = i / 2;
                h = T[0], l = T[1], p = h - (c = T[2]), f = (f = -(l - (u = T[3]))) / (M = Math.sqrt(f * f + p * p)) * k,
                    p = p / M * k, S.push(h - f + this.x, l - p + this.y, I, E, R, h + f + this.x, l + p + this.y, I, E, R);
                for (var F = 1; F < P - 1; F++) h = T[2 * (F - 1)], l = T[2 * (F - 1) + 1], c = T[2 * F],
                    u = T[2 * F + 1], d = T[2 * (F + 1)], _ = T[2 * (F + 1) + 1], p = h - c, v = c - d,
                    w = (-(f = (f = -(l - u)) / (M = Math.sqrt(f * f + p * p)) * k) + h) * (-(p = p / M * k) + u) - (-f + c) * (-p + l),
                    L = (-(g = (g = -(u - _)) / (M = Math.sqrt(g * g + v * v)) * k) + d) * (-(v = v / M * k) + u) - (-g + c) * (-v + _),
                    C = (m = -p + l - (-p + u)) * (b = -g + c - (-g + d)) - (x = -v + _ - (-v + u)) * (y = -f + c - (-f + h)),
                    Math.abs(C) < .1 ? (C += 10.1, S.push(c - f + this.x, u - p + this.y, I, E, R, c + f + this.x, u + p + this.y, I, E, R)) : (((r = (y * L - b * w) / C) - c) * (r - c) + ((o = (x * w - m * L) / C) - u) + (o - u),
                        S.push(r + this.x, o + this.y, I, E, R, c - (r - c) + this.x, u - (o - u) + this.y, I, E, R));
                h = T[T.length - 4], l = T[T.length - 3], p = h - (c = T[T.length - 2]), f = (f = -(l - (u = T[T.length - 1]))) / (M = Math.sqrt(f * f + p * p)) * k,
                    p = p / M * k, S.push(c - f + this.x, u - p + this.y, I, E, R, c + f + this.x, u + p + this.y, I, E, R);
                var B = a;
                for (F = 1; F < B; F++) e.push(D + 2 * (F - 1), D + 2 * (F - 1) + 1, D + 2 * F + 1, D + 2 * F + 1, D + 2 * F, D + 2 * (F - 1));
                return S;
            }, e.createLine = function (t, e, i, n) {
                var s = t.concat(), a = t, r = this.borderColor, o = (r >> 16 & 255) / 255, h = (r >> 8 & 255) / 255, l = (255 & r) / 255;
                s.splice(0, 5);
                var c, u, d, _, f, p, g, v, m, y, w, x, b, L, C, M, T, S, A, I, E = s.length / 5, R = n, P = i / 2;
                d = s[0], _ = s[1], y = d - (f = s[5]), m = (m = -(_ - (p = s[6]))) / (I = Math.sqrt(m * m + y * y)) * P,
                    y = y / I * P, a.push(d - m, _ - y, o, h, l, d + m, _ + y, o, h, l);
                for (var D = 1; D < E - 1; D++) d = s[5 * (D - 1)], _ = s[5 * (D - 1) + 1], f = s[5 * D],
                    p = s[5 * D + 1], g = s[5 * (D + 1)], v = s[5 * (D + 1) + 1], y = d - f, x = f - g,
                    C = (-(m = (m = -(_ - p)) / (I = Math.sqrt(m * m + y * y)) * P) + d) * (-(y = y / I * P) + p) - (-m + f) * (-y + _),
                    S = (-(w = (w = -(p - v)) / (I = Math.sqrt(w * w + x * x)) * P) + g) * (-(x = x / I * P) + p) - (-w + f) * (-x + v),
                    A = (b = -y + _ - (-y + p)) * (T = -w + f - (-w + g)) - (M = -x + v - (-x + p)) * (L = -m + f - (-m + d)),
                    Math.abs(A) < .1 ? (A += 10.1, a.push(f - m, p - y, o, h, l, f + m, p + y, o, h, l)) : (((c = (L * S - T * C) / A) - f) * (c - f) + ((u = (M * C - b * S) / A) - p) + (u - p),
                        a.push(c, u, o, h, l, f - (c - f), p - (u - p), o, h, l));
                d = s[s.length - 10], _ = s[s.length - 9], y = d - (f = s[s.length - 5]), m = (m = -(_ - (p = s[s.length - 4]))) / (I = Math.sqrt(m * m + y * y)) * P,
                    y = y / I * P, a.push(f - m, p - y, o, h, l, f + m, p + y, o, h, l);
                var k = this.edges + 1;
                for (D = 1; D < k; D++) e.push(R + 2 * (D - 1), R + 2 * (D - 1) + 1, R + 2 * D + 1, R + 2 * D + 1, R + 2 * D, R + 2 * (D - 1));
                return a;
            }, e.createLoopLine = function (t, e, i, n, s, a) {
                var r = t.concat(), o = s || t, h = this.borderColor, l = (h >> 16 & 255) / 255, c = (h >> 8 & 255) / 255, u = (255 & h) / 255;
                r.splice(0, 5);
                var d = [r[0], r[1]], _ = [r[r.length - 5], r[r.length - 4]], f = _[0] + .5 * (d[0] - _[0]), p = _[1] + .5 * (d[1] - _[1]);
                r.unshift(f, p, 0, 0, 0), r.push(f, p, 0, 0, 0);
                var g, v, m, y, w, x, b, L, C, M, T, S, A, I, E, R, P, D, k, F, B = r.length / 5, O = n, N = i / 2;
                m = r[0], y = r[1], M = m - (w = r[5]), C = (C = -(y - (x = r[6]))) / (F = Math.sqrt(C * C + M * M)) * N,
                    M = M / F * N, o.push(m - C, y - M, l, c, u, m + C, y + M, l, c, u);
                for (var G = 1; G < B - 1; G++) m = r[5 * (G - 1)], y = r[5 * (G - 1) + 1], w = r[5 * G],
                    x = r[5 * G + 1], b = r[5 * (G + 1)], L = r[5 * (G + 1) + 1], M = m - w, S = w - b,
                    E = (-(C = (C = -(y - x)) / (F = Math.sqrt(C * C + M * M)) * N) + m) * (-(M = M / F * N) + x) - (-C + w) * (-M + y),
                    D = (-(T = (T = -(x - L)) / (F = Math.sqrt(T * T + S * S)) * N) + b) * (-(S = S / F * N) + x) - (-T + w) * (-S + L),
                    k = (A = -M + y - (-M + x)) * (P = -T + w - (-T + b)) - (R = -S + L - (-S + x)) * (I = -C + w - (-C + m)),
                    Math.abs(k) < .1 ? (k += 10.1, o.push(w - C, x - M, l, c, u, w + C, x + M, l, c, u)) : (((g = (I * D - P * E) / k) - w) * (g - w) + ((v = (R * E - A * D) / k) - x) + (v - x),
                        o.push(g, v, l, c, u, w - (g - w), x - (v - x), l, c, u));
                a && (e = a);
                var H = this.edges + 1;
                for (G = 1; G < H; G++) e.push(O + 2 * (G - 1), O + 2 * (G - 1) + 1, O + 2 * G + 1, O + 2 * G + 1, O + 2 * G, O + 2 * (G - 1));
                return e.push(O + 2 * (G - 1), O + 2 * (G - 1) + 1, O + 1, O + 1, O, O + 2 * (G - 1)),
                    o;
            }, t;
    }(), nt = function () {
        function t() { }
        return s(t, "laya.webgl.shapes.Earcut"), t.earcut = function (e, i, n) {
            n = n || 2;
            var s = i && i.length, a = s ? i[0] * n : e.length, r = t.linkedList(e, 0, a, n, !0), o = [];
            if (!r) return o;
            var h, l, c, u, d, _, f;
            if (s && (r = t.eliminateHoles(e, i, r, n)), e.length > 80 * n) {
                h = c = e[0], l = u = e[1];
                for (var p = n; p < a; p += n) d = e[p], _ = e[p + 1], d < h && (h = d), _ < l && (l = _),
                    d > c && (c = d), _ > u && (u = _);
                f = 0 !== (f = Math.max(c - h, u - l)) ? 1 / f : 0;
            }
            return t.earcutLinked(r, o, n, h, l, f), o;
        }, t.linkedList = function (e, i, n, s, a) {
            var r, o;
            if (a === t.signedArea(e, i, n, s) > 0) for (r = i; r < n; r += s) o = t.insertNode(r, e[r], e[r + 1], o); else for (r = n - s; r >= i; r -= s) o = t.insertNode(r, e[r], e[r + 1], o);
            return o && t.equals(o, o.next) && (t.removeNode(o), o = o.next), o;
        }, t.filterPoints = function (e, i) {
            if (!e) return e;
            i || (i = e);
            var n, s = e;
            do {
                if (n = !1, s.steiner || !t.equals(s, s.next) && 0 !== t.area(s.prev, s, s.next)) s = s.next; else {
                    if (t.removeNode(s), (s = i = s.prev) === s.next) break;
                    n = !0;
                }
            } while (n || s !== i);
            return i;
        }, t.earcutLinked = function (e, i, n, s, a, r, o) {
            if (e) {
                !o && r && t.indexCurve(e, s, a, r);
                for (var h, l, c = e; e.prev !== e.next;) if (h = e.prev, l = e.next, r ? t.isEarHashed(e, s, a, r) : t.isEar(e)) i.push(h.i / n),
                    i.push(e.i / n), i.push(l.i / n), t.removeNode(e), e = l.next, c = l.next; else if ((e = l) === c) {
                        o ? 1 === o ? (e = t.cureLocalIntersections(e, i, n), t.earcutLinked(e, i, n, s, a, r, 2)) : 2 === o && t.splitEarcut(e, i, n, s, a, r) : t.earcutLinked(t.filterPoints(e, null), i, n, s, a, r, 1);
                        break;
                    }
            }
        }, t.isEar = function (e) {
            var i = e.prev, n = e, s = e.next;
            if (t.area(i, n, s) >= 0) return !1;
            for (var a = e.next.next; a !== e.prev;) {
                if (t.pointInTriangle(i.x, i.y, n.x, n.y, s.x, s.y, a.x, a.y) && t.area(a.prev, a, a.next) >= 0) return !1;
                a = a.next;
            }
            return !0;
        }, t.isEarHashed = function (e, i, n, s) {
            var a = e.prev, r = e, o = e.next;
            if (t.area(a, r, o) >= 0) return !1;
            for (var h = a.x < r.x ? a.x < o.x ? a.x : o.x : r.x < o.x ? r.x : o.x, l = a.y < r.y ? a.y < o.y ? a.y : o.y : r.y < o.y ? r.y : o.y, c = a.x > r.x ? a.x > o.x ? a.x : o.x : r.x > o.x ? r.x : o.x, u = a.y > r.y ? a.y > o.y ? a.y : o.y : r.y > o.y ? r.y : o.y, d = t.zOrder(h, l, i, n, s), _ = t.zOrder(c, u, i, n, s), f = e.nextZ; f && f.z <= _;) {
                if (f !== e.prev && f !== e.next && t.pointInTriangle(a.x, a.y, r.x, r.y, o.x, o.y, f.x, f.y) && t.area(f.prev, f, f.next) >= 0) return !1;
                f = f.nextZ;
            }
            for (f = e.prevZ; f && f.z >= d;) {
                if (f !== e.prev && f !== e.next && t.pointInTriangle(a.x, a.y, r.x, r.y, o.x, o.y, f.x, f.y) && t.area(f.prev, f, f.next) >= 0) return !1;
                f = f.prevZ;
            }
            return !0;
        }, t.cureLocalIntersections = function (e, i, n) {
            var s = e;
            do {
                var a = s.prev, r = s.next.next;
                !t.equals(a, r) && t.intersects(a, s, s.next, r) && t.locallyInside(a, r) && t.locallyInside(r, a) && (i.push(a.i / n),
                    i.push(s.i / n), i.push(r.i / n), t.removeNode(s), t.removeNode(s.next), s = e = r),
                    s = s.next;
            } while (s !== e);
            return s;
        }, t.splitEarcut = function (e, i, n, s, a, r) {
            var o = e;
            do {
                for (var h = o.next.next; h !== o.prev;) {
                    if (o.i !== h.i && t.isValidDiagonal(o, h)) {
                        var l = t.splitPolygon(o, h);
                        return o = t.filterPoints(o, o.next), l = t.filterPoints(l, l.next), t.earcutLinked(o, i, n, s, a, r),
                            void t.earcutLinked(l, i, n, s, a, r);
                    }
                    h = h.next;
                }
                o = o.next;
            } while (o !== e);
        }, t.eliminateHoles = function (e, i, n, s) {
            var a, r, o, h, l, c = [];
            for (a = 0, r = i.length; a < r; a++) o = i[a] * s, h = a < r - 1 ? i[a + 1] * s : e.length,
                (l = t.linkedList(e, o, h, s, !1)) === l.next && (l.steiner = !0), c.push(t.getLeftmost(l));
            for (c.sort(t.compareX), a = 0; a < c.length; a++) t.eliminateHole(c[a], n), n = t.filterPoints(n, n.next);
            return n;
        }, t.compareX = function (t, e) {
            return t.x - e.x;
        }, t.eliminateHole = function (e, i) {
            if (i = t.findHoleBridge(e, i)) {
                var n = t.splitPolygon(i, e);
                t.filterPoints(n, n.next);
            }
        }, t.findHoleBridge = function (e, i) {
            var n, s = i, a = e.x, r = e.y, o = -1 / 0;
            do {
                if (r <= s.y && r >= s.next.y && s.next.y !== s.y) {
                    var h = s.x + (r - s.y) * (s.next.x - s.x) / (s.next.y - s.y);
                    if (h <= a && h > o) {
                        if (o = h, h === a) {
                            if (r === s.y) return s;
                            if (r === s.next.y) return s.next;
                        }
                        n = s.x < s.next.x ? s : s.next;
                    }
                }
                s = s.next;
            } while (s !== i);
            if (!n) return null;
            if (a === o) return n.prev;
            var l, c = n, u = n.x, d = n.y, _ = 1 / 0;
            for (s = n.next; s !== c;) a >= s.x && s.x >= u && a !== s.x && t.pointInTriangle(r < d ? a : o, r, u, d, r < d ? o : a, r, s.x, s.y) && ((l = Math.abs(r - s.y) / (a - s.x)) < _ || l === _ && s.x > n.x) && t.locallyInside(s, e) && (n = s,
                _ = l), s = s.next;
            return n;
        }, t.indexCurve = function (e, i, n, s) {
            var a = e;
            do {
                null === a.z && (a.z = t.zOrder(a.x, a.y, i, n, s)), a.prevZ = a.prev, a.nextZ = a.next,
                    a = a.next;
            } while (a !== e);
            a.prevZ.nextZ = null, a.prevZ = null, t.sortLinked(a);
        }, t.sortLinked = function (t) {
            var e, i, n, s, a, r, o, h, l = 1;
            do {
                for (i = t, t = null, a = null, r = 0; i;) {
                    for (r++, n = i, o = 0, e = 0; e < l && (o++, n = n.nextZ); e++);
                    for (h = l; o > 0 || h > 0 && n;) 0 !== o && (0 === h || !n || i.z <= n.z) ? (s = i,
                        i = i.nextZ, o--) : (s = n, n = n.nextZ, h--), a ? a.nextZ = s : t = s, s.prevZ = a,
                        a = s;
                    i = n;
                }
                a.nextZ = null, l *= 2;
            } while (r > 1);
            return t;
        }, t.zOrder = function (t, e, i, n, s) {
            return t = 32767 * (t - i) * s, e = 32767 * (e - n) * s, t = 16711935 & (t | t << 8),
                t = 252645135 & (t | t << 4), t = 858993459 & (t | t << 2), t = 1431655765 & (t | t << 1),
                e = 16711935 & (e | e << 8), e = 252645135 & (e | e << 4), e = 858993459 & (e | e << 2),
                e = 1431655765 & (e | e << 1), t | e << 1;
        }, t.getLeftmost = function (t) {
            var e = t, i = t;
            do {
                e.x < i.x && (i = e), e = e.next;
            } while (e !== t);
            return i;
        }, t.pointInTriangle = function (t, e, i, n, s, a, r, o) {
            return (s - r) * (e - o) - (t - r) * (a - o) >= 0 && (t - r) * (n - o) - (i - r) * (e - o) >= 0 && (i - r) * (a - o) - (s - r) * (n - o) >= 0;
        }, t.isValidDiagonal = function (e, i) {
            return e.next.i !== i.i && e.prev.i !== i.i && !t.intersectsPolygon(e, i) && t.locallyInside(e, i) && t.locallyInside(i, e) && t.middleInside(e, i);
        }, t.area = function (t, e, i) {
            return (e.y - t.y) * (i.x - e.x) - (e.x - t.x) * (i.y - e.y);
        }, t.equals = function (t, e) {
            return t.x === e.x && t.y === e.y;
        }, t.intersects = function (e, i, n, s) {
            return !!(t.equals(e, i) && t.equals(n, s) || t.equals(e, s) && t.equals(n, i)) || t.area(e, i, n) > 0 != t.area(e, i, s) > 0 && t.area(n, s, e) > 0 != t.area(n, s, i) > 0;
        }, t.intersectsPolygon = function (e, i) {
            var n = e;
            do {
                if (n.i !== e.i && n.next.i !== e.i && n.i !== i.i && n.next.i !== i.i && t.intersects(n, n.next, e, i)) return !0;
                n = n.next;
            } while (n !== e);
            return !1;
        }, t.locallyInside = function (e, i) {
            return t.area(e.prev, e, e.next) < 0 ? t.area(e, i, e.next) >= 0 && t.area(e, e.prev, i) >= 0 : t.area(e, i, e.prev) < 0 || t.area(e, e.next, i) < 0;
        }, t.middleInside = function (t, e) {
            var i = t, n = !1, s = (t.x + e.x) / 2, a = (t.y + e.y) / 2;
            do {
                i.y > a != i.next.y > a && i.next.y !== i.y && s < (i.next.x - i.x) * (a - i.y) / (i.next.y - i.y) + i.x && (n = !n),
                    i = i.next;
            } while (i !== t);
            return n;
        }, t.splitPolygon = function (t, e) {
            var i = new st(t.i, t.x, t.y), n = new st(e.i, e.x, e.y), s = t.next, a = e.prev;
            return t.next = e, e.prev = t, i.next = s, s.prev = i, n.next = i, i.prev = n, a.next = n,
                n.prev = a, n;
        }, t.insertNode = function (t, e, i, n) {
            var s = new st(t, e, i);
            return n ? (s.next = n.next, s.prev = n, n.next.prev = s, n.next = s) : (s.prev = s,
                s.next = s), s;
        }, t.removeNode = function (t) {
            t.next.prev = t.prev, t.prev.next = t.next, t.prevZ && (t.prevZ.nextZ = t.nextZ),
                t.nextZ && (t.nextZ.prevZ = t.prevZ);
        }, t.signedArea = function (t, e, i, n) {
            for (var s = 0, a = e, r = i - n; a < i; a += n) s += (t[r] - t[a]) * (t[a + 1] + t[r + 1]),
                r = a;
            return s;
        }, t;
    }(), st = function () {
        function t(t, e, i) {
            this.i = null, this.x = null, this.y = null, this.prev = null, this.next = null,
                this.z = null, this.prevZ = null, this.nextZ = null, this.steiner = null, this.i = t,
                this.x = e, this.y = i, this.prev = null, this.next = null, this.z = null, this.prevZ = null,
                this.nextZ = null, this.steiner = !1;
        }
        return s(t, "laya.webgl.shapes.EarcutNode"), t;
    }(), at = (function () {
        function t(t, e, i, n, s, a, r) {
            this.lineWidth = t, this.lineColor = e, this.lineAlpha = i, this.fillColor = n,
                this.fillAlpha = s, this.shape = r, this.fill = a;
        }
        s(t, "laya.webgl.shapes.GeometryData");
        var e = t.prototype;
        e.clone = function () {
            return new t(this.lineWidth, this.lineColor, this.lineAlpha, this.fillColor, this.fillAlpha, this.fill, this.shape);
        }, e.getIndexData = function () {
            return null;
        }, e.getVertexData = function () {
            return null;
        }, e.destroy = function () {
            this.shape = null;
        };
    }(), function () {
        function t(t) {
            if (t instanceof Float32Array) this.points = t; else if (t instanceof Array) {
                t.length;
                this.points = new Float32Array(t);
            }
        }
        s(t, "laya.webgl.shapes.Vertex");
        var e = t.prototype;
        i.imps(e, {
            "laya.webgl.shapes.IShape": !0
        }), e.getData = function (t, e, i) { }, e.needUpdate = function (t) {
            return !1;
        }, e.rebuild = function (t) { }, e.setMatrix = function (t) { };
    }(), function () {
        function t(t) {
            void 0 === t && (t = 1e4), this._renderType = t;
        }
        s(t, "laya.webgl.submit.Submit");
        var e = t.prototype;
        return i.imps(e, {
            "laya.webgl.submit.ISubmit": !0
        }), e.releaseRender = function () {
            var e = t._cache;
            e[e._length++] = this, this.shaderValue.release(), this._vb = null;
        }, e.getRenderType = function () {
            return this._renderType;
        }, e.renderSubmit = function () {
            if (0 === this._numEle) return 1;
            var t = this.shaderValue.textureHost;
            if (t) {
                var e = t.source;
                if (!t.bitmap || !e) return 1;
                this.shaderValue.texture = e;
            }
            this._vb.bind_upload(this._ib);
            var i = wt.mainContext;
            return this.shaderValue.upload(), V.activeBlendFunction !== this._blendFn && (i.enable(3042),
                this._blendFn(i), V.activeBlendFunction = this._blendFn), E.drawCall++, E.trianglesFaces += this._numEle / 3,
                i.drawElements(4, this._numEle, 5123, this._startIdx), 1;
        }, t.__init__ = function () {
            var e = t.RENDERBASE = new t(-1);
            e.shaderValue = new Ct(0, 0), e.shaderValue.ALPHA = -1234;
        }, t.createSubmit = function (e, i, n, s, a) {
            var r = t._cache._length ? t._cache[--t._cache._length] : new t();
            null == n && ((n = r._selfVb || (r._selfVb = Jt.create(-1))).clear(), s = 0), r._ib = i,
                r._vb = n, r._startIdx = s * pt.BYTES_PIDX, r._numEle = 0;
            var o = e._nBlendType;
            r._blendFn = e._targets ? V.targetFns[o] : V.fns[o], r.shaderValue = a, r.shaderValue.setValue(e._shader2D);
            var h = e._shader2D.filters;
            return h && r.shaderValue.setFilters(h), r;
        }, t.createShape = function (e, i, n, s, a, r) {
            var o = t._cache._length ? t._cache[--t._cache._length] : new t();
            o._ib = i, o._vb = n, o._numEle = s, o._startIdx = a, o.shaderValue = r, o.shaderValue.setValue(e._shader2D);
            var h = e._nBlendType;
            return o._blendFn = e._targets ? V.targetFns[h] : V.fns[h], o;
        }, t.TYPE_2D = 1e4, t.TYPE_CANVAS = 10003, t.TYPE_CMDSETRT = 10004, t.TYPE_CUSTOM = 10005,
            t.TYPE_BLURRT = 10006, t.TYPE_CMDDESTORYPRERT = 10007, t.TYPE_DISABLESTENCIL = 10008,
            t.TYPE_OTHERIBVB = 10009, t.TYPE_PRIMITIVE = 10010, t.TYPE_RT = 10011, t.TYPE_BLUR_RT = 10012,
            t.TYPE_TARGET = 10013, t.TYPE_CHANGE_VALUE = 10014, t.TYPE_SHAPE = 10015, t.TYPE_TEXTURE = 10016,
            t.TYPE_FILLTEXTURE = 10017, t.RENDERBASE = null, t._cache = (t._cache = [], t._cache._length = 0,
                t._cache), t;
    }()), rt = function () {
        function t() {
            this.fun = null, this.args = null;
        }
        s(t, "laya.webgl.submit.SubmitCMD");
        var e = t.prototype;
        return i.imps(e, {
            "laya.webgl.submit.ISubmit": !0
        }), e.renderSubmit = function () {
            return this.fun.apply(null, this.args), 1;
        }, e.getRenderType = function () {
            return 0;
        }, e.releaseRender = function () {
            var e = t._cache;
            e[e._length++] = this;
        }, t.create = function (e, i) {
            var n = t._cache._length ? t._cache[--t._cache._length] : new t();
            return n.fun = i, n.args = e, n;
        }, t._cache = (t._cache = [], t._cache._length = 0, t._cache), t;
    }(), ot = function () {
        function t() {
            this.variables = {};
        }
        s(t, "laya.webgl.submit.SubmitCMDScope");
        var e = t.prototype;
        return e.getValue = function (t) {
            return this.variables[t];
        }, e.addValue = function (t, e) {
            return this.variables[t] = e;
        }, e.setValue = function (t, e) {
            return this.variables.hasOwnProperty(t) ? this.variables[t] = e : null;
        }, e.clear = function () {
            for (var t in this.variables) delete this.variables[t];
        }, e.recycle = function () {
            this.clear(), t.POOL.push(this);
        }, t.create = function () {
            var e = t.POOL.pop();
            return e || (e = new t()), e;
        }, t.POOL = [], t;
    }(), ht = function () {
        function t() {
            this.offset = 0, this.startIndex = 0, this._mat = w.create();
        }
        s(t, "laya.webgl.submit.SubmitOtherIBVB");
        var e = t.prototype;
        return i.imps(e, {
            "laya.webgl.submit.ISubmit": !0
        }), e.releaseRender = function () {
            var e = t._cache;
            e[e._length++] = this;
        }, e.getRenderType = function () {
            return 10009;
        }, e.renderSubmit = function () {
            var e = this._shaderValue.textureHost;
            if (e) {
                var i = e.source;
                if (!e.bitmap || !i) return 1;
                this._shaderValue.texture = i;
            }
            this._vb.bind_upload(this._ib);
            var n = mt.worldMatrix4, s = w.TEMP;
            w.mulPre(this._mat, n[0], n[1], n[4], n[5], n[12], n[13], s);
            var a = mt.worldMatrix4 = t.tempMatrix4;
            a[0] = s.a, a[1] = s.b, a[4] = s.c, a[5] = s.d, a[12] = s.tx, a[13] = s.ty, this._shader._offset = this.offset,
                this._shaderValue.refresh(), this._shader.upload(this._shaderValue), this._shader._offset = 0;
            var r = wt.mainContext;
            return V.activeBlendFunction !== this._blendFn && (r.enable(3042), this._blendFn(r),
                V.activeBlendFunction = this._blendFn), E.drawCall++, E.trianglesFaces += this._numEle / 3,
                r.drawElements(4, this._numEle, 5123, this.startIndex), mt.worldMatrix4 = n, Ft.activeShader = null,
                1;
        }, t.create = function (e, i, n, s, a, r, o, h, l) {
            void 0 === l && (l = 0);
            var c = t._cache._length ? t._cache[--t._cache._length] : new t();
            c._ib = n, c._vb = i, c._numEle = s, c._shader = a, c._shaderValue = r;
            var u = e._nBlendType;
            switch (c._blendFn = e._targets ? V.targetFns[u] : V.fns[u], l) {
                case 0:
                    c.offset = 0, c.startIndex = h / (pt.BYTES_PE * i.vertexStride) * 1.5, c.startIndex *= pt.BYTES_PIDX;
                    break;

                case 1:
                    c.startIndex = o, c.offset = h;
            }
            return c;
        }, t._cache = (t._cache = [], t._cache._length = 0, t._cache), t.tempMatrix4 = [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1],
            t;
    }(), lt = function () {
        function t() {
            this.submitIndex = 0, this.submitLength = 0, this.context = null, this.clipRect = new b(),
                this.screenRect = new b();
        }
        s(t, "laya.webgl.submit.SubmitScissor");
        var e = t.prototype;
        return i.imps(e, {
            "laya.webgl.submit.ISubmit": !0
        }), e._scissor = function (t, e, i, n) {
            var s = mt.worldMatrix4, a = s[0], r = s[5];
            if (t = t * a + s[12], e = e * r + s[13], i *= a, n *= r, i < 1 || n < 1) return !1;
            var o = t + i, h = e + n;
            t < 0 && (t = 0, i = o - t), e < 0 && (e = 0, n = h - e);
            var l = mt.worldClipRect;
            if (t = Math.max(t, l.x), e = Math.max(e, l.y), i = Math.min(o, l.right) - t, n = Math.min(h, l.bottom) - e,
                i < 1 || n < 1) return !1;
            var c = mt.worldScissorTest;
            return this.screenRect.copyFrom(l), l.x = t, l.y = e, l.width = i, l.height = n,
                mt.worldScissorTest = !0, e = mt.height - e - n, wt.mainContext.scissor(t, e, i, n),
                wt.mainContext.enable(3089), this.context.submitElement(this.submitIndex, this.submitIndex + this.submitLength),
                c ? (e = mt.height - this.screenRect.y - this.screenRect.height, wt.mainContext.scissor(this.screenRect.x, e, this.screenRect.width, this.screenRect.height),
                    wt.mainContext.enable(3089)) : (wt.mainContext.disable(3089), mt.worldScissorTest = !1),
                l.copyFrom(this.screenRect), !0;
        }, e._scissorWithTagart = function (t, e, i, n) {
            if (i < 1 || n < 1) return !1;
            var s = t + i, a = e + n;
            t < 0 && (t = 0, i = s - t), e < 0 && (e = 0, n = a - e);
            var r = mt.worldClipRect;
            if (t = Math.max(t, r.x), e = Math.max(e, r.y), i = Math.min(s, r.right) - t, n = Math.min(a, r.bottom) - e,
                i < 1 || n < 1) return !1;
            var o = mt.worldScissorTest;
            return this.screenRect.copyFrom(r), mt.worldScissorTest = !0, r.x = t, r.y = e,
                r.width = i, r.height = n, e = mt.height - e - n, wt.mainContext.scissor(t, e, i, n),
                wt.mainContext.enable(3089), this.context.submitElement(this.submitIndex, this.submitIndex + this.submitLength),
                o ? (e = mt.height - this.screenRect.y - this.screenRect.height, wt.mainContext.scissor(this.screenRect.x, e, this.screenRect.width, this.screenRect.height),
                    wt.mainContext.enable(3089)) : (wt.mainContext.disable(3089), mt.worldScissorTest = !1),
                r.copyFrom(this.screenRect), !0;
        }, e.renderSubmit = function () {
            return this.submitLength = Math.min(this.context._submits._length - 1, this.submitLength),
                this.submitLength < 1 || this.clipRect.width < 1 || this.clipRect.height < 1 ? this.submitLength + 1 : (this.context._targets ? this._scissorWithTagart(this.clipRect.x, this.clipRect.y, this.clipRect.width, this.clipRect.height) : this._scissor(this.clipRect.x, this.clipRect.y, this.clipRect.width, this.clipRect.height),
                    this.submitLength + 1);
        }, e.getRenderType = function () {
            return 0;
        }, e.releaseRender = function () {
            var e = t._cache;
            e[e._length++] = this, this.context = null;
        }, t.create = function (e) {
            var i = t._cache._length ? t._cache[--t._cache._length] : new t();
            return i.context = e, i;
        }, t._cache = (t._cache = [], t._cache._length = 0, t._cache), t;
    }(), ct = function () {
        function t() {
            this.step = 0, this.blendMode = null, this.level = 0;
        }
        s(t, "laya.webgl.submit.SubmitStencil");
        var e = t.prototype;
        return i.imps(e, {
            "laya.webgl.submit.ISubmit": !0
        }), e.renderSubmit = function () {
            switch (this.step) {
                case 1:
                    this.do1();
                    break;

                case 2:
                    this.do2();
                    break;

                case 3:
                    this.do3();
                    break;

                case 4:
                    this.do4();
                    break;

                case 5:
                    this.do5();
                    break;

                case 6:
                    this.do6();
                    break;

                case 7:
                    this.do7();
                    break;

                case 8:
                    this.do8();
            }
            return 1;
        }, e.getRenderType = function () {
            return 0;
        }, e.releaseRender = function () {
            var e = t._cache;
            e[e._length++] = this;
        }, e.do1 = function () {
            var t = wt.mainContext;
            t.enable(2960), t.clear(1024), t.colorMask(!1, !1, !1, !1), t.stencilFunc(514, this.level, 255),
                t.stencilOp(7680, 7680, 7682);
        }, e.do2 = function () {
            var t = wt.mainContext;
            t.stencilFunc(514, this.level + 1, 255), t.colorMask(!0, !0, !0, !0), t.stencilOp(7680, 7680, 7680);
        }, e.do3 = function () {
            var t = wt.mainContext;
            t.colorMask(!0, !0, !0, !0), t.stencilOp(7680, 7680, 7680), t.clear(1024), t.disable(2960);
        }, e.do4 = function () {
            var t = wt.mainContext;
            0 == this.level && (t.enable(2960), t.clear(1024)), t.colorMask(!1, !1, !1, !1),
                t.stencilFunc(519, 0, 255), t.stencilOp(7680, 7680, 7682);
        }, e.do5 = function () {
            var t = wt.mainContext;
            t.stencilFunc(514, this.level, 255), t.colorMask(!0, !0, !0, !0), t.stencilOp(7680, 7680, 7680);
        }, e.do6 = function () {
            var t = wt.mainContext;
            V.targetFns[V.TOINT[this.blendMode]](t);
        }, e.do7 = function () {
            var t = wt.mainContext;
            t.colorMask(!1, !1, !1, !1), t.stencilOp(7680, 7680, 7683);
        }, e.do8 = function () {
            var t = wt.mainContext;
            t.colorMask(!0, !0, !0, !0), t.stencilFunc(514, this.level, 255), t.stencilOp(7680, 7680, 7680);
        }, t.restore = function (e, i, n, s, a) {
            var r;
            if (e._renderKey = 0, t._mask > 0 && t._mask--, 0 == t._mask) r = laya.webgl.submit.SubmitStencil.create(3),
                e.addRenderObject(r), e._curSubmit = at.RENDERBASE; else {
                r = laya.webgl.submit.SubmitStencil.create(7), e.addRenderObject(r);
                var o = e._vb;
                o._byteLength;
                if (gt.fillRectImgVb(o, null, i.x, i.y, i.width, i.height, k.DEF_UV, n, s, a, 0, 0)) {
                    e._shader2D.glTexture = null;
                    var h = e._curSubmit = at.createSubmit(e, e._ib, o, (o._byteLength - 64) / 32 * 3, Ct.create(2, 0));
                    h.shaderValue.ALPHA = 1, e._submits[e._submits._length++] = h, e._curSubmit._numEle += 6,
                        e._curSubmit = at.RENDERBASE;
                } else alert("clipRect calc stencil rect error");
                r = laya.webgl.submit.SubmitStencil.create(8), e.addRenderObject(r);
            }
        }, t.restore2 = function (e, i) {
            var n;
            e._renderKey = 0, t._mask > 0 && t._mask--, 0 == t._mask ? (n = laya.webgl.submit.SubmitStencil.create(3),
                e.addRenderObject(n), e._curSubmit = at.RENDERBASE) : (n = laya.webgl.submit.SubmitStencil.create(7),
                    e.addRenderObject(n), e._submits[e._submits._length++] = i, n = laya.webgl.submit.SubmitStencil.create(8),
                    e.addRenderObject(n));
        }, t.create = function (e) {
            var i = t._cache._length ? t._cache[--t._cache._length] : new t();
            return i.step = e, 5 == e && ++t._mask, i.level = t._mask, i;
        }, t._cache = (t._cache = [], t._cache._length = 0, t._cache), t._mask = 0, t;
    }(), ut = function () {
        function t() {
            this._renderType = 0, this._vb = null, this._ib = null, this._startIdx = 0, this._numEle = 0,
                this.shaderValue = null, this.blendType = 0, this.proName = null, this.scope = null;
        }
        s(t, "laya.webgl.submit.SubmitTarget");
        var e = t.prototype;
        return i.imps(e, {
            "laya.webgl.submit.ISubmit": !0
        }), e.renderSubmit = function () {
            this._vb.bind_upload(this._ib);
            var t = this.scope.getValue(this.proName);
            return t && (this.shaderValue.texture = t.source, this.shaderValue.strength && !this.shaderValue.blurInfo && (this.shaderValue.blurInfo = [t.width, t.height]),
                this.shaderValue.upload(), this.blend(), E.drawCall++, E.trianglesFaces += this._numEle / 3,
                wt.mainContext.drawElements(4, this._numEle, 5123, this._startIdx)), 1;
        }, e.blend = function () {
            if (V.activeBlendFunction !== V.fns[this.blendType]) {
                var t = wt.mainContext;
                t.enable(3042), V.fns[this.blendType](t), V.activeBlendFunction = V.fns[this.blendType];
            }
        }, e.getRenderType = function () {
            return 0;
        }, e.releaseRender = function () {
            var e = t._cache;
            e[e._length++] = this;
        }, t.create = function (e, i, n, s, a, r) {
            var o = t._cache._length ? t._cache[--t._cache._length] : new t();
            return o._ib = i, o._vb = n, o.proName = r, o._startIdx = s * pt.BYTES_PIDX, o._numEle = 0,
                o.blendType = e._nBlendType, o.shaderValue = a, o.shaderValue.setValue(e._shader2D),
                o;
        }, t._cache = (t._cache = [], t._cache._length = 0, t._cache), t;
    }(), dt = function () {
        function t() {
            this._sourceStr = null;
        }
        s(t, "laya.webgl.text.CharSegment");
        var e = t.prototype;
        return i.imps(e, {
            "laya.webgl.text.ICharSegment": !0
        }), e.textToSpit = function (t) {
            this._sourceStr = t;
        }, e.getChar = function (t) {
            return this._sourceStr.charAt(t);
        }, e.getCharCode = function (t) {
            return this._sourceStr.charCodeAt(t);
        }, e.length = function () {
            return this._sourceStr.length;
        }, t;
    }(), _t = function () {
        function t() { }
        var e;
        return s(t, "laya.webgl.text.DrawText"), t.__init__ = function () {
            t._charsTemp = new Array(), t._drawValue = new e(), t._charSeg = new dt();
        }, t.customCharSeg = function (e) {
            t._charSeg = e;
        }, t.getChar = function (e, i, n) {
            var s = Yt.createOneChar(e, n);
            return -1 != i && (t._charsCache[i] = s), s;
        }, t._drawSlow = function (e, i, n, s, a, r, o, h, l, c, u, d, _, f, p) {
            var g, v, m = t._drawValue.value(r, h, l, c, _, f, p), y = 0, w = 0, x = t._charsTemp, b = 0, L = NaN;
            if (s) for (x.length = s.length, y = 0, w = s.length; y < w; y++) L = (v = s[y]).charNum + m.txtID,
                x[y] = g = t._charsCache[L] || t.getChar(v.char, L, m), g.active(); else {
                var C = n instanceof laya.utils.WordText ? n.toString() : n;
                if (D.CharacterCache) {
                    t._charSeg.textToSpit(C);
                    var M = t._charSeg.length();
                    for (x.length = M, y = 0, w = M; y < w; y++) L = t._charSeg.getCharCode(y) + m.txtID,
                        x[y] = g = t._charsCache[L] || t.getChar(t._charSeg.getChar(y), L, m), g.active(),
                        b += g.cw;
                } else x.length = 0, (g = t.getChar(C, -1, m)).active(), b += g.cw, x[0] = g;
            }
            var T = 0;
            null !== o && "left" !== o && (T = -("center" == o ? b / 2 : b));
            var S, A, I = NaN, E = 0;
            if (s) for (y = 0, w = x.length; y < w; y++) (g = x[y]).isSpace || (v = s[y], I = g.borderSize,
                S = g.texture, i._drawText(S, u + T + v.x * _ - I, d + v.y * f - I, S.width, S.height, a, 0, 0, 0, 0)); else {
                for (y = 0, w = x.length; y < w; y++) (g = x[y]).isSpace || (I = g.borderSize, S = g.texture,
                    i._drawText(S, u + T - I, d - I, S.width, S.height, a, 0, 0, 0, 0), e && ((A = e[E++]) || (A = e[E - 1] = []),
                        A[0] = S, A[1] = T - I, A[2] = -I)), T += g.cw;
                e && (e.length = E);
            }
        }, t._drawFast = function (t, e, i, n, s) {
            for (var a, r, o = 0, h = t.length; o < h; o++) (a = (r = t[o])[0]).active(), e._drawText(a, n + r[1], s + r[2], a.width, a.height, i, 0, 0, 0, 0);
        }, t.drawText = function (e, n, s, a, r, o, h, l, c, u, d, f) {
            if (void 0 === f && (f = 0), !(n && 0 === n.length || s && 0 === s.length)) {
                var p = a.a, g = a.d;
                (0 !== a.b || 0 !== a.c) && (p = g = 1);
                var v = 1 !== p || 1 !== g;
                if (v && i.stage.transform) {
                    var m = i.stage.transform;
                    v = m.a === p && m.d === g;
                } else v = !1;
                if (v) {
                    var y = (a = a.copyTo(Lt._tmpMatrix)).tx, w = a.ty;
                    a.scale(1 / p, 1 / g), a._checkTransform(), u *= p, d *= g, u += y - a.tx, d += w - a.ty;
                } else p = g = 1;
                if (s) t._drawSlow(null, e, n, s, a, r, o, h, l, c, u, d, p, g, f); else {
                    if (null === n.toUpperCase) {
                        var x = p + 1e5 * g, b = n;
                        return void (b.changed || b.id !== x ? (b.id = x, b.changed = !1, t._drawSlow(b.save, e, n, s, a, r, o, h, l, c, u, d, p, g, f)) : t._drawFast(b.save, e, a, u, d));
                    }
                    var L = n + r.toString() + h + l + c + p + g + o, C = t._textsCache[L];
                    D.CharacterCache ? C ? t._drawFast(C, e, a, u, d) : (t._textsCache.__length || (t._textsCache.__length = 0),
                        t._textsCache.__length > _.WebGLTextCacheCount && ((t._textsCache = {}).__length = 0,
                            t._curPoolIndex = 0), t._textCachesPool[t._curPoolIndex] ? (C = t._textsCache[L] = t._textCachesPool[t._curPoolIndex],
                                C.length = 0) : t._textCachesPool[t._curPoolIndex] = C = t._textsCache[L] = [],
                        t._textsCache.__length++, t._curPoolIndex++, t._drawSlow(C, e, n, s, a, r, o, h, l, c, u, d, p, g, f)) : t._drawSlow(C, e, n, s, a, r, o, h, l, c, u, d, p, g, f);
                }
            }
        }, t._charsTemp = null, t._textCachesPool = [], t._curPoolIndex = 0, t._charsCache = {},
            t._textsCache = {}, t._drawValue = null, t.d = [], t._charSeg = null, t.__init$ = function () {
                e = function () {
                    function t() { }
                    s(t, "");
                    return t.prototype.value = function (e, i, n, s, a, r, o) {
                        this.font = e, this.fillColor = i, this.borderColor = n, this.lineWidth = s, this.scaleX = a,
                            this.scaleY = r, this.underLine = o;
                        var h = e.toString() + a + r + s + i + n + o;
                        return this.txtID = t._keymap[h], this.txtID || (this.txtID = 1e-7 * ++t._keymapCount,
                            t._keymap[h] = this.txtID), this;
                    }, t.clear = function () {
                        t._keymap = {}, t._keymapCount = 1;
                    }, t._keymap = {}, t._keymapCount = 1, t;
                }();
            }, t;
    }(), ft = function () {
        function t(e) {
            this._index = 0, this._size = 14, this._italic = -2, t._cache2 = t._cache2 || [],
                this.setFont(e || "14px Arial");
        }
        s(t, "laya.webgl.text.FontInContext");
        var e = t.prototype;
        return e.setFont = function (e) {
            var i = t._cache2[e];
            if (i) this._words = i[0], this._size = i[1]; else {
                this._words = e.split(" ");
                for (var n = 0, s = this._words.length; n < s; n++) if (this._words[n].indexOf("px") > 0) {
                    this._index = n;
                    break;
                }
                this._size = parseInt(this._words[this._index]), t._cache2[e] = [this._words, this._size];
            }
            this._text = null, this._italic = -2;
        }, e.getItalic = function () {
            return -2 === this._italic && (this._italic = this.hasType("italic")), this._italic;
        }, e.hasType = function (t) {
            for (var e = 0, i = this._words.length; e < i; e++) if (this._words[e] === t) return e;
            return -1;
        }, e.removeType = function (t) {
            for (var e = 0, i = this._words.length; e < i; e++) if (this._words[e] === t) {
                this._words.splice(e, 1), this._index > e && this._index--;
                break;
            }
            this._text = null, this._italic = -2;
        }, e.copyTo = function (t) {
            return t._text = this._text, t._size = this._size, t._index = this._index, t._words = this._words.slice(),
                t._italic = -2, t;
        }, e.toString = function () {
            return this._text ? this._text : this._text = this._words.join(" ");
        }, a(0, e, "size", function () {
            return this._size;
        }, function (t) {
            this._size = t, this._words[this._index] = t + "px", this._text = null;
        }), t.create = function (e) {
            var i = t._cache[e];
            return i || (i = t._cache[e] = new t(e));
        }, t.EMPTY = new t(), t._cache = {}, t._cache2 = null, t;
    }(), pt = function () {
        function t() { }
        return s(t, "laya.webgl.utils.CONST3D2D"), t.defaultMatrix4 = [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1],
            t.defaultMinusYMatrix4 = [1, 0, 0, 0, 0, -1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1], t.uniformMatrix3 = [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0],
            t._TMPARRAY = [], t._OFFSETX = 0, t._OFFSETY = 0, n(t, ["BYTES_PE", function () {
                return this.BYTES_PE = Float32Array.BYTES_PER_ELEMENT;
            }, "BYTES_PIDX", function () {
                return this.BYTES_PIDX = Uint16Array.BYTES_PER_ELEMENT;
            }]), t;
    }(), gt = function () {
        function t() { }
        return s(t, "laya.webgl.utils.GlUtils"), t.make2DProjection = function (t, e, i) {
            return [2 / t, 0, 0, 0, 0, -2 / e, 0, 0, 0, 0, 2 / i, 0, -1, 1, 0, 1];
        }, t.fillIBQuadrangle = function (t, e) {
            if (e > 65535 / 4) throw Error("IBQuadrangle count:" + e + " must<:" + Math.floor(65535 / 4));
            e = Math.floor(e), t._resizeBuffer(6 * (e + 1) * 2, !1), t.byteLength = t.bufferLength;
            for (var i = t.getUint16Array(), n = 0, s = 0; s < e; s++) i[n++] = 4 * s, i[n++] = 4 * s + 2,
                i[n++] = 4 * s + 1, i[n++] = 4 * s, i[n++] = 4 * s + 3, i[n++] = 4 * s + 2;
            return t.setNeedUpload(), !0;
        }, t.expandIBQuadrangle = function (e, i) {
            e.bufferLength >= 6 * i * 2 || t.fillIBQuadrangle(e, i);
        }, t.mathCeilPowerOfTwo = function (t) {
            return t--, t |= t >> 1, t |= t >> 2, t |= t >> 4, t |= t >> 8, t |= t >> 16, ++t;
        }, t.fillQuadrangleImgVb = function (t, e, i, n, s, a, r, o) {
            var h = 16 + (t._byteLength >> 2);
            t.byteLength = h << 2;
            var l = t.getFloat32Array();
            l[(h -= 16) + 2] = s[0], l[h + 3] = s[1], l[h + 6] = s[2], l[h + 7] = s[3], l[h + 10] = s[4],
                l[h + 11] = s[5], l[h + 14] = s[6], l[h + 15] = s[7];
            var c = a.a, u = a.b, d = a.c, _ = a.d;
            if (1 !== c || 0 !== u || 0 !== d || 1 !== _) {
                a.bTransform = !0;
                var f = a.tx + r, p = a.ty + o;
                l[h] = (n[0] + e) * c + (n[1] + i) * d + f, l[h + 1] = (n[0] + e) * u + (n[1] + i) * _ + p,
                    l[h + 4] = (n[2] + e) * c + (n[3] + i) * d + f, l[h + 5] = (n[2] + e) * u + (n[3] + i) * _ + p,
                    l[h + 8] = (n[4] + e) * c + (n[5] + i) * d + f, l[h + 9] = (n[4] + e) * u + (n[5] + i) * _ + p,
                    l[h + 12] = (n[6] + e) * c + (n[7] + i) * d + f, l[h + 13] = (n[6] + e) * u + (n[7] + i) * _ + p;
            } else a.bTransform = !1, e += a.tx + r, i += a.ty + o, l[h] = e + n[0], l[h + 1] = i + n[1],
                l[h + 4] = e + n[2], l[h + 5] = i + n[3], l[h + 8] = e + n[4], l[h + 9] = i + n[5],
                l[h + 12] = e + n[6], l[h + 13] = i + n[7];
            return t._upload = !0, !0;
        }, t.fillTranglesVB = function (t, e, i, n, s, a, r) {
            var o = (t._byteLength >> 2) + n.length;
            t.byteLength = o << 2;
            var h = t.getFloat32Array();
            o -= n.length;
            for (var l = n.length, c = s.a, u = s.b, d = s.c, _ = s.d, f = 0; f < l; f += 4) if (h[o + f + 2] = n[f + 2],
                h[o + f + 3] = n[f + 3], 1 !== c || 0 !== u || 0 !== d || 1 !== _) {
                s.bTransform = !0;
                var p = s.tx + a, g = s.ty + r;
                h[o + f] = (n[f] + e) * c + (n[f + 1] + i) * d + p, h[o + f + 1] = (n[f] + e) * u + (n[f + 1] + i) * _ + g;
            } else s.bTransform = !1, e += s.tx + a, i += s.ty + r, h[o + f] = e + n[f], h[o + f + 1] = i + n[f + 1];
            return t._upload = !0, !0;
        }, t.copyPreImgVb = function (t, e, i) {
            var n = t._byteLength >> 2;
            t.byteLength = n + 16 << 2;
            for (var s = t.getFloat32Array(), a = 0, r = n - 16; a < 4; a++) s[n] = s[r] + e,
                ++r, s[++n] = s[r] + i, ++r, s[++n] = s[r], ++r, s[++n] = s[r], ++n, ++r;
            t._upload = !0;
        }, t.fillRectImgVb = function (t, e, i, n, s, a, r, o, h, l, c, u, d) {
            void 0 === d && (d = !1);
            var _, f, p, g, v, m, y, w, x, b, L, C, M, T, S, A, I = 1, E = o.a, R = o.b, P = o.c, D = o.d, k = e && e.width < 99999999;
            if (1 !== E || 0 !== R || 0 !== P || 1 !== D ? (o.bTransform = !0, 0 === R && 0 === P && (I = 23,
                x = s + i, b = a + n, _ = E * i + (L = o.tx + h), p = E * x + L, f = D * n + (C = o.ty + l),
                g = D * b + C)) : (I = 23, o.bTransform = !1, p = (_ = i + o.tx + h) + s, g = (f = n + o.ty + l) + a),
                k && (v = e.x, m = e.y, y = e.width + v, w = e.height + m), 1 !== I) {
                if (Math.min(_, p) >= y) return !1;
                if (Math.min(f, g) >= w) return !1;
                if (Math.max(p, _) <= v) return !1;
                if (Math.max(g, f) <= m) return !1;
            }
            var F = t._byteLength >> 2;
            t.byteLength = F + 16 << 2;
            var B = t.getFloat32Array();
            switch (B[F + 2] = r[0], B[F + 3] = r[1], B[F + 6] = r[2], B[F + 7] = r[3], B[F + 10] = r[4],
            B[F + 11] = r[5], B[F + 14] = r[6], B[F + 15] = r[7], I) {
                case 1:
                    L = o.tx + h, C = o.ty + l;
                    var O = E * i, N = P * n, G = D * n, H = R * i, z = E * (x = s + i), V = P * (b = a + n), U = D * b, W = R * x;
                    d ? (M = O + N + L, S = Math.round(M) - M, T = G + H + C, A = Math.round(T) - T,
                        B[F] = M + S, B[F + 1] = T + A, B[F + 4] = z + N + L + S, B[F + 5] = G + W + C + A,
                        B[F + 8] = z + V + L + S, B[F + 9] = U + W + C + A, B[F + 12] = O + V + L + S, B[F + 13] = U + H + C + A) : (B[F] = O + N + L,
                            B[F + 1] = G + H + C, B[F + 4] = z + N + L, B[F + 5] = G + W + C, B[F + 8] = z + V + L,
                            B[F + 9] = U + W + C, B[F + 12] = O + V + L, B[F + 13] = U + H + C);
                    break;

                case 23:
                    d ? (M = _ + c, S = Math.round(M) - M, T = f, A = Math.round(T) - T, B[F] = M + S,
                        B[F + 1] = T + A, B[F + 4] = p + c + S, B[F + 5] = f + A, B[F + 8] = p + S, B[F + 9] = g + A,
                        B[F + 12] = _ + S, B[F + 13] = g + A) : (B[F] = _ + c, B[F + 1] = f, B[F + 4] = p + c,
                            B[F + 5] = f, B[F + 8] = p, B[F + 9] = g, B[F + 12] = _, B[F + 13] = g);
            }
            return t._upload = !0, !0;
        }, t.fillLineVb = function (e, i, n, s, a, r, o, h) {
            var l = .5 * o, c = t._fillLineArray, u = -(s - r), d = n - a, _ = Math.sqrt(u * u + d * d);
            u /= _, d /= _, u *= l, d *= l, c[0] = n - u, c[1] = s - d, c[4] = n + u, c[5] = s + d,
                c[8] = a + u, c[9] = r + d, c[12] = a - u, c[13] = r - d, h && h.transformPointArray(c, c);
            var f = 16 + (e._byteLength >> 2);
            return e.byteLength = f << 2, e.insertData(c, f - 16), !0;
        }, t._fillLineArray = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], t;
    }(), vt = (function () {
        function t() { }
        s(t, "laya.webgl.utils.MatirxArray"), t.ArrayMul = function (e, i, n) {
            if (e) if (i) for (var s = NaN, a = NaN, r = NaN, o = NaN, h = 0; h < 4; h++) s = e[h],
                a = e[h + 4], r = e[h + 8], o = e[h + 12], n[h] = s * i[0] + a * i[1] + r * i[2] + o * i[3],
                n[h + 4] = s * i[4] + a * i[5] + r * i[6] + o * i[7], n[h + 8] = s * i[8] + a * i[9] + r * i[10] + o * i[11],
                n[h + 12] = s * i[12] + a * i[13] + r * i[14] + o * i[15]; else t.copyArray(e, n); else t.copyArray(i, n);
        }, t.copyArray = function (t, e) {
            if (t && e) for (var i = 0; i < t.length; i++) e[i] = t[i];
        };
    }(), function () {
        function t(t, e, i) {
            this._stride = 0, this.vertNum = 0, this.indexNum = 0, this._applied = !1, this._vb = null,
                this._ib = null, this._vao = null, this._attribInfo = null, this._quadNum = 0, this.canReuse = !1,
                this._stride = t, this._vb = new Jt(t, 35048), e && this._vb._resizeBuffer(e, !1),
                this._ib = new Zt(), i && this._ib._resizeBuffer(i, !1);
        }
        s(t, "laya.webgl.utils.Mesh2D");
        var e = t.prototype;
        return e.cloneWithNewVB = function () {
            var e = new t(this._stride, 0, 0);
            return e._ib = this._ib, e._quadNum = this._quadNum, e._attribInfo = this._attribInfo,
                e;
        }, e.cloneWithNewVBIB = function () {
            var e = new t(this._stride, 0, 0);
            return e._attribInfo = this._attribInfo, e;
        }, e.getVBW = function () {
            return this._vb.setNeedUpload(), this._vb;
        }, e.getVBR = function () {
            return this._vb;
        }, e.getIBR = function () {
            return this._ib;
        }, e.getIBW = function () {
            return this._ib.setNeedUpload(), this._ib;
        }, e.createQuadIB = function (t) {
            this._quadNum = t, this._ib._resizeBuffer(6 * t * 2, !1), this._ib.byteLength = this._ib.bufferLength;
            for (var e = this._ib.getUint16Array(), i = 0, n = 0, s = 0; s < t; s++) e[i++] = n,
                e[i++] = n + 2, e[i++] = n + 1, e[i++] = n, e[i++] = n + 3, e[i++] = n + 2, n += 4;
            this._ib.setNeedUpload();
        }, e.setAttributes = function (t) {
            if (this._attribInfo = t, this._attribInfo.length % 3 != 0) throw "Mesh2D setAttributes error!";
        }, e.getEleNum = function () {
            return this._ib.getBuffer().byteLength / 2;
        }, e.releaseMesh = function () { }, e.destroy = function () { }, e.clearVB = function () {
            this._vb.clear();
        }, t._gvaoid = 0, t;
    }()), mt = function () {
        function t() { }
        return s(t, "laya.webgl.utils.RenderState2D"), t.getMatrArray = function () {
            return [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1];
        }, t.mat2MatArray = function (e, i) {
            var n = e, s = i;
            return s[0] = n.a, s[1] = n.b, s[2] = t.EMPTYMAT4_ARRAY[2], s[3] = t.EMPTYMAT4_ARRAY[3],
                s[4] = n.c, s[5] = n.d, s[6] = t.EMPTYMAT4_ARRAY[6], s[7] = t.EMPTYMAT4_ARRAY[7],
                s[8] = t.EMPTYMAT4_ARRAY[8], s[9] = t.EMPTYMAT4_ARRAY[9], s[10] = t.EMPTYMAT4_ARRAY[10],
                s[11] = t.EMPTYMAT4_ARRAY[11], s[12] = n.tx, s[13] = n.ty, s[14] = t.EMPTYMAT4_ARRAY[14],
                s[15] = t.EMPTYMAT4_ARRAY[15], i;
        }, t.restoreTempArray = function () {
            t.TEMPMAT4_ARRAY[0] = 1, t.TEMPMAT4_ARRAY[1] = 0, t.TEMPMAT4_ARRAY[4] = 0, t.TEMPMAT4_ARRAY[5] = 1,
                t.TEMPMAT4_ARRAY[12] = 0, t.TEMPMAT4_ARRAY[13] = 0;
        }, t.clear = function () {
            t.worldScissorTest = !1, t.worldShaderDefines = null, t.worldFilters = null, t.worldAlpha = 1,
                t.worldClipRect.x = t.worldClipRect.y = 0, t.worldClipRect.width = t.width, t.worldClipRect.height = t.height,
                t.curRenderTarget = null;
        }, t._MAXSIZE = 99999999, t.EMPTYMAT4_ARRAY = [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1],
            t.TEMPMAT4_ARRAY = [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1], t.worldMatrix4 = t.TEMPMAT4_ARRAY,
            t.worldAlpha = 1, t.worldScissorTest = !1, t.worldFilters = null, t.worldShaderDefines = null,
            t.curRenderTarget = null, t.width = 0, t.height = 0, n(t, ["worldMatrix", function () {
                return this.worldMatrix = new w();
            }, "worldClipRect", function () {
                return this.worldClipRect = new b(0, 0, 99999999, 99999999);
            }]), t;
    }(), yt = function () {
        function t(t, i, n, s, a) {
            function r(t) {
                var i = [], n = new e(i);
                return o._compileToTree(n, t.split("\n"), 0, i, a), n;
            }
            var o = this, h = c.now();
            this._VS = r(i), this._PS = r(n), this._nameMap = s, c.now() - h > 2 && console.log("ShaderCompile use time:" + (c.now() - h) + "  size:" + i.length + "/" + n.length);
        }
        var e, i;
        s(t, "laya.webgl.utils.ShaderCompile");
        var a = t.prototype;
        return a._compileToTree = function (i, n, s, a, r) {
            var o, h, l, c, u, d, _, f = 0, p = 0, g = 0, v = 0;
            for (p = s; p < n.length; p++) if (!((l = n[p]).length < 1) && 0 !== (f = l.indexOf("//"))) {
                if (f >= 0 && (l = l.substr(0, f)), o = _ || new e(a), _ = null, o.text = l, o.noCompile = !0,
                    (f = l.indexOf("#")) >= 0) {
                    for (c = "#", v = f + 1, g = l.length; v < g; v++) {
                        var m = l.charAt(v);
                        if (" " === m || "\t" === m || "?" === m) break;
                        c += m;
                    }
                    switch (o.name = c, c) {
                        case "#ifdef":
                        case "#ifndef":
                            if (o.src = l, o.noCompile = null != l.match(/[!&|()=<>]/), o.noCompile ? console.log("function():Boolean{return " + l.substr(f + o.name.length) + "}") : (d = l.replace(/^\s*/, "").split(/\s+/),
                                o.setCondition(d[1], "#ifdef" === c ? 1 : 2), o.text = "//" + o.text), o.setParent(i),
                                i = o, r) for (d = l.substr(v).split(t._splitToWordExps3), v = 0; v < d.length; v++) (l = d[v]).length && (r[l] = !0);
                            continue;

                        case "#if":
                            if (o.src = l, o.noCompile = !0, o.setParent(i), i = o, r) for (d = l.substr(v).split(t._splitToWordExps3),
                                v = 0; v < d.length; v++) (l = d[v]).length && "defined" != l && (r[l] = !0);
                            continue;

                        case "#else":
                            o.src = l, h = (i = i.parent).childs[i.childs.length - 1], o.noCompile = h.noCompile,
                                o.noCompile || (o.condition = h.condition, o.conditionType = 1 == h.conditionType ? 2 : 1,
                                    o.text = "//" + o.text + " " + h.text + " " + o.conditionType), o.setParent(i),
                                i = o;
                            continue;

                        case "#endif":
                            h = (i = i.parent).childs[i.childs.length - 1], o.noCompile = h.noCompile, o.noCompile || (o.text = "//" + o.text),
                                o.setParent(i);
                            continue;

                        case "#include":
                            d = t.splitToWords(l, null);
                            var y = t.includes[d[1]];
                            if (!y) throw "ShaderCompile error no this include file:" + d[1];
                            if ((f = d[0].indexOf("?")) < 0) {
                                o.setParent(i), l = y.getWith("with" == d[2] ? d[3] : null), this._compileToTree(o, l.split("\n"), 0, a, r),
                                    o.text = "";
                                continue;
                            }
                            o.setCondition(d[0].substr(f + 1), 1), o.text = y.getWith("with" == d[2] ? d[3] : null);
                            break;

                        case "#import":
                            u = (d = t.splitToWords(l, null))[1], a.push({
                                node: o,
                                file: t.includes[u],
                                ofs: o.text.length
                            });
                            continue;
                    }
                } else {
                    if ((h = i.childs[i.childs.length - 1]) && !h.name) {
                        a.length > 0 && t.splitToWords(l, h), _ = o, h.text += "\n" + l;
                        continue;
                    }
                    a.length > 0 && t.splitToWords(l, o);
                }
                o.setParent(i);
            }
        }, a.createShader = function (t, e, i) {
            var n = {}, s = "";
            if (t) for (var a in t) s += "#define " + a + "\n", n[a] = !0;
            var r = this._VS.toscript(n, []), o = this._PS.toscript(n, []);
            return (i || jt.create)(s + r.join("\n"), s + o.join("\n"), e, this._nameMap);
        }, t._parseOne = function (e, i, n, s, a, r) {
            var o = {
                type: t.shaderParamsMap[n[s + 1]],
                name: n[s + 2],
                size: isNaN(parseInt(n[s + 3])) ? 1 : parseInt(n[s + 3])
            };
            return r && ("attribute" == a ? e.push(o) : i.push(o)), ":" == n[s + 3] && (o.type = n[s + 4],
                s += 2), s += 2;
        }, t.addInclude = function (e, n) {
            if (!n || 0 === n.length) throw new Error("add shader include file err:" + e);
            if (t.includes[e]) throw new Error("add shader include file err, has add:" + e);
            t.includes[e] = new i(n);
        }, t.preGetParams = function (e, i) {
            var n = [e, i], s = {}, a = [], r = [], o = {}, h = [];
            s.attributes = a, s.uniforms = r, s.defines = o;
            for (var l = 0, c = 0, u = 0; u < 2; u++) {
                n[u] = n[u].replace(t._removeAnnotation, "");
                var d, _ = n[u].match(t._reg);
                for (l = 0, c = _.length; l < c; l++) {
                    var f = _[l];
                    if ("attribute" == f || "uniform" == f) l = t._parseOne(a, r, _, l, f, !0); else {
                        if ("#define" == f) {
                            h[f = _[++l]] = 1;
                            continue;
                        }
                        if ("#ifdef" == f) {
                            o[d = _[++l]] = o[d] || [];
                            for (l++; l < c; l++) if ("attribute" == (f = _[l]) || "uniform" == f) l = t._parseOne(a, r, _, l, f, h[d]); else if ("#else" == f) for (l++; l < c; l++) if ("attribute" == (f = _[l]) || "uniform" == f) l = t._parseOne(a, r, _, l, f, !h[d]); else if ("#endif" == f) break;
                        }
                    }
                }
            }
            return s;
        }, t.splitToWords = function (t, e) {
            for (var i, n, s = [], a = -1, r = 0, o = t.length; r < o; r++) if (i = t.charAt(r),
                " \t=+-*/&%!<>()'\",;".indexOf(i) >= 0) {
                if (a >= 0 && r - a > 1 && (n = t.substr(a, r - a), s.push(n)), '"' == i || "'" == i) {
                    var h = t.indexOf(i, r + 1);
                    if (h < 0) throw "Sharder err:" + t;
                    s.push(t.substr(r + 1, h - r - 1)), r = h, a = -1;
                    continue;
                }
                "(" == i && e && s.length > 0 && (n = s[s.length - 1] + ";", "vec4;main;".indexOf(n) < 0 && (e.useFuns += n)),
                    a = -1;
            } else a < 0 && (a = r);
            return a < o && o - a > 1 && (n = t.substr(a, o - a), s.push(n)), s;
        }, t.IFDEF_NO = 0, t.IFDEF_YES = 1, t.IFDEF_ELSE = 2, t.IFDEF_PARENT = 3, t._removeAnnotation = new RegExp("(/\\*([^*]|[\\r\\\n]|(\\*+([^*/]|[\\r\\n])))*\\*+/)|(//.*)", "g"),
            t._reg = new RegExp("(\".*\")|('.*')|([#\\w\\*-\\.+/()=<>{}\\\\]+)|([,;:\\\\])", "g"),
            t._splitToWordExps = new RegExp("[(\".*\")]+|[('.*')]+|([ \\t=\\+\\-*/&%!<>!%(),;])", "g"),
            t.includes = {}, n(t, ["shaderParamsMap", function () {
                return this.shaderParamsMap = {
                    float: 5126,
                    int: 5124,
                    bool: 35670,
                    vec2: 35664,
                    vec3: 35665,
                    vec4: 35666,
                    ivec2: 35667,
                    ivec3: 35668,
                    ivec4: 35669,
                    bvec2: 35671,
                    bvec3: 35672,
                    bvec4: 35673,
                    mat2: 35674,
                    mat3: 35675,
                    mat4: 35676,
                    sampler2D: 35678,
                    samplerCube: 35680
                };
            }, "_splitToWordExps3", function () {
                return this._splitToWordExps3 = new RegExp("[ \\t=\\+\\-*/&%!<>!%(),;\\|]", "g");
            }]), t.__init$ = function () {
                e = function () {
                    function t(t) {
                        this.childs = [], this.text = "", this.parent = null, this.name = null, this.noCompile = !1,
                            this.includefiles = null, this.condition = null, this.conditionType = 0, this.useFuns = "",
                            this.z = 0, this.src = null, this.includefiles = t;
                    }
                    s(t, "");
                    var e = t.prototype;
                    return e.setParent = function (t) {
                        t.childs.push(this), this.z = t.z + 1, this.parent = t;
                    }, e.setCondition = function (t, e) {
                        t && (this.conditionType = e, t = t.replace(/(\s*$)/g, ""), this.condition = function () {
                            return this[t];
                        }, this.condition.__condition = t);
                    }, e.toscript = function (e, i) {
                        return this._toscript(e, i, ++t.__id);
                    }, e._toscript = function (t, e, i) {
                        if (this.childs.length < 1 && !this.text) return e;
                        e.length;
                        if (this.condition) {
                            var n = !!this.condition.call(t);
                            if (2 === this.conditionType && (n = !n), !n) return e;
                        }
                        if (this.text && e.push(this.text), this.childs.length > 0 && this.childs.forEach(function (n, s, a) {
                            n._toscript(t, e, i);
                        }), this.includefiles.length > 0 && this.useFuns.length > 0) for (var s, a = 0, r = this.includefiles.length; a < r; a++) this.includefiles[a].curUseID != i && (s = this.includefiles[a].file.getFunsScript(this.useFuns)).length > 0 && (this.includefiles[a].curUseID = i,
                            e[0] = s + e[0]);
                        return e;
                    }, t.__id = 1, t;
                }(), i = function () {
                    function e(e) {
                        this.script = null, this.codes = {}, this.funs = {}, this.curUseID = -1, this.funnames = "",
                            this.script = e;
                        for (var i = 0, n = 0, s = 0; ;) {
                            if ((i = e.indexOf("#begin", i)) < 0) break;
                            for (s = i + 5; ;) {
                                if ((s = e.indexOf("#end", s)) < 0) break;
                                if ("i" !== e.charAt(s + 4)) break;
                                s += 5;
                            }
                            if (s < 0) throw "add include err,no #end:" + e;
                            n = e.indexOf("\n", i);
                            var a = t.splitToWords(e.substr(i, n - i), null);
                            "code" == a[1] ? this.codes[a[2]] = e.substr(n + 1, s - n - 1) : "function" == a[1] && (n = e.indexOf("function", i),
                                n += "function".length, this.funs[a[3]] = e.substr(n + 1, s - n - 1), this.funnames += a[3] + ";"),
                                i = s + 1;
                        }
                    }
                    s(e, "");
                    var i = e.prototype;
                    return i.getWith = function (t) {
                        var e = t ? this.codes[t] : this.script;
                        if (!e) throw "get with error:" + t;
                        return e;
                    }, i.getFunsScript = function (t) {
                        var e = "";
                        for (var i in this.funs) t.indexOf(i + ";") >= 0 && (e += this.funs[i]);
                        return e;
                    }, e;
                }();
            }, t;
    }(), wt = function () {
        function t() { }
        return s(t, "laya.webgl.WebGL"), t._uint8ArraySlice = function () {
            for (var t = this.length, e = new Uint8Array(this.length), i = 0; i < t; i++) e[i] = this[i];
            return e;
        }, t._float32ArraySlice = function () {
            for (var t = this.length, e = new Float32Array(this.length), i = 0; i < t; i++) e[i] = this[i];
            return e;
        }, t._uint16ArraySlice = function (t) {
            var e, i = arguments, n = 0, s = 0;
            if (0 === i.length) for (n = this.length, e = new Uint16Array(n), s = 0; s < n; s++) e[s] = this[s]; else if (2 === i.length) {
                var a = i[0], r = i[1];
                if (r > a) for (n = r - a, e = new Uint16Array(n), s = a; s < r; s++) e[s - a] = this[s]; else e = new Uint16Array(0);
            }
            return e;
        }, t.expandContext = function () {
            var t = f.prototype, e = CanvasRenderingContext2D.prototype;
            e.fillTrangles = t.fillTrangles, qt.__int__(null), e.setIBVB = function (t, e, i, n, s, a, r, o, h, l) {
                void 0 === h && (h = 0), void 0 === l && (l = 0), null === i && (this._ib = this._ib || Zt.QuadrangleIB,
                    i = this._ib, gt.expandIBQuadrangle(i, n._byteLength / 64 + 8)), this._setIBVB(t, e, i, n, s, a, r, o, h, l);
            }, e.fillTrangles = function (t, e, i, n, s) {
                this._curMat = this._curMat || w.create(), this._vb = this._vb || Jt.create(), this._ib || (this._ib = Zt.create(),
                    gt.fillIBQuadrangle(this._ib, r / 4));
                var a = this._vb, r = n.length >> 4;
                gt.fillTranglesVB(a, e, i, n, s || this._curMat, 0, 0), gt.expandIBQuadrangle(this._ib, a._byteLength / 64 + 8);
                var o = new Ct(1, 0);
                o.textureHost = t;
                var h = new Qt("attribute vec2 position; attribute vec2 texcoord; uniform vec2 size; uniform mat4 mmat; varying vec2 v_texcoord; void main() { vec4 p=vec4(position.xy,0.0,1.0);vec4 pos=mmat*p; gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0); v_texcoord = texcoord; }", "precision mediump float; varying vec2 v_texcoord; uniform sampler2D texture; void main() {vec4 color= texture2D(texture, v_texcoord); color.a*=1.0; gl_FragColor= color;}");
                a._vertType = 3, this._setIBVB(e, i, this._ib, a, 6 * r, s, h, o, 0, 0);
            };
        }, t.enable = function () {
            if (c.__init__(), L.isConchApp && !L.isConchWebGL) return S.skinAniSprite = function () {
                return new tt();
            }, t.expandContext(), !1;
            if (S.getWebGLContext = function (t) {
                for (var e, i = ["webgl", "experimental-webgl", "webkit-3d", "moz-webgl"], n = 0; n < i.length; n++) {
                    try {
                        e = t.getContext(i[n], {
                            stencil: _.isStencil,
                            alpha: _.isAlpha,
                            antialias: _.isAntialias,
                            premultipliedAlpha: _.premultipliedAlpha,
                            preserveDrawingBuffer: _.preserveDrawingBuffer
                        });
                    } catch (t) { }
                    if (e) return e;
                }
                return null;
            }, null == (t.mainContext = S.getWebGLContext(L._mainCanvas))) return !1;
            if (L.isWebGL) return !0;
            m.create = function (t, e) {
                return new te(t, e);
            }, y.create = function (t, e, i, n, s, a, r) {
                return new Kt(t, e, i, n, s, a, r);
            }, L.WebGL = t, L.isWebGL = !0, _t.__init__(), S.createRenderSprite = function (t, e) {
                return new Mt(t, e);
            }, S.createWebGLContext2D = function (t) {
                return new Lt(t);
            }, S.changeWebGLSize = function (t, e) {
                laya.webgl.WebGL.onStageResize(t, e);
            }, S.createGraphics = function () {
                return new bt();
            };
            var e = S.createFilterAction;
            return S.createFilterAction = e || function (t) {
                return new Tt();
            }, S.clear = function (t) {
                mt.worldScissorTest && laya.webgl.WebGL.mainContext.disable(3089);
                var e = L.context.ctx, i = 0 == e._submits._length || _.preserveDrawingBuffer ? d.create(t)._color : I._wgColor;
                i && e.clearBG(i[0], i[1], i[2], i[3]), mt.clear();
            }, S.addToAtlas = function (t, e) {
                void 0 === e && (e = !1);
                var n = t.bitmap;
                L.optimizeTextureMemory(t.url, t) ? i.__typeof(n, "laya.webgl.resource.IMergeAtlasBitmap") && n.allowMerageInAtlas && n.on("recovered", t, t.addTextureToAtlas) : n.enableMerageInAtlas = !1;
            }, S.isAtlas = function (t) {
                return t instanceof laya.webgl.atlas.AtlasWebGLCanvas;
            }, H._enable(), S.beginFlush = function () {
                for (var t = H.instance, e = t.getAtlaserCount(), i = 0; i < e; i++) {
                    var n = t.getAtlaserByIndex(i).texture;
                    n._flashCacheImageNeedFlush && S.flashFlushImage(n);
                }
            }, S.drawToCanvas = function (t, e, i, n, s, a) {
                (i <= 0 || n <= 0) && console.log("[error] canvasWidth and canvasHeight should greater than zero"),
                    i |= 0, n |= 0, s |= 0, a |= 0;
                var r = Bt.create(i, n, 6408, 5121, 0, !1);
                r.start(), r.clear(0, 0, 0, 0), L.context.clear(), C.renders[e]._fun(t, L.context, s, mt.height - n + a),
                    L.context.flush(), r.end();
                var o = r.getData(0, 0, i, n);
                if (r.recycle(), o.byteLength == i * n * 4) {
                    var h = new Wt();
                    h._canvas = c.createElement("canvas"), h.size(i, n);
                    var l = h._canvas.getContext("2d");
                    c.canvas.size(i, n);
                    var u = c.context, d = u.createImageData(i, n);
                    return d.data.set(new Uint8ClampedArray(o.buffer)), h._imgData = d, u.putImageData(d, 0, 0),
                        l.save(), l.translate(0, n), l.scale(1, -1), l.drawImage(c.canvas.source, 0, 0),
                        l.restore(), h;
                }
                console.log("drawToCanvas error: w:" + i + ",h:" + n + ",datalen:" + o.byteLength);
            }, S.createFilterAction = function (t) {
                var e;
                switch (t) {
                    case 32:
                        e = new Tt();
                }
                return e;
            }, S.addTextureToAtlas = function (t) {
                t._uvID++, H._atlasRestore++, t.bitmap.enableMerageInAtlas && H.instance.addToAtlas(t);
            }, S.getTexturePixels = function (t, e, i, n, s) {
                L.context.ctx.clear();
                var a = new A();
                a.graphics.drawTexture(t, -e, -i);
                var r = Bt.create(n, s);
                r.start(), r.clear(0, 0, 0, 0), a.render(L.context, 0, 0), L.context.ctx.flush(),
                    r.end();
                for (var o = r.getData(0, 0, n, s), h = [], l = 0, c = s - 1; c >= 0; c--) for (var u = 0; u < n; u++) l = 4 * (c * n + u),
                    h.push(o[l]), h.push(o[l + 1]), h.push(o[l + 2]), h.push(o[l + 3]);
                return h;
            }, S.skinAniSprite = function () {
                return new tt();
            }, v.create = function (t, e) {
                var i = new Wt();
                return i._imgData = e, i.flipY = !1, i;
            }, p._filterStart = function (t, e, i, n, s) {
                var a = t.getValue("bounds"), r = Bt.create(a.width, a.height);
                if (r.start(), r.clear(0, 0, 0, 0), t.addValue("src", r), t.addValue("ScissorTest", mt.worldScissorTest),
                    mt.worldScissorTest) {
                    var o = new b();
                    o.copyFrom(i.ctx._clipRect), t.addValue("clipRect", o), mt.worldScissorTest = !1,
                        laya.webgl.WebGL.mainContext.disable(3089);
                }
            }, p._filterEnd = function (t, e, i, n, s) {
                var a = t.getValue("bounds");
                t.getValue("src").end();
                var r = Bt.create(a.width, a.height);
                r.start(), r.clear(0, 0, 0, 0), t.addValue("out", r), e._set$P("_filterCache", r),
                    e._set$P("_isHaveGlowFilter", t.getValue("_isHaveGlowFilter"));
            }, p._EndTarget = function (t, e) {
                t.getValue("src").recycle();
                t.getValue("out").end();
                if (t.getValue("ScissorTest")) {
                    mt.worldScissorTest = !0, laya.webgl.WebGL.mainContext.enable(3089), e.ctx.save();
                    var i = t.getValue("clipRect");
                    e.ctx.clipRect(i.x, i.y, i.width, i.height);
                }
            }, p._useSrc = function (t) {
                var e = t.getValue("out");
                e.end(), (e = t.getValue("src")).start(), e.clear(0, 0, 0, 0);
            }, p._endSrc = function (t) {
                t.getValue("src").end();
            }, p._useOut = function (t) {
                var e = t.getValue("src");
                e.end(), (e = t.getValue("out")).start(), e.clear(0, 0, 0, 0);
            }, p._endOut = function (t) {
                t.getValue("out").end();
            }, p._recycleScope = function (t) {
                t.recycle();
            }, p._filter = function (t, e, i, n) {
                var s = this._next;
                if (s) {
                    var a = t.filters, r = a.length;
                    if (1 == r && 32 == a[0].type) return e.ctx.save(), e.ctx.setFilters([a[0]]),
                        s._fun.call(s, t, e, i, n), void e.ctx.restore();
                    var o, h, l = ot.create(), c = x.TEMP, u = e.ctx._getTransformMatrix(), d = w.create();
                    u.copyTo(d);
                    var _ = 0, f = 0, g = !1, v = t._$P._filterCache ? t._$P._filterCache : null;
                    if (!v || t._repaint) {
                        g = t._isHaveGlowFilter(), l.addValue("_isHaveGlowFilter", g), g && (_ = 50, f = 25),
                            (h = new b()).copyFrom(t.getSelfBounds()), h.x += t.x, h.y += t.y, h.x -= t.pivotX + 4,
                            h.y -= t.pivotY + 4;
                        var m = h.x, y = h.y;
                        if (h.width += _ + 8, h.height += _ + 8, c.x = h.x * d.a + h.y * d.c, c.y = h.y * d.d + h.x * d.b,
                            h.x = c.x, h.y = c.y, c.x = h.width * d.a + h.height * d.c, c.y = h.height * d.d + h.width * d.b,
                            h.width = c.x, h.height = c.y, h.width <= 0 || h.height <= 0) return;
                        v && v.recycle(), l.addValue("bounds", h);
                        var L = rt.create([l, t, e, 0, 0], p._filterStart);
                        e.addRenderObject(L), e.ctx._renderKey = 0, e.ctx._shader2D.glTexture = null;
                        var C = t.x - m + f, M = t.y - y + f;
                        s._fun.call(s, t, e, C, M), L = rt.create([l, t, e, 0, 0], p._filterEnd), e.addRenderObject(L);
                        for (var T = 0; T < r; T++) {
                            0 != T && (L = rt.create([l], p._useSrc), e.addRenderObject(L), o = Ct.create(1, 0),
                                w.TEMP.identity(), e.ctx.drawTarget(l, 0, 0, h.width, h.height, w.TEMP, "out", o, null, V.TOINT.overlay),
                                L = rt.create([l], p._useOut), e.addRenderObject(L));
                            a[T].action.apply3d(l, t, e, 0, 0);
                        }
                        L = rt.create([l, e], p._EndTarget), e.addRenderObject(L);
                    } else {
                        if ((g = !!t._$P._isHaveGlowFilter && t._$P._isHaveGlowFilter) && (_ = 50, f = 25),
                            (h = t.getBounds()).width <= 0 || h.height <= 0) return;
                        h.width += _, h.height += _, c.x = h.x * d.a + h.y * d.c, c.y = h.y * d.d + h.x * d.b,
                            h.x = c.x, h.y = c.y, c.x = h.width * d.a + h.height * d.c, c.y = h.height * d.d + h.width * d.b,
                            h.width = c.x, h.height = c.y, l.addValue("out", v);
                    }
                    i = i - f - t.x, n = n - f - t.y, c.setTo(i, n), d.transformPoint(c), i = c.x + h.x,
                        n = c.y + h.y, o = Ct.create(1, 0), w.TEMP.identity(), e.ctx.drawTarget(l, i, n, h.width, h.height, w.TEMP, "out", o, null, V.TOINT.overlay),
                        L = rt.create([l], p._recycleScope), e.addRenderObject(L), d.destroy();
                }
            }, Float32Array.prototype.slice || (Float32Array.prototype.slice = t._float32ArraySlice),
                Uint16Array.prototype.slice || (Uint16Array.prototype.slice = t._uint16ArraySlice),
                Uint8Array.prototype.slice || (Uint8Array.prototype.slice = t._uint8ArraySlice),
                !0;
        }, t.onStageResize = function (e, i) {
            null != t.mainContext && (t.mainContext.viewport(0, 0, e, i), mt.width = e, mt.height = i);
        }, t.onInvalidGLRes = function () {
            H.instance.freeAll(), T.releaseContentManagers(!0), t.doNodeRepaint(i.stage), t.mainContext.viewport(0, 0, mt.width, mt.height),
                i.stage.event("devicelost");
        }, t.doNodeRepaint = function (e) {
            0 == e.numChildren && e.repaint();
            for (var i = 0; i < e.numChildren; i++) t.doNodeRepaint(e.getChildAt(i));
        }, t.init = function (e, i, n) {
            t.mainCanvas = e, v._createContext = function (t) {
                return new Lt(t);
            }, Wt._createContext = function (t) {
                return new Lt(t);
            };
            var s = laya.webgl.WebGL.mainContext;
            if (null != s.getShaderPrecisionFormat) {
                var a = s.getShaderPrecisionFormat(35633, 36338), r = s.getShaderPrecisionFormat(35632, 36338);
                t.shaderHighPrecision = !(!a.precision || !r.precision);
            } else t.shaderHighPrecision = !1;
            if (t.compressAstc = s.getExtension("WEBGL_compressed_texture_astc"), t.compressAtc = s.getExtension("WEBGL_compressed_texture_atc"),
                t.compressEtc = s.getExtension("WEBGL_compressed_texture_etc"), t.compressEtc1 = s.getExtension("WEBGL_compressed_texture_etc1"),
                t.compressPvrtc = s.getExtension("WEBGL_compressed_texture_pvrtc"), t.compressS3tc = s.getExtension("WEBGL_compressed_texture_s3tc"),
                t.compressS3tc_srgb = s.getExtension("WEBGL_compressed_texture_s3tc_srgb"), s.deleteTexture1 = s.deleteTexture,
                s.deleteTexture = function (t) {
                    t == xt.curBindTexValue && (xt.curBindTexValue = null), s.deleteTexture1(t);
                }, t.onStageResize(i, n), null == t.mainContext) throw new Error("webGL getContext err!");
            P.__init__(), H.__init__(), At.__init__(), at.__init__(), Lt.__init__(), Ct.__init__(),
                Z.__init__(), qt.__int__(s), V._init_(s), L.isConchApp && conch.setOnInvalidGLRes(t.onInvalidGLRes);
        }, t.compressAstc = null, t.compressAtc = null, t.compressEtc = null, t.compressEtc1 = null,
            t.compressPvrtc = null, t.compressS3tc = null, t.compressS3tc_srgb = null, t.mainCanvas = null,
            t.mainContext = null, t.antialias = !0, t.shaderHighPrecision = !1, t._bg_null = [0, 0, 0, 0],
            t;
    }(), xt = function () {
        function t() { }
        return s(t, "laya.webgl.WebGLContext"), t.UseProgram = function (e) {
            return t._useProgram !== e && (wt.mainContext.useProgram(e), t._useProgram = e,
                !0);
        }, t.setDepthTest = function (e, i) {
            i !== t._depthTest && (t._depthTest = i, i ? e.enable(2929) : e.disable(2929));
        }, t.setDepthMask = function (e, i) {
            i !== t._depthMask && (t._depthMask = i, e.depthMask(i));
        }, t.setDepthFunc = function (e, i) {
            i !== t._depthFunc && (t._depthFunc = i, e.depthFunc(i));
        }, t.setBlend = function (e, i) {
            i !== t._blend && (t._blend = i, i ? e.enable(3042) : e.disable(3042));
        }, t.setBlendFunc = function (e, i, n) {
            (i !== t._sFactor || n !== t._dFactor) && (t._sFactor = i, t._dFactor = n, e.blendFunc(i, n));
        }, t.setCullFace = function (e, i) {
            i !== t._cullFace && (t._cullFace = i, i ? e.enable(2884) : e.disable(2884));
        }, t.setFrontFace = function (e, i) {
            i !== t._frontFace && (t._frontFace = i, e.frontFace(i));
        }, t.bindTexture = function (e, i, n) {
            e.bindTexture(i, n), t.curBindTexTarget = i, t.curBindTexValue = n;
        }, t.DEPTH_BUFFER_BIT = 256, t.STENCIL_BUFFER_BIT = 1024, t.COLOR_BUFFER_BIT = 16384,
            t.POINTS = 0, t.LINES = 1, t.LINE_LOOP = 2, t.LINE_STRIP = 3, t.TRIANGLES = 4, t.TRIANGLE_STRIP = 5,
            t.TRIANGLE_FAN = 6, t.ZERO = 0, t.ONE = 1, t.SRC_COLOR = 768, t.ONE_MINUS_SRC_COLOR = 769,
            t.SRC_ALPHA = 770, t.ONE_MINUS_SRC_ALPHA = 771, t.DST_ALPHA = 772, t.ONE_MINUS_DST_ALPHA = 773,
            t.DST_COLOR = 774, t.ONE_MINUS_DST_COLOR = 775, t.SRC_ALPHA_SATURATE = 776, t.FUNC_ADD = 32774,
            t.BLEND_EQUATION = 32777, t.BLEND_EQUATION_RGB = 32777, t.BLEND_EQUATION_ALPHA = 34877,
            t.FUNC_SUBTRACT = 32778, t.FUNC_REVERSE_SUBTRACT = 32779, t.BLEND_DST_RGB = 32968,
            t.BLEND_SRC_RGB = 32969, t.BLEND_DST_ALPHA = 32970, t.BLEND_SRC_ALPHA = 32971, t.CONSTANT_COLOR = 32769,
            t.ONE_MINUS_CONSTANT_COLOR = 32770, t.CONSTANT_ALPHA = 32771, t.ONE_MINUS_CONSTANT_ALPHA = 32772,
            t.BLEND_COLOR = 32773, t.ARRAY_BUFFER = 34962, t.ELEMENT_ARRAY_BUFFER = 34963, t.ARRAY_BUFFER_BINDING = 34964,
            t.ELEMENT_ARRAY_BUFFER_BINDING = 34965, t.STREAM_DRAW = 35040, t.STATIC_DRAW = 35044,
            t.DYNAMIC_DRAW = 35048, t.BUFFER_SIZE = 34660, t.BUFFER_USAGE = 34661, t.CURRENT_VERTEX_ATTRIB = 34342,
            t.FRONT = 1028, t.BACK = 1029, t.CULL_FACE = 2884, t.FRONT_AND_BACK = 1032, t.BLEND = 3042,
            t.DITHER = 3024, t.STENCIL_TEST = 2960, t.DEPTH_TEST = 2929, t.SCISSOR_TEST = 3089,
            t.POLYGON_OFFSET_FILL = 32823, t.SAMPLE_ALPHA_TO_COVERAGE = 32926, t.SAMPLE_COVERAGE = 32928,
            t.NO_ERROR = 0, t.INVALID_ENUM = 1280, t.INVALID_VALUE = 1281, t.INVALID_OPERATION = 1282,
            t.OUT_OF_MEMORY = 1285, t.CW = 2304, t.CCW = 2305, t.LINE_WIDTH = 2849, t.ALIASED_POINT_SIZE_RANGE = 33901,
            t.ALIASED_LINE_WIDTH_RANGE = 33902, t.CULL_FACE_MODE = 2885, t.FRONT_FACE = 2886,
            t.DEPTH_RANGE = 2928, t.DEPTH_WRITEMASK = 2930, t.DEPTH_CLEAR_VALUE = 2931, t.DEPTH_FUNC = 2932,
            t.STENCIL_CLEAR_VALUE = 2961, t.STENCIL_FUNC = 2962, t.STENCIL_FAIL = 2964, t.STENCIL_PASS_DEPTH_FAIL = 2965,
            t.STENCIL_PASS_DEPTH_PASS = 2966, t.STENCIL_REF = 2967, t.STENCIL_VALUE_MASK = 2963,
            t.STENCIL_WRITEMASK = 2968, t.STENCIL_BACK_FUNC = 34816, t.STENCIL_BACK_FAIL = 34817,
            t.STENCIL_BACK_PASS_DEPTH_FAIL = 34818, t.STENCIL_BACK_PASS_DEPTH_PASS = 34819,
            t.STENCIL_BACK_REF = 36003, t.STENCIL_BACK_VALUE_MASK = 36004, t.STENCIL_BACK_WRITEMASK = 36005,
            t.VIEWPORT = 2978, t.SCISSOR_BOX = 3088, t.COLOR_CLEAR_VALUE = 3106, t.COLOR_WRITEMASK = 3107,
            t.UNPACK_ALIGNMENT = 3317, t.PACK_ALIGNMENT = 3333, t.MAX_TEXTURE_SIZE = 3379, t.MAX_VIEWPORT_DIMS = 3386,
            t.SUBPIXEL_BITS = 3408, t.RED_BITS = 3410, t.GREEN_BITS = 3411, t.BLUE_BITS = 3412,
            t.ALPHA_BITS = 3413, t.DEPTH_BITS = 3414, t.STENCIL_BITS = 3415, t.POLYGON_OFFSET_UNITS = 10752,
            t.POLYGON_OFFSET_FACTOR = 32824, t.TEXTURE_BINDING_2D = 32873, t.SAMPLE_BUFFERS = 32936,
            t.SAMPLES = 32937, t.SAMPLE_COVERAGE_VALUE = 32938, t.SAMPLE_COVERAGE_INVERT = 32939,
            t.NUM_COMPRESSED_TEXTURE_FORMATS = 34466, t.COMPRESSED_TEXTURE_FORMATS = 34467,
            t.DONT_CARE = 4352, t.FASTEST = 4353, t.NICEST = 4354, t.GENERATE_MIPMAP_HINT = 33170,
            t.BYTE = 5120, t.UNSIGNED_BYTE = 5121, t.SHORT = 5122, t.UNSIGNED_SHORT = 5123,
            t.INT = 5124, t.UNSIGNED_INT = 5125, t.FLOAT = 5126, t.DEPTH_COMPONENT = 6402, t.ALPHA = 6406,
            t.RGB = 6407, t.RGBA = 6408, t.LUMINANCE = 6409, t.LUMINANCE_ALPHA = 6410, t.UNSIGNED_SHORT_4_4_4_4 = 32819,
            t.UNSIGNED_SHORT_5_5_5_1 = 32820, t.UNSIGNED_SHORT_5_6_5 = 33635, t.FRAGMENT_SHADER = 35632,
            t.VERTEX_SHADER = 35633, t.MAX_VERTEX_ATTRIBS = 34921, t.MAX_VERTEX_UNIFORM_VECTORS = 36347,
            t.MAX_VARYING_VECTORS = 36348, t.MAX_COMBINED_TEXTURE_IMAGE_UNITS = 35661, t.MAX_VERTEX_TEXTURE_IMAGE_UNITS = 35660,
            t.MAX_TEXTURE_IMAGE_UNITS = 34930, t.MAX_FRAGMENT_UNIFORM_VECTORS = 36349, t.SHADER_TYPE = 35663,
            t.DELETE_STATUS = 35712, t.LINK_STATUS = 35714, t.VALIDATE_STATUS = 35715, t.ATTACHED_SHADERS = 35717,
            t.ACTIVE_UNIFORMS = 35718, t.ACTIVE_ATTRIBUTES = 35721, t.SHADING_LANGUAGE_VERSION = 35724,
            t.CURRENT_PROGRAM = 35725, t.NEVER = 512, t.LESS = 513, t.EQUAL = 514, t.LEQUAL = 515,
            t.GREATER = 516, t.NOTEQUAL = 517, t.GEQUAL = 518, t.ALWAYS = 519, t.KEEP = 7680,
            t.REPLACE = 7681, t.INCR = 7682, t.DECR = 7683, t.INVERT = 5386, t.INCR_WRAP = 34055,
            t.DECR_WRAP = 34056, t.VENDOR = 7936, t.RENDERER = 7937, t.VERSION = 7938, t.NEAREST = 9728,
            t.LINEAR = 9729, t.NEAREST_MIPMAP_NEAREST = 9984, t.LINEAR_MIPMAP_NEAREST = 9985,
            t.NEAREST_MIPMAP_LINEAR = 9986, t.LINEAR_MIPMAP_LINEAR = 9987, t.TEXTURE_MAG_FILTER = 10240,
            t.TEXTURE_MIN_FILTER = 10241, t.TEXTURE_WRAP_S = 10242, t.TEXTURE_WRAP_T = 10243,
            t.TEXTURE_2D = 3553, t.TEXTURE = 5890, t.TEXTURE_CUBE_MAP = 34067, t.TEXTURE_BINDING_CUBE_MAP = 34068,
            t.TEXTURE_CUBE_MAP_POSITIVE_X = 34069, t.TEXTURE_CUBE_MAP_NEGATIVE_X = 34070, t.TEXTURE_CUBE_MAP_POSITIVE_Y = 34071,
            t.TEXTURE_CUBE_MAP_NEGATIVE_Y = 34072, t.TEXTURE_CUBE_MAP_POSITIVE_Z = 34073, t.TEXTURE_CUBE_MAP_NEGATIVE_Z = 34074,
            t.MAX_CUBE_MAP_TEXTURE_SIZE = 34076, t.TEXTURE0 = 33984, t.TEXTURE1 = 33985, t.TEXTURE2 = 33986,
            t.TEXTURE3 = 33987, t.TEXTURE4 = 33988, t.TEXTURE5 = 33989, t.TEXTURE6 = 33990,
            t.TEXTURE7 = 33991, t.TEXTURE8 = 33992, t.TEXTURE9 = 33993, t.TEXTURE10 = 33994,
            t.TEXTURE11 = 33995, t.TEXTURE12 = 33996, t.TEXTURE13 = 33997, t.TEXTURE14 = 33998,
            t.TEXTURE15 = 33999, t.TEXTURE16 = 34e3, t.TEXTURE17 = 34001, t.TEXTURE18 = 34002,
            t.TEXTURE19 = 34003, t.TEXTURE20 = 34004, t.TEXTURE21 = 34005, t.TEXTURE22 = 34006,
            t.TEXTURE23 = 34007, t.TEXTURE24 = 34008, t.TEXTURE25 = 34009, t.TEXTURE26 = 34010,
            t.TEXTURE27 = 34011, t.TEXTURE28 = 34012, t.TEXTURE29 = 34013, t.TEXTURE30 = 34014,
            t.TEXTURE31 = 34015, t.ACTIVE_TEXTURE = 34016, t.REPEAT = 10497, t.CLAMP_TO_EDGE = 33071,
            t.MIRRORED_REPEAT = 33648, t.FLOAT_VEC2 = 35664, t.FLOAT_VEC3 = 35665, t.FLOAT_VEC4 = 35666,
            t.INT_VEC2 = 35667, t.INT_VEC3 = 35668, t.INT_VEC4 = 35669, t.BOOL = 35670, t.BOOL_VEC2 = 35671,
            t.BOOL_VEC3 = 35672, t.BOOL_VEC4 = 35673, t.FLOAT_MAT2 = 35674, t.FLOAT_MAT3 = 35675,
            t.FLOAT_MAT4 = 35676, t.SAMPLER_2D = 35678, t.SAMPLER_CUBE = 35680, t.VERTEX_ATTRIB_ARRAY_ENABLED = 34338,
            t.VERTEX_ATTRIB_ARRAY_SIZE = 34339, t.VERTEX_ATTRIB_ARRAY_STRIDE = 34340, t.VERTEX_ATTRIB_ARRAY_TYPE = 34341,
            t.VERTEX_ATTRIB_ARRAY_NORMALIZED = 34922, t.VERTEX_ATTRIB_ARRAY_POINTER = 34373,
            t.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING = 34975, t.COMPILE_STATUS = 35713, t.LOW_FLOAT = 36336,
            t.MEDIUM_FLOAT = 36337, t.HIGH_FLOAT = 36338, t.LOW_INT = 36339, t.MEDIUM_INT = 36340,
            t.HIGH_INT = 36341, t.FRAMEBUFFER = 36160, t.RENDERBUFFER = 36161, t.RGBA4 = 32854,
            t.RGB5_A1 = 32855, t.RGB565 = 36194, t.DEPTH_COMPONENT16 = 33189, t.STENCIL_INDEX = 6401,
            t.STENCIL_INDEX8 = 36168, t.DEPTH_STENCIL = 34041, t.RENDERBUFFER_WIDTH = 36162,
            t.RENDERBUFFER_HEIGHT = 36163, t.RENDERBUFFER_INTERNAL_FORMAT = 36164, t.RENDERBUFFER_RED_SIZE = 36176,
            t.RENDERBUFFER_GREEN_SIZE = 36177, t.RENDERBUFFER_BLUE_SIZE = 36178, t.RENDERBUFFER_ALPHA_SIZE = 36179,
            t.RENDERBUFFER_DEPTH_SIZE = 36180, t.RENDERBUFFER_STENCIL_SIZE = 36181, t.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE = 36048,
            t.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME = 36049, t.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL = 36050,
            t.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE = 36051, t.COLOR_ATTACHMENT0 = 36064,
            t.DEPTH_ATTACHMENT = 36096, t.STENCIL_ATTACHMENT = 36128, t.DEPTH_STENCIL_ATTACHMENT = 33306,
            t.NONE = 0, t.FRAMEBUFFER_COMPLETE = 36053, t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT = 36054,
            t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT = 36055, t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS = 36057,
            t.FRAMEBUFFER_UNSUPPORTED = 36061, t.FRAMEBUFFER_BINDING = 36006, t.RENDERBUFFER_BINDING = 36007,
            t.MAX_RENDERBUFFER_SIZE = 34024, t.INVALID_FRAMEBUFFER_OPERATION = 1286, t.UNPACK_FLIP_Y_WEBGL = 37440,
            t.UNPACK_PREMULTIPLY_ALPHA_WEBGL = 37441, t.CONTEXT_LOST_WEBGL = 37442, t.UNPACK_COLORSPACE_CONVERSION_WEBGL = 37443,
            t.BROWSER_DEFAULT_WEBGL = 37444, t._useProgram = null, t._depthTest = !0, t._depthMask = !0,
            t._blend = !1, t._cullFace = !1, t.curBindTexTarget = null, t.curBindTexValue = null,
            n(t, ["_depthFunc", function () {
                return this._depthFunc = 513;
            }, "_sFactor", function () {
                return this._sFactor = 1;
            }, "_dFactor", function () {
                return this._dFactor = 0;
            }, "_frontFace", function () {
                return this._frontFace = 2305;
            }]), t;
    }(), bt = function (t) {
        function e() {
            e.__super.call(this);
        }
        s(e, "laya.webgl.display.GraphicsGL", g);
        var i = e.prototype;
        return i.setShader = function (t) {
            this._saveToCmd(L.context._setShader, [t]);
        }, i.setIBVB = function (t, e, i, n, s, a) {
            this._saveToCmd(L.context._setIBVB, [t, e, i, n, s, a]);
        }, i.drawParticle = function (t, e, i) {
            var n = S.createParticleTemplate2D(i);
            n.x = t, n.y = e, this._saveToCmd(L.context._drawParticle, [n]);
        }, e;
    }(), Lt = function (t) {
        function e(t) {
            this._x = 0, this._y = 0, this._id = ++e._COUNT, this._path = null, this._drawCount = 1,
                this._maxNumEle = 0, this._clear = !1, this._isMain = !1, this._atlasResourceChange = 0,
                this._submits = null, this._curSubmit = null, this._ib = null, this._vb = null,
                this._nBlendType = 0, this._saveMark = null, this._shader2D = null, this.meshlist = [],
                this.mId = -1, this.mHaveKey = !1, this.mHaveLineKey = !1, this.mX = 0, this.mY = 0,
                e.__super.call(this), this._width = 99999999, this._height = 99999999, this._clipRect = e.MAXCLIPRECT,
                this.mOutPoint, this._canvas = t, e._contextcount++, L.isFlash ? (this._ib = Zt.create(35044),
                    gt.fillIBQuadrangle(this._ib, 16)) : this._ib = Zt.QuadrangleIB, this.clear();
        }
        var r;
        s(e, "laya.webgl.canvas.WebGLContext2D", f);
        var o = e.prototype;
        return o.setIsMainContext = function () {
            this._isMain = !0;
        }, o.clearBG = function (t, e, i, n) {
            var s = wt.mainContext;
            s.clearColor(t, e, i, n), s.clear(16384);
        }, o._getSubmits = function () {
            return this._submits;
        }, o._releaseMem = function () {
            if (this._submits) {
                this._curMat.destroy(), this._curMat = null, this._shader2D.destroy(), this._shader2D = null;
                for (var t = 0, e = this._submits._length; t < e; t++) this._submits[t].releaseRender();
                this._submits.length = 0, this._submits._length = 0, this._submits = null, this._curSubmit = null,
                    this._path && this._path.recover(), this._path = null, this._other && (this._other.font = null),
                    this._save = null, this._vb && (this._vb.releaseResource(), this._vb.destroy(),
                        this._vb.destory(), this._vb = null);
            }
        }, o.destroy = function () {
            --e._contextcount, this.sprite = null, this._releaseMem(), this._targets && this._targets.destroy(),
                this._targets = null, this._canvas = null, this._ib && this._ib != Zt.QuadrangleIB && this._ib.releaseResource();
        }, o.clear = function () {
            this._submits || (this._other = r.DEFAULT, this._curMat = w.create(), this._vb = Jt.create(-1),
                this._submits = [], this._save = [j.Create(this)], this._save.length = 10, this._shader2D = new Z(),
                this._triangleMesh = kt.getAMesh()), this._vb.clear(), this._targets && (this._targets.repaint = !0),
                this._other = r.DEFAULT, this._clear = !0, this._repaint = !1, this._drawCount = 1,
                this._renderKey = 0, this._other.lineWidth = this._shader2D.ALPHA = 1, this._nBlendType = 0,
                this._clipRect = e.MAXCLIPRECT, this._curSubmit = at.RENDERBASE, this._shader2D.glTexture = null,
                this._shader2D.fillStyle = this._shader2D.strokeStyle = U.DEFAULT;
            for (var t = 0, i = this._submits._length; t < i; t++) this._submits[t].releaseRender();
            this._submits._length = 0, this._curMat.identity(), this._other.clear(), this._saveMark = this._save[0],
                this._save._length = 1;
        }, o.size = function (t, e) {
            if (this._width != t || this._height != e) if (0 == t || 0 == e) {
                0 != this._vb._byteLength && (this._width = t, this._height = e, this._vb.clear(),
                    this._vb.upload());
                for (var i = 0, n = this._submits._length; i < n; i++) this._submits[i].releaseRender();
                this._submits.length = 0, this._submits._length = 0, this._curSubmit = null, this._path && this._path.recover(),
                    this._path = null, this.sprite = null, this._targets && this._targets.destroy(),
                    this._targets = null;
            } else this._width = t, this._height = e, this._targets && this._targets.size(t, e),
                this._canvas.memorySize -= this._canvas.memorySize;
            0 === t && 0 === e && this._releaseMem();
        }, o._getTransformMatrix = function () {
            return this._curMat;
        }, o.translate = function (t, e) {
            0 === t && 0 === e || ($.save(this), this._curMat.bTransform && (q.save(this), this._curMat.transformPointN(x.TEMP.setTo(t, e)),
                t = x.TEMP.x, e = x.TEMP.y), this._x += t, this._y += e);
        }, o.save = function () {
            this._save[this._save._length++] = j.Create(this);
        }, o.restore = function () {
            var t = this._save._length;
            if (!(t < 1)) for (var e = t - 1; e >= 0; e--) {
                var i = this._save[e];
                if (i.restore(this), i.isSaveMark()) return void (this._save._length = e);
            }
        }, o._fillText = function (t, e, i, n, s, a, r, o, h, l) {
            void 0 === l && (l = 0);
            var c = this._shader2D, u = this._curSubmit.shaderValue, _ = s ? ft.create(s) : this._other.font;
            if (H.enabled) c.ALPHA !== u.ALPHA && (c.glTexture = null), _t.drawText(this, t, e, this._curMat, _, h || this._other.textAlign, a, r, o, i, n, l); else {
                this._shader2D.defines.getValue();
                var f = a ? d.create(a)._color : c.colorAdd;
                c.ALPHA === u.ALPHA && f === c.colorAdd && u.colorAdd === c.colorAdd || (c.glTexture = null,
                    c.colorAdd = f), _t.drawText(this, t, e, this._curMat, _, h || this._other.textAlign, a, r, o, i, n, l);
            }
        }, o.fillWords = function (t, e, i, n, s, a) {
            this._fillText(null, t, e, i, n, s, null, -1, null, a);
        }, o.fillBorderWords = function (t, e, i, n, s, a, r) {
            this._fillBorderText(null, t, e, i, n, s, a, r, null);
        }, o.fillText = function (t, e, i, n, s, a) {
            this._fillText(t, null, e, i, n, s, null, -1, a);
        }, o.strokeText = function (t, e, i, n, s, a, r) {
            this._fillText(t, null, e, i, n, null, s, a || 1, r);
        }, o.fillBorderText = function (t, e, i, n, s, a, r, o) {
            this._fillBorderText(t, null, e, i, n, s, a, r, o);
        }, o._fillBorderText = function (t, i, n, s, a, r, o, h, l) {
            if (!H.enabled) return this._fillText(t, i, n, s, a, null, o, h || 1, l), void this._fillText(t, i, n, s, a, r, null, -1, l);
            var c = this._shader2D, u = this._curSubmit.shaderValue;
            c.ALPHA !== u.ALPHA && (c.glTexture = null);
            var d = a ? (e._fontTemp.setFont(a), e._fontTemp) : this._other.font;
            _t.drawText(this, t, i, this._curMat, d, l || this._other.textAlign, r, o, h || 1, n, s, 0);
        }, o.fillRect = function (t, e, i, n, s) {
            var a = this._vb;
            if (gt.fillRectImgVb(a, this._clipRect, t, e, i, n, k.DEF_UV, this._curMat, this._x, this._y, 0, 0)) {
                this._renderKey = 0;
                var r = this._shader2D.fillStyle;
                s && (this._shader2D.fillStyle = U.create(s));
                var o = this._shader2D, h = this._curSubmit.shaderValue;
                if (o.fillStyle !== h.fillStyle || o.ALPHA !== h.ALPHA) {
                    o.glTexture = null;
                    var l = this._curSubmit = at.createSubmit(this, this._ib, a, (a._byteLength - 64) / 32 * 3, Ct.create(2, 0));
                    l.shaderValue.color = o.fillStyle._color._color, l.shaderValue.ALPHA = o.ALPHA,
                        this._submits[this._submits._length++] = l;
                }
                this._curSubmit._numEle += 6, this._shader2D.fillStyle = r;
            }
        }, o.fillTexture = function (t, e, n, s, a, r, o, h) {
            if (t.loaded && t.bitmap && t.source) {
                var l = this._vb, c = t.bitmap.width, u = t.bitmap.height, d = t.uv, _ = o.x % t.width, f = o.y % t.height;
                if (c != h.w || u != h.h) {
                    if (!h.w && !h.h) switch (h.oy = h.ox = 0, r) {
                        case "repeat":
                            h.width = s, h.height = a;
                            break;

                        case "repeat-x":
                            h.width = s, f < 0 ? t.height + f > a ? h.height = a : h.height = t.height + f : (h.oy = f,
                                t.height + f > a ? h.height = a - f : h.height = t.height);
                            break;

                        case "repeat-y":
                            _ < 0 ? t.width + _ > s ? h.width = s : h.width = t.width + _ : (h.ox = _, t.width + _ > s ? h.width = s - _ : h.width = t.width),
                                h.height = a;
                            break;

                        case "no-repeat":
                            _ < 0 ? t.width + _ > s ? h.width = s : h.width = t.width + _ : (h.ox = _, t.width + _ > s ? h.width = s - _ : h.width = t.width),
                                f < 0 ? t.height + f > a ? h.height = a : h.height = t.height + f : (h.oy = f, t.height + f > a ? h.height = a - f : h.height = t.height);
                            break;

                        default:
                            h.width = s, h.height = a;
                    }
                    h.w = c, h.h = u, h.uv = [0, 0, h.width / c, 0, h.width / c, h.height / u, 0, h.height / u];
                }
                if (e += h.ox, n += h.oy, _ -= h.ox, f -= h.oy, gt.fillRectImgVb(l, this._clipRect, e, n, h.width, h.height, h.uv, this._curMat, this._x, this._y, 0, 0)) {
                    this._renderKey = 0;
                    var p = Dt.create(this, this._ib, l, (l._byteLength - 64) / 32 * 3, Ct.create(256, 0));
                    this._submits[this._submits._length++] = p;
                    var g = p.shaderValue;
                    g.textureHost = t;
                    var v = d[0] * c, m = d[1] * u, y = (d[2] - d[0]) * c, w = (d[5] - d[3]) * u, x = -_ / c, b = -f / u;
                    g.u_TexRange[0] = v / c, g.u_TexRange[1] = y / c, g.u_TexRange[2] = m / u, g.u_TexRange[3] = w / u,
                        g.u_offset[0] = x, g.u_offset[1] = b, H.enabled && !this._isMain && p.addTexture(t, (l._byteLength >> 2) - 16),
                        this._curSubmit = p, p._renderType = 10017, p._numEle += 6;
                }
            } else this.sprite && i.timer.callLater(this, this._repaintSprite);
        }, o.setShader = function (t) {
            Y.save(this, 1048576, this._shader2D, !0), this._shader2D.shader = t;
        }, o.setFilters = function (t) {
            Y.save(this, 2097152, this._shader2D, !0), this._shader2D.filters = t, this._curSubmit = at.RENDERBASE,
                this._renderKey = 0, this._drawCount++;
        }, o.drawTexture = function (t, e, i, n, s, a, r) {
            this._drawTextureM(t, e, i, n, s, a, r, null, 1);
        }, o.addTextureVb = function (t, e, i) {
            var n = this._curSubmit._vb || this._vb, s = n._byteLength >> 2;
            n.byteLength = s + 16 << 2;
            for (var a = n.getFloat32Array(), r = 0; r < 16; r += 4) a[s++] = t[r] + e, a[s++] = t[r + 1] + i,
                a[s++] = t[r + 2], a[s++] = t[r + 3];
            this._curSubmit._numEle += 6, this._maxNumEle = Math.max(this._maxNumEle, this._curSubmit._numEle),
                n._upload = !0;
        }, o.willDrawTexture = function (t, e) {
            if (!(t.loaded && t.bitmap && t.source)) return this.sprite && i.timer.callLater(this, this._repaintSprite),
                0;
            var n = t.bitmap, s = n.id + this._shader2D.ALPHA * e + 10016;
            if (s == this._renderKey) return s;
            var a = this._shader2D, r = a.ALPHA, o = this._curSubmit.shaderValue;
            a.ALPHA *= e, this._renderKey = s, this._drawCount++, a.glTexture = n;
            var h = this._vb, l = null, c = h._byteLength / 32 * 3;
            return l = Dt.create(this, this._ib, h, c, Ct.create(1, 0)), this._submits[this._submits._length++] = l,
                l.shaderValue.textureHost = t, l._renderType = 10016, l._preIsSameTextureShader = 10016 === this._curSubmit._renderType && a.ALPHA === o.ALPHA,
                this._curSubmit = l, a.ALPHA = r, s;
        }, o.drawTextures = function (t, n, s, a) {
            if (t.loaded && t.bitmap && t.source) {
                var r = this._clipRect;
                if (this._clipRect = e.MAXCLIPRECT, this._drawTextureM(t, n[0], n[1], t.width, t.height, s, a, null, 1)) {
                    if (this._clipRect = r, E.drawCall++, !(n.length < 4)) {
                        for (var o = this._curSubmit._vb || this._vb, h = this._curMat.a, l = this._curMat.d, c = 2, u = n.length; c < u; c += 2) gt.copyPreImgVb(o, (n[c] - n[c - 2]) * h, (n[c + 1] - n[c - 1]) * l),
                            this._curSubmit._numEle += 6;
                        this._maxNumEle = Math.max(this._maxNumEle, this._curSubmit._numEle);
                    }
                } else alert("drawTextures err");
            } else this.sprite && i.timer.callLater(this, this._repaintSprite);
        }, o._drawTextureM = function (t, e, n, s, a, r, o, h, l) {
            if (!t.loaded || !t.source) return this.sprite && i.timer.callLater(this, this._repaintSprite),
                !1;
            var c = this._curSubmit._vb || this._vb, u = t.bitmap;
            e += r, n += o, this._drawCount++;
            var d = u.id + this._shader2D.ALPHA * l + 10016;
            if (d != this._renderKey) {
                this._renderKey = d;
                var _ = this._curSubmit.shaderValue, f = this._shader2D, p = f.ALPHA;
                f.ALPHA *= l, f.glTexture = u;
                var g = this._vb, v = null, m = g._byteLength / 32 * 3;
                v = Dt.create(this, this._ib, g, m, Ct.create(1, 0)), this._submits[this._submits._length++] = v,
                    v.shaderValue.textureHost = t, v._renderType = 10016, v._preIsSameTextureShader = 10016 === this._curSubmit._renderType && f.ALPHA === _.ALPHA,
                    this._curSubmit = v, c = this._curSubmit._vb || this._vb, f.ALPHA = p;
            }
            return !!gt.fillRectImgVb(c, this._clipRect, e, n, s || t.width, a || t.height, t.uv, h || this._curMat, this._x, this._y, 0, 0) && (H.enabled && !this._isMain && this._curSubmit.addTexture(t, (c._byteLength >> 2) - 16),
                this._curSubmit._numEle += 6, this._maxNumEle = Math.max(this._maxNumEle, this._curSubmit._numEle),
                !0);
        }, o._repaintSprite = function () {
            this.sprite && this.sprite.repaint();
        }, o._drawText = function (t, e, i, n, s, a, r, o, h, l) {
            var c = t.bitmap;
            this._drawCount++;
            var u = c.id + this._shader2D.ALPHA + 10016;
            if (u != this._renderKey) {
                this._renderKey = u;
                var d = this._curSubmit.shaderValue, _ = this._shader2D;
                _.glTexture = c;
                var f = this._vb, p = null, g = f._byteLength / 32 * 3;
                (p = H.enabled ? Dt.create(this, this._ib, f, g, Ct.create(1, 0)) : Dt.create(this, this._ib, f, g, $t.create()))._preIsSameTextureShader = 10016 === this._curSubmit._renderType && _.ALPHA === d.ALPHA,
                    this._submits[this._submits._length++] = p, p.shaderValue.textureHost = t, p._renderType = 10016,
                    this._curSubmit = p;
            }
            t.active();
            var v = this._curSubmit._vb || this._vb;
            gt.fillRectImgVb(v, this._clipRect, e + r, i + o, n || t.width, s || t.height, t.uv, a || this._curMat, this._x, this._y, h, l, !0) && (H.enabled && !this._isMain && this._curSubmit.addTexture(t, (v._byteLength >> 2) - 16),
                this._curSubmit._numEle += 6, this._maxNumEle = Math.max(this._maxNumEle, this._curSubmit._numEle));
        }, o.drawTextureWithTransform = function (t, i, n, s, a, r, o, h, l) {
            if (r) {
                var c = this._curMat, u = this._x, d = this._y;
                (0 !== o || 0 !== h) && (this._x = o * c.a + h * c.c, this._y = h * c.d + o * c.b),
                    r && c.bTransform ? (w.mul(r, c, e._tmpMatrix), (r = e._tmpMatrix)._checkTransform()) : (this._x += c.tx,
                        this._y += c.ty), this._drawTextureM(t, i, n, s, a, 0, 0, r, l), this._x = u, this._y = d;
            } else this._drawTextureM(t, i, n, s, a, o, h, null, l);
        }, o.fillQuadrangle = function (t, e, i, n, s) {
            var a = this._curSubmit, r = this._vb, o = this._shader2D, h = a.shaderValue;
            if (this._renderKey = 0, t.bitmap) {
                var l = t.bitmap;
                o.glTexture == l && o.ALPHA === h.ALPHA || (o.glTexture = l, (a = this._curSubmit = at.createSubmit(this, this._ib, r, r._byteLength / 32 * 3, Ct.create(1, 0))).shaderValue.glTexture = l,
                    this._submits[this._submits._length++] = a), gt.fillQuadrangleImgVb(r, e, i, n, t.uv, s || this._curMat, this._x, this._y);
            } else a.shaderValue.fillStyle && a.shaderValue.fillStyle.equal(t) && o.ALPHA === h.ALPHA || (o.glTexture = null,
                (a = this._curSubmit = at.createSubmit(this, this._ib, r, r._byteLength / 32 * 3, Ct.create(2, 0))).shaderValue.defines.add(2),
                a.shaderValue.fillStyle = U.create(t), this._submits[this._submits._length++] = a),
                gt.fillQuadrangleImgVb(r, e, i, n, k.DEF_UV, s || this._curMat, this._x, this._y);
            a._numEle += 6;
        }, o.drawTexture2 = function (t, i, n, s, a, r, o, h) {
            if (0 != r) {
                var l = this._curMat;
                if (this._x = t * l.a + i * l.c, this._y = i * l.d + t * l.b, a && (l.bTransform || a.bTransform ? (w.mul(a, l, e._tmpMatrix),
                    a = e._tmpMatrix) : (this._x += a.tx + l.tx, this._y += a.ty + l.ty, a = w.EMPTY)),
                    1 !== r || o) {
                    var c = this._shader2D.ALPHA, u = this._nBlendType;
                    this._shader2D.ALPHA = r, o && (this._nBlendType = V.TOINT(o)), this._drawTextureM(h[0], h[1] - n, h[2] - s, h[3], h[4], 0, 0, a, 1),
                        this._shader2D.ALPHA = c, this._nBlendType = u;
                } else this._drawTextureM(h[0], h[1] - n, h[2] - s, h[3], h[4], 0, 0, a, 1);
                this._x = this._y = 0;
            }
        }, o.drawCanvas = function (t, e, i, n, s) {
            var a = t.context;
            if (this._renderKey = 0, a._targets) this._submits[this._submits._length++] = Pt.create(a, 0, null),
                this._curSubmit = at.RENDERBASE, a._targets.drawTo(this, e, i, n, s); else {
                var r = this._submits[this._submits._length++] = Pt.create(a, this._shader2D.ALPHA, this._shader2D.filters), o = n / t.width, h = s / t.height, l = r._matrix;
                this._curMat.copyTo(l), 1 != o && 1 != h && l.scale(o, h);
                var c = l.tx, u = l.ty;
                l.tx = l.ty = 0, l.transformPoint(x.TEMP.setTo(e, i)), l.translate(x.TEMP.x + c, x.TEMP.y + u),
                    this._curSubmit = at.RENDERBASE;
            }
            _.showCanvasMark && (this.save(), this.lineWidth = 4, this.strokeStyle = a._targets ? "yellow" : "green",
                this.strokeRect(e - 1, i - 1, n + 2, s + 2, 1), this.strokeRect(e, i, n, s, 1),
                this.restore());
        }, o.drawTarget = function (t, e, i, n, s, a, r, o, h, l) {
            void 0 === l && (l = -1);
            var c = this._vb;
            if (gt.fillRectImgVb(c, this._clipRect, e, i, n, s, h || k.DEF_UV, a || this._curMat, this._x, this._y, 0, 0)) {
                this._renderKey = 0;
                this._shader2D.glTexture = null;
                this._curSubmit.shaderValue;
                var u = this._curSubmit = ut.create(this, this._ib, c, (c._byteLength - 64) / 32 * 3, o, r);
                u.blendType = -1 == l ? this._nBlendType : l, u.scope = t, this._submits[this._submits._length++] = u,
                    this._curSubmit._numEle += 6;
            }
        }, o.mixRGBandAlpha = function (t) {
            return this._mixRGBandAlpha(t, this._shader2D.ALPHA);
        }, o._mixRGBandAlpha = function (t, e) {
            var i = (4278190080 & t) >>> 24;
            return 0 != i ? i *= e : i = 255 * e, 16777215 & t | i << 24;
        }, o.drawTriangles = function (t, n, s, a, r, o, h, l, c, u) {
            if (!t.loaded || !t.source) return this.sprite && i.timer.callLater(this, this._repaintSprite),
                !1;
            this._drawCount++;
            t.bitmap;
            var d = this._mixRGBandAlpha(4294967295, l), _ = (a.length, o.length);
            this._renderKey = -1;
            var f = this._curSubmit = Dt.create(this, this._triangleMesh.getIBR(), this._triangleMesh.getVBR(), this._triangleMesh.indexNum, Ct.create(1, 0));
            return f.shaderValue.textureHost = t, f._renderType = 10016, this._submits[this._submits._length++] = f,
                h ? (e._tmpMatrix.a = h.a, e._tmpMatrix.b = h.b, e._tmpMatrix.c = h.c, e._tmpMatrix.d = h.d,
                    e._tmpMatrix.tx = h.tx + n, e._tmpMatrix.ty = h.ty + s, w.mul(e._tmpMatrix, this._curMat, e._tmpMatrix)) : (e._tmpMatrix.a = this._curMat.a,
                        e._tmpMatrix.b = this._curMat.b, e._tmpMatrix.c = this._curMat.c, e._tmpMatrix.d = this._curMat.d,
                        e._tmpMatrix.tx = this._curMat.tx + n, e._tmpMatrix.ty = this._curMat.ty + s), this._triangleMesh.addData(a, r, o, e._tmpMatrix, d, this),
                this._curSubmit._numEle += _, this._maxNumEle = Math.max(this._maxNumEle, this._curSubmit._numEle),
                !0;
        }, o.transform = function (t, e, i, n, s, a) {
            q.save(this), w.mul(w.TEMP.setTo(t, e, i, n, s, a), this._curMat, this._curMat),
                this._curMat._checkTransform();
        }, o.setTransformByMatrix = function (t) {
            t.copyTo(this._curMat);
        }, o.transformByMatrix = function (t) {
            q.save(this), w.mul(t, this._curMat, this._curMat), this._curMat._checkTransform();
        }, o.rotate = function (t) {
            q.save(this), this._curMat.rotateEx(t);
        }, o.scale = function (t, e) {
            q.save(this), this._curMat.scaleEx(t, e);
        }, o.clipRect = function (t, e, i, n) {
            if (0 != this._curMat.b || 0 != this._curMat.c) {
                this._renderKey = 0;
                var s = ct.create(4);
                this.addRenderObject(s);
                var a = this._vb, r = a._byteLength >> 2;
                if (gt.fillRectImgVb(a, null, t, e, i, n, k.DEF_UV, this._curMat, this._x, this._y, 0, 0)) {
                    this._shader2D.glTexture = null;
                    var o = this._curSubmit = at.createSubmit(this, this._ib, a, (a._byteLength - 64) / 32 * 3, Ct.create(2, 0));
                    o.shaderValue.ALPHA = 1, this._submits[this._submits._length++] = o, this._curSubmit._numEle += 6;
                } else alert("clipRect calc stencil rect error");
                var h = ct.create(5);
                this.addRenderObject(h);
                var l = a.getFloat32Array(), c = Math.min(Math.min(Math.min(l[r + 0], l[r + 4]), l[r + 8]), l[r + 12]), u = Math.max(Math.max(Math.max(l[r + 0], l[r + 4]), l[r + 8]), l[r + 12]), d = Math.min(Math.min(Math.min(l[r + 1], l[r + 5]), l[r + 9]), l[r + 13]), _ = Math.max(Math.max(Math.max(l[r + 1], l[r + 5]), l[r + 9]), l[r + 13]);
                K.save(this, h, t, e, i, n, c, d, u - c, _ - d), this._curSubmit = at.RENDERBASE;
            } else {
                i *= this._curMat.a, n *= this._curMat.d;
                var f = x.TEMP;
                this._curMat.transformPoint(f.setTo(t, e)), i < 0 && (f.x = f.x + i, i = -i), n < 0 && (f.y = f.y + n,
                    n = -n), this._renderKey = 0;
                var p = this._curSubmit = lt.create(this);
                this._submits[this._submits._length++] = p, p.submitIndex = this._submits._length,
                    p.submitLength = 9999999, X.save(this, p);
                var g = this._clipRect, v = g.x, m = g.y, y = f.x + i, w = f.y + n;
                v < f.x && (g.x = f.x), m < f.y && (g.y = f.y), g.width = Math.min(y, v + g.width) - g.x,
                    g.height = Math.min(w, m + g.height) - g.y, this._shader2D.glTexture = null, p.clipRect.copyFrom(g),
                    this._curSubmit = at.RENDERBASE;
            }
        }, o.setIBVB = function (t, e, i, n, s, a, r, o, h, l, c) {
            if (void 0 === h && (h = 0), void 0 === l && (l = 0), void 0 === c && (c = 0), null === i) {
                if (L.isFlash) {
                    var u = n;
                    u._selfIB || (u._selfIB = Zt.create(35044)), u._selfIB.clear(), i = u._selfIB;
                } else i = this._ib;
                gt.expandIBQuadrangle(i, n._byteLength / (4 * n.vertexStride * 4));
            }
            if (!o || !r) throw Error("setIBVB must input:shader shaderValues");
            var d = ht.create(this, n, i, s, r, o, h, l, c);
            a || (a = w.EMPTY), a.translate(t, e), w.mul(a, this._curMat, d._mat), a.translate(-t, -e),
                this._submits[this._submits._length++] = d, this._curSubmit = at.RENDERBASE, this._renderKey = 0;
        }, o.addRenderObject = function (t) {
            this._submits[this._submits._length++] = t;
        }, o.fillTrangles = function (t, e, i, n, s) {
            var a = this._curSubmit, r = this._vb, o = this._shader2D, h = a.shaderValue, l = n.length >> 4, c = t.bitmap;
            this._renderKey = 0, o.glTexture == c && o.ALPHA === h.ALPHA || ((a = this._curSubmit = at.createSubmit(this, this._ib, r, r._byteLength / 32 * 3, Ct.create(1, 0))).shaderValue.textureHost = t,
                this._submits[this._submits._length++] = a), gt.fillTranglesVB(r, e, i, n, s || this._curMat, this._x, this._y),
                a._numEle += 6 * l;
        }, o.submitElement = function (t, e) {
            var i = this._submits;
            for (e < 0 && (e = i._length); t < e;) t += i[t].renderSubmit();
        }, o.finish = function () {
            wt.mainContext.finish();
        }, o.flush = function () {
            var t = Math.max(this._vb._byteLength / 64, this._maxNumEle / 6) + 8;
            if (t > this._ib.bufferLength / 12 && gt.expandIBQuadrangle(this._ib, t), !this._isMain && H.enabled && H._atlasRestore > this._atlasResourceChange) {
                this._atlasResourceChange = H._atlasRestore;
                for (var e = this._submits, i = 0, n = e._length; i < n; i++) {
                    var s = e[i];
                    10016 === s.getRenderType() && s.checkTexture();
                }
            }
            this.submitElement(0, this._submits._length), this._path && this._path.reset(),
                et.instance && et.getInstance().reset();
            var a = 0;
            for (i = 0, a = this.meshlist.length; i < a; i++) {
                var r = this.meshlist[i];
                r.canReuse ? r.releaseMesh() : r.destroy();
            }
            return this.meshlist.length = 0, this._curSubmit = at.RENDERBASE, this._renderKey = 0,
                this._triangleMesh = kt.getAMesh(), this.meshlist.push(this._triangleMesh), this._submits._length;
        }, o.setPathId = function (t) {
            if (this.mId = t, -1 != this.mId) {
                this.mHaveKey = !1;
                var e = B.getInstance();
                e.shapeDic[this.mId] && (this.mHaveKey = !0), this.mHaveLineKey = !1, e.shapeLineDic[this.mId] && (this.mHaveLineKey = !0);
            }
        }, o.movePath = function (t, e) {
            var i = t, n = e;
            t = this._curMat.a * i + this._curMat.c * n + this._curMat.tx, e = this._curMat.b * i + this._curMat.d * n + this._curMat.ty,
                this.mX += t, this.mY += e;
        }, o.beginPath = function () {
            var t = this._getPath();
            t.tempArray.length = 0, t.closePath = !1, this.mX = 0, this.mY = 0;
        }, o.closePath = function () {
            this._path.closePath = !0;
        }, o.fill = function (t) {
            void 0 === t && (t = !1);
            var e = this._getPath();
            this.drawPoly(0, 0, e.tempArray, this.fillStyle._color.numColor, 0, 0, t);
        }, o.stroke = function () {
            var t = this._getPath();
            if (this.lineWidth > 0) {
                if (-1 == this.mId) t.drawLine(0, 0, t.tempArray, this.lineWidth, this.strokeStyle._color.numColor); else if (this.mHaveLineKey) {
                    var e = B.getInstance().shapeLineDic[this.mId];
                    e.rebuild(t.tempArray), t.setGeomtry(e);
                } else B.getInstance().addLine(this.mId, t.drawLine(0, 0, t.tempArray, this.lineWidth, this.strokeStyle._color.numColor));
                t.update();
                var i = [this.mX, this.mY], n = at.createShape(this, t.ib, t.vb, t.count, t.offset, Ct.create(4, 0));
                n.shaderValue.ALPHA = this._shader2D.ALPHA, n.shaderValue.u_pos = i, n.shaderValue.u_mmat2 = mt.TEMPMAT4_ARRAY,
                    this._submits[this._submits._length++] = n, this._renderKey = -1;
            }
        }, o.line = function (t, e, i, n, s, a) {
            var r = this._curSubmit, o = this._vb;
            if (gt.fillLineVb(o, this._clipRect, t, e, i, n, s, a)) {
                this._renderKey = 0;
                var h = this._shader2D, l = r.shaderValue;
                h.strokeStyle === l.strokeStyle && h.ALPHA === l.ALPHA || (h.glTexture = null, (r = this._curSubmit = at.createSubmit(this, this._ib, o, (o._byteLength - 64) / 32 * 3, Ct.create(2, 0))).shaderValue.strokeStyle = h.strokeStyle,
                    r.shaderValue.mainID = 2, r.shaderValue.ALPHA = h.ALPHA, this._submits[this._submits._length++] = r),
                    r._numEle += 6;
            }
        }, o.moveTo = function (t, e, i) {
            void 0 === i && (i = !0);
            var n = this._getPath();
            if (i) {
                var s = t, a = e;
                t = this._curMat.a * s + this._curMat.c * a, e = this._curMat.b * s + this._curMat.d * a;
            }
            n.addPoint(t, e);
        }, o.lineTo = function (t, e, i) {
            void 0 === i && (i = !0);
            var n = this._getPath();
            if (i) {
                var s = t, a = e;
                t = this._curMat.a * s + this._curMat.c * a, e = this._curMat.b * s + this._curMat.d * a;
            }
            n.addPoint(t, e);
        }, o.drawCurves = function (t, e, i) {
            this.setPathId(-1), this.beginPath(), this.strokeStyle = i[3], this.lineWidth = i[4];
            var n = i[2];
            t += i[0], e += i[1], this.movePath(t, e), this.moveTo(n[0], n[1]);
            for (var s = 2, a = n.length; s < a;) this.quadraticCurveTo(n[s++], n[s++], n[s++], n[s++]);
            this.stroke();
        }, o.arcTo = function (t, i, n, s, a) {
            if (-1 == this.mId || !this.mHaveKey) {
                var r = 0, o = 0, h = 0, l = this._getPath();
                this._curMat.copyTo(e._tmpMatrix), e._tmpMatrix.tx = e._tmpMatrix.ty = 0, e._tempPoint.setTo(l.getEndPointX(), l.getEndPointY()),
                    e._tmpMatrix.invertTransformPoint(e._tempPoint);
                var c = e._tempPoint.x - t, u = e._tempPoint.y - i, d = Math.sqrt(c * c + u * u);
                if (!(d <= 1e-6)) {
                    var _ = c / d, f = u / d, p = n - t, g = s - i, v = p * p + g * g, m = Math.sqrt(v);
                    if (!(m <= 1e-6)) {
                        var y = p / m, w = g / m, x = _ + y, b = f + w, L = Math.sqrt(x * x + b * b);
                        if (!(L <= 1e-6)) {
                            var C = x / L, M = b / L, T = Math.acos(C * _ + M * f), S = Math.PI / 2 - T, A = (d = a / Math.tan(S)) * _ + t, I = d * f + i, E = Math.sqrt(d * d + a * a), R = t + C * E, P = i + M * E, D = 0, k = 0, F = 0;
                            if (_ * w - f * y >= 0) {
                                var B = (D = 2 * S) / e.SEGNUM;
                                k = Math.sin(B), F = Math.cos(B);
                            } else B = (D = 2 * -S) / e.SEGNUM, k = Math.sin(B), F = Math.cos(B);
                            o = this._curMat.a * A + this._curMat.c * I, h = this._curMat.b * A + this._curMat.d * I,
                                o == this._path.getEndPointX() && h == this._path.getEndPointY() || l.addPoint(o, h);
                            var O = A - R, N = I - P;
                            for (r = 0; r < e.SEGNUM; r++) {
                                var G = O * F + N * k, H = -O * k + N * F;
                                o = G + R, h = H + P, t = this._curMat.a * o + this._curMat.c * h, h = i = this._curMat.b * o + this._curMat.d * h,
                                    (o = t) == this._path.getEndPointX() && h == this._path.getEndPointY() || l.addPoint(o, h),
                                    O = G, N = H;
                            }
                        }
                    }
                }
            }
        }, o.arc = function (t, e, i, n, s, a, r) {
            if (void 0 === a && (a = !1), void 0 === r && (r = !0), -1 != this.mId) {
                var o = B.getInstance().shapeDic[this.mId];
                if (o && this.mHaveKey && !o.needUpdate(this._curMat)) return;
                t = 0, e = 0;
            }
            var h = 0, l = 0, c = 0, u = 0, d = 0, _ = 0, f = 0, p = 0;
            if (l = s - n, a) if (Math.abs(l) >= 2 * Math.PI) l = 2 * -Math.PI; else for (; l > 0;) l -= 2 * Math.PI; else if (Math.abs(l) >= 2 * Math.PI) l = 2 * Math.PI; else for (; l < 0;) l += 2 * Math.PI;
            c = l / (p = i < 101 ? Math.max(10, l * i / 5) : i < 201 ? Math.max(10, l * i / 20) : Math.max(10, l * i / 40)) / 2,
                u = Math.abs(4 / 3 * (1 - Math.cos(c)) / Math.sin(c)), a && (u = -u);
            var g = this._getPath(), v = NaN, m = NaN;
            for (f = 0; f <= p; f++) h = n + l * (f / p), d = t + Math.cos(h) * i, _ = e + Math.sin(h) * i,
                r && (v = d, m = _, d = this._curMat.a * v + this._curMat.c * m, _ = this._curMat.b * v + this._curMat.d * m),
                d == this._path.getEndPointX() && _ == this._path.getEndPointY() || g.addPoint(d, _);
            d = t + Math.cos(s) * i, _ = e + Math.sin(s) * i, r && (v = d, m = _, d = this._curMat.a * v + this._curMat.c * m,
                _ = this._curMat.b * v + this._curMat.d * m), d == this._path.getEndPointX() && _ == this._path.getEndPointY() || g.addPoint(d, _);
        }, o.quadraticCurveTo = function (t, e, i, n) {
            var s = h.I, a = i, r = n;
            i = this._curMat.a * a + this._curMat.c * r, n = this._curMat.b * a + this._curMat.d * r,
                a = t, r = e, t = this._curMat.a * a + this._curMat.c * r, e = this._curMat.b * a + this._curMat.d * r;
            for (var o = s.getBezierPoints([this._path.getEndPointX(), this._path.getEndPointY(), t, e, i, n], 30, 2), l = 0, c = o.length / 2; l < c; l++) this.lineTo(o[2 * l], o[2 * l + 1], !1);
            this.lineTo(i, n, !1);
        }, o.rect = function (t, e, i, n) {
            this._other = this._other.make(), this._other.path || (this._other.path = new W()),
                this._other.path.rect(t, e, i, n);
        }, o.strokeRect = function (t, e, i, n, s) {
            var a = .5 * s;
            this.line(t - a, e, t + i + a, e, s, this._curMat), this.line(t + i, e, t + i, e + n, s, this._curMat),
                this.line(t, e, t, e + n, s, this._curMat), this.line(t - a, e + n, t + i + a, e + n, s, this._curMat);
        }, o.clip = function () { }, o.drawPoly = function (t, e, i, n, s, a, r) {
            void 0 === r && (r = !1), this._renderKey = 0, this._shader2D.glTexture = null;
            var o = this._getPath();
            if (-1 == this.mId) o.polygon(t, e, i, n, s || 1, a); else if (this.mHaveKey) {
                var h = B.getInstance().shapeDic[this.mId];
                h.setMatrix(this._curMat), h.rebuild(o.tempArray), o.setGeomtry(h);
            } else {
                var l = o.polygon(t, e, i, n, s || 1, a);
                B.getInstance().addShape(this.mId, l), l.setMatrix(this._curMat);
            }
            o.update();
            var c, u = [this.mX, this.mY];
            if (c = at.createShape(this, o.ib, o.vb, o.count, o.offset, Ct.create(4, 0)), c.shaderValue.ALPHA = this._shader2D.ALPHA,
                c.shaderValue.u_pos = u, c.shaderValue.u_mmat2 = mt.EMPTYMAT4_ARRAY, this._submits[this._submits._length++] = c,
                s > 0) {
                if (this.mHaveLineKey) {
                    var d = B.getInstance().shapeLineDic[this.mId];
                    d.rebuild(o.tempArray), o.setGeomtry(d);
                } else B.getInstance().addShape(this.mId, o.drawLine(t, e, i, s, a));
                o.update(), (c = at.createShape(this, o.ib, o.vb, o.count, o.offset, Ct.create(4, 0))).shaderValue.ALPHA = this._shader2D.ALPHA,
                    c.shaderValue.u_mmat2 = mt.EMPTYMAT4_ARRAY, this._submits[this._submits._length++] = c;
            }
        }, o.drawParticle = function (t, e, i) {
            i.x = t, i.y = e, this._submits[this._submits._length++] = i;
        }, o._getPath = function () {
            return this._path || (this._path = new W());
        }, a(0, o, "globalCompositeOperation", function () {
            return V.NAMES[this._nBlendType];
        }, function (t) {
            var e = V.TOINT[t];
            null == e || this._nBlendType === e || (Y.save(this, 65536, this, !0), this._curSubmit = at.RENDERBASE,
                this._renderKey = 0, this._nBlendType = e);
        }), a(0, o, "strokeStyle", function () {
            return this._shader2D.strokeStyle;
        }, function (t) {
            this._shader2D.strokeStyle.equal(t) || (Y.save(this, 512, this._shader2D, !1), this._shader2D.strokeStyle = U.create(t));
        }), a(0, o, "globalAlpha", function () {
            return this._shader2D.ALPHA;
        }, function (t) {
            (t = Math.floor(1e3 * t) / 1e3) != this._shader2D.ALPHA && (Y.save(this, 1, this._shader2D, !0),
                this._shader2D.ALPHA = t);
        }), a(0, o, "asBitmap", null, function (t) {
            if (t) {
                if (this._targets || (this._targets = new Q()), this._targets.repaint = !0, !this._width || !this._height) throw Error("asBitmap no size!");
                this._targets.setSP(this.sprite), this._targets.size(this._width, this._height);
            } else this._targets = null;
        }), a(0, o, "fillStyle", function () {
            return this._shader2D.fillStyle;
        }, function (t) {
            this._shader2D.fillStyle.equal(t) || (Y.save(this, 2, this._shader2D, !1), this._shader2D.fillStyle = U.create(t));
        }), a(0, o, "textAlign", function () {
            return this._other.textAlign;
        }, function (t) {
            this._other.textAlign === t || (this._other = this._other.make(), Y.save(this, 32768, this._other, !1),
                this._other.textAlign = t);
        }), a(0, o, "lineWidth", function () {
            return this._other.lineWidth;
        }, function (t) {
            this._other.lineWidth === t || (this._other = this._other.make(), Y.save(this, 256, this._other, !1),
                this._other.lineWidth = t);
        }), a(0, o, "textBaseline", function () {
            return this._other.textBaseline;
        }, function (t) {
            this._other.textBaseline === t || (this._other = this._other.make(), Y.save(this, 16384, this._other, !1),
                this._other.textBaseline = t);
        }), a(0, o, "font", null, function (t) {
            t != this._other.font.toString() && (this._other = this._other.make(), Y.save(this, 8, this._other, !1),
                this._other.font === ft.EMPTY ? this._other.font = new ft(t) : this._other.font.setFont(t));
        }), e.__init__ = function () {
            r.DEFAULT = new r();
        }, e._tempPoint = new x(), e._SUBMITVBSIZE = 32e3, e._MAXSIZE = 99999999, e._RECTVBSIZE = 16,
            e.MAXCLIPRECT = new b(0, 0, 99999999, 99999999), e._COUNT = 0, e._tmpMatrix = new w(),
            e.SEGNUM = 32, e._contextcount = 0, n(e, ["_fontTemp", function () {
                return this._fontTemp = new ft();
            }, "_drawStyleTemp", function () {
                return this._drawStyleTemp = new U(null);
            }]), e.__init$ = function () {
                r = function () {
                    function t() {
                        this.lineWidth = 1, this.path = null, this.textAlign = null, this.textBaseline = null,
                            this.font = ft.EMPTY;
                    }
                    s(t, "");
                    var e = t.prototype;
                    return e.clear = function () {
                        this.lineWidth = 1, this.path && this.path.clear(), this.textAlign = this.textBaseline = null,
                            this.font = ft.EMPTY;
                    }, e.make = function () {
                        return this === t.DEFAULT ? new t() : this;
                    }, t.DEFAULT = null, t;
                }();
            }, e;
    }(), Ct = function (t) {
        function e(t, i) {
            this.size = [0, 0], this.alpha = 1, this.ALPHA = 1, this.subID = 0, this._cacheID = 0,
                e.__super.call(this), this.defines = new At(), this.position = e._POSITION, this.mainID = t,
                this.subID = i, this.textureHost = null, this.texture = null, this.fillStyle = null,
                this.color = null, this.strokeStyle = null, this.colorAdd = null, this.glTexture = null,
                this.u_mmat2 = null, this._cacheID = t | i, this._inClassCache = e._cache[this._cacheID],
                t > 0 && !this._inClassCache && (this._inClassCache = e._cache[this._cacheID] = [],
                    this._inClassCache._length = 0), this.clear();
        }
        s(e, "laya.webgl.shader.d2.value.Value2D", N);
        var i = e.prototype;
        return i.setValue = function (t) { }, i.refresh = function () {
            var t = this.size;
            return t[0] = mt.width, t[1] = mt.height, this.alpha = this.ALPHA * mt.worldAlpha,
                this.mmat = mt.worldMatrix4, this;
        }, i._ShaderWithCompile = function () {
            return jt.withCompile2D(0, this.mainID, this.defines.toNameDic(), this.mainID | this.defines._value, Qt.create);
        }, i._withWorldShaderDefines = function () {
            var t = mt.worldShaderDefines, e = jt.sharders[this.mainID | this.defines._value | t.getValue()];
            if (!e) {
                var i, n, s = {};
                i = this.defines.toNameDic();
                for (n in i) s[n] = "";
                i = t.toNameDic();
                for (n in i) s[n] = "";
                e = jt.withCompile2D(0, this.mainID, s, this.mainID | this.defines._value | t.getValue(), Qt.create);
            }
            var a = mt.worldFilters;
            if (!a) return e;
            for (var r, o = a.length, h = 0; h < o; h++) (r = a[h]) && r.action.setValue(this);
            return e;
        }, i.upload = function () {
            var t = mt;
            this.alpha = this.ALPHA * t.worldAlpha, mt.worldMatrix4 !== mt.TEMPMAT4_ARRAY && this.defines.add(128),
                wt.shaderHighPrecision && this.defines.add(1024);
            var e, i = t.worldShaderDefines ? this._withWorldShaderDefines() : jt.sharders[this.mainID | this.defines._value] || this._ShaderWithCompile();
            this.size[0] = t.width, this.size[1] = t.height, this.mmat = t.worldMatrix4, Ft.activeShader !== i ? (i._shaderValueWidth !== t.width || i._shaderValueHeight !== t.height ? (i._shaderValueWidth = t.width,
                i._shaderValueHeight = t.height) : e = i._params2dQuick2 || i._make2dQuick2(), i.upload(this, e)) : (i._shaderValueWidth !== t.width || i._shaderValueHeight !== t.height ? (i._shaderValueWidth = t.width,
                    i._shaderValueHeight = t.height) : e = i._params2dQuick1 || i._make2dQuick1(), i.upload(this, e));
        }, i.setFilters = function (t) {
            if (this.filters = t, t) for (var e, i = t.length, n = 0; n < i; n++) (e = t[n]) && (this.defines.add(e.type),
                e.action.setValue(this));
        }, i.clear = function () {
            this.defines.setValue(this.subID);
        }, i.release = function () {
            this._inClassCache[this._inClassCache._length++] = this, this.fillStyle = null,
                this.strokeStyle = null, this.clear();
        }, e._initone = function (t, i) {
            e._typeClass[t] = i, e._cache[t] = [], e._cache[t]._length = 0;
        }, e.__init__ = function () {
            e._POSITION = [2, 5126, !1, 4 * pt.BYTES_PE, 0], e._TEXCOORD = [2, 5126, !1, 4 * pt.BYTES_PE, 2 * pt.BYTES_PE],
                e._initone(2, Gt), e._initone(4, Vt), e._initone(256, Ht), e._initone(512, Nt),
                e._initone(1, zt), e._initone(65, $t), e._initone(9, zt);
        }, e.create = function (t, i) {
            var n = e._cache[t | i];
            return n._length ? n[--n._length] : new e._typeClass[t | i](i);
        }, e._POSITION = null, e._TEXCOORD = null, e._cache = [], e._typeClass = [], e.TEMPMAT4_ARRAY = [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1],
            e;
    }(), Mt = function (t) {
        function e(t, i) {
            e.__super.call(this, t, i);
        }
        s(e, "laya.webgl.utils.RenderSprite3D", C);
        var i = e.prototype;
        return i.onCreate = function (t) {
            switch (t) {
                case 8:
                    return void (this._fun = this._blend);

                case 4:
                    return void (this._fun = this._transform);
            }
        }, i._mask = function (t, i, n, s) {
            var a, r, o = this._next, h = t.mask;
            if (h) {
                i.ctx.save();
                var l = i.ctx.globalCompositeOperation, c = new b();
                if (c.copyFrom(h.getBounds()), c.width = Math.round(c.width), c.height = Math.round(c.height),
                    c.x = Math.round(c.x), c.y = Math.round(c.y), c.width > 0 && c.height > 0) {
                    var u = t._style._tf, d = ot.create();
                    d.addValue("bounds", c), a = rt.create([d, i], laya.webgl.utils.RenderSprite3D.tmpTarget),
                        i.addRenderObject(a), h.render(i, -c.x, -c.y), a = rt.create([d], laya.webgl.utils.RenderSprite3D.endTmpTarget),
                        i.addRenderObject(a), i.ctx.save(), i.clipRect(n - u.translateX + c.x, s - u.translateY + c.y, c.width, c.height),
                        o._fun.call(o, t, i, n, s), i.ctx.restore(), r = ct.create(6), l = i.ctx.globalCompositeOperation,
                        r.blendMode = "mask", i.addRenderObject(r), w.TEMP.identity();
                    var _ = Ct.create(1, 0), f = k.INV_UV, p = c.width, g = c.height;
                    (c.width < 32 || c.height < 32) && ((f = e.tempUV)[0] = 0, f[1] = 0, f[2] = c.width >= 32 ? 1 : c.width / 32,
                        f[3] = 0, f[4] = c.width >= 32 ? 1 : c.width / 32, f[5] = c.height >= 32 ? 1 : c.height / 32,
                        f[6] = 0, f[7] = c.height >= 32 ? 1 : c.height / 32, c.width = c.width >= 32 ? c.width : 32,
                        c.height = c.height >= 32 ? c.height : 32, f[1] *= -1, f[3] *= -1, f[5] *= -1, f[7] *= -1,
                        f[1] += 1, f[3] += 1, f[5] += 1, f[7] += 1), i.ctx.drawTarget(d, n + c.x - u.translateX, s + c.y - u.translateY, p, g, w.TEMP, "tmpTarget", _, f, 6),
                        a = rt.create([d], laya.webgl.utils.RenderSprite3D.recycleTarget), i.addRenderObject(a),
                        (r = ct.create(6)).blendMode = l, i.addRenderObject(r);
                }
                i.ctx.restore();
            } else o._fun.call(o, t, i, n, s);
        }, i._blend = function (t, e, i, n) {
            var s = t._style, a = this._next;
            s.blendMode ? (e.ctx.save(), e.ctx.globalCompositeOperation = s.blendMode, a._fun.call(a, t, e, i, n),
                e.ctx.restore()) : a._fun.call(a, t, e, i, n);
        }, i._transform = function (t, e, i, n) {
            var s = t.transform, a = this._next;
            if (s && a != C.NORENDER) {
                var r = e.ctx;
                t._style;
                s.tx = i, s.ty = n;
                var o = r._getTransformMatrix(), h = o.clone();
                w.mul(s, o, o), o._checkTransform(), s.tx = s.ty = 0, a._fun.call(a, t, e, 0, 0),
                    h.copyTo(o), h.destroy();
            } else a._fun.call(a, t, e, i, n);
        }, e.tmpTarget = function (t, e) {
            var i = t.getValue("bounds"), n = Bt.create(i.width, i.height);
            n.start(), n.clear(0, 0, 0, 0), t.addValue("tmpTarget", n);
        }, e.endTmpTarget = function (t) {
            t.getValue("tmpTarget").end();
        }, e.recycleTarget = function (t) {
            t.getValue("tmpTarget").recycle(), t.recycle();
        }, n(e, ["tempUV", function () {
            return this.tempUV = new Array(8);
        }]), e;
    }(), Tt = function (t) {
        function e() {
            this.data = null, e.__super.call(this);
        }
        s(e, "laya.filters.webgl.ColorFilterActionGL", O);
        var n = e.prototype;
        return i.imps(n, {
            "laya.filters.IFilterActionGL": !0
        }), n.setValue = function (t) {
            t.colorMat = this.data._mat, t.colorAlpha = this.data._alpha;
        }, n.apply3d = function (t, e, i, n, s) {
            var a = t.getValue("bounds"), r = Ct.create(1, 0);
            r.setFilters([this.data]);
            var o = w.TEMP;
            o.identity(), i.ctx.drawTarget(t, 0, 0, a.width, a.height, o, "src", r);
        }, e;
    }(), St = function (t) {
        function e(t, i, n, s, a) {
            this._atlasCanvas = null, this._inAtlasTextureKey = null, this._inAtlasTextureBitmapValue = null,
                this._inAtlasTextureOriUVValue = null, this._InAtlasWebGLImagesKey = null, this._InAtlasWebGLImagesOffsetValue = null,
                e.__super.call(this, t, i, a), this._inAtlasTextureKey = [], this._inAtlasTextureBitmapValue = [],
                this._inAtlasTextureOriUVValue = [], this._InAtlasWebGLImagesKey = {}, this._InAtlasWebGLImagesOffsetValue = [],
                this._atlasCanvas = new Ut(), this._atlasCanvas._atlaser = this, this._atlasCanvas.width = n,
                this._atlasCanvas.height = s, this._atlasCanvas.activeResource(), this._atlasCanvas.lock = !0;
        }
        s(e, "laya.webgl.atlas.Atlaser", G);
        var i = e.prototype;
        return i.computeUVinAtlasTexture = function (t, e, i, n) {
            var s = H.atlasTextureWidth, a = H.atlasTextureHeight, r = i / s, o = n / a, h = (i + t.bitmap.width) / s, l = (n + t.bitmap.height) / a, c = t.bitmap.width / s, u = t.bitmap.height / a;
            t.uv = [r + e[0] * c, o + e[1] * u, h - (1 - e[2]) * c, o + e[3] * u, h - (1 - e[4]) * c, l - (1 - e[5]) * u, r + e[6] * c, l - (1 - e[7]) * u];
        }, i.findBitmapIsExist = function (t) {
            if (t instanceof laya.webgl.resource.WebGLImage) {
                var e = t, i = e.url, n = this._InAtlasWebGLImagesKey[i || e.id];
                if (n) return n.offsetInfoID;
            }
            return -1;
        }, i.addToAtlasTexture = function (t, e, i) {
            if (t instanceof laya.webgl.resource.WebGLImage) {
                var n = t, s = n.url;
                this._InAtlasWebGLImagesKey[s || n.id] = {
                    bitmap: t,
                    offsetInfoID: this._InAtlasWebGLImagesOffsetValue.length
                }, this._InAtlasWebGLImagesOffsetValue.push([e, i]);
            }
            this._atlasCanvas.texSubImage2D(e, i, t.atlasImgData || t.atlasSource), t.clearAtlasSource();
        }, i.addToAtlas = function (t, e, i) {
            t._atlasID = this._inAtlasTextureKey.length;
            var n = t.uv.slice(), s = t.bitmap;
            this._inAtlasTextureKey.push(t), this._inAtlasTextureOriUVValue.push(n), this._inAtlasTextureBitmapValue.push(s),
                this.computeUVinAtlasTexture(t, n, e, i), t.bitmap = this._atlasCanvas;
        }, i.clear = function () {
            for (var t = 0, e = this._inAtlasTextureKey.length; t < e; t++) this._inAtlasTextureKey[t].bitmap = this._inAtlasTextureBitmapValue[t],
                this._inAtlasTextureKey[t].uv = this._inAtlasTextureOriUVValue[t], this._inAtlasTextureKey[t]._atlasID = -1,
                this._inAtlasTextureKey[t].bitmap.lock = !1, this._inAtlasTextureKey[t].bitmap.releaseResource();
            this._inAtlasTextureKey.length = 0, this._inAtlasTextureBitmapValue.length = 0,
                this._inAtlasTextureOriUVValue.length = 0, this._InAtlasWebGLImagesKey = null, this._InAtlasWebGLImagesOffsetValue.length = 0;
        }, i.dispose = function () {
            this.clear(), this._atlasCanvas.destroy();
        }, a(0, i, "InAtlasWebGLImagesOffsetValue", function () {
            return this._InAtlasWebGLImagesOffsetValue;
        }), a(0, i, "texture", function () {
            return this._atlasCanvas;
        }), a(0, i, "inAtlasWebGLImagesKey", function () {
            return this._InAtlasWebGLImagesKey;
        }), e;
    }(), At = function (t) {
        function e() {
            e.__super.call(this, e.__name2int, e.__int2name, e.__int2nameMap);
        }
        return s(e, "laya.webgl.shader.d2.ShaderDefines2D", J), e.__init__ = function () {
            e.reg("TEXTURE2D", 1), e.reg("COLOR2D", 2), e.reg("PRIMITIVE", 4), e.reg("GLOW_FILTER", 8),
                e.reg("BLUR_FILTER", 16), e.reg("COLOR_FILTER", 32), e.reg("COLOR_ADD", 64), e.reg("WORLDMAT", 128),
                e.reg("FILLTEXTURE", 256), e.reg("FSHIGHPRECISION", 1024);
        }, e.reg = function (t, i) {
            J._reg(t, i, e.__name2int, e.__int2name);
        }, e.toText = function (t, e, i) {
            return J._toText(t, e, i);
        }, e.toInt = function (t) {
            return J._toInt(t, e.__name2int);
        }, e.TEXTURE2D = 1, e.COLOR2D = 2, e.PRIMITIVE = 4, e.FILTERGLOW = 8, e.FILTERBLUR = 16,
            e.FILTERCOLOR = 32, e.COLORADD = 64, e.WORLDMAT = 128, e.FILLTEXTURE = 256, e.SKINMESH = 512,
            e.SHADERDEFINE_FSHIGHPRECISION = 1024, e.__name2int = {}, e.__int2name = [], e.__int2nameMap = [],
            e;
    }(), It = (function (t) {
        function e(t, i, n, s, a, r, o) {
            e.__super.call(this, t, i, n, s, 40, a, r, o);
        }
        s(e, "laya.webgl.shapes.Ellipse", it);
    }(), function (t) {
        function e(t, i, n, s, a) {
            this._points = [], this.rebuild(n), e.__super.call(this, t, i, 0, 0, 0, a, s, a, 0);
        }
        s(e, "laya.webgl.shapes.Line", it);
        var i = e.prototype;
        return i.rebuild = function (t) {
            var e = t.length;
            e != this._points.length && (this.mUint16Array = new Uint16Array(6 * (e / 2 - 1)),
                this.mFloat32Array = new Float32Array(5 * e)), this._points.length = 0;
            for (var i = NaN, n = NaN, s = -1, a = -1, r = t.length / 2, o = 0; o < r; o++) i = t[2 * o],
                n = t[2 * o + 1], (Math.abs(s - i) > .01 || Math.abs(a - n) > .01) && this._points.push(i, n),
                s = i, a = n;
        }, i.getData = function (t, e, i) {
            var n = [], s = [];
            this.borderWidth > 0 && this.createLine2(this._points, n, this.borderWidth, i, s, this._points.length / 2),
                this.mUint16Array.set(n, 0), this.mFloat32Array.set(s, 0), t.append(this.mUint16Array),
                e.append(this.mFloat32Array);
        }, e;
    }()), Et = function (t) {
        function e(t, i, n, s, a) {
            this._points = [];
            for (var r = NaN, o = NaN, h = -1, l = -1, c = n.length / 2 - 1, u = 0; u < c; u++) r = n[2 * u],
                o = n[2 * u + 1], (Math.abs(h - r) > .01 || Math.abs(l - o) > .01) && this._points.push(r, o),
                h = r, l = o;
            r = n[2 * c], o = n[2 * c + 1], h = this._points[0], l = this._points[1], (Math.abs(h - r) > .01 || Math.abs(l - o) > .01) && this._points.push(r, o),
                e.__super.call(this, t, i, 0, 0, this._points.length / 2, 0, s, a);
        }
        s(e, "laya.webgl.shapes.LoopLine", it);
        var i = e.prototype;
        return i.getData = function (t, e, i) {
            if (this.borderWidth > 0) {
                for (var n = this.color, s = (n >> 16 & 255) / 255, a = (n >> 8 & 255) / 255, r = (255 & n) / 255, o = [], h = 0, l = 0, c = [], u = Math.floor(this._points.length / 2), d = 0; d < u; d++) h = this._points[2 * d],
                    l = this._points[2 * d + 1], o.push(this.x + h, this.y + l, s, a, r);
                this.createLoopLine(o, c, this.borderWidth, i + o.length / 5), t.append(new Uint16Array(c)),
                    e.append(new Float32Array(o));
            }
        }, i.createLoopLine = function (t, e, i, n, s, a) {
            t.length;
            var r = t.concat(), o = s || t, h = this.borderColor, l = (h >> 16 & 255) / 255, c = (h >> 8 & 255) / 255, u = (255 & h) / 255, d = [r[0], r[1]], _ = [r[r.length - 5], r[r.length - 4]], f = _[0] + .5 * (d[0] - _[0]), p = _[1] + .5 * (d[1] - _[1]);
            r.unshift(f, p, 0, 0, 0), r.push(f, p, 0, 0, 0);
            var g, v, m, y, w, x, b, L, C, M, T, S, A, I, E, R, P, D, k, F, B = r.length / 5, O = n, N = i / 2;
            m = r[0], y = r[1], M = m - (w = r[5]), C = (C = -(y - (x = r[6]))) / (F = Math.sqrt(C * C + M * M)) * N,
                M = M / F * N, o.push(m - C, y - M, l, c, u, m + C, y + M, l, c, u);
            for (var G = 1; G < B - 1; G++) m = r[5 * (G - 1)], y = r[5 * (G - 1) + 1], w = r[5 * G],
                x = r[5 * G + 1], b = r[5 * (G + 1)], L = r[5 * (G + 1) + 1], M = m - w, S = w - b,
                E = (-(C = (C = -(y - x)) / (F = Math.sqrt(C * C + M * M)) * N) + m) * (-(M = M / F * N) + x) - (-C + w) * (-M + y),
                D = (-(T = (T = -(x - L)) / (F = Math.sqrt(T * T + S * S)) * N) + b) * (-(S = S / F * N) + x) - (-T + w) * (-S + L),
                k = (A = -M + y - (-M + x)) * (P = -T + w - (-T + b)) - (R = -S + L - (-S + x)) * (I = -C + w - (-C + m)),
                Math.abs(k) < .1 ? (k += 10.1, o.push(w - C, x - M, l, c, u, w + C, x + M, l, c, u)) : (((g = (I * D - P * E) / k) - w) * (g - w) + ((v = (R * E - A * D) / k) - x) + (v - x),
                    o.push(g, v, l, c, u, w - (g - w), x - (v - x), l, c, u));
            a && (e = a);
            var H = this.edges + 1;
            for (G = 1; G < H; G++) e.push(O + 2 * (G - 1), O + 2 * (G - 1) + 1, O + 2 * G + 1, O + 2 * G + 1, O + 2 * G, O + 2 * (G - 1));
            return e.push(O + 2 * (G - 1), O + 2 * (G - 1) + 1, O + 1, O + 1, O, O + 2 * (G - 1)),
                o;
        }, e;
    }(), Rt = function (t) {
        function e(t, i, n, s, a, r) {
            this._points = null, this._start = -1, this._repaint = !1, this.earcutTriangles = null,
                this._mat = w.create(), this._points = n.slice(0, n.length), e.__super.call(this, t, i, 0, 0, this._points.length / 2, s, a, r);
        }
        s(e, "laya.webgl.shapes.Polygon", it);
        var i = e.prototype;
        return i.rebuild = function (t) {
            this._repaint || (this._points.length = 0, this._points = this._points.concat(t));
        }, i.setMatrix = function (t) {
            t.copyTo(this._mat);
        }, i.needUpdate = function (t) {
            return this._repaint = this._mat.a == t.a && this._mat.b == t.b && this._mat.c == t.c && this._mat.d == t.d && this._mat.tx == t.tx && this._mat.ty == t.ty,
                !this._repaint;
        }, i.getData = function (t, e, i) {
            var n, s = 0, a = this._points, r = 0;
            if (this.mUint16Array && this.mFloat32Array && this._repaint) {
                if (this._start != i) {
                    for (this._start = i, n = [], r = this.earcutTriangles.length, s = 0; s < r; s++) n.push(this.earcutTriangles[s] + i);
                    this.mUint16Array = new Uint16Array(n);
                }
            } else {
                this._start = i, n = [];
                var o = [], h = [], l = this.color, c = (l >> 16 & 255) / 255, u = (l >> 8 & 255) / 255, d = (255 & l) / 255;
                for (r = Math.floor(a.length / 2), s = 0; s < r; s++) o.push(this.x + a[2 * s], this.y + a[2 * s + 1], c, u, d),
                    h.push(this.x + a[2 * s], this.y + a[2 * s + 1]);
                for (this.earcutTriangles = nt.earcut(h, null, 2), r = this.earcutTriangles.length,
                    s = 0; s < r; s++) n.push(this.earcutTriangles[s] + i);
                this.mUint16Array = new Uint16Array(n), this.mFloat32Array = new Float32Array(o);
            }
            t.append(this.mUint16Array), e.append(this.mFloat32Array);
        }, e;
    }(), Pt = function (t) {
        function e() {
            this._matrix = new w(), this._matrix4 = pt.defaultMatrix4.concat(), e.__super.call(this, 1e4),
                this.shaderValue = new Ct(0, 0);
        }
        s(e, "laya.webgl.submit.SubmitCanvas", at);
        var i = e.prototype;
        return i.renderSubmit = function () {
            if (this._ctx_src._targets) return this._ctx_src._targets.flush(this._ctx_src),
                1;
            var t = mt.worldAlpha, e = mt.worldMatrix4, i = mt.worldMatrix, n = mt.worldFilters, s = mt.worldShaderDefines, a = this.shaderValue, r = this._matrix, o = this._matrix4, h = w.TEMP;
            return w.mul(r, i, h), o[0] = h.a, o[1] = h.b, o[4] = h.c, o[5] = h.d, o[12] = h.tx,
                o[13] = h.ty, mt.worldMatrix = h.clone(), mt.worldMatrix4 = o, mt.worldAlpha = mt.worldAlpha * a.alpha,
                a.filters && a.filters.length && (mt.worldFilters = a.filters, mt.worldShaderDefines = a.defines),
                this._ctx_src.flush(), mt.worldAlpha = t, mt.worldMatrix4 = e, mt.worldMatrix.destroy(),
                mt.worldMatrix = i, mt.worldFilters = n, mt.worldShaderDefines = s, 1;
        }, i.releaseRender = function () {
            var t = e._cache;
            this._ctx_src = null, t[t._length++] = this;
        }, i.getRenderType = function () {
            return 10003;
        }, e.create = function (t, i, n) {
            var s = e._cache._length ? e._cache[--e._cache._length] : new e();
            s._ctx_src = t;
            var a = s.shaderValue;
            return a.alpha = i, a.defines.setValue(0), n && n.length && a.setFilters(n), s;
        }, e._cache = (e._cache = [], e._cache._length = 0, e._cache), e;
    }(), Dt = function (t) {
        function e(t) {
            this._preIsSameTextureShader = !1, this._isSameTexture = !0, this._texs = new Array(),
                this._texsID = new Array(), this._vbPos = new Array(), void 0 === t && (t = 1e4),
                e.__super.call(this, t);
        }
        s(e, "laya.webgl.submit.SubmitTexture", at);
        var i = e.prototype;
        return i.releaseRender = function () {
            var t = e._cache;
            t[t._length++] = this, this.shaderValue.release(), this._preIsSameTextureShader = !1,
                this._vb = null, this._texs.length = 0, this._vbPos.length = 0, this._isSameTexture = !0;
        }, i.addTexture = function (t, e) {
            this._texsID[this._texs.length] = t._uvID, this._texs.push(t), this._vbPos.push(e);
        }, i.checkTexture = function () {
            if (this._texs.length < 1) this._isSameTexture = !0; else {
                var t = this.shaderValue.textureHost.bitmap;
                if (null !== t) for (var e = this._vb.getFloat32Array(), i = 0, n = this._texs.length; i < n; i++) {
                    var s = this._texs[i];
                    s.active();
                    var a = s.uv;
                    if (this._texsID[i] !== s._uvID) {
                        this._texsID[i] = s._uvID;
                        var r = this._vbPos[i];
                        e[r + 2] = a[0], e[r + 3] = a[1], e[r + 6] = a[2], e[r + 7] = a[3], e[r + 10] = a[4],
                            e[r + 11] = a[5], e[r + 14] = a[6], e[r + 15] = a[7], this._vb.setNeedUpload();
                    }
                    s.bitmap !== t && (this._isSameTexture = !1);
                }
            }
        }, i.renderSubmit = function () {
            if (0 === this._numEle) return e._shaderSet = !1, 1;
            var t = this.shaderValue.textureHost;
            if (t) {
                var i = t.source;
                if (!t.bitmap || !i) return e._shaderSet = !1, 1;
                this.shaderValue.texture = i;
            }
            this._vb.bind_upload(this._ib);
            var n = wt.mainContext;
            if (V.activeBlendFunction !== this._blendFn && (n.enable(3042), this._blendFn(n),
                V.activeBlendFunction = this._blendFn), E.drawCall++, E.trianglesFaces += this._numEle / 3,
                this._preIsSameTextureShader && Ft.activeShader && e._shaderSet ? Ft.activeShader.uploadTexture2D(this.shaderValue.texture) : this.shaderValue.upload(),
                e._shaderSet = !0, this._texs.length > 1 && !this._isSameTexture) for (var s = t.bitmap, a = 0, r = Ft.activeShader, o = 0, h = this._texs.length; o < h; o++) {
                    var l = this._texs[o];
                    l.bitmap === s && o + 1 !== h || (r.uploadTexture2D(l.source), n.drawElements(4, 6 * (o - a + 1), 5123, this._startIdx + 6 * a * pt.BYTES_PIDX),
                        s = l.bitmap, a = o);
                } else n.drawElements(4, this._numEle, 5123, this._startIdx);
            return 1;
        }, e.create = function (t, i, n, s, a) {
            var r = e._cache._length ? e._cache[--e._cache._length] : new e();
            null == n && ((n = r._selfVb || (r._selfVb = Jt.create(-1))).clear(), s = 0), r._ib = i,
                r._vb = n, r._startIdx = s * pt.BYTES_PIDX, r._numEle = 0;
            var o = t._nBlendType;
            r._blendFn = t._targets ? V.targetFns[o] : V.fns[o], r.shaderValue = a, r.shaderValue.setValue(t._shader2D);
            var h = t._shader2D.filters;
            return h && r.shaderValue.setFilters(h), r;
        }, e._cache = (e._cache = [], e._cache._length = 0, e._cache), e._shaderSet = !0,
            e;
    }(), kt = function (t) {
        function e() {
            e.__super.call(this, laya.webgl.utils.MeshTexture.const_stride, 0, 0), this.canReuse = !0,
                this.setAttributes(laya.webgl.utils.MeshTexture._fixattriInfo);
        }
        s(e, "laya.webgl.utils.MeshTexture", vt);
        var i = e.prototype;
        return i.addData = function (t, i, n, s, a, r) {
            for (var o = t.length / 2, h = this._vb.needSize(o * e.const_stride) >> 2, l = this._vb.getFloat32Array(), c = 0, u = 0; u < o; u++) {
                var d = t[c], _ = t[c + 1], f = d * s.a + _ * s.c + s.tx, p = d * s.b + _ * s.d + s.ty;
                l[h++] = f, l[h++] = p, l[h++] = i[c], l[h++] = i[c + 1], c += 2;
            }
            this._vb.setNeedUpload();
            var g = this.vertNum;
            if (g > 0) {
                var v = n.length;
                v > e.tmpIdx.length && (e.tmpIdx = new Uint16Array(v));
                for (var m = 0; m < v; m++) e.tmpIdx[m] = n[m] + g;
                this._ib.appendU16Array(e.tmpIdx, n.length);
            } else this._ib.append(n);
            this._ib.setNeedUpload(), this.vertNum += o, this.indexNum += n.length;
        }, i.releaseMesh = function () {
            this._vb._byteLength = 0, this._ib._byteLength = 0, this.vertNum = 0, this.indexNum = 0,
                laya.webgl.utils.MeshTexture._POOL.push(this);
        }, i.destroy = function () {
            this._ib.destroy(), this._vb.destroy();
        }, e.getAMesh = function () {
            return laya.webgl.utils.MeshTexture._POOL.length ? laya.webgl.utils.MeshTexture._POOL.pop() : new e();
        }, e.const_stride = 16, e._POOL = [], n(e, ["_fixattriInfo", function () {
            return this._fixattriInfo = [5126, 2, 0, 5126, 2, 8];
        }, "tmpIdx", function () {
            return this.tmpIdx = new Uint16Array(4);
        }]), e;
    }(), Ft = function (t) {
        function e() {
            e.__super.call(this), this.lock = !0;
        }
        return s(e, "laya.webgl.shader.BaseShader", M), e.activeShader = null, e.bindShader = null,
            e;
    }(), Bt = function (t) {
        function e(t, i, n, s, a, r, o, h, l) {
            this._type = 0, this._svWidth = NaN, this._svHeight = NaN, this._preRenderTarget = null,
                this._alreadyResolved = !1, this._looked = !1, this._surfaceFormat = 0, this._surfaceType = 0,
                this._depthStencilFormat = 0, this._mipMap = !1, this._repeat = !1, this._minFifter = 0,
                this._magFifter = 0, this._destroy = !1, void 0 === n && (n = 6408), void 0 === s && (s = 5121),
                void 0 === a && (a = 34041), void 0 === r && (r = !1), void 0 === o && (o = !1),
                void 0 === h && (h = -1), void 0 === l && (l = -1), this._type = 1, this._w = t,
                this._h = i, this._surfaceFormat = n, this._surfaceType = s, this._depthStencilFormat = a,
                L.isConchWebGL && 34041 === this._depthStencilFormat && (this._depthStencilFormat = 33189),
                this._mipMap = r, this._repeat = o, this._minFifter = h, this._magFifter = l, this._createWebGLRenderTarget(),
                this.bitmap.lock = !0, e.__super.call(this, this.bitmap, k.INV_UV);
        }
        s(e, "laya.webgl.resource.RenderTarget2D", t);
        var n = e.prototype;
        return i.imps(n, {
            "laya.resource.IDispose": !0
        }), n.getType = function () {
            return this._type;
        }, n.getTexture = function () {
            return this;
        }, n.size = function (t, e) {
            this._w == t && this._h == e || (this._w = t, this._h = e, this.release(), 0 != this._w && 0 != this._h && this._createWebGLRenderTarget());
        }, n.release = function () {
            this.destroy();
        }, n.recycle = function () {
            e.POOL.push(this);
        }, n.start = function () {
            var t = wt.mainContext;
            return this._preRenderTarget = mt.curRenderTarget, mt.curRenderTarget = this, t.bindFramebuffer(36160, this.bitmap.frameBuffer),
                this._alreadyResolved = !1, 1 == this._type && (t.viewport(0, 0, this._w, this._h),
                    this._svWidth = mt.width, this._svHeight = mt.height, mt.width = this._w, mt.height = this._h,
                    Ft.activeShader = null), this;
        }, n.clear = function (t, e, i, n) {
            void 0 === t && (t = 0), void 0 === e && (e = 0), void 0 === i && (i = 0), void 0 === n && (n = 1);
            var s = wt.mainContext;
            s.clearColor(t, e, i, n);
            var a = 16384;
            switch (this._depthStencilFormat) {
                case 33189:
                    a |= 256;
                    break;

                case 36168:
                    a |= 1024;
                    break;

                case 34041:
                    a |= 256, a |= 1024;
            }
            s.clear(a);
        }, n.end = function () {
            var t = wt.mainContext;
            t.bindFramebuffer(36160, this._preRenderTarget ? this._preRenderTarget.bitmap.frameBuffer : null),
                this._alreadyResolved = !0, mt.curRenderTarget = this._preRenderTarget, 1 == this._type ? (t.viewport(0, 0, this._svWidth, this._svHeight),
                    mt.width = this._svWidth, mt.height = this._svHeight, Ft.activeShader = null) : t.viewport(0, 0, i.stage.width, i.stage.height);
        }, n.getData = function (t, e, i, n) {
            var s = wt.mainContext;
            s.bindFramebuffer(36160, this.bitmap.frameBuffer);
            if (!(36053 === s.checkFramebufferStatus(36160))) return s.bindFramebuffer(36160, null),
                null;
            var a = new Uint8Array(this._w * this._h * 4);
            return s.readPixels(t, e, i, n, this._surfaceFormat, this._surfaceType, a), s.bindFramebuffer(36160, null),
                a;
        }, n.destroy = function (e) {
            void 0 === e && (e = !1), this._destroy || (this._loaded = !1, this.bitmap.offAll(),
                this.bitmap.disposeResource(), this.bitmap.dispose(), this.offAll(), this.bitmap = null,
                this._alreadyResolved = !1, this._destroy = !0, t.prototype.destroy.call(this));
        }, n.dispose = function () { }, n._createWebGLRenderTarget = function () {
            this.bitmap = new Xt(this.width, this.height, this._surfaceFormat, this._surfaceType, this._depthStencilFormat, this._mipMap, this._repeat, this._minFifter, this._magFifter),
                this.bitmap.activeResource(), this._alreadyResolved = !0, this._destroy = !1, this._loaded = !0,
                this.bitmap.on("recovered", this, function (t) {
                    this.event("recovered");
                });
        }, a(0, n, "surfaceFormat", function () {
            return this._surfaceFormat;
        }), a(0, n, "magFifter", function () {
            return this._magFifter;
        }), a(0, n, "surfaceType", function () {
            return this._surfaceType;
        }), a(0, n, "mipMap", function () {
            return this._mipMap;
        }), a(0, n, "depthStencilFormat", function () {
            return this._depthStencilFormat;
        }), a(0, n, "minFifter", function () {
            return this._minFifter;
        }), a(0, n, "source", function () {
            return this._alreadyResolved ? i.superGet(k, this, "source") : null;
        }), e.create = function (t, i, n, s, a, r, o, h, l) {
            void 0 === n && (n = 6408), void 0 === s && (s = 5121), void 0 === a && (a = 34041),
                void 0 === r && (r = !1), void 0 === o && (o = !1), void 0 === h && (h = -1), void 0 === l && (l = -1);
            var c = e.POOL.pop();
            return c || (c = new e(t, i)), c.bitmap && c._w == t && c._h == i && c._surfaceFormat == n && c._surfaceType == s && c._depthStencilFormat == a && c._mipMap == r && c._repeat == o && c._minFifter == h && c._magFifter == l || (c._w = t,
                c._h = i, c._surfaceFormat = n, c._surfaceType = s, c._depthStencilFormat = a, L.isConchWebGL && 34041 === c._depthStencilFormat && (c._depthStencilFormat = 33189),
                c._mipMap = r, c._repeat = o, c._minFifter = h, c._magFifter = l, c.release(), c._createWebGLRenderTarget()),
                c;
        }, e.TYPE2D = 1, e.TYPE3D = 2, e.POOL = [], e;
    }(k), Ot = function (t) {
        function e() {
            this._glBuffer = null, this._buffer = null, this._bufferType = 0, this._bufferUsage = 0,
                this._byteLength = 0, e.__super.call(this), e._gl = wt.mainContext;
        }
        s(e, "laya.webgl.utils.Buffer", M);
        var i = e.prototype;
        return i._bind = function () {
            this.activeResource(), e._bindActive[this._bufferType] !== this._glBuffer && (34962 === this._bufferType && (e._bindVertexBuffer = this._glBuffer),
                e._gl.bindBuffer(this._bufferType, e._bindActive[this._bufferType] = this._glBuffer),
                Ft.activeShader = null);
        }, i.recreateResource = function () {
            this._glBuffer || (this._glBuffer = e._gl.createBuffer()), this.completeCreate();
        }, i.disposeResource = function () {
            this._glBuffer && (wt.mainContext.deleteBuffer(this._glBuffer), this._glBuffer = null),
                this.memorySize = 0;
        }, a(0, i, "bufferUsage", function () {
            return this._bufferUsage;
        }), e._gl = null, e._bindActive = {}, e._bindVertexBuffer = null, e._enableAtributes = [],
            e;
    }(), Nt = function (t) {
        function e(t) {
            this.texcoord = null, this.offsetX = 300, this.offsetY = 0, e.__super.call(this, 512, 0);
            var i = 8 * pt.BYTES_PE;
            this.position = [2, 5126, !1, i, 0], this.texcoord = [2, 5126, !1, i, 2 * pt.BYTES_PE],
                this.color = [4, 5126, !1, i, 4 * pt.BYTES_PE];
        }
        return s(e, "laya.webgl.shader.d2.skinAnishader.SkinSV", Ct), e;
    }(), Gt = function (t) {
        function e(t) {
            e.__super.call(this, 2, 0), this.color = [];
        }
        s(e, "laya.webgl.shader.d2.value.Color2dSV", Ct);
        return e.prototype.setValue = function (t) {
            t.fillStyle && (this.color = t.fillStyle._color._color), t.strokeStyle && (this.color = t.strokeStyle._color._color);
        }, e;
    }(), Ht = function (t) {
        function e(t) {
            this.u_colorMatrix = null, this.strength = 0, this.colorMat = null, this.colorAlpha = null,
                this.u_TexRange = [0, 1, 0, 1], this.u_offset = [0, 0], this.texcoord = Ct._TEXCOORD,
                e.__super.call(this, 256, 0);
        }
        s(e, "laya.webgl.shader.d2.value.FillTextureSV", Ct);
        var i = e.prototype;
        return i.setValue = function (t) {
            this.ALPHA = t.ALPHA, t.filters && this.setFilters(t.filters);
        }, i.clear = function () {
            this.texture = null, this.shader = null, this.defines.setValue(0);
        }, e;
    }(), zt = function (t) {
        function e(t) {
            this.u_colorMatrix = null, this.strength = 0, this.blurInfo = null, this.colorMat = null,
                this.colorAlpha = null, this.texcoord = Ct._TEXCOORD, void 0 === t && (t = 0), e.__super.call(this, 1, t);
        }
        s(e, "laya.webgl.shader.d2.value.TextureSV", Ct);
        var i = e.prototype;
        return i.setValue = function (t) {
            this.ALPHA = t.ALPHA, t.filters && this.setFilters(t.filters);
        }, i.clear = function () {
            this.texture = null, this.shader = null, this.defines.setValue(0);
        }, e;
    }(), Vt = function (t) {
        function e(t) {
            this.a_color = null, this.u_pos = [0, 0], e.__super.call(this, 4, 0), this.position = [2, 5126, !1, 5 * pt.BYTES_PE, 0],
                this.a_color = [3, 5126, !1, 5 * pt.BYTES_PE, 2 * pt.BYTES_PE];
        }
        return s(e, "laya.webgl.shader.d2.value.PrimitiveSV", Ct), e;
    }(), Ut = function (t) {
        function e() {
            this._atlaser = null, this._flashCacheImage = null, this._flashCacheImageNeedFlush = !1,
                e.__super.call(this);
        }
        s(e, "laya.webgl.atlas.AtlasWebGLCanvas", t);
        var i = e.prototype;
        return i.recreateResource = function () {
            var t = wt.mainContext, e = this._source = t.createTexture(), i = xt.curBindTexTarget, n = xt.curBindTexValue;
            xt.bindTexture(t, 3553, e), t.texImage2D(3553, 0, 6408, this._w, this._h, 0, 6408, 5121, null),
                t.texParameteri(3553, 10241, 9729), t.texParameteri(3553, 10240, 9729), t.texParameteri(3553, 10242, 33071),
                t.texParameteri(3553, 10243, 33071), i && n && xt.bindTexture(t, i, n), this.memorySize = this._w * this._h * 4,
                this.completeCreate();
        }, i.disposeResource = function () {
            this._source && (wt.mainContext.deleteTexture(this._source), this._source = null,
                this.memorySize = 0);
        }, i.texSubImage2D = function (t, e, i) {
            if (L.isFlash) {
                this._flashCacheImage || (this._flashCacheImage = m.create(""), this._flashCacheImage._image.createCanvas(this._w, this._h));
                var n = i.bitmapdata;
                this._flashCacheImage._image.copyPixels(n, 0, 0, n.width, n.height, t, e), this._flashCacheImageNeedFlush || (this._flashCacheImageNeedFlush = !0);
            } else {
                var s = wt.mainContext, a = xt.curBindTexTarget, r = xt.curBindTexValue;
                xt.bindTexture(s, 3553, this._source), L.isConchWebGL ? (i !== ConchTextCanvas && (t - 1 >= 0 && s.texSubImage2DEx(!0, 3553, 0, t - 1, e, 6408, 5121, i),
                    t + 1 <= this._w && s.texSubImage2DEx(!0, 3553, 0, t + 1, e, 6408, 5121, i), e - 1 >= 0 && s.texSubImage2DEx(!0, 3553, 0, t, e - 1, 6408, 5121, i),
                    e + 1 <= this._h && s.texSubImage2DEx(!0, 3553, 0, t, e + 1, 6408, 5121, i)), s.texSubImage2DEx(!0, 3553, 0, t, e, 6408, 5121, i)) : (s.pixelStorei(37441, !0),
                        t - 1 >= 0 && s.texSubImage2D(3553, 0, t - 1, e, 6408, 5121, i), t + 1 <= this._w && s.texSubImage2D(3553, 0, t + 1, e, 6408, 5121, i),
                        e - 1 >= 0 && s.texSubImage2D(3553, 0, t, e - 1, 6408, 5121, i), e + 1 <= this._h && s.texSubImage2D(3553, 0, t, e + 1, 6408, 5121, i),
                        s.texSubImage2D(3553, 0, t, e, 6408, 5121, i), s.pixelStorei(37441, !1)), a && r && xt.bindTexture(s, a, r);
            }
        }, i.texSubImage2DPixel = function (t, e, i, n, s) {
            var a = wt.mainContext, r = xt.curBindTexTarget, o = xt.curBindTexValue;
            xt.bindTexture(a, 3553, this._source);
            var h = new Uint8Array(s.data);
            L.isConchWebGL ? a.texSubImage2DEx(!0, 3553, 0, t, e, i, n, 6408, 5121, h) : (a.pixelStorei(37441, !0),
                a.texSubImage2D(3553, 0, t, e, i, n, 6408, 5121, h), a.pixelStorei(37441, !1)),
                r && o && xt.bindTexture(a, r, o);
        }, a(0, i, "width", t.prototype._$get_width, function (t) {
            this._w = t;
        }), a(0, i, "height", t.prototype._$get_height, function (t) {
            this._h = t;
        }), e;
    }(l), Wt = function (t) {
        function e() {
            this.flipY = !0, this.alwaysChange = !1, e.__super.call(this);
        }
        s(e, "laya.webgl.resource.WebGLCanvas", l);
        var i = e.prototype;
        return i.getCanvas = function () {
            return this._canvas;
        }, i.clear = function () {
            this._ctx && this._ctx.clear();
        }, i.destroy = function () {
            this._ctx && this._ctx.destroy(), this._ctx = null, laya.resource.Resource.prototype.destroy.call(this);
        }, i._setContext = function (t) {
            this._ctx = t;
        }, i.getContext = function (t, i) {
            return this._ctx ? this._ctx : this._ctx = e._createContext(this);
        }, i.size = function (t, e) {
            this._w == t && this._h == e || (this._w = t, this._h = e, this._ctx && this._ctx.size(t, e),
                this._canvas && (this._canvas.height = e, this._canvas.width = t));
        }, i.activeResource = function (t) {
            void 0 === t && (t = !1), this._source || this.recreateResource();
        }, i.recreateResource = function () {
            this.createWebGlTexture(), this.completeCreate();
        }, i.disposeResource = function () {
            this._source && !this.iscpuSource && (wt.mainContext.deleteTexture(this._source),
                this._source = null, this.memorySize = 0);
        }, i.createWebGlTexture = function () {
            var t = wt.mainContext;
            this._canvas;
            var i = this._source = t.createTexture();
            this.iscpuSource = !1;
            var n = xt.curBindTexTarget, s = xt.curBindTexValue;
            xt.bindTexture(t, 3553, i), t.pixelStorei(37440, this.flipY ? 1 : 0), L.isConchWebGL ? t.texImage2DEx(e.premulAlpha, 3553, 0, 6408, 6408, 5121, this._imgData) : (e.premulAlpha && t.pixelStorei(37441, !0),
                t.texImage2D(3553, 0, 6408, 6408, 5121, this._imgData), e.premulAlpha && t.pixelStorei(37441, !1)),
                t.texParameteri(3553, 10240, 9729), t.texParameteri(3553, 10241, 9729), t.texParameteri(3553, 10242, 33071),
                t.texParameteri(3553, 10243, 33071), t.pixelStorei(37440, 0), this.memorySize = this._w * this._h * 4,
                n && s && xt.bindTexture(t, n, s);
        }, i.reloadCanvasData = function () {
            var t = wt.mainContext;
            if (!this._source) throw "reloadCanvasData error, gl texture not created!";
            var i = xt.curBindTexTarget, n = xt.curBindTexValue;
            xt.bindTexture(t, 3553, this._source), L.isConchWebGL ? t.texImage2DEx(e.premulAlpha, 3553, 0, 6408, 6408, 5121, this._imgData) : (e.premulAlpha && t.pixelStorei(37441, !0),
                t.texImage2D(3553, 0, 6408, 6408, 5121, this._imgData), e.premulAlpha && t.pixelStorei(37441, !1)),
                t.pixelStorei(37440, 0), i && n && xt.bindTexture(t, i, n);
        }, i.texSubImage2D = function (t, e, i) {
            var n = wt.mainContext, s = xt.curBindTexTarget, a = xt.curBindTexValue;
            xt.bindTexture(n, 3553, this._source), L.isConchWebGL ? n.texSubImage2DEx(!0, 3553, 0, e, i, 6408, 5121, t._source) : (n.pixelStorei(37441, !0),
                n.texSubImage2D(3553, 0, e, i, 6408, 5121, t._source), n.pixelStorei(37441, !1)),
                s && a && xt.bindTexture(n, s, a);
        }, i.toBase64 = function (t, e, i) {
            var n = null;
            this._canvas && (n = this._canvas.toDataURL(t, e)), i.call(this, n);
        }, a(0, i, "context", function () {
            return this._ctx;
        }), a(0, i, "source", function () {
            return this.alwaysChange && this.reloadCanvasData(), this._source;
        }), a(0, i, "asBitmap", null, function (t) {
            this._ctx && (this._ctx.asBitmap = t);
        }), e._createContext = null, e.premulAlpha = !1, e;
    }(), Yt = function (t) {
        function e(t, i) {
            e.__super.call(this), this.char = t, this.isSpace = " " === t, this.xs = i.scaleX,
                this.ys = i.scaleY, this.font = i.font.toString(), this.fontSize = i.font.size,
                this.fillColor = i.fillColor, this.borderColor = i.borderColor, this.lineWidth = i.lineWidth,
                this.underLine = i.underLine;
            var n, s = L.isConchApp;
            s ? ((n = ConchTextCanvas)._source = ConchTextCanvas, n._source.canvas = ConchTextCanvas) : n = c.canvas.source,
                this.canvas = n, this._enableMerageInAtlas = !0, this._ctx = s ? n : this.canvas.getContext("2d", void 0);
            var a = F.measureText(this.char, this.font);
            this.cw = a.width * this.xs, this.ch = (a.height || this.fontSize) * this.ys, this.onresize(this.cw + 2 * _.CborderSize, this.ch + 2 * _.CborderSize),
                this.texture = new k(this);
        }
        s(e, "laya.webgl.resource.WebGLCharImage", l);
        var n = e.prototype;
        return i.imps(n, {
            "laya.webgl.resource.IMergeAtlasBitmap": !0
        }), n.active = function () {
            this.texture.active();
        }, n.recreateResource = function () {
            var t = L.isConchApp;
            if (this.onresize(this.cw + 2 * _.CborderSize, this.ch + 2 * _.CborderSize), this.canvas && (this.canvas.height = this._h,
                this.canvas.width = this._w), t) {
                var i = this.fontSize;
                1 == this.xs && 1 == this.ys || (i = parseInt(i * (this.xs > this.ys ? this.xs : this.ys) + ""));
                var n = "normal 100 " + this.font;
                n = n.replace(e._fontSizeReg, i), this.borderColor && (n += " 1 " + this.borderColor),
                    this._ctx.font = n, this._ctx.textBaseline = "top", this._ctx.fillStyle = this.fillColor,
                    this._ctx.fillText(this.char, _.CborderSize, _.CborderSize, null, null, null);
            } else {
                if (this._ctx.save(), this._ctx.lineJoin = "round", this._ctx.clearRect(0, 0, this.cw + 2 * _.CborderSize, this.ch + 2 * _.CborderSize),
                    this._ctx.font = this.font, D.RightToLeft && (this._ctx.textAlign = "end"), this._ctx.textBaseline = "top",
                    1 != this.xs || 1 != this.ys ? this._ctx.setTransform(this.xs, 0, 0, this.ys, _.CborderSize, _.CborderSize) : this._ctx.setTransform(1, 0, 0, 1, _.CborderSize, _.CborderSize),
                    this.fillColor && this.borderColor ? (this._ctx.strokeStyle = this.borderColor,
                        this._ctx.lineWidth = this.lineWidth, this._ctx.strokeText(this.char, 0, 0, null, null, 0, null),
                        this._ctx.fillStyle = this.fillColor, this._ctx.fillText(this.char, 0, 0, null, null, null)) : -1 === this.lineWidth ? (this._ctx.fillStyle = this.fillColor ? this.fillColor : "white",
                            this._ctx.fillText(this.char, 0, 0, null, null, null)) : (this._ctx.strokeStyle = this.borderColor ? this.borderColor : "white",
                                this._ctx.lineWidth = this.lineWidth, this._ctx.strokeText(this.char, 0, 0, null, null, 0, null)),
                    this.underLine) {
                    this._ctx.lineWidth = 1, this._ctx.strokeStyle = this.fillColor, this._ctx.beginPath(),
                        this._ctx.moveTo(0, this.fontSize + 1);
                    var s = this._ctx.measureText(this.char).width + 1;
                    this._ctx.lineTo(s, this.fontSize + 1), this._ctx.stroke();
                }
                this._ctx.restore();
            }
            this.borderSize = _.CborderSize, this.completeCreate();
        }, n.onresize = function (t, e) {
            this._w = t, this._h = e, this._allowMerageInAtlas = !0;
        }, n.clearAtlasSource = function () { }, a(0, n, "allowMerageInAtlas", function () {
            return this._allowMerageInAtlas;
        }), a(0, n, "atlasSource", function () {
            return this.canvas;
        }), a(0, n, "atlasImgData", function () {
            return !e.canUseCanvas && this._ctx.getImageData ? this._ctx.getImageData(0, 0, this._w, this._h) : null;
        }), a(0, n, "enableMerageInAtlas", function () {
            return this._enableMerageInAtlas;
        }, function (t) {
            this._enableMerageInAtlas = t;
        }), e.createOneChar = function (t, i) {
            return new e(t, i);
        }, e.canUseCanvas = !0, e._fontSizeReg = new RegExp("\\d+(?=px)", "g"), e;
    }(), Xt = function (t) {
        function e(t, i, n, s, a, r, o, h, l) {
            void 0 === n && (n = 6408), void 0 === s && (s = 5121), void 0 === a && (a = 34041),
                void 0 === r && (r = !1), void 0 === o && (o = !1), void 0 === h && (h = -1), void 0 === l && (l = 1),
                e.__super.call(this), this._w = t, this._h = i, this._surfaceFormat = n, this._surfaceType = s,
                this._depthStencilFormat = a, L.isConchWebGL && 34041 === this._depthStencilFormat && (this._depthStencilFormat = 33189),
                this._mipMap = r, this._repeat = o, this._minFifter = h, this._magFifter = l;
        }
        s(e, "laya.webgl.resource.WebGLRenderTarget", l);
        var i = e.prototype;
        return i.recreateResource = function () {
            var t = wt.mainContext;
            this._frameBuffer || (this._frameBuffer = t.createFramebuffer()), this._source || (this._source = t.createTexture());
            var e = xt.curBindTexTarget, i = xt.curBindTexValue;
            xt.bindTexture(t, 3553, this._source), t.texImage2D(3553, 0, 6408, this._w, this._h, 0, this._surfaceFormat, this._surfaceType, null);
            var n = this._minFifter, s = this._magFifter, a = this._repeat ? 10497 : 33071, r = o.isPOT(this._w, this._h);
            if (r ? (this._mipMap ? -1 !== n || (n = 9987) : -1 !== n || (n = 9729), -1 !== s || (s = 9729),
                t.texParameteri(3553, 10241, n), t.texParameteri(3553, 10240, s), t.texParameteri(3553, 10242, a),
                t.texParameteri(3553, 10243, a), this._mipMap && t.generateMipmap(3553)) : (-1 !== n || (n = 9729),
                    -1 !== s || (s = 9729), t.texParameteri(3553, 10241, n), t.texParameteri(3553, 10240, s),
                    t.texParameteri(3553, 10242, 33071), t.texParameteri(3553, 10243, 33071)), t.bindFramebuffer(36160, this._frameBuffer),
                t.framebufferTexture2D(36160, 36064, 3553, this._source, 0), this._depthStencilFormat) switch (this._depthStencilBuffer || (this._depthStencilBuffer = t.createRenderbuffer()),
                t.bindRenderbuffer(36161, this._depthStencilBuffer), t.renderbufferStorage(36161, this._depthStencilFormat, this._w, this._h),
                this._depthStencilFormat) {
                    case 33189:
                        t.framebufferRenderbuffer(36160, 36096, 36161, this._depthStencilBuffer);
                        break;

                    case 36168:
                        t.framebufferRenderbuffer(36160, 36128, 36161, this._depthStencilBuffer);
                        break;

                    case 34041:
                        t.framebufferRenderbuffer(36160, 33306, 36161, this._depthStencilBuffer);
                }
            t.bindFramebuffer(36160, null), e && i && xt.bindTexture(t, e, i), t.bindRenderbuffer(36161, null),
                r && this._mipMap ? this.memorySize = this._w * this._h * 4 * (1 + 1 / 3) : this.memorySize = this._w * this._h * 4,
                this.completeCreate();
        }, i.disposeResource = function () {
            this._frameBuffer && (wt.mainContext.deleteTexture(this._source), wt.mainContext.deleteFramebuffer(this._frameBuffer),
                wt.mainContext.deleteRenderbuffer(this._depthStencilBuffer), this._source = null,
                this._frameBuffer = null, this._depthStencilBuffer = null, this.memorySize = 0);
        }, a(0, i, "depthStencilBuffer", function () {
            return this._depthStencilBuffer;
        }), a(0, i, "frameBuffer", function () {
            return this._frameBuffer;
        }), e;
    }(), Kt = function (t) {
        function e(t, i, n, s, a, r, o) {
            this.offsetX = 0, this.offsetY = 0, e.__super.call(this), this.repeat = !0, this.mipmap = !1,
                this.minFifter = -1, this.magFifter = -1, this.atlasImage = r, this.canvas = t,
                this._ctx = t.getContext("2d", void 0), this._w = s, this._h = a, this.offsetX = i,
                this.offsetY = n, this.src = o, this._enableMerageInAtlas = !0, H.enabled && this._w < H.atlasLimitWidth && this._h < H.atlasLimitHeight ? this._allowMerageInAtlas = !0 : this._allowMerageInAtlas = !1;
        }
        s(e, "laya.webgl.resource.WebGLSubImage", l);
        var n = e.prototype;
        return i.imps(n, {
            "laya.webgl.resource.IMergeAtlasBitmap": !0
        }), n.size = function (t, e) {
            this._w = t, this._h = e, this._ctx && this._ctx.size(t, e), this.canvas && (this.canvas.height = e,
                this.canvas.width = t);
        }, n.recreateResource = function () {
            this.size(this._w, this._h), this._ctx.drawImage(this.atlasImage, this.offsetX, this.offsetY, this._w, this._h, 0, 0, this._w, this._h),
                this._allowMerageInAtlas && this._enableMerageInAtlas ? this.memorySize = 0 : this.createWebGlTexture(),
                this.completeCreate();
        }, n.createWebGlTexture = function () {
            var t = wt.mainContext;
            if (!this.canvas) throw "create GLTextur err:no data:" + this.canvas;
            var e = this._source = t.createTexture(), i = xt.curBindTexTarget, n = xt.curBindTexValue;
            xt.bindTexture(t, 3553, e), L.isConchWebGL ? t.texImage2DEx(!0, 3553, 0, 6408, 6408, 5121, this.canvas) : (t.pixelStorei(37441, !0),
                t.texImage2D(3553, 0, 6408, 6408, 5121, this.canvas), t.pixelStorei(37441, !1));
            var s = this.minFifter, a = this.magFifter, r = this.repeat ? 10497 : 33071, h = o.isPOT(this.width, this.height);
            h ? (this.mipmap ? -1 !== s || (s = 9987) : -1 !== s || (s = 9729), -1 !== a || (a = 9729),
                t.texParameteri(3553, 10240, a), t.texParameteri(3553, 10241, s), t.texParameteri(3553, 10242, r),
                t.texParameteri(3553, 10243, r), this.mipmap && t.generateMipmap(3553)) : (-1 !== s || (s = 9729),
                    -1 !== a || (a = 9729), t.texParameteri(3553, 10241, s), t.texParameteri(3553, 10240, a),
                    t.texParameteri(3553, 10242, 33071), t.texParameteri(3553, 10243, 33071)), i && n && xt.bindTexture(t, i, n),
                this.canvas = null, h && this.mipmap ? this.memorySize = this._w * this._h * 4 * (1 + 1 / 3) : this.memorySize = this._w * this._h * 4;
        }, n.disposeResource = function () {
            H.enabled && this._allowMerageInAtlas || !this._source || (wt.mainContext.deleteTexture(this._source),
                this._source = null, this.memorySize = 0);
        }, n.clearAtlasSource = function () { }, a(0, n, "allowMerageInAtlas", function () {
            return this._allowMerageInAtlas;
        }), a(0, n, "atlasSource", function () {
            return this.canvas;
        }), a(0, n, "enableMerageInAtlas", function () {
            return this._allowMerageInAtlas;
        }, function (t) {
            this._allowMerageInAtlas = t;
        }), e;
    }(), jt = function (t) {
        function e(t, i, n, s) {
            if (this._curActTexIndex = 0, this.tag = {}, this._program = null, this._params = null,
                this._paramsMap = {}, this._offset = 0, e.__super.call(this), !t || !i) throw "Shader Error";
            this._id = ++e._count, this._vs = t, this._ps = i, this._nameMap = s || {}, null != n && (e.sharders[n] = this);
        }
        s(e, "laya.webgl.shader.Shader", Ft);
        var i = e.prototype;
        return i.recreateResource = function () {
            this._compile(), this.completeCreate(), this.memorySize = 0;
        }, i.disposeResource = function () {
            wt.mainContext.deleteShader(this._vshader), wt.mainContext.deleteShader(this._pshader),
                wt.mainContext.deleteProgram(this._program), this._vshader = this._pshader = this._program = null,
                this._params = null, this._paramsMap = {}, this.memorySize = 0, this._curActTexIndex = 0;
        }, i._compile = function () {
            if (this._vs && this._ps && !this._params) {
                this._reCompile = !0, this._params = [];
                var t = [this._vs, this._ps], i = wt.mainContext;
                if (this._program = i.createProgram(), this._vshader = e._createShader(i, t[0], 35633),
                    this._pshader = e._createShader(i, t[1], 35632), i.attachShader(this._program, this._vshader),
                    i.attachShader(this._program, this._pshader), i.linkProgram(this._program), !L.isConchApp && !i.getProgramParameter(this._program, 35714)) throw i.getProgramInfoLog(this._program);
                var n, s = 0, a = 0, r = 0;
                for (r = L.isConchApp ? i.getProgramParameterEx(this._vs, this._ps, "", 35721) : i.getProgramParameter(this._program, 35721),
                    s = 0; s < r; s++) {
                    var o = null;
                    n = {
                        vartype: "attribute",
                        glfun: null,
                        ivartype: 0,
                        attrib: o = L.isConchApp ? i.getActiveAttribEx(this._vs, this._ps, "", s) : i.getActiveAttrib(this._program, s),
                        location: i.getAttribLocation(this._program, o.name),
                        name: o.name,
                        type: o.type,
                        isArray: !1,
                        isSame: !1,
                        preValue: null,
                        indexOfParams: 0
                    }, this._params.push(n);
                }
                var h = 0;
                for (h = L.isConchApp ? i.getProgramParameterEx(this._vs, this._ps, "", 35718) : i.getProgramParameter(this._program, 35718),
                    s = 0; s < h; s++) {
                    var l = null;
                    l = L.isConchApp ? i.getActiveUniformEx(this._vs, this._ps, "", s) : i.getActiveUniform(this._program, s),
                        (n = {
                            vartype: "uniform",
                            glfun: null,
                            ivartype: 1,
                            attrib: o,
                            location: i.getUniformLocation(this._program, l.name),
                            name: l.name,
                            type: l.type,
                            isArray: !1,
                            isSame: !1,
                            preValue: null,
                            indexOfParams: 0
                        }).name.indexOf("[0]") > 0 && (n.name = n.name.substr(0, n.name.length - 3), n.isArray = !0,
                            n.location = i.getUniformLocation(this._program, n.name)), this._params.push(n);
                }
                for (s = 0, a = this._params.length; s < a; s++) if (n = this._params[s], n.indexOfParams = s,
                    n.index = 1, n.value = [n.location, null], n.codename = n.name, n.name = this._nameMap[n.codename] ? this._nameMap[n.codename] : n.codename,
                    this._paramsMap[n.name] = n, n._this = this, n.uploadedValue = [], "attribute" !== n.vartype) switch (n.type) {
                        case 5124:
                            n.fun = n.isArray ? this._uniform1iv : this._uniform1i;
                            break;

                        case 5126:
                            n.fun = n.isArray ? this._uniform1fv : this._uniform1f;
                            break;

                        case 35664:
                            n.fun = n.isArray ? this._uniform_vec2v : this._uniform_vec2;
                            break;

                        case 35665:
                            n.fun = n.isArray ? this._uniform_vec3v : this._uniform_vec3;
                            break;

                        case 35666:
                            n.fun = n.isArray ? this._uniform_vec4v : this._uniform_vec4;
                            break;

                        case 35678:
                            n.fun = this._uniform_sampler2D;
                            break;

                        case 35680:
                            n.fun = this._uniform_samplerCube;
                            break;

                        case 35676:
                            n.glfun = i.uniformMatrix4fv, n.fun = this._uniformMatrix4fv;
                            break;

                        case 35670:
                            n.fun = this._uniform1i;
                            break;

                        case 35674:
                        case 35675:
                        default:
                            throw new Error("compile shader err!");
                    } else n.fun = this._attribute;
            }
        }, i.getUniform = function (t) {
            return this._paramsMap[t];
        }, i._attribute = function (t, e) {
            var i = wt.mainContext, n = Ot._enableAtributes, s = t.location;
            return n[s] || i.enableVertexAttribArray(s), i.vertexAttribPointer(s, e[0], e[1], e[2], e[3], e[4] + this._offset),
                n[s] = Ot._bindVertexBuffer, 1;
        }, i._uniform1f = function (t, e) {
            var i = t.uploadedValue;
            return i[0] !== e ? (wt.mainContext.uniform1f(t.location, i[0] = e), 1) : 0;
        }, i._uniform1fv = function (t, e) {
            if (e.length < 4) {
                var i = t.uploadedValue;
                return i[0] !== e[0] || i[1] !== e[1] || i[2] !== e[2] || i[3] !== e[3] ? (wt.mainContext.uniform1fv(t.location, e),
                    i[0] = e[0], i[1] = e[1], i[2] = e[2], i[3] = e[3], 1) : 0;
            }
            return wt.mainContext.uniform1fv(t.location, e), 1;
        }, i._uniform_vec2 = function (t, e) {
            var i = t.uploadedValue;
            return i[0] !== e[0] || i[1] !== e[1] ? (wt.mainContext.uniform2f(t.location, i[0] = e[0], i[1] = e[1]),
                1) : 0;
        }, i._uniform_vec2v = function (t, e) {
            if (e.length < 2) {
                var i = t.uploadedValue;
                return i[0] !== e[0] || i[1] !== e[1] || i[2] !== e[2] || i[3] !== e[3] ? (wt.mainContext.uniform2fv(t.location, e),
                    i[0] = e[0], i[1] = e[1], i[2] = e[2], i[3] = e[3], 1) : 0;
            }
            return wt.mainContext.uniform2fv(t.location, e), 1;
        }, i._uniform_vec3 = function (t, e) {
            var i = t.uploadedValue;
            return i[0] !== e[0] || i[1] !== e[1] || i[2] !== e[2] ? (wt.mainContext.uniform3f(t.location, i[0] = e[0], i[1] = e[1], i[2] = e[2]),
                1) : 0;
        }, i._uniform_vec3v = function (t, e) {
            return wt.mainContext.uniform3fv(t.location, e), 1;
        }, i._uniform_vec4 = function (t, e) {
            var i = t.uploadedValue;
            return i[0] !== e[0] || i[1] !== e[1] || i[2] !== e[2] || i[3] !== e[3] ? (wt.mainContext.uniform4f(t.location, i[0] = e[0], i[1] = e[1], i[2] = e[2], i[3] = e[3]),
                1) : 0;
        }, i._uniform_vec4v = function (t, e) {
            return wt.mainContext.uniform4fv(t.location, e), 1;
        }, i._uniformMatrix2fv = function (t, e) {
            return wt.mainContext.uniformMatrix2fv(t.location, !1, e), 1;
        }, i._uniformMatrix3fv = function (t, e) {
            return wt.mainContext.uniformMatrix3fv(t.location, !1, e), 1;
        }, i._uniformMatrix4fv = function (t, e) {
            return wt.mainContext.uniformMatrix4fv(t.location, !1, e), 1;
        }, i._uniform1i = function (t, e) {
            var i = t.uploadedValue;
            return i[0] !== e ? (wt.mainContext.uniform1i(t.location, i[0] = e), 1) : 0;
        }, i._uniform1iv = function (t, e) {
            return wt.mainContext.uniform1iv(t.location, e), 1;
        }, i._uniform_ivec2 = function (t, e) {
            var i = t.uploadedValue;
            return i[0] !== e[0] || i[1] !== e[1] ? (wt.mainContext.uniform2i(t.location, i[0] = e[0], i[1] = e[1]),
                1) : 0;
        }, i._uniform_ivec2v = function (t, e) {
            return wt.mainContext.uniform2iv(t.location, e), 1;
        }, i._uniform_vec3i = function (t, e) {
            var i = t.uploadedValue;
            return i[0] !== e[0] || i[1] !== e[1] || i[2] !== e[2] ? (wt.mainContext.uniform3i(t.location, i[0] = e[0], i[1] = e[1], i[2] = e[2]),
                1) : 0;
        }, i._uniform_vec3vi = function (t, e) {
            return wt.mainContext.uniform3iv(t.location, e), 1;
        }, i._uniform_vec4i = function (t, e) {
            var i = t.uploadedValue;
            return i[0] !== e[0] || i[1] !== e[1] || i[2] !== e[2] || i[3] !== e[3] ? (wt.mainContext.uniform4i(t.location, i[0] = e[0], i[1] = e[1], i[2] = e[2], i[3] = e[3]),
                1) : 0;
        }, i._uniform_vec4vi = function (t, e) {
            return wt.mainContext.uniform4iv(t.location, e), 1;
        }, i._uniform_sampler2D = function (t, i) {
            var n = wt.mainContext, s = t.uploadedValue;
            return null == s[0] ? (s[0] = this._curActTexIndex, n.uniform1i(t.location, this._curActTexIndex),
                n.activeTexture(e._TEXTURES[this._curActTexIndex]), xt.bindTexture(n, 3553, i),
                this._curActTexIndex++, 1) : (n.activeTexture(e._TEXTURES[s[0]]), xt.bindTexture(n, 3553, i),
                    0);
        }, i._uniform_samplerCube = function (t, i) {
            var n = wt.mainContext, s = t.uploadedValue;
            return null == s[0] ? (s[0] = this._curActTexIndex, n.uniform1i(t.location, this._curActTexIndex),
                n.activeTexture(e._TEXTURES[this._curActTexIndex]), xt.bindTexture(n, 34067, i),
                this._curActTexIndex++, 1) : (n.activeTexture(e._TEXTURES[s[0]]), xt.bindTexture(n, 34067, i),
                    0);
        }, i._noSetValue = function (t) {
            console.log("no....:" + t.name);
        }, i.uploadOne = function (t, e) {
            this.activeResource(), xt.UseProgram(this._program);
            var i = this._paramsMap[t];
            i.fun.call(this, i, e);
        }, i.uploadTexture2D = function (t) {
            E.shaderCall++;
            var e = wt.mainContext;
            e.activeTexture(33984), xt.bindTexture(e, 3553, t);
        }, i.upload = function (t, e) {
            Ft.activeShader = Ft.bindShader = this, this._lastUseFrameCount === E.loopCount || this.activeResource(),
                xt.UseProgram(this._program), this._reCompile ? (e = this._params, this._reCompile = !1) : e = e || this._params;
            wt.mainContext;
            for (var i, n, s = e.length, a = 0, r = 0; r < s; r++) null !== (n = t[(i = e[r]).name]) && (a += i.fun.call(this, i, n));
            E.shaderCall += a;
        }, i.uploadArray = function (t, e, i) {
            Ft.activeShader = this, Ft.bindShader = this, this.activeResource(), xt.UseProgram(this._program);
            this._params;
            for (var n, s, a = 0, r = e - 2; r >= 0; r -= 2) (s = this._paramsMap[t[r]]) && null != (n = t[r + 1]) && (i && i[s.name] && i[s.name].bind(),
                a += s.fun.call(this, s, n));
            E.shaderCall += a;
        }, i.getParams = function () {
            return this._params;
        }, e.getShader = function (t) {
            return e.sharders[t];
        }, e.create = function (t, i, n, s) {
            return new e(t, i, n, s);
        }, e.withCompile = function (t, i, n, s) {
            if (n && e.sharders[n]) return e.sharders[n];
            var a = e._preCompileShader[2e-4 * t];
            if (!a) throw new Error("withCompile shader err!" + t);
            return a.createShader(i, n, s);
        }, e.withCompile2D = function (t, i, n, s, a) {
            if (s && e.sharders[s]) return e.sharders[s];
            var r = e._preCompileShader[2e-4 * t + i];
            if (!r) throw new Error("withCompile shader err!" + t + " " + i);
            return r.createShader(n, s, a);
        }, e.addInclude = function (t, e) {
            yt.addInclude(t, e);
        }, e.preCompile = function (t, i, n, s) {
            var a = 2e-4 * t;
            e._preCompileShader[a] = new yt(a, i, n, s);
        }, e.preCompile2D = function (t, i, n, s, a) {
            var r = 2e-4 * t + i;
            e._preCompileShader[r] = new yt(r, n, s, a);
        }, e._createShader = function (t, e, i) {
            var n = t.createShader(i);
            return t.shaderSource(n, e), t.compileShader(n), n;
        }, e._TEXTURES = [33984, 33985, 33986, 33987, 33988, 33989, 33990, , 33991, 33992],
            e._count = 0, e._preCompileShader = {}, e.SHADERNAME2ID = 2e-4, e.sharders = (e.sharders = [],
                e.sharders.length = 32, e.sharders), n(e, ["nameKey", function () {
                    return this.nameKey = new R();
                }]), e;
    }(), qt = function (t) {
        function e() {
            this._maxsize = 0, this._upload = !0, this._uploadSize = 0, e.__super.call(this),
                this.lock = !0;
        }
        s(e, "laya.webgl.utils.Buffer2D", t);
        var i = e.prototype;
        return i.needSize = function (t) {
            var e = this._byteLength;
            if (t) {
                var i = this._byteLength + t;
                i <= this._buffer.byteLength || this._resizeBuffer(i << 1, !0), this._byteLength = i;
            }
            return e;
        }, i._bufferData = function () {
            this._maxsize = Math.max(this._maxsize, this._byteLength), E.loopCount % 30 == 0 && (this._buffer.byteLength > this._maxsize + 64 && (this.memorySize = this._buffer.byteLength,
                this._buffer = this._buffer.slice(0, this._maxsize + 64), this._checkArrayUse()),
                this._maxsize = this._byteLength), this._uploadSize < this._buffer.byteLength && (this._uploadSize = this._buffer.byteLength,
                    Ot._gl.bufferData(this._bufferType, this._uploadSize, this._bufferUsage), this.memorySize = this._uploadSize),
                Ot._gl.bufferSubData(this._bufferType, 0, this._buffer);
        }, i._bufferSubData = function (t, e, i) {
            if (void 0 === t && (t = 0), void 0 === e && (e = 0), void 0 === i && (i = 0), this._maxsize = Math.max(this._maxsize, this._byteLength),
                E.loopCount % 30 == 0 && (this._buffer.byteLength > this._maxsize + 64 && (this.memorySize = this._buffer.byteLength,
                    this._buffer = this._buffer.slice(0, this._maxsize + 64), this._checkArrayUse()),
                    this._maxsize = this._byteLength), this._uploadSize < this._buffer.byteLength && (this._uploadSize = this._buffer.byteLength,
                        Ot._gl.bufferData(this._bufferType, this._uploadSize, this._bufferUsage), this.memorySize = this._uploadSize),
                e || i) {
                var n = this._buffer.slice(e, i);
                Ot._gl.bufferSubData(this._bufferType, t, n);
            } else Ot._gl.bufferSubData(this._bufferType, t, this._buffer);
        }, i._checkArrayUse = function () { }, i._bind_upload = function () {
            return !!this._upload && (this._upload = !1, this._bind(), this._bufferData(), !0);
        }, i._bind_subUpload = function (t, e, i) {
            return void 0 === t && (t = 0), void 0 === e && (e = 0), void 0 === i && (i = 0),
                !!this._upload && (this._upload = !1, this._bind(), this._bufferSubData(t, e, i),
                    !0);
        }, i._resizeBuffer = function (t, e) {
            if (t < this._buffer.byteLength) return this;
            if (this.memorySize = t, e && this._buffer && this._buffer.byteLength > 0) {
                var i = new ArrayBuffer(t);
                new Uint8Array(i).set(new Uint8Array(this._buffer), 0), this._buffer = i;
            } else this._buffer = new ArrayBuffer(t);
            return this._checkArrayUse(), this._upload = !0, this;
        }, i.append = function (t) {
            this._upload = !0;
            var e, i = 0;
            i = t.byteLength, t instanceof Uint8Array ? (this._resizeBuffer(this._byteLength + i, !0),
                e = new Uint8Array(this._buffer, this._byteLength)) : t instanceof Uint16Array ? (this._resizeBuffer(this._byteLength + i, !0),
                    e = new Uint16Array(this._buffer, this._byteLength)) : t instanceof Float32Array && (this._resizeBuffer(this._byteLength + i, !0),
                        e = new Float32Array(this._buffer, this._byteLength)), e.set(t, 0), this._byteLength += i,
                this._checkArrayUse();
        }, i.appendU16Array = function (t, e) {
            this._resizeBuffer(this._byteLength + 2 * e, !0);
            for (var i = new Uint16Array(this._buffer, this._byteLength, e), n = 0; n < e; n++) i[n] = t[n];
            this._byteLength += 2 * e, this._checkArrayUse();
        }, i.appendEx = function (t, e) {
            this._upload = !0;
            var i = 0;
            i = t.byteLength, this._resizeBuffer(this._byteLength + i, !0), new e(this._buffer, this._byteLength).set(t, 0),
                this._byteLength += i, this._checkArrayUse();
        }, i.appendEx2 = function (t, e, i, n) {
            void 0 === n && (n = 1), this._upload = !0;
            var s, a = 0;
            a = i * n, this._resizeBuffer(this._byteLength + a, !0), s = new e(this._buffer, this._byteLength);
            var r = 0;
            for (r = 0; r < i; r++) s[r] = t[r];
            this._byteLength += a, this._checkArrayUse();
        }, i.getBuffer = function () {
            return this._buffer;
        }, i.setNeedUpload = function () {
            this._upload = !0;
        }, i.getNeedUpload = function () {
            return this._upload;
        }, i.upload = function () {
            var t = this._bind_upload();
            return Ot._gl.bindBuffer(this._bufferType, null), Ot._bindActive[this._bufferType] = null,
                Ft.activeShader = null, t;
        }, i.subUpload = function (t, e, i) {
            void 0 === t && (t = 0), void 0 === e && (e = 0), void 0 === i && (i = 0);
            var n = this._bind_subUpload();
            return Ot._gl.bindBuffer(this._bufferType, null), Ot._bindActive[this._bufferType] = null,
                Ft.activeShader = null, n;
        }, i.disposeResource = function () {
            t.prototype.disposeResource.call(this), this._upload = !0, this._uploadSize = 0;
        }, i.clear = function () {
            this._byteLength = 0, this._upload = !0;
        }, a(0, i, "bufferLength", function () {
            return this._buffer.byteLength;
        }), a(0, i, "byteLength", null, function (t) {
            this._byteLength !== t && (t <= this._buffer.byteLength || this._resizeBuffer(2 * t + 256, !0),
                this._byteLength = t);
        }), e.__int__ = function (t) {
            Zt.QuadrangleIB = Zt.create(35044), gt.fillIBQuadrangle(Zt.QuadrangleIB, 16);
        }, e.FLOAT32 = 4, e.SHORT = 2, e;
    }(Ot), $t = (function (t) {
        function e(t) {
            this.u_blurX = !1, this.u_color = null, this.u_offset = null, this.u_strength = NaN,
                this.u_texW = 0, this.u_texH = 0, e.__super.call(this, 9);
        }
        s(e, "laya.webgl.shader.d2.value.GlowSV", t);
        var i = e.prototype;
        i.setValue = function (e) {
            t.prototype.setValue.call(this, e);
        }, i.clear = function () {
            t.prototype.clear.call(this);
        };
    }(zt), function (t) {
        function e(t) {
            e.__super.call(this, 64), this.defines.add(64);
        }
        s(e, "laya.webgl.shader.d2.value.TextSV", t);
        var i = e.prototype;
        return i.release = function () {
            e.pool[e._length++] = this, this.clear();
        }, i.clear = function () {
            t.prototype.clear.call(this);
        }, e.create = function () {
            return e._length ? e.pool[--e._length] : new e(null);
        }, e.pool = [], e._length = 0, e;
    }(zt)), Qt = function (t) {
        function e(t, i, n, s) {
            this._params2dQuick1 = null, this._params2dQuick2 = null, this._shaderValueWidth = NaN,
                this._shaderValueHeight = NaN, e.__super.call(this, t, i, n, s);
        }
        s(e, "laya.webgl.shader.d2.Shader2X", t);
        var i = e.prototype;
        return i.upload2dQuick1 = function (t) {
            this.upload(t, this._params2dQuick1 || this._make2dQuick1());
        }, i._make2dQuick1 = function () {
            if (!this._params2dQuick1) {
                this.activeResource(), this._params2dQuick1 = [];
                for (var t, e = this._params, i = 0, n = e.length; i < n; i++) t = e[i], (L.isFlash || "size" !== t.name && "position" !== t.name && "texcoord" !== t.name) && this._params2dQuick1.push(t);
            }
            return this._params2dQuick1;
        }, i.disposeResource = function () {
            t.prototype.disposeResource.call(this), this._params2dQuick1 = null, this._params2dQuick2 = null;
        }, i.upload2dQuick2 = function (t) {
            this.upload(t, this._params2dQuick2 || this._make2dQuick2());
        }, i._make2dQuick2 = function () {
            if (!this._params2dQuick2) {
                this.activeResource(), this._params2dQuick2 = [];
                for (var t, e = this._params, i = 0, n = e.length; i < n; i++) t = e[i], (L.isFlash || "size" !== t.name) && this._params2dQuick2.push(t);
            }
            return this._params2dQuick2;
        }, e.create = function (t, i, n, s) {
            return new e(t, i, n, s);
        }, e;
    }(jt), Zt = function (t) {
        function e(t) {
            this._uint8Array = null, this._uint16Array = null, void 0 === t && (t = 35044),
                e.__super.call(this), this._bufferUsage = t, this._bufferType = 34963, L.isFlash || (this._buffer = new ArrayBuffer(8));
        }
        s(e, "laya.webgl.utils.IndexBuffer2D", qt);
        var i = e.prototype;
        return i._checkArrayUse = function () {
            this._uint8Array && (this._uint8Array = new Uint8Array(this._buffer)), this._uint16Array && (this._uint16Array = new Uint16Array(this._buffer));
        }, i.getUint8Array = function () {
            return this._uint8Array || (this._uint8Array = new Uint8Array(this._buffer));
        }, i.getUint16Array = function () {
            return this._uint16Array || (this._uint16Array = new Uint16Array(this._buffer));
        }, i.destory = function () {
            this._uint16Array = null, this._uint8Array = null, this._buffer = null;
        }, e.QuadrangleIB = null, e.create = function (t) {
            return void 0 === t && (t = 35044), new e(t);
        }, e;
    }(), Jt = function (t) {
        function e(t, i) {
            this._floatArray32 = null, this._vertexStride = 0, e.__super.call(this), this._vertexStride = t,
                this._bufferUsage = i, this._bufferType = 34962, L.isFlash || (this._buffer = new ArrayBuffer(8)),
                this.getFloat32Array();
        }
        s(e, "laya.webgl.utils.VertexBuffer2D", t);
        var i = e.prototype;
        return i.getFloat32Array = function () {
            return this._floatArray32 || (this._floatArray32 = new Float32Array(this._buffer));
        }, i.bind = function (t) {
            t && t._bind(), this._bind();
        }, i.insertData = function (t, e) {
            this.getFloat32Array().set(t, e), this._upload = !0;
        }, i.bind_upload = function (t) {
            t._bind_upload() || t._bind(), this._bind_upload() || this._bind();
        }, i._checkArrayUse = function () {
            this._floatArray32 && (this._floatArray32 = new Float32Array(this._buffer));
        }, i.disposeResource = function () {
            return void t.prototype.disposeResource.call(this);
        }, i.destory = function () {
            this._byteLength = 0, this._upload = !0, this._buffer = null, this._floatArray32 = null;
        }, a(0, i, "vertexStride", function () {
            return this._vertexStride;
        }), e.create = function (t, i) {
            return void 0 === i && (i = 35048), new e(t, i);
        }, e;
    }(qt), te = function (t) {
        function e(t, i, n, s) {
            if (this._format = 0, this._mipmap = !1, this._allowMerageInAtlas = !1, this._enableMerageInAtlas = !1,
                this.repeat = !1, this._image = null, this.minFifter = 0, this.magFifter = 0, void 0 === n && (n = 6408),
                void 0 === s && (s = !0), e.__super.call(this, t, i), this._format = n, this._mipmap = s,
                this.repeat = !1, this.minFifter = -1, this.magFifter = -1, "string" == typeof t) this._url = t,
                    this._src = t, this._image = new c.window.Image(), i && (i.onload && (this.onload = i.onload),
                        i.onerror && (this.onerror = i.onerror), i.onCreate && i.onCreate(this)), this._image.crossOrigin = t && 0 == t.indexOf("data:") ? null : "",
                    t && (this._image.src = t); else if (t instanceof ArrayBuffer) {
                        this._src = i, this._url = this._src;
                        var a = new u(t);
                        a.readUTFBytes(4), a.readUTFBytes(2), a.getInt16();
                        a.endian = "bigEndian", this._w = a.getInt16(), this._h = a.getInt16();
                        a.getInt16(), a.getInt16();
                        this._image = new Uint8Array(t, a.pos), this._format = wt.compressEtc1.COMPRESSED_RGB_ETC1_WEBGL,
                            H.enabled && this._w < H.atlasLimitWidth && this._h < H.atlasLimitHeight ? this._allowMerageInAtlas = !0 : this._allowMerageInAtlas = !1;
                    } else this._src = i, this._url = this._src, this._image = t.source || t, this.onresize();
            this._$5__enableMerageInAtlas = !0;
        }
        s(e, "laya.webgl.resource.WebGLImage", m);
        var n = e.prototype;
        return i.imps(n, {
            "laya.webgl.resource.IMergeAtlasBitmap": !0
        }), n._init_ = function (t, e) { }, n._createWebGlTexture = function () {
            if (!this._image) throw "create GLTextur err:no data:" + this._image;
            var t = wt.mainContext, e = this._source = t.createTexture(), i = xt.curBindTexTarget, n = xt.curBindTexValue;
            if (xt.bindTexture(t, 3553, e), L.isConchWebGL) switch (this._format) {
                case 6408:
                    t.texImage2DEx(!0, 3553, 0, this._format, 6408, 5121, this._image);
                    break;

                case wt.compressEtc1.COMPRESSED_RGB_ETC1_WEBGL:
                    t.compressedTexImage2D(3553, 0, this._format, this._w, this._h, 0, this._image);
            } else {
                switch (t.pixelStorei(37441, !0), this._format) {
                    case 6408:
                        t.texImage2D(3553, 0, this._format, 6408, 5121, this._image);
                        break;

                    case wt.compressEtc1.COMPRESSED_RGB_ETC1_WEBGL:
                        t.compressedTexImage2D(3553, 0, this._format, this._w, this._h, 0, this._image);
                }
                t.pixelStorei(37441, !1);
            }
            var s = this.minFifter, a = this.magFifter, r = this.repeat ? 10497 : 33071, h = o.isPOT(this._w, this._h);
            h ? (this.mipmap ? -1 !== s || (s = 9987) : -1 !== s || (s = 9729), -1 !== a || (a = 9729),
                t.texParameteri(3553, 10241, s), t.texParameteri(3553, 10240, a), t.texParameteri(3553, 10242, r),
                t.texParameteri(3553, 10243, r), this.mipmap && t.generateMipmap(3553)) : (-1 !== s || (s = 9729),
                    -1 !== a || (a = 9729), t.texParameteri(3553, 10241, s), t.texParameteri(3553, 10240, a),
                    t.texParameteri(3553, 10242, 33071), t.texParameteri(3553, 10243, 33071)), i && n && xt.bindTexture(t, i, n),
                this._image.onload = null, this._image = null, h && this.mipmap ? this.memorySize = this._w * this._h * 4 * (1 + 1 / 3) : this.memorySize = this._w * this._h * 4,
                this._recreateLock = !1;
        }, n.recreateResource = function () {
            var t = this;
            if (null != this._src && "" !== this._src) if (this._needReleaseAgain = !1, this._image) {
                if (this._recreateLock) return;
                this._allowMerageInAtlas && this._$5__enableMerageInAtlas ? (this.memorySize = 0,
                    this._recreateLock = !1) : this._createWebGlTexture(), this.completeCreate();
            } else {
                this._recreateLock = !0;
                var e = this;
                this._image = new c.window.Image(), this._image.crossOrigin = 0 == this._src.indexOf("data:") ? null : "",
                    this._image.onload = function () {
                        if (e._needReleaseAgain) return e._needReleaseAgain = !1, e._image.onload = null,
                            void (e._image = null);
                        e._allowMerageInAtlas && e._enableMerageInAtlas ? (t.memorySize = 0, t._recreateLock = !1) : e._createWebGlTexture(),
                            e.completeCreate();
                    }, this._image.src = this._src;
            }
        }, n.disposeResource = function () {
            this._recreateLock && (this._needReleaseAgain = !0), this._source && (wt.mainContext.deleteTexture(this._source),
                this._source = null, this._image = null, this.memorySize = 0);
        }, n.onresize = function () {
            this._w = this._image.width, this._h = this._image.height, H.enabled && this._w < H.atlasLimitWidth && this._h < H.atlasLimitHeight ? this._allowMerageInAtlas = !0 : this._allowMerageInAtlas = !1;
        }, n.clearAtlasSource = function () {
            this._image = null;
        }, a(0, n, "format", function () {
            return this._format;
        }), a(0, n, "enableMerageInAtlas", function () {
            return this._$5__enableMerageInAtlas;
        }, function (t) {
            this._$5__enableMerageInAtlas = t;
        }), a(0, n, "mipmap", function () {
            return this._mipmap;
        }), a(0, n, "allowMerageInAtlas", function () {
            return this._allowMerageInAtlas;
        }), a(0, n, "atlasSource", function () {
            return this._image;
        }), a(0, n, "onload", null, function (t) {
            var e = this;
            this._onload = t, this._image && (this._image.onload = null != this._onload ? function () {
                e.onresize(), e._onload();
            } : null);
        }), a(0, n, "onerror", null, function (t) {
            var e = this;
            this._onerror = t, this._image && (this._image.onerror = null != this._onerror ? function () {
                e._onerror();
            } : null);
        }), e;
    }();
    i.__init([_t, G, Lt, yt]);
}(window, document, Laya), "function" == typeof define && define.amd && define("laya.core", ["require", "exports"], function (t, e) {
    "use strict";
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    for (var i in Laya) {
        var n = Laya[i];
        n && n.__isclass && (e[i] = n);
    }
}), function (t, e, i) {
    i.un, i.uns;
    var n = i.static, s = i.class, a = i.getset, r = i.__newvec, o = laya.maths.Bezier, h = laya.utils.Browser, l = laya.utils.Byte, c = (laya.events.Event,
        laya.events.EventDispatcher), u = laya.display.Graphics, d = laya.resource.HTMLCanvas, _ = laya.utils.Handler, f = laya.net.Loader, p = laya.maths.MathUtil, g = laya.maths.Matrix, v = (laya.display.Node,
            laya.maths.Point, laya.maths.Rectangle), m = laya.renders.Render, y = (laya.renders.RenderContext,
                laya.resource.Resource), w = laya.utils.RunDriver, x = (laya.media.SoundChannel,
                    laya.media.SoundManager), b = laya.display.Sprite, L = laya.utils.Stat, C = laya.resource.Texture, M = (laya.net.URL,
                        laya.utils.Utils), T = function () {
                            function t() {
                                this.nodes = null, this.name = null, this.playTime = NaN, this.bone3DMap = null,
                                    this.totalKeyframeDatasLength = 0;
                            }
                            return s(t, "laya.ani.AnimationContent"), t;
                        }(), S = function () {
                            function t() {
                                this.name = null, this.parentIndex = 0, this.parent = null, this.keyframeWidth = 0,
                                    this.lerpType = 0, this.interpolationMethod = null, this.childs = null, this.keyFrame = null,
                                    this.playTime = NaN, this.extenData = null, this.dataOffset = 0;
                            }
                            return s(t, "laya.ani.AnimationNodeContent"), t;
                        }(), A = function () {
                            function t() { }
                            return s(t, "laya.ani.AnimationParser01"), t.parse = function (t, e) {
                                var i = e.__getBuffer(), n = 0, s = 0, a = 0, r = 0, o = 0, h = 0, c = 0, u = e.readUTFString();
                                t._aniClassName = u;
                                var d, _ = e.readUTFString().split("\n"), f = e.getUint8(), p = e.getUint32(), g = e.getUint32();
                                p > 0 && (d = i.slice(p, g));
                                var v = new l(d);
                                for (g > 0 && (t._publicExtData = i.slice(g, i.byteLength)), t._useParent = !!e.getUint8(),
                                    t._anis.length = f, n = 0; n < f; n++) {
                                    var m = t._anis[n] = new T();
                                    m.nodes = new Array();
                                    var y = m.name = _[e.getUint16()];
                                    t._aniMap[y] = n, m.bone3DMap = {}, m.playTime = e.getFloat32();
                                    var w = m.nodes.length = e.getUint8();
                                    for (m.totalKeyframeDatasLength = 0, s = 0; s < w; s++) {
                                        var x = m.nodes[s] = new S();
                                        x.childs = [];
                                        var b = e.getInt16();
                                        b >= 0 && (x.name = _[b], m.bone3DMap[x.name] = s), x.keyFrame = new Array(), x.parentIndex = e.getInt16(),
                                            -1 == x.parentIndex ? x.parent = null : x.parent = m.nodes[x.parentIndex], x.lerpType = e.getUint8();
                                        var L = e.getUint32();
                                        v.pos = L;
                                        var C = x.keyframeWidth = v.getUint16();
                                        if (m.totalKeyframeDatasLength += C, 0 === x.lerpType || 1 === x.lerpType) for (x.interpolationMethod = [],
                                            x.interpolationMethod.length = C, a = 0; a < C; a++) x.interpolationMethod[a] = it.interpolation[v.getUint8()];
                                        null != x.parent && x.parent.childs.push(x);
                                        var M = e.getUint16();
                                        M > 0 && (x.extenData = i.slice(e.pos, e.pos + M), e.pos += M);
                                        var A = e.getUint16();
                                        x.keyFrame.length = A;
                                        var I, E = 0;
                                        for (a = 0, r = A; a < r; a++) {
                                            if (I = x.keyFrame[a] = new Q(), I.duration = e.getFloat32(), I.startTime = E, 2 === x.lerpType) {
                                                I.interpolationData = [];
                                                var R = e.getUint8(), P = 0;
                                                switch (P = e.getFloat32()) {
                                                    case 254:
                                                        for (I.interpolationData.length = C, c = 0; c < C; c++) I.interpolationData[c] = 0;
                                                        break;

                                                    case 255:
                                                        for (I.interpolationData.length = C, c = 0; c < C; c++) I.interpolationData[c] = 5;
                                                        break;

                                                    default:
                                                        for (I.interpolationData.push(P), h = 1; h < R; h++) I.interpolationData.push(e.getFloat32());
                                                }
                                            }
                                            for (I.data = new Float32Array(C), o = 0; o < C; o++) I.data[o] = e.getFloat32(),
                                                I.data[o] > -1e-8 && I.data[o] < 1e-8 && (I.data[o] = 0);
                                            E += I.duration;
                                        }
                                        I.startTime = m.playTime, x.playTime = m.playTime, t._calculateKeyFrame(x, A, C);
                                    }
                                }
                            }, t;
                        }(), I = function () {
                            function t() { }
                            return s(t, "laya.ani.AnimationParser02"), t.READ_DATA = function () {
                                t._DATA.offset = t._reader.getUint32(), t._DATA.size = t._reader.getUint32();
                            }, t.READ_BLOCK = function () {
                                for (var e = t._BLOCK.count = t._reader.getUint16(), i = t._BLOCK.blockStarts = [], n = t._BLOCK.blockLengths = [], s = 0; s < e; s++) i.push(t._reader.getUint32()),
                                    n.push(t._reader.getUint32());
                            }, t.READ_STRINGS = function () {
                                var e = t._reader.getUint32(), i = t._reader.getUint16(), n = t._reader.pos;
                                t._reader.pos = e + t._DATA.offset;
                                for (var s = 0; s < i; s++) t._strings[s] = t._reader.readUTFString();
                                t._reader.pos = n;
                            }, t.parse = function (e, i) {
                                t._templet = e, t._reader = i;
                                i.__getBuffer();
                                t.READ_DATA(), t.READ_BLOCK(), t.READ_STRINGS();
                                for (var n = 0, s = t._BLOCK.count; n < s; n++) {
                                    var a = i.getUint16(), r = t._strings[a], o = t["READ_" + r];
                                    if (null == o) throw new Error("model file err,no this function:" + a + " " + r);
                                    o.call();
                                }
                            }, t.READ_ANIMATIONS = function () {
                                var e = t._reader, i = e.__getBuffer(), n = 0, s = 0, a = 0, r = 0, o = e.getUint16(), h = [];
                                for (h.length = o, n = 0; n < o; n++) h[n] = it.interpolation[e.getByte()];
                                var l = e.getUint8();
                                for (t._templet._anis.length = l, n = 0; n < l; n++) {
                                    var c = t._templet._anis[n] = {};
                                    c.nodes = new Array();
                                    var u = c.name = t._strings[e.getUint16()];
                                    t._templet._aniMap[u] = n, c.bone3DMap = {}, c.playTime = e.getFloat32();
                                    var d = c.nodes.length = e.getInt16();
                                    for (c.totalKeyframeDatasLength = 0, s = 0; s < d; s++) {
                                        var _ = c.nodes[s] = {};
                                        _.keyframeWidth = o, _.childs = [];
                                        var f = e.getUint16();
                                        f >= 0 && (_.name = t._strings[f], c.bone3DMap[_.name] = s), _.keyFrame = new Array(),
                                            _.parentIndex = e.getInt16(), -1 == _.parentIndex ? _.parent = null : _.parent = c.nodes[_.parentIndex],
                                            c.totalKeyframeDatasLength += o, _.interpolationMethod = h, null != _.parent && _.parent.childs.push(_);
                                        var p = e.getUint16();
                                        _.keyFrame.length = p;
                                        var g = null, v = null;
                                        for (a = 0, r = p; a < r; a++) {
                                            (g = _.keyFrame[a] = {}).startTime = e.getFloat32(), v && (v.duration = g.startTime - v.startTime);
                                            var m = t._DATA.offset, y = e.getUint32(), w = 4 * o, x = i.slice(m + y, m + y + w);
                                            g.data = new Float32Array(x), v = g;
                                        }
                                        g.duration = 0, _.playTime = c.playTime, t._templet._calculateKeyFrame(_, p, o);
                                    }
                                }
                            }, t._templet = null, t._reader = null, t._strings = [], n(t, ["_BLOCK", function () {
                                return this._BLOCK = {
                                    count: 0
                                };
                            }, "_DATA", function () {
                                return this._DATA = {
                                    offset: 0,
                                    size: 0
                                };
                            }]), t;
                        }(), E = (function () {
                            function t() { }
                            s(t, "laya.ani.AnimationState"), t.stopped = 0, t.paused = 1, t.playing = 2;
                        }(), function () {
                            function t() {
                                this.name = null, this.root = null, this.parentBone = null, this.length = 10, this.transform = null,
                                    this.inheritScale = !0, this.inheritRotation = !0, this.rotation = NaN, this.resultRotation = NaN,
                                    this.d = -1, this._tempMatrix = null, this._sprite = null, this.resultTransform = new q(),
                                    this.resultMatrix = new g(), this._children = [];
                            }
                            s(t, "laya.ani.bone.Bone");
                            var e = t.prototype;
                            return e.setTempMatrix = function (t) {
                                this._tempMatrix = t;
                                var e = 0, i = 0;
                                for (e = 0, i = this._children.length; e < i; e++) this._children[e].setTempMatrix(this._tempMatrix);
                            }, e.update = function (t) {
                                this.rotation = this.transform.skX;
                                var e;
                                if (t) e = this.resultTransform.getMatrix(), g.mul(e, t, this.resultMatrix), this.resultRotation = this.rotation; else if (this.resultRotation = this.rotation + this.parentBone.resultRotation,
                                    this.parentBone) if (this.inheritRotation && this.inheritScale) e = this.resultTransform.getMatrix(),
                                        g.mul(e, this.parentBone.resultMatrix, this.resultMatrix); else {
                                        var i = this.parentBone, n = NaN, s = NaN, a = NaN, r = this.parentBone.resultMatrix;
                                        e = this.resultTransform.getMatrix();
                                        var o = r.a * e.tx + r.c * e.ty + r.tx, h = r.b * e.tx + r.d * e.ty + r.ty, l = new g();
                                        this.inheritRotation ? (n = Math.atan2(i.resultMatrix.b, i.resultMatrix.a), s = Math.cos(n),
                                            a = Math.sin(n), l.setTo(s, a, -a, s, 0, 0), g.mul(this._tempMatrix, l, g.TEMP),
                                            g.TEMP.copyTo(l), e = this.resultTransform.getMatrix(), g.mul(e, l, this.resultMatrix),
                                            this.resultTransform.scX * this.resultTransform.scY < 0 && this.resultMatrix.rotate(.5 * Math.PI),
                                            this.resultMatrix.tx = o, this.resultMatrix.ty = h) : (this.inheritScale, e = this.resultTransform.getMatrix(),
                                                g.TEMP.identity(), g.TEMP.d = this.d, g.mul(e, g.TEMP, this.resultMatrix), this.resultMatrix.tx = o,
                                                this.resultMatrix.ty = h);
                                    } else (e = this.resultTransform.getMatrix()).copyTo(this.resultMatrix);
                                var c = 0, u = 0;
                                for (c = 0, u = this._children.length; c < u; c++) this._children[c].update();
                            }, e.updateChild = function () {
                                var t = 0, e = 0;
                                for (t = 0, e = this._children.length; t < e; t++) this._children[t].update();
                            }, e.setRotation = function (t) {
                                this._sprite && (this._sprite.rotation = 180 * t / Math.PI);
                            }, e.updateDraw = function (e, n) {
                                t.ShowBones && !t.ShowBones[this.name] || (this._sprite ? (this._sprite.x = e + this.resultMatrix.tx,
                                    this._sprite.y = n + this.resultMatrix.ty) : (this._sprite = new b(), this._sprite.graphics.drawCircle(0, 0, 5, "#ff0000"),
                                        this._sprite.graphics.drawLine(0, 0, this.length, 0, "#00ff00"), this._sprite.graphics.fillText(this.name, 0, 0, "20px Arial", "#00ff00", "center"),
                                        i.stage.addChild(this._sprite), this._sprite.x = e + this.resultMatrix.tx, this._sprite.y = n + this.resultMatrix.ty));
                                var s = 0, a = 0;
                                for (s = 0, a = this._children.length; s < a; s++) this._children[s].updateDraw(e, n);
                            }, e.addChild = function (t) {
                                this._children.push(t), t.parentBone = this;
                            }, e.findBone = function (t) {
                                if (this.name == t) return this;
                                var e, i, n = 0, s = 0;
                                for (n = 0, s = this._children.length; n < s; n++) if (e = this._children[n], i = e.findBone(t)) return i;
                                return null;
                            }, e.localToWorld = function (t) {
                                var e = t[0], i = t[1];
                                t[0] = e * this.resultMatrix.a + i * this.resultMatrix.c + this.resultMatrix.tx,
                                    t[1] = e * this.resultMatrix.b + i * this.resultMatrix.d + this.resultMatrix.ty;
                            }, t.ShowBones = {}, t;
                        }()), R = function () {
                            function t() {
                                this.name = null, this.parent = null, this.attachmentName = null, this.srcDisplayIndex = -1,
                                    this.type = "src", this.templet = null, this.currSlotData = null, this.currTexture = null,
                                    this.currDisplayData = null, this.displayIndex = -1, this.originalIndex = -1, this._diyTexture = null,
                                    this._parentMatrix = null, this._resultMatrix = null, this._replaceDic = {}, this._curDiyUV = null,
                                    this._curDiyVS = null, this._skinSprite = null, this.deformData = null, this._mVerticleArr = null;
                            }
                            s(t, "laya.ani.bone.BoneSlot");
                            var e = t.prototype;
                            return e.showSlotData = function (t, e) {
                                void 0 === e && (e = !0), this.currSlotData = t, e && (this.displayIndex = this.srcDisplayIndex),
                                    this.currDisplayData = null, this.currTexture = null;
                            }, e.showDisplayByName = function (t) {
                                this.currSlotData && this.showDisplayByIndex(this.currSlotData.getDisplayByName(t));
                            }, e.replaceDisplayByName = function (t, e) {
                                if (this.currSlotData) {
                                    var i = 0;
                                    i = this.currSlotData.getDisplayByName(t);
                                    var n = 0;
                                    n = this.currSlotData.getDisplayByName(e), this.replaceDisplayByIndex(i, n);
                                }
                            }, e.replaceDisplayByIndex = function (t, e) {
                                this.currSlotData && (this._replaceDic[t] = e, this.originalIndex == t && this.showDisplayByIndex(t));
                            }, e.showDisplayByIndex = function (t) {
                                if (this.originalIndex = t, null != this._replaceDic[t] && (t = this._replaceDic[t]),
                                    this.currSlotData && t > -1 && t < this.currSlotData.displayArr.length) {
                                    if (this.displayIndex = t, this.currDisplayData = this.currSlotData.displayArr[t],
                                        this.currDisplayData) {
                                        var e = this.currDisplayData.name;
                                        this.currTexture = this.templet.getTexture(e), this.currTexture && 0 == this.currDisplayData.type && this.currDisplayData.uvs && (!m.isConchApp || m.isConchApp && b.RUNTIMEVERION > "0.9.15") && (this.currTexture = this.currDisplayData.createTexture(this.currTexture));
                                    }
                                } else this.displayIndex = -1, this.currDisplayData = null, this.currTexture = null;
                            }, e.replaceSkin = function (t) {
                                this._diyTexture = t, this._curDiyUV && (this._curDiyUV.length = 0), this.currDisplayData && this._diyTexture == this.currDisplayData.texture && (this._diyTexture = null);
                            }, e.setParentMatrix = function (t) {
                                this._parentMatrix = t;
                            }, e.draw = function (e, i, n, s) {
                                if (void 0 === n && (n = !1), void 0 === s && (s = 1), (null != this._diyTexture || null != this.currTexture) && null != this.currDisplayData || this.currDisplayData && 3 == this.currDisplayData.type) {
                                    var a = this.currTexture;
                                    this._diyTexture && (a = this._diyTexture);
                                    var r;
                                    switch (this.currDisplayData.type) {
                                        case 0:
                                            if (e) {
                                                var o = this.getDisplayMatrix();
                                                if (this._parentMatrix) {
                                                    var h = !1;
                                                    if (o) {
                                                        g.mul(o, this._parentMatrix, g.TEMP);
                                                        var l;
                                                        if (n ? (null == this._resultMatrix && (this._resultMatrix = new g()), l = this._resultMatrix) : l = new g(),
                                                            !m.isWebGL && this.currDisplayData.uvs || m.isWebGL && this._diyTexture && this.currDisplayData.uvs) {
                                                            var c = t._tempMatrix;
                                                            c.identity(), this.currDisplayData.uvs[1] > this.currDisplayData.uvs[5] && (c.d = -1),
                                                                this.currDisplayData.uvs[0] > this.currDisplayData.uvs[4] && this.currDisplayData.uvs[1] > this.currDisplayData.uvs[5] && (h = !0,
                                                                    c.rotate(-Math.PI / 2)), g.mul(c, g.TEMP, l);
                                                        } else g.TEMP.copyTo(l);
                                                        h ? e.drawTexture(a, -this.currDisplayData.height / 2, -this.currDisplayData.width / 2, this.currDisplayData.height, this.currDisplayData.width, l) : e.drawTexture(a, -this.currDisplayData.width / 2, -this.currDisplayData.height / 2, this.currDisplayData.width, this.currDisplayData.height, l);
                                                    }
                                                }
                                            }
                                            break;

                                        case 1:
                                            if (n ? (null == this._skinSprite && (this._skinSprite = t.createSkinMesh()), r = this._skinSprite) : r = t.createSkinMesh(),
                                                null == r) return;
                                            var u;
                                            if (null == this.currDisplayData.bones) {
                                                var d = this.currDisplayData.weights;
                                                this.deformData && (d = this.deformData);
                                                var _;
                                                this._diyTexture ? (this._curDiyUV || (this._curDiyUV = []), 0 == this._curDiyUV.length && (this._curDiyUV = $.getRelativeUV(this.currTexture.uv, this.currDisplayData.uvs, this._curDiyUV),
                                                    this._curDiyUV = $.getAbsoluteUV(this._diyTexture.uv, this._curDiyUV, this._curDiyUV)),
                                                    _ = this._curDiyUV) : _ = this.currDisplayData.uvs, this._mVerticleArr = d;
                                                this.currDisplayData.triangles.length;
                                                u = this.currDisplayData.triangles, r.init2(a, null, u, this._mVerticleArr, _);
                                                var f = this.getDisplayMatrix();
                                                if (this._parentMatrix && f) {
                                                    g.mul(f, this._parentMatrix, g.TEMP);
                                                    var p;
                                                    n ? (null == this._resultMatrix && (this._resultMatrix = new g()), p = this._resultMatrix) : p = new g(),
                                                        g.TEMP.copyTo(p), r.transform = p;
                                                }
                                            } else this.skinMesh(i, r, s);
                                            e.drawSkin(r);
                                            break;

                                        case 2:
                                            if (n ? (null == this._skinSprite && (this._skinSprite = t.createSkinMesh()), r = this._skinSprite) : r = t.createSkinMesh(),
                                                null == r) return;
                                            this.skinMesh(i, r, s), e.drawSkin(r);
                                    }
                                }
                            }, e.skinMesh = function (t, e, i) {
                                var n, s = this.currTexture, a = this.currDisplayData.bones;
                                this._diyTexture ? (s = this._diyTexture, this._curDiyUV || (this._curDiyUV = []),
                                    0 == this._curDiyUV.length && (this._curDiyUV = $.getRelativeUV(this.currTexture.uv, this.currDisplayData.uvs, this._curDiyUV),
                                        this._curDiyUV = $.getAbsoluteUV(this._diyTexture.uv, this._curDiyUV, this._curDiyUV)),
                                    n = this._curDiyUV) : n = this.currDisplayData.uvs;
                                var r, o, h = this.currDisplayData.weights, l = this.currDisplayData.triangles, c = 0, u = 0, d = 0, _ = NaN, f = NaN, p = 0, g = 0, v = [], m = 0, y = 0;
                                if (this.deformData && this.deformData.length > 0) {
                                    var w = 0;
                                    for (m = 0, y = a.length; m < y;) {
                                        for (d = a[m++] + m, c = 0, u = 0; m < d; m++) o = t[a[m]], _ = h[p] + this.deformData[w++],
                                            f = h[p + 1] + this.deformData[w++], g = h[p + 2], c += (_ * o.a + f * o.c + o.tx) * g,
                                            u += (_ * o.b + f * o.d + o.ty) * g, p += 3;
                                        v.push(c, u);
                                    }
                                } else for (m = 0, y = a.length; m < y;) {
                                    for (d = a[m++] + m, c = 0, u = 0; m < d; m++) o = t[a[m]], _ = h[p], f = h[p + 1],
                                        g = h[p + 2], c += (_ * o.a + f * o.c + o.tx) * g, u += (_ * o.b + f * o.d + o.ty) * g,
                                        p += 3;
                                    v.push(c, u);
                                }
                                this._mVerticleArr = v, r = l, e.init2(s, null, r, this._mVerticleArr, n);
                            }, e.drawBonePoint = function (t) {
                                t && this._parentMatrix && t.drawCircle(this._parentMatrix.tx, this._parentMatrix.ty, 5, "#ff0000");
                            }, e.getDisplayMatrix = function () {
                                return this.currDisplayData ? this.currDisplayData.transform.getMatrix() : null;
                            }, e.getMatrix = function () {
                                return this._resultMatrix;
                            }, e.copy = function () {
                                var e = new t();
                                return e.type = "copy", e.name = this.name, e.attachmentName = this.attachmentName,
                                    e.srcDisplayIndex = this.srcDisplayIndex, e.parent = this.parent, e.displayIndex = this.displayIndex,
                                    e.templet = this.templet, e.currSlotData = this.currSlotData, e.currTexture = this.currTexture,
                                    e.currDisplayData = this.currDisplayData, e;
                            }, t.createSkinMesh = function () {
                                return m.isWebGL || m.isConchApp ? w.skinAniSprite() : m.isWebGL ? null : st.useSimpleMeshInCanvas ? new nt() : new et();
                            }, n(t, ["_tempMatrix", function () {
                                return this._tempMatrix = new g();
                            }]), t;
                        }(), P = function () {
                            function t() {
                                this.mesh = null, this.transform = null, this.context = null, this.mode = 0;
                            }
                            s(t, "laya.ani.bone.canvasmesh.CanvasMeshRender");
                            var e = t.prototype;
                            return e.renderToContext = function (t) {
                                this.context = t.ctx || t, this.mesh && (0 == this.mode ? this._renderWithIndexes(this.mesh) : this._renderNoIndexes(this.mesh));
                            }, e._renderNoIndexes = function (t) {
                                var e = 0, i = t.vertices.length / 2, n = 0;
                                for (e = 0; e < i - 2; e++) n = 2 * e, this._renderDrawTriangle(t, n, n + 2, n + 4);
                            }, e._renderWithIndexes = function (t) {
                                var e = t.indexes, i = 0, n = e.length;
                                for (i = 0; i < n; i += 3) {
                                    var s = 2 * e[i], a = 2 * e[i + 1], r = 2 * e[i + 2];
                                    this._renderDrawTriangle(t, s, a, r);
                                }
                            }, e._renderDrawTriangle = function (t, e, i, n) {
                                var s = this.context, a = t.uvs, r = t.vertices, o = t.texture, h = o.bitmap, l = h.source, c = o.width, u = o.height, d = h.width, _ = h.height, f = NaN, p = NaN, g = NaN, v = NaN, m = NaN, y = NaN;
                                if (t.useUvTransform) {
                                    var w = t.uvTransform;
                                    f = (a[e] * w.a + a[e + 1] * w.c + w.tx) * d, p = (a[i] * w.a + a[i + 1] * w.c + w.tx) * d,
                                        g = (a[n] * w.a + a[n + 1] * w.c + w.tx) * d, v = (a[e] * w.b + a[e + 1] * w.d + w.ty) * _,
                                        m = (a[i] * w.b + a[i + 1] * w.d + w.ty) * _, y = (a[n] * w.b + a[n + 1] * w.d + w.ty) * _;
                                } else f = a[e] * d, p = a[i] * d, g = a[n] * d, v = a[e + 1] * _, m = a[i + 1] * _,
                                    y = a[n + 1] * _;
                                var x = r[e], b = r[i], L = r[n], C = r[e + 1], M = r[i + 1], T = r[n + 1];
                                if (t.canvasPadding > 0) {
                                    var S = t.canvasPadding, A = t.canvasPadding, I = (x + b + L) / 3, E = (C + M + T) / 3, R = x - I, P = C - E, D = Math.sqrt(R * R + P * P);
                                    x = I + R / D * (D + S), C = E + P / D * (D + A), P = M - E, b = I + (R = b - I) / (D = Math.sqrt(R * R + P * P)) * (D + S),
                                        M = E + P / D * (D + A), P = T - E, L = I + (R = L - I) / (D = Math.sqrt(R * R + P * P)) * (D + S),
                                        T = E + P / D * (D + A);
                                }
                                if (s.save(), this.transform) {
                                    var k = this.transform;
                                    s.transform(k.a, k.b, k.c, k.d, k.tx, k.ty);
                                }
                                s.beginPath(), s.moveTo(x, C), s.lineTo(b, M), s.lineTo(L, T), s.closePath(), s.clip();
                                var F = 1 / (f * m + v * g + p * y - m * g - v * p - f * y), B = x * m + v * L + b * y - m * L - v * b - x * y, O = f * b + x * g + p * L - b * g - x * p - f * L, N = f * m * L + v * b * g + x * p * y - x * m * g - v * p * L - f * b * y, G = C * m + v * T + M * y - m * T - v * M - C * y, H = f * M + C * g + p * T - M * g - C * p - f * T, z = f * m * T + v * M * g + C * p * y - C * m * g - v * p * T - f * M * y;
                                s.transform(B * F, G * F, O * F, H * F, N * F, z * F), s.drawImage(l, o.uv[0] * d, o.uv[1] * _, c, u, o.uv[0] * d, o.uv[1] * _, c, u),
                                    s.restore();
                            }, t;
                        }(), D = function () {
                            function t() {
                                this.texture = null, this.uvs = [0, 0, 1, 0, 1, 1, 0, 1], this.vertices = [0, 0, 100, 0, 100, 100, 0, 100],
                                    this.indexes = [0, 1, 3, 3, 1, 2], this.uvTransform = null, this.useUvTransform = !1,
                                    this.canvasPadding = 1;
                            }
                            s(t, "laya.ani.bone.canvasmesh.MeshData");
                            return t.prototype.getBounds = function () {
                                return v._getWrapRec(this.vertices);
                            }, t;
                        }(), k = function () {
                            function t() {
                                this.skinName = null, this.deformSlotDataList = [];
                            }
                            return s(t, "laya.ani.bone.DeformAniData"), t;
                        }(), F = function () {
                            function t() {
                                this.deformSlotDisplayList = [];
                            }
                            return s(t, "laya.ani.bone.DeformSlotData"), t;
                        }(), B = function () {
                            function t() {
                                this.boneSlot = null, this.slotIndex = -1, this.attachment = null, this.deformData = null,
                                    this.frameIndex = 0, this.timeList = [], this.vectices = [], this.tweenKeyList = [];
                            }
                            s(t, "laya.ani.bone.DeformSlotDisplayData");
                            var e = t.prototype;
                            return e.binarySearch1 = function (t, e) {
                                var i = 0, n = t.length - 2;
                                if (0 == n) return 1;
                                for (var s = n >>> 1; ;) {
                                    if (t[Math.floor(s + 1)] <= e ? i = s + 1 : n = s, i == n) return i + 1;
                                    s = i + n >>> 1;
                                }
                                return 0;
                            }, e.apply = function (t, e, i) {
                                if (void 0 === i && (i = 1), t += .05, !(this.timeList.length <= 0)) {
                                    var n = 0;
                                    if (!(t < this.timeList[0])) {
                                        var s = this.vectices[0].length, a = [], r = this.binarySearch1(this.timeList, t);
                                        if (this.frameIndex = r, t >= this.timeList[this.timeList.length - 1]) {
                                            var o = this.vectices[this.vectices.length - 1];
                                            if (i < 1) for (n = 0; n < s; n++) a[n] += (o[n] - a[n]) * i; else for (n = 0; n < s; n++) a[n] = o[n];
                                            this.deformData = a;
                                        } else {
                                            this.tweenKeyList[this.frameIndex];
                                            var h = this.vectices[this.frameIndex - 1], l = this.vectices[this.frameIndex], c = this.timeList[this.frameIndex - 1], u = this.timeList[this.frameIndex];
                                            i = this.tweenKeyList[r - 1] ? (t - c) / (u - c) : 0;
                                            var d = NaN;
                                            for (n = 0; n < s; n++) d = h[n], a[n] = d + (l[n] - d) * i;
                                            this.deformData = a;
                                        }
                                    }
                                }
                            }, t;
                        }(), O = function () {
                            function t() {
                                this.time = NaN, this.drawOrder = [];
                            }
                            return s(t, "laya.ani.bone.DrawOrderData"), t;
                        }(), N = function () {
                            function t() {
                                this.name = null, this.intValue = 0, this.floatValue = NaN, this.stringValue = null,
                                    this.audioValue = null, this.time = NaN;
                            }
                            return s(t, "laya.ani.bone.EventData"), t;
                        }(), G = function () {
                            function t(t, e) {
                                this._targetBone = null, this._bones = null, this._data = null, this.name = null,
                                    this.mix = NaN, this.bendDirection = NaN, this.isSpine = !0, this._sp = null, this.isDebug = !1,
                                    this._data = t, this._targetBone = e[t.targetBoneIndex], this.isSpine = t.isSpine,
                                    null == this._bones && (this._bones = []), this._bones.length = 0;
                                for (var i = 0, n = t.boneIndexs.length; i < n; i++) this._bones.push(e[t.boneIndexs[i]]);
                                this.name = t.name, this.mix = t.mix, this.bendDirection = t.bendDirection;
                            }
                            s(t, "laya.ani.bone.IkConstraint");
                            var e = t.prototype;
                            return e.apply = function () {
                                switch (this._bones.length) {
                                    case 1:
                                        this._applyIk1(this._bones[0], this._targetBone.resultMatrix.tx, this._targetBone.resultMatrix.ty, this.mix);
                                        break;

                                    case 2:
                                        this.isSpine ? this._applyIk2(this._bones[0], this._bones[1], this._targetBone.resultMatrix.tx, this._targetBone.resultMatrix.ty, this.bendDirection, this.mix) : this._applyIk3(this._bones[0], this._bones[1], this._targetBone.resultMatrix.tx, this._targetBone.resultMatrix.ty, this.bendDirection, this.mix);
                                }
                            }, e._applyIk1 = function (e, i, n, s) {
                                var a = e.parentBone, r = 1 / (a.resultMatrix.a * a.resultMatrix.d - a.resultMatrix.b * a.resultMatrix.c), o = i - a.resultMatrix.tx, h = n - a.resultMatrix.ty, l = (o * a.resultMatrix.d - h * a.resultMatrix.c) * r - e.transform.x, c = (h * a.resultMatrix.a - o * a.resultMatrix.b) * r - e.transform.y, u = Math.atan2(c, l) * t.radDeg - 0 - e.transform.skX;
                                e.transform.scX < 0 && (u += 180), u > 180 ? u -= 360 : u < -180 && (u += 360),
                                    e.transform.skX = e.transform.skY = e.transform.skX + u * s, e.update();
                            }, e.updatePos = function (t, e) {
                                this._sp && this._sp.pos(t, e);
                            }, e._applyIk2 = function (e, n, s, a, r, o) {
                                if (0 != o) {
                                    var h = e.resultTransform.x, l = e.resultTransform.y, c = e.transform.scX, u = e.transform.scY, d = n.transform.scX, _ = 0, f = 0, p = 0;
                                    c < 0 ? (c = -c, _ = 180, p = -1) : (_ = 0, p = 1), u < 0 && (u = -u, p = -p), d < 0 ? (d = -d,
                                        f = 180) : f = 0;
                                    var g = n.resultTransform.x, v = NaN, m = NaN, y = NaN, w = e.resultMatrix.a, x = e.resultMatrix.c, L = e.resultMatrix.b, C = e.resultMatrix.d, M = Math.abs(c - u) <= 1e-4;
                                    M ? (m = w * g + x * (v = n.resultTransform.y) + e.resultMatrix.tx, y = L * g + C * v + e.resultMatrix.ty) : (v = 0,
                                        m = w * g + e.resultMatrix.tx, y = L * g + e.resultMatrix.ty), this.isDebug && (this._sp || (this._sp = new b(),
                                            i.stage.addChild(this._sp)), this._sp.graphics.clear(), this._sp.graphics.drawCircle(s, a, 15, "#ffff00"),
                                            this._sp.graphics.drawCircle(m, y, 15, "#ff00ff")), e.setRotation(Math.atan2(y - e.resultMatrix.ty, m - e.resultMatrix.tx));
                                    var T = e.parentBone;
                                    w = T.resultMatrix.a, x = T.resultMatrix.c, L = T.resultMatrix.b;
                                    var S = 1 / (w * (C = T.resultMatrix.d) - x * L), A = s - T.resultMatrix.tx, I = a - T.resultMatrix.ty, E = (A * C - I * x) * S - h, R = (I * w - A * L) * S - l, P = ((A = m - T.resultMatrix.tx) * C - (I = y - T.resultMatrix.ty) * x) * S - h, D = (I * w - A * L) * S - l, k = Math.sqrt(P * P + D * D), F = n.length * d, B = NaN, O = NaN;
                                    if (M) {
                                        var N = (E * E + R * R - k * k - (F *= c) * F) / (2 * k * F);
                                        N < -1 ? N = -1 : N > 1 && (N = 1), O = Math.acos(N) * r, w = k + F * N, x = F * Math.sin(O),
                                            B = Math.atan2(R * w - E * x, E * w + R * x);
                                    } else {
                                        var G = (w = c * F) * w, H = (x = u * F) * x, z = E * E + R * R, V = Math.atan2(R, E), U = -2 * H * k, W = H - G;
                                        if ((C = U * U - 4 * W * (L = H * k * k + G * z - G * H)) > 0) {
                                            var Y = Math.sqrt(C);
                                            U < 0 && (Y = -Y);
                                            var X = (Y = -(U + Y) / 2) / W, K = L / Y, j = Math.abs(X) < Math.abs(K) ? X : K;
                                            j * j <= z && (I = Math.sqrt(z - j * j) * r, B = V - Math.atan2(I, j), O = Math.atan2(I / u, (j - k) / c));
                                        }
                                        var q = 0, $ = Number.MAX_VALUE, Q = 0, Z = 0, J = 0, tt = 0, et = 0, it = 0;
                                        (C = (A = k + w) * A) > tt && (J = 0, tt = C, et = A), (C = (A = k - w) * A) < $ && (q = Math.PI,
                                            $ = C, Q = A);
                                        var nt = Math.acos(-w * k / (G - H));
                                        (C = (A = w * Math.cos(nt) + k) * A + (I = x * Math.sin(nt)) * I) < $ && (q = nt,
                                            $ = C, Q = A, Z = I), C > tt && (J = nt, tt = C, et = A, it = I), z <= ($ + tt) / 2 ? (B = V - Math.atan2(Z * r, Q),
                                                O = q * r) : (B = V - Math.atan2(it * r, et), O = J * r);
                                    }
                                    var st = Math.atan2(v, g) * p, at = e.resultTransform.skX;
                                    (B = (B - st) * t.radDeg + _ - at) > 180 ? B -= 360 : B < -180 && (B += 360), e.resultTransform.x = h,
                                        e.resultTransform.y = l, e.resultTransform.skX = e.resultTransform.skY = at + B * o,
                                        at = n.resultTransform.skX, (O = ((O + st) * t.radDeg - 0) * p + f - (at %= 360)) > 180 ? O -= 360 : O < -180 && (O += 360),
                                        n.resultTransform.x = g, n.resultTransform.y = v, n.resultTransform.skX = n.resultTransform.skY = n.resultTransform.skY + O * o,
                                        e.update();
                                }
                            }, e._applyIk3 = function (e, n, s, a, r, o) {
                                if (0 != o) {
                                    var h = NaN, l = NaN, c = n.resultMatrix.a * n.length, u = n.resultMatrix.b * n.length, d = c * c + u * u, _ = Math.sqrt(d), f = e.resultMatrix.tx, p = e.resultMatrix.ty, g = n.resultMatrix.tx, v = n.resultMatrix.ty, m = g - f, y = v - p, w = m * m + y * y, x = Math.sqrt(w), L = (m = s - e.resultMatrix.tx) * m + (y = a - e.resultMatrix.ty) * y, C = Math.sqrt(L);
                                    if (_ + x <= C || C + _ <= x || C + x <= _) {
                                        var M = NaN;
                                        g = f + (M = _ + x <= C ? 1 : -1) * (s - f) * x / C, v = p + M * (a - p) * x / C;
                                    } else {
                                        var T = (w - d + L) / (2 * L), S = Math.sqrt(w - T * T * L) / C, A = f + m * T, I = p + y * T, E = -y * S, R = m * S;
                                        r > 0 ? (g = A - E, v = I - R) : (g = A + E, v = I + R);
                                    }
                                    h = g, l = v, this.isDebug && (this._sp || (this._sp = new b(), i.stage.addChild(this._sp)),
                                        this._sp.graphics.clear(), this._sp.graphics.drawCircle(f, p, 15, "#ff00ff"), this._sp.graphics.drawCircle(s, a, 15, "#ffff00"),
                                        this._sp.graphics.drawCircle(h, l, 15, "#ff00ff"));
                                    var P = NaN;
                                    P = Math.atan2(l - e.resultMatrix.ty, h - e.resultMatrix.tx), e.setRotation(P);
                                    var D;
                                    (D = t._tempMatrix).identity(), D.rotate(P), D.scale(e.resultMatrix.getScaleX(), e.resultMatrix.getScaleY()),
                                        D.translate(e.resultMatrix.tx, e.resultMatrix.ty), D.copyTo(e.resultMatrix), e.updateChild();
                                    var k = NaN;
                                    k = Math.atan2(a - l, s - h), n.setRotation(k);
                                    var F;
                                    (F = t._tempMatrix).identity(), F.rotate(k), F.scale(n.resultMatrix.getScaleX(), n.resultMatrix.getScaleY()),
                                        F.translate(h, l), D.copyTo(n.resultMatrix), n.updateChild();
                                }
                            }, n(t, ["radDeg", function () {
                                return this.radDeg = 180 / Math.PI;
                            }, "degRad", function () {
                                return this.degRad = Math.PI / 180;
                            }, "_tempMatrix", function () {
                                return this._tempMatrix = new g();
                            }]), t;
                        }(), H = function () {
                            function t() {
                                this.name = null, this.targetBoneName = null, this.bendDirection = 1, this.mix = 1,
                                    this.isSpine = !0, this.targetBoneIndex = -1, this.boneNames = [], this.boneIndexs = [];
                            }
                            return s(t, "laya.ani.bone.IkConstraintData"), t;
                        }(), z = function () {
                            function t() { }
                            return s(t, "laya.ani.bone.MeshTools"), t.findEdge = function (t, e, i) {
                                void 0 === e && (e = 0), void 0 === i && (i = !0);
                                var n = 0, s = 0, a = 0;
                                for (s = t.length, a = -1, n = 0; n < s; n += 2) (a < 0 || i == t[a + e] < t[n + e]) && (a = n);
                                return a;
                            }, t.findBestTriangle = function (e) {
                                var i = 0;
                                i = t.findEdge(e, 1, !0);
                                var n = 0;
                                n = t.findEdge(e, 1, !1);
                                var s = 0;
                                s = t.findEdge(e, 0, !0);
                                var a = 0;
                                a = t.findEdge(e, 0, !1);
                                var r;
                                return r = t._bestTriangle, r.length = 0, r.push(s, a), r.indexOf(i) < 0 && r.push(i),
                                    r.indexOf(n) < 0 && r.push(n), r;
                            }, t.solveMesh = function (e, i) {
                                (i = i || []).length = 0;
                                var n;
                                n = e.uvs;
                                var s;
                                s = e.vertices;
                                var a, r, o = 0, h = 0, l = 0;
                                o = (r = t.findBestTriangle(n))[0], h = r[1], l = r[2], t._absArr.length = 0;
                                return t.isNormalUV(e.texture.uv) && t.adptTexture(e), a = t.solvePoints(e.texture.uv, n[o], n[o + 1], n[h] - n[o], n[h + 1] - n[o + 1], n[l] - n[o], n[l + 1] - n[o + 1], t._absArr),
                                    t.transPoints(a, s[o], s[o + 1], s[h] - s[o], s[h + 1] - s[o + 1], s[l] - s[o], s[l + 1] - s[o + 1], i);
                            }, t.findWrapRect = function (e) {
                                var i = 0;
                                i = t.findEdge(e, 1, !0);
                                var n = 0;
                                n = t.findEdge(e, 1, !1);
                                var s = 0;
                                s = t.findEdge(e, 0, !0);
                                var a = 0;
                                a = t.findEdge(e, 0, !1);
                                var r = NaN;
                                r = e[s];
                                var o = NaN;
                                o = e[a];
                                var h = NaN;
                                h = e[i + 1];
                                var l = NaN;
                                return [o, l = e[n + 1], r - o, h - l];
                            }, t.adptTexture = function (e) {
                                var i;
                                i = t.findWrapRect(e.uvs);
                                var n, s, a = (n = e.texture).width, r = n.height;
                                s = C.create(n, i[0] * a, i[1] * r, i[2] * a, i[3] * r), e.texture = s;
                            }, t.isNormalUV = function (t) {
                                return 0 == t[0] && 0 == t[1] && 1 == t[4] && 1 == t[5];
                            }, t.solvePoints = function (e, i, n, s, a, r, o, h) {
                                h = h || [];
                                var l = 0, c = 0;
                                c = e.length;
                                var u;
                                for (l = 0; l < c; l += 2) u = t.solve2(e[l], e[l + 1], i, n, s, a, r, o), h.push(u[0], u[1]);
                                return h;
                            }, t.transPoints = function (e, i, n, s, a, r, o, h) {
                                h = h || [];
                                var l = 0, c = 0;
                                c = e.length;
                                for (l = 0; l < c; l += 2) t.transPoint(e[l], e[l + 1], i, n, s, a, r, o, h);
                                return h;
                            }, t.transPoint = function (t, e, i, n, s, a, r, o, h) {
                                var l = NaN, c = NaN;
                                return l = i + s * t + r * e, c = n + a * t + o * e, (h = h || []).push(l, c), h;
                            }, t.solve2 = function (e, i, n, s, a, r, o, h, l, c) {
                                void 0 === l && (l = !1), c = c || [];
                                var u = NaN, d = NaN;
                                if (0 == a) return t.solve2(e, i, n, s, o, h, a, r, !0, c);
                                var _ = NaN, f = NaN;
                                return _ = e - n, f = i - s, d = (f - _ * r / a) / (h - o * r / a), u = (_ - d * o) / a,
                                    l ? c.push(d, u) : c.push(u, d), c;
                            }, t.solve = function (e, i, n, s) {
                                return t.solve2(e.x, e.y, i.x, i.y, n.x, n.y, s.x, s.y);
                            }, t._bestTriangle = [], t._absArr = [], t;
                        }(), V = function () {
                            function t(t, e) {
                                this.target = null, this.data = null, this.bones = null, this.position = NaN, this.spacing = NaN,
                                    this.rotateMix = NaN, this.translateMix = NaN, this._debugKey = !1, this._spaces = null,
                                    this._segments = [], this._curves = [], this.data = t, this.position = t.position,
                                    this.spacing = t.spacing, this.rotateMix = t.rotateMix, this.translateMix = t.translateMix,
                                    this.bones = [];
                                for (var i = this.data.bones, n = 0, s = i.length; n < s; n++) this.bones.push(e[i[n]]);
                            }
                            s(t, "laya.ani.bone.PathConstraint");
                            var e = t.prototype;
                            return e.apply = function (t, e) {
                                if (this.target) {
                                    var i = this.translateMix, n = this.translateMix, s = n > 0, a = this.data.spacingMode, r = "length" == a, o = this.data.rotateMode, h = "tangent" == o, l = "chainScale" == o, c = [], u = this.bones.length, d = h ? u : u + 1, _ = [];
                                    this._spaces = _, _[0] = this.position;
                                    var f = this.spacing;
                                    if (l || r) for (var p = 0, g = d - 1; p < g;) {
                                        var v = this.bones[p], m = v.length, y = m * v.resultMatrix.a, w = m * v.resultMatrix.b;
                                        m = Math.sqrt(y * y + w * w), l && (c[p] = m), _[++p] = r ? Math.max(0, m + f) : f;
                                    } else for (p = 1; p < d; p++) _[p] = f;
                                    var x = this.computeWorldPositions(this.target, t, e, d, h, "percent" == this.data.positionMode, "percent" == a);
                                    if (this._debugKey) {
                                        for (p = 0; p < x.length; p++) e.drawCircle(x[p++], x[p++], 5, "#00ff00");
                                        var b = [];
                                        for (p = 0; p < x.length; p++) b.push(x[p++], x[p++]);
                                        e.drawLines(0, 0, b, "#ff0000");
                                    }
                                    var L = x[0], C = x[1], M = this.data.offsetRotation, T = "chain" == o && 0 == M, S = NaN;
                                    for (p = 0, S = 3; p < u; p++, S += 3) {
                                        (v = this.bones[p]).resultMatrix.tx += (L - v.resultMatrix.tx) * i, v.resultMatrix.ty += (C - v.resultMatrix.ty) * i;
                                        var A = (y = x[S]) - L, I = (w = x[S + 1]) - C;
                                        if (l && 0 != (m = c[p])) {
                                            var E = (Math.sqrt(A * A + I * I) / m - 1) * n + 1;
                                            v.resultMatrix.a *= E, v.resultMatrix.c *= E;
                                        }
                                        if (L = y, C = w, s) {
                                            var R = v.resultMatrix.a, P = v.resultMatrix.c, D = v.resultMatrix.b, k = v.resultMatrix.d, F = NaN, B = NaN, O = NaN;
                                            F = h ? x[S - 1] : 0 == _[p + 1] ? x[S + 2] : Math.atan2(I, A), F -= Math.atan2(D, R) - M / 180 * Math.PI,
                                                T && (B = Math.cos(F), O = Math.sin(F), L += ((m = v.length) * (B * R - O * D) - A) * n,
                                                    C += (m * (O * R + B * D) - I) * n), F > Math.PI ? F -= 2 * Math.PI : F < -Math.PI && (F += 2 * Math.PI),
                                                F *= n, B = Math.cos(F), O = Math.sin(F), v.resultMatrix.a = B * R - O * D, v.resultMatrix.c = B * P - O * k,
                                                v.resultMatrix.b = O * R + B * D, v.resultMatrix.d = O * P + B * k;
                                        }
                                    }
                                }
                            }, e.computeWorldVertices2 = function (e, i, n, s, a, r) {
                                var o, h, l = e.currDisplayData.bones, c = e.currDisplayData.weights, u = e.currDisplayData.triangles, d = 0, _ = 0, f = 0, p = 0, g = 0, v = 0, m = 0, y = 0, w = 0, x = 0, b = 0;
                                if (null != l) {
                                    for (d = 0; d < n; d += 2) _ += (p = l[_]) + 1, f += p;
                                    var L = i;
                                    for (g = r, v = 3 * f; g < s; g += 2) {
                                        for (m = 0, y = 0, p = l[_++], p += _; _ < p; _++, v += 3) {
                                            o = L[l[_]].resultMatrix, w = c[v], x = c[v + 1];
                                            var C = c[v + 2];
                                            m += (w * o.a + x * o.c + o.tx) * C, y += (w * o.b + x * o.d + o.ty) * C;
                                        }
                                        a[g] = m, a[g + 1] = y;
                                    }
                                } else {
                                    u || (u = c), e.deformData && (u = e.deformData);
                                    var M;
                                    if (M = e.parent, i) for (b = i.length, d = 0; d < b; d++) if (i[d].name == M) {
                                        h = i[d];
                                        break;
                                    }
                                    var T;
                                    h && (T = h.resultMatrix), T || (T = t._tempMt);
                                    var S = T.tx, A = T.ty, I = T.a, E = T.b, R = T.c, P = T.d;
                                    for (h && (P *= h.d), _ = n, g = r; g < s; _ += 2, g += 2) w = u[_], x = u[_ + 1],
                                        a[g] = w * I + x * E + S, a[g + 1] = -(w * R + x * P + A);
                                }
                            }, e.computeWorldPositions = function (t, e, i, n, s, a, r) {
                                t.currDisplayData.bones, t.currDisplayData.weights, t.currDisplayData.triangles;
                                var o = [], h = 0, l = t.currDisplayData.verLen, c = this.position, u = this._spaces, d = [], _ = [], f = l / 6, p = -1, g = NaN, v = 0, m = 0, y = NaN, w = NaN, x = NaN, b = NaN;
                                if (f--, l -= 4, this.computeWorldVertices2(t, e, 2, l, o, 0), this._debugKey) for (h = 0; h < o.length;) i.drawCircle(o[h++], o[h++], 10, "#ff0000");
                                d = o, this._curves.length = f;
                                var L = this._curves;
                                g = 0;
                                var C = d[0], M = d[1], T = 0, S = 0, A = 0, I = 0, E = 0, R = 0, P = NaN, D = NaN, k = NaN, F = NaN, B = NaN, O = NaN, N = NaN, G = NaN, H = 0;
                                for (h = 0, H = 2; h < f; h++, H += 6) T = d[H], S = d[H + 1], A = d[H + 2], I = d[H + 3],
                                    B = 2 * (P = .1875 * (C - 2 * T + A)) + (k = .09375 * (3 * (T - A) - C + (E = d[H + 4]))),
                                    O = 2 * (D = .1875 * (M - 2 * S + I)) + (F = .09375 * (3 * (S - I) - M + (R = d[H + 5]))),
                                    N = .75 * (T - C) + P + .16666667 * k, G = .75 * (S - M) + D + .16666667 * F, g += Math.sqrt(N * N + G * G),
                                    N += B, G += O, B += k, O += F, g += Math.sqrt(N * N + G * G), N += B, G += O, g += Math.sqrt(N * N + G * G),
                                    N += B + k, G += O + F, g += Math.sqrt(N * N + G * G), L[h] = g, C = E, M = R;
                                if (a && (c *= g), r) for (h = 0; h < n; h++) u[h] *= g;
                                var z = this._segments, V = 0, U = 0;
                                for (h = 0, v = 0, m = 0, U = 0; h < n; h++, v += 3) if (w = u[h], c += w, (y = c) < 0) this.addBeforePosition(y, d, 0, _, v); else if (y > g) this.addAfterPosition(y - g, d, l - 4, _, v); else {
                                    for (; ; m++) if (b = L[m], !(y > b)) {
                                        0 == m ? y /= b : y = (y - (x = L[m - 1])) / (b - x);
                                        break;
                                    }
                                    if (m != p) {
                                        p = m;
                                        var W = 6 * m;
                                        for (C = d[W], M = d[W + 1], T = d[W + 2], S = d[W + 3], A = d[W + 4], I = d[W + 5],
                                            B = 2 * (P = .03 * (C - 2 * T + A)) + (k = .006 * (3 * (T - A) - C + (E = d[W + 6]))),
                                            O = 2 * (D = .03 * (M - 2 * S + I)) + (F = .006 * (3 * (S - I) - M + (R = d[W + 7]))),
                                            N = .3 * (T - C) + P + .16666667 * k, G = .3 * (S - M) + D + .16666667 * F, V = Math.sqrt(N * N + G * G),
                                            z[0] = V, W = 1; W < 8; W++) N += B, G += O, B += k, O += F, V += Math.sqrt(N * N + G * G),
                                                z[W] = V;
                                        N += B, G += O, V += Math.sqrt(N * N + G * G), z[8] = V, N += B + k, G += O + F,
                                            V += Math.sqrt(N * N + G * G), z[9] = V, U = 0;
                                    }
                                    for (y *= V; ; U++) if (b = z[U], !(y > b)) {
                                        0 == U ? y /= b : y = U + (y - (x = z[U - 1])) / (b - x);
                                        break;
                                    }
                                    this.addCurvePosition(.1 * y, C, M, T, S, A, I, E, R, _, v, s || h > 0 && 0 == w);
                                }
                                return _;
                            }, e.addBeforePosition = function (t, e, i, n, s) {
                                var a = e[i], r = e[i + 1], o = e[i + 2] - a, h = e[i + 3] - r, l = Math.atan2(h, o);
                                n[s] = a + t * Math.cos(l), n[s + 1] = r + t * Math.sin(l), n[s + 2] = l;
                            }, e.addAfterPosition = function (t, e, i, n, s) {
                                var a = e[i + 2], r = e[i + 3], o = a - e[i], h = r - e[i + 1], l = Math.atan2(h, o);
                                n[s] = a + t * Math.cos(l), n[s + 1] = r + t * Math.sin(l), n[s + 2] = l;
                            }, e.addCurvePosition = function (t, e, i, n, s, a, r, o, h, l, c, u) {
                                0 == t && (t = 1e-4);
                                var d = t * t, _ = d * t, f = 1 - t, p = f * f, g = p * f, v = f * t, m = 3 * v, y = f * m, w = m * t, x = e * g + n * y + a * w + o * _, b = i * g + s * y + r * w + h * _;
                                l[c] = x, l[c + 1] = b, l[c + 2] = u ? Math.atan2(b - (i * p + s * v * 2 + r * d), x - (e * p + n * v * 2 + a * d)) : 0;
                            }, t.NONE = -1, t.BEFORE = -2, t.AFTER = -3, n(t, ["_tempMt", function () {
                                return this._tempMt = new g();
                            }]), t;
                        }(), U = function () {
                            function t() {
                                this.name = null, this.target = null, this.positionMode = null, this.spacingMode = null,
                                    this.rotateMode = null, this.offsetRotation = NaN, this.position = NaN, this.spacing = NaN,
                                    this.rotateMix = NaN, this.translateMix = NaN, this.bones = [];
                            }
                            return s(t, "laya.ani.bone.PathConstraintData"), t;
                        }(), W = function () {
                            function t() {
                                this.name = null, this.slotArr = [];
                            }
                            return s(t, "laya.ani.bone.SkinData"), t;
                        }(), Y = function () {
                            function t() {
                                this.name = null, this.attachmentName = null, this.type = 0, this.transform = null,
                                    this.width = NaN, this.height = NaN, this.texture = null, this.bones = null, this.uvs = null,
                                    this.weights = null, this.triangles = null, this.vertices = null, this.lengths = null,
                                    this.verLen = 0;
                            }
                            s(t, "laya.ani.bone.SkinSlotDisplayData");
                            var e = t.prototype;
                            return e.createTexture = function (t) {
                                return this.texture ? this.texture : (this.texture = new C(t.bitmap, this.uvs),
                                    this.uvs[0] > this.uvs[4] && this.uvs[1] > this.uvs[5] ? (this.texture.width = t.height,
                                        this.texture.height = t.width, this.texture.offsetX = -t.offsetX, this.texture.offsetY = -t.offsetY,
                                        this.texture.sourceWidth = t.sourceHeight, this.texture.sourceHeight = t.sourceWidth) : (this.texture.width = t.width,
                                            this.texture.height = t.height, this.texture.offsetX = -t.offsetX, this.texture.offsetY = -t.offsetY,
                                            this.texture.sourceWidth = t.sourceWidth, this.texture.sourceHeight = t.sourceHeight),
                                    m.isWebGL || this.uvs[1] > this.uvs[5] && (this.texture.offsetY = this.texture.sourceHeight - this.texture.height - this.texture.offsetY),
                                    this.texture);
                            }, e.destory = function () {
                                this.texture && this.texture.destroy();
                            }, t;
                        }(), X = function () {
                            function t() {
                                this.name = null, this.displayArr = [];
                            }
                            s(t, "laya.ani.bone.SlotData");
                            return t.prototype.getDisplayByName = function (t) {
                                for (var e = 0, i = this.displayArr.length; e < i; e++) if (this.displayArr[e].attachmentName == t) return e;
                                return -1;
                            }, t;
                        }(), K = function () {
                            function t(t, e) {
                                this._data = null, this._bones = null, this.target = null, this.rotateMix = NaN,
                                    this.translateMix = NaN, this.scaleMix = NaN, this.shearMix = NaN, this._temp = r(2, 0),
                                    this._data = t, null == this._bones && (this._bones = []), this.target = e[t.targetIndex];
                                var i = 0, n = 0;
                                for (i = 0, n = t.boneIndexs.length; i < n; i++) this._bones.push(e[t.boneIndexs[i]]);
                                this.rotateMix = t.rotateMix, this.translateMix = t.translateMix, this.scaleMix = t.scaleMix,
                                    this.shearMix = t.shearMix;
                            }
                            s(t, "laya.ani.bone.TfConstraint");
                            return t.prototype.apply = function () {
                                for (var t, e = this.target.resultMatrix.a, i = this.target.resultMatrix.b, n = this.target.resultMatrix.c, s = this.target.resultMatrix.d, a = 0, r = this._bones.length; a < r; a++) {
                                    if (t = this._bones[a], this.rotateMix > 0) {
                                        var o = t.resultMatrix.a, h = t.resultMatrix.b, l = t.resultMatrix.c, c = t.resultMatrix.d, u = Math.atan2(n, e) - Math.atan2(l, o) + this._data.offsetRotation * Math.PI / 180;
                                        u > Math.PI ? u -= 2 * Math.PI : u < -Math.PI && (u += 2 * Math.PI), u *= this.rotateMix;
                                        var d = Math.cos(u), _ = Math.sin(u);
                                        t.resultMatrix.a = d * o - _ * l, t.resultMatrix.b = d * h - _ * c, t.resultMatrix.c = _ * o + d * l,
                                            t.resultMatrix.d = _ * h + d * c;
                                    }
                                    if (this.translateMix && (this._temp[0] = this._data.offsetX, this._temp[1] = this._data.offsetY,
                                        this.target.localToWorld(this._temp), t.resultMatrix.tx += (this._temp[0] - t.resultMatrix.tx) * this.translateMix,
                                        t.resultMatrix.ty += (this._temp[1] - t.resultMatrix.ty) * this.translateMix, t.updateChild()),
                                        this.scaleMix > 0) {
                                        var f = Math.sqrt(t.resultMatrix.a * t.resultMatrix.a + t.resultMatrix.c * t.resultMatrix.c), p = Math.sqrt(e * e + n * n), g = f > 1e-5 ? (f + (p - f + this._data.offsetScaleX) * this.scaleMix) / f : 0;
                                        t.resultMatrix.a *= g, t.resultMatrix.c *= g, f = Math.sqrt(t.resultMatrix.b * t.resultMatrix.b + t.resultMatrix.d * t.resultMatrix.d),
                                            p = Math.sqrt(i * i + s * s), g = f > 1e-5 ? (f + (p - f + this._data.offsetScaleY) * this.scaleMix) / f : 0,
                                            t.resultMatrix.b *= g, t.resultMatrix.d *= g;
                                    }
                                    if (this.shearMix > 0) {
                                        h = t.resultMatrix.b, c = t.resultMatrix.d;
                                        var v = Math.atan2(c, h);
                                        (u = Math.atan2(s, i) - Math.atan2(n, e) - (v - Math.atan2(t.resultMatrix.c, t.resultMatrix.a))) > Math.PI ? u -= 2 * Math.PI : u < -Math.PI && (u += 2 * Math.PI),
                                            u = v + (u + this._data.offsetShearY * Math.PI / 180) * this.shearMix, g = Math.sqrt(h * h + c * c),
                                            t.resultMatrix.b = Math.cos(u) * g, t.resultMatrix.d = Math.sin(u) * g;
                                    }
                                }
                            }, t;
                        }(), j = function () {
                            function t() {
                                this.name = null, this.targetIndex = 0, this.rotateMix = NaN, this.translateMix = NaN,
                                    this.scaleMix = NaN, this.shearMix = NaN, this.offsetRotation = NaN, this.offsetX = NaN,
                                    this.offsetY = NaN, this.offsetScaleX = NaN, this.offsetScaleY = NaN, this.offsetShearY = NaN,
                                    this.boneIndexs = [];
                            }
                            return s(t, "laya.ani.bone.TfConstraintData"), t;
                        }(), q = function () {
                            function t() {
                                this.skX = 0, this.skY = 0, this.scX = 1, this.scY = 1, this.x = 0, this.y = 0,
                                    this.skewX = 0, this.skewY = 0, this.mMatrix = null;
                            }
                            s(t, "laya.ani.bone.Transform");
                            var e = t.prototype;
                            return e.initData = function (t) {
                                void 0 != t.x && (this.x = t.x), void 0 != t.y && (this.y = t.y), void 0 != t.skX && (this.skX = t.skX),
                                    void 0 != t.skY && (this.skY = t.skY), void 0 != t.scX && (this.scX = t.scX), void 0 != t.scY && (this.scY = t.scY);
                            }, e.getMatrix = function () {
                                var t;
                                return (t = this.mMatrix ? this.mMatrix : this.mMatrix = new g()).identity(), t.scale(this.scX, this.scY),
                                    (this.skewX || this.skewY) && this.skew(t, this.skewX * Math.PI / 180, this.skewY * Math.PI / 180),
                                    t.rotate(this.skX * Math.PI / 180), t.translate(this.x, this.y), t;
                            }, e.skew = function (t, e, i) {
                                var n = Math.sin(i), s = Math.cos(i), a = Math.sin(e), r = Math.cos(e);
                                return t.setTo(t.a * r - t.b * n, t.a * a + t.b * s, t.c * r - t.d * n, t.c * a + t.d * s, t.tx * r - t.ty * n, t.tx * a + t.ty * s),
                                    t;
                            }, t;
                        }(), $ = function () {
                            function t() { }
                            return s(t, "laya.ani.bone.UVTools"), t.getRelativeUV = function (t, e, i) {
                                var n = t[0], s = t[2] - t[0], a = t[1], r = t[5] - t[1];
                                i || (i = []), i.length = e.length;
                                var o = 0, h = 0;
                                h = i.length;
                                var l = 1 / s, c = 1 / r;
                                for (o = 0; o < h; o += 2) i[o] = (e[o] - n) * l, i[o + 1] = (e[o + 1] - a) * c;
                                return i;
                            }, t.getAbsoluteUV = function (t, e, i) {
                                if (0 == t[0] && 0 == t[1] && 1 == t[4] && 1 == t[5]) return i ? (M.copyArray(i, e),
                                    i) : e;
                                var n = t[0], s = t[2] - t[0], a = t[1], r = t[5] - t[1];
                                i || (i = []), i.length = e.length;
                                var o = 0, h = 0;
                                for (h = i.length, o = 0; o < h; o += 2) i[o] = e[o] * s + n, i[o + 1] = e[o + 1] * r + a;
                                return i;
                            }, t;
                        }(), Q = function () {
                            function t() {
                                this.startTime = NaN, this.duration = NaN, this.interpolationData = null, this.data = null,
                                    this.nextData = null;
                            }
                            return s(t, "laya.ani.KeyFramesContent"), t;
                        }(), Z = function () {
                            function t() { }
                            return s(t, "laya.ani.math.BezierLerp"), t.getBezierRate = function (e, i, n, s, a) {
                                var r = t._getBezierParamKey(i, n, s, a), o = 100 * r + e;
                                if (t._bezierResultCache[o]) return t._bezierResultCache[o];
                                var h = t._getBezierPoints(i, n, s, a, r), l = 0, c = 0;
                                for (c = h.length, l = 0; l < c; l += 2) if (e <= h[l]) return t._bezierResultCache[o] = h[l + 1],
                                    h[l + 1];
                                return t._bezierResultCache[o] = 1, 1;
                            }, t._getBezierParamKey = function (t, e, i, n) {
                                return 100 * (100 * (100 * (100 * t + e) + i) + n);
                            }, t._getBezierPoints = function (e, i, n, s, a) {
                                if (t._bezierPointsCache[a]) return t._bezierPointsCache[a];
                                var r;
                                r = [0, 0, e, i, n, s, 1, 1];
                                var h;
                                return h = new o().getBezierPoints(r, 100, 3), t._bezierPointsCache[a] = h, h;
                            }, t._bezierResultCache = {}, t._bezierPointsCache = {}, t;
                        }(), J = function (t) {
                            function e() {
                                this._destroyed = !1, this._templet = null, this._currentTime = NaN, this._currentFrameTime = NaN,
                                    this._playStart = NaN, this._playEnd = NaN, this._playDuration = NaN, this._overallDuration = NaN,
                                    this._stopWhenCircleFinish = !1, this._elapsedPlaybackTime = NaN, this._startUpdateLoopCount = NaN,
                                    this._currentAnimationClipIndex = 0, this._currentKeyframeIndex = 0, this._paused = !1,
                                    this._cacheFrameRate = 0, this._cacheFrameRateInterval = NaN, this._cachePlayRate = NaN,
                                    this._fullFrames = null, this.isCache = !0, this.playbackRate = 1, this.returnToZeroStopped = !1,
                                    e.__super.call(this), this._destroyed = !1, this._currentAnimationClipIndex = -1,
                                    this._currentKeyframeIndex = -1, this._currentTime = 0, this._overallDuration = Number.MAX_VALUE,
                                    this._stopWhenCircleFinish = !1, this._elapsedPlaybackTime = 0, this._startUpdateLoopCount = -1,
                                    this._cachePlayRate = 1, this.cacheFrameRate = 60, this.returnToZeroStopped = !1;
                            }
                            s(e, "laya.ani.AnimationPlayer", c);
                            var n = e.prototype;
                            return i.imps(n, {
                                "laya.resource.IDestroy": !0
                            }), n._onTempletLoadedComputeFullKeyframeIndices = function (t, e, i) {
                                this._templet === i && this._cachePlayRate === t && this._cacheFrameRate === e && this._computeFullKeyframeIndices();
                            }, n._computeFullKeyframeIndices = function () {
                                for (var t = this._fullFrames = [], e = this._templet, i = this._cacheFrameRateInterval * this._cachePlayRate, n = 0, s = e.getAnimationCount(); n < s; n++) {
                                    for (var a = [], r = 0, o = e.getAnimation(n).nodes.length; r < o; r++) {
                                        for (var h = e.getAnimation(n).nodes[r], l = Math.floor(h.playTime / i + .01), c = new Uint16Array(l + 1), u = -1, d = 0, _ = h.keyFrame.length; d < _; d++) {
                                            var f = h.keyFrame[d], p = f.startTime, g = p + f.duration + i;
                                            do {
                                                for (var v = Math.floor(p / i + .5), m = u + 1; m < v; m++) c[m] = d;
                                                u = v, c[v] = d, p += i;
                                            } while (p <= g);
                                        }
                                        a.push(c);
                                    }
                                    t.push(a);
                                }
                            }, n._onAnimationTempletLoaded = function () {
                                this.destroyed || this._calculatePlayDuration();
                            }, n._calculatePlayDuration = function () {
                                if (0 !== this.state) {
                                    var t = this._templet.getAniDuration(this._currentAnimationClipIndex);
                                    0 === this._playEnd && (this._playEnd = t), this._playEnd > t && (this._playEnd = t),
                                        this._playDuration = this._playEnd - this._playStart;
                                }
                            }, n._setPlayParams = function (t, e) {
                                this._currentTime = t, this._currentKeyframeIndex = Math.max(Math.floor(this.currentPlayTime / e + .01), 0),
                                    this._currentFrameTime = this._currentKeyframeIndex * e;
                            }, n._setPlayParamsWhenStop = function (t, e, i) {
                                void 0 === i && (i = -1), this._currentTime = t;
                                var n = i > 0 ? i : t;
                                this._currentKeyframeIndex = Math.max(Math.floor(n / e + .01), 0), this._currentFrameTime = this._currentKeyframeIndex * e,
                                    this._currentAnimationClipIndex = -1;
                            }, n._update = function (t) {
                                if (-1 !== this._currentAnimationClipIndex && !this._paused && this._templet && this._templet.loaded) {
                                    var e = this._cacheFrameRateInterval * this._cachePlayRate, i = 0;
                                    this._startUpdateLoopCount !== L.loopCount && (i = t * this.playbackRate, this._elapsedPlaybackTime += i);
                                    var n = this.playDuration;
                                    if (i += this._currentTime, 0 !== this._overallDuration && this._elapsedPlaybackTime >= this._overallDuration || 0 === this._overallDuration && this._elapsedPlaybackTime >= n || 0 === this._overallDuration && i >= this.playEnd) return this._setPlayParamsWhenStop(n, e, this.playEnd),
                                        void this.event("stopped");
                                    if (n > 0) if (i >= n) do {
                                        if (i -= n, this._stopWhenCircleFinish) return this._setPlayParamsWhenStop(n, e),
                                            this._stopWhenCircleFinish = !1, void this.event("stopped");
                                        i < n && (this._setPlayParams(i, e), this.event("complete"));
                                    } while (i >= n); else this._setPlayParams(i, e); else {
                                        if (this._stopWhenCircleFinish) return this._setPlayParamsWhenStop(n, e), this._stopWhenCircleFinish = !1,
                                            void this.event("stopped");
                                        this._currentTime = this._currentFrameTime = this._currentKeyframeIndex = 0, this.event("complete");
                                    }
                                }
                            }, n._destroy = function () {
                                this.offAll(), this._templet = null, this._fullFrames = null, this._destroyed = !0;
                            }, n.play = function (t, e, i, n, s) {
                                if (void 0 === t && (t = 0), void 0 === e && (e = 1), void 0 === i && (i = 2147483647),
                                    void 0 === n && (n = 0), void 0 === s && (s = 0), !this._templet) throw new Error("AnimationPlayer:templet must not be null,maybe you need to set url.");
                                if (i < 0 || n < 0 || s < 0) throw new Error("AnimationPlayer:overallDuration,playStart and playEnd must large than zero.");
                                if (0 !== s && n > s) throw new Error("AnimationPlayer:start must less than end.");
                                this._currentTime = 0, this._currentFrameTime = 0, this._elapsedPlaybackTime = 0,
                                    this.playbackRate = e, this._overallDuration = i, this._playStart = n, this._playEnd = s,
                                    this._paused = !1, this._currentAnimationClipIndex = t, this._currentKeyframeIndex = 0,
                                    this._startUpdateLoopCount = L.loopCount, this.event("played"), this._templet.loaded ? this._calculatePlayDuration() : this._templet.once("loaded", this, this._onAnimationTempletLoaded),
                                    this._update(0);
                            }, n.playByFrame = function (t, e, i, n, s, a) {
                                void 0 === t && (t = 0), void 0 === e && (e = 1), void 0 === i && (i = 2147483647),
                                    void 0 === n && (n = 0), void 0 === s && (s = 0), void 0 === a && (a = 30);
                                var r = 1e3 / a;
                                this.play(t, e, i, n * r, s * r);
                            }, n.stop = function (t) {
                                void 0 === t && (t = !0), t ? (this._currentTime = this._currentFrameTime = this._currentKeyframeIndex = 0,
                                    this._currentAnimationClipIndex = -1, this.event("stopped")) : this._stopWhenCircleFinish = !0;
                            }, a(0, n, "playEnd", function () {
                                return this._playEnd;
                            }), a(0, n, "templet", function () {
                                return this._templet;
                            }, function (t) {
                                0 === !this.state && this.stop(!0), this._templet !== t && (this._templet = t, t.loaded ? this._computeFullKeyframeIndices() : t.once("loaded", this, this._onTempletLoadedComputeFullKeyframeIndices, [this._cachePlayRate, this._cacheFrameRate]));
                            }), a(0, n, "playStart", function () {
                                return this._playStart;
                            }), a(0, n, "playDuration", function () {
                                return this._playDuration;
                            }), a(0, n, "state", function () {
                                return -1 === this._currentAnimationClipIndex ? 0 : this._paused ? 1 : 2;
                            }), a(0, n, "currentKeyframeIndex", function () {
                                return this._currentKeyframeIndex;
                            }), a(0, n, "overallDuration", function () {
                                return this._overallDuration;
                            }), a(0, n, "currentFrameTime", function () {
                                return this._currentFrameTime;
                            }), a(0, n, "currentAnimationClipIndex", function () {
                                return this._currentAnimationClipIndex;
                            }), a(0, n, "currentPlayTime", function () {
                                return this._currentTime + this._playStart;
                            }), a(0, n, "cachePlayRate", function () {
                                return this._cachePlayRate;
                            }, function (t) {
                                this._cachePlayRate !== t && (this._cachePlayRate = t, this._templet && (this._templet.loaded ? this._computeFullKeyframeIndices() : this._templet.once("loaded", this, this._onTempletLoadedComputeFullKeyframeIndices, [t, this._cacheFrameRate])));
                            }), a(0, n, "cacheFrameRate", function () {
                                return this._cacheFrameRate;
                            }, function (t) {
                                this._cacheFrameRate !== t && (this._cacheFrameRate = t, this._cacheFrameRateInterval = 1e3 / this._cacheFrameRate,
                                    this._templet && (this._templet.loaded ? this._computeFullKeyframeIndices() : this._templet.once("loaded", this, this._onTempletLoadedComputeFullKeyframeIndices, [this._cachePlayRate, t])));
                            }), a(0, n, "currentTime", null, function (t) {
                                if (-1 !== this._currentAnimationClipIndex && this._templet && this._templet.loaded) {
                                    if (t < this._playStart || t > this._playEnd) throw new Error("AnimationPlayer:value must large than playStartTime,small than playEndTime.");
                                    this._startUpdateLoopCount = L.loopCount;
                                    var e = this._cacheFrameRateInterval * this._cachePlayRate;
                                    this._currentTime = t, this._currentKeyframeIndex = Math.max(Math.floor(this.currentPlayTime / e), 0),
                                        this._currentFrameTime = this._currentKeyframeIndex * e;
                                }
                            }), a(0, n, "paused", function () {
                                return this._paused;
                            }, function (t) {
                                this._paused = t, t && this.event("paused");
                            }), a(0, n, "cacheFrameRateInterval", function () {
                                return this._cacheFrameRateInterval;
                            }), a(0, n, "destroyed", function () {
                                return this._destroyed;
                            }), e;
                        }(), tt = function (t) {
                            function e() {
                                e.__super.call(this), m.isConchNode && (this.drawSkin = function (t) {
                                    t.transform || (t.transform = g.EMPTY), this._addCmd([t]), this.setSkinMesh && this.setSkinMesh(t._ps, t.mVBData, t.mEleNum, 0, t.mTexture, t.transform);
                                });
                            }
                            s(e, "laya.ani.GraphicsAni", u);
                            return e.prototype.drawSkin = function (t) {
                                var e = [t];
                                this._saveToCmd(m._context._drawSkin, e);
                            }, e.create = function () {
                                return e._caches.pop() || new e();
                            }, e.recycle = function (t) {
                                t.clear(), e._caches.push(t);
                            }, e._caches = [], e;
                        }(), et = function (t) {
                            function e() {
                                e.__super.call(this), this.mesh = new D();
                            }
                            s(e, "laya.ani.bone.canvasmesh.SkinMeshCanvas", P);
                            var i = e.prototype;
                            return i.init2 = function (t, e, i, n, s) {
                                this.transform && (this.transform = null);
                                var a;
                                i ? a = i : (a = []).push(0, 1, 3, 3, 1, 2), this.mesh.texture = t, this.mesh.indexes = a,
                                    this.mesh.vertices = n, this.mesh.uvs = s;
                            }, i.render = function (t, i, n) {
                                this.mesh.texture && (this.transform ? (this.transform.translate(i, n), this.renderToContext(t),
                                    this.transform.translate(-i, -n)) : (this.transform = e._tempMatrix, this.transform.identity(),
                                        this.transform.translate(i, n), this.renderToContext(t), this.transform.translate(-i, -n),
                                        this.transform = null));
                            }, n(e, ["_tempMatrix", function () {
                                return this._tempMatrix = new g();
                            }]), e;
                        }(), it = function (t) {
                            function e() {
                                this._aniMap = {}, this.unfixedLastAniIndex = -1, e.__super.call(this), this._anis = new Array();
                            }
                            s(e, "laya.ani.AnimationTemplet", y);
                            var n = e.prototype;
                            return n.parse = function (t) {
                                var e = new l(t);
                                this._aniVersion = e.readUTFString(), A.parse(this, e);
                            }, n._calculateKeyFrame = function (t, e, i) {
                                var n = t.keyFrame;
                                n[e] = n[0];
                                for (var s = 0; s < e; s++) {
                                    var a = n[s];
                                    a.nextData = 0 === a.duration ? a.data : n[s + 1].data;
                                }
                                n.length--;
                            }, n.onAsynLoaded = function (t, e, i) {
                                var n = new l(e);
                                switch (this._aniVersion = n.readUTFString(), this._aniVersion) {
                                    case "LAYAANIMATION:02":
                                        I.parse(this, n);
                                        break;

                                    default:
                                        A.parse(this, n);
                                }
                                this._endLoaded();
                            }, n.disposeResource = function () {
                                this._aniVersion = null, this._anis = null, this._aniMap = null, this._publicExtData = null,
                                    this.unfixedCurrentFrameIndexes = null, this.unfixedCurrentTimes = null, this.unfixedKeyframes = null,
                                    this._aniClassName = null, this._animationDatasCache = null;
                            }, n.getAnimationCount = function () {
                                return this._anis.length;
                            }, n.getAnimation = function (t) {
                                return this._anis[t];
                            }, n.getAniDuration = function (t) {
                                return this._anis[t].playTime;
                            }, n.getNodes = function (t) {
                                return this._anis[t].nodes;
                            }, n.getNodeIndexWithName = function (t, e) {
                                return this._anis[t].bone3DMap[e];
                            }, n.getNodeCount = function (t) {
                                return this._anis[t].nodes.length;
                            }, n.getTotalkeyframesLength = function (t) {
                                return this._anis[t].totalKeyframeDatasLength;
                            }, n.getPublicExtData = function () {
                                return this._publicExtData;
                            }, n.getAnimationDataWithCache = function (t, e, i, n) {
                                var s = e[i];
                                if (s) {
                                    var a = s[t];
                                    return a ? a[n] : null;
                                }
                                return null;
                            }, n.setAnimationDataWithCache = function (t, e, i, n, s) {
                                var a = e[i] || (e[i] = {});
                                (a[t] || (a[t] = []))[n] = s;
                            }, n.getOriginalData = function (t, i, n, s, a) {
                                for (var r = this._anis[t].nodes, o = 0, h = 0, l = r.length, c = 0; h < l; h++) {
                                    var u, d = r[h];
                                    u = d.keyFrame[n[h][s]], d.dataOffset = c;
                                    var _ = a - u.startTime, f = d.lerpType;
                                    if (f) switch (f) {
                                        case 0:
                                        case 1:
                                            for (o = 0; o < d.keyframeWidth;) o += d.interpolationMethod[o](d, o, i, c + o, u.data, _, null, u.duration, u.nextData);
                                            break;

                                        case 2:
                                            var p = u.interpolationData, g = p.length, v = 0;
                                            for (o = 0; o < g;) {
                                                var m = p[o];
                                                switch (m) {
                                                    case 6:
                                                    case 7:
                                                        o += e.interpolation[m](d, v, i, c + v, u.data, _, null, u.duration, u.nextData, p, o + 1);
                                                        break;

                                                    default:
                                                        o += e.interpolation[m](d, v, i, c + v, u.data, _, null, u.duration, u.nextData);
                                                }
                                                v++;
                                            }
                                    } else for (o = 0; o < d.keyframeWidth;) o += d.interpolationMethod[o](d, o, i, c + o, u.data, _, null, u.duration, u.nextData);
                                    c += d.keyframeWidth;
                                }
                            }, n.getNodesCurrentFrameIndex = function (t, e) {
                                var i = this._anis[t].nodes;
                                t !== this.unfixedLastAniIndex && (this.unfixedCurrentFrameIndexes = new Uint32Array(i.length),
                                    this.unfixedCurrentTimes = new Float32Array(i.length), this.unfixedLastAniIndex = t);
                                for (var n = 0, s = i.length; n < s; n++) {
                                    var a = i[n];
                                    for (e < this.unfixedCurrentTimes[n] && (this.unfixedCurrentFrameIndexes[n] = 0),
                                        this.unfixedCurrentTimes[n] = e; this.unfixedCurrentFrameIndexes[n] < a.keyFrame.length && !(a.keyFrame[this.unfixedCurrentFrameIndexes[n]].startTime > this.unfixedCurrentTimes[n]);) this.unfixedCurrentFrameIndexes[n]++;
                                    this.unfixedCurrentFrameIndexes[n]--;
                                }
                                return this.unfixedCurrentFrameIndexes;
                            }, n.getOriginalDataUnfixedRate = function (t, i, n) {
                                var s = this._anis[t].nodes;
                                t !== this.unfixedLastAniIndex && (this.unfixedCurrentFrameIndexes = new Uint32Array(s.length),
                                    this.unfixedCurrentTimes = new Float32Array(s.length), this.unfixedKeyframes = r(s.length),
                                    this.unfixedLastAniIndex = t);
                                for (var a = 0, o = 0, h = s.length, l = 0; o < h; o++) {
                                    var c = s[o];
                                    for (n < this.unfixedCurrentTimes[o] && (this.unfixedCurrentFrameIndexes[o] = 0),
                                        this.unfixedCurrentTimes[o] = n; this.unfixedCurrentFrameIndexes[o] < c.keyFrame.length && !(c.keyFrame[this.unfixedCurrentFrameIndexes[o]].startTime > this.unfixedCurrentTimes[o]);) this.unfixedKeyframes[o] = c.keyFrame[this.unfixedCurrentFrameIndexes[o]],
                                            this.unfixedCurrentFrameIndexes[o]++;
                                    var u = this.unfixedKeyframes[o];
                                    c.dataOffset = l;
                                    var d = n - u.startTime;
                                    if (c.lerpType) switch (c.lerpType) {
                                        case 0:
                                        case 1:
                                            for (a = 0; a < c.keyframeWidth;) a += c.interpolationMethod[a](c, a, i, l + a, u.data, d, null, u.duration, u.nextData);
                                            break;

                                        case 2:
                                            var _ = u.interpolationData, f = _.length, p = 0;
                                            for (a = 0; a < f;) {
                                                var g = _[a];
                                                switch (g) {
                                                    case 6:
                                                    case 7:
                                                        a += e.interpolation[g](c, p, i, l + p, u.data, d, null, u.duration, u.nextData, _, a + 1);
                                                        break;

                                                    default:
                                                        a += e.interpolation[g](c, p, i, l + p, u.data, d, null, u.duration, u.nextData);
                                                }
                                                p++;
                                            }
                                    } else for (a = 0; a < c.keyframeWidth;) a += c.interpolationMethod[a](c, a, i, l + a, u.data, d, null, u.duration, u.nextData);
                                    l += c.keyframeWidth;
                                }
                            }, e._LinearInterpolation_0 = function (t, e, i, n, s, a, r, o, h, l) {
                                var c = 0 === o ? 0 : a / o;
                                return i[n] = (1 - c) * s[e] + c * h[e], 1;
                            }, e._QuaternionInterpolation_1 = function (t, e, i, n, s, a, r, o, h, l) {
                                var c = 0 === o ? 0 : a / o;
                                return p.slerpQuaternionArray(s, e, h, e, c, i, n), 4;
                            }, e._AngleInterpolation_2 = function (t, e, i, n, s, a, r, o, h, l) {
                                return 0;
                            }, e._RadiansInterpolation_3 = function (t, e, i, n, s, a, r, o, h, l) {
                                return 0;
                            }, e._Matrix4x4Interpolation_4 = function (t, e, i, n, s, a, r, o, h, l) {
                                for (var c = 0; c < 16; c++, e++) i[n + c] = s[e] + a * r[e];
                                return 16;
                            }, e._NoInterpolation_5 = function (t, e, i, n, s, a, r, o, h, l) {
                                return i[n] = s[e], 1;
                            }, e._BezierInterpolation_6 = function (t, e, i, n, s, a, r, o, h, l, c) {
                                return void 0 === c && (c = 0), i[n] = s[e] + (h[e] - s[e]) * Z.getBezierRate(a / o, l[c], l[c + 1], l[c + 2], l[c + 3]),
                                    5;
                            }, e._BezierInterpolation_7 = function (t, e, i, n, s, a, r, o, h, l, c) {
                                return void 0 === c && (c = 0), i[n] = l[c + 4] + l[c + 5] * Z.getBezierRate((.001 * a + l[c + 6]) / l[c + 7], l[c], l[c + 1], l[c + 2], l[c + 3]),
                                    9;
                            }, e.load = function (t) {
                                return i.loader.create(t, null, null, e);
                            }, e.interpolation = [e._LinearInterpolation_0, e._QuaternionInterpolation_1, e._AngleInterpolation_2, e._RadiansInterpolation_3, e._Matrix4x4Interpolation_4, e._NoInterpolation_5, e._BezierInterpolation_6, e._BezierInterpolation_7],
                                e;
                        }(), nt = (function (t) {
                            function e() {
                                this.isCached = !1, this.canvas = null, this.tex = null, this.rec = null, e.__super.call(this);
                            }
                            s(e, "laya.ani.bone.canvasmesh.CacheAbleSkinMesh", et);
                            var i = e.prototype;
                            i.getCanvasPic = function () {
                                var t = new d("2D"), i = t.getContext("2d");
                                this.rec = this.mesh.getBounds(), t.size(this.rec.width, this.rec.height);
                                var n;
                                return n = this.transform, this.transform = e.tempMt, this.transform.identity(),
                                    this.transform.translate(-this.rec.x, -this.rec.y), this.renderToContext(i), this.transform.translate(+this.rec.x, +this.rec.y),
                                    this.transform = n, new C(t);
                            }, i.render = function (t, e, i) {
                                this.mesh.texture && (this.isCached || (this.isCached = !0, this.tex = this.getCanvasPic()),
                                    this.transform ? (this.transform.translate(e, i), this._renderTextureToContext(t),
                                        this.transform.translate(-e, -i)) : (this.transform = et._tempMatrix, this.transform.identity(),
                                            this.transform.translate(e, i), this._renderTextureToContext(t), this.transform.translate(-e, -i),
                                            this.transform = null));
                            }, i._renderTextureToContext = function (t) {
                                this.context = t.ctx || t, t.save();
                                var e;
                                if (e = this.tex, this.transform) {
                                    var i = this.transform;
                                    t.transform(i.a, i.b, i.c, i.d, i.tx, i.ty);
                                }
                                this.rec = this.mesh.getBounds(), t.translate(this.rec.x, this.rec.y), t.drawTexture(e, 0, 0, e.width, e.height, 0, 0),
                                    t.restore();
                            }, n(e, ["tempMt", function () {
                                return this.tempMt = new g();
                            }]);
                        }(), function (t) {
                            function e() {
                                this.cacheOK = !1, this.cacheCmdOK = !1, this.transformCmds = [], this.drawCmds = [],
                                    e.__super.call(this), this.tempMesh = new D();
                            }
                            s(e, "laya.ani.bone.canvasmesh.SimpleSkinMeshCanvas", t);
                            var i = e.prototype;
                            return i.init2 = function (e, i, n, s, a) {
                                t.prototype.init2.call(this, e, i, n, s, a), this.cacheOK = !1, this.cacheCmdOK = !1,
                                    this.transformCmds.length = 6, this.drawCmds.length = 9;
                            }, i.renderToContext = function (t) {
                                if (this.context = t.ctx || t, this.mesh) {
                                    if (this.mesh.uvs.length <= 8) return void (0 == this.mode ? this._renderWithIndexes(this.mesh) : this._renderNoIndexes(this.mesh));
                                    this.cacheOK || (this.tempMesh.texture = this.mesh.texture, this.tempMesh.uvs = this.mesh.texture.uv,
                                        this.tempMesh.vertices = z.solveMesh(this.mesh, this.tempMesh.vertices), this.cacheOK = !0),
                                        0 == this.mode ? this._renderWithIndexes(this.tempMesh) : this._renderNoIndexes(this.tempMesh);
                                }
                            }, i._renderWithIndexes = function (t) {
                                if (this.cacheCmdOK) this.renderByCache(t); else {
                                    var e = t.indexes, i = 0, n = e.length;
                                    for (n > 1 && (n = 1), i = 0; i < n; i += 3) {
                                        var s = 2 * e[i], a = 2 * e[i + 1], r = 2 * e[i + 2];
                                        this._renderDrawTriangle(t, s, a, r);
                                    }
                                    this.cacheCmdOK = !0;
                                }
                            }, i._renderDrawTriangle = function (t, e, i, n) {
                                var s = this.context, a = t.uvs, r = t.vertices, o = t.texture, h = o.bitmap, l = h.source, c = o.width, u = o.height, d = h.width, _ = h.height, f = NaN, p = NaN, g = NaN, v = NaN, m = NaN, y = NaN;
                                if (t.useUvTransform) {
                                    var w = t.uvTransform;
                                    f = (a[e] * w.a + a[e + 1] * w.c + w.tx) * d, p = (a[i] * w.a + a[i + 1] * w.c + w.tx) * d,
                                        g = (a[n] * w.a + a[n + 1] * w.c + w.tx) * d, v = (a[e] * w.b + a[e + 1] * w.d + w.ty) * _,
                                        m = (a[i] * w.b + a[i + 1] * w.d + w.ty) * _, y = (a[n] * w.b + a[n + 1] * w.d + w.ty) * _;
                                } else f = a[e] * d, p = a[i] * d, g = a[n] * d, v = a[e + 1] * _, m = a[i + 1] * _,
                                    y = a[n + 1] * _;
                                var x = r[e], b = r[i], L = r[n], C = r[e + 1], M = r[i + 1], T = r[n + 1], S = 1 / (f * m + v * g + p * y - m * g - v * p - f * y), A = x * m + v * L + b * y - m * L - v * b - x * y, I = f * b + x * g + p * L - b * g - x * p - f * L, E = f * m * L + v * b * g + x * p * y - x * m * g - v * p * L - f * b * y, R = C * m + v * T + M * y - m * T - v * M - C * y, P = f * M + C * g + p * T - M * g - C * p - f * T, D = f * m * T + v * M * g + C * p * y - C * m * g - v * p * T - f * M * y;
                                if (this.transformCmds[0] = A * S, this.transformCmds[1] = R * S, this.transformCmds[2] = I * S,
                                    this.transformCmds[3] = P * S, this.transformCmds[4] = E * S, this.transformCmds[5] = D * S,
                                    this.drawCmds[0] = l, this.drawCmds[1] = o.uv[0] * d, this.drawCmds[2] = o.uv[1] * _,
                                    this.drawCmds[3] = c, this.drawCmds[4] = u, this.drawCmds[5] = o.uv[0] * d, this.drawCmds[6] = o.uv[1] * _,
                                    this.drawCmds[7] = c, this.drawCmds[8] = u, s.save(), this.transform) {
                                    var k = this.transform;
                                    s.transform(k.a, k.b, k.c, k.d, k.tx, k.ty);
                                }
                                s.transform.apply(s, this.transformCmds), s.drawImage.apply(s, this.drawCmds), s.restore();
                            }, i.renderByCache = function (t) {
                                var e = this.context;
                                if (e.save(), this.transform) {
                                    var i = this.transform;
                                    e.transform(i.a, i.b, i.c, i.d, i.tx, i.ty);
                                }
                                e.transform.apply(e, this.transformCmds), e.drawImage.apply(e, this.drawCmds), e.restore();
                            }, e;
                        }(et)), st = function (t) {
                            function e(t, i) {
                                this._templet = null, this._player = null, this._curOriginalData = null, this._boneMatrixArray = [],
                                    this._lastTime = 0, this._currAniName = null, this._currAniIndex = -1, this._pause = !0,
                                    this._aniClipIndex = -1, this._clipIndex = -1, this._skinIndex = 0, this._skinName = "default",
                                    this._aniMode = 0, this._graphicsCache = null, this._boneSlotDic = null, this._bindBoneBoneSlotDic = null,
                                    this._boneSlotArray = null, this._index = -1, this._total = -1, this._indexControl = !1,
                                    this._aniPath = null, this._texturePath = null, this._complete = null, this._loadAniMode = 0,
                                    this._yReverseMatrix = null, this._ikArr = null, this._tfArr = null, this._pathDic = null,
                                    this._rootBone = null, this._boneList = null, this._aniSectionDic = null, this._eventIndex = 0,
                                    this._drawOrderIndex = 0, this._drawOrder = null, this._lastAniClipIndex = -1, this._lastUpdateAniClipIndex = -1,
                                    this._playAudio = !0, this._soundChannelArr = [], e.__super.call(this), void 0 === i && (i = 0),
                                    t && this.init(t, i);
                            }
                            s(e, "laya.ani.bone.Skeleton", t);
                            var n = e.prototype;
                            return n.init = function (t, e) {
                                void 0 === e && (e = 0);
                                var i = 0, n = 0;
                                if (1 == e) for (this._graphicsCache = [], i = 0, n = t.getAnimationCount(); i < n; i++) this._graphicsCache.push([]);
                                if (this._yReverseMatrix = t.yReverseMatrix, this._aniMode = e, this._templet = t,
                                    this._player = new J(), this._player.cacheFrameRate = t.rate, this._player.templet = t,
                                    this._player.play(), this._parseSrcBoneMatrix(), this._boneList = t.mBoneArr, this._rootBone = t.mRootBone,
                                    this._aniSectionDic = t.aniSectionDic, t.ikArr.length > 0) for (this._ikArr = [],
                                        i = 0, n = t.ikArr.length; i < n; i++) this._ikArr.push(new G(t.ikArr[i], this._boneList));
                                if (t.pathArr.length > 0) {
                                    var s, a;
                                    null == this._pathDic && (this._pathDic = {});
                                    var r;
                                    for (i = 0, n = t.pathArr.length; i < n; i++) s = t.pathArr[i], a = new V(s, this._boneList),
                                        (r = this._boneSlotDic[s.name]) && ((a = new V(s, this._boneList)).target = r),
                                        this._pathDic[s.name] = a;
                                }
                                if (t.tfArr.length > 0) for (this._tfArr = [], i = 0, n = t.tfArr.length; i < n; i++) this._tfArr.push(new K(t.tfArr[i], this._boneList));
                                if (t.skinDataArray.length > 0) {
                                    var o = this._templet.skinDataArray[this._skinIndex];
                                    this._skinName = o.name;
                                }
                                this._player.on("played", this, this._onPlay), this._player.on("stopped", this, this._onStop),
                                    this._player.on("paused", this, this._onPause);
                            }, n.load = function (t, e, n) {
                                void 0 === n && (n = 0), this._aniPath = t, this._complete = e, this._loadAniMode = n,
                                    i.loader.load([{
                                        url: t,
                                        type: "arraybuffer"
                                    }], _.create(this, this._onLoaded));
                            }, n._onLoaded = function () {
                                var t = f.getRes(this._aniPath);
                                if (null != t) {
                                    null == at.TEMPLET_DICTIONARY && (at.TEMPLET_DICTIONARY = {});
                                    var e;
                                    (e = at.TEMPLET_DICTIONARY[this._aniPath]) ? e.isParseFail ? this._parseFail() : e.isParserComplete ? this._parseComplete() : (e.on("complete", this, this._parseComplete),
                                        e.on("error", this, this._parseFail)) : ((e = new at())._setUrl(this._aniPath),
                                            at.TEMPLET_DICTIONARY[this._aniPath] = e, e.on("complete", this, this._parseComplete),
                                            e.on("error", this, this._parseFail), e.isParserComplete = !1, e.parseData(null, t));
                                }
                            }, n._parseComplete = function () {
                                var t = at.TEMPLET_DICTIONARY[this._aniPath];
                                t && (this.init(t, this._loadAniMode), this.play(0, !0)), this._complete && this._complete.runWith(this);
                            }, n._parseFail = function () {
                                console.log("[Error]:" + this._aniPath + "解析失败");
                            }, n._onPlay = function () {
                                this.event("played");
                            }, n._onStop = function () {
                                var t, e = this._templet.eventAniArr[this._aniClipIndex];
                                if (e && this._eventIndex < e.length) for (; this._eventIndex < e.length; this._eventIndex++) (t = e[this._eventIndex]).time >= this._player.playStart && t.time <= this._player.playEnd && this.event("label", t);
                                this._drawOrder = null, this.event("stopped");
                            }, n._onPause = function () {
                                this.event("paused");
                            }, n._parseSrcBoneMatrix = function () {
                                var t = 0, e = 0;
                                for (e = this._templet.srcBoneMatrixArr.length, t = 0; t < e; t++) this._boneMatrixArray.push(new g());
                                if (0 == this._aniMode) this._boneSlotDic = this._templet.boneSlotDic, this._bindBoneBoneSlotDic = this._templet.bindBoneBoneSlotDic,
                                    this._boneSlotArray = this._templet.boneSlotArray; else {
                                    null == this._boneSlotDic && (this._boneSlotDic = {}), null == this._bindBoneBoneSlotDic && (this._bindBoneBoneSlotDic = {}),
                                        null == this._boneSlotArray && (this._boneSlotArray = []);
                                    var i, n, s = this._templet.boneSlotArray;
                                    for (t = 0, e = s.length; t < e; t++) i = s[t], null == (n = this._bindBoneBoneSlotDic[i.parent]) && (this._bindBoneBoneSlotDic[i.parent] = n = []),
                                        this._boneSlotDic[i.name] = i = i.copy(), n.push(i), this._boneSlotArray.push(i);
                                }
                            }, n._emitMissedEvents = function (t, e, i) {
                                void 0 === i && (i = 0);
                                var n = this._templet.eventAniArr[this._player.currentAnimationClipIndex];
                                if (n) {
                                    var s, a = 0, r = 0;
                                    for (r = n.length, a = i; a < r; a++) (s = n[a]).time >= this._player.playStart && s.time <= this._player.playEnd && this.event("label", s);
                                }
                            }, n._update = function (t) {
                                if (void 0 === t && (t = !0), !(this._pause || t && this._indexControl)) {
                                    var e = this.timer.currTimer, i = this._player.currentKeyframeIndex, n = e - this._lastTime;
                                    if (t ? this._player._update(n) : i = -1, this._lastTime = e, this._player && (this._index = this._clipIndex = this._player.currentKeyframeIndex,
                                        !(this._index < 0 || n > 0 && this._clipIndex == i && this._lastUpdateAniClipIndex == this._aniClipIndex))) {
                                        this._lastUpdateAniClipIndex = this._aniClipIndex, i > this._clipIndex && 0 != this._eventIndex && (this._emitMissedEvents(this._player.playStart, this._player.playEnd, this._eventIndex),
                                            this._eventIndex = 0);
                                        var s, a, r = this._templet.eventAniArr[this._aniClipIndex];
                                        r && this._eventIndex < r.length && ((s = r[this._eventIndex]).time >= this._player.playStart && s.time <= this._player.playEnd ? this._player.currentPlayTime >= s.time && (this.event("label", s),
                                            this._eventIndex++, this._playAudio && s.audioValue && "null" !== s.audioValue && (a = x.playSound(this._player.templet._path + s.audioValue, 1, _.create(this, this._onAniSoundStoped)),
                                                x.playbackRate = this._player.playbackRate, a && this._soundChannelArr.push(a))) : s.time < this._player.playStart && this._playAudio && s.audioValue && "null" !== s.audioValue ? (this._eventIndex++,
                                                    a = x.playSound(this._player.templet._path + s.audioValue, 1, _.create(this, this._onAniSoundStoped), null, (this._player.currentPlayTime - s.time) / 1e3),
                                                    x.playbackRate = this._player.playbackRate, a && this._soundChannelArr.push(a)) : this._eventIndex++);
                                        var o;
                                        if (0 == this._aniMode) {
                                            if (o = this._templet.getGrahicsDataWithCache(this._aniClipIndex, this._clipIndex)) return void (this.graphics != o && (this.graphics = o));
                                            var h = 0, l = 0;
                                            for (l = this._clipIndex; !this._templet.getGrahicsDataWithCache(this._aniClipIndex, l - 1) && l > 0;) l--;
                                            if (l < this._clipIndex) for (h = l; h < this._clipIndex; h++) this._createGraphics(h);
                                        } else if (1 == this._aniMode) {
                                            if (o = this._getGrahicsDataWithCache(this._aniClipIndex, this._clipIndex)) return void (this.graphics != o && (this.graphics = o));
                                            for (l = this._clipIndex; !this._getGrahicsDataWithCache(this._aniClipIndex, l - 1) && l > 0;) l--;
                                            if (l < this._clipIndex) for (h = l; h < this._clipIndex; h++) this._createGraphics(h);
                                        }
                                        this._createGraphics();
                                    }
                                }
                            }, n._onAniSoundStoped = function (t) {
                                for (var e, i = this._soundChannelArr.length, n = 0; n < i; n++) ((e = this._soundChannelArr[n]).isStopped || t) && (!e.isStopped && e.stop(),
                                    this._soundChannelArr.splice(n, 1), i--, n--);
                            }, n._createGraphics = function (t) {
                                void 0 === t && (t = -1), -1 == t && (t = this._clipIndex);
                                var e, i = t * this._player.cacheFrameRateInterval, n = this._templet.drawOrderAniArr[this._aniClipIndex];
                                if (n && n.length > 0) for (this._drawOrderIndex = 0, e = n[this._drawOrderIndex]; i >= e.time && (this._drawOrder = e.drawOrder,
                                    this._drawOrderIndex++, !(this._drawOrderIndex >= n.length));) e = n[this._drawOrderIndex];
                                var s;
                                0 == this._aniMode || 1 == this._aniMode ? this.graphics = tt.create() : this.graphics instanceof laya.ani.GraphicsAni ? this.graphics.clear() : this.graphics = tt.create(),
                                    s = this.graphics;
                                var a = this._templet.getNodes(this._aniClipIndex);
                                this._templet.getOriginalData(this._aniClipIndex, this._curOriginalData, this._player._fullFrames[this._aniClipIndex], t, i);
                                var r, o, h, c, u = this._aniSectionDic[this._aniClipIndex], d = 0, _ = 0, f = 0, p = 0, v = 0, m = this._templet.srcBoneMatrixArr.length;
                                for (_ = 0, v = u[0]; _ < m; _++) c = this._boneList[_], h = this._templet.srcBoneMatrixArr[_],
                                    c.resultTransform.scX = h.scX * this._curOriginalData[d++], c.resultTransform.skX = h.skX + this._curOriginalData[d++],
                                    c.resultTransform.skY = h.skY + this._curOriginalData[d++], c.resultTransform.scY = h.scY * this._curOriginalData[d++],
                                    c.resultTransform.x = h.x + this._curOriginalData[d++], c.resultTransform.y = h.y + this._curOriginalData[d++],
                                    8 === this._templet.tMatrixDataLen && (c.resultTransform.skewX = h.skewX + this._curOriginalData[d++],
                                        c.resultTransform.skewY = h.skewY + this._curOriginalData[d++]);
                                var y, w = {}, x = {};
                                for (v += u[1]; _ < v; _++) w[(y = a[_]).name] = this._curOriginalData[d++], x[y.name] = this._curOriginalData[d++],
                                    this._curOriginalData[d++], this._curOriginalData[d++], this._curOriginalData[d++],
                                    this._curOriginalData[d++];
                                var b = {}, L = {};
                                for (v += u[2]; _ < v; _++) b[(y = a[_]).name] = this._curOriginalData[d++], L[y.name] = this._curOriginalData[d++],
                                    this._curOriginalData[d++], this._curOriginalData[d++], this._curOriginalData[d++],
                                    this._curOriginalData[d++];
                                if (this._pathDic) {
                                    var C;
                                    for (v += u[3]; _ < v; _++) if (y = a[_], C = this._pathDic[y.name]) {
                                        switch (new l(y.extenData).getByte()) {
                                            case 1:
                                                C.position = this._curOriginalData[d++];
                                                break;

                                            case 2:
                                                C.spacing = this._curOriginalData[d++];
                                                break;

                                            case 3:
                                                C.rotateMix = this._curOriginalData[d++], C.translateMix = this._curOriginalData[d++];
                                        }
                                    }
                                }
                                if (this._yReverseMatrix ? this._rootBone.update(this._yReverseMatrix) : this._rootBone.update(g.TEMP.identity()),
                                    this._ikArr) {
                                    var M;
                                    for (_ = 0, v = this._ikArr.length; _ < v; _++) M = this._ikArr[_], b.hasOwnProperty(M.name) && (M.bendDirection = b[M.name]),
                                        L.hasOwnProperty(M.name) && (M.mix = L[M.name]), M.apply();
                                }
                                if (this._pathDic) for (var T in this._pathDic) (C = this._pathDic[T]).apply(this._boneList, s);
                                if (this._tfArr) {
                                    for (_ = 0, p = this._tfArr.length; _ < p; _++) this._tfArr[_].apply();
                                }
                                for (_ = 0, p = this._boneList.length; _ < p; _++) if (c = this._boneList[_], o = this._bindBoneBoneSlotDic[c.name],
                                    c.resultMatrix.copyTo(this._boneMatrixArray[_]), o) for (f = 0, v = o.length; f < v; f++) (r = o[f]) && r.setParentMatrix(c.resultMatrix);
                                var S, A = {}, I = this._templet.deformAniArr;
                                if (I && I.length > 0) {
                                    if (this._lastAniClipIndex != this._aniClipIndex) for (this._lastAniClipIndex = this._aniClipIndex,
                                        _ = 0, v = this._boneSlotArray.length; _ < v; _++) (r = this._boneSlotArray[_]).deformData = null;
                                    var E = I[this._aniClipIndex];
                                    S = E.default, this._setDeform(S, A, this._boneSlotArray, i);
                                    var R;
                                    for (R in E) "default" != R && R != this._skinName && (S = E[R], this._setDeform(S, A, this._boneSlotArray, i));
                                    S = E[this._skinName], this._setDeform(S, A, this._boneSlotArray, i);
                                }
                                var P, D, k;
                                if (this._drawOrder) for (_ = 0, v = this._drawOrder.length; _ < v; _++) P = w[(r = this._boneSlotArray[this._drawOrder[_]]).name],
                                    D = x[r.name], isNaN(D) || (s.save(), s.alpha(D)), isNaN(P) || -2 == P || (this._templet.attachmentNames ? r.showDisplayByName(this._templet.attachmentNames[P]) : r.showDisplayByIndex(P)),
                                    A[this._drawOrder[_]] ? (k = A[this._drawOrder[_]], r.currDisplayData && k[r.currDisplayData.attachmentName] ? r.deformData = k[r.currDisplayData.attachmentName] : r.deformData = null) : r.deformData = null,
                                    isNaN(D) ? r.draw(s, this._boneMatrixArray, 2 == this._aniMode) : r.draw(s, this._boneMatrixArray, 2 == this._aniMode, D),
                                    isNaN(D) || s.restore(); else for (_ = 0, v = this._boneSlotArray.length; _ < v; _++) P = w[(r = this._boneSlotArray[_]).name],
                                        D = x[r.name], isNaN(D) || (s.save(), s.alpha(D)), isNaN(P) || -2 == P || (this._templet.attachmentNames ? r.showDisplayByName(this._templet.attachmentNames[P]) : r.showDisplayByIndex(P)),
                                        A[_] ? (k = A[_], r.currDisplayData && k[r.currDisplayData.attachmentName] ? r.deformData = k[r.currDisplayData.attachmentName] : r.deformData = null) : r.deformData = null,
                                        isNaN(D) ? r.draw(s, this._boneMatrixArray, 2 == this._aniMode) : r.draw(s, this._boneMatrixArray, 2 == this._aniMode, D),
                                        isNaN(D) || s.restore();
                                0 == this._aniMode ? this._templet.setGrahicsDataWithCache(this._aniClipIndex, t, s) : 1 == this._aniMode && this._setGrahicsDataWithCache(this._aniClipIndex, t, s);
                            }, n._setDeform = function (t, e, i, n) {
                                if (t) {
                                    var s, a, r, o = 0, h = 0, l = 0;
                                    if (t) for (o = 0, h = t.deformSlotDataList.length; o < h; o++) for (s = t.deformSlotDataList[o],
                                        l = 0; l < s.deformSlotDisplayList.length; l++) r = i[(a = s.deformSlotDisplayList[l]).slotIndex],
                                            a.apply(n, r), e[a.slotIndex] || (e[a.slotIndex] = {}), e[a.slotIndex][a.attachment] = a.deformData;
                                }
                            }, n.getAnimNum = function () {
                                return this._templet.getAnimationCount();
                            }, n.getAniNameByIndex = function (t) {
                                return this._templet.getAniNameByIndex(t);
                            }, n.getSlotByName = function (t) {
                                return this._boneSlotDic[t];
                            }, n.showSkinByName = function (t, e) {
                                void 0 === e && (e = !0), this.showSkinByIndex(this._templet.getSkinIndexByName(t), e);
                            }, n.showSkinByIndex = function (t, e) {
                                void 0 === e && (e = !0);
                                for (var i = 0; i < this._boneSlotArray.length; i++) this._boneSlotArray[i].showSlotData(null, e);
                                if (this._templet.showSkinByIndex(this._boneSlotDic, t, e)) {
                                    var n = this._templet.skinDataArray[t];
                                    this._skinIndex = t, this._skinName = n.name;
                                }
                                this._clearCache();
                            }, n.showSlotSkinByIndex = function (t, e) {
                                if (0 != this._aniMode) {
                                    var i = this.getSlotByName(t);
                                    i && i.showDisplayByIndex(e), this._clearCache();
                                }
                            }, n.showSlotSkinByName = function (t, e) {
                                if (0 != this._aniMode) {
                                    var i = this.getSlotByName(t);
                                    i && i.showDisplayByName(e), this._clearCache();
                                }
                            }, n.replaceSlotSkinName = function (t, e, i) {
                                if (0 != this._aniMode) {
                                    var n = this.getSlotByName(t);
                                    n && n.replaceDisplayByName(e, i), this._clearCache();
                                }
                            }, n.replaceSlotSkinByIndex = function (t, e, i) {
                                if (0 != this._aniMode) {
                                    var n = this.getSlotByName(t);
                                    n && n.replaceDisplayByIndex(e, i), this._clearCache();
                                }
                            }, n.setSlotSkin = function (t, e) {
                                if (0 != this._aniMode) {
                                    var i = this.getSlotByName(t);
                                    i && i.replaceSkin(e), this._clearCache();
                                }
                            }, n._clearCache = function () {
                                if (1 == this._aniMode) for (var t = 0, e = this._graphicsCache.length; t < e; t++) {
                                    for (var i = 0, n = this._graphicsCache[t].length; i < n; i++) {
                                        var s = this._graphicsCache[t][i];
                                        s != this.graphics && tt.recycle(s);
                                    }
                                    this._graphicsCache[t].length = 0;
                                }
                            }, n.play = function (t, e, i, n, s, a, r) {
                                void 0 === i && (i = !0), void 0 === n && (n = 0), void 0 === s && (s = 0), void 0 === a && (a = !0),
                                    void 0 === r && (r = !0), this._playAudio = r, this._indexControl = !1;
                                var o = -1, l = NaN;
                                if (l = e ? 2147483647 : 0, "string" == typeof t) for (var c = 0, u = this._templet.getAnimationCount(); c < u; c++) {
                                    var d = this._templet.getAnimation(c);
                                    if (d && t == d.name) {
                                        o = c;
                                        break;
                                    }
                                } else o = t;
                                o > -1 && o < this.getAnimNum() && (this._aniClipIndex = o, (i || this._pause || this._currAniIndex != o) && (this._currAniIndex = o,
                                    this._curOriginalData = new Float32Array(this._templet.getTotalkeyframesLength(o)),
                                    this._drawOrder = null, this._eventIndex = 0, this._player.play(o, this._player.playbackRate, l, n, s),
                                    a && this._templet.showSkinByIndex(this._boneSlotDic, this._skinIndex), this._pause && (this._pause = !1,
                                        this._lastTime = h.now(), this.timer.frameLoop(1, this, this._update, null, !0)),
                                    this._update()));
                            }, n.stop = function () {
                                this._pause || (this._pause = !0, this._player && this._player.stop(!0), this._soundChannelArr.length > 0 && this._onAniSoundStoped(!0),
                                    this.timer.clear(this, this._update));
                            }, n.playbackRate = function (t) {
                                this._player && (this._player.playbackRate = t);
                            }, n.paused = function () {
                                if (!this._pause) {
                                    if (this._pause = !0, this._player && (this._player.paused = !0), this._soundChannelArr.length > 0) for (var t, e = this._soundChannelArr.length, i = 0; i < e; i++) (t = this._soundChannelArr[i]).isStopped || t.pause();
                                    this.timer.clear(this, this._update);
                                }
                            }, n.resume = function () {
                                if (this._indexControl = !1, this._pause) {
                                    if (this._pause = !1, this._player && (this._player.paused = !1), this._soundChannelArr.length > 0) for (var t, e = this._soundChannelArr.length, i = 0; i < e; i++) (t = this._soundChannelArr[i]).audioBuffer && t.resume();
                                    this._lastTime = h.now(), this.timer.frameLoop(1, this, this._update, null, !0);
                                }
                            }, n._getGrahicsDataWithCache = function (t, e) {
                                return this._graphicsCache[t][e];
                            }, n._setGrahicsDataWithCache = function (t, e, i) {
                                this._graphicsCache[t][e] = i;
                            }, n.destroy = function (e) {
                                void 0 === e && (e = !0), t.prototype.destroy.call(this, e), this._templet = null,
                                    this._player && this._player.offAll(), this._player = null, this._curOriginalData = null,
                                    this._boneMatrixArray.length = 0, this._lastTime = 0, this.timer.clear(this, this._update),
                                    this._soundChannelArr.length > 0 && this._onAniSoundStoped(!0);
                            }, a(0, n, "url", function () {
                                return this._aniPath;
                            }, function (t) {
                                this.load(t);
                            }), a(0, n, "index", function () {
                                return this._index;
                            }, function (t) {
                                this.player && (this._index = t, this._player.currentTime = 1e3 * this._index / this._player.cacheFrameRate,
                                    this._indexControl = !0, this._update(!1));
                            }), a(0, n, "total", function () {
                                return this._templet && this._player ? this._total = Math.floor(this._templet.getAniDuration(this._player.currentAnimationClipIndex) / 1e3 * this._player.cacheFrameRate) : this._total = -1,
                                    this._total;
                            }), a(0, n, "templet", function () {
                                return this._templet;
                            }), a(0, n, "player", function () {
                                return this._player;
                            }), e.useSimpleMeshInCanvas = !1, e;
                        }(b), at = (function (t) {
                            function e(t) {
                                this._start = 0, this._Pos = 0, this._data = null, this._curIndex = 0, this._preIndex = 0,
                                    this._playIndex = 0, this._playing = !1, this._ended = !0, this._count = 0, this._ids = null,
                                    this._loadedImage = {}, this._idOfSprite = null, this._parentMovieClip = null, this._movieClipList = null,
                                    this._labels = null, this.basePath = null, this._atlasPath = null, this._url = null,
                                    this._isRoot = !1, this._completeHandler = null, this._endFrame = -1, this.interval = 30,
                                    this.loop = !1, e.__super.call(this), this._ids = {}, this._idOfSprite = [], this._reset(),
                                    this._playing = !1, this._parentMovieClip = t, t ? (this._isRoot = !1, this._movieClipList = t._movieClipList,
                                        this._movieClipList.push(this)) : (this._movieClipList = [this], this._isRoot = !0,
                                            this._setUpNoticeType(1));
                            }
                            s(e, "laya.ani.swf.MovieClip", t);
                            var n = e.prototype;
                            n.destroy = function (e) {
                                void 0 === e && (e = !0), this._clear(), t.prototype.destroy.call(this, e);
                            }, n._setDisplay = function (e) {
                                t.prototype._setDisplay.call(this, e), this._isRoot && this._$3__onDisplay(e);
                            }, n._$3__onDisplay = function (t) {
                                t ? this.timer.loop(this.interval, this, this.updates, null, !0) : this.timer.clear(this, this.updates);
                            }, n.updates = function () {
                                if (!this._parentMovieClip) {
                                    var t = 0, e = 0;
                                    for (e = this._movieClipList.length, t = 0; t < e; t++) this._movieClipList[t] && this._movieClipList[t]._update();
                                }
                            }, n.addLabel = function (t, e) {
                                this._labels || (this._labels = {}), this._labels[e] = t;
                            }, n.removeLabel = function (t) {
                                if (t) {
                                    if (!this._labels) for (var e in this._labels) if (this._labels[e] === t) {
                                        delete this._labels[e];
                                        break;
                                    }
                                } else this._labels = null;
                            }, n._update = function () {
                                if (this._data && this._playing) {
                                    if (this._playIndex++, this._playIndex >= this._count) {
                                        if (!this.loop) return this._playIndex--, void this.stop();
                                        this._playIndex = 0;
                                    }
                                    if (this._parse(this._playIndex), this._labels && this._labels[this._playIndex] && this.event("label", this._labels[this._playIndex]),
                                        -1 != this._endFrame && this._endFrame == this._playIndex) {
                                        if (this._endFrame = -1, null != this._completeHandler) {
                                            var t = this._completeHandler;
                                            this._completeHandler = null, t.run();
                                        }
                                        this.stop();
                                    }
                                }
                            }, n.stop = function () {
                                this._playing = !1;
                            }, n.gotoAndStop = function (t) {
                                this.index = t, this.stop();
                            }, n._clear = function () {
                                if (this.stop(), this._idOfSprite.length = 0, !this._parentMovieClip) {
                                    this.timer.clear(this, this.updates);
                                    var t = 0, e = 0;
                                    for (e = this._movieClipList.length, t = 0; t < e; t++) this._movieClipList[t] != this && this._movieClipList[t]._clear();
                                    this._movieClipList.length = 0;
                                }
                                this._atlasPath && f.clearRes(this._atlasPath);
                                var i;
                                for (i in this._loadedImage) this._loadedImage[i] && (f.clearRes(i), this._loadedImage[i] = !1);
                                this.removeChildren(), this.graphics = null, this._parentMovieClip = null;
                            }, n.play = function (t, e) {
                                void 0 === t && (t = 0), void 0 === e && (e = !0), this.loop = e, this._playing = !0,
                                    this._data && this._displayFrame(t);
                            }, n._displayFrame = function (t) {
                                void 0 === t && (t = -1), -1 != t && (this._curIndex > t && this._reset(), this._parse(t));
                            }, n._reset = function (t) {
                                void 0 === t && (t = !0), t && 1 != this._curIndex && this.removeChildren(), this._preIndex = this._curIndex = -1,
                                    this._Pos = this._start;
                            }, n._parse = function (t) {
                                var i, n, s, a = 0, r = 0, o = 0, h = !1, l = this._idOfSprite, c = this._data;
                                for (this._ended && this._reset(), c.pos = this._Pos, this._ended = !1, this._playIndex = t,
                                    this._curIndex > t && t < this._preIndex && (this._reset(!0), c.pos = this._Pos); this._curIndex <= t && !this._ended;) switch (c.getUint16()) {
                                        case 12:
                                            if (a = c.getUint16(), r = this._ids[c.getUint16()], this._Pos = c.pos, c.pos = r,
                                                0 == (o = c.getUint8())) {
                                                var u = c.getUint16();
                                                if (!(n = l[a])) {
                                                    n = l[a] = new b();
                                                    var d = new b();
                                                    d.loadImage(this.basePath + u + ".png"), this._loadedImage[this.basePath + u + ".png"] = !0,
                                                        n.addChild(d), d.size(c.getFloat32(), c.getFloat32());
                                                    var _ = c._getMatrix();
                                                    d.transform = _;
                                                }
                                                n.alpha = 1;
                                            } else 1 == o && ((i = l[a]) || (l[a] = i = new e(this), i.interval = this.interval,
                                                i._ids = this._ids, i.basePath = this.basePath, i._setData(c, r), i._initState(),
                                                i.play(0)), i.alpha = 1);
                                            c.pos = this._Pos;
                                            break;

                                        case 3:
                                            var f = l[c.getUint16()];
                                            f && (this.addChild(f), f.zOrder = c.getUint16(), h = !0);
                                            break;

                                        case 4:
                                            (f = l[c.getUint16()]) && f.removeSelf();
                                            break;

                                        case 5:
                                            l[c.getUint16()][e._ValueList[c.getUint16()]] = c.getFloat32();
                                            break;

                                        case 6:
                                            l[c.getUint16()].visible = c.getUint8() > 0;
                                            break;

                                        case 7:
                                            var p = (n = l[c.getUint16()]).transform || g.create();
                                            p.setTo(c.getFloat32(), c.getFloat32(), c.getFloat32(), c.getFloat32(), c.getFloat32(), c.getFloat32()),
                                                n.transform = p;
                                            break;

                                        case 8:
                                            l[c.getUint16()].setPos(c.getFloat32(), c.getFloat32());
                                            break;

                                        case 9:
                                            l[c.getUint16()].setSize(c.getFloat32(), c.getFloat32());
                                            break;

                                        case 10:
                                            l[c.getUint16()].alpha = c.getFloat32();
                                            break;

                                        case 11:
                                            l[c.getUint16()].setScale(c.getFloat32(), c.getFloat32());
                                            break;

                                        case 98:
                                            s = c.getString(), this.event(s), "stop" == s && this.stop();
                                            break;

                                        case 99:
                                            this._curIndex = c.getUint16(), h && this.updateZOrder();
                                            break;

                                        case 100:
                                            this._count = this._curIndex + 1, this._ended = !0, this._playing && (this.event("enterframe"),
                                                this.event("end"), this.event("complete")), this._reset(!1);
                                    }
                                this._playing && !this._ended && this.event("enterframe"), this._Pos = c.pos;
                            }, n._setData = function (t, e) {
                                this._data = t, this._start = e + 3;
                            }, n.load = function (t, e, n) {
                                void 0 === e && (e = !1), this._url = t, e && (this._atlasPath = n || t.split(".swf")[0] + ".json"),
                                    this.stop(), this._clear(), this._movieClipList = [this];
                                var s;
                                s = [{
                                    url: t,
                                    type: "arraybuffer"
                                }], this._atlasPath && s.push({
                                    url: this._atlasPath,
                                    type: "atlas"
                                }), i.loader.load(s, _.create(this, this._onLoaded));
                            }, n._onLoaded = function () {
                                var t;
                                (t = f.getRes(this._url)) ? !this._atlasPath || f.getAtlas(this._atlasPath) ? (this.basePath = this._atlasPath ? f.getAtlas(this._atlasPath).dir : this._url.split(".swf")[0] + "/image/",
                                    this._initData(t)) : this.event("error", "Atlas not find") : this.event("error", "file not find");
                            }, n._initState = function () {
                                this._reset(), this._ended = !1;
                                var t = this._playing;
                                for (this._playing = !1, this._curIndex = 0; !this._ended;) this._parse(++this._curIndex);
                                this._playing = t;
                            }, n._initData = function (t) {
                                this._data = new l(t);
                                var e = 0, i = this._data.getUint16();
                                for (e = 0; e < i; e++) this._ids[this._data.getInt16()] = this._data.getInt32();
                                this.interval = 1e3 / this._data.getUint16(), this._setData(this._data, this._ids[32767]),
                                    this._initState(), this.play(0), this.event("loaded"), this._parentMovieClip || this.timer.loop(this.interval, this, this.updates, null, !0);
                            }, n.playTo = function (t, e, i) {
                                this._completeHandler = i, this._endFrame = e, this.play(t, !1);
                            }, a(0, n, "index", function () {
                                return this._playIndex;
                            }, function (t) {
                                this._playIndex = t, this._data && this._displayFrame(this._playIndex), this._labels && this._labels[t] && this.event("label", this._labels[t]);
                            }), a(0, n, "count", function () {
                                return this._count;
                            }), a(0, n, "playing", function () {
                                return this._playing;
                            }), a(0, n, "url", null, function (t) {
                                this.load(t);
                            }), e._ValueList = ["x", "y", "width", "height", "scaleX", "scaleY", "rotation", "alpha"];
                        }(b), function (t) {
                            function e() {
                                this._mainTexture = null, this._textureJson = null, this._graphicsCache = [], this.srcBoneMatrixArr = [],
                                    this.ikArr = [], this.tfArr = [], this.pathArr = [], this.boneSlotDic = {}, this.bindBoneBoneSlotDic = {},
                                    this.boneSlotArray = [], this.skinDataArray = [], this.skinDic = {}, this.subTextureDic = {},
                                    this.isParseFail = !1, this.yReverseMatrix = null, this.drawOrderAniArr = [], this.eventAniArr = [],
                                    this.attachmentNames = null, this.deformAniArr = [], this._isParseAudio = !1, this._isDestroyed = !1,
                                    this._rate = 30, this.isParserComplete = !1, this.aniSectionDic = {}, this._skBufferUrl = null,
                                    this._textureDic = {}, this._loadList = null, this._path = null, this.tMatrixDataLen = 0,
                                    this.mRootBone = null, e.__super.call(this), this.skinSlotDisplayDataArr = [], this.mBoneArr = [];
                            }
                            s(e, "laya.ani.bone.Templet", t);
                            var n = e.prototype;
                            return n.loadAni = function (t) {
                                this._skBufferUrl = t, i.loader.load(t, _.create(this, this.onComplete), null, "arraybuffer");
                            }, n.onComplete = function (t) {
                                if (this._isDestroyed) this.destroy(); else {
                                    var e = f.getRes(this._skBufferUrl);
                                    e ? (this._path = this._skBufferUrl.slice(0, this._skBufferUrl.lastIndexOf("/")) + "/",
                                        this.parseData(null, e)) : this.event("error", "load failed:" + this._skBufferUrl);
                                }
                            }, n.parseData = function (t, e, i) {
                                void 0 === i && (i = 30), !this._path && this.url && (this._path = this.url.slice(0, this.url.lastIndexOf("/")) + "/"),
                                    this._mainTexture = t, this._mainTexture && m.isWebGL && t.bitmap && (t.bitmap.enableMerageInAtlas = !1),
                                    this._rate = i, this.parse(e);
                            }, n.buildArmature = function (t) {
                                return void 0 === t && (t = 0), new st(this, t);
                            }, n.parse = function (i) {
                                t.prototype.parse.call(this, i), this._endLoaded(), this._aniVersion === e.LAYA_ANIMATION_VISION ? this._isParseAudio = !0 : this._aniVersion != e.LAYA_ANIMATION_160_VISION && (console.log("[Error] 版本不一致，请使用IDE版本配套的重新导出" + this._aniVersion + "->" + e.LAYA_ANIMATION_VISION),
                                    this._loaded = !1), this.loaded ? this._mainTexture ? this._parsePublicExtData() : this._parseTexturePath() : (this.event("error", this),
                                        this.isParseFail = !0);
                            }, n._parseTexturePath = function () {
                                if (this._isDestroyed) this.destroy(); else {
                                    var t = 0;
                                    this._loadList = [];
                                    var e, n = new l(this.getPublicExtData()), s = 0, a = 0, r = 0, o = n.getInt32(), h = n.readUTFString(), c = h.split("\n");
                                    for (t = 0; t < o; t++) e = this._path + c[2 * t], h = c[2 * t + 1], n.getFloat32(),
                                        n.getFloat32(), s = n.getFloat32(), a = n.getFloat32(), r = n.getFloat32(), isNaN(r) ? 0 : r,
                                        r = n.getFloat32(), isNaN(r) ? 0 : r, r = n.getFloat32(), isNaN(r) ? s : r, r = n.getFloat32(),
                                        isNaN(r) ? a : r, -1 == this._loadList.indexOf(e) && this._loadList.push(e);
                                    i.loader.load(this._loadList, _.create(this, this._textureComplete));
                                }
                            }, n._textureComplete = function () {
                                for (var t, e, i = 0, n = this._loadList.length; i < n; i++) e = this._loadList[i],
                                    t = this._textureDic[e] = f.getRes(e), m.isWebGL && t && t.bitmap && (t.bitmap.enableMerageInAtlas = !1);
                                this._parsePublicExtData();
                            }, n._parsePublicExtData = function () {
                                var t = 0, e = 0, i = 0, n = 0, s = 0;
                                for (t = 0, s = this.getAnimationCount(); t < s; t++) this._graphicsCache.push([]);
                                var a = !1;
                                a = "Dragon" != this._aniClassName;
                                var r, o, h = new l(this.getPublicExtData()), c = 0, u = 0, d = 0, _ = 0, f = 0, p = 0, v = 0, m = 0, y = 0, w = h.getInt32(), x = h.readUTFString(), b = x.split("\n");
                                for (t = 0; t < w; t++) {
                                    if (r = this._mainTexture, o = this._path + b[2 * t], x = b[2 * t + 1], null == this._mainTexture && (r = this._textureDic[o]),
                                        !r) return this.event("error", this), void (this.isParseFail = !0);
                                    c = h.getFloat32(), u = h.getFloat32(), d = h.getFloat32(), _ = h.getFloat32(),
                                        y = h.getFloat32(), f = isNaN(y) ? 0 : y, y = h.getFloat32(), p = isNaN(y) ? 0 : y,
                                        y = h.getFloat32(), v = isNaN(y) ? d : y, y = h.getFloat32(), m = isNaN(y) ? _ : y,
                                        this.subTextureDic[x] = C.create(r, c, u, d, _, -f, -p, v, m);
                                }
                                this._mainTexture = r;
                                var L, M = h.getUint16();
                                for (t = 0; t < M; t++) (L = []).push(h.getUint16()), L.push(h.getUint16()), L.push(h.getUint16()),
                                    L.push(h.getUint16()), this.aniSectionDic[t] = L;
                                var T, S, A, I, P, D = h.getInt16(), G = {};
                                for (t = 0; t < D; t++) T = new E(), 0 == t ? P = T : T.root = P, T.d = a ? -1 : 1,
                                    A = h.readUTFString(), I = h.readUTFString(), T.length = h.getFloat32(), 1 == h.getByte() && (T.inheritRotation = !1),
                                    1 == h.getByte() && (T.inheritScale = !1), T.name = A, I && ((S = G[I]) ? S.addChild(T) : this.mRootBone = T),
                                    G[A] = T, this.mBoneArr.push(T);
                                this.tMatrixDataLen = h.getUint16();
                                var z, V = h.getUint16(), K = Math.floor(V / this.tMatrixDataLen), $ = this.srcBoneMatrixArr;
                                for (t = 0; t < K; t++) (z = new q()).scX = h.getFloat32(), z.skX = h.getFloat32(),
                                    z.skY = h.getFloat32(), z.scY = h.getFloat32(), z.x = h.getFloat32(), z.y = h.getFloat32(),
                                    8 === this.tMatrixDataLen && (z.skewX = h.getFloat32(), z.skewY = h.getFloat32()),
                                    $.push(z), (T = this.mBoneArr[t]).transform = z;
                                var Q, Z = h.getUint16(), J = 0;
                                for (t = 0; t < Z; t++) {
                                    for (Q = new H(), J = h.getUint16(), e = 0; e < J; e++) Q.boneNames.push(h.readUTFString()),
                                        Q.boneIndexs.push(h.getInt16());
                                    Q.name = h.readUTFString(), Q.targetBoneName = h.readUTFString(), Q.targetBoneIndex = h.getInt16(),
                                        Q.bendDirection = h.getFloat32(), Q.mix = h.getFloat32(), Q.isSpine = a, this.ikArr.push(Q);
                                }
                                var tt, et = h.getUint16(), it = 0;
                                for (t = 0; t < et; t++) {
                                    for (tt = new j(), it = h.getUint16(), e = 0; e < it; e++) tt.boneIndexs.push(h.getInt16());
                                    tt.name = h.getUTFString(), tt.targetIndex = h.getInt16(), tt.rotateMix = h.getFloat32(),
                                        tt.translateMix = h.getFloat32(), tt.scaleMix = h.getFloat32(), tt.shearMix = h.getFloat32(),
                                        tt.offsetRotation = h.getFloat32(), tt.offsetX = h.getFloat32(), tt.offsetY = h.getFloat32(),
                                        tt.offsetScaleX = h.getFloat32(), tt.offsetScaleY = h.getFloat32(), tt.offsetShearY = h.getFloat32(),
                                        this.tfArr.push(tt);
                                }
                                var nt, st = h.getUint16(), at = 0;
                                for (t = 0; t < st; t++) {
                                    for ((nt = new U()).name = h.readUTFString(), at = h.getUint16(), e = 0; e < at; e++) nt.bones.push(h.getInt16());
                                    nt.target = h.readUTFString(), nt.positionMode = h.readUTFString(), nt.spacingMode = h.readUTFString(),
                                        nt.rotateMode = h.readUTFString(), nt.offsetRotation = h.getFloat32(), nt.position = h.getFloat32(),
                                        nt.spacing = h.getFloat32(), nt.rotateMix = h.getFloat32(), nt.translateMix = h.getFloat32(),
                                        this.pathArr.push(nt);
                                }
                                var rt, ot, ht, lt, ct = 0, ut = 0, dt = 0, _t = NaN, ft = 0, pt = h.getInt16();
                                for (t = 0; t < pt; t++) {
                                    var gt = h.getUint8(), vt = {};
                                    this.deformAniArr.push(vt);
                                    for (var mt = 0; mt < gt; mt++) for ((rt = new k()).skinName = h.getUTFString(),
                                        vt[rt.skinName] = rt, ct = h.getInt16(), e = 0; e < ct; e++) for (ot = new F(),
                                            rt.deformSlotDataList.push(ot), ut = h.getInt16(), i = 0; i < ut; i++) for (ht = new B(),
                                                ot.deformSlotDisplayList.push(ht), ht.slotIndex = h.getInt16(), ht.attachment = h.getUTFString(),
                                                dt = h.getInt16(), n = 0; n < dt; n++) for (1 == h.getByte() ? ht.tweenKeyList.push(!0) : ht.tweenKeyList.push(!1),
                                                    _t = h.getFloat32(), ht.timeList.push(_t), lt = [], ht.vectices.push(lt), ft = h.getInt16(),
                                                    s = 0; s < ft; s++) lt.push(h.getFloat32());
                                }
                                var yt, wt, xt = h.getInt16(), bt = 0, Lt = 0;
                                for (t = 0; t < xt; t++) {
                                    for (bt = h.getInt16(), yt = [], e = 0; e < bt; e++) {
                                        for ((wt = new O()).time = h.getFloat32(), Lt = h.getInt16(), i = 0; i < Lt; i++) wt.drawOrder.push(h.getInt16());
                                        yt.push(wt);
                                    }
                                    this.drawOrderAniArr.push(yt);
                                }
                                var Ct, Mt, Tt = h.getInt16(), St = 0;
                                for (t = 0; t < Tt; t++) {
                                    for (St = h.getInt16(), Ct = [], e = 0; e < St; e++) (Mt = new N()).name = h.getUTFString(),
                                        this._isParseAudio && (Mt.audioValue = h.getUTFString()), Mt.intValue = h.getInt32(),
                                        Mt.floatValue = h.getFloat32(), Mt.stringValue = h.getUTFString(), Mt.time = h.getFloat32(),
                                        Ct.push(Mt);
                                    this.eventAniArr.push(Ct);
                                }
                                var At = h.getInt16();
                                if (At > 0) for (this.attachmentNames = [], t = 0; t < At; t++) this.attachmentNames.push(h.getUTFString());
                                var It, Et, Rt = h.getInt16();
                                for (t = 0; t < Rt; t++) (It = new R()).name = h.readUTFString(), It.parent = h.readUTFString(),
                                    It.attachmentName = h.readUTFString(), It.srcDisplayIndex = It.displayIndex = h.getInt16(),
                                    It.templet = this, this.boneSlotDic[It.name] = It, null == (Et = this.bindBoneBoneSlotDic[It.parent]) && (this.bindBoneBoneSlotDic[It.parent] = Et = []),
                                    Et.push(It), this.boneSlotArray.push(It);
                                var Pt, Dt, kt, Ft = h.readUTFString().split("\n"), Bt = 0, Ot = h.getUint8(), Nt = 0, Gt = 0, Ht = 0, zt = 0, Vt = 0, Ut = 0, Wt = 0;
                                for (t = 0; t < Ot; t++) {
                                    for ((Pt = new W()).name = Ft[Bt++], Nt = h.getUint8(), e = 0; e < Nt; e++) {
                                        for ((Dt = new X()).name = Ft[Bt++], It = this.boneSlotDic[Dt.name], Gt = h.getUint8(),
                                            i = 0; i < Gt; i++) {
                                            if (kt = new Y(), this.skinSlotDisplayDataArr.push(kt), kt.name = Ft[Bt++], kt.attachmentName = Ft[Bt++],
                                                kt.transform = new q(), kt.transform.scX = h.getFloat32(), kt.transform.skX = h.getFloat32(),
                                                kt.transform.skY = h.getFloat32(), kt.transform.scY = h.getFloat32(), kt.transform.x = h.getFloat32(),
                                                kt.transform.y = h.getFloat32(), Dt.displayArr.push(kt), kt.width = h.getFloat32(),
                                                kt.height = h.getFloat32(), kt.type = h.getUint8(), kt.verLen = h.getUint16(), (D = h.getUint16()) > 0) for (kt.bones = [],
                                                    n = 0; n < D; n++) {
                                                    var Yt = h.getUint16();
                                                    kt.bones.push(Yt);
                                                }
                                            if ((Ht = h.getUint16()) > 0) for (kt.uvs = [], n = 0; n < Ht; n++) kt.uvs.push(h.getFloat32());
                                            if ((zt = h.getUint16()) > 0) for (kt.weights = [], n = 0; n < zt; n++) kt.weights.push(h.getFloat32());
                                            if ((Vt = h.getUint16()) > 0) for (kt.triangles = [], n = 0; n < Vt; n++) kt.triangles.push(h.getUint16());
                                            if ((Ut = h.getUint16()) > 0) for (kt.vertices = [], n = 0; n < Ut; n++) kt.vertices.push(h.getFloat32());
                                            if ((Wt = h.getUint16()) > 0) for (kt.lengths = [], n = 0; n < Wt; n++) kt.lengths.push(h.getFloat32());
                                        }
                                        Pt.slotArr.push(Dt);
                                    }
                                    this.skinDic[Pt.name] = Pt, this.skinDataArray.push(Pt);
                                }
                                1 == h.getUint8() ? (this.yReverseMatrix = new g(1, 0, 0, -1, 0, 0), P && P.setTempMatrix(this.yReverseMatrix)) : P && P.setTempMatrix(new g()),
                                    this.showSkinByIndex(this.boneSlotDic, 0), this.isParserComplete = !0, this.event("complete", this);
                            }, n.getTexture = function (t) {
                                var e = this.subTextureDic[t];
                                return e || (e = this.subTextureDic[t.substr(0, t.length - 1)]), null == e ? this._mainTexture : e;
                            }, n.showSkinByIndex = function (t, e, i) {
                                if (void 0 === i && (i = !0), e < 0 && e >= this.skinDataArray.length) return !1;
                                var n, s, a = 0, r = 0, o = this.skinDataArray[e];
                                if (o) {
                                    for (a = 0, r = o.slotArr.length; a < r; a++) (s = o.slotArr[a]) && (n = t[s.name]) && (n.showSlotData(s, i),
                                        i && "undefined" != n.attachmentName && "null" != n.attachmentName ? n.showDisplayByName(n.attachmentName) : n.showDisplayByIndex(n.displayIndex));
                                    return !0;
                                }
                                return !1;
                            }, n.getSkinIndexByName = function (t) {
                                for (var e = 0, i = this.skinDataArray.length; e < i; e++) if (this.skinDataArray[e].name == t) return e;
                                return -1;
                            }, n.getGrahicsDataWithCache = function (t, e) {
                                return this._graphicsCache[t] && this._graphicsCache[t][e] ? this._graphicsCache[t][e] : null;
                            }, n.setGrahicsDataWithCache = function (t, e, i) {
                                this._graphicsCache[t][e] = i;
                            }, n.destroy = function () {
                                this._isDestroyed = !0;
                                var t;
                                for (var i in this.subTextureDic) (t = this.subTextureDic[i]) && t.destroy();
                                for (i in this._textureDic) (t = this._textureDic[i]) && t.destroy();
                                for (var n = 0, s = this.skinSlotDisplayDataArr.length; n < s; n++) this.skinSlotDisplayDataArr[n].destory();
                                this.skinSlotDisplayDataArr.length = 0, this.url && delete e.TEMPLET_DICTIONARY[this.url],
                                    laya.resource.Resource.prototype.destroy.call(this);
                            }, n.getAniNameByIndex = function (t) {
                                var e = this.getAnimation(t);
                                return e ? e.name : null;
                            }, a(0, n, "rate", function () {
                                return this._rate;
                            }, function (t) {
                                this._rate = t;
                            }), e.LAYA_ANIMATION_160_VISION = "LAYAANIMATION:1.6.0", e.LAYA_ANIMATION_VISION = "LAYAANIMATION:1.7.0",
                                e.TEMPLET_DICTIONARY = null, e;
                        }(it));
}(window, document, Laya), "function" == typeof define && define.amd && define("laya.core", ["require", "exports"], function (t, e) {
    "use strict";
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    for (var i in Laya) {
        var n = Laya[i];
        n && n.__isclass && (e[i] = n);
    }
}), function (t, e, i) {
    i.un, i.uns, i.static;
    var n = i.class, s = i.getset, a = (i.__newvec, laya.utils.Browser, laya.utils.Color), r = laya.filters.ColorFilterAction, o = laya.filters.webgl.ColorFilterActionGL, h = laya.filters.Filter, l = laya.filters.webgl.FilterActionGL, c = laya.maths.Matrix, u = (laya.maths.Rectangle,
        laya.renders.Render), d = (laya.renders.RenderContext, laya.webgl.resource.RenderTarget2D), _ = laya.utils.RunDriver, f = (laya.webgl.shader.d2.ShaderDefines2D,
            laya.display.Sprite, laya.resource.Texture, laya.webgl.shader.d2.value.Value2D), p = function () {
                function t() {
                    this.data = null;
                }
                n(t, "laya.filters.FilterAction");
                var e = t.prototype;
                return i.imps(e, {
                    "laya.filters.IFilterAction": !0
                }), e.apply = function (t) {
                    return null;
                }, t;
            }(), g = function () {
                function t() { }
                return n(t, "laya.filters.WebGLFilter"), t.enable = function () {
                    t.isInit || (t.isInit = !0, u.isWebGL && (_.createFilterAction = function (t) {
                        var e;
                        switch (t) {
                            case 32:
                                e = new o();
                                break;

                            case 16:
                                e = new v();
                                break;

                            case 8:
                                e = new m();
                        }
                        return e;
                    }));
                }, t.isInit = !1, t.__init$ = function () {
                    _.createFilterAction = function (t) {
                        var e;
                        switch (t) {
                            case 16:
                            case 8:
                                e = new p();
                                break;

                            case 32:
                                e = new r();
                        }
                        return e;
                    };
                }, t;
            }(), v = (function (t) {
                function e(t) {
                    this.strength = NaN, this.strength_sig2_2sig2_gauss1 = [], e.__super.call(this),
                        void 0 === t && (t = 4), u.isWebGL && g.enable(), this.strength = t, this._action = _.createFilterAction(16),
                        this._action.data = this;
                }
                n(e, "laya.filters.BlurFilter", h);
                var i = e.prototype;
                i.callNative = function (t) {
                    t.conchModel && t.conchModel.blurFilter && t.conchModel.blurFilter(this.strength);
                }, s(0, i, "action", function () {
                    return this._action;
                }), s(0, i, "type", function () {
                    return 16;
                });
            }(), function (t) {
                function e(t, i, n, s) {
                    this._color = null, e.__super.call(this), this._elements = new Float32Array(9),
                        void 0 === i && (i = 4), void 0 === n && (n = 6), void 0 === s && (s = 6), u.isWebGL && g.enable(),
                        this._color = new a(t), this.blur = Math.min(i, 20), this.offX = n, this.offY = s,
                        this._action = _.createFilterAction(8), this._action.data = this;
                }
                n(e, "laya.filters.GlowFilter", h);
                var i = e.prototype;
                i.getColor = function () {
                    return this._color._color;
                }, i.callNative = function (t) {
                    t.conchModel && t.conchModel.glowFilter && t.conchModel.glowFilter(this._color.strColor, this._elements[4], this._elements[5], this._elements[6]);
                }, s(0, i, "type", function () {
                    return 8;
                }), s(0, i, "action", function () {
                    return this._action;
                }), s(0, i, "offY", function () {
                    return this._elements[6];
                }, function (t) {
                    this._elements[6] = t;
                }), s(0, i, "offX", function () {
                    return this._elements[5];
                }, function (t) {
                    this._elements[5] = t;
                }), s(0, i, "blur", function () {
                    return this._elements[4];
                }, function (t) {
                    this._elements[4] = t;
                });
            }(), function (t) {
                function e() {
                    this.data = null, e.__super.call(this);
                }
                n(e, "laya.filters.webgl.BlurFilterActionGL", l);
                var i = e.prototype;
                return i.setValueMix = function (t) {
                    t.defines.add(this.data.type);
                }, i.apply3d = function (t, e, i, n, s) {
                    var a = t.getValue("bounds"), r = f.create(1, 0);
                    r.setFilters([this.data]);
                    c.EMPTY.identity(), i.ctx.drawTarget(t, 0, 0, a.width, a.height, c.EMPTY, "src", r),
                        r.setFilters(null);
                }, i.setValue = function (t) {
                    t.strength = this.data.strength;
                    var e = this.data.strength / 3, i = e * e;
                    this.data.strength_sig2_2sig2_gauss1[0] = this.data.strength, this.data.strength_sig2_2sig2_gauss1[1] = i,
                        this.data.strength_sig2_2sig2_gauss1[2] = 2 * i, this.data.strength_sig2_2sig2_gauss1[3] = 1 / (2 * Math.PI * i),
                        t.strength_sig2_2sig2_gauss1 = this.data.strength_sig2_2sig2_gauss1;
                }, s(0, i, "typeMix", function () {
                    return 16;
                }), e;
            }()), m = function (t) {
                function e() {
                    this.data = null, this._initKey = !1, this._textureWidth = 0, this._textureHeight = 0,
                        e.__super.call(this);
                }
                n(e, "laya.filters.webgl.GlowFilterActionGL", l);
                var a = e.prototype;
                return i.imps(a, {
                    "laya.filters.IFilterActionGL": !0
                }), a.setValueMix = function (t) { }, a.apply3d = function (t, e, i, n, s) {
                    var a = t.getValue("bounds");
                    t.addValue("color", this.data.getColor());
                    var r = a.width, o = a.height;
                    this._textureWidth = r, this._textureHeight = o;
                    var h, l = c.TEMP;
                    return l.identity(), (h = f.create(1, 0)).setFilters([this.data]), i.ctx.drawTarget(t, 0, 0, this._textureWidth, this._textureHeight, l, "src", h, null),
                        h = f.create(1, 0), i.ctx.drawTarget(t, 0, 0, this._textureWidth, this._textureHeight, l, "src", h),
                        null;
                }, a.setSpriteWH = function (t) {
                    this._textureWidth = t.width, this._textureHeight = t.height;
                }, a.setValue = function (t) {
                    t.u_offsetX = this.data.offX, t.u_offsetY = -this.data.offY, t.u_strength = 1, t.u_blurX = this.data.blur,
                        t.u_blurY = this.data.blur, t.u_textW = this._textureWidth, t.u_textH = this._textureHeight,
                        t.u_color = this.data.getColor();
                }, s(0, a, "typeMix", function () {
                    return 8;
                }), e.tmpTarget = function (t, e, i, n, s) {
                    var a = t.getValue("bounds");
                    t.getValue("out").end();
                    var r = d.create(a.width, a.height);
                    r.start();
                    var o = t.getValue("color");
                    o && r.clear(o[0], o[1], o[2], 0), t.addValue("tmpTarget", r);
                }, e.startOut = function (t, e, i, n, s) {
                    t.getValue("tmpTarget").end();
                    var a = t.getValue("out");
                    a.start();
                    var r = t.getValue("color");
                    r && a.clear(r[0], r[1], r[2], 0);
                }, e.recycleTarget = function (t, e, i, n, s) {
                    t.getValue("src");
                    t.getValue("tmpTarget").recycle();
                }, e;
            }();
    i.__init([g]);
}(window, document, Laya), "function" == typeof define && define.amd && define("laya.core", ["require", "exports"], function (t, e) {
    "use strict";
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    for (var i in Laya) {
        var n = Laya[i];
        n && n.__isclass && (e[i] = n);
    }
}), function (t, e, i) {
    i.un, i.uns;
    var n = i.static, s = i.class, a = i.getset, r = (i.__newvec, laya.utils.Browser,
        laya.display.css.CSSStyle), o = laya.utils.ClassUtils, h = (laya.events.Event, laya.utils.HTMLChar), l = laya.net.Loader, c = (laya.display.Node,
            laya.maths.Rectangle), u = laya.renders.Render, d = (laya.renders.RenderContext,
                laya.renders.RenderSprite, laya.display.Sprite), _ = laya.utils.Stat, f = laya.display.Text, p = laya.resource.Texture, g = laya.net.URL, v = laya.utils.Utils, m = function () {
                    function t() { }
                    return s(t, "laya.html.utils.HTMLParse"), t.parse = function (e, i, n) {
                        i = (i = "<root>" + (i = i.replace(/<br>/g, "<br/>")) + "</root>").replace(t.spacePattern, t.char255);
                        var s = v.parseXMLFromString(i);
                        t._parseXML(e, s.childNodes[0].childNodes, n);
                    }, t._parseXML = function (e, i, n, s) {
                        var a = 0, r = 0;
                        if (i.join || i.item) for (a = 0, r = i.length; a < r; ++a) t._parseXML(e, i[a], n, s); else {
                            var h, l;
                            if (3 == i.nodeType) {
                                var c;
                                return void (e instanceof laya.html.dom.HTMLDivElement ? (null == i.nodeName && (i.nodeName = "#text"),
                                    l = i.nodeName.toLowerCase(), (c = i.textContent.replace(/^\s+|\s+$/g, "")).length > 0 && (h = o.getInstance(l)) && (e.addChild(h),
                                        h.innerTEXT = c.replace(t.char255AndOneSpacePattern, " "))) : (c = i.textContent.replace(/^\s+|\s+$/g, "")).length > 0 && (e.innerTEXT = c.replace(t.char255AndOneSpacePattern, " ")));
                            }
                            if ("#comment" == (l = i.nodeName.toLowerCase())) return;
                            if (h = o.getInstance(l)) {
                                (h = e.addChild(h)).URI = n, h.href = s;
                                var u = i.attributes;
                                if (u && u.length > 0) for (a = 0, r = u.length; a < r; ++a) {
                                    var d = u[a], _ = d.nodeName, f = d.value;
                                    h._setAttributes(_, f);
                                }
                                t._parseXML(h, i.childNodes, n, h.href);
                            } else t._parseXML(e, i.childNodes, n, s);
                        }
                    }, t.char255 = String.fromCharCode(255), t.spacePattern = /&nbsp;|&#160;/g, t.char255AndOneSpacePattern = new RegExp(String.fromCharCode(255) + "|(\\s+)", "g"),
                        t;
                }(), y = function () {
                    function t() { }
                    return s(t, "laya.html.utils.Layout"), t.later = function (e) {
                        null == t._will && (t._will = [], i.stage.frameLoop(1, null, function () {
                            if (!(t._will.length < 1)) {
                                for (var e = 0; e < t._will.length; e++) laya.html.utils.Layout.layout(t._will[e]);
                                t._will.length = 0;
                            }
                        })), t._will.push(e);
                    }, t.layout = function (e) {
                        if (!e || !e._style) return null;
                        if (0 == (512 & e._style._type)) return null;
                        e.getStyle()._type &= -513;
                        var i = t._multiLineLayout(e);
                        return u.isConchApp && e.layaoutCallNative && e.layaoutCallNative(), i;
                    }, t._multiLineLayout = function (e) {
                        function i() {
                            I.y = M, M += I.h + _, 0 == I.h && (M += p), I.mWidth = P, P = 0, I = new w(), A.push(I),
                                I.h = 0, C = 0, D = !0, E = !1;
                        }
                        if (f.RightToLeft) return t._multiLineLayout2(e);
                        var n = new Array();
                        e._addChildsToLayout(n);
                        var s, a, r, o, h, l = 0, c = n.length, u = e._getCSSStyle(), d = u.letterSpacing, _ = u.leading, p = u.lineHeight, g = u._widthAuto() || !u.wordWrap, v = g ? 999999 : e.width, m = (e.height,
                            0), y = u.italic ? u.fontSize / 3 : 0, x = u._getAlign(), b = u._getValign(), L = 0 !== b || 0 !== x || 0 != p, C = 0, M = 0, T = 0, S = 0, A = new Array(), I = A[0] = new w(), E = !1, R = !1;
                        I.h = 0, u.italic && (v -= u.fontSize / 3);
                        var P = 0, D = !0;
                        for (l = 0; l < c; l++) if (null != (s = n[l])) if (D = !1, s instanceof laya.html.dom.HTMLBrElement) i(),
                            I.y = M; else {
                            if (s._isChar()) {
                                if ((o = s).isWord) E = R || "\n" === o.char, I.wordStartIndex = I.elements.length; else {
                                    if (A.length > 0 && C + T > v && I.wordStartIndex > 0) {
                                        var k = 0;
                                        k = I.elements.length - I.wordStartIndex + 1, I.elements.length = I.wordStartIndex,
                                            l -= k, i();
                                        continue;
                                    }
                                    E = !1, P += o.width;
                                }
                                T = o.width + d, S = o.height, R = !1, (E = E || C + T > v) && i(), I.minTextHeight = Math.min(I.minTextHeight, s.height);
                            } else h = s, r = (a = s._getCSSStyle()).padding, 0 === a._getCssFloat() || (L = !0),
                                E = R || a.lineElement, T = h.width * h._style._tf.scaleX + r[1] + r[3] + d, S = h.height * h._style._tf.scaleY + r[0] + r[2],
                                R = a.lineElement, (E = E || C + T > v && a.wordWrap) && i();
                            I.elements.push(s), I.h = Math.max(I.h, S), s.x = C, s.y = M, C += T, I.w = C - d,
                                I.y = M, m = Math.max(C + y, m);
                        } else D || (C += t.DIV_ELEMENT_PADDING), I.wordStartIndex = I.elements.length;
                        if (M = I.y + I.h, L) {
                            var F = 0, B = v;
                            for (g && e.width > 0 && (B = e.width), l = 0, c = A.length; l < c; l++) A[l].updatePos(0, B, l, F, x, b, p),
                                F += Math.max(p, A[l].h + _);
                            M = F;
                        }
                        return g && (e.width = m), M > e.height && (e.height = M), [m, M];
                    }, t._multiLineLayout2 = function (e) {
                        function i() {
                            A.y = C, C += A.h + _, 0 == A.h && (C += f), A.mWidth = R, R = 0, A = new w(), S.push(A),
                                A.h = 0, L = 0, P = !0, I = !1;
                        }
                        var n = new Array();
                        e._addChildsToLayout(n);
                        var s, a, r, o, h, l = 0, c = n.length, u = e._getCSSStyle(), d = u.letterSpacing, _ = u.leading, f = u.lineHeight, p = u._widthAuto() || !u.wordWrap, g = p ? 999999 : e.width, v = (e.height,
                            0), m = u.italic ? u.fontSize / 3 : 0, y = 2 - u._getAlign(), x = u._getValign(), b = 0 !== x || 0 !== y || 0 != f, L = 0, C = 0, M = 0, T = 0, S = new Array(), A = S[0] = new w(), I = !1, E = !1;
                        A.h = 0, u.italic && (g -= u.fontSize / 3);
                        var R = 0, P = !0;
                        for (l = 0; l < c; l++) if (null != (s = n[l])) if (P = !1, s instanceof laya.html.dom.HTMLBrElement) i(),
                            A.y = C; else {
                            if (s._isChar()) {
                                if ((o = s).isWord) I = E || "\n" === o.char, A.wordStartIndex = A.elements.length; else {
                                    if (S.length > 0 && L + M > g && A.wordStartIndex > 0) {
                                        var D = 0;
                                        D = A.elements.length - A.wordStartIndex + 1, A.elements.length = A.wordStartIndex,
                                            l -= D, i();
                                        continue;
                                    }
                                    I = !1, R += o.width;
                                }
                                M = o.width + d, T = o.height, E = !1, (I = I || L + M > g) && i(), A.minTextHeight = Math.min(A.minTextHeight, s.height);
                            } else h = s, r = (a = s._getCSSStyle()).padding, 0 === a._getCssFloat() || (b = !0),
                                I = E || a.lineElement, M = h.width * h._style._tf.scaleX + r[1] + r[3] + d, T = h.height * h._style._tf.scaleY + r[0] + r[2],
                                E = a.lineElement, (I = I || L + M > g && a.wordWrap) && i();
                            A.elements.push(s), A.h = Math.max(A.h, T), s.x = L, s.y = C, L += M, A.w = L - d,
                                A.y = C, v = Math.max(L + m, v);
                        } else P || (L += t.DIV_ELEMENT_PADDING), A.wordStartIndex = A.elements.length;
                        if (C = A.y + A.h, b) {
                            var k = 0, F = g;
                            for (l = 0, c = S.length; l < c; l++) S[l].updatePos(0, F, l, k, y, x, f), k += Math.max(f, S[l].h + _);
                            C = k;
                        }
                        for (p && (e.width = v), C > e.height && (e.height = C), l = 0, c = S.length; l < c; l++) S[l].revertOrder(g);
                        return [v, C];
                    }, t._will = null, t.DIV_ELEMENT_PADDING = 0, t;
                }(), w = function () {
                    function t() {
                        this.x = 0, this.y = 0, this.w = 0, this.h = 0, this.wordStartIndex = 0, this.minTextHeight = 99999,
                            this.mWidth = 0, this.elements = new Array();
                    }
                    s(t, "laya.html.utils.LayoutLine");
                    var e = t.prototype;
                    return e.updatePos = function (t, e, i, n, s, a, r) {
                        var o, h = 0;
                        this.elements.length > 0 && (h = (o = this.elements[this.elements.length - 1]).x + o.width - this.elements[0].x);
                        var l = 0, c = NaN;
                        1 === s && (l = (e - h) / 2), 2 === s && (l = e - h), 0 === r || 0 != a || (a = 1);
                        for (var u = 0, d = this.elements.length; u < d; u++) {
                            var _ = (o = this.elements[u])._getCSSStyle();
                            switch (0 !== l && (o.x += l), _._getValign()) {
                                case 0:
                                    o.y = n;
                                    break;

                                case 1:
                                    var f = 0;
                                    99999 != this.minTextHeight && (f = this.minTextHeight);
                                    var p = (f + r) / 2;
                                    p = Math.max(p, this.h), c = (laya.html.dom.HTMLImageElement, n + p - o.height),
                                        o.y = c;
                                    break;

                                case 2:
                                    o.y = n + (r - o.height);
                            }
                        }
                    }, e.revertOrder = function (t) {
                        var e;
                        if (this.elements.length > 0) {
                            var i = 0, n = 0;
                            for (n = this.elements.length, i = 0; i < n; i++) (e = this.elements[i]).x = t - e.x - e.width;
                        }
                    }, t;
                }(), x = function (t) {
                    function e() {
                        this.URI = null, this._href = null, e.__super.call(this), this._text = e._EMPTYTEXT,
                            this.setStyle(new r(this)), this._getCSSStyle().valign = "middle", this.mouseEnabled = !0;
                    }
                    s(e, "laya.html.dom.HTMLElement", t);
                    var n = e.prototype;
                    return n.layaoutCallNative = function () {
                        var t = 0;
                        if (this._childs && (t = this._childs.length) > 0) for (var e = 0; e < t; e++) this._childs[e].layaoutCallNative && this._childs[e].layaoutCallNative();
                        var i = this._getWords();
                        i ? laya.html.dom.HTMLElement.fillWords(this, i, 0, 0, this.style.font, this.style.color, this.style.underLine) : this.graphics.clear();
                    }, n.appendChild = function (t) {
                        return this.addChild(t);
                    }, n._getWords2 = function () {
                        var t = this._text.text;
                        if (!t || 0 === t.length) return null;
                        var e, i, n = 0, s = 0;
                        if (this._text.drawWords) i = this._text.drawWords; else {
                            for (s = (e = t.split(" ")).length - 1, i = [], n = 0; n < s; n++) i.push(e[n], " ");
                            s >= 0 && i.push(e[s]), this._text.drawWords = i;
                        }
                        var a = this._text.words;
                        if (a && a.length === i.length) return a;
                        null === a && (this._text.words = a = []), a.length = i.length;
                        var r, o = this.style, l = o.font;
                        for (n = 0, s = i.length; n < s; n++) {
                            r = v.measureText(i[n], l);
                            var c = a[n] = new h(i[n], r.width, r.height || o.fontSize, o);
                            if (c.char.length > 1 && (c.charNum = c.char), this.href) {
                                var u = new d();
                                this.addChild(u), c.setSprite(u);
                            }
                        }
                        return a;
                    }, n._getWords = function () {
                        if (!f.CharacterCache) return this._getWords2();
                        var t = this._text.text;
                        if (!t || 0 === t.length) return null;
                        var e = this._text.words;
                        if (e && e.length === t.length) return e;
                        null === e && (this._text.words = e = []), e.length = t.length;
                        for (var i, n = this.style, s = n.font, a = 0, r = t.length; a < r; a++) {
                            i = v.measureText(t.charAt(a), s);
                            var o = e[a] = new h(t.charAt(a), i.width, i.height || n.fontSize, n);
                            if (this.href) {
                                var l = new d();
                                this.addChild(l), o.setSprite(l);
                            }
                        }
                        return e;
                    }, n.showLinkSprite = function () {
                        var t = this._text.words;
                        if (t) for (var e, i, n = [], s = 0; s < t.length; s++) i = t[s], (e = new d()).graphics.drawRect(0, 0, i.width, i.height, "#ff0000"),
                            e.width = i.width, e.height = i.height, this.addChild(e), n.push(e);
                    }, n._layoutLater = function () {
                        var t = this.style;
                        512 & t._type || (t.widthed(this) && (this._childs.length > 0 || null != this._getWords()) && t.block ? (y.later(this),
                            t._type |= 512) : this.parent && this.parent._layoutLater());
                    }, n._setAttributes = function (e, i) {
                        switch (e) {
                            case "style":
                                return void this.style.cssText(i);

                            case "class":
                                return void (this.className = i);
                        }
                        t.prototype._setAttributes.call(this, e, i);
                    }, n.updateHref = function () {
                        if (null != this._href) {
                            var t = this._getWords();
                            if (t) for (var e, i, n = 0; n < t.length; n++) (i = (e = t[n]).getSprite()) && (i.size(e.width, e.height),
                                i.on("click", this, this.onLinkHandler));
                        }
                    }, n.onLinkHandler = function (t) {
                        switch (t.type) {
                            case "click":
                                for (var e = this; e;) e.event("link", [this.href]), e = e.parent;
                        }
                    }, n.formatURL = function (t) {
                        return this.URI ? g.formatURL(t, this.URI ? this.URI.path : null) : t;
                    }, a(0, n, "href", function () {
                        return this._href;
                    }, function (t) {
                        this._href = t, null != t && (this._getCSSStyle().underLine = 1, this.updateHref());
                    }), a(0, n, "color", null, function (t) {
                        this.style.color = t;
                    }), a(0, n, "onClick", null, function (t) {
                        i._runScript("fn=function(event){" + t + ";}"), this.on("click", this, void 0);
                    }), a(0, n, "id", null, function (t) {
                        L.document.setElementById(t, this);
                    }), a(0, n, "innerTEXT", function () {
                        return this._text.text;
                    }, function (t) {
                        this.text = t;
                    }), a(0, n, "style", function () {
                        return this._style;
                    }), a(0, n, "text", function () {
                        return this._text.text;
                    }, function (t) {
                        this._text == e._EMPTYTEXT ? this._text = {
                            text: t,
                            words: null
                        } : (this._text.text = t, this._text.words && (this._text.words.length = 0)), u.isConchApp && this.layaoutCallNative(),
                            this._renderType |= 2048, this.repaint(), this.updateHref();
                    }), a(0, n, "parent", t.prototype._$get_parent, function (t) {
                        if (t instanceof laya.html.dom.HTMLElement) {
                            var e = t;
                            this.URI || (this.URI = e.URI), this.style.inherit(e.style);
                        }
                        i.superSet(d, this, "parent", t);
                    }), a(0, n, "className", null, function (t) {
                        this.style.attrs(L.document.styleSheets["." + t]);
                    }), e.fillWords = function (t, e, i, n, s, a, r) {
                        t.graphics.clear();
                        for (var o = 0, h = e.length; o < h; o++) {
                            var l = e[o];
                            t.graphics.fillText(l.char, l.x + i, l.y + n, s, a, "left", r);
                        }
                    }, e._EMPTYTEXT = {
                        text: null,
                        words: null
                    }, e;
                }(d), b = (function (t) {
                    function e() {
                        e.__super.call(this), this.style.lineElement = !0, this.style.block = !0;
                    }
                    s(e, "laya.html.dom.HTMLBrElement", x);
                }(), function (t) {
                    function e() {
                        this.contextHeight = NaN, this.contextWidth = NaN, e.__super.call(this), this.style.block = !0,
                            this.style.lineElement = !0, this.style.width = 200, this.style.height = 200;
                    }
                    s(e, "laya.html.dom.HTMLDivElement", t);
                    var n = e.prototype;
                    return n.appendHTML = function (t) {
                        m.parse(this, t, this.URI), this.layout();
                    }, n._addChildsToLayout = function (t) {
                        var e = this._getWords();
                        if (null == e && 0 == this._childs.length) return !1;
                        e && e.forEach(function (e) {
                            t.push(e);
                        });
                        for (var i = !0, n = 0, s = this._childs.length; n < s; n++) {
                            var a = this._childs[n];
                            i ? i = !1 : t.push(null), a._addToLayout(t);
                        }
                        return !0;
                    }, n._addToLayout = function (t) {
                        this.layout();
                    }, n.layout = function () {
                        if (this.style) {
                            this.style._type |= 512;
                            var t = y.layout(this);
                            if (t) {
                                this._$P.mHtmlBounds || this._set$P("mHtmlBounds", new c());
                                var e = this._$P.mHtmlBounds;
                                e.x = e.y = 0, e.width = this.contextWidth = t[0], e.height = this.contextHeight = t[1],
                                    this.setBounds(e);
                            }
                        }
                    }, a(0, n, "height", function () {
                        return this._height ? this._height : this.contextHeight;
                    }, t.prototype._$set_height), a(0, n, "innerHTML", null, function (t) {
                        this.destroyChildren(), this.appendHTML(t);
                    }), a(0, n, "width", function () {
                        return this._width ? this._width : this.contextWidth;
                    }, function (t) {
                        var e = !1;
                        e = 0 === t ? t != this._width : t != this.width, i.superSet(x, this, "width", t),
                            e && this.layout();
                    }), e;
                }(x)), L = function (t) {
                    function e() {
                        this.all = new Array(), this.styleSheets = r.styleSheets, e.__super.call(this);
                    }
                    s(e, "laya.html.dom.HTMLDocument", x);
                    var i = e.prototype;
                    return i.getElementById = function (t) {
                        return this.all[t];
                    }, i.setElementById = function (t, e) {
                        this.all[t] = e;
                    }, n(e, ["document", function () {
                        return this.document = new e();
                    }]), e;
                }();
    (function (t) {
        function e() {
            this._tex = null, this._url = null, this._renderArgs = [], e.__super.call(this),
                this.style.block = !0;
        }
        s(e, "laya.html.dom.HTMLImageElement", x);
        var i = e.prototype;
        i._addToLayout = function (t) {
            !this._style.absolute && t.push(this);
        }, i.render = function (t, e, i) {
            !this._tex || !this._tex.loaded || !this._tex.loaded || this._width < 1 || this._height < 1 || (_.spriteCount++,
                this._renderArgs[0] = this._tex, this._renderArgs[1] = this.x, this._renderArgs[2] = this.y,
                this._renderArgs[3] = this.width || this._tex.width, this._renderArgs[4] = this.height || this._tex.height,
                t.ctx.drawTexture2(e, i, this.style.translateX, this.style.translateY, this.transform, this.style.alpha, this.style.blendMode, this._renderArgs));
        }, i.layaoutCallNative = function () {
            var t = 0;
            if (this._childs && (t = this._childs.length) > 0) for (var e = 0; e < t; e++) this._childs[e].layaoutCallNative && this._childs[e].layaoutCallNative();
        }, a(0, i, "src", null, function (t) {
            function e() {
                if (i._style) {
                    var t = i._style;
                    t.widthed(i) || i._tex.width, t.heighted(i) || i._tex.height;
                    t.widthed(i) || i._width == i._tex.width || (i.width = i._tex.width, i.parent && i.parent._layoutLater()),
                        t.heighted(i) || i._height == i._tex.height || (i.height = i._tex.height, i.parent && i.parent._layoutLater()),
                        u.isConchApp && (i._renderArgs[0] = i._tex, i._renderArgs[1] = i.x, i._renderArgs[2] = i.y,
                            i._renderArgs[3] = i.width || i._tex.width, i._renderArgs[4] = i.height || i._tex.height,
                            i.graphics.drawTexture(i._tex, 0, 0, i._renderArgs[3], i._renderArgs[4])), i.repaint(),
                        i.parentRepaint();
                }
            }
            var i = this;
            if (t = this.formatURL(t), this._url != t) {
                this._url = t;
                var n = this._tex = l.getRes(t);
                n || (this._tex = n = new p(), n.load(t), l.cacheRes(t, n)), n.loaded ? e() : n.on("loaded", null, e);
            }
        });
    })(), function (t) {
        function e() {
            this.type = null, e.__super.call(this), this.visible = !1;
        }
        s(e, "laya.html.dom.HTMLLinkElement", t);
        var i = e.prototype;
        i._onload = function (t) {
            switch (this.type) {
                case "text/css":
                    r.parseCSS(t, this.URI);
            }
        }, a(0, i, "href", t.prototype._$get_href, function (t) {
            var e = this;
            t = this.formatURL(t), this.URI = new g(t);
            var i = new l();
            i.once("complete", null, function (t) {
                e._onload(t);
            }), i.load(t, "text");
        }), e._cuttingStyle = new RegExp("((@keyframes[\\s\\t]+|)(.+))[\\t\\n\\r\\s]*{", "g");
    }(x), function (t) {
        function e() {
            e.__super.call(this), this.visible = !1;
        }
        s(e, "laya.html.dom.HTMLStyleElement", t);
        a(0, e.prototype, "text", t.prototype._$get_text, function (t) {
            r.parseCSS(t, null);
        });
    }(x), function (t) {
        function e() {
            e.__super.call(this), this._getCSSStyle().valign = "middle";
        }
        s(e, "laya.html.dom.HTMLIframeElement", t);
        a(0, e.prototype, "href", t.prototype._$get_href, function (t) {
            var e = this;
            t = this.formatURL(t);
            var i = new l();
            i.once("complete", null, function (i) {
                var n = e.URI;
                e.URI = new g(t), e.innerHTML = i, !n || (e.URI = n);
            }), i.load(t, "text");
        });
    }(b);
}(window, document, Laya), "function" == typeof define && define.amd && define("laya.core", ["require", "exports"], function (t, e) {
    "use strict";
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    for (var i in Laya) {
        var n = Laya[i];
        n && n.__isclass && (e[i] = n);
    }
}), function (t, e, i) {
    i.un, i.uns;
    var n = i.static, s = i.class, a = i.getset, r = (i.__newvec, laya.webgl.canvas.BlendMode), o = (laya.events.Event,
        laya.resource.HTMLCanvas), h = laya.utils.Handler, l = laya.webgl.utils.IndexBuffer2D, c = (laya.net.Loader,
            laya.maths.MathUtil), u = laya.maths.Matrix, d = laya.renders.Render, _ = (laya.renders.RenderContext,
                laya.renders.RenderSprite, laya.webgl.shader.Shader), f = laya.display.Sprite, p = laya.utils.Stat, g = laya.resource.Texture, v = laya.utils.Utils, m = laya.webgl.shader.d2.value.Value2D, y = laya.webgl.utils.VertexBuffer2D, w = laya.webgl.WebGL, x = (laya.webgl.WebGLContext,
                    function () {
                        function t() {
                            this._frameTime = 0, this._emissionRate = 60, this._emissionTime = 0, this.minEmissionTime = 1 / 60,
                                this._particleTemplate = null;
                        }
                        s(t, "laya.particle.emitter.EmitterBase");
                        var e = t.prototype;
                        return e.start = function (t) {
                            void 0 === t && (t = 2147483647), 0 != this._emissionRate && (this._emissionTime = t);
                        }, e.stop = function () {
                            this._emissionTime = 0;
                        }, e.clear = function () {
                            this._emissionTime = 0;
                        }, e.emit = function () { }, e.advanceTime = function (t) {
                            if (void 0 === t && (t = 1), this._emissionTime -= t, !(this._emissionTime < 0 || (this._frameTime += t,
                                this._frameTime < this.minEmissionTime))) for (; this._frameTime > this.minEmissionTime;) this._frameTime -= this.minEmissionTime,
                                    this.emit();
                        }, a(0, e, "particleTemplate", null, function (t) {
                            this._particleTemplate = t;
                        }), a(0, e, "emissionRate", function () {
                            return this._emissionRate;
                        }, function (t) {
                            t <= 0 || (this._emissionRate = t, t > 0 && (this.minEmissionTime = 1 / t));
                        }), t;
                    }()), b = function () {
                        function t() {
                            this.position = null, this.velocity = null, this.startColor = null, this.endColor = null,
                                this.sizeRotation = null, this.radius = null, this.radian = null, this.durationAddScale = NaN,
                                this.time = NaN;
                        }
                        return s(t, "laya.particle.ParticleData"), t.Create = function (e, i, n, s) {
                            var a = new t();
                            a.position = i, c.scaleVector3(n, e.emitterVelocitySensitivity, t._tempVelocity);
                            var r = c.lerp(e.minHorizontalVelocity, e.maxHorizontalVelocity, Math.random()), o = Math.random() * Math.PI * 2;
                            t._tempVelocity[0] += r * Math.cos(o), t._tempVelocity[2] += r * Math.sin(o), t._tempVelocity[1] += c.lerp(e.minVerticalVelocity, e.maxVerticalVelocity, Math.random()),
                                a.velocity = t._tempVelocity, a.startColor = t._tempStartColor, a.endColor = t._tempEndColor;
                            var h = 0;
                            if (e.disableColor) for (h = 0; h < 4; h++) a.startColor[h] = 1, a.endColor[h] = 1; else if (e.colorComponentInter) for (h = 0; h < 4; h++) a.startColor[h] = c.lerp(e.minStartColor[h], e.maxStartColor[h], Math.random()),
                                a.endColor[h] = c.lerp(e.minEndColor[h], e.maxEndColor[h], Math.random()); else c.lerpVector4(e.minStartColor, e.maxStartColor, Math.random(), a.startColor),
                                    c.lerpVector4(e.minEndColor, e.maxEndColor, Math.random(), a.endColor);
                            a.sizeRotation = t._tempSizeRotation;
                            var l = Math.random();
                            a.sizeRotation[0] = c.lerp(e.minStartSize, e.maxStartSize, l), a.sizeRotation[1] = c.lerp(e.minEndSize, e.maxEndSize, l),
                                a.sizeRotation[2] = c.lerp(e.minRotateSpeed, e.maxRotateSpeed, Math.random()), a.radius = t._tempRadius;
                            var u = Math.random();
                            a.radius[0] = c.lerp(e.minStartRadius, e.maxStartRadius, u), a.radius[1] = c.lerp(e.minEndRadius, e.maxEndRadius, u),
                                a.radian = t._tempRadian, a.radian[0] = c.lerp(e.minHorizontalStartRadian, e.maxHorizontalStartRadian, Math.random()),
                                a.radian[1] = c.lerp(e.minVerticalStartRadian, e.maxVerticalStartRadian, Math.random());
                            var d = e.useEndRadian;
                            return a.radian[2] = d ? c.lerp(e.minHorizontalEndRadian, e.maxHorizontalEndRadian, Math.random()) : a.radian[0],
                                a.radian[3] = d ? c.lerp(e.minVerticalEndRadian, e.maxVerticalEndRadian, Math.random()) : a.radian[1],
                                a.durationAddScale = e.ageAddScale * Math.random(), a.time = s, a;
                        }, n(t, ["_tempVelocity", function () {
                            return this._tempVelocity = new Float32Array(3);
                        }, "_tempStartColor", function () {
                            return this._tempStartColor = new Float32Array(4);
                        }, "_tempEndColor", function () {
                            return this._tempEndColor = new Float32Array(4);
                        }, "_tempSizeRotation", function () {
                            return this._tempSizeRotation = new Float32Array(3);
                        }, "_tempRadius", function () {
                            return this._tempRadius = new Float32Array(2);
                        }, "_tempRadian", function () {
                            return this._tempRadian = new Float32Array(4);
                        }]), t;
                    }(), L = (function () {
                        function t(t, e, i) {
                            this._templet = null, this._timeBetweenParticles = NaN, this._previousPosition = null,
                                this._timeLeftOver = 0, this._tempVelocity = new Float32Array([0, 0, 0]), this._tempPosition = new Float32Array([0, 0, 0]),
                                this._templet = t, this._timeBetweenParticles = 1 / e, this._previousPosition = i;
                        }
                        s(t, "laya.particle.ParticleEmitter");
                        t.prototype.update = function (t, e) {
                            if ((t /= 1e3) > 0) {
                                c.subtractVector3(e, this._previousPosition, this._tempVelocity), c.scaleVector3(this._tempVelocity, 1 / t, this._tempVelocity);
                                for (var i = this._timeLeftOver + t, n = -this._timeLeftOver; i > this._timeBetweenParticles;) n += this._timeBetweenParticles,
                                    i -= this._timeBetweenParticles, c.lerpVector3(this._previousPosition, e, n / t, this._tempPosition),
                                    this._templet.addParticleArray(this._tempPosition, this._tempVelocity);
                                this._timeLeftOver = i;
                            }
                            this._previousPosition[0] = e[0], this._previousPosition[1] = e[1], this._previousPosition[2] = e[2];
                        };
                    }(), function () {
                        function t() {
                            this.textureName = null, this.textureCount = 1, this.maxPartices = 100, this.duration = 1,
                                this.ageAddScale = 0, this.emitterVelocitySensitivity = 1, this.minStartSize = 100,
                                this.maxStartSize = 100, this.minEndSize = 100, this.maxEndSize = 100, this.minHorizontalVelocity = 0,
                                this.maxHorizontalVelocity = 0, this.minVerticalVelocity = 0, this.maxVerticalVelocity = 0,
                                this.endVelocity = 1, this.minRotateSpeed = 0, this.maxRotateSpeed = 0, this.minStartRadius = 0,
                                this.maxStartRadius = 0, this.minEndRadius = 0, this.maxEndRadius = 0, this.minHorizontalStartRadian = 0,
                                this.maxHorizontalStartRadian = 0, this.minVerticalStartRadian = 0, this.maxVerticalStartRadian = 0,
                                this.useEndRadian = !0, this.minHorizontalEndRadian = 0, this.maxHorizontalEndRadian = 0,
                                this.minVerticalEndRadian = 0, this.maxVerticalEndRadian = 0, this.colorComponentInter = !1,
                                this.disableColor = !1, this.blendState = 0, this.emitterType = "null", this.emissionRate = 0,
                                this.sphereEmitterRadius = 1, this.sphereEmitterVelocity = 0, this.sphereEmitterVelocityAddVariance = 0,
                                this.ringEmitterRadius = 30, this.ringEmitterVelocity = 0, this.ringEmitterVelocityAddVariance = 0,
                                this.ringEmitterUp = 2, this.gravity = new Float32Array([0, 0, 0]), this.minStartColor = new Float32Array([1, 1, 1, 1]),
                                this.maxStartColor = new Float32Array([1, 1, 1, 1]), this.minEndColor = new Float32Array([1, 1, 1, 1]),
                                this.maxEndColor = new Float32Array([1, 1, 1, 1]), this.pointEmitterPosition = new Float32Array([0, 0, 0]),
                                this.pointEmitterPositionVariance = new Float32Array([0, 0, 0]), this.pointEmitterVelocity = new Float32Array([0, 0, 0]),
                                this.pointEmitterVelocityAddVariance = new Float32Array([0, 0, 0]), this.boxEmitterCenterPosition = new Float32Array([0, 0, 0]),
                                this.boxEmitterSize = new Float32Array([0, 0, 0]), this.boxEmitterVelocity = new Float32Array([0, 0, 0]),
                                this.boxEmitterVelocityAddVariance = new Float32Array([0, 0, 0]), this.sphereEmitterCenterPosition = new Float32Array([0, 0, 0]),
                                this.ringEmitterCenterPosition = new Float32Array([0, 0, 0]), this.positionVariance = new Float32Array([0, 0, 0]);
                        }
                        return s(t, "laya.particle.ParticleSetting"), t.checkSetting = function (e) {
                            var i;
                            for (i in t._defaultSetting) e.hasOwnProperty(i) || (e[i] = t._defaultSetting[i]);
                            e.endVelocity = +e.endVelocity, e.gravity[0] = +e.gravity[0], e.gravity[1] = +e.gravity[1],
                                e.gravity[2] = +e.gravity[2];
                        }, n(t, ["_defaultSetting", function () {
                            return this._defaultSetting = new t();
                        }]), t;
                    }()), C = function () {
                        function t() {
                            this.settings = null, this.texture = null;
                        }
                        s(t, "laya.particle.ParticleTemplateBase");
                        return t.prototype.addParticleArray = function (t, e) { }, t;
                    }(), M = function () {
                        function t() {
                            this.u_Duration = NaN, this.u_EndVelocity = NaN, this.u_Gravity = null, this.a_Position = null,
                                this.a_Velocity = null, this.a_StartColor = null, this.a_EndColor = null, this.a_SizeRotation = null,
                                this.a_Radius = null, this.a_Radian = null, this.a_AgeAddScale = NaN, this.gl_Position = null,
                                this.v_Color = null, this.oSize = NaN, this._color = new Float32Array(4), this._position = new Float32Array(3);
                        }
                        s(t, "laya.particle.particleUtils.CanvasShader");
                        var e = t.prototype;
                        return e.getLen = function (t) {
                            return Math.sqrt(t[0] * t[0] + t[1] * t[1] + t[2] * t[2]);
                        }, e.ComputeParticlePosition = function (t, e, i, n) {
                            this._position[0] = t[0], this._position[1] = t[1], this._position[2] = t[2];
                            var s = this.getLen(e), a = s * n + (s * this.u_EndVelocity - s) * n * n / 2, r = NaN;
                            r = this.getLen(e);
                            var o = 0;
                            for (3, o = 0; o < 3; o++) this._position[o] = this._position[o] + e[o] / r * a * this.u_Duration,
                                this._position[o] += this.u_Gravity[o] * i * n;
                            var h = c.lerp(this.a_Radius[0], this.a_Radius[1], n), l = c.lerp(this.a_Radian[0], this.a_Radian[2], n), u = c.lerp(this.a_Radian[1], this.a_Radian[3], n), d = Math.cos(u) * h;
                            return this._position[1] += Math.sin(u) * h, this._position[0] += Math.cos(l) * d,
                                this._position[2] += Math.sin(l) * d, new Float32Array([this._position[0], this._position[1], 0, 1]);
                        }, e.ComputeParticleSize = function (t, e, i) {
                            return c.lerp(t, e, i);
                        }, e.ComputeParticleRotation = function (t, e) {
                            return t * e;
                        }, e.ComputeParticleColor = function (t, e, i) {
                            var n = this._color;
                            return c.lerpVector4(t, e, i, n), n[3] = n[3] * i * (1 - i) * (1 - i) * 6.7, n;
                        }, e.clamp = function (t, e, i) {
                            return t < e ? e : t > i ? i : t;
                        }, e.getData = function (t) {
                            t *= 1 + this.a_AgeAddScale;
                            var e = this.clamp(t / this.u_Duration, 0, 1);
                            this.gl_Position = this.ComputeParticlePosition(this.a_Position, this.a_Velocity, t, e);
                            var i = this.ComputeParticleSize(this.a_SizeRotation[0], this.a_SizeRotation[1], e), n = this.ComputeParticleRotation(this.a_SizeRotation[2], t);
                            this.v_Color = this.ComputeParticleColor(this.a_StartColor, this.a_EndColor, e);
                            var s = new u(), a = NaN;
                            a = i / this.oSize * 2, s.scale(a, a), s.rotate(n), s.setTranslate(this.gl_Position[0], -this.gl_Position[1]);
                            var r = NaN;
                            return r = this.v_Color[3], [this.v_Color, r, s, this.v_Color[0] * r, this.v_Color[1] * r, this.v_Color[2] * r];
                        }, t;
                    }(), T = function () {
                        function t() {
                            this.maxIndex = 0, this.cmds = null, this.id = 0;
                        }
                        s(t, "laya.particle.particleUtils.CMDParticle");
                        return t.prototype.setCmds = function (t) {
                            this.cmds = t, this.maxIndex = t.length - 1;
                        }, t;
                    }(), S = function () {
                        function t() { }
                        return s(t, "laya.particle.particleUtils.PicTool"), t.getCanvasPic = function (t, e) {
                            t = t.bitmap;
                            var i = new o("2D"), n = i.getContext("2d");
                            i.size(t.width, t.height);
                            var s = e >> 16 & 255, a = e >> 8 & 255, r = 255 & e;
                            if (d.isConchApp && n.setFilter(s / 255, a / 255, r / 255, 0), n.drawImage(t.source, 0, 0),
                                !d.isConchApp) {
                                for (var h = n.getImageData(0, 0, i.width, i.height), l = h.data, c = 0, u = l.length; c < u; c += 4) 0 != l[c + 3] && (l[c] *= s / 255,
                                    l[c + 1] *= a / 255, l[c + 2] *= r / 255);
                                n.putImageData(h, 0, 0);
                            }
                            return i;
                        }, t.getRGBPic = function (e) {
                            return [new g(t.getCanvasPic(e, 16711680)), new g(t.getCanvasPic(e, 65280)), new g(t.getCanvasPic(e, 255))];
                        }, t;
                    }(), A = function (t) {
                        function e(t) {
                            this.setting = null, this._posRange = null, this._canvasTemplate = null, this._emitFun = null,
                                e.__super.call(this), this.template = t;
                        }
                        s(e, "laya.particle.emitter.Emitter2D", t);
                        var i = e.prototype;
                        return i.emit = function () {
                            t.prototype.emit.call(this), null != this._emitFun && this._emitFun();
                        }, i.getRandom = function (t) {
                            return (2 * Math.random() - 1) * t;
                        }, i.webGLEmit = function () {
                            var t = new Float32Array(3);
                            t[0] = this.getRandom(this._posRange[0]), t[1] = this.getRandom(this._posRange[1]),
                                t[2] = this.getRandom(this._posRange[2]);
                            var e = new Float32Array(3);
                            e[0] = 0, e[1] = 0, e[2] = 0, this._particleTemplate.addParticleArray(t, e);
                        }, i.canvasEmit = function () {
                            var t = new Float32Array(3);
                            t[0] = this.getRandom(this._posRange[0]), t[1] = this.getRandom(this._posRange[1]),
                                t[2] = this.getRandom(this._posRange[2]);
                            var e = new Float32Array(3);
                            e[0] = 0, e[1] = 0, e[2] = 0, this._particleTemplate.addParticleArray(t, e);
                        }, a(0, i, "template", function () {
                            return this._particleTemplate;
                        }, function (t) {
                            this._particleTemplate = t, t || (this._emitFun = null, this.setting = null, this._posRange = null),
                                this.setting = t.settings, this._posRange = this.setting.positionVariance, this._particleTemplate instanceof laya.particle.ParticleTemplate2D ? this._emitFun = this.webGLEmit : this._particleTemplate instanceof laya.particle.ParticleTemplateCanvas && (this._canvasTemplate = t,
                                    this._emitFun = this.canvasEmit);
                        }), e;
                    }(x), I = function (t) {
                        function e(t) {
                            this._vertices = null, this._vertexBuffer = null, this._indexBuffer = null, this._floatCountPerVertex = 29,
                                this._firstActiveElement = 0, this._firstNewElement = 0, this._firstFreeElement = 0,
                                this._firstRetiredElement = 0, this._currentTime = 0, this._drawCounter = 0, e.__super.call(this),
                                this.settings = t;
                        }
                        s(e, "laya.particle.ParticleTemplateWebGL", C);
                        var i = e.prototype;
                        return i.initialize = function () {
                            this._vertices = new Float32Array(this.settings.maxPartices * this._floatCountPerVertex * 4);
                            for (var t = 0, e = 0; e < this.settings.maxPartices; e++) {
                                var i = Math.random(), n = this.settings.textureCount ? 1 / this.settings.textureCount : 1, s = NaN;
                                for (s = 0; s < this.settings.textureCount && !(i < s + n); s += n);
                                t = e * this._floatCountPerVertex * 4, this._vertices[t + 0 * this._floatCountPerVertex + 0] = -1,
                                    this._vertices[t + 0 * this._floatCountPerVertex + 1] = -1, this._vertices[t + 0 * this._floatCountPerVertex + 2] = 0,
                                    this._vertices[t + 0 * this._floatCountPerVertex + 3] = s, this._vertices[t + 1 * this._floatCountPerVertex + 0] = 1,
                                    this._vertices[t + 1 * this._floatCountPerVertex + 1] = -1, this._vertices[t + 1 * this._floatCountPerVertex + 2] = 1,
                                    this._vertices[t + 1 * this._floatCountPerVertex + 3] = s, this._vertices[t + 2 * this._floatCountPerVertex + 0] = 1,
                                    this._vertices[t + 2 * this._floatCountPerVertex + 1] = 1, this._vertices[t + 2 * this._floatCountPerVertex + 2] = 1,
                                    this._vertices[t + 2 * this._floatCountPerVertex + 3] = s + n, this._vertices[t + 3 * this._floatCountPerVertex + 0] = -1,
                                    this._vertices[t + 3 * this._floatCountPerVertex + 1] = 1, this._vertices[t + 3 * this._floatCountPerVertex + 2] = 0,
                                    this._vertices[t + 3 * this._floatCountPerVertex + 3] = s + n;
                            }
                        }, i.loadContent = function () { }, i.update = function (t) {
                            this._currentTime += t / 1e3, this.retireActiveParticles(), this.freeRetiredParticles(),
                                this._firstActiveElement == this._firstFreeElement && (this._currentTime = 0), this._firstRetiredElement == this._firstActiveElement && (this._drawCounter = 0);
                        }, i.retireActiveParticles = function () {
                            for (var t = this.settings.duration; this._firstActiveElement != this._firstNewElement;) {
                                var e = this._firstActiveElement * this._floatCountPerVertex * 4, i = e + 28, n = this._currentTime - this._vertices[i];
                                if ((n *= 1 + this._vertices[e + 27]) + 1e-4 < t) break;
                                this._vertices[i] = this._drawCounter, this._firstActiveElement++, this._firstActiveElement >= this.settings.maxPartices && (this._firstActiveElement = 0);
                            }
                        }, i.freeRetiredParticles = function () {
                            for (; this._firstRetiredElement != this._firstActiveElement;) {
                                if (this._drawCounter - this._vertices[this._firstRetiredElement * this._floatCountPerVertex * 4 + 28] < 3) break;
                                this._firstRetiredElement++, this._firstRetiredElement >= this.settings.maxPartices && (this._firstRetiredElement = 0);
                            }
                        }, i.addNewParticlesToVertexBuffer = function () { }, i.addParticleArray = function (t, e) {
                            var i = this._firstFreeElement + 1;
                            if (i >= this.settings.maxPartices && (i = 0), i !== this._firstRetiredElement) {
                                for (var n = b.Create(this.settings, t, e, this._currentTime), s = this._firstFreeElement * this._floatCountPerVertex * 4, a = 0; a < 4; a++) {
                                    var r = 0, o = 0;
                                    for (r = 0, o = 4; r < 3; r++) this._vertices[s + a * this._floatCountPerVertex + o + r] = n.position[r];
                                    for (r = 0, o = 7; r < 3; r++) this._vertices[s + a * this._floatCountPerVertex + o + r] = n.velocity[r];
                                    for (r = 0, o = 10; r < 4; r++) this._vertices[s + a * this._floatCountPerVertex + o + r] = n.startColor[r];
                                    for (r = 0, o = 14; r < 4; r++) this._vertices[s + a * this._floatCountPerVertex + o + r] = n.endColor[r];
                                    for (r = 0, o = 18; r < 3; r++) this._vertices[s + a * this._floatCountPerVertex + o + r] = n.sizeRotation[r];
                                    for (r = 0, o = 21; r < 2; r++) this._vertices[s + a * this._floatCountPerVertex + o + r] = n.radius[r];
                                    for (r = 0, o = 23; r < 4; r++) this._vertices[s + a * this._floatCountPerVertex + o + r] = n.radian[r];
                                    this._vertices[s + a * this._floatCountPerVertex + 27] = n.durationAddScale, this._vertices[s + a * this._floatCountPerVertex + 28] = n.time;
                                }
                                this._firstFreeElement = i;
                            }
                        }, e;
                    }(), E = function (t) {
                        function e(t) {
                            this._ready = !1, this.textureList = [], this.particleList = [], this.pX = 0, this.pY = 0,
                                this.activeParticles = [], this.deadParticles = [], this.iList = [], this._maxNumParticles = 0,
                                this.textureWidth = NaN, this.dTextureWidth = NaN, this.colorChange = !0, this.step = 1 / 60,
                                this.canvasShader = new M(), e.__super.call(this), this.settings = t, this._maxNumParticles = t.maxPartices,
                                this.texture = new g(), this.texture.on("loaded", this, this._textureLoaded), this.texture.load(t.textureName);
                        }
                        s(e, "laya.particle.ParticleTemplateCanvas", C);
                        var i = e.prototype;
                        return i._textureLoaded = function (t) {
                            this.setTexture(this.texture), this._ready = !0;
                        }, i.clear = function (t) {
                            void 0 === t && (t = !0), this.deadParticles.length = 0, this.activeParticles.length = 0,
                                this.textureList.length = 0;
                        }, i.setTexture = function (t) {
                            this.texture = t, this.textureWidth = t.width, this.dTextureWidth = 1 / this.textureWidth,
                                this.pX = .5 * -t.width, this.pY = .5 * -t.height, this.textureList = e.changeTexture(t, this.textureList),
                                this.particleList.length = 0, this.deadParticles.length = 0, this.activeParticles.length = 0;
                        }, i._createAParticleData = function (t, e) {
                            this.canvasShader.u_EndVelocity = this.settings.endVelocity, this.canvasShader.u_Gravity = this.settings.gravity,
                                this.canvasShader.u_Duration = this.settings.duration;
                            var i;
                            i = b.Create(this.settings, t, e, 0), this.canvasShader.a_Position = i.position,
                                this.canvasShader.a_Velocity = i.velocity, this.canvasShader.a_StartColor = i.startColor,
                                this.canvasShader.a_EndColor = i.endColor, this.canvasShader.a_SizeRotation = i.sizeRotation,
                                this.canvasShader.a_Radius = i.radius, this.canvasShader.a_Radian = i.radian, this.canvasShader.a_AgeAddScale = i.durationAddScale,
                                this.canvasShader.oSize = this.textureWidth;
                            var n = new T(), s = 0, a = this.settings.duration / (1 + i.durationAddScale), r = [];
                            for (s = 0; s < a; s += this.step) r.push(this.canvasShader.getData(s));
                            return n.id = this.particleList.length, this.particleList.push(n), n.setCmds(r),
                                n;
                        }, i.addParticleArray = function (t, e) {
                            if (this._ready) {
                                var i;
                                this.particleList.length < this._maxNumParticles ? (i = this._createAParticleData(t, e),
                                    this.iList[i.id] = 0, this.activeParticles.push(i)) : this.deadParticles.length > 0 && (i = this.deadParticles.pop(),
                                        this.iList[i.id] = 0, this.activeParticles.push(i));
                            }
                        }, i.advanceTime = function (t) {
                            if (void 0 === t && (t = 1), this._ready) {
                                var e, i = this.activeParticles, n = this.deadParticles, s = 0, a = i.length, r = 0, o = this.iList;
                                for (s = a - 1; s > -1; s--) (r = o[(e = i[s]).id]) >= e.maxIndex ? (r = 0, i.splice(s, 1),
                                    n.push(e)) : r += 1, o[e.id] = r;
                            }
                        }, i.render = function (t, e, i) {
                            this._ready && (this.activeParticles.length < 1 || this.textureList.length < 2 || (this.settings.disableColor ? this.noColorRender(t, e, i) : this.canvasRender(t, e, i)));
                        }, i.noColorRender = function (t, e, i) {
                            var n, s, a = this.activeParticles, r = 0, o = a.length, h = NaN, l = this.pX, c = this.pY, u = 2 * -l, d = 2 * -c, _ = 0, f = (this.textureList,
                                this.iList), p = NaN;
                            for (t.translate(e, i), p = t.ctx.globalAlpha, r = 0; r < o; r++) _ = f[(n = a[r]).id],
                                (s = n.cmds[_]) && ((h = s[1]) <= .01 || (t.setAlpha(p * h), t.drawTextureWithTransform(this.texture, l, c, u, d, s[2], 1)));
                            t.setAlpha(p), t.translate(-e, -i);
                        }, i.canvasRender = function (t, e, i) {
                            var n, s, a, r = this.activeParticles, o = 0, h = r.length, l = this.pX, c = this.pY, u = 2 * -l, d = 2 * -c, _ = 0, f = this.textureList, p = this.iList, g = NaN;
                            for (t.translate(e, i), g = t.ctx.globalAlpha, a = t.ctx.globalCompositeOperation,
                                t.blendMode("lighter"), o = 0; o < h; o++) _ = p[(n = r[o]).id], (s = n.cmds[_]) && (s[1] <= .01 || (t.save(),
                                    t.transformByMatrix(s[2]), s[3] > .01 && (t.setAlpha(g * s[3]), t.drawTexture(f[0], l, c, u, d)),
                                    s[4] > .01 && (t.setAlpha(g * s[4]), t.drawTexture(f[1], l, c, u, d)), s[5] > .01 && (t.setAlpha(g * s[5]),
                                        t.drawTexture(f[2], l, c, u, d)), t.restore()));
                            t.setAlpha(g), t.translate(-e, -i), t.blendMode(a);
                        }, e.changeTexture = function (t, e, i) {
                            return e || (e = []), e.length = 0, i && i.disableColor ? e.push(t, t, t) : v.copyArray(e, S.getRGBPic(t)),
                                e;
                        }, e;
                    }(), R = function (t) {
                        function e(t) {
                            this._vertexBuffer2D = null, this._indexBuffer2D = null, this.x = 0, this.y = 0,
                                this._blendFn = null, this._startTime = 0, this.sv = new P(), e.__super.call(this, t);
                            var n = this;
                            i.loader.load(this.settings.textureName, h.create(null, function (t) {
                                t.bitmap.enableMerageInAtlas = !1, n.texture = t;
                            })), this.sv.u_Duration = this.settings.duration, this.sv.u_Gravity = this.settings.gravity,
                                this.sv.u_EndVelocity = this.settings.endVelocity, this._blendFn = r.fns[t.blendState],
                                this.initialize(), this._vertexBuffer = this._vertexBuffer2D = y.create(-1, 35048),
                                this._indexBuffer = this._indexBuffer2D = l.create(35044), this.loadContent();
                        }
                        s(e, "laya.particle.ParticleTemplate2D", t);
                        var n = e.prototype;
                        return i.imps(n, {
                            "laya.webgl.submit.ISubmit": !0
                        }), n.getRenderType = function () {
                            return -111;
                        }, n.releaseRender = function () { }, n.addParticleArray = function (e, i) {
                            e[0] += this.x, e[1] += this.y, t.prototype.addParticleArray.call(this, e, i);
                        }, n.loadContent = function () {
                            for (var t = new Uint16Array(6 * this.settings.maxPartices), e = 0; e < this.settings.maxPartices; e++) t[6 * e + 0] = 4 * e + 0,
                                t[6 * e + 1] = 4 * e + 1, t[6 * e + 2] = 4 * e + 2, t[6 * e + 3] = 4 * e + 0, t[6 * e + 4] = 4 * e + 2,
                                t[6 * e + 5] = 4 * e + 3;
                            this._indexBuffer2D.clear(), this._indexBuffer2D.append(t), this._indexBuffer2D.upload();
                        }, n.addNewParticlesToVertexBuffer = function () {
                            this._vertexBuffer2D.clear(), this._vertexBuffer2D.append(this._vertices);
                            var t = 0;
                            this._firstNewElement < this._firstFreeElement ? (t = 4 * this._firstNewElement * this._floatCountPerVertex * 4,
                                this._vertexBuffer2D.subUpload(t, t, t + 4 * (this._firstFreeElement - this._firstNewElement) * this._floatCountPerVertex * 4)) : (t = 4 * this._firstNewElement * this._floatCountPerVertex * 4,
                                    this._vertexBuffer2D.subUpload(t, t, t + 4 * (this.settings.maxPartices - this._firstNewElement) * this._floatCountPerVertex * 4),
                                    this._firstFreeElement > 0 && (this._vertexBuffer2D.setNeedUpload(), this._vertexBuffer2D.subUpload(0, 0, 4 * this._firstFreeElement * this._floatCountPerVertex * 4))),
                                this._firstNewElement = this._firstFreeElement;
                        }, n.renderSubmit = function () {
                            if (this.texture && this.texture.loaded) {
                                if (this.update(i.timer.delta), this.sv.u_CurrentTime = this._currentTime, this._firstNewElement != this._firstFreeElement && this.addNewParticlesToVertexBuffer(),
                                    this.blend(), this._firstActiveElement != this._firstFreeElement) {
                                    w.mainContext;
                                    this._vertexBuffer2D.bind(this._indexBuffer2D), this.sv.u_texture = this.texture.source,
                                        this.sv.upload(), this._firstActiveElement < this._firstFreeElement ? w.mainContext.drawElements(4, 6 * (this._firstFreeElement - this._firstActiveElement), 5123, 6 * this._firstActiveElement * 2) : (w.mainContext.drawElements(4, 6 * (this.settings.maxPartices - this._firstActiveElement), 5123, 6 * this._firstActiveElement * 2),
                                            this._firstFreeElement > 0 && w.mainContext.drawElements(4, 6 * this._firstFreeElement, 5123, 0)),
                                        p.drawCall++;
                                }
                                this._drawCounter++;
                            }
                            return 1;
                        }, n.blend = function () {
                            if (r.activeBlendFunction !== this._blendFn) {
                                var t = w.mainContext;
                                t.enable(3042), this._blendFn(t), r.activeBlendFunction = this._blendFn;
                            }
                        }, n.dispose = function () {
                            this._vertexBuffer2D.dispose(), this._indexBuffer2D.dispose();
                        }, e.activeBlendType = -1, e;
                    }(I), P = function (t) {
                        function e() {
                            this.a_CornerTextureCoordinate = [4, 5126, !1, 116, 0], this.a_Position = [3, 5126, !1, 116, 16],
                                this.a_Velocity = [3, 5126, !1, 116, 28], this.a_StartColor = [4, 5126, !1, 116, 40],
                                this.a_EndColor = [4, 5126, !1, 116, 56], this.a_SizeRotation = [3, 5126, !1, 116, 72],
                                this.a_Radius = [2, 5126, !1, 116, 84], this.a_Radian = [4, 5126, !1, 116, 92],
                                this.a_AgeAddScale = [1, 5126, !1, 116, 108], this.a_Time = [1, 5126, !1, 116, 112],
                                this.u_CurrentTime = NaN, this.u_Duration = NaN, this.u_Gravity = null, this.u_EndVelocity = NaN,
                                this.u_texture = null, e.__super.call(this, 0, 0);
                        }
                        s(e, "laya.particle.shader.value.ParticleShaderValue", m);
                        return e.prototype.upload = function () {
                            this.refresh(), e.pShader.upload(this);
                        }, n(e, ["pShader", function () {
                            return this.pShader = new D();
                        }]), e;
                    }(), D = (function (e) {
                        function n(t) {
                            this._matrix4 = [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1], this._particleTemplate = null,
                                this._canvasTemplate = null, this._emitter = null, this.autoPlay = !0, n.__super.call(this),
                                t && this.setParticleSetting(t);
                        }
                        s(n, "laya.particle.Particle2D", e);
                        var r = n.prototype;
                        r.load = function (t) {
                            i.loader.load(t, h.create(this, this.setParticleSetting), null, "json");
                        }, r.setParticleSetting = function (e) {
                            var n = this;
                            if (!e) return this.stop();
                            if (L.checkSetting(e), t.ConchParticleTemplate2D && !d.isWebGL || (this.customRenderEnable = !0),
                                d.isWebGL) this._particleTemplate = new R(e), this.graphics._saveToCmd(d.context._drawParticle, [this._particleTemplate]); else {
                                if (d.isConchApp && t.ConchParticleTemplate2D) {
                                    this._particleTemplate = new ConchParticleTemplate2D();
                                    var s = this;
                                    return i.loader.load(e.textureName, h.create(null, function (t) {
                                        s._particleTemplate.texture = t, s._particleTemplate.settings = e, d.isConchNode ? s.graphics.drawParticle(s._particleTemplate) : s.graphics._saveToCmd(d.context._drawParticle, [n._particleTemplate]);
                                    })), this._emitter = {
                                        start: function () { }
                                    }, this.play = this._particleTemplate.play.bind(this._particleTemplate), this.stop = this._particleTemplate.stop.bind(this._particleTemplate),
                                        void (this.autoPlay && this.play());
                                }
                                this._particleTemplate = this._canvasTemplate = new E(e);
                            }
                            this._emitter ? this._emitter.template = this._particleTemplate : this._emitter = new A(this._particleTemplate),
                                this.autoPlay && (this.emitter.start(), this.play());
                        }, r.play = function () {
                            this.timer.frameLoop(1, this, this._loop);
                        }, r.stop = function () {
                            this.timer.clear(this, this._loop);
                        }, r._loop = function () {
                            this.advanceTime(1 / 60);
                        }, r.advanceTime = function (t) {
                            void 0 === t && (t = 1), this._canvasTemplate && this._canvasTemplate.advanceTime(t),
                                this._emitter && this._emitter.advanceTime(t);
                        }, r.customRender = function (t, e, i) {
                            if (d.isWebGL) {
                                this._matrix4[0] = t.ctx._curMat.a, this._matrix4[1] = t.ctx._curMat.b, this._matrix4[4] = t.ctx._curMat.c,
                                    this._matrix4[5] = t.ctx._curMat.d, this._matrix4[12] = t.ctx._curMat.tx, this._matrix4[13] = t.ctx._curMat.ty;
                                this._particleTemplate.sv.u_mmat = this._matrix4;
                            }
                            this._canvasTemplate && this._canvasTemplate.render(t, e, i);
                        }, r.destroy = function (t) {
                            void 0 === t && (t = !0), this._particleTemplate instanceof laya.particle.ParticleTemplate2D && this._particleTemplate.dispose(),
                                e.prototype.destroy.call(this, t);
                        }, a(0, r, "url", null, function (t) {
                            this.load(t);
                        }), a(0, r, "emitter", function () {
                            return this._emitter;
                        });
                    }(f), function (t) {
                        function e() {
                            e.__super.call(this, e.vs, e.ps, "ParticleShader");
                        }
                        return s(e, "laya.particle.shader.ParticleShader", _), n(e, ["vs", function () {
                            return this.vs = "attribute vec4 a_CornerTextureCoordinate;\nattribute vec3 a_Position;\nattribute vec3 a_Velocity;\nattribute vec4 a_StartColor;\nattribute vec4 a_EndColor;\nattribute vec3 a_SizeRotation;\nattribute vec2 a_Radius;\nattribute vec4 a_Radian;\nattribute float a_AgeAddScale;\nattribute float a_Time;\n\nvarying vec4 v_Color;\nvarying vec2 v_TextureCoordinate;\n\nuniform float u_CurrentTime;\nuniform float u_Duration;\nuniform float u_EndVelocity;\nuniform vec3 u_Gravity;\n\n#ifdef PARTICLE3D\n uniform mat4 u_WorldMat;\n uniform mat4 u_View;\n uniform mat4 u_Projection;\n uniform vec2 u_ViewportScale;\n#else\n uniform vec2 size;\n uniform mat4 mmat;\n uniform mat4 u_mmat;\n#endif\n\nvec4 ComputeParticlePosition(in vec3 position, in vec3 velocity,in float age,in float normalizedAge)\n{\n\n   float startVelocity = length(velocity);//起始标量速度\n   float endVelocity = startVelocity * u_EndVelocity;//结束标量速度\n\n   float velocityIntegral = startVelocity * normalizedAge +(endVelocity - startVelocity) * normalizedAge *normalizedAge/2.0;//计算当前速度的标量（单位空间），vt=v0*t+(1/2)*a*(t^2)\n   \n   vec3 addPosition = normalize(velocity) * velocityIntegral * u_Duration;//计算受自身速度影响的位置，转换标量到矢量    \n   addPosition += u_Gravity * age * normalizedAge;//计算受重力影响的位置\n   \n   float radius=mix(a_Radius.x, a_Radius.y, normalizedAge); //计算粒子受半径和角度影响（无需计算角度和半径时，可用宏定义优化屏蔽此计算）\n   float radianHorizontal =mix(a_Radian.x,a_Radian.z,normalizedAge);\n   float radianVertical =mix(a_Radian.y,a_Radian.w,normalizedAge);\n   \n   float r =cos(radianVertical)* radius;\n   addPosition.y += sin(radianVertical) * radius;\n\t\n   addPosition.x += cos(radianHorizontal) *r;\n   addPosition.z += sin(radianHorizontal) *r;\n  \n   #ifdef PARTICLE3D\n   position+=addPosition;\n    return  u_Projection*u_View*u_WorldMat*(vec4(position, 1.0));\n   #else\n   addPosition.y=-addPosition.y;//2D粒子位置更新需要取负，2D粒子坐标系Y轴正向朝上\n   position+=addPosition;\n    return  vec4(position,1.0);\n   #endif\n}\n\nfloat ComputeParticleSize(in float startSize,in float endSize, in float normalizedAge)\n{    \n    float size = mix(startSize, endSize, normalizedAge);\n    \n\t#ifdef PARTICLE3D\n    //Project the size into screen coordinates.\n     return size * u_Projection[1][1];\n\t#else\n\t return size;\n\t#endif\n}\n\nmat2 ComputeParticleRotation(in float rot,in float age)\n{    \n    float rotation =rot * age;\n    //计算2x2旋转矩阵.\n    float c = cos(rotation);\n    float s = sin(rotation);\n    return mat2(c, -s, s, c);\n}\n\nvec4 ComputeParticleColor(in vec4 startColor,in vec4 endColor,in float normalizedAge)\n{\n\tvec4 color=mix(startColor,endColor,normalizedAge);\n    //硬编码设置，使粒子淡入很快，淡出很慢,6.7的缩放因子把置归一在0到1之间，可以谷歌x*(1-x)*(1-x)*6.7的制图表\n    color.a *= normalizedAge * (1.0-normalizedAge) * (1.0-normalizedAge) * 6.7;\n   \n    return color;\n}\n\nvoid main()\n{\n   float age = u_CurrentTime - a_Time;\n   age *= 1.0 + a_AgeAddScale;\n   float normalizedAge = clamp(age / u_Duration,0.0,1.0);\n   gl_Position = ComputeParticlePosition(a_Position, a_Velocity, age, normalizedAge);//计算粒子位置\n   float pSize = ComputeParticleSize(a_SizeRotation.x,a_SizeRotation.y, normalizedAge);\n   mat2 rotation = ComputeParticleRotation(a_SizeRotation.z, age);\n\t\n   #ifdef PARTICLE3D\n\tgl_Position.xy += (rotation*a_CornerTextureCoordinate.xy) * pSize * u_ViewportScale;\n   #else\n    mat4 mat=u_mmat*mmat;\n    gl_Position=vec4((mat*gl_Position).xy,0.0,1.0);\n\tgl_Position.xy += (rotation*a_CornerTextureCoordinate.xy) * pSize*vec2(mat[0][0],mat[1][1]);\n    gl_Position=vec4((gl_Position.x/size.x-0.5)*2.0,(0.5-gl_Position.y/size.y)*2.0,0.0,1.0);\n   #endif\n   \n   v_Color = ComputeParticleColor(a_StartColor,a_EndColor, normalizedAge);\n   v_TextureCoordinate =a_CornerTextureCoordinate.zw;\n}\n\n";
                        }, "ps", function () {
                            return this.ps = "#ifdef FSHIGHPRECISION\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n\nvarying vec4 v_Color;\nvarying vec2 v_TextureCoordinate;\nuniform sampler2D u_texture;\n\nvoid main()\n{\t\n\tgl_FragColor=texture2D(u_texture,v_TextureCoordinate)*v_Color;\n\tgl_FragColor.xyz *= v_Color.w;\n}";
                        }]), e;
                    }());
}(window, document, Laya), "function" == typeof define && define.amd && define("laya.core", ["require", "exports"], function (t, e) {
    "use strict";
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    for (var i in Laya) {
        var n = Laya[i];
        n && n.__isclass && (e[i] = n);
    }
}), function (t, e, i) {
    i.un, i.uns;
    var n = i.static, s = i.class, a = i.getset, r = (i.__newvec, laya.display.Animation), o = laya.utils.Browser, h = laya.utils.ClassUtils, l = laya.filters.ColorFilter, c = laya.utils.Ease, u = laya.events.Event, d = (laya.events.EventDispatcher,
        laya.display.css.Font), _ = laya.display.FrameAnimation, f = laya.display.Graphics, p = laya.utils.Handler, g = laya.net.HttpRequest, v = laya.display.Input, m = laya.net.Loader, y = laya.net.LocalStorage, w = (laya.display.Node,
            laya.maths.Point), x = laya.maths.Rectangle, b = laya.renders.Render, L = laya.display.Sprite, C = (laya.display.Stage,
                laya.display.Text), M = laya.resource.Texture, T = laya.utils.TimeLine, S = laya.utils.Tween, A = laya.utils.Utils, I = laya.utils.WeakObject;
    i.interface("laya.ui.IItem"), i.interface("laya.ui.IRender"), i.interface("laya.ui.ISelect"),
        i.interface("laya.ui.IComponent"), i.interface("laya.ui.IBox", "IComponent");
    var E = function () {
        function t() {
            this.enable = !1, this.top = NaN, this.bottom = NaN, this.left = NaN, this.right = NaN,
                this.centerX = NaN, this.centerY = NaN, this.anchorX = NaN, this.anchorY = NaN;
        }
        return s(t, "laya.ui.LayoutStyle"), n(t, ["EMPTY", function () {
            return this.EMPTY = new t();
        }]), t;
    }(), R = function () {
        function t() { }
        return s(t, "laya.ui.Styles"), t.labelColor = "#000000", t.buttonStateNum = 3, t.scrollBarMinNum = 15,
            t.scrollBarDelayTime = 500, n(t, ["defaultSizeGrid", function () {
                return this.defaultSizeGrid = [4, 4, 4, 4, 0];
            }, "labelPadding", function () {
                return this.labelPadding = [2, 2, 2, 2];
            }, "inputLabelPadding", function () {
                return this.inputLabelPadding = [1, 1, 1, 3];
            }, "buttonLabelColors", function () {
                return this.buttonLabelColors = ["#32556b", "#32cc6b", "#ff0000", "#C0C0C0"];
            }, "comboBoxItemColors", function () {
                return this.comboBoxItemColors = ["#5e95b6", "#ffffff", "#000000", "#8fa4b1", "#ffffff"];
            }]), t;
    }(), P = function () {
        function t() { }
        return s(t, "laya.ui.UIUtils"), t.fillArray = function (t, e, i) {
            var n = t.concat();
            if (e) for (var s = e.split(","), a = 0, r = Math.min(n.length, s.length); a < r; a++) {
                var o = s[a];
                n[a] = "true" == o || "false" != o && o, null != i && (n[a] = i(o));
            }
            return n;
        }, t.toColor = function (t) {
            return A.toHexColor(t);
        }, t.gray = function (e, i) {
            void 0 === i && (i = !0), i ? t.addFilter(e, t.grayFilter) : t.clearFilter(e, l);
        }, t.addFilter = function (t, e) {
            var i = t.filters || [];
            i.push(e), t.filters = i;
        }, t.clearFilter = function (t, e) {
            var n = t.filters;
            if (null != n && n.length > 0) {
                for (var s = n.length - 1; s > -1; s--) {
                    var a = n[s];
                    i.__typeof(a, e) && n.splice(s, 1);
                }
                t.filters = n;
            }
        }, t._getReplaceStr = function (e) {
            return t.escapeSequence[e];
        }, t.adptString = function (e) {
            return e.replace(/\\(\w)/g, t._getReplaceStr);
        }, t.getBindFun = function (e) {
            var n = t._funMap.get(e);
            if (null == n) {
                var s = '"' + e + '"', a = "(function(data){if(data==null)return;with(data){try{\nreturn " + (s = s.replace(/^"\${|}"$/g, "").replace(/\${/g, '"+').replace(/}/g, '+"')) + "\n}catch(e){}}})";
                n = i._runScript(a), t._funMap.set(e, n);
            }
            return n;
        }, n(t, ["grayFilter", function () {
            return this.grayFilter = new l([.3086, .6094, .082, 0, 0, .3086, .6094, .082, 0, 0, .3086, .6094, .082, 0, 0, 0, 0, 0, 1, 0]);
        }, "escapeSequence", function () {
            return this.escapeSequence = {
                "\\n": "\n",
                "\\t": "\t"
            };
        }, "_funMap", function () {
            return this._funMap = new I();
        }]), t;
    }(), D = function () {
        function t() { }
        return s(t, "UIConfig"), t.touchScrollEnable = !0, t.mouseWheelEnable = !0, t.showButtons = !0,
            t.popupBgColor = "#000000", t.popupBgAlpha = .5, t.closeDialogOnSide = !0, t;
    }(), k = function (t) {
        function e() {
            this.autoCacheCmd = !0, this._width = 0, this._height = 0, this._source = null,
                this._sizeGrid = null, this._isChanged = !1, this._offset = null, e.__super.call(this);
        }
        s(e, "laya.ui.AutoBitmap", t);
        var n = e.prototype;
        return n.destroy = function () {
            t.prototype.destroy.call(this), this._source = null, this._sizeGrid = null, this._offset = null;
        }, n._setChanged = function () {
            this._isChanged || (this._isChanged = !0, i.timer.callLater(this, this.changeSource));
        }, n.changeSource = function () {
            this._isChanged = !1;
            var t = this._source;
            if (t && t.bitmap) {
                var i = this.width, n = this.height, s = this._sizeGrid, a = t.sourceWidth, r = t.sourceHeight;
                if (!s || a === i && r === n) this.clear(), this.drawTexture(t, this._offset ? this._offset[0] : 0, this._offset ? this._offset[1] : 0, i, n); else {
                    t.$_GID || (t.$_GID = A.getGID());
                    var o = t.$_GID + "." + i + "." + n + "." + s.join(".");
                    if (A.isOKCmdList(I.I.get(o))) return void (this.cmds = I.I.get(o));
                    this.clear();
                    var h = s[0], l = s[1], c = s[2], u = s[3], d = s[4], _ = !1;
                    if (i == a && (u = l = 0), n == r && (h = c = 0), u + l > i) {
                        var f = i;
                        _ = !0, i = u + l, this.save(), this.clipRect(0, 0, f, n);
                    }
                    u && h && this.drawTexture(e.getTexture(t, 0, 0, u, h), 0, 0, u, h), l && h && this.drawTexture(e.getTexture(t, a - l, 0, l, h), i - l, 0, l, h),
                        u && c && this.drawTexture(e.getTexture(t, 0, r - c, u, c), 0, n - c, u, c), l && c && this.drawTexture(e.getTexture(t, a - l, r - c, l, c), i - l, n - c, l, c),
                        h && this.drawBitmap(d, e.getTexture(t, u, 0, a - u - l, h), u, 0, i - u - l, h),
                        c && this.drawBitmap(d, e.getTexture(t, u, r - c, a - u - l, c), u, n - c, i - u - l, c),
                        u && this.drawBitmap(d, e.getTexture(t, 0, h, u, r - h - c), 0, h, u, n - h - c),
                        l && this.drawBitmap(d, e.getTexture(t, a - l, h, l, r - h - c), i - l, h, l, n - h - c),
                        this.drawBitmap(d, e.getTexture(t, u, h, a - u - l, r - h - c), u, h, i - u - l, n - h - c),
                        _ && this.restore(), this.autoCacheCmd && !b.isConchApp && I.I.set(o, this.cmds);
                }
                this._repaint();
            }
        }, n.drawBitmap = function (t, e, i, n, s, a) {
            void 0 === s && (s = 0), void 0 === a && (a = 0), s < .1 || a < .1 || (!t || e.width == s && e.height == a ? this.drawTexture(e, i, n, s, a) : this.fillTexture(e, i, n, s, a));
        }, n.clear = function (e) {
            void 0 === e && (e = !0), t.prototype.clear.call(this, !1);
        }, a(0, n, "sizeGrid", function () {
            return this._sizeGrid;
        }, function (t) {
            this._sizeGrid = t, this._setChanged();
        }), a(0, n, "width", function () {
            return this._width ? this._width : this._source ? this._source.sourceWidth : 0;
        }, function (t) {
            this._width != t && (this._width = t, this._setChanged());
        }), a(0, n, "height", function () {
            return this._height ? this._height : this._source ? this._source.sourceHeight : 0;
        }, function (t) {
            this._height != t && (this._height = t, this._setChanged());
        }), a(0, n, "source", function () {
            return this._source;
        }, function (t) {
            t ? (this._source = t, this._setChanged()) : (this._source = null, this.clear());
        }), e.getTexture = function (t, e, i, n, s) {
            n <= 0 && (n = 1), s <= 0 && (s = 1), t.$_GID || (t.$_GID = A.getGID());
            var a = t.$_GID + "." + e + "." + i + "." + n + "." + s, r = I.I.get(a);
            return r && r.source || (r = M.createFromTexture(t, e, i, n, s), I.I.set(a, r)),
                r;
        }, e;
    }(f), F = (function (t) {
        function e() {
            e.__super.call(this);
        }
        s(e, "laya.ui.UIEvent", u), e.SHOW_TIP = "showtip", e.HIDE_TIP = "hidetip";
    }(), function (t) {
        function e() {
            this._comXml = null, this._dataSource = null, this._toolTip = null, this._tag = null,
                this._disabled = !1, this._gray = !1, this.layoutEnabled = !0, e.__super.call(this),
                this._layout = E.EMPTY, this.preinitialize(), this.createChildren(), this.initialize();
        }
        s(e, "laya.ui.Component", t);
        var n = e.prototype;
        return i.imps(n, {
            "laya.ui.IComponent": !0
        }), n.destroy = function (e) {
            void 0 === e && (e = !0), t.prototype.destroy.call(this, e), this._dataSource = this._layout = null,
                this._tag = null, this._toolTip = null;
        }, n.preinitialize = function () { }, n.createChildren = function () { }, n.initialize = function () { },
            n.callLater = function (t, e) {
                i.timer.callLater(this, t, e);
            }, n.runCallLater = function (t) {
                i.timer.runCallLater(this, t);
            }, n.commitMeasure = function () { }, n.changeSize = function () {
                this.event("resize"), this._layout.enable && (this.resetLayoutX(), this.resetLayoutY());
            }, n.getLayout = function () {
                return this._layout === E.EMPTY && (this._layout = new E()), this._layout;
            }, n._setLayoutEnabled = function (t) {
                this._layout && this._layout.enable != t && (this._layout.enable = t, this.on("added", this, this.onAdded),
                    this.on("removed", this, this.onRemoved), this.parent && this.onAdded());
            }, n.onRemoved = function () {
                this.parent.off("resize", this, this.onCompResize);
            }, n.onAdded = function () {
                this.parent.on("resize", this, this.onCompResize), this.resetLayoutX(), this.resetLayoutY();
            }, n.onCompResize = function () {
                this._layout && this._layout.enable && (this.resetLayoutX(), this.resetLayoutY());
            }, n.resetLayoutX = function () {
                var t = this._layout;
                if (isNaN(t.anchorX) || (this.pivotX = t.anchorX * this.width), this.layoutEnabled) {
                    var e = this.parent;
                    e && (isNaN(t.centerX) ? isNaN(t.left) ? isNaN(t.right) || (this.x = Math.round(e.width - this.displayWidth - t.right + this.pivotX * this.scaleX)) : (this.x = Math.round(t.left + this.pivotX * this.scaleX),
                        isNaN(t.right) || (this.width = (e._width - t.left - t.right) / (this.scaleX || .01))) : this.x = Math.round(.5 * (e.width - this.displayWidth) + t.centerX + this.pivotX * this.scaleX));
                }
            }, n.resetLayoutY = function () {
                var t = this._layout;
                if (isNaN(t.anchorY) || (this.pivotY = t.anchorY * this.height), this.layoutEnabled) {
                    var e = this.parent;
                    e && (isNaN(t.centerY) ? isNaN(t.top) ? isNaN(t.bottom) || (this.y = Math.round(e.height - this.displayHeight - t.bottom + this.pivotY * this.scaleY)) : (this.y = Math.round(t.top + this.pivotY * this.scaleY),
                        isNaN(t.bottom) || (this.height = (e._height - t.top - t.bottom) / (this.scaleY || .01))) : this.y = Math.round(.5 * (e.height - this.displayHeight) + t.centerY + this.pivotY * this.scaleY));
                }
            }, n.onMouseOver = function (t) {
                i.stage.event("showtip", this._toolTip);
            }, n.onMouseOut = function (t) {
                i.stage.event("hidetip", this._toolTip);
            }, n._childChanged = function (e) {
                this.callLater(this.changeSize), t.prototype._childChanged.call(this, e);
            }, a(0, n, "displayWidth", function () {
                return this.width * this.scaleX;
            }), a(0, n, "width", function () {
                return this._width ? this._width : this.measureWidth;
            }, function (t) {
                this._width != t && (this._width = t, this.conchModel && this.conchModel.size(this._width, this._height),
                    this.callLater(this.changeSize), !this._layout.enable || isNaN(this._layout.centerX) && isNaN(this._layout.right) && isNaN(this._layout.anchorX) || this.resetLayoutX());
            }), a(0, n, "measureWidth", function () {
                var t = 0;
                this.commitMeasure();
                for (var e = this.numChildren - 1; e > -1; e--) {
                    var i = this.getChildAt(e);
                    i.visible && (t = Math.max(i.x + i.width * i.scaleX, t));
                }
                return t;
            }), a(0, n, "displayHeight", function () {
                return this.height * this.scaleY;
            }), a(0, n, "height", function () {
                return this._height ? this._height : this.measureHeight;
            }, function (t) {
                this._height != t && (this._height = t, this.conchModel && this.conchModel.size(this._width, this._height),
                    this.callLater(this.changeSize), !this._layout.enable || isNaN(this._layout.centerY) && isNaN(this._layout.bottom) && isNaN(this._layout.anchorY) || this.resetLayoutY());
            }), a(0, n, "dataSource", function () {
                return this._dataSource;
            }, function (t) {
                this._dataSource = t;
                for (var e in this._dataSource) this.hasOwnProperty(e) && "function" != typeof this[e] && (this[e] = this._dataSource[e]);
            }), a(0, n, "scaleY", t.prototype._$get_scaleY, function (t) {
                i.superGet(L, this, "scaleY") != t && (i.superSet(L, this, "scaleY", t), this.callLater(this.changeSize),
                    this._layout.enable && this.resetLayoutY());
            }), a(0, n, "measureHeight", function () {
                var t = 0;
                this.commitMeasure();
                for (var e = this.numChildren - 1; e > -1; e--) {
                    var i = this.getChildAt(e);
                    i.visible && (t = Math.max(i.y + i.height * i.scaleY, t));
                }
                return t;
            }), a(0, n, "scaleX", t.prototype._$get_scaleX, function (t) {
                i.superGet(L, this, "scaleX") != t && (i.superSet(L, this, "scaleX", t), this.callLater(this.changeSize),
                    this._layout.enable && this.resetLayoutX());
            }), a(0, n, "top", function () {
                return this._layout.top;
            }, function (t) {
                t != this._layout.top && (this.getLayout().top = t, this._setLayoutEnabled(!0)),
                    this.resetLayoutY();
            }), a(0, n, "bottom", function () {
                return this._layout.bottom;
            }, function (t) {
                t != this._layout.bottom && (this.getLayout().bottom = t, this._setLayoutEnabled(!0)),
                    this.resetLayoutY();
            }), a(0, n, "left", function () {
                return this._layout.left;
            }, function (t) {
                t != this._layout.left && (this.getLayout().left = t, this._setLayoutEnabled(!0)),
                    this.resetLayoutX();
            }), a(0, n, "right", function () {
                return this._layout.right;
            }, function (t) {
                t != this._layout.right && (this.getLayout().right = t, this._setLayoutEnabled(!0)),
                    this.resetLayoutX();
            }), a(0, n, "centerX", function () {
                return this._layout.centerX;
            }, function (t) {
                t != this._layout.centerX && (this.getLayout().centerX = t, this._setLayoutEnabled(!0)),
                    this.resetLayoutX();
            }), a(0, n, "centerY", function () {
                return this._layout.centerY;
            }, function (t) {
                t != this._layout.centerY && (this.getLayout().centerY = t, this._setLayoutEnabled(!0)),
                    this.resetLayoutY();
            }), a(0, n, "anchorX", function () {
                return this._layout.anchorX;
            }, function (t) {
                t != this._layout.anchorX && (this.getLayout().anchorX = t, this._setLayoutEnabled(!0)),
                    this.resetLayoutX();
            }), a(0, n, "anchorY", function () {
                return this._layout.anchorY;
            }, function (t) {
                t != this._layout.anchorY && (this.getLayout().anchorY = t, this._setLayoutEnabled(!0)),
                    this.resetLayoutY();
            }), a(0, n, "tag", function () {
                return this._tag;
            }, function (t) {
                this._tag = t;
            }), a(0, n, "toolTip", function () {
                return this._toolTip;
            }, function (t) {
                this._toolTip != t && (this._toolTip = t, null != t ? (this.on("mouseover", this, this.onMouseOver),
                    this.on("mouseout", this, this.onMouseOut)) : (this.off("mouseover", this, this.onMouseOver),
                        this.off("mouseout", this, this.onMouseOut)));
            }), a(0, n, "comXml", function () {
                return this._comXml;
            }, function (t) {
                this._comXml = t;
            }), a(0, n, "gray", function () {
                return this._gray;
            }, function (t) {
                t !== this._gray && (this._gray = t, P.gray(this, t));
            }), a(0, n, "disabled", function () {
                return this._disabled;
            }, function (t) {
                t !== this._disabled && (this.gray = this._disabled = t, this.mouseEnabled = !t);
            }), e;
    }(L)), B = function (t) {
        function e() {
            this.lockLayer = null, this.popupEffect = function (t) {
                t.scale(1, 1), S.from(t, {
                    x: i.stage.width / 2,
                    y: i.stage.height / 2,
                    scaleX: 0,
                    scaleY: 0
                }, 300, c.backOut, p.create(this, this.doOpen, [t]));
            }, this.closeEffect = function (t, e) {
                S.to(t, {
                    x: i.stage.width / 2,
                    y: i.stage.height / 2,
                    scaleX: 0,
                    scaleY: 0
                }, 300, c.strongOut, p.create(this, this.doClose, [t, e]));
            }, e.__super.call(this), this.maskLayer = new L(), this.popupEffectHandler = new p(this, this.popupEffect),
                this.closeEffectHandler = new p(this, this.closeEffect), this.mouseEnabled = this.maskLayer.mouseEnabled = !0,
                this.zOrder = 1e3, i.stage.addChild(this), i.stage.on("resize", this, this._onResize),
                D.closeDialogOnSide && this.maskLayer.on("click", this, this._closeOnSide), this._onResize(null);
        }
        s(e, "laya.ui.DialogManager", L);
        var n = e.prototype;
        return n._closeOnSide = function () {
            var t = this.getChildAt(this.numChildren - 1);
            t instanceof laya.ui.Dialog && t.close("side");
        }, n.setLockView = function (t) {
            this.lockLayer || (this.lockLayer = new N(), this.lockLayer.mouseEnabled = !0, this.lockLayer.size(i.stage.width, i.stage.height)),
                this.lockLayer.removeChildren(), t && (t.centerX = t.centerY = 0, this.lockLayer.addChild(t));
        }, n._onResize = function (t) {
            var e = this.maskLayer.width = i.stage.width, n = this.maskLayer.height = i.stage.height;
            this.lockLayer && this.lockLayer.size(e, n), this.maskLayer.graphics.clear(), this.maskLayer.graphics.drawRect(0, 0, e, n, D.popupBgColor),
                this.maskLayer.alpha = D.popupBgAlpha;
            for (var s = this.numChildren - 1; s > -1; s--) {
                var a = this.getChildAt(s);
                a.popupCenter && this._centerDialog(a);
            }
        }, n._centerDialog = function (t) {
            t.x = Math.round((i.stage.width - t.width >> 1) + t.pivotX), t.y = Math.round((i.stage.height - t.height >> 1) + t.pivotY);
        }, n.open = function (t, e, i) {
            void 0 === e && (e = !1), void 0 === i && (i = !1), e && this._closeAll(), t.popupCenter && this._centerDialog(t),
                this.addChild(t), (t.isModal || this._$P.hasZorder) && this.timer.callLater(this, this._checkMask),
                i && null != t.popupEffect ? t.popupEffect.runWith(t) : this.doOpen(t), this.event("open");
        }, n.doOpen = function (t) {
            t.onOpened();
        }, n.lock = function (t) {
            this.lockLayer && (t ? this.addChild(this.lockLayer) : this.lockLayer.removeSelf());
        }, n.close = function (t, e, i) {
            void 0 === i && (i = !1), i && null != t.closeEffect ? t.closeEffect.runWith([t, e]) : this.doClose(t, e),
                this.event("close");
        }, n.doClose = function (t, e) {
            t.removeSelf(), t.isModal && this._checkMask(), t.closeHandler && t.closeHandler.runWith(e),
                t.onClosed(e);
        }, n.closeAll = function () {
            this._closeAll(), this.event("close");
        }, n._closeAll = function () {
            for (var t = this.numChildren - 1; t > -1; t--) {
                var e = this.getChildAt(t);
                e && null != e.close && this.doClose(e);
            }
        }, n.getDialogsByGroup = function (t) {
            for (var e = [], i = this.numChildren - 1; i > -1; i--) {
                var n = this.getChildAt(i);
                n && n.group === t && e.push(n);
            }
            return e;
        }, n.closeByGroup = function (t) {
            for (var e = [], i = this.numChildren - 1; i > -1; i--) {
                var n = this.getChildAt(i);
                n && n.group === t && (n.close(), e.push(n));
            }
            return e;
        }, n._checkMask = function () {
            this.maskLayer.removeSelf();
            for (var t = this.numChildren - 1; t > -1; t--) {
                var e = this.getChildAt(t);
                if (e && e.isModal) return void this.addChildAt(this.maskLayer, t);
            }
        }, e;
    }(), O = function (t) {
        function e(t) {
            this._bitmap = null, this._skin = null, this._group = null, e.__super.call(this),
                this.skin = t;
        }
        s(e, "laya.ui.Image", t);
        var n = e.prototype;
        return n.destroy = function (e) {
            void 0 === e && (e = !0), t.prototype.destroy.call(this, !0), this._bitmap && this._bitmap.destroy(),
                this._bitmap = null;
        }, n.dispose = function () {
            this.destroy(!0), i.loader.clearRes(this._skin);
        }, n.createChildren = function () {
            this.graphics = this._bitmap = new k(), this._bitmap.autoCacheCmd = !1;
        }, n.setSource = function (t, e) {
            t === this._skin && e && (this.source = e, this.onCompResize());
        }, a(0, n, "source", function () {
            return this._bitmap.source;
        }, function (t) {
            this._bitmap && (this._bitmap.source = t, this.event("loaded"), this.repaint());
        }), a(0, n, "dataSource", t.prototype._$get_dataSource, function (t) {
            this._dataSource = t, "string" == typeof t ? this.skin = t : i.superSet(F, this, "dataSource", t);
        }), a(0, n, "measureHeight", function () {
            return this._bitmap.height;
        }), a(0, n, "skin", function () {
            return this._skin;
        }, function (t) {
            if (this._skin != t) if (this._skin = t, t) {
                var e = m.getRes(t);
                e ? (this.source = e, this.onCompResize()) : i.loader.load(this._skin, p.create(this, this.setSource, [this._skin]), null, "image", 1, !0, this._group);
            } else this.source = null;
        }), a(0, n, "group", function () {
            return this._group;
        }, function (t) {
            t && this._skin && m.setGroup(this._skin, t), this._group = t;
        }), a(0, n, "sizeGrid", function () {
            return this._bitmap.sizeGrid ? this._bitmap.sizeGrid.join(",") : null;
        }, function (t) {
            this._bitmap.sizeGrid = P.fillArray(R.defaultSizeGrid, t, Number);
        }), a(0, n, "measureWidth", function () {
            return this._bitmap.width;
        }), a(0, n, "width", t.prototype._$get_width, function (t) {
            i.superSet(F, this, "width", t), this._bitmap.width = 0 == t ? 1e-7 : t;
        }), a(0, n, "height", t.prototype._$get_height, function (t) {
            i.superSet(F, this, "height", t), this._bitmap.height = 0 == t ? 1e-7 : t;
        }), e;
    }(F), N = function (t) {
        function e() {
            e.__super.call(this);
        }
        s(e, "laya.ui.Box", t);
        var n = e.prototype;
        return i.imps(n, {
            "laya.ui.IBox": !0
        }), a(0, n, "dataSource", t.prototype._$get_dataSource, function (t) {
            this._dataSource = t;
            for (var e in t) {
                var i = this.getChildByName(e);
                i ? i.dataSource = t[e] : this.hasOwnProperty(e) && "function" != typeof this[e] && (this[e] = t[e]);
            }
        }), e;
    }(F), G = function (t) {
        function e(t, i) {
            this.toggle = !1, this._bitmap = null, this._text = null, this._strokeColors = null,
                this._state = 0, this._selected = !1, this._skin = null, this._autoSize = !0, this._sources = null,
                this._clickHandler = null, this._stateChanged = !1, e.__super.call(this), this._labelColors = R.buttonLabelColors,
                this._stateNum = R.buttonStateNum, void 0 === i && (i = ""), this.skin = t, this.label = i;
        }
        s(e, "laya.ui.Button", t);
        var r = e.prototype;
        return i.imps(r, {
            "laya.ui.ISelect": !0
        }), r.destroy = function (e) {
            void 0 === e && (e = !0), t.prototype.destroy.call(this, e), this._bitmap && this._bitmap.destroy(),
                this._text && this._text.destroy(e), this._bitmap = null, this._text = null, this._clickHandler = null,
                this._labelColors = this._sources = this._strokeColors = null;
        }, r.createChildren = function () {
            this.graphics = this._bitmap = new k();
        }, r.createText = function () {
            this._text || (this._text = new C(), this._text.overflow = C.HIDDEN, this._text.align = "center",
                this._text.valign = "middle", this._text.width = this._width, this._text.height = this._height);
        }, r.initialize = function () {
            1 !== this._mouseEnableState && (this.mouseEnabled = !0, this._setBit(2, !0)), this._createListener("mouseover", this, this.onMouse, null, !1, !1),
                this._createListener("mouseout", this, this.onMouse, null, !1, !1), this._createListener("mousedown", this, this.onMouse, null, !1, !1),
                this._createListener("mouseup", this, this.onMouse, null, !1, !1), this._createListener("click", this, this.onMouse, null, !1, !1);
        }, r.onMouse = function (t) {
            if (!1 !== this.toggle || !this._selected) return "click" === t.type ? (this.toggle && (this.selected = !this._selected),
                void (this._clickHandler && this._clickHandler.run())) : void (!this._selected && (this.state = e.stateMap[t.type]));
        }, r.changeClips = function () {
            var t = m.getRes(this._skin);
            if (t) {
                var e = t.sourceWidth, i = t.sourceHeight / this._stateNum;
                t.$_GID || (t.$_GID = A.getGID());
                var n = t.$_GID + "-" + this._stateNum, s = I.I.get(n);
                if (A.isOkTextureList(s) || (s = null), s) this._sources = s; else {
                    if (this._sources = [], 1 === this._stateNum) this._sources.push(t); else for (var a = 0; a < this._stateNum; a++) this._sources.push(M.createFromTexture(t, 0, i * a, e, i));
                    I.I.set(n, this._sources);
                }
                this._autoSize ? (this._bitmap.width = this._width || e, this._bitmap.height = this._height || i,
                    this._text && (this._text.width = this._bitmap.width, this._text.height = this._bitmap.height)) : this._text && (this._text.x = e);
            } else console.log("lose skin", this._skin);
        }, r.changeState = function () {
            this._stateChanged = !1, this.runCallLater(this.changeClips);
            var t = this._state < this._stateNum ? this._state : this._stateNum - 1;
            this._sources && (this._bitmap.source = this._sources[t]), this.label && (this._text.color = this._labelColors[t],
                this._strokeColors && (this._text.strokeColor = this._strokeColors[t]));
        }, r._setStateChanged = function () {
            this._stateChanged || (this._stateChanged = !0, this.callLater(this.changeState));
        }, a(0, r, "labelStrokeColor", function () {
            return this.createText(), this._text.strokeColor;
        }, function (t) {
            this.createText(), this._text.strokeColor = t;
        }), a(0, r, "measureHeight", function () {
            return this.runCallLater(this.changeClips), this._text ? Math.max(this._bitmap.height, this._text.height) : this._bitmap.height;
        }), a(0, r, "skin", function () {
            return this._skin;
        }, function (t) {
            this._skin != t && (this._skin = t, this.callLater(this.changeClips), this._setStateChanged());
        }), a(0, r, "state", function () {
            return this._state;
        }, function (t) {
            this._state != t && (this._state = t, this._setStateChanged());
        }), a(0, r, "text", function () {
            return this.createText(), this._text;
        }), a(0, r, "stateNum", function () {
            return this._stateNum;
        }, function (t) {
            "string" == typeof t && (t = parseInt(t)), this._stateNum != t && (this._stateNum = t < 1 ? 1 : t > 3 ? 3 : t,
                this.callLater(this.changeClips));
        }), a(0, r, "strokeColors", function () {
            return this._strokeColors ? this._strokeColors.join(",") : "";
        }, function (t) {
            this._strokeColors = P.fillArray(R.buttonLabelColors, t, String), this._setStateChanged();
        }), a(0, r, "labelColors", function () {
            return this._labelColors.join(",");
        }, function (t) {
            this._labelColors = P.fillArray(R.buttonLabelColors, t, String), this._setStateChanged();
        }), a(0, r, "measureWidth", function () {
            return this.runCallLater(this.changeClips), this._autoSize ? this._bitmap.width : (this.runCallLater(this.changeState),
                this._bitmap.width + (this._text ? this._text.width : 0));
        }), a(0, r, "label", function () {
            return this._text ? this._text.text : null;
        }, function (t) {
            (this._text || t) && (this.createText(), this._text.text != t && (t && !this._text.parent && this.addChild(this._text),
                this._text.text = (t + "").replace(/\\n/g, "\n"), this._setStateChanged()));
        }), a(0, r, "selected", function () {
            return this._selected;
        }, function (t) {
            this._selected != t && (this._selected = t, this.state = this._selected ? 2 : 0,
                this.event("change"));
        }), a(0, r, "labelPadding", function () {
            return this.createText(), this._text.padding.join(",");
        }, function (t) {
            this.createText(), this._text.padding = P.fillArray(R.labelPadding, t, Number);
        }), a(0, r, "labelSize", function () {
            return this.createText(), this._text.fontSize;
        }, function (t) {
            this.createText(), this._text.fontSize = t;
        }), a(0, r, "labelStroke", function () {
            return this.createText(), this._text.stroke;
        }, function (t) {
            this.createText(), this._text.stroke = t;
        }), a(0, r, "labelBold", function () {
            return this.createText(), this._text.bold;
        }, function (t) {
            this.createText(), this._text.bold = t;
        }), a(0, r, "labelFont", function () {
            return this.createText(), this._text.font;
        }, function (t) {
            this.createText(), this._text.font = t;
        }), a(0, r, "labelAlign", function () {
            return this.createText(), this._text.align;
        }, function (t) {
            this.createText(), this._text.align = t;
        }), a(0, r, "clickHandler", function () {
            return this._clickHandler;
        }, function (t) {
            this._clickHandler = t;
        }), a(0, r, "sizeGrid", function () {
            return this._bitmap.sizeGrid ? this._bitmap.sizeGrid.join(",") : null;
        }, function (t) {
            this._bitmap.sizeGrid = P.fillArray(R.defaultSizeGrid, t, Number);
        }), a(0, r, "width", t.prototype._$get_width, function (t) {
            i.superSet(F, this, "width", t), this._autoSize && (this._bitmap.width = t, this._text && (this._text.width = t));
        }), a(0, r, "height", t.prototype._$get_height, function (t) {
            i.superSet(F, this, "height", t), this._autoSize && (this._bitmap.height = t, this._text && (this._text.height = t));
        }), a(0, r, "dataSource", t.prototype._$get_dataSource, function (t) {
            this._dataSource = t, "number" == typeof t || "string" == typeof t ? this.label = t + "" : i.superSet(F, this, "dataSource", t);
        }), a(0, r, "iconOffset", function () {
            return this._bitmap._offset ? this._bitmap._offset.join(",") : null;
        }, function (t) {
            this._bitmap._offset = t ? P.fillArray([1, 1], t, Number) : [];
        }), n(e, ["stateMap", function () {
            return this.stateMap = {
                mouseup: 0,
                mouseover: 1,
                mousedown: 2,
                mouseout: 0
            };
        }]), e;
    }(F), H = function (t) {
        function e(t, i, n) {
            this._sources = null, this._bitmap = null, this._skin = null, this._clipX = 1, this._clipY = 1,
                this._clipWidth = 0, this._clipHeight = 0, this._autoPlay = !1, this._interval = 50,
                this._complete = null, this._isPlaying = !1, this._index = 0, this._clipChanged = !1,
                this._group = null, this._toIndex = -1, e.__super.call(this), void 0 === i && (i = 1),
                void 0 === n && (n = 1), this._clipX = i, this._clipY = n, this.skin = t;
        }
        s(e, "laya.ui.Clip", t);
        var n = e.prototype;
        return n.destroy = function (e) {
            void 0 === e && (e = !0), t.prototype.destroy.call(this, !0), this._bitmap && this._bitmap.destroy(),
                this._bitmap = null, this._sources = null;
        }, n.dispose = function () {
            this.destroy(!0), i.loader.clearRes(this._skin);
        }, n.createChildren = function () {
            this.graphics = this._bitmap = new k();
        }, n._onDisplay = function (t) {
            this._isPlaying ? this._displayedInStage ? this.play() : this.stop() : this._autoPlay && this.play();
        }, n.changeClip = function () {
            if (this._clipChanged = !1, this._skin) {
                var t = m.getRes(this._skin);
                t ? this.loadComplete(this._skin, t) : i.loader.load(this._skin, p.create(this, this.loadComplete, [this._skin]));
            }
        }, n.loadComplete = function (t, e) {
            if (t === this._skin && e) {
                var i = this._clipWidth || Math.ceil(e.sourceWidth / this._clipX), n = this._clipHeight || Math.ceil(e.sourceHeight / this._clipY), s = this._skin + i + n, a = I.I.get(s);
                if (A.isOkTextureList(a) || (a = null), a) this._sources = a; else {
                    this._sources = [];
                    for (var r = 0; r < this._clipY; r++) for (var o = 0; o < this._clipX; o++) this._sources.push(M.createFromTexture(e, i * o, n * r, i, n));
                    I.I.set(s, this._sources);
                }
                this.index = this._index, this.event("loaded"), this.onCompResize();
            }
        }, n.play = function (t, e) {
            void 0 === t && (t = 0), void 0 === e && (e = -1), this._isPlaying = !0, this.index = t,
                this._toIndex = e, this._index++, i.timer.loop(this.interval, this, this._loop),
                this.on("display", this, this._onDisplay), this.on("undisplay", this, this._onDisplay);
        }, n._loop = function () {
            this._style.visible && this._sources && (this._index++, this._toIndex > -1 && this._index >= this._toIndex ? this.stop() : this._index >= this._sources.length && (this._index = 0),
                this.index = this._index);
        }, n.stop = function () {
            this._isPlaying = !1, i.timer.clear(this, this._loop), this.event("complete");
        }, n._setClipChanged = function () {
            this._clipChanged || (this._clipChanged = !0, this.callLater(this.changeClip));
        }, a(0, n, "interval", function () {
            return this._interval;
        }, function (t) {
            this._interval != t && (this._interval = t, this._isPlaying && this.play());
        }), a(0, n, "skin", function () {
            return this._skin;
        }, function (t) {
            this._skin != t && (this._skin = t, t ? this._setClipChanged() : this._bitmap.source = null);
        }), a(0, n, "sources", function () {
            return this._sources;
        }, function (t) {
            this._sources = t, this.index = this._index, this.event("loaded");
        }), a(0, n, "clipX", function () {
            return this._clipX;
        }, function (t) {
            this._clipX = t || 1, this._setClipChanged();
        }), a(0, n, "clipY", function () {
            return this._clipY;
        }, function (t) {
            this._clipY = t || 1, this._setClipChanged();
        }), a(0, n, "total", function () {
            return this.runCallLater(this.changeClip), this._sources ? this._sources.length : 0;
        }), a(0, n, "clipWidth", function () {
            return this._clipWidth;
        }, function (t) {
            this._clipWidth = t, this._setClipChanged();
        }), a(0, n, "sizeGrid", function () {
            return this._bitmap.sizeGrid ? this._bitmap.sizeGrid.join(",") : null;
        }, function (t) {
            this._bitmap.sizeGrid = P.fillArray(R.defaultSizeGrid, t, Number);
        }), a(0, n, "group", function () {
            return this._group;
        }, function (t) {
            t && this._skin && m.setGroup(this._skin, t), this._group = t;
        }), a(0, n, "clipHeight", function () {
            return this._clipHeight;
        }, function (t) {
            this._clipHeight = t, this._setClipChanged();
        }), a(0, n, "width", t.prototype._$get_width, function (t) {
            i.superSet(F, this, "width", t), this._bitmap.width = t;
        }), a(0, n, "height", t.prototype._$get_height, function (t) {
            i.superSet(F, this, "height", t), this._bitmap.height = t;
        }), a(0, n, "measureWidth", function () {
            return this.runCallLater(this.changeClip), this._bitmap.width;
        }), a(0, n, "measureHeight", function () {
            return this.runCallLater(this.changeClip), this._bitmap.height;
        }), a(0, n, "index", function () {
            return this._index;
        }, function (t) {
            this._index = t, this._bitmap && this._sources && (this._bitmap.source = this._sources[t]),
                this.event("change");
        }), a(0, n, "autoPlay", function () {
            return this._autoPlay;
        }, function (t) {
            this._autoPlay != t && (this._autoPlay = t, t ? this.play() : this.stop());
        }), a(0, n, "isPlaying", function () {
            return this._isPlaying;
        }, function (t) {
            this._isPlaying = t;
        }), a(0, n, "dataSource", t.prototype._$get_dataSource, function (t) {
            this._dataSource = t, "number" == typeof t && Math.floor(t) == t || "string" == typeof t ? this.index = parseInt(t) : i.superSet(F, this, "dataSource", t);
        }), a(0, n, "bitmap", function () {
            return this._bitmap;
        }), e;
    }(F), z = function (t) {
        function e() {
            this.changeHandler = null, this._gridSize = 11, this._bgColor = "#ffffff", this._borderColor = "#000000",
                this._inputColor = "#000000", this._inputBgColor = "#efefef", this._colorPanel = null,
                this._colorTiles = null, this._colorBlock = null, this._colorInput = null, this._colorButton = null,
                this._colors = [], this._selectedColor = "#000000", this._panelChanged = !1, e.__super.call(this);
        }
        s(e, "laya.ui.ColorPicker", t);
        var n = e.prototype;
        return n.destroy = function (e) {
            void 0 === e && (e = !0), t.prototype.destroy.call(this, e), this._colorPanel && this._colorPanel.destroy(e),
                this._colorButton && this._colorButton.destroy(e), this._colorPanel = null, this._colorTiles = null,
                this._colorBlock = null, this._colorInput = null, this._colorButton = null, this._colors = null,
                this.changeHandler = null;
        }, n.createChildren = function () {
            this.addChild(this._colorButton = new G()), this._colorPanel = new N(), this._colorPanel.size(230, 166),
                this._colorPanel.addChild(this._colorTiles = new L()), this._colorPanel.addChild(this._colorBlock = new L()),
                this._colorPanel.addChild(this._colorInput = new v());
        }, n.initialize = function () {
            this._colorButton.on("click", this, this.onColorButtonClick), this._colorBlock.pos(5, 5),
                this._colorInput.pos(60, 5), this._colorInput.size(60, 20), this._colorInput.on("change", this, this.onColorInputChange),
                this._colorInput.on("keydown", this, this.onColorFieldKeyDown), this._colorTiles.pos(5, 30),
                this._colorTiles.on("mousemove", this, this.onColorTilesMouseMove), this._colorTiles.on("click", this, this.onColorTilesClick),
                this._colorTiles.size(20 * this._gridSize, 12 * this._gridSize), this._colorPanel.on("mousedown", this, this.onPanelMouseDown),
                this.bgColor = this._bgColor;
        }, n.onPanelMouseDown = function (t) {
            t.stopPropagation();
        }, n.changePanel = function () {
            this._panelChanged = !1;
            var t = this._colorPanel.graphics;
            t.clear(), t.drawRect(0, 0, 230, 166, this._bgColor, this._borderColor), this.drawBlock(this._selectedColor),
                this._colorInput.borderColor = this._borderColor, this._colorInput.bgColor = this._inputBgColor,
                this._colorInput.color = this._inputColor, (t = this._colorTiles.graphics).clear();
            for (var e = [0, 3355443, 6710886, 10066329, 13421772, 16777215, 16711680, 65280, 255, 16776960, 65535, 16711935], i = 0; i < 12; i++) for (var n = 0; n < 20; n++) {
                var s = 0;
                s = 0 === n ? e[i] : 1 === n ? 0 : 51 * (((3 * i + n / 6) % 3 << 0) + 3 * (i / 6 << 0)) << 16 | n % 6 * 51 << 8 | (i << 0) % 6 * 51;
                var a = P.toColor(s);
                this._colors.push(a);
                var r = n * this._gridSize, o = i * this._gridSize;
                t.drawRect(r, o, this._gridSize, this._gridSize, a, "#000000");
            }
        }, n.onColorButtonClick = function (t) {
            this._colorPanel.parent ? this.close() : this.open();
        }, n.open = function () {
            var t = this.localToGlobal(new w()), e = t.x + this._colorPanel.width <= i.stage.width ? t.x : i.stage.width - this._colorPanel.width, n = t.y + this._colorButton.height;
            n = n + this._colorPanel.height <= i.stage.height ? n : t.y - this._colorPanel.height,
                this._colorPanel.pos(e, n), this._colorPanel.zOrder = 1001, i._currentStage.addChild(this._colorPanel),
                i.stage.on("mousedown", this, this.removeColorBox);
        }, n.close = function () {
            i.stage.off("mousedown", this, this.removeColorBox), this._colorPanel.removeSelf();
        }, n.removeColorBox = function (t) {
            this.close();
        }, n.onColorFieldKeyDown = function (t) {
            13 == t.keyCode && (this._colorInput.text ? this.selectedColor = this._colorInput.text : this.selectedColor = null,
                this.close(), t.stopPropagation());
        }, n.onColorInputChange = function (t) {
            this._colorInput.text ? this.drawBlock(this._colorInput.text) : this.drawBlock("#FFFFFF");
        }, n.onColorTilesClick = function (t) {
            this.selectedColor = this.getColorByMouse(), this.close();
        }, n.onColorTilesMouseMove = function (t) {
            this._colorInput.focus = !1;
            var e = this.getColorByMouse();
            this._colorInput.text = e, this.drawBlock(e);
        }, n.getColorByMouse = function () {
            var t = this._colorTiles.getMousePoint(), e = Math.floor(t.x / this._gridSize), i = Math.floor(t.y / this._gridSize);
            return this._colors[20 * i + e];
        }, n.drawBlock = function (t) {
            var e = this._colorBlock.graphics;
            e.clear();
            var i = t || "#ffffff";
            e.drawRect(0, 0, 50, 20, i, this._borderColor), t || e.drawLine(0, 0, 50, 20, "#ff0000");
        }, n.changeColor = function () {
            var t = this.graphics;
            t.clear();
            var e = this._selectedColor || "#000000";
            t.drawRect(0, 0, this._colorButton.width, this._colorButton.height, e);
        }, n._setPanelChanged = function () {
            this._panelChanged || (this._panelChanged = !0, this.callLater(this.changePanel));
        }, a(0, n, "inputBgColor", function () {
            return this._inputBgColor;
        }, function (t) {
            this._inputBgColor = t, this._setPanelChanged();
        }), a(0, n, "selectedColor", function () {
            return this._selectedColor;
        }, function (t) {
            this._selectedColor != t && (this._selectedColor = this._colorInput.text = t, this.drawBlock(t),
                this.changeColor(), this.changeHandler && this.changeHandler.runWith(this._selectedColor),
                this.event("change", u.EMPTY.setTo("change", this, this)));
        }), a(0, n, "skin", function () {
            return this._colorButton.skin;
        }, function (t) {
            this._colorButton.skin = t, this.changeColor();
        }), a(0, n, "bgColor", function () {
            return this._bgColor;
        }, function (t) {
            this._bgColor = t, this._setPanelChanged();
        }), a(0, n, "borderColor", function () {
            return this._borderColor;
        }, function (t) {
            this._borderColor = t, this._setPanelChanged();
        }), a(0, n, "inputColor", function () {
            return this._inputColor;
        }, function (t) {
            this._inputColor = t, this._setPanelChanged();
        }), e;
    }(F), V = function (t) {
        function e(t, i) {
            this._visibleNum = 6, this._button = null, this._list = null, this._isOpen = !1,
                this._itemSize = 12, this._labels = [], this._selectedIndex = -1, this._selectHandler = null,
                this._itemHeight = NaN, this._listHeight = NaN, this._listChanged = !1, this._itemChanged = !1,
                this._scrollBarSkin = null, this._isCustomList = !1, this.itemRender = null, e.__super.call(this),
                this._itemColors = R.comboBoxItemColors, this.skin = t, this.labels = i;
        }
        s(e, "laya.ui.ComboBox", t);
        var n = e.prototype;
        return n.destroy = function (e) {
            void 0 === e && (e = !0), t.prototype.destroy.call(this, e), this._button && this._button.destroy(e),
                this._list && this._list.destroy(e), this._button = null, this._list = null, this._itemColors = null,
                this._labels = null, this._selectHandler = null;
        }, n.createChildren = function () {
            this.addChild(this._button = new G()), this._button.text.align = "left", this._button.labelPadding = "0,0,0,5",
                this._button.on("mousedown", this, this.onButtonMouseDown);
        }, n._createList = function () {
            this._list = new Q(), this._scrollBarSkin && (this._list.vScrollBarSkin = this._scrollBarSkin),
                this._setListEvent(this._list);
        }, n._setListEvent = function (t) {
            this._list.selectEnable = !0, this._list.on("mousedown", this, this.onListDown),
                this._list.mouseHandler = p.create(this, this.onlistItemMouse, null, !1), this._list.scrollBar && this._list.scrollBar.on("mousedown", this, this.onScrollBarDown);
        }, n.onListDown = function (t) {
            t.stopPropagation();
        }, n.onScrollBarDown = function (t) {
            t.stopPropagation();
        }, n.onButtonMouseDown = function (t) {
            this.callLater(this.switchTo, [!this._isOpen]);
        }, n.changeList = function () {
            this._listChanged = !1;
            var t = this.width - 2, e = this._itemColors[2];
            this._itemHeight = this._itemSize + 6, this._list.itemRender = this.itemRender || {
                type: "Box",
                child: [{
                    type: "Label",
                    props: {
                        name: "label",
                        x: 1,
                        padding: "3,3,3,3",
                        width: t,
                        height: this._itemHeight,
                        fontSize: this._itemSize,
                        color: e
                    }
                }]
            }, this._list.repeatY = this._visibleNum, this._list.refresh();
        }, n.onlistItemMouse = function (t, e) {
            var i = t.type;
            if ("mouseover" === i || "mouseout" === i) {
                if (this._isCustomList) return;
                var n = this._list.getCell(e);
                if (!n) return;
                var s = n.getChildByName("label");
                s && ("mouseover" === i ? (s.bgColor = this._itemColors[0], s.color = this._itemColors[1]) : (s.bgColor = null,
                    s.color = this._itemColors[2]));
            } else "click" === i && (this.selectedIndex = e, this.isOpen = !1);
        }, n.switchTo = function (t) {
            this.isOpen = t;
        }, n.changeOpen = function () {
            this.isOpen = !this._isOpen;
        }, n.changeItem = function () {
            if (this._itemChanged = !1, this._listHeight = this._labels.length > 0 ? Math.min(this._visibleNum, this._labels.length) * this._itemHeight : this._itemHeight,
                !this._isCustomList) {
                var t = this._list.graphics;
                t.clear(), t.drawRect(0, 0, this.width - 1, this._listHeight, this._itemColors[4], this._itemColors[3]);
            }
            var e = this._list.array || [];
            e.length = 0;
            for (var i = 0, n = this._labels.length; i < n; i++) e.push({
                label: this._labels[i]
            });
            this._list.height = this._listHeight, this._list.array = e;
        }, n.changeSelected = function () {
            this._button.label = this.selectedLabel;
        }, n._onStageMouseWheel = function (t) {
            this._list && !this._list.contains(t.target) && this.removeList(null);
        }, n.removeList = function (t) {
            i.stage.off("mousedown", this, this.removeList), i.stage.off("mousewheel", this, this._onStageMouseWheel),
                this.isOpen = !1;
        }, a(0, n, "selectedIndex", function () {
            return this._selectedIndex;
        }, function (t) {
            this._selectedIndex != t && (this._selectedIndex = t, this._labels.length > 0 ? this.changeSelected() : this.callLater(this.changeSelected),
                this.event("change", [u.EMPTY.setTo("change", this, this)]), this._selectHandler && this._selectHandler.runWith(this._selectedIndex));
        }), a(0, n, "measureHeight", function () {
            return this._button.height;
        }), a(0, n, "skin", function () {
            return this._button.skin;
        }, function (t) {
            this._button.skin != t && (this._button.skin = t, this._listChanged = !0);
        }), a(0, n, "measureWidth", function () {
            return this._button.width;
        }), a(0, n, "width", t.prototype._$get_width, function (t) {
            i.superSet(F, this, "width", t), this._button.width = this._width, this._itemChanged = !0,
                this._listChanged = !0;
        }), a(0, n, "selectedLabel", function () {
            return this._selectedIndex > -1 && this._selectedIndex < this._labels.length ? this._labels[this._selectedIndex] : null;
        }, function (t) {
            this.selectedIndex = this._labels.indexOf(t);
        }), a(0, n, "labels", function () {
            return this._labels.join(",");
        }, function (t) {
            this._labels.length > 0 && (this.selectedIndex = -1), t ? this._labels = t.split(",") : this._labels.length = 0,
                this._itemChanged = !0;
        }), a(0, n, "height", t.prototype._$get_height, function (t) {
            i.superSet(F, this, "height", t), this._button.height = this._height;
        }), a(0, n, "selectHandler", function () {
            return this._selectHandler;
        }, function (t) {
            this._selectHandler = t;
        }), a(0, n, "visibleNum", function () {
            return this._visibleNum;
        }, function (t) {
            this._visibleNum = t, this._listChanged = !0;
        }), a(0, n, "labelBold", function () {
            return this._button.text.bold;
        }, function (t) {
            this._button.text.bold = t;
        }), a(0, n, "itemColors", function () {
            return String(this._itemColors);
        }, function (t) {
            this._itemColors = P.fillArray(this._itemColors, t, String), this._listChanged = !0;
        }), a(0, n, "itemSize", function () {
            return this._itemSize;
        }, function (t) {
            this._itemSize = t, this._listChanged = !0;
        }), a(0, n, "scrollBar", function () {
            return this.list.scrollBar;
        }), a(0, n, "isOpen", function () {
            return this._isOpen;
        }, function (t) {
            if (this._isOpen != t) if (this._isOpen = t, this._button.selected = this._isOpen,
                this._isOpen) {
                this._list || this._createList(), this._listChanged && !this._isCustomList && this.changeList(),
                    this._itemChanged && this.changeItem();
                var e = this.localToGlobal(w.TEMP.setTo(0, 0)), n = e.y + this._button.height;
                n = n + this._listHeight <= i.stage.height ? n : e.y - this._listHeight, this._list.pos(e.x, n),
                    this._list.zOrder = 1001, i._currentStage.addChild(this._list), i.stage.once("mousedown", this, this.removeList),
                    i.stage.on("mousewheel", this, this._onStageMouseWheel), this._list.selectedIndex = this._selectedIndex;
            } else this._list && this._list.removeSelf();
        }), a(0, n, "scrollBarSkin", function () {
            return this._scrollBarSkin;
        }, function (t) {
            this._scrollBarSkin = t;
        }), a(0, n, "sizeGrid", function () {
            return this._button.sizeGrid;
        }, function (t) {
            this._button.sizeGrid = t;
        }), a(0, n, "button", function () {
            return this._button;
        }), a(0, n, "list", function () {
            return this._list || this._createList(), this._list;
        }, function (t) {
            t && (t.removeSelf(), this._isCustomList = !0, this._list = t, this._setListEvent(t),
                this._itemHeight = t.getCell(0).height + t.spaceY);
        }), a(0, n, "dataSource", t.prototype._$get_dataSource, function (t) {
            this._dataSource = t, "number" == typeof t && Math.floor(t) == t || "string" == typeof t ? this.selectedIndex = parseInt(t) : t instanceof Array ? this.labels = t.join(",") : i.superSet(F, this, "dataSource", t);
        }), a(0, n, "labelColors", function () {
            return this._button.labelColors;
        }, function (t) {
            this._button.labelColors != t && (this._button.labelColors = t);
        }), a(0, n, "labelPadding", function () {
            return this._button.text.padding.join(",");
        }, function (t) {
            this._button.text.padding = P.fillArray(R.labelPadding, t, Number);
        }), a(0, n, "labelSize", function () {
            return this._button.text.fontSize;
        }, function (t) {
            this._button.text.fontSize = t;
        }), a(0, n, "labelFont", function () {
            return this._button.text.font;
        }, function (t) {
            this._button.text.font = t;
        }), a(0, n, "stateNum", function () {
            return this._button.stateNum;
        }, function (t) {
            this._button.stateNum = t;
        }), e;
    }(F), U = function (t) {
        function e(t) {
            this.rollRatio = .95, this.changeHandler = null, this.scaleBar = !0, this.autoHide = !1,
                this.elasticDistance = 0, this.elasticBackTime = 500, this.upButton = null, this.downButton = null,
                this.slider = null, this._scrollSize = 1, this._skin = null, this._thumbPercent = 1,
                this._target = null, this._lastPoint = null, this._lastOffset = 0, this._checkElastic = !1,
                this._isElastic = !1, this._value = NaN, this._hide = !1, this._clickOnly = !0,
                this._offsets = null, e.__super.call(this), this._showButtons = D.showButtons, this._touchScrollEnable = D.touchScrollEnable,
                this._mouseWheelEnable = D.mouseWheelEnable, this.skin = t, this.max = 1;
        }
        s(e, "laya.ui.ScrollBar", t);
        var n = e.prototype;
        return n.destroy = function (e) {
            void 0 === e && (e = !0), this.stopScroll(), this.target = null, t.prototype.destroy.call(this, e),
                this.upButton && this.upButton.destroy(e), this.downButton && this.downButton.destroy(e),
                this.slider && this.slider.destroy(e), this.upButton = this.downButton = null, this.slider = null,
                this.changeHandler = null, this._offsets = null;
        }, n.createChildren = function () {
            this.addChild(this.slider = new W()), this.addChild(this.upButton = new G()), this.addChild(this.downButton = new G());
        }, n.initialize = function () {
            this.slider.showLabel = !1, this.slider.on("change", this, this.onSliderChange),
                this.slider.setSlider(0, 0, 0), this.upButton.on("mousedown", this, this.onButtonMouseDown),
                this.downButton.on("mousedown", this, this.onButtonMouseDown);
        }, n.onSliderChange = function () {
            this._value != this.slider.value && (this.value = this.slider.value);
        }, n.onButtonMouseDown = function (t) {
            var e = t.currentTarget === this.upButton;
            this.slide(e), i.timer.once(R.scrollBarDelayTime, this, this.startLoop, [e]),
                i.stage.once("mouseup", this, this.onStageMouseUp);
        }, n.startLoop = function (t) {
            i.timer.frameLoop(1, this, this.slide, [t]);
        }, n.slide = function (t) {
            t ? this.value -= this._scrollSize : this.value += this._scrollSize;
        }, n.onStageMouseUp = function (t) {
            i.timer.clear(this, this.startLoop), i.timer.clear(this, this.slide);
        }, n.changeScrollBar = function () {
            this.upButton.visible = this._showButtons, this.downButton.visible = this._showButtons,
                this._showButtons && (this.upButton.skin = this._skin.replace(".png", "$up.png"),
                    this.downButton.skin = this._skin.replace(".png", "$down.png")), this.slider.isVertical ? this.slider.y = this._showButtons ? this.upButton.height : 0 : this.slider.x = this._showButtons ? this.upButton.width : 0,
                this.resetPositions(), this.repaint();
        }, n.changeSize = function () {
            t.prototype.changeSize.call(this), this.repaint(), this.resetPositions(), this.event("change"),
                this.changeHandler && this.changeHandler.runWith(this.value);
        }, n.resetPositions = function () {
            this.slider.isVertical ? this.slider.height = this.height - (this._showButtons ? this.upButton.height + this.downButton.height : 0) : this.slider.width = this.width - (this._showButtons ? this.upButton.width + this.downButton.width : 0),
                this.resetButtonPosition();
        }, n.resetButtonPosition = function () {
            this.slider.isVertical ? this.downButton.y = this.slider.y + this.slider.height : this.downButton.x = this.slider.x + this.slider.width;
        }, n.setScroll = function (t, e, i) {
            this.runCallLater(this.changeSize), this.slider.setSlider(t, e, i), this.slider.bar.visible = e > 0,
                !this._hide && this.autoHide && (this.visible = !1);
        }, n.onTargetMouseWheel = function (t) {
            this.value -= t.delta * this._scrollSize, this.target = this._target;
        }, n.onTargetMouseDown = function (t) {
            this._clickOnly = !0, this._lastOffset = 0, this._checkElastic = !1, this._lastPoint || (this._lastPoint = new w()),
                this._lastPoint.setTo(i.stage.mouseX, i.stage.mouseY), i.timer.clear(this, this.tweenMove),
                S.clearTween(this), i.stage.once("mouseup", this, this.onStageMouseUp2), i.stage.once("mouseout", this, this.onStageMouseUp2),
                i.timer.frameLoop(1, this, this.loop);
        }, n.loop = function () {
            var t = i.stage.mouseY, e = i.stage.mouseX;
            if (this._lastOffset = this.isVertical ? t - this._lastPoint.y : e - this._lastPoint.x,
                this._clickOnly) {
                if (!(Math.abs(this._lastOffset * (this.isVertical ? i.stage._canvasTransform.getScaleY() : i.stage._canvasTransform.getScaleX())) > 1)) return;
                this._clickOnly = !1, this._offsets || (this._offsets = []), this._offsets.length = 0,
                    this._target.mouseEnabled = !1, !this.hide && this.autoHide && (this.alpha = 1,
                        this.visible = !0), this.event("start");
            }
            this._offsets.push(this._lastOffset), this._lastPoint.x = e, this._lastPoint.y = t,
                0 !== this._lastOffset && (this._checkElastic || (this.elasticDistance > 0 ? this._checkElastic || 0 == this._lastOffset || (this._lastOffset > 0 && this._value <= this.min || this._lastOffset < 0 && this._value >= this.max ? (this._isElastic = !0,
                    this._checkElastic = !0) : this._isElastic = !1) : this._checkElastic = !0), this._isElastic ? this._value <= this.min ? this.value -= this._lastOffset * Math.max(0, 1 - (this.min - this._value) / this.elasticDistance) : this._value >= this.max && (this.value -= this._lastOffset * Math.max(0, 1 - (this._value - this.max) / this.elasticDistance)) : this.value -= this._lastOffset);
        }, n.onStageMouseUp2 = function (t) {
            if (i.stage.off("mouseup", this, this.onStageMouseUp2), i.stage.off("mouseout", this, this.onStageMouseUp2),
                i.timer.clear(this, this.loop), !(this._clickOnly && this._value >= this.min && this._value <= this.max)) if (this._target.mouseEnabled = !0,
                    this._isElastic) this._value < this.min ? S.to(this, {
                        value: this.min
                    }, this.elasticBackTime, c.sineOut, p.create(this, this.elasticOver)) : this._value > this.max && S.to(this, {
                        value: this.max
                    }, this.elasticBackTime, c.sineOut, p.create(this, this.elasticOver)); else {
                    if (!this._offsets) return;
                    this._offsets.length < 1 && (this._offsets[0] = this.isVertical ? i.stage.mouseY - this._lastPoint.y : i.stage.mouseX - this._lastPoint.x);
                    for (var e = 0, n = Math.min(this._offsets.length, 3), s = 0; s < n; s++) e += this._offsets[this._offsets.length - 1 - s];
                    if (this._lastOffset = e / n, (e = Math.abs(this._lastOffset)) < 2) return void this.event("end");
                    e > 60 && (this._lastOffset = this._lastOffset > 0 ? 60 : -60);
                    var a = Math.round(Math.abs(this.elasticDistance * (this._lastOffset / 240)));
                    i.timer.frameLoop(1, this, this.tweenMove, [a]);
                }
        }, n.elasticOver = function () {
            this._isElastic = !1, !this.hide && this.autoHide && S.to(this, {
                alpha: 0
            }, 500), this.event("end");
        }, n.tweenMove = function (t) {
            this._lastOffset *= this.rollRatio;
            var e = NaN;
            if (t > 0 && (this._lastOffset > 0 && this.value <= this.min ? (this._isElastic = !0,
                e = .5 * -(this.min - t - this.value), this._lastOffset > e && (this._lastOffset = e)) : this._lastOffset < 0 && this.value >= this.max && (this._isElastic = !0,
                    e = .5 * -(this.max + t - this.value), this._lastOffset < e && (this._lastOffset = e))),
                this.value -= this._lastOffset, Math.abs(this._lastOffset) < 1) {
                if (i.timer.clear(this, this.tweenMove), this._isElastic) return void (this._value < this.min ? S.to(this, {
                    value: this.min
                }, this.elasticBackTime, c.sineOut, p.create(this, this.elasticOver)) : this._value > this.max ? S.to(this, {
                    value: this.max
                }, this.elasticBackTime, c.sineOut, p.create(this, this.elasticOver)) : this.elasticOver());
                this.event("end"), !this.hide && this.autoHide && S.to(this, {
                    alpha: 0
                }, 500);
            }
        }, n.stopScroll = function () {
            this.onStageMouseUp2(null), i.timer.clear(this, this.tweenMove), S.clearTween(this);
        }, a(0, n, "measureHeight", function () {
            return this.slider.isVertical ? 100 : this.slider.height;
        }), a(0, n, "skin", function () {
            return this._skin;
        }, function (t) {
            this._skin != t && (this._skin = t, this.slider.skin = this._skin, this.callLater(this.changeScrollBar));
        }), a(0, n, "max", function () {
            return this.slider.max;
        }, function (t) {
            this.slider.max = t;
        }), a(0, n, "showButtons", function () {
            return this._showButtons;
        }, function (t) {
            this._showButtons = t, this.callLater(this.changeScrollBar);
        }), a(0, n, "measureWidth", function () {
            return this.slider.isVertical ? this.slider.width : 100;
        }), a(0, n, "min", function () {
            return this.slider.min;
        }, function (t) {
            this.slider.min = t;
        }), a(0, n, "value", function () {
            return this._value;
        }, function (t) {
            t !== this._value && (this._value = t, this._isElastic || (this.slider._value != t && (this.slider._value = t,
                this.slider.changeValue()), this._value = this.slider._value), this.event("change"),
                this.changeHandler && this.changeHandler.runWith(this._value));
        }), a(0, n, "isVertical", function () {
            return this.slider.isVertical;
        }, function (t) {
            this.slider.isVertical = t;
        }), a(0, n, "sizeGrid", function () {
            return this.slider.sizeGrid;
        }, function (t) {
            this.slider.sizeGrid = t;
        }), a(0, n, "scrollSize", function () {
            return this._scrollSize;
        }, function (t) {
            this._scrollSize = t;
        }), a(0, n, "dataSource", t.prototype._$get_dataSource, function (t) {
            this._dataSource = t, "number" == typeof t || "string" == typeof t ? this.value = Number(t) : i.superSet(F, this, "dataSource", t);
        }), a(0, n, "thumbPercent", function () {
            return this._thumbPercent;
        }, function (t) {
            this.runCallLater(this.changeScrollBar), this.runCallLater(this.changeSize), t = t >= 1 ? .99 : t,
                this._thumbPercent = t, this.scaleBar && (this.slider.isVertical ? this.slider.bar.height = Math.max(this.slider.height * t, R.scrollBarMinNum) : this.slider.bar.width = Math.max(this.slider.width * t, R.scrollBarMinNum));
        }), a(0, n, "target", function () {
            return this._target;
        }, function (t) {
            this._target && (this._target.off("mousewheel", this, this.onTargetMouseWheel),
                this._target.off("mousedown", this, this.onTargetMouseDown)), this._target = t,
                t && (this._mouseWheelEnable && this._target.on("mousewheel", this, this.onTargetMouseWheel),
                    this._touchScrollEnable && this._target.on("mousedown", this, this.onTargetMouseDown));
        }), a(0, n, "hide", function () {
            return this._hide;
        }, function (t) {
            this._hide = t, this.visible = !t;
        }), a(0, n, "touchScrollEnable", function () {
            return this._touchScrollEnable;
        }, function (t) {
            this._touchScrollEnable = t, this.target = this._target;
        }), a(0, n, "mouseWheelEnable", function () {
            return this._mouseWheelEnable;
        }, function (t) {
            this._mouseWheelEnable = t, this.target = this._target;
        }), a(0, n, "tick", function () {
            return this.slider.tick;
        }, function (t) {
            this.slider.tick = t;
        }), e;
    }(F), W = function (t) {
        function e(t) {
            this.changeHandler = null, this.isVertical = !0, this.showLabel = !0, this._allowClickBack = !1,
                this._max = 100, this._min = 0, this._tick = 1, this._value = 0, this._skin = null,
                this._bg = null, this._progress = null, this._bar = null, this._tx = NaN, this._ty = NaN,
                this._maxMove = NaN, this._globalSacle = null, e.__super.call(this), this.skin = t;
        }
        s(e, "laya.ui.Slider", t);
        var r = e.prototype;
        return r.destroy = function (e) {
            void 0 === e && (e = !0), t.prototype.destroy.call(this, e), this._bg && this._bg.destroy(e),
                this._bar && this._bar.destroy(e), this._progress && this._progress.destroy(e),
                this._bg = null, this._bar = null, this._progress = null, this.changeHandler = null;
        }, r.createChildren = function () {
            this.addChild(this._bg = new O()), this.addChild(this._bar = new G());
        }, r.initialize = function () {
            this._bar.on("mousedown", this, this.onBarMouseDown), this._bg.sizeGrid = this._bar.sizeGrid = "4,4,4,4,0",
                this._progress && (this._progress.sizeGrid = this._bar.sizeGrid), this.allowClickBack = !0;
        }, r.onBarMouseDown = function (t) {
            this._globalSacle || (this._globalSacle = new w()), this._globalSacle.setTo(this.globalScaleX || .01, this.globalScaleY || .01),
                this._maxMove = this.isVertical ? this.height - this._bar.height : this.width - this._bar.width,
                this._tx = i.stage.mouseX, this._ty = i.stage.mouseY, i.stage.on("mousemove", this, this.mouseMove),
                i.stage.once("mouseup", this, this.mouseUp), i.stage.once("mouseout", this, this.mouseUp),
                this.showValueText();
        }, r.showValueText = function () {
            if (this.showLabel) {
                var t = laya.ui.Slider.label;
                this.addChild(t), t.textField.changeText(this._value + ""), this.isVertical ? (t.x = this._bar.x + 20,
                    t.y = .5 * (this._bar.height - t.height) + this._bar.y) : (t.y = this._bar.y - 20,
                        t.x = .5 * (this._bar.width - t.width) + this._bar.x);
            }
        }, r.hideValueText = function () {
            laya.ui.Slider.label && laya.ui.Slider.label.removeSelf();
        }, r.mouseUp = function (t) {
            i.stage.off("mousemove", this, this.mouseMove), i.stage.off("mouseup", this, this.mouseUp),
                i.stage.off("mouseout", this, this.mouseUp), this.sendChangeEvent("changed"), this.hideValueText();
        }, r.mouseMove = function (t) {
            var e = this._value;
            this.isVertical ? (this._bar.y += (i.stage.mouseY - this._ty) / this._globalSacle.y,
                this._bar.y > this._maxMove ? this._bar.y = this._maxMove : this._bar.y < 0 && (this._bar.y = 0),
                this._value = this._bar.y / this._maxMove * (this._max - this._min) + this._min,
                this._progress && (this._progress.height = this._bar.y + .5 * this._bar.height)) : (this._bar.x += (i.stage.mouseX - this._tx) / this._globalSacle.x,
                    this._bar.x > this._maxMove ? this._bar.x = this._maxMove : this._bar.x < 0 && (this._bar.x = 0),
                    this._value = this._bar.x / this._maxMove * (this._max - this._min) + this._min,
                    this._progress && (this._progress.width = this._bar.x + .5 * this._bar.width)),
                this._tx = i.stage.mouseX, this._ty = i.stage.mouseY;
            var n = Math.pow(10, (this._tick + "").length - 1);
            this._value = Math.round(Math.round(this._value / this._tick) * this._tick * n) / n,
                this._value != e && this.sendChangeEvent(), this.showValueText();
        }, r.sendChangeEvent = function (t) {
            void 0 === t && (t = "change"), this.event(t), this.changeHandler && this.changeHandler.runWith(this._value);
        }, r.setBarPoint = function () {
            this.isVertical ? this._bar.x = Math.round(.5 * (this._bg.width - this._bar.width)) : this._bar.y = Math.round(.5 * (this._bg.height - this._bar.height));
        }, r.changeSize = function () {
            t.prototype.changeSize.call(this), this.isVertical ? this._bg.height = this.height : this._bg.width = this.width,
                this.setBarPoint(), this.changeValue();
        }, r.setSlider = function (t, e, i) {
            this._value = -1, this._min = t, this._max = e > t ? e : t, this.value = i < t ? t : i > e ? e : i;
        }, r.changeValue = function () {
            var t = Math.pow(10, (this._tick + "").length - 1);
            this._value = Math.round(Math.round(this._value / this._tick) * this._tick * t) / t,
                this._value = this._value > this._max ? this._max : this._value < this._min ? this._min : this._value;
            var e = this._max - this._min;
            0 === e && (e = 1), this.isVertical ? (this._bar.y = (this._value - this._min) / e * (this.height - this._bar.height),
                this._progress && (this._progress.height = this._bar.y + .5 * this._bar.height)) : (this._bar.x = (this._value - this._min) / e * (this.width - this._bar.width),
                    this._progress && (this._progress.width = this._bar.x + .5 * this._bar.width));
        }, r.onBgMouseDown = function (t) {
            var e = this._bg.getMousePoint();
            this.isVertical ? this.value = e.y / (this.height - this._bar.height) * (this._max - this._min) + this._min : this.value = e.x / (this.width - this._bar.width) * (this._max - this._min) + this._min;
        }, a(0, r, "measureHeight", function () {
            return Math.max(this._bg.height, this._bar.height);
        }), a(0, r, "skin", function () {
            return this._skin;
        }, function (t) {
            if (this._skin != t) {
                this._skin = t, this._bg.skin = this._skin, this._bar.skin = this._skin.replace(".png", "$bar.png");
                var e = this._skin.replace(".png", "$progress.png");
                m.getRes(e) && (this._progress || (this.addChild(this._progress = new O()), this._progress.sizeGrid = this._bar.sizeGrid,
                    this.setChildIndex(this._progress, 1)), this._progress.skin = e), this.setBarPoint(),
                    this.callLater(this.changeValue);
            }
        }), a(0, r, "allowClickBack", function () {
            return this._allowClickBack;
        }, function (t) {
            this._allowClickBack != t && (this._allowClickBack = t, t ? this._bg.on("mousedown", this, this.onBgMouseDown) : this._bg.off("mousedown", this, this.onBgMouseDown));
        }), a(0, r, "max", function () {
            return this._max;
        }, function (t) {
            this._max != t && (this._max = t, this.callLater(this.changeValue));
        }), a(0, r, "measureWidth", function () {
            return Math.max(this._bg.width, this._bar.width);
        }), a(0, r, "tick", function () {
            return this._tick;
        }, function (t) {
            this._tick != t && (this._tick = t, this.callLater(this.changeValue));
        }), a(0, r, "sizeGrid", function () {
            return this._bg.sizeGrid;
        }, function (t) {
            this._bg.sizeGrid = t, this._bar.sizeGrid = t, this._progress && (this._progress.sizeGrid = this._bar.sizeGrid);
        }), a(0, r, "min", function () {
            return this._min;
        }, function (t) {
            this._min != t && (this._min = t, this.callLater(this.changeValue));
        }), a(0, r, "value", function () {
            return this._value;
        }, function (t) {
            if (this._value != t) {
                var e = this._value;
                this._value = t, this.changeValue(), this._value != e && this.sendChangeEvent();
            }
        }), a(0, r, "dataSource", t.prototype._$get_dataSource, function (t) {
            this._dataSource = t, "number" == typeof t || "string" == typeof t ? this.value = Number(t) : i.superSet(F, this, "dataSource", t);
        }), a(0, r, "bar", function () {
            return this._bar;
        }), n(e, ["label", function () {
            return this.label = new Y();
        }]), e;
    }(F), Y = function (t) {
        function e(t) {
            this._tf = null, e.__super.call(this), void 0 === t && (t = ""), d.defaultColor = R.labelColor,
                this.text = t;
        }
        s(e, "laya.ui.Label", t);
        var n = e.prototype;
        return n.destroy = function (e) {
            void 0 === e && (e = !0), t.prototype.destroy.call(this, e), this._tf = null;
        }, n.createChildren = function () {
            this.addChild(this._tf = new C());
        }, n.changeText = function (t) {
            this._tf.changeText(t);
        }, a(0, n, "padding", function () {
            return this._tf.padding.join(",");
        }, function (t) {
            this._tf.padding = P.fillArray(R.labelPadding, t, Number);
        }), a(0, n, "bold", function () {
            return this._tf.bold;
        }, function (t) {
            this._tf.bold = t;
        }), a(0, n, "align", function () {
            return this._tf.align;
        }, function (t) {
            this._tf.align = t;
        }), a(0, n, "text", function () {
            return this._tf.text;
        }, function (t) {
            this._tf.text != t && (t && (t = P.adptString(t + "")), this._tf.text = t, this.event("change"),
                this._width && this._height || this.onCompResize());
        }), a(0, n, "italic", function () {
            return this._tf.italic;
        }, function (t) {
            this._tf.italic = t;
        }), a(0, n, "wordWrap", function () {
            return this._tf.wordWrap;
        }, function (t) {
            this._tf.wordWrap = t;
        }), a(0, n, "font", function () {
            return this._tf.font;
        }, function (t) {
            this._tf.font = t;
        }), a(0, n, "dataSource", t.prototype._$get_dataSource, function (t) {
            this._dataSource = t, "number" == typeof t || "string" == typeof t ? this.text = t + "" : i.superSet(F, this, "dataSource", t);
        }), a(0, n, "color", function () {
            return this._tf.color;
        }, function (t) {
            this._tf.color = t;
        }), a(0, n, "valign", function () {
            return this._tf.valign;
        }, function (t) {
            this._tf.valign = t;
        }), a(0, n, "leading", function () {
            return this._tf.leading;
        }, function (t) {
            this._tf.leading = t;
        }), a(0, n, "fontSize", function () {
            return this._tf.fontSize;
        }, function (t) {
            this._tf.fontSize = t;
        }), a(0, n, "bgColor", function () {
            return this._tf.bgColor;
        }, function (t) {
            this._tf.bgColor = t;
        }), a(0, n, "borderColor", function () {
            return this._tf.borderColor;
        }, function (t) {
            this._tf.borderColor = t;
        }), a(0, n, "stroke", function () {
            return this._tf.stroke;
        }, function (t) {
            this._tf.stroke = t;
        }), a(0, n, "strokeColor", function () {
            return this._tf.strokeColor;
        }, function (t) {
            this._tf.strokeColor = t;
        }), a(0, n, "textField", function () {
            return this._tf;
        }), a(0, n, "measureWidth", function () {
            return this._tf.width;
        }), a(0, n, "measureHeight", function () {
            return this._tf.height;
        }), a(0, n, "width", function () {
            return this._width || this._tf.text ? i.superGet(F, this, "width") : 0;
        }, function (t) {
            i.superSet(F, this, "width", t), this._tf.width = t;
        }), a(0, n, "height", function () {
            return this._height || this._tf.text ? i.superGet(F, this, "height") : 0;
        }, function (t) {
            i.superSet(F, this, "height", t), this._tf.height = t;
        }), a(0, n, "overflow", function () {
            return this._tf.overflow;
        }, function (t) {
            this._tf.overflow = t;
        }), a(0, n, "underline", function () {
            return this._tf.underline;
        }, function (t) {
            this._tf.underline = t;
        }), a(0, n, "underlineColor", function () {
            return this._tf.underlineColor;
        }, function (t) {
            this._tf.underlineColor = t;
        }), e;
    }(F), X = function (t) {
        function e(t) {
            this.changeHandler = null, this._bg = null, this._bar = null, this._skin = null,
                this._value = .5, e.__super.call(this), this.skin = t;
        }
        s(e, "laya.ui.ProgressBar", t);
        var n = e.prototype;
        return n.destroy = function (e) {
            void 0 === e && (e = !0), t.prototype.destroy.call(this, e), this._bg && this._bg.destroy(e),
                this._bar && this._bar.destroy(e), this._bg = this._bar = null, this.changeHandler = null;
        }, n.createChildren = function () {
            this.addChild(this._bg = new O()), this.addChild(this._bar = new O()), this._bar._bitmap.autoCacheCmd = !1;
        }, n.changeValue = function () {
            if (this.sizeGrid) {
                var t = this.sizeGrid.split(","), e = Number(t[3]), i = Number(t[1]), n = (this.width - e - i) * this._value;
                this._bar.width = e + i + n, this._bar.visible = this._bar.width > e + i;
            } else this._bar.width = this.width * this._value;
        }, a(0, n, "measureHeight", function () {
            return this._bg.height;
        }), a(0, n, "skin", function () {
            return this._skin;
        }, function (t) {
            this._skin != t && (this._skin = t, this._bg.skin = this._skin, this._bar.skin = this._skin.replace(".png", "$bar.png"),
                this.callLater(this.changeValue));
        }), a(0, n, "measureWidth", function () {
            return this._bg.width;
        }), a(0, n, "height", t.prototype._$get_height, function (t) {
            i.superSet(F, this, "height", t), this._bg.height = this._height, this._bar.height = this._height;
        }), a(0, n, "bar", function () {
            return this._bar;
        }), a(0, n, "value", function () {
            return this._value;
        }, function (t) {
            this._value != t && (t = t > 1 ? 1 : t < 0 ? 0 : t, this._value = t, this.callLater(this.changeValue),
                this.event("change"), this.changeHandler && this.changeHandler.runWith(t));
        }), a(0, n, "bg", function () {
            return this._bg;
        }), a(0, n, "sizeGrid", function () {
            return this._bg.sizeGrid;
        }, function (t) {
            this._bg.sizeGrid = this._bar.sizeGrid = t;
        }), a(0, n, "width", t.prototype._$get_width, function (t) {
            i.superSet(F, this, "width", t), this._bg.width = this._width, this.callLater(this.changeValue);
        }), a(0, n, "dataSource", t.prototype._$get_dataSource, function (t) {
            this._dataSource = t, "number" == typeof t || "string" == typeof t ? this.value = Number(t) : i.superSet(F, this, "dataSource", t);
        }), e;
    }(F), K = (function (t) {
        function e() {
            this._tipBox = null, this._tipText = null, this._defaultTipHandler = null, e.__super.call(this),
                this._tipBox = new F(), this._tipBox.addChild(this._tipText = new C()), this._tipText.x = this._tipText.y = 5,
                this._tipText.color = e.tipTextColor, this._defaultTipHandler = this._showDefaultTip,
                i.stage.on("showtip", this, this._onStageShowTip), i.stage.on("hidetip", this, this._onStageHideTip),
                this.zOrder = 1100;
        }
        s(e, "laya.ui.TipManager", F);
        var n = e.prototype;
        n._onStageHideTip = function (t) {
            i.timer.clear(this, this._showTip), this.closeAll(), this.removeSelf();
        }, n._onStageShowTip = function (t) {
            i.timer.once(e.tipDelay, this, this._showTip, [t], !0);
        }, n._showTip = function (t) {
            if ("string" == typeof t) {
                var e = String(t);
                Boolean(e) && this._defaultTipHandler(e);
            } else t instanceof laya.utils.Handler ? t.run() : "function" == typeof t && t.apply();
            i.stage.on("mousemove", this, this._onStageMouseMove), i.stage.on("mousedown", this, this._onStageMouseDown),
                this._onStageMouseMove(null);
        }, n._onStageMouseDown = function (t) {
            this.closeAll();
        }, n._onStageMouseMove = function (t) {
            this._showToStage(this, e.offsetX, e.offsetY);
        }, n._showToStage = function (t, e, n) {
            void 0 === e && (e = 0), void 0 === n && (n = 0);
            var s = t.getBounds();
            t.x = i.stage.mouseX + e, t.y = i.stage.mouseY + n, t.x + s.width > i.stage.width && (t.x -= s.width + e),
                t.y + s.height > i.stage.height && (t.y -= s.height + n);
        }, n.closeAll = function () {
            i.timer.clear(this, this._showTip), i.stage.off("mousemove", this, this._onStageMouseMove),
                i.stage.off("mousedown", this, this._onStageMouseDown), this.removeChildren();
        }, n.showDislayTip = function (t) {
            this.addChild(t), this._showToStage(this), i._currentStage.addChild(this);
        }, n._showDefaultTip = function (t) {
            this._tipText.text = t;
            var n = this._tipBox.graphics;
            n.clear(), n.drawRect(0, 0, this._tipText.width + 10, this._tipText.height + 10, e.tipBackColor),
                this.addChild(this._tipBox), this._showToStage(this), i._currentStage.addChild(this);
        }, a(0, n, "defaultTipHandler", function () {
            return this._defaultTipHandler;
        }, function (t) {
            this._defaultTipHandler = t;
        }), e.offsetX = 10, e.offsetY = 15, e.tipTextColor = "#ffffff", e.tipBackColor = "#111111",
            e.tipDelay = 200;
    }(), function (t) {
        function e(t) {
            this.advsListArr = [], this.resUrl = "https://unioncdn.layabox.com/config/iconlist.json",
                this._data = [], this._resquestTime = 36e4, this._appid = null, this._appCodeImgStr = null,
                this._playIndex = 0, this._lunboTime = 5e3, e.__super.call(this), this._http = new o.window.XMLHttpRequest(),
                this.skin = t, this.init(), this.size(120, 120);
        }
        s(e, "laya.ui.AdvImage", t);
        var n = e.prototype;
        n.init = function () {
            o.onMiniGame && this.isSupportJump ? (i.timer.loop(this._resquestTime, this, this.onGetAdvsListData),
                this.onGetAdvsListData(), this.initEvent()) : this.visible = !1;
        }, n.initEvent = function () {
            this.on("click", this, this.onAdvsImgClick);
        }, n.onAdvsImgClick = function () {
            this.getCurrentAppidObj() && this.jumptoGame();
        }, n.revertAdvsData = function () {
            this.advsListArr[this._playIndex] && (this.visible = !0, this.skin = this.advsListArr[this._playIndex]);
        }, n.jumptoGame = function () {
            var t = this;
            o.onMiniGame && this.isSupportJump && wx.navigateToMiniProgram({
                appId: this._appid,
                path: "",
                extraData: "",
                envVersion: "release",
                success: function () {
                    console.log("-------------跳转成功--------------");
                },
                fail: function () {
                    console.log("-------------跳转失败--------------");
                },
                complete: function () {
                    console.log("-------------跳转接口调用成功--------------"), t.updateAdvsInfo();
                }.bind(this)
            });
        }, n.updateAdvsInfo = function () {
            this.visible = !1, this.onLunbo(), i.timer.loop(this._lunboTime, this, this.onLunbo);
        }, n.onLunbo = function () {
            this._playIndex >= this.advsListArr.length - 1 ? this._playIndex = 0 : this._playIndex += 1,
                this.visible = !0, this.revertAdvsData();
        }, n.getCurrentAppidObj = function () {
            return this.advsListArr[this._playIndex];
        }, n.onGetAdvsListData = function () {
            var t = this, e = this.randRange(1e4, 1e6), i = this.resUrl + "?" + e;
            this._http.open("get", i, !0), this._http.setRequestHeader("Content-Type", "application/x-www-form-urlencoded"),
                this._http.responseType = "text", this._http.onerror = function (e) {
                    t._onError(e);
                }, this._http.onload = function (e) {
                    t._onLoad(e);
                }, this._http.send(null);
        }, n.randRange = function (t, e) {
            return Math.floor(Math.random() * (e - t + 1)) + t;
        }, n._onError = function (t) {
            this.error("Request failed Status:" + this._http.status + " text:" + this._http.statusText);
        }, n._onLoad = function (t) {
            var e = this._http, i = void 0 !== e.status ? e.status : 200;
            200 === i || 204 === i || 0 === i ? this.complete() : this.error("[" + e.status + "]" + e.statusText + ":" + e.responseURL);
        }, n.error = function (t) {
            this.event("error", t);
        }, n.complete = function () {
            try {
                this._data = this._http.response || this._http.responseText, this._data = JSON.parse(this._data),
                    this.advsListArr = this._data.list, this._appid = this._data.appid, this._appCodeImgStr = this._data.qrcode,
                    this.updateAdvsInfo(), this.revertAdvsData();
            } catch (t) {
                !1, this.error(t.message);
            }
        }, n.clear = function () {
            var t = this._http;
            t.onerror = t.onabort = t.onprogress = t.onload = null;
        }, n.destroy = function (e) {
            void 0 === e && (e = !0), t.prototype.destroy.call(this, !0), i.timer.clear(this, this.onLunbo),
                i.timer.clear(this, this.onGetAdvsListData), this.clear();
        }, a(0, n, "isSupportJump", function () {
            if (o.onMiniGame) {
                return "function" == typeof wx.navigateToMiniProgram;
            }
            return !1;
        });
    }(O), function (t) {
        function e() {
            this._idMap = null, this._aniList = null, this._watchMap = {}, e.__super.call(this);
        }
        var a;
        s(e, "laya.ui.View", N);
        var o = e.prototype;
        return o.createView = function (t) {
            if (t.animations && !this._idMap && (this._idMap = {}), e.createComp(t, this, this),
                t.animations) {
                var i, n, s = [], a = t.animations, r = 0, o = a.length;
                for (r = 0; r < o; r++) {
                    switch (i = new _(), n = a[r], i._setUp(this._idMap, n), this[n.name] = i, i._setControlNode(this),
                    n.action) {
                        case 1:
                            i.play(0, !1);
                            break;

                        case 2:
                            i.play(0, !0);
                    }
                    s.push(i);
                }
                this._aniList = s;
            }
            this._width > 0 && null == t.props.hitTestPrior && !this.mouseThrough && (this.hitTestPrior = !0);
        }, o.onEvent = function (t, e) { }, o.loadUI = function (t) {
            var i = e.uiMap[t];
            i && this.createView(i);
        }, o.destroy = function (t) {
            void 0 === t && (t = !0), this._aniList && (this._aniList.length = 0), this._idMap = null,
                this._aniList = null, this._watchMap = null, laya.ui.Component.prototype.destroy.call(this, t);
        }, o.changeData = function (t) {
            var e = this._watchMap[t];
            if (e) {
                console.log("change", t);
                for (var i = 0, n = e.length; i < n; i++) {
                    e[i].exe(this);
                }
            }
        }, e._regs = function () {
            for (var t in e.uiClassMap) h.regClass(t, e.uiClassMap[t]);
        }, e.createComp = function (t, n, s, a) {
            if (!(n = n || e.getCompInstance(t))) return console.warn("can not create:" + t.type),
                null;
            var r = t.child;
            if (r) for (var o = n instanceof laya.ui.List, l = 0, c = r.length; l < c; l++) {
                var u = r[l];
                if (!n.hasOwnProperty("itemRender") || "render" != u.props.name && "render" !== u.props.renderType) if ("Graphic" == u.type) h.addGraphicsToSprite(u, n); else if (h.isDrawType(u.type)) h.addGraphicToSprite(u, n, !0); else {
                    if (o) {
                        var d = [], _ = e.createComp(u, null, s, d);
                        d.length && (_._$bindData = d);
                    } else _ = e.createComp(u, null, s, a);
                    "Script" == u.type ? "owner" in _ ? _.owner = n : "target" in _ && (_.target = n) : "mask" == u.props.renderType || "mask" == u.props.name ? n.mask = _ : _ instanceof laya.display.Sprite && n.addChild(_);
                } else n.itemRender = u;
            }
            var f = t.props;
            for (var p in f) {
                var g = f[p];
                e.eventDic[p] ? g && s && n.on(p, s, s.onEvent, [g]) : e.setCompValue(n, p, g, s, a);
            }
            return i.__typeof(n, "laya.ui.IItem") && n.initItems(), t.compId && s && s._idMap && (s._idMap[t.compId] = n),
                n;
        }, e.setCompValue = function (t, n, s, r, o) {
            if ("string" == typeof s && s.indexOf("${") > -1) {
                if (e._sheet || (e._sheet = h.getClass("laya.data.Table")), !e._sheet) return void console.warn("Can not find class Sheet");
                if (o) o.push(t, n, s); else if (r) {
                    -1 == s.indexOf("].") && (s = s.replace(".", "[0]."));
                    var l = new a(t, n, s);
                    l.exe(r);
                    for (var c, u, d = s.replace(/\[.*?\]\./g, "."); null != (c = e._parseWatchData.exec(d));) {
                        for (var _ = c[1]; null != (u = e._parseKeyWord.exec(_));) {
                            var f = u[0], p = r._watchMap[f] || (r._watchMap[f] = []);
                            p.push(l), e._sheet.I.notifer.on(f, r, r.changeData, [f]);
                        }
                        (p = r._watchMap[_] || (r._watchMap[_] = [])).push(l), e._sheet.I.notifer.on(_, r, r.changeData, [_]);
                    }
                }
            } else if ("var" === n && r) r[s] = t; else if ("onClick" == n) {
                var g = i._runScript("(function(){" + s + "})");
                t.on("click", r, g);
            } else t[n] = "true" === s || "false" !== s && s;
        }, e.getCompInstance = function (t) {
            var n, s = t.props ? t.props.runtime : null;
            return n = s ? e.viewClassMap[s] || e.uiClassMap[s] || i.__classmap[s] : e.uiClassMap[t.type],
                t.props && t.props.hasOwnProperty("renderType") && "instance" == t.props.renderType ? n.instance : n ? new n() : null;
        }, e.regComponent = function (t, i) {
            e.uiClassMap[t] = i, h.regClass(t, i);
        }, e.regViewRuntime = function (t, i) {
            e.viewClassMap[t] = i;
        }, e.uiMap = {}, e.viewClassMap = {}, e._sheet = null, n(e, ["uiClassMap", function () {
            return this.uiClassMap = {
                ViewStack: st,
                LinkButton: G,
                TextArea: ft,
                ColorPicker: z,
                Box: N,
                Button: G,
                CheckBox: j,
                Clip: H,
                ComboBox: V,
                Component: F,
                HScrollBar: Z,
                HSlider: tt,
                Image: O,
                Label: Y,
                List: Q,
                Panel: J,
                ProgressBar: X,
                Radio: it,
                RadioGroup: dt,
                ScrollBar: U,
                Slider: W,
                Tab: _t,
                TextInput: rt,
                View: e,
                VScrollBar: at,
                VSlider: ot,
                Tree: nt,
                HBox: lt,
                VBox: ut,
                Sprite: L,
                Animation: r,
                Text: C,
                FontClip: $
            };
        }, "eventDic", function () {
            return this.eventDic = {
                mousedown: !0,
                mouseup: !0,
                mousemove: !0,
                mouseover: !0,
                mouseout: !0,
                click: !0,
                doubleclick: !0,
                rightmousedown: !0,
                rightmouseup: !0,
                rightclick: !0
            };
        }, "_parseWatchData", function () {
            return this._parseWatchData = /\${(.*?)}/g;
        }, "_parseKeyWord", function () {
            return this._parseKeyWord = /[a-zA-Z_][a-zA-Z0-9_]*(?:(?:\.[a-zA-Z_][a-zA-Z0-9_]*)+)/g;
        }]), e.__init$ = function () {
            e._regs(), a = function () {
                function t(t, e, i) {
                    this.comp = null, this.prop = null, this.value = null, this.comp = t, this.prop = e,
                        this.value = i;
                }
                s(t, "");
                return t.prototype.exe = function (t) {
                    var e = P.getBindFun(this.value);
                    this.comp[this.prop] = e.call(this, t);
                }, t;
            }();
        }, e;
    }()), j = function (t) {
        function e(t, i) {
            void 0 === i && (i = ""), e.__super.call(this, t, i);
        }
        s(e, "laya.ui.CheckBox", t);
        var n = e.prototype;
        return n.preinitialize = function () {
            laya.ui.Component.prototype.preinitialize.call(this), this.toggle = !0, this._autoSize = !1;
        }, n.initialize = function () {
            t.prototype.initialize.call(this), this.createText(), this._text.align = "left",
                this._text.valign = "top", this._text.width = 0;
        }, a(0, n, "dataSource", t.prototype._$get_dataSource, function (t) {
            this._dataSource = t, "boolean" == typeof t ? this.selected = t : "string" == typeof t ? this.selected = "true" === t : i.superSet(G, this, "dataSource", t);
        }), e;
    }(G), q = function (t) {
        function e() {
            this._space = 0, this._align = "none", this._itemChanged = !1, e.__super.call(this);
        }
        s(e, "laya.ui.LayoutBox", N);
        var i = e.prototype;
        return i.addChild = function (t) {
            return t.on("resize", this, this.onResize), this._setItemChanged(), laya.display.Node.prototype.addChild.call(this, t);
        }, i.onResize = function (t) {
            this._setItemChanged();
        }, i.addChildAt = function (t, e) {
            return t.on("resize", this, this.onResize), this._setItemChanged(), laya.display.Node.prototype.addChildAt.call(this, t, e);
        }, i.removeChildAt = function (t) {
            return this.getChildAt(t).off("resize", this, this.onResize), this._setItemChanged(),
                laya.display.Node.prototype.removeChildAt.call(this, t);
        }, i.refresh = function () {
            this._setItemChanged();
        }, i.changeItems = function () {
            this._itemChanged = !1;
        }, i.sortItem = function (t) {
            t && t.sort(function (t, e) {
                return t.y - e.y;
            });
        }, i._setItemChanged = function () {
            this._itemChanged || (this._itemChanged = !0, this.callLater(this.changeItems));
        }, a(0, i, "space", function () {
            return this._space;
        }, function (t) {
            this._space = t, this._setItemChanged();
        }), a(0, i, "align", function () {
            return this._align;
        }, function (t) {
            this._align = t, this._setItemChanged();
        }), e;
    }(), $ = function (t) {
        function e(t, i) {
            this._valueArr = null, this._indexMap = null, this._sheet = null, this._direction = "horizontal",
                this._spaceX = 0, this._spaceY = 0, this._align = "left", this._wordsW = 0, this._wordsH = 0,
                e.__super.call(this), t && (this.skin = t), i && (this.sheet = i);
        }
        s(e, "laya.ui.FontClip", t);
        var n = e.prototype;
        return n.createChildren = function () {
            this._bitmap = new k(), this.on("loaded", this, this._onClipLoaded);
        }, n._onClipLoaded = function () {
            this.callLater(this.changeValue);
        }, n.changeValue = function () {
            if (this._sources && this._valueArr) {
                this.graphics.clear(!0);
                var t;
                if (t = this._sources[0]) {
                    var e = "horizontal" === this._direction;
                    e ? (this._wordsW = this._valueArr.length * (t.sourceWidth + this.spaceX), this._wordsH = t.sourceHeight) : (this._wordsW = t.sourceWidth,
                        this._wordsH = (t.sourceHeight + this.spaceY) * this._valueArr.length);
                    var i = 0;
                    if (this._width) switch (this._align) {
                        case "center":
                            i = .5 * (this._width - this._wordsW);
                            break;

                        case "right":
                            i = this._width - this._wordsW;
                            break;

                        default:
                            i = 0;
                    }
                    for (var n = 0, s = this._valueArr.length; n < s; n++) {
                        var a = this._indexMap[this._valueArr.charAt(n)];
                        this.sources[a] && (t = this.sources[a], e ? this.graphics.drawTexture(t, i + n * (t.sourceWidth + this.spaceX), 0, t.sourceWidth, t.sourceHeight) : this.graphics.drawTexture(t, 0 + i, n * (t.sourceHeight + this.spaceY), t.sourceWidth, t.sourceHeight));
                    }
                    this._width || (this.resetLayoutX(), this.callLater(this.changeSize)), this._height || (this.resetLayoutY(),
                        this.callLater(this.changeSize));
                }
            }
        }, n.destroy = function (e) {
            void 0 === e && (e = !0), this._valueArr = null, this._indexMap = null, this.graphics.clear(!0),
                this.removeSelf(), this.off("loaded", this, this._onClipLoaded), t.prototype.destroy.call(this, e);
        }, a(0, n, "sheet", function () {
            return this._sheet;
        }, function (t) {
            t += "", this._sheet = t;
            var e = t.split(" ");
            this._clipX = String(e[0]).length, this.clipY = e.length, this._indexMap = {};
            for (var i = 0; i < this._clipY; i++) for (var n = e[i].split(""), s = 0, a = n.length; s < a; s++) this._indexMap[n[s]] = i * this._clipX + s;
        }), a(0, n, "height", t.prototype._$get_height, function (t) {
            i.superSet(H, this, "height", t), this.callLater(this.changeValue);
        }), a(0, n, "direction", function () {
            return this._direction;
        }, function (t) {
            this._direction = t, this.callLater(this.changeValue);
        }), a(0, n, "value", function () {
            return this._valueArr ? this._valueArr : "";
        }, function (t) {
            t += "", this._valueArr = t, this.callLater(this.changeValue);
        }), a(0, n, "width", t.prototype._$get_width, function (t) {
            i.superSet(H, this, "width", t), this.callLater(this.changeValue);
        }), a(0, n, "spaceX", function () {
            return this._spaceX;
        }, function (t) {
            this._spaceX = t, "horizontal" === this._direction && this.callLater(this.changeValue);
        }), a(0, n, "spaceY", function () {
            return this._spaceY;
        }, function (t) {
            this._spaceY = t, "horizontal" !== this._direction && this.callLater(this.changeValue);
        }), a(0, n, "align", function () {
            return this._align;
        }, function (t) {
            this._align = t, this.callLater(this.changeValue);
        }), a(0, n, "measureWidth", function () {
            return this._wordsW;
        }), a(0, n, "measureHeight", function () {
            return this._wordsH;
        }), e;
    }(H), Q = function (t) {
        function e() {
            this.selectHandler = null, this.renderHandler = null, this.mouseHandler = null,
                this.selectEnable = !1, this.totalPage = 0, this._content = null, this._scrollBar = null,
                this._itemRender = null, this._repeatX = 0, this._repeatY = 0, this._repeatX2 = 0,
                this._repeatY2 = 0, this._spaceX = 0, this._spaceY = 0, this._array = null, this._startIndex = 0,
                this._selectedIndex = -1, this._page = 0, this._isVertical = !0, this._cellSize = 20,
                this._cellOffset = 0, this._isMoved = !1, this.cacheContent = !1, this._createdLine = 0,
                this._cellChanged = !1, this._cells = [], this._offset = new w(), e.__super.call(this);
        }
        s(e, "laya.ui.List", t);
        var n = e.prototype;
        return i.imps(n, {
            "laya.ui.IRender": !0,
            "laya.ui.IItem": !0
        }), n.destroy = function (t) {
            void 0 === t && (t = !0), this._content && this._content.destroy(t), this._scrollBar && this._scrollBar.destroy(t),
                laya.ui.Component.prototype.destroy.call(this, t), this._content = null, this._scrollBar = null,
                this._itemRender = null, this._cells = null, this._array = null, this.selectHandler = this.renderHandler = this.mouseHandler = null;
        }, n.createChildren = function () {
            this.addChild(this._content = new N());
        }, n.onScrollStart = function () {
            this._$P.cacheAs || (this._$P.cacheAs = i.superGet(N, this, "cacheAs")), i.superSet(N, this, "cacheAs", "none"),
                this._scrollBar.once("end", this, this.onScrollEnd);
        }, n.onScrollEnd = function () {
            i.superSet(N, this, "cacheAs", this._$P.cacheAs);
        }, n._removePreScrollBar = function () {
            var t = this.removeChildByName("scrollBar");
            t && t.destroy(!0);
        }, n.changeCells = function () {
            if (this._cellChanged = !1, this._itemRender) {
                this.scrollBar = this.getChildByName("scrollBar");
                var t = this._getOneCell(), e = t.width + this._spaceX || 1, i = t.height + this._spaceY || 1;
                this._width > 0 && (this._repeatX2 = this._isVertical ? Math.round(this._width / e) : Math.ceil(this._width / e)),
                    this._height > 0 && (this._repeatY2 = this._isVertical ? Math.ceil(this._height / i) : Math.round(this._height / i));
                var n = this._width ? this._width : e * this.repeatX - this._spaceX, s = this._height ? this._height : i * this.repeatY - this._spaceY;
                this._cellSize = this._isVertical ? i : e, this._cellOffset = this._isVertical ? i * Math.max(this._repeatY2, this._repeatY) - s - this._spaceY : e * Math.max(this._repeatX2, this._repeatX) - n - this._spaceX,
                    this._isVertical && this._scrollBar ? this._scrollBar.height = s : !this._isVertical && this._scrollBar && (this._scrollBar.width = n),
                    this.setContentSize(n, s);
                var a = this._isVertical ? this.repeatX : this.repeatY, r = (this._isVertical ? this.repeatY : this.repeatX) + (this._scrollBar ? 1 : 0);
                this._createItems(0, a, r), this._createdLine = r, this._array && (this.array = this._array,
                    this.runCallLater(this.renderItems));
            }
        }, n._getOneCell = function () {
            if (0 === this._cells.length) {
                var t = this.createItem();
                if (this._offset.setTo(t.x, t.y), this.cacheContent) return t;
                this._cells.push(t);
            }
            return this._cells[0];
        }, n._createItems = function (t, e, i) {
            var n = this._content, s = this._getOneCell(), a = s.width + this._spaceX, r = s.height + this._spaceY;
            if (this.cacheContent) {
                var o = new N();
                o.cacheAsBitmap = !0, o.pos((this._isVertical ? 0 : t) * a, (this._isVertical ? t : 0) * r),
                    this._content.addChild(o), this._content.optimizeScrollRect = !0, n = o;
            } else {
                for (var h = [], l = this._cells.length - 1; l > -1; l--) {
                    var c = this._cells[l];
                    c.removeSelf(), h.push(c);
                }
                this._cells.length = 0;
            }
            for (var u = t; u < i; u++) for (var d = 0; d < e; d++) (s = h && h.length ? h.pop() : this.createItem()).x = (this._isVertical ? d : u) * a - n.x,
                s.y = (this._isVertical ? u : d) * r - n.y, s.name = "item" + (u * e + d), n.addChild(s),
                this.addCell(s);
        }, n.createItem = function () {
            var t = [];
            if ("function" == typeof this._itemRender) var e = new this._itemRender(); else e = K.createComp(this._itemRender, null, null, t);
            if (0 == t.length && e._watchMap) {
                var i = e._watchMap;
                for (var n in i) for (var s = i[n], a = 0; a < s.length; a++) {
                    var r = s[a];
                    t.push(r.comp, r.prop, r.value);
                }
            }
            return t.length && (e._$bindData = t), e;
        }, n.addCell = function (t) {
            t.on("click", this, this.onCellMouse), t.on("rightclick", this, this.onCellMouse),
                t.on("mouseover", this, this.onCellMouse), t.on("mouseout", this, this.onCellMouse),
                t.on("mousedown", this, this.onCellMouse), t.on("mouseup", this, this.onCellMouse),
                this._cells.push(t);
        }, n.initItems = function () {
            if (!this._itemRender && null != this.getChildByName("item0")) {
                this.repeatX = 1;
                var t = 0;
                t = 0;
                for (var e = 0; e < 1e4; e++) {
                    var i = this.getChildByName("item" + e);
                    {
                        if (!i) break;
                        this.addCell(i), t++;
                    }
                }
                this.repeatY = t;
            }
        }, n.setContentSize = function (t, e) {
            this._content.width = t, this._content.height = e, (this._scrollBar || 0 != this._offset.x || 0 != this._offset.y) && (this._content.scrollRect || (this._content.scrollRect = new x()),
                this._content.scrollRect.setTo(-this._offset.x, -this._offset.y, t, e), this._content.scrollRect = this._content.scrollRect),
                this.event("resize");
        }, n.onCellMouse = function (t) {
            "mousedown" === t.type && (this._isMoved = !1);
            var e = t.currentTarget, i = this._startIndex + this._cells.indexOf(e);
            i < 0 || ("click" === t.type || "rightclick" === t.type ? this.selectEnable && !this._isMoved ? this.selectedIndex = i : this.changeCellState(e, !0, 0) : "mouseover" !== t.type && "mouseout" !== t.type || this._selectedIndex === i || this.changeCellState(e, "mouseover" === t.type, 0),
                this.mouseHandler && this.mouseHandler.runWith([t, i]));
        }, n.changeCellState = function (t, e, i) {
            var n = t.getChildByName("selectBox");
            n && (this.selectEnable = !0, n.visible = e, n.index = i);
        }, n.changeSize = function () {
            laya.ui.Component.prototype.changeSize.call(this), this.setContentSize(this.width, this.height),
                this._scrollBar && this.callLater(this.onScrollBarChange);
        }, n.onScrollBarChange = function (t) {
            this.runCallLater(this.changeCells);
            var e = this._scrollBar.value, i = this._isVertical ? this.repeatX : this.repeatY, n = this._isVertical ? this.repeatY : this.repeatX, s = Math.floor(e / this._cellSize);
            if (this.cacheContent) r = n + 1, this._createdLine - s < r && (this._createItems(this._createdLine, i, this._createdLine + r),
                this.renderItems(this._createdLine * i, 0), this._createdLine += r); else {
                var a = s * i, r = 0;
                if (a > this._startIndex) {
                    r = a - this._startIndex;
                    var o = !0, h = this._startIndex + i * (n + 1);
                    this._isMoved = !0;
                } else a < this._startIndex && (r = this._startIndex - a, o = !1, h = this._startIndex - 1,
                    this._isMoved = !0);
                for (var l = 0; l < r; l++) {
                    if (o) {
                        var c = this._cells.shift();
                        this._cells[this._cells.length] = c;
                        var u = h + l;
                    } else c = this._cells.pop(), this._cells.unshift(c), u = h - l;
                    var d = Math.floor(u / i) * this._cellSize;
                    this._isVertical ? c.y = d : c.x = d, this.renderItem(c, u);
                }
                this._startIndex = a, this.changeSelectStatus();
            }
            var _ = this._content.scrollRect;
            this._isVertical ? (_.y = e - this._offset.y, _.x = -this._offset.x) : (_.y = -this._offset.y,
                _.x = e - this._offset.x), this._content.scrollRect = _;
        }, n.posCell = function (t, e) {
            if (this._scrollBar) {
                var i = this._isVertical ? this.repeatX : this.repeatY, n = (this._isVertical ? this.repeatY : this.repeatX,
                    Math.floor(e / i) * this._cellSize);
                this._isVertical ? t.y = n : t.x = n;
            }
        }, n.changeSelectStatus = function () {
            for (var t = 0, e = this._cells.length; t < e; t++) this.changeCellState(this._cells[t], this._selectedIndex === this._startIndex + t, 1);
        }, n.renderItems = function (t, e) {
            void 0 === t && (t = 0), void 0 === e && (e = 0);
            for (var i = t, n = e || this._cells.length; i < n; i++) this.renderItem(this._cells[i], this._startIndex + i);
            this.changeSelectStatus();
        }, n.renderItem = function (t, e) {
            this._array && e >= 0 && e < this._array.length ? (t.visible = !0, t._$bindData ? (t._dataSource = this._array[e],
                this._bindData(t, this._array[e])) : t.dataSource = this._array[e], this.cacheContent || this.posCell(t, e),
                this.hasListener("render") && this.event("render", [t, e]), this.renderHandler && this.renderHandler.runWith([t, e])) : (t.visible = !1,
                    t.dataSource = null);
        }, n._bindData = function (t, e) {
            for (var i = t._$bindData, n = 0, s = i.length; n < s; n++) {
                var a = i[n++], r = i[n++], o = i[n], h = P.getBindFun(o);
                a[r] = h.call(this, e);
            }
        }, n.refresh = function () {
            this.array = this._array;
        }, n.getItem = function (t) {
            return t > -1 && t < this._array.length ? this._array[t] : null;
        }, n.changeItem = function (t, e) {
            t > -1 && t < this._array.length && (this._array[t] = e, t >= this._startIndex && t < this._startIndex + this._cells.length && this.renderItem(this.getCell(t), t));
        }, n.setItem = function (t, e) {
            this.changeItem(t, e);
        }, n.addItem = function (t) {
            this._array.push(t), this.array = this._array;
        }, n.addItemAt = function (t, e) {
            this._array.splice(e, 0, t), this.array = this._array;
        }, n.deleteItem = function (t) {
            this._array.splice(t, 1), this.array = this._array;
        }, n.getCell = function (t) {
            return this.runCallLater(this.changeCells), t > -1 && this._cells ? this._cells[(t - this._startIndex) % this._cells.length] : null;
        }, n.scrollTo = function (t) {
            if (this._scrollBar) {
                var e = this._isVertical ? this.repeatX : this.repeatY;
                this._scrollBar.value = Math.floor(t / e) * this._cellSize;
            } else this.startIndex = t;
        }, n.tweenTo = function (t, e, i) {
            if (void 0 === e && (e = 200), this._scrollBar) {
                var n = this._isVertical ? this.repeatX : this.repeatY;
                S.to(this._scrollBar, {
                    value: Math.floor(t / n) * this._cellSize
                }, e, null, i, 0, !0);
            } else this.startIndex = t, i && i.run();
        }, n._setCellChanged = function () {
            this._cellChanged || (this._cellChanged = !0, this.callLater(this.changeCells));
        }, n.commitMeasure = function () {
            this.runCallLater(this.changeCells);
        }, a(0, n, "cacheAs", t.prototype._$get_cacheAs, function (t) {
            i.superSet(N, this, "cacheAs", t), this._scrollBar && (this._$P.cacheAs = null,
                "none" !== t ? this._scrollBar.on("start", this, this.onScrollStart) : this._scrollBar.off("start", this, this.onScrollStart));
        }), a(0, n, "content", function () {
            return this._content;
        }), a(0, n, "height", t.prototype._$get_height, function (t) {
            t != this._height && (i.superSet(N, this, "height", t), this._setCellChanged());
        }), a(0, n, "itemRender", function () {
            return this._itemRender;
        }, function (t) {
            if (this._itemRender != t) {
                this._itemRender = t;
                for (var e = this._cells.length - 1; e > -1; e--) this._cells[e].destroy();
                this._cells.length = 0, this._setCellChanged();
            }
        }), a(0, n, "vScrollBarSkin", function () {
            return this._scrollBar ? this._scrollBar.skin : null;
        }, function (t) {
            this._removePreScrollBar();
            var e = new at();
            e.name = "scrollBar", e.right = 0, t && " " != t && (e.skin = t), this.scrollBar = e,
                this.addChild(e), this._setCellChanged();
        }), a(0, n, "page", function () {
            return this._page;
        }, function (t) {
            this._page = t, this._array && (this._page = t > 0 ? t : 0, this._page = this._page < this.totalPage ? this._page : this.totalPage - 1,
                this.startIndex = this._page * this.repeatX * this.repeatY);
        }), a(0, n, "hScrollBarSkin", function () {
            return this._scrollBar ? this._scrollBar.skin : null;
        }, function (t) {
            this._removePreScrollBar();
            var e = new Z();
            e.name = "scrollBar", e.bottom = 0, t && " " != t && (e.skin = t), this.scrollBar = e,
                this.addChild(e), this._setCellChanged();
        }), a(0, n, "repeatX", function () {
            return this._repeatX > 0 ? this._repeatX : this._repeatX2 > 0 ? this._repeatX2 : 1;
        }, function (t) {
            this._repeatX = t, this._setCellChanged();
        }), a(0, n, "scrollBar", function () {
            return this._scrollBar;
        }, function (t) {
            this._scrollBar != t && (this._scrollBar = t, t && (this._isVertical = this._scrollBar.isVertical,
                this.addChild(this._scrollBar), this._scrollBar.on("change", this, this.onScrollBarChange)));
        }), a(0, n, "width", t.prototype._$get_width, function (t) {
            t != this._width && (i.superSet(N, this, "width", t), this._setCellChanged());
        }), a(0, n, "repeatY", function () {
            return this._repeatY > 0 ? this._repeatY : this._repeatY2 > 0 ? this._repeatY2 : 1;
        }, function (t) {
            this._repeatY = t, this._setCellChanged();
        }), a(0, n, "spaceX", function () {
            return this._spaceX;
        }, function (t) {
            this._spaceX = t, this._setCellChanged();
        }), a(0, n, "spaceY", function () {
            return this._spaceY;
        }, function (t) {
            this._spaceY = t, this._setCellChanged();
        }), a(0, n, "selectedIndex", function () {
            return this._selectedIndex;
        }, function (t) {
            this._selectedIndex != t && (this._selectedIndex = t, this.changeSelectStatus(),
                this.event("change"), this.selectHandler && this.selectHandler.runWith(t), this.startIndex = this._startIndex);
        }), a(0, n, "selectedItem", function () {
            return -1 != this._selectedIndex ? this._array[this._selectedIndex] : null;
        }, function (t) {
            this.selectedIndex = this._array.indexOf(t);
        }), a(0, n, "length", function () {
            return this._array ? this._array.length : 0;
        }), a(0, n, "selection", function () {
            return this.getCell(this._selectedIndex);
        }, function (t) {
            this.selectedIndex = this._startIndex + this._cells.indexOf(t);
        }), a(0, n, "startIndex", function () {
            return this._startIndex;
        }, function (t) {
            this._startIndex = t > 0 ? t : 0, this.callLater(this.renderItems);
        }), a(0, n, "array", function () {
            return this._array;
        }, function (t) {
            this.runCallLater(this.changeCells), this._array = t || [];
            var e = this._array.length;
            if (this.totalPage = Math.ceil(e / (this.repeatX * this.repeatY)), this._selectedIndex = this._selectedIndex < e ? this._selectedIndex : e - 1,
                this.startIndex = this._startIndex, this._scrollBar) {
                this._scrollBar.stopScroll();
                var i = this._isVertical ? this.repeatX : this.repeatY, n = this._isVertical ? this.repeatY : this.repeatX, s = Math.ceil(e / i);
                (this._cellOffset > 0 ? this.totalPage + 1 : this.totalPage) > 1 ? (this._scrollBar.scrollSize = this._cellSize,
                    this._scrollBar.thumbPercent = n / s, this._scrollBar.setScroll(0, (s - n) * this._cellSize + this._cellOffset, this._scrollBar.value),
                    this._scrollBar.target = this._content) : (this._scrollBar.setScroll(0, 0, 0), this._scrollBar.target = this._content);
            }
        }), a(0, n, "dataSource", t.prototype._$get_dataSource, function (t) {
            this._dataSource = t, "number" == typeof t && Math.floor(t) == t || "string" == typeof t ? this.selectedIndex = parseInt(t) : t instanceof Array ? this.array = t : i.superSet(N, this, "dataSource", t);
        }), a(0, n, "cells", function () {
            return this.runCallLater(this.changeCells), this._cells;
        }), e;
    }(N), Z = function (t) {
        function e() {
            e.__super.call(this);
        }
        s(e, "laya.ui.HScrollBar", t);
        return e.prototype.initialize = function () {
            t.prototype.initialize.call(this), this.slider.isVertical = !1;
        }, e;
    }(U), J = function (t) {
        function e() {
            this._content = null, this._vScrollBar = null, this._hScrollBar = null, this._scrollChanged = !1,
                e.__super.call(this), this.width = this.height = 100;
        }
        s(e, "laya.ui.Panel", t);
        var n = e.prototype;
        return n.destroy = function (t) {
            void 0 === t && (t = !0), laya.ui.Component.prototype.destroy.call(this, t), this._content && this._content.destroy(t),
                this._vScrollBar && this._vScrollBar.destroy(t), this._hScrollBar && this._hScrollBar.destroy(t),
                this._vScrollBar = null, this._hScrollBar = null, this._content = null;
        }, n.destroyChildren = function () {
            this._content.destroyChildren();
        }, n.createChildren = function () {
            laya.display.Node.prototype.addChild.call(this, this._content = new N());
        }, n.addChild = function (t) {
            return t.on("resize", this, this.onResize), this._setScrollChanged(), this._content.addChild(t);
        }, n.onResize = function () {
            this._setScrollChanged();
        }, n.addChildAt = function (t, e) {
            return t.on("resize", this, this.onResize), this._setScrollChanged(), this._content.addChildAt(t, e);
        }, n.removeChild = function (t) {
            return t.off("resize", this, this.onResize), this._setScrollChanged(), this._content.removeChild(t);
        }, n.removeChildAt = function (t) {
            return this.getChildAt(t).off("resize", this, this.onResize), this._setScrollChanged(),
                this._content.removeChildAt(t);
        }, n.removeChildren = function (t, e) {
            return void 0 === t && (t = 0), void 0 === e && (e = 2147483647), this._content.removeChildren(t, e),
                this._setScrollChanged(), this;
        }, n.getChildAt = function (t) {
            return this._content.getChildAt(t);
        }, n.getChildByName = function (t) {
            return this._content.getChildByName(t);
        }, n.getChildIndex = function (t) {
            return this._content.getChildIndex(t);
        }, n.changeScroll = function () {
            this._scrollChanged = !1;
            var t = this.contentWidth || 1, e = this.contentHeight || 1, i = this._vScrollBar, n = this._hScrollBar, s = i && e > this._height, a = n && t > this._width, r = s ? this._width - i.width : this._width, o = a ? this._height - n.height : this._height;
            i && (i.x = this._width - i.width, i.y = 0, i.height = this._height - (a ? n.height : 0),
                i.scrollSize = Math.max(.033 * this._height, 1), i.thumbPercent = o / e, i.setScroll(0, e - o, i.value)),
                n && (n.x = 0, n.y = this._height - n.height, n.width = this._width - (s ? i.width : 0),
                    n.scrollSize = Math.max(.033 * this._width, 1), n.thumbPercent = r / t, n.setScroll(0, t - r, n.value));
        }, n.changeSize = function () {
            laya.ui.Component.prototype.changeSize.call(this), this.setContentSize(this._width, this._height);
        }, n.setContentSize = function (t, e) {
            var i = this._content;
            i.width = t, i.height = e, i.scrollRect || (i.scrollRect = new x()), i.scrollRect.setTo(0, 0, t, e),
                i.scrollRect = i.scrollRect;
        }, n.onScrollBarChange = function (t) {
            var e = this._content.scrollRect;
            if (e) {
                var i = Math.round(t.value);
                t.isVertical ? e.y = i : e.x = i, this._content.scrollRect = e;
            }
        }, n.scrollTo = function (t, e) {
            void 0 === t && (t = 0), void 0 === e && (e = 0), this.vScrollBar && (this.vScrollBar.value = e),
                this.hScrollBar && (this.hScrollBar.value = t);
        }, n.refresh = function () {
            this.changeScroll();
        }, n.onScrollStart = function () {
            this._$P.cacheAs || (this._$P.cacheAs = i.superGet(N, this, "cacheAs")), i.superSet(N, this, "cacheAs", "none"),
                this._hScrollBar && this._hScrollBar.once("end", this, this.onScrollEnd), this._vScrollBar && this._vScrollBar.once("end", this, this.onScrollEnd);
        }, n.onScrollEnd = function () {
            i.superSet(N, this, "cacheAs", this._$P.cacheAs);
        }, n._setScrollChanged = function () {
            this._scrollChanged || (this._scrollChanged = !0, this.callLater(this.changeScroll));
        }, a(0, n, "numChildren", function () {
            return this._content.numChildren;
        }), a(0, n, "hScrollBarSkin", function () {
            return this._hScrollBar ? this._hScrollBar.skin : null;
        }, function (t) {
            null == this._hScrollBar && (laya.display.Node.prototype.addChild.call(this, this._hScrollBar = new Z()),
                this._hScrollBar.on("change", this, this.onScrollBarChange, [this._hScrollBar]),
                this._hScrollBar.target = this._content, this._setScrollChanged()), this._hScrollBar.skin = t;
        }), a(0, n, "contentWidth", function () {
            for (var t = 0, e = this._content.numChildren - 1; e > -1; e--) {
                var i = this._content.getChildAt(e);
                t = Math.max(i.x + i.width * i.scaleX, t);
            }
            return t;
        }), a(0, n, "contentHeight", function () {
            for (var t = 0, e = this._content.numChildren - 1; e > -1; e--) {
                var i = this._content.getChildAt(e);
                t = Math.max(i.y + i.height * i.scaleY, t);
            }
            return t;
        }), a(0, n, "width", t.prototype._$get_width, function (t) {
            i.superSet(N, this, "width", t), this._setScrollChanged();
        }), a(0, n, "hScrollBar", function () {
            return this._hScrollBar;
        }), a(0, n, "content", function () {
            return this._content;
        }), a(0, n, "height", t.prototype._$get_height, function (t) {
            i.superSet(N, this, "height", t), this._setScrollChanged();
        }), a(0, n, "vScrollBarSkin", function () {
            return this._vScrollBar ? this._vScrollBar.skin : null;
        }, function (t) {
            null == this._vScrollBar && (laya.display.Node.prototype.addChild.call(this, this._vScrollBar = new at()),
                this._vScrollBar.on("change", this, this.onScrollBarChange, [this._vScrollBar]),
                this._vScrollBar.target = this._content, this._setScrollChanged()), this._vScrollBar.skin = t;
        }), a(0, n, "vScrollBar", function () {
            return this._vScrollBar;
        }), a(0, n, "cacheAs", t.prototype._$get_cacheAs, function (t) {
            i.superSet(N, this, "cacheAs", t), this._$P.cacheAs = null, "none" !== t ? (this._hScrollBar && this._hScrollBar.on("start", this, this.onScrollStart),
                this._vScrollBar && this._vScrollBar.on("start", this, this.onScrollStart)) : (this._hScrollBar && this._hScrollBar.off("start", this, this.onScrollStart),
                    this._vScrollBar && this._vScrollBar.off("start", this, this.onScrollStart));
        }), e;
    }(N), tt = function (t) {
        function e(t) {
            e.__super.call(this, t), this.isVertical = !1;
        }
        return s(e, "laya.ui.HSlider", W), e;
    }(), et = function (t) {
        function e(t, i) {
            this.selectHandler = null, this._items = null, this._selectedIndex = -1, this._skin = null,
                this._direction = "horizontal", this._space = 0, this._labels = null, this._labelColors = null,
                this._labelFont = null, this._labelStrokeColor = null, this._strokeColors = null,
                this._labelStroke = NaN, this._labelSize = 0, this._labelBold = !1, this._labelPadding = null,
                this._labelAlign = null, this._stateNum = 0, this._labelChanged = !1, e.__super.call(this),
                this.skin = i, this.labels = t;
        }
        s(e, "laya.ui.UIGroup", t);
        var n = e.prototype;
        return i.imps(n, {
            "laya.ui.IItem": !0
        }), n.preinitialize = function () {
            this.mouseEnabled = !0;
        }, n.destroy = function (t) {
            void 0 === t && (t = !0), laya.ui.Component.prototype.destroy.call(this, t), this._items && (this._items.length = 0),
                this._items = null, this.selectHandler = null;
        }, n.addItem = function (t, e) {
            void 0 === e && (e = !0);
            var i = t, n = this._items.length;
            if (i.name = "item" + n, this.addChild(i), this.initItems(), e && n > 0) {
                var s = this._items[n - 1];
                "horizontal" == this._direction ? i.x = s.x + s.width + this._space : i.y = s.y + s.height + this._space;
            } else e && (i.x = 0, i.y = 0);
            return n;
        }, n.delItem = function (t, e) {
            void 0 === e && (e = !0);
            var i = this._items.indexOf(t);
            if (-1 != i) {
                var n = t;
                this.removeChild(n);
                for (var s = i + 1, a = this._items.length; s < a; s++) {
                    var r = this._items[s];
                    r.name = "item" + (s - 1), e && ("horizontal" == this._direction ? r.x -= n.width + this._space : r.y -= n.height + this._space);
                }
                if (this.initItems(), this._selectedIndex > -1) {
                    var o = 0;
                    o = this._selectedIndex < this._items.length ? this._selectedIndex : this._selectedIndex - 1,
                        this._selectedIndex = -1, this.selectedIndex = o;
                }
            }
        }, n.initItems = function () {
            this._items || (this._items = []), this._items.length = 0;
            for (var t = 0; t < 1e4; t++) {
                var e = this.getChildByName("item" + t);
                if (null == e) break;
                this._items.push(e), e.selected = t === this._selectedIndex, e.clickHandler = p.create(this, this.itemClick, [t], !1);
            }
        }, n.itemClick = function (t) {
            this.selectedIndex = t;
        }, n.setSelect = function (t, e) {
            this._items && t > -1 && t < this._items.length && (this._items[t].selected = e);
        }, n.createItem = function (t, e) {
            return null;
        }, n.changeLabels = function () {
            if (this._labelChanged = !1, this._items) for (var t = 0, e = 0, i = this._items.length; e < i; e++) {
                var n = this._items[e];
                this._skin && (n.skin = this._skin), this._labelColors && (n.labelColors = this._labelColors),
                    this._labelSize && (n.labelSize = this._labelSize), this._labelStroke && (n.labelStroke = this._labelStroke),
                    this._labelStrokeColor && (n.labelStrokeColor = this._labelStrokeColor), this._strokeColors && (n.strokeColors = this._strokeColors),
                    this._labelBold && (n.labelBold = this._labelBold), this._labelPadding && (n.labelPadding = this._labelPadding),
                    this._labelAlign && (n.labelAlign = this._labelAlign), this._stateNum && (n.stateNum = this._stateNum),
                    this._labelFont && (n.labelFont = this._labelFont), "horizontal" === this._direction ? (n.y = 0,
                        n.x = t, t += n.width + this._space) : (n.x = 0, n.y = t, t += n.height + this._space);
            }
            this.changeSize();
        }, n.commitMeasure = function () {
            this.runCallLater(this.changeLabels);
        }, n._setLabelChanged = function () {
            this._labelChanged || (this._labelChanged = !0, this.callLater(this.changeLabels));
        }, a(0, n, "labelStrokeColor", function () {
            return this._labelStrokeColor;
        }, function (t) {
            this._labelStrokeColor != t && (this._labelStrokeColor = t, this._setLabelChanged());
        }), a(0, n, "skin", function () {
            return this._skin;
        }, function (t) {
            this._skin != t && (this._skin = t, this._setLabelChanged());
        }), a(0, n, "selectedIndex", function () {
            return this._selectedIndex;
        }, function (t) {
            this._selectedIndex != t && (this.setSelect(this._selectedIndex, !1), this._selectedIndex = t,
                this.setSelect(t, !0), this.event("change"), this.selectHandler && this.selectHandler.runWith(this._selectedIndex));
        }), a(0, n, "labels", function () {
            return this._labels;
        }, function (t) {
            if (this._labels != t) {
                if (this._labels = t, this.removeChildren(), this._setLabelChanged(), this._labels) for (var e = this._labels.split(","), i = 0, n = e.length; i < n; i++) {
                    var s = this.createItem(this._skin, e[i]);
                    s.name = "item" + i, this.addChild(s);
                }
                this.initItems();
            }
        }), a(0, n, "strokeColors", function () {
            return this._strokeColors;
        }, function (t) {
            this._strokeColors != t && (this._strokeColors = t, this._setLabelChanged());
        }), a(0, n, "labelColors", function () {
            return this._labelColors;
        }, function (t) {
            this._labelColors != t && (this._labelColors = t, this._setLabelChanged());
        }), a(0, n, "labelStroke", function () {
            return this._labelStroke;
        }, function (t) {
            this._labelStroke != t && (this._labelStroke = t, this._setLabelChanged());
        }), a(0, n, "labelSize", function () {
            return this._labelSize;
        }, function (t) {
            this._labelSize != t && (this._labelSize = t, this._setLabelChanged());
        }), a(0, n, "stateNum", function () {
            return this._stateNum;
        }, function (t) {
            this._stateNum != t && (this._stateNum = t, this._setLabelChanged());
        }), a(0, n, "labelBold", function () {
            return this._labelBold;
        }, function (t) {
            this._labelBold != t && (this._labelBold = t, this._setLabelChanged());
        }), a(0, n, "labelFont", function () {
            return this._labelFont;
        }, function (t) {
            this._labelFont != t && (this._labelFont = t, this._setLabelChanged());
        }), a(0, n, "labelPadding", function () {
            return this._labelPadding;
        }, function (t) {
            this._labelPadding != t && (this._labelPadding = t, this._setLabelChanged());
        }), a(0, n, "direction", function () {
            return this._direction;
        }, function (t) {
            this._direction = t, this._setLabelChanged();
        }), a(0, n, "space", function () {
            return this._space;
        }, function (t) {
            this._space = t, this._setLabelChanged();
        }), a(0, n, "items", function () {
            return this._items;
        }), a(0, n, "selection", function () {
            return this._selectedIndex > -1 && this._selectedIndex < this._items.length ? this._items[this._selectedIndex] : null;
        }, function (t) {
            this.selectedIndex = this._items.indexOf(t);
        }), a(0, n, "dataSource", t.prototype._$get_dataSource, function (t) {
            this._dataSource = t, "number" == typeof t && Math.floor(t) == t || "string" == typeof t ? this.selectedIndex = parseInt(t) : t instanceof Array ? this.labels = t.join(",") : i.superSet(N, this, "dataSource", t);
        }), e;
    }(N), it = function (t) {
        function e(t, i) {
            this._value = null, void 0 === i && (i = ""), e.__super.call(this, t, i);
        }
        s(e, "laya.ui.Radio", t);
        var i = e.prototype;
        return i.destroy = function (e) {
            void 0 === e && (e = !0), t.prototype.destroy.call(this, e), this._value = null;
        }, i.preinitialize = function () {
            laya.ui.Component.prototype.preinitialize.call(this), this.toggle = !1, this._autoSize = !1;
        }, i.initialize = function () {
            t.prototype.initialize.call(this), this.createText(), this._text.align = "left",
                this._text.valign = "top", this._text.width = 0, this.on("click", this, this.onClick);
        }, i.onClick = function (t) {
            this.selected = !0;
        }, a(0, i, "value", function () {
            return null != this._value ? this._value : this.label;
        }, function (t) {
            this._value = t;
        }), e;
    }(G), nt = function (t) {
        function e() {
            this._list = null, this._source = null, this._renderHandler = null, this._spaceLeft = 10,
                this._spaceBottom = 0, this._keepStatus = !0, e.__super.call(this), this.width = this.height = 200;
        }
        s(e, "laya.ui.Tree", t);
        var n = e.prototype;
        return i.imps(n, {
            "laya.ui.IRender": !0
        }), n.destroy = function (t) {
            void 0 === t && (t = !0), laya.ui.Component.prototype.destroy.call(this, t), this._list && this._list.destroy(t),
                this._list = null, this._source = null, this._renderHandler = null;
        }, n.createChildren = function () {
            this.addChild(this._list = new Q()), this._list.renderHandler = p.create(this, this.renderItem, null, !1),
                this._list.repeatX = 1, this._list.on("change", this, this.onListChange);
        }, n.onListChange = function (t) {
            this.event("change");
        }, n.getArray = function () {
            var t, e = [];
            for (var i in this._source) t = this._source[i], this.getParentOpenStatus(t) && (t.x = this._spaceLeft * this.getDepth(t),
                e.push(t));
            return e;
        }, n.getDepth = function (t, e) {
            return void 0 === e && (e = 0), null == t.nodeParent ? e : this.getDepth(t.nodeParent, e + 1);
        }, n.getParentOpenStatus = function (t) {
            var e = t.nodeParent;
            return null == e || !!e.isOpen && (null == e.nodeParent || this.getParentOpenStatus(e));
        }, n.renderItem = function (t, e) {
            var i = t.dataSource;
            if (i) {
                t.left = i.x;
                var n = t.getChildByName("arrow");
                n && (i.hasChild ? (n.visible = !0, n.index = i.isOpen ? 1 : 0, n.tag = e, n.off("click", this, this.onArrowClick),
                    n.on("click", this, this.onArrowClick)) : n.visible = !1);
                var s = t.getChildByName("folder");
                s && (2 == s.clipY ? s.index = i.isDirectory ? 0 : 1 : s.index = i.isDirectory ? i.isOpen ? 1 : 0 : 2),
                    this._renderHandler && this._renderHandler.runWith([t, e]);
            }
        }, n.onArrowClick = function (t) {
            var e = t.currentTarget.tag;
            this._list.array[e].isOpen = !this._list.array[e].isOpen, this.event("open"), this._list.array = this.getArray();
        }, n.setItemState = function (t, e) {
            this._list.array[t] && (this._list.array[t].isOpen = e, this._list.array = this.getArray());
        }, n.fresh = function () {
            this._list.array = this.getArray(), this.repaint();
        }, n.parseXml = function (t, e, i, n) {
            var s, a = t.childNodes, r = a.length;
            if (!n) {
                s = {};
                var o, h = t.attributes;
                for (var l in h) {
                    var c = (o = h[l]).nodeName, u = o.nodeValue;
                    s[c] = "true" == u || "false" != u && u;
                }
                s.nodeParent = i, r > 0 && (s.isDirectory = !0), s.hasChild = r > 0, e.push(s);
            }
            for (var d = 0; d < r; d++) {
                var _ = a[d];
                this.parseXml(_, e, s, !1);
            }
        }, n.parseOpenStatus = function (t, e) {
            for (var i = 0, n = e.length; i < n; i++) {
                var s = e[i];
                if (s.isDirectory) for (var a = 0, r = t.length; a < r; a++) {
                    var o = t[a];
                    if (o.isDirectory && this.isSameParent(o, s) && s.label == o.label) {
                        s.isOpen = o.isOpen;
                        break;
                    }
                }
            }
        }, n.isSameParent = function (t, e) {
            return null == t.nodeParent && null == e.nodeParent || null != t.nodeParent && null != e.nodeParent && (t.nodeParent.label == e.nodeParent.label && this.isSameParent(t.nodeParent, e.nodeParent));
        }, n.filter = function (t) {
            if (Boolean(t)) {
                var e = [];
                this.getFilterSource(this._source, e, t), this._list.array = e;
            } else this._list.array = this.getArray();
        }, n.getFilterSource = function (t, e, i) {
            i = i.toLocaleLowerCase();
            var n;
            for (var s in t) !(n = t[s]).isDirectory && String(n.label).toLowerCase().indexOf(i) > -1 && (n.x = 0,
                e.push(n)), n.child && n.child.length > 0 && this.getFilterSource(n.child, e, i);
        }, a(0, n, "spaceBottom", function () {
            return this._list.spaceY;
        }, function (t) {
            this._list.spaceY = t;
        }), a(0, n, "keepStatus", function () {
            return this._keepStatus;
        }, function (t) {
            this._keepStatus = t;
        }), a(0, n, "itemRender", function () {
            return this._list.itemRender;
        }, function (t) {
            this._list.itemRender = t;
        }), a(0, n, "array", function () {
            return this._list.array;
        }, function (t) {
            this._keepStatus && this._list.array && t && this.parseOpenStatus(this._list.array, t),
                this._source = t, this._list.array = this.getArray();
        }), a(0, n, "mouseHandler", function () {
            return this._list.mouseHandler;
        }, function (t) {
            this._list.mouseHandler = t;
        }), a(0, n, "dataSource", t.prototype._$get_dataSource, function (t) {
            this._dataSource = t, i.superSet(N, this, "dataSource", t);
        }), a(0, n, "source", function () {
            return this._source;
        }), a(0, n, "scrollBar", function () {
            return this._list.scrollBar;
        }), a(0, n, "list", function () {
            return this._list;
        }), a(0, n, "scrollBarSkin", function () {
            return this._list.vScrollBarSkin;
        }, function (t) {
            this._list.vScrollBarSkin = t;
        }), a(0, n, "renderHandler", function () {
            return this._renderHandler;
        }, function (t) {
            this._renderHandler = t;
        }), a(0, n, "selectedIndex", function () {
            return this._list.selectedIndex;
        }, function (t) {
            this._list.selectedIndex = t;
        }), a(0, n, "spaceLeft", function () {
            return this._spaceLeft;
        }, function (t) {
            this._spaceLeft = t;
        }), a(0, n, "selectedItem", function () {
            return this._list.selectedItem;
        }, function (t) {
            this._list.selectedItem = t;
        }), a(0, n, "width", t.prototype._$get_width, function (t) {
            i.superSet(N, this, "width", t), this._list.width = t;
        }), a(0, n, "height", t.prototype._$get_height, function (t) {
            i.superSet(N, this, "height", t), this._list.height = t;
        }), a(0, n, "xml", null, function (t) {
            var e = [];
            this.parseXml(t.childNodes[0], e, null, !0), this.array = e;
        }), a(0, n, "selectedPath", function () {
            return this._list.selectedItem ? this._list.selectedItem.path : null;
        }), e;
    }(N), st = function (t) {
        function e() {
            this._items = null, this._selectedIndex = 0, e.__super.call(this), this._setIndexHandler = p.create(this, this.setIndex, null, !1);
        }
        s(e, "laya.ui.ViewStack", t);
        var n = e.prototype;
        return i.imps(n, {
            "laya.ui.IItem": !0
        }), n.setItems = function (t) {
            this.removeChildren();
            for (var e = 0, i = 0, n = t.length; i < n; i++) {
                var s = t[i];
                s && (s.name = "item" + e, this.addChild(s), e++);
            }
            this.initItems();
        }, n.addItem = function (t) {
            t.name = "item" + this._items.length, this.addChild(t), this.initItems();
        }, n.initItems = function () {
            this._items = [];
            for (var t = 0; t < 1e4; t++) {
                var e = this.getChildByName("item" + t);
                if (null == e) break;
                this._items.push(e), e.visible = t == this._selectedIndex;
            }
        }, n.setSelect = function (t, e) {
            this._items && t > -1 && t < this._items.length && (this._items[t].visible = e);
        }, n.setIndex = function (t) {
            this.selectedIndex = t;
        }, a(0, n, "dataSource", t.prototype._$get_dataSource, function (t) {
            if (this._dataSource = t, "number" == typeof t && Math.floor(t) == t || "string" == typeof t) this.selectedIndex = parseInt(t); else for (var e in this._dataSource) this.hasOwnProperty(e) && (this[e] = this._dataSource[e]);
        }), a(0, n, "selectedIndex", function () {
            return this._selectedIndex;
        }, function (t) {
            this._selectedIndex != t && (this.setSelect(this._selectedIndex, !1), this._selectedIndex = t,
                this.setSelect(this._selectedIndex, !0));
        }), a(0, n, "selection", function () {
            return this._selectedIndex > -1 && this._selectedIndex < this._items.length ? this._items[this._selectedIndex] : null;
        }, function (t) {
            this.selectedIndex = this._items.indexOf(t);
        }), a(0, n, "items", function () {
            return this._items;
        }), a(0, n, "setIndexHandler", function () {
            return this._setIndexHandler;
        }, function (t) {
            this._setIndexHandler = t;
        }), e;
    }(N), at = function (t) {
        function e() {
            e.__super.call(this);
        }
        return s(e, "laya.ui.VScrollBar", U), e;
    }(), rt = function (t) {
        function e(t) {
            this._bg = null, this._skin = null, e.__super.call(this), void 0 === t && (t = ""),
                this.text = t, this.skin = this.skin;
        }
        s(e, "laya.ui.TextInput", t);
        var n = e.prototype;
        return n.preinitialize = function () {
            this.mouseEnabled = !0;
        }, n.destroy = function (e) {
            void 0 === e && (e = !0), t.prototype.destroy.call(this, e), this._bg && this._bg.destroy(),
                this._bg = null;
        }, n.createChildren = function () {
            this.addChild(this._tf = new v()), this._tf.padding = R.inputLabelPadding, this._tf.on("input", this, this._onInput),
                this._tf.on("enter", this, this._onEnter), this._tf.on("blur", this, this._onBlur),
                this._tf.on("focus", this, this._onFocus);
        }, n._onFocus = function () {
            this.event("focus", this);
        }, n._onBlur = function () {
            this.event("blur", this);
        }, n._onInput = function () {
            this.event("input", this);
        }, n._onEnter = function () {
            this.event("enter", this);
        }, n.initialize = function () {
            this.width = 128, this.height = 22;
        }, n.select = function () {
            this._tf.select();
        }, n.setSelection = function (t, e) {
            this._tf.setSelection(t, e);
        }, a(0, n, "text", t.prototype._$get_text, function (t) {
            this._tf.text != t && (t += "", this._tf.text = t, this.event("change"));
        }), a(0, n, "bg", function () {
            return this._bg;
        }, function (t) {
            this.graphics = this._bg = t;
        }), a(0, n, "inputElementYAdjuster", function () {
            return this._tf.inputElementYAdjuster;
        }, function (t) {
            this._tf.inputElementYAdjuster = t;
        }), a(0, n, "multiline", function () {
            return this._tf.multiline;
        }, function (t) {
            this._tf.multiline = t;
        }), a(0, n, "skin", function () {
            return this._skin;
        }, function (t) {
            this._skin != t && (this._skin = t, this._bg || (this.graphics = this._bg = new k()),
                this._bg.source = m.getRes(this._skin), this._width && (this._bg.width = this._width),
                this._height && (this._bg.height = this._height));
        }), a(0, n, "sizeGrid", function () {
            return this._bg && this._bg.sizeGrid ? this._bg.sizeGrid.join(",") : null;
        }, function (t) {
            this._bg || (this.graphics = this._bg = new k()), this._bg.sizeGrid = P.fillArray(R.defaultSizeGrid, t, Number);
        }), a(0, n, "inputElementXAdjuster", function () {
            return this._tf.inputElementXAdjuster;
        }, function (t) {
            this._tf.inputElementXAdjuster = t;
        }), a(0, n, "width", t.prototype._$get_width, function (t) {
            i.superSet(Y, this, "width", t), this._bg && (this._bg.width = t);
        }), a(0, n, "height", t.prototype._$get_height, function (t) {
            i.superSet(Y, this, "height", t), this._bg && (this._bg.height = t);
        }), a(0, n, "editable", function () {
            return this._tf.editable;
        }, function (t) {
            this._tf.editable = t;
        }), a(0, n, "restrict", function () {
            return this._tf.restrict;
        }, function (t) {
            this._tf.restrict = t;
        }), a(0, n, "prompt", function () {
            return this._tf.prompt;
        }, function (t) {
            this._tf.prompt = t;
        }), a(0, n, "promptColor", function () {
            return this._tf.promptColor;
        }, function (t) {
            this._tf.promptColor = t;
        }), a(0, n, "maxChars", function () {
            return this._tf.maxChars;
        }, function (t) {
            this._tf.maxChars = t;
        }), a(0, n, "focus", function () {
            return this._tf.focus;
        }, function (t) {
            this._tf.focus = t;
        }), a(0, n, "type", function () {
            return this._tf.type;
        }, function (t) {
            this._tf.type = t;
        }), a(0, n, "asPassword", function () {
            return this._tf.asPassword;
        }, function (t) {
            this._tf.asPassword = t;
        }), e;
    }(Y), ot = function (t) {
        function e() {
            e.__super.call(this);
        }
        return s(e, "laya.ui.VSlider", W), e;
    }(), ht = function (t) {
        function e() {
            this.popupCenter = !0, this.closeHandler = null, this.popupEffect = null, this.closeEffect = null,
                this.group = null, this.isModal = !1, this._dragArea = null, e.__super.call(this);
        }
        s(e, "laya.ui.Dialog", t);
        var n = e.prototype;
        return n.initialize = function () {
            this.popupEffect = e.manager.popupEffectHandler, this.closeEffect = e.manager.closeEffectHandler,
                this._dealDragArea(), this.on("click", this, this._onClick);
        }, n._dealDragArea = function () {
            var t = this.getChildByName("drag");
            t && (this.dragArea = t.x + "," + t.y + "," + t.width + "," + t.height, t.removeSelf());
        }, n._onClick = function (t) {
            var e = t.target;
            if (e) switch (e.name) {
                case "close":
                case "cancel":
                case "sure":
                case "no":
                case "ok":
                case "yes":
                    this.close(e.name);
            }
        }, n.show = function (t, e) {
            void 0 === t && (t = !1), void 0 === e && (e = !0), this._open(!1, t, e);
        }, n.popup = function (t, e) {
            void 0 === t && (t = !1), void 0 === e && (e = !0), this._open(!0, t, e);
        }, n._open = function (t, i, n) {
            e.manager.lock(!1), this.isModal = t, e.manager.open(this, i, n);
        }, n.onOpened = function () { }, n.close = function (t, i) {
            void 0 === i && (i = !0), e.manager.close(this, t, i);
        }, n.onClosed = function (t) { }, n._onMouseDown = function (t) {
            var e = this.getMousePoint();
            this._dragArea.contains(e.x, e.y) ? this.startDrag() : this.stopDrag();
        }, a(0, n, "dragArea", function () {
            return this._dragArea ? this._dragArea.toString() : null;
        }, function (t) {
            if (t) {
                var e = P.fillArray([0, 0, 0, 0], t, Number);
                this._dragArea = new x(e[0], e[1], e[2], e[3]), this.on("mousedown", this, this._onMouseDown);
            } else this._dragArea = null, this.off("mousedown", this, this._onMouseDown);
        }), a(0, n, "isPopup", function () {
            return null != this.parent;
        }), a(0, n, "zOrder", t.prototype._$get_zOrder, function (t) {
            i.superSet(K, this, "zOrder", t), e.manager._checkMask();
        }), a(1, e, "manager", function () {
            return e._manager = e._manager || new B();
        }, function (t) {
            e._manager = t;
        }), e.setLockView = function (t) {
            e.manager.setLockView(t);
        }, e.lock = function (t) {
            e.manager.lock(t);
        }, e.closeAll = function () {
            e.manager.closeAll();
        }, e.getDialogsByGroup = function (t) {
            return e.manager.getDialogsByGroup(t);
        }, e.closeByGroup = function (t) {
            return e.manager.closeByGroup(t);
        }, e.CLOSE = "close", e.CANCEL = "cancel", e.SURE = "sure", e.NO = "no", e.OK = "ok",
            e.YES = "yes", e._manager = null, e;
    }(K), lt = function (t) {
        function e() {
            e.__super.call(this);
        }
        s(e, "laya.ui.HBox", t);
        var n = e.prototype;
        return n.sortItem = function (t) {
            t && t.sort(function (t, e) {
                return t.x - e.x;
            });
        }, n.changeItems = function () {
            this._itemChanged = !1;
            for (var t = [], e = 0, i = 0, n = this.numChildren; i < n; i++) {
                var s = this.getChildAt(i);
                s && s.layoutEnabled && (t.push(s), e = this._height ? this._height : Math.max(e, s.height * s.scaleY));
            }
            this.sortItem(t);
            var a = 0;
            for (i = 0, n = t.length; i < n; i++) (s = t[i]).x = a, a += s.width * s.scaleX + this._space,
                "top" == this._align ? s.y = 0 : "middle" == this._align ? s.y = .5 * (e - s.height * s.scaleY) : "bottom" == this._align && (s.y = e - s.height * s.scaleY);
            this.changeSize();
        }, a(0, n, "height", t.prototype._$get_height, function (t) {
            this._height != t && (i.superSet(q, this, "height", t), this.callLater(this.changeItems));
        }), e.NONE = "none", e.TOP = "top", e.MIDDLE = "middle", e.BOTTOM = "bottom", e;
    }(q), ct = function (t) {
        function a(t) {
            this.gameStopHD = !1, this.iconImgTl = null, this._iconImage = null, this._moreBox = null,
                this._gameBox = null, this.screenType = 0, this._moreGameDataUrl = "https://abc.layabox.com/public/more/gamelist2.json",
                this._iconImageObj = null, this.clickCallBack = null, this.closeCallBack = null,
                this.isShow = !1, this.dinfo = null, this.ErrorUrlHttps = "https://elastic.layabox.com/",
                this.tongjiType = "bdm", void 0 === t && (t = 0), a.__super.call(this), this.screenType = t,
                this.init();
        }
        var r, h;
        s(a, "laya.ui.MoreGame", K);
        var l = a.prototype;
        return l.getLocalDateString = function (t) {
            void 0 === t && (t = 0);
            var e = this.getDateByTimestamp(t).toLocaleDateString();
            if (o.onLimixiu || o.onMiniGame) {
                var i = new Date();
                e = a.toLocaleDateString(i.getTime());
            }
            var n = new RegExp("/", "g");
            return e = e.replace(n, "-");
        }, l.getDateByTimestamp = function (t) {
            return void 0 === t && (t = 0), t && "" != t ? new Date(t) : new Date();
        }, l.reportError = function (t, i, n) {
            void 0 === i && (i = ""), n = n || {};
            var s = Date.now(), r = new Date(s + 0);
            n.date = r.toLocaleString(), n.etype = t, "error" != t && "statistics" != t && (t = "statistics"),
                n.version = "V0.0.1", n.gameId = 10100, n.dinfo = this.dinfo, n.channel = -1e3,
                n.msg = i, n["@timestamp"] = r.toISOString(), n.user = this.getUserId(), n.openid = this.getOpenId();
            var o = a.getDay(r);
            n.rdate = o, n.day = r.getDate() + "", n.hour = r.getHours() + "", n.minute = r.getMinutes() + "",
                n.gameurl = e.baseURI, n.regTime = 0, "error" == t ? this.sendLog(n, this.tongjiType + "error-" + o.substring(0, 6) + "/" + t + "/", t) : this.sendLog(n, this.tongjiType + "-" + o.substring(0, 6) + "/" + t + "/", t);
        }, l.getUserId = function () {
            var t = parseInt(y.getItem("layauserid") + "") || -1;
            return -1 == t && (t = this.randRange(0, 1e9), y.setItem("layauserid", t + "")),
                t;
        }, l.getOpenId = function () {
            var t = y.getItem("openid");
            if (null == t || "" == t) {
                t = "";
                for (var e = 0; e < 32; e++) {
                    var i = this.randRange(0, 62);
                    t += "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789".charAt(i);
                }
                y.setItem("openid", t);
            }
            return t;
        }, l.sendLog = function (t, e, i) {
            var n = this, s = new g();
            s.on("error", this, function (t, e, i) {
                if (i && -1 != i.indexOf("[404]")) {
                    new g().send(n.ErrorUrlHttps + "garbage/" + e + "/", JSON.stringify(t), "post", "text", ["Content-Type", "application/json"]);
                }
            }, [t, i]), o.onBDMiniGame && (t.gameurl = ""), s.send(this.ErrorUrlHttps + e, JSON.stringify(t), "post", "text", ["Content-Type", "application/json"]);
        }, l.initEvent = function () {
            this.on("click", this, this.onIconClick);
        }, l.onStageResize = function () {
            var t = Math.min(i.stage.width / i.stage.designWidth, i.stage.height / i.stage.designHeight);
            i.stage.width < 720 && (t = .9), this._moreBox && this._moreBox.scale(t, t), this._gameBox && this._gameBox.scale(t, t);
        }, l.tada = function (t, e, i, n) {
            void 0 === i && (i = 1.1), void 0 === n && (n = 1);
            var s = new T();
            return s.reset(), s.to(t, {
                scaleX: i,
                scaleY: i,
                rotation: 3
            }, .1 * e).to(t, {
                scaleX: i,
                scaleY: i,
                rotation: -3
            }, .1 * e).to(t, {
                scaleX: i,
                scaleY: i,
                rotation: 3
            }, .1 * e).to(t, {
                scaleX: i,
                scaleY: i,
                rotation: -3
            }, .1 * e).to(t, {
                scaleX: i,
                scaleY: i,
                rotation: 3
            }, .1 * e).to(t, {
                scaleX: i,
                scaleY: i,
                rotation: -3
            }, .1 * e).to(t, {
                scaleX: i,
                scaleY: i,
                rotation: 3
            }, .1 * e).to(t, {
                scaleX: i,
                scaleY: i,
                rotation: -3
            }, .1 * e).to(t, {
                scaleX: i,
                scaleY: i,
                rotation: 3
            }, .1 * e).to(t, {
                scaleX: n,
                scaleY: n,
                rotation: 0
            }, .1 * e), s.play(0), s;
        }, l.dispose = function () {
            this.removeEvent(), this.gameStopHD = !0, a._moreGameData = null, this._iconImageObj = null,
                this.clickCallBack = null, this.closeCallBack = null, this.iconImgTl && (this.iconImgTl.offAll("complete"),
                    this.iconImgTl = null), this._moreBox && (this._moreBox.removeChildren(), this._moreBox = null),
                this._gameBox && (this._gameBox.removeChildren(), this._gameBox = null), this._iconImage && (this._iconImage.removeSelf(),
                    this._iconImage = null);
        }, l.onSetIconType = function (t) {
            this.gameStopHD = !t, this.visible = t;
        }, l.checkIconImgHD = function () {
            this.iconImgTl ? this.iconImgTl.play(0) : this.iconImgTl = this.tada(this._iconImage, 1200, 1.1, .9),
                this.iconImgTl.on("complete", this, this.onTlComplete);
        }, l.onTlComplete = function () {
            if (this.parent) {
                if (this._iconImage.scale(.9, .9), this._iconImage.rotation = 0, this.gameStopHD && this.iconImgTl) return this.iconImgTl.offAll("complete"),
                    void (this.iconImgTl = null);
                i.timer.once(1e3, this, this.onYanChiPlay);
            } else this.iconImgTl && (this.iconImgTl.offAll(), this.iconImgTl = null);
        }, l.onYanChiPlay = function () {
            this.parent && this.iconImgTl ? this.iconImgTl.play(0) : this.iconImgTl && (this.iconImgTl.offAll("complete"),
                this.iconImgTl = null);
        }, l.removeEvent = function () {
            this.off("click", this, this.onIconClick);
        }, l.onIconClick = function () {
            this.isShow = !0, null != this.clickCallBack && this.clickCallBack.run();
            var t = y.getItem("currentTime"), e = this.getLocalDateString();
            t != e ? (y.setItem("currentTime", e), this.reportError(a._moreGameData.statid1)) : this.reportError(a._moreGameData.statid2),
                this.onResLoaded();
        }, l.onResLoaded = function () {
            if (this._moreBox) this._moreBox.visible = !0; else {
                this._moreBox = new N(), i.stage.addChild(this._moreBox), this._moreBox.zOrder = 99999,
                    this._moreBox.left = this._moreBox.right = this._moreBox.top = this._moreBox.bottom = 0;
                var t = this.onCreateImage(a.onGetAtlasDanImgUrl("img_white_bg"), this._moreBox);
                t.top = t.left = t.right = t.bottom = 0, t.sizeGrid = "1,1,1,1,1";
                var e = this.onCreateImage(a.onGetAtlasDanImgUrl("hengfengexian"), this._moreBox);
                e.left = e.right = 0, e.y = 132, e.alpha = .2;
                var n = this.onCreateImage(a.onGetAtlasDanImgUrl("img_font_jingcai"), this._moreBox);
                n.on("click", this, this.onJiantouImgClick), this.isQMP() && this.screenType ? n.pos(15, 70) : n.pos(15, 45);
                var s = new Q();
                this._moreBox.addChild(s), s.itemRender = r, s.selectEnable = !0, s.vScrollBarSkin = "",
                    s.scrollBar.autoHide = !0, s.scrollBar.elasticDistance = 250, s.renderHandler = new p(this, this.onGameListRender);
                var o = a._moreGameData.marvellousGame.gameList, h = [];
                h.push(o[0]), h.push(o[1]);
                var l = this.RandomNumBoth(h.length, o.length - h.length, o.length);
                if (!l) return void (this.visible = !1);
                try {
                    for (var c = 0, u = l.length; c < u; c++) {
                        var d = l[c];
                        h.push(o[d]);
                    }
                    a._moreGameData.marvellousGame.gameList = [], a._moreGameData.marvellousGame.gameList = h,
                        s.array = a._moreGameData.marvellousGame.gameList;
                } catch (t) {
                    s.array = a._moreGameData.marvellousGame.gameList;
                }
                this.screenType && (s.spaceY = 10, s.width = 690, this.isQMP() ? s.height = i.stage.height + 130 : s.height = 1139,
                    s.y = 139, s.centerX = 0), this.onStageResize();
            }
        }, l.RandomNumBoth = function (t, e, i) {
            for (var n = [], s = t; s < i; s++) n.push(s);
            var a = [], r = n.length;
            for (s = 0; s < r; s++) {
                n.length;
                var o = Math.floor(Math.random() * n.length);
                if (a.push(n[o]), n.splice(o, 1), n.length <= r - e) return a;
            }
            return null;
        }, l.isQMP = function () {
            var t = !1, e = 0;
            if (e = "horizontal" == i.stage.screenMode ? o.height % 9 : o.width % 9, o.onAndroid && 0 == e) {
                var n = 0;
                n = "horizontal" == i.stage.screenMode ? o.width : o.height, -1 != [2280, 2160, 2244, 3120, 2248, 2340, 2310].indexOf(n) && (t = !0);
            }
            var s = /iPhone/gi.test(o.window.navigator.userAgent) && 375 == Math.min(o.clientHeight, o.clientWidth) && 812 == Math.max(o.clientHeight, o.clientWidth), a = 414 == Math.min(o.clientHeight, o.clientWidth) && 896 == Math.max(o.clientHeight, o.clientWidth);
            return !o.onMiniGame && !o.onBDMiniGame || o.onAndroid || !s && !a || (t = !0),
                t;
        }, l.onDrawShapes = function (t, e, i, n) {
            void 0 === i && (i = 5), void 0 === n && (n = !1);
            var s = i;
            n && (s = 0);
            var a = new L();
            return a.graphics.drawPath(0, 0, [["moveTo", i, 0], ["lineTo", 105, 0], ["arcTo", t, 0, t, i, i], ["lineTo", t, e], ["arcTo", t, e + i, 105, e + i, s], ["lineTo", i, e + i], ["arcTo", 0, e + i, 0, e, s], ["lineTo", 0, i], ["arcTo", 0, 0, i, 0, i], ["closePath"]], {
                fillStyle: "#ff0000"
            }), a;
        }, l.onCreateMaskImg = function (t, e) {
            var i = this.onCreateImage(a.onGetAtlasDanImgUrl("dayuan"), e), n = this.onCreateImage(t, i);
            n.pos(11, 10);
            var s = new L();
            return s.graphics.drawCircle(71, 74, 68, "#ff0000"), n.mask = s, i.scale(.7, .7),
                i;
        }, l.onGameListRender = function (t, e) {
            var i = a._moreGameData.marvellousGame.gameList;
            if (!(e < 0 || e > i.length - 1)) {
                var n = i[e];
                t.init(n, this.screenType, new p(this, this.onItemClickCallBack));
            }
        }, l.onItemClickCallBack = function (t) {
            var e = this;
            if (swan.navigateToMiniProgram) {
                var i = t.appKey, n = t.path, s = t.extendInfo;
                swan.navigateToMiniProgram({
                    appKey: i,
                    path: n,
                    extraData: s,
                    success: function (t) { },
                    fail: function (t) { },
                    complete: function (i) {
                        e.reportError(t.statid);
                    }.bind(this)
                });
            }
        }, l.onJiantouImgClick = function (t) {
            this.isShow = !1, this._moreBox && (this._moreBox.visible = !1), null != this.closeCallBack && this.closeCallBack.run();
        }, l.onCreateLabel = function (t, e, i, n, s, a, r) {
            void 0 === i && (i = 24), void 0 === n && (n = "#000000"), void 0 === s && (s = !1),
                void 0 === a && (a = "center"), void 0 === r && (r = 10);
            var o = new Y();
            return o.text = t, o.font = "Microsoft YaHei", o.fontSize = i, o.color = n, o.bold = !0,
                o.leading = r, o.valign = "middle", o.align = a, o.wordWrap = s, e.addChild(o),
                o;
        }, l.onCreateImage = function (t, e) {
            var i = new O();
            return i.skin = t, e.addChild(i), i;
        }, l.init = function () {
            var t = o.window.navigator.userAgent.indexOf("SwanGame") > -1;
            this.visible = !1, t && (this.dinfo = JSON.stringify(laya.bd.mini.BMiniAdapter.systemInfo),
                this.onGetAdvsListData());
        }, l.randRange = function (t, e) {
            return Math.floor(Math.random() * (e - t + 1)) + t;
        }, l.onGetAdvsListData = function () {
            var t = this, e = this.randRange(1e4, 1e6), i = this._moreGameDataUrl + "?" + e;
            a._http.open("get", i, !0), a._http.setRequestHeader("Content-Type", "application/x-www-form-urlencoded"),
                a._http.responseType = "text", a._http.onerror = function (e) {
                    t._onError(e);
                }, a._http.onload = function (e) {
                    t._onLoad(e);
                }, a._http.send(null);
        }, l._onError = function (t) {
            this.error("Request failed Status:" + a._http.status + " text:" + a._http.statusText);
        }, l._onLoad = function (t) {
            var e = a._http, i = void 0 !== e.status ? e.status : 200;
            200 === i || 204 === i || 0 === i ? this.complete() : this.error("[" + e.status + "]" + e.statusText + ":" + e.responseURL);
        }, l.error = function (t) {
            this.event("error", t);
        }, l.complete = function () {
            try {
                var t = a._http.response || a._http.responseText;
                a._moreGameData = JSON.parse(t), this.initUI();
            } catch (t) {
                !1, this.error(t.message);
            }
        }, l.initUI = function () {
            a._moreGameData.isOpen && this.screenType ? (this._iconImage || (this._iconImage = new O(),
                this.addChild(this._iconImage)), this._iconImage.skin = a.onGetImgSkinUrl(a._moreGameData.icon),
                this._iconImageObj && (this._iconImage.size(this._iconImageObj.width, this._iconImageObj.height),
                    this._iconImage.pivot(this._iconImageObj.width / 2, this._iconImageObj.height / 2),
                    this._iconImage.pos(this._iconImageObj.width / 2, this._iconImageObj.height / 2)),
                this.visible = !0, this.initEvent(), this.gameStopHD = !1, this.checkIconImgHD()) : this.visible = !1;
        }, l.setIconSize = function (t, e) {
            this._iconImage && (this._iconImage.size(t, e), this._iconImage.pivot(t / 2, e / 2),
                this._iconImage.pos(t / 2, e / 2)), this._iconImageObj = {
                    width: t,
                    height: e
                };
        }, a.toLocaleDateString = function (t) {
            return a.getDateFormatStr(t, "/");
        }, a.getDateFormatStr = function (t, e) {
            void 0 === e && (e = "yynndd");
            var i = new Date(t), n = i.getFullYear(), s = i.getMonth() + 1, a = i.getDate(), r = i.getHours(), o = i.getMinutes(), h = i.getSeconds();
            switch (e) {
                case "yynndd":
                    return n.toString() + "年" + s.toString() + "月" + a.toString() + "日";

                case "/":
                    return n.toString() + "/" + s.toString() + "/" + a.toString();
            }
            return n.toString() + "年" + s.toString() + "月" + a.toString() + "日" + r.toString() + "时" + o.toString() + "分" + h.toString() + "秒";
        }, a.getDay = function (t) {
            var e = t.getMonth() + 1, i = t.getDate();
            return t.getFullYear() + "" + (e < 10 ? "0" + e : e) + (i < 10 ? "0" + i : i);
        }, a.onGetAtlasDanImgUrl = function (t) {
            return a._moreGameData.imgPath + a._moreGameData.atlas + t + ".png";
        }, a.onGetImgSkinUrl = function (t) {
            return a._moreGameData.imgPath + t;
        }, a.onGetIconImgSkinUrl = function (t) {
            return a._moreGameData.iconPath + t;
        }, a._moreGameData = null, n(a, ["_http", function () {
            return this._http = new o.window.XMLHttpRequest();
        }]), a.__init$ = function () {
            r = function (t) {
                function e() {
                    this.titleLabel = null, this.gameListBox = null, e.__super.call(this);
                }
                s(e, "", N);
                var i = e.prototype;
                return i.init = function (t, e, i) {
                    if (this.titleLabel ? this.titleLabel.text = t.title : (this.titleLabel = this.onCreateLabel(t.title, this, 32, "#3d3939"),
                        this.titleLabel.pos(8, 0), this.titleLabel.size(162, 50)), this.gameListBox) for (n = 0,
                            s = this.gameListBox._childs.length; n < s; n++) (a = this.gameListBox._childs[n]).init(t.gameList[n], e, i); else {
                        this.gameListBox = new N(), this.addChild(this.gameListBox);
                        for (var n = 0, s = t.gameList.length; n < s; n++) {
                            var a = new h();
                            a.init(t.gameList[n], e, i), a.x = 0 + 175 * n, a.y = 65, this.gameListBox.addChild(a);
                        }
                    }
                    this.size(695, 340), this.cacheAs = "bitmap";
                }, i.onCreateLabel = function (t, e, i, n, s) {
                    void 0 === i && (i = 26), void 0 === n && (n = "#000000"), void 0 === s && (s = !0);
                    var a = new Y();
                    return a.text = t, a.font = "Microsoft YaHei", a.fontSize = i, a.color = n, a.bold = s,
                        a.leading = 10, a.valign = "middle", a.align = "center", a.overflow = "hidden",
                        e.addChild(a), a;
                }, e;
            }(), h = function (t) {
                function e() {
                    this.kuangImg = null, this.iconNameLabel = null, this.iconImg = null, this.playImg = null,
                        this.itemData = null, this.callBackHandler = null, e.__super.call(this);
                }
                s(e, "", N);
                var i = e.prototype;
                return i.MoveGameItem = function () { }, i.initEvent = function () {
                    this.on("click", this, this.onItemClick);
                }, i.onItemClick = function () {
                    null != this.callBackHandler && this.callBackHandler.runWith([this.itemData]);
                }, i.init = function (t, e, i) {
                    if (this.itemData = t, this.callBackHandler = i, this.kuangImg ? this.kuangImg.skin = a.onGetAtlasDanImgUrl("dayuan") : this.kuangImg = this.onCreateImage(a.onGetAtlasDanImgUrl("dayuan"), this),
                        this.iconImg) this.iconImg.skin = a.onGetIconImgSkinUrl(t.icon); else {
                        this.iconImg = this.onCreateImage(a.onGetIconImgSkinUrl(t.icon), this);
                        var n = new L();
                        n.graphics.drawCircle(71, 74, 68, "#ff0000"), this.iconImg.mask = n, this.iconImg.pos(13, 10);
                    }
                    this.iconNameLabel ? this.iconNameLabel.text = t.name : (this.iconNameLabel = this.onCreateLabel(t.name, this, 28, "#3d3939"),
                        this.iconNameLabel.pos(7, 165)), this.playImg ? this.playImg.skin = a.onGetAtlasDanImgUrl("img_play") : (this.playImg = this.onCreateImage(a.onGetAtlasDanImgUrl("img_play"), this),
                            this.playImg.pos(12, 210)), this.size(165, 270), this.initEvent();
                }, i.onCreateLabel = function (t, e, i, n, s) {
                    void 0 === i && (i = 24), void 0 === n && (n = "#000000"), void 0 === s && (s = !1);
                    var a = new Y();
                    return a.text = t, a.font = "Microsoft YaHei", a.fontSize = i, a.color = n, a.bold = s,
                        a.leading = 10, a.valign = "middle", a.align = "center", a.size(152, 44), a.overflow = "hidden",
                        e.addChild(a), a;
                }, i.onCreateImage = function (t, e) {
                    var i = new O();
                    return i.skin = t, e.addChild(i), i;
                }, e;
            }();
        }, a;
    }(), ut = function (t) {
        function e() {
            e.__super.call(this);
        }
        s(e, "laya.ui.VBox", t);
        var n = e.prototype;
        return n.changeItems = function () {
            this._itemChanged = !1;
            for (var t = [], e = 0, i = 0, n = this.numChildren; i < n; i++) {
                var s = this.getChildAt(i);
                s && s.layoutEnabled && (t.push(s), e = this._width ? this._width : Math.max(e, s.width * s.scaleX));
            }
            this.sortItem(t);
            var a = 0;
            for (i = 0, n = t.length; i < n; i++) (s = t[i]).y = a, a += s.height * s.scaleY + this._space,
                "left" == this._align ? s.x = 0 : "center" == this._align ? s.x = .5 * (e - s.width * s.scaleX) : "right" == this._align && (s.x = e - s.width * s.scaleX);
            this.changeSize();
        }, a(0, n, "width", t.prototype._$get_width, function (t) {
            this._width != t && (i.superSet(q, this, "width", t), this.callLater(this.changeItems));
        }), e.NONE = "none", e.LEFT = "left", e.CENTER = "center", e.RIGHT = "right", e;
    }(q), dt = function (t) {
        function e() {
            e.__super.call(this);
        }
        s(e, "laya.ui.RadioGroup", et);
        return e.prototype.createItem = function (t, e) {
            return new it(t, e);
        }, e;
    }(), _t = function (t) {
        function e() {
            e.__super.call(this);
        }
        s(e, "laya.ui.Tab", et);
        return e.prototype.createItem = function (t, e) {
            return new G(t, e);
        }, e;
    }(), ft = function (t) {
        function e(t) {
            this._vScrollBar = null, this._hScrollBar = null, void 0 === t && (t = ""), e.__super.call(this, t);
        }
        s(e, "laya.ui.TextArea", t);
        var n = e.prototype;
        return n.destroy = function (e) {
            void 0 === e && (e = !0), t.prototype.destroy.call(this, e), this._vScrollBar && this._vScrollBar.destroy(),
                this._hScrollBar && this._hScrollBar.destroy(), this._vScrollBar = null, this._hScrollBar = null;
        }, n.initialize = function () {
            this.width = 180, this.height = 150, this._tf.wordWrap = !0, this.multiline = !0;
        }, n.onVBarChanged = function (t) {
            this._tf.scrollY != this._vScrollBar.value && (this._tf.scrollY = this._vScrollBar.value);
        }, n.onHBarChanged = function (t) {
            this._tf.scrollX != this._hScrollBar.value && (this._tf.scrollX = this._hScrollBar.value);
        }, n.changeScroll = function () {
            var t = this._vScrollBar && this._tf.maxScrollY > 0, e = this._hScrollBar && this._tf.maxScrollX > 0, i = t ? this._width - this._vScrollBar.width : this._width, n = e ? this._height - this._hScrollBar.height : this._height, s = this._tf.padding || R.labelPadding;
            this._tf.width = i, this._tf.height = n, this._vScrollBar && (this._vScrollBar.x = this._width - this._vScrollBar.width - s[2],
                this._vScrollBar.y = s[1], this._vScrollBar.height = this._height - (e ? this._hScrollBar.height : 0) - s[1] - s[3],
                this._vScrollBar.scrollSize = 1, this._vScrollBar.thumbPercent = n / Math.max(this._tf.textHeight, n),
                this._vScrollBar.setScroll(1, this._tf.maxScrollY, this._tf.scrollY), this._vScrollBar.visible = t),
                this._hScrollBar && (this._hScrollBar.x = s[0], this._hScrollBar.y = this._height - this._hScrollBar.height - s[3],
                    this._hScrollBar.width = this._width - (t ? this._vScrollBar.width : 0) - s[0] - s[2],
                    this._hScrollBar.scrollSize = Math.max(.033 * i, 1), this._hScrollBar.thumbPercent = i / Math.max(this._tf.textWidth, i),
                    this._hScrollBar.setScroll(0, this.maxScrollX, this.scrollX), this._hScrollBar.visible = e);
        }, n.scrollTo = function (t) {
            this.commitMeasure(), this._tf.scrollY = t;
        }, a(0, n, "scrollY", function () {
            return this._tf.scrollY;
        }), a(0, n, "width", t.prototype._$get_width, function (t) {
            i.superSet(rt, this, "width", t), this.callLater(this.changeScroll);
        }), a(0, n, "hScrollBar", function () {
            return this._hScrollBar;
        }), a(0, n, "height", t.prototype._$get_height, function (t) {
            i.superSet(rt, this, "height", t), this.callLater(this.changeScroll);
        }), a(0, n, "maxScrollX", function () {
            return this._tf.maxScrollX;
        }), a(0, n, "vScrollBarSkin", function () {
            return this._vScrollBar ? this._vScrollBar.skin : null;
        }, function (t) {
            null == this._vScrollBar && (this.addChild(this._vScrollBar = new at()), this._vScrollBar.on("change", this, this.onVBarChanged),
                this._vScrollBar.target = this._tf, this.callLater(this.changeScroll)), this._vScrollBar.skin = t;
        }), a(0, n, "hScrollBarSkin", function () {
            return this._hScrollBar ? this._hScrollBar.skin : null;
        }, function (t) {
            null == this._hScrollBar && (this.addChild(this._hScrollBar = new Z()), this._hScrollBar.on("change", this, this.onHBarChanged),
                this._hScrollBar.mouseWheelEnable = !1, this._hScrollBar.target = this._tf, this.callLater(this.changeScroll)),
                this._hScrollBar.skin = t;
        }), a(0, n, "vScrollBar", function () {
            return this._vScrollBar;
        }), a(0, n, "maxScrollY", function () {
            return this._tf.maxScrollY;
        }), a(0, n, "scrollX", function () {
            return this._tf.scrollX;
        }), e;
    }(rt);
    !function (t) {
        function e() {
            this._uiView = null, this.isCloseOther = !1, e.__super.call(this);
        }
        s(e, "laya.ui.AsynDialog", ht);
        var i = e.prototype;
        i.createView = function (t) {
            this._uiView = t;
        }, i._open = function (t, e, i) {
            this.isModal = t, this.isCloseOther = e, ht.manager.lock(!0), this._uiView ? this.onCreated() : this.onOpen();
        }, i.onCreated = function () {
            this.createUI(), this.onOpen();
        }, i.createUI = function () {
            laya.ui.View.prototype.createView.call(this, this._uiView), this._uiView = null,
                this._dealDragArea();
        }, i.onOpen = function () {
            ht.manager.open(this, this.isCloseOther), ht.manager.lock(!1);
        }, i.close = function (t, e) {
            void 0 === e && (e = !0), ht.manager.close(this), this.onClose();
        }, i.onClose = function () { }, i.destroy = function (t) {
            void 0 === t && (t = !0), laya.ui.View.prototype.destroy.call(this, t), this._uiView = null,
                this.onDestroy();
        }, i.onDestroy = function () { };
    }();
    i.__init([K, ct]);
}(window, document, Laya), "function" == typeof define && define.amd && define("laya.core", ["require", "exports"], function (t, e) {
    "use strict";
    Object.defineProperty(e, "__esModule", {
        value: !0
    });
    for (var i in Laya) {
        var n = Laya[i];
        n && n.__isclass && (e[i] = n);
    }
});

var openId, wxuInfo;

!function (t) {
    t.userid = 0, t.appId = "0", t.sorce = 0, t.openId = "ooooUUUyyxuuxxxhxyyyyy1",
        t.city = "0", t.country = "0", t.gender = 1, t.anguage = "0", t.nickName = "xxx",
        t.province = "0", t.unionId = "0", t.code = "res.code", t.init = function (t) { };
}(wxuInfo || (wxuInfo = {}));

var wxlogin;

!function (t) {
    function e() {
        console.log("进入登录"), gztjapi.login0(Laya.Handler.create(this, function (e) {
            console.log("进入登录 result" + e), 0 == e ? t.curHandler && t.curHandler.runWith(0) : t.curHandler && t.curHandler.runWith(1),
                t.qq && t.qq.hideLoading();
        }));
    }
    t.qq = window.qq, t.eloginGame = function () {
        t.qq ? (t.qq.showLoading({
            mask: !0,
            title: "载入中..."
        }), t.qq.login({
            success: function (t) {
                var i = t.code;
                wxuInfo.code = i, e();
            },
            fal: function () {
                t.qq.hideLoading();
            }
        })) : e();
    }, t.setLoadFinishHandler = function (e) {
        t.curHandler = e;
    };
}(wxlogin || (wxlogin = {}));

var wxconf;

!function (t) {
    t.getConf = function () {
        var e = Math.floor(Math.random() * t.conf.length);
        return t.conf[e];
    }, t.conf = [{
        url: "https://mmocgame.qpic.cn/wechatgame/VPQxPOIic3BbWyUntclJxiasA41ib8iboIZX0RyTPaJEcgS4sD91X9pY5QJBYtGGYkAJ/0",
        id: "vSNh4i6lSqSxmX8iL59w7A==",
        info: "快来救救小姐姐 "
    }, {
        url: "https://mmocgame.qpic.cn/wechatgame/VPQxPOIic3BbWyUntclJxiasA41ib8iboIZX0RyTPaJEcgS4sD91X9pY5QJBYtGGYkAJ/0",
        id: "vSNh4i6lSqSxmX8iL59w7A==",
        info: "快来帮小姐姐突围"
    }, {
        url: "https://mmocgame.qpic.cn/wechatgame/VPQxPOIic3BbWyUntclJxiasA41ib8iboIZX0RyTPaJEcgS4sD91X9pY5QJBYtGGYkAJ/0",
        id: "vSNh4i6lSqSxmX8iL59w7A==",
        info: "小姐姐能突围吗"
    }];
}(wxconf || (wxconf = {}));

var wxapi;

!function (t) {
    function e(e) {
        uitiem.setLoadingView(), i(), a = getCurTime(), t.onshow(Laya.Handler.create(this, function () {
            if (t.qq.offShow(null), getCurTime() - a >= r) {
                if (isToday(data.todaytime) || (data.todayShareNum = 0, data.todaytime = getCurTime(),
                    data.save()), data.todayShareNum >= 4) return toast.showToast("今天分享次数已达到上限"), e && (e.runWith(!1),
                        e.recover()), void uitiem.hideLoadingView();
                data.todayShareNum += 1, data.save(), e && (e.runWith(!0), e.recover()), uitiem.hideLoadingView();
            } else {
                a = getCurTime();
                toast.showToast("请分享到不同的群"), e && (e.runWith(!1), e.recover()), uitiem.hideLoadingView();
            }
        }));
    }
    function i() {
        if (t.qq) {
            var e = wxconf.getConf();
            t.qq.shareAppMessage({
                title: e.info,
                imageUrl: e.url,
                imageUrlId: e.id,
                query: "userid=0"
            });
        }
    }
    t.qq = window.wx, t.fx_text = "披荆斩棘只为及见到你，一起约会吧 ", t.fx_picURL = "res/a.jpg", t.showRankloopID = 0;
    t.mob_model = "0", t.isMob2KScreen = !1, t.isOnIPhoneX = !1, t.devicePixelRatio = 3,
        t.fxCount = 0, t.fxmax = 20, t.screenWidth = 0, t.screenHeight = 0;
    var n = ["iPhone X", "iPhone x", "vivo X214", "ASUS Zenfone 5", "Ulefone T2 Pro", "Leagoo S9", "HUAWEI P20", "DooGee V", "OPPO R15", "LG G7", "SAMSUNG S9", "COR-AL00", "vivo Y83A", "LLD-AL20", "vivo Z1", "PACM00", "PAAM00"], s = ["MI 8 SE"];
    t.isHasScreenFringe = function () {
        if (t.qq) {
            if (t.curSystemInfo = t.qq.getSystemInfoSync(), t.curSystemInfo.model) for (var e in n) if (t.curSystemInfo.model.indexOf(n[e]) > -1) return !0;
            if (Main.height > Main.width) {
                if (t.curSystemInfo.windowHeight >= 800 || t.curSystemInfo.windowHeight / t.curSystemInfo.windowWidth > 2) return !0;
            } else if (t.curSystemInfo.windowWidth > 800 || t.curSystemInfo.windowWidth / t.curSystemInfo.windowHeight > 2) return !0;
        }
        return !1;
    }, t.isHasScreenFringeMin = function () {
        if (t.qq) {
            if (t.curSystemInfo.model) for (var e in s) if (t.curSystemInfo.model.indexOf(s[e]) > -1) return !0;
            if (Main.height > Main.width) {
                if (t.curSystemInfo.windowHeight >= 800 || t.curSystemInfo.windowHeight / t.curSystemInfo.windowWidth >= 1.99) return !0;
            } else if (t.curSystemInfo.windowWidth > 800 || t.curSystemInfo.windowWidth / t.curSystemInfo.windowHeight > 1.99) return !0;
        }
        return !1;
    }, t.getTodayIsfx = function () {
        var e = Laya.LocalStorage.getItem("addddddfx");
        if (e) if (e = base64decode(e), n = JSON.parse(e), console.log(n.time + "..." + n.num + "/" + t.fxmax + "...." + getCurDate()),
            n.time == getCurDate()) {
            if (t.fxCount = n.num, t.fxCount >= t.fxmax) return !1;
        } else {
            t.fxCount = 0;
            var i = {
                num: t.fxCount,
                time: getCurDate()
            }, n = base64encode(JSON.stringify(i));
        }
        return !0;
    }, t.isIponeX = function () {
        return !("iPhone X" != t.mob_model && !t.isOnIPhoneX && !t.isMob2KScreen);
    }, t.getSystemInfo = function () {
        t.qq && t.qq.getSystemInfo({
            success: function (e) {
                console.log(e), t.mob_SystemInfo = e, t.mob_model = e.model, t.devicePixelRatio = e.devicePixelRatio,
                    t.isMob2KScreen = e.screenWidth / e.screenHeight < .52, t.screenWidth = e.screenWidth,
                    t.screenHeight = e.screenHeight;
            }
        }), Laya.Browser.onIPhone && Math.abs(Laya.Browser.pixelRatio - 3) < .01 && (t.isOnIPhoneX = 375 == Laya.Browser.clientWidth && 812 == Laya.Browser.clientHeight || 812 == Laya.Browser.clientWidth && 375 == Laya.Browser.clientHeight);
    }, t.openMingame = function (e, i, n) {
        t.qq && t.qq.navigateToMiniProgram({
            appId: e,
            path: i,
            extraData: null,
            success: function () {
                n && n.runWith(!0);
            },
            fail: function () {
                n && n.runWith(!1);
            }
        });
    }, t.sysShareApp = function () {
        t.qq && (t.qq.updateShareMenu({
            withShareTicket: !0
        }), t.qq.shareAppMessage({
            title: t.fx_text,
            imageUrl: t.fx_picURL
        }));
    };
    var a = 0, r = 3e3;
    t.sysytemfxshareApp = e;
    var o;
    t.onShareApp = function (i) {
        t.qq && e(i);
    }, t.showshareMenu = function () {
        if (t.qq) {
            t.qq.showShareMenu();
            var e = wxconf.getConf();
            t.qq.onShareAppMessage(function () {
                return {
                    title: e.info,
                    imageUrl: e.url,
                    imageUrlId: e.id,
                    query: "role=0",
                    success: function (t) { }
                };
            });
        }
    }, t.shareAppHongbag = function (e) {
        i();
        var n = Math.floor(3 * Math.random());
        if (0 != n) {
            var s = "请分享到不同的群";
            2 == n && (s = "本次分享无效，请分享到其他群"), t.showModal(s, function (t) {
                var n = t;
                n && i(), e && Laya.timer.once(1e3, this, function (t) {
                    t.runWith(n);
                }, [e]);
            }, function () {
                e && Laya.timer.once(1e3, this, function (t) {
                    t.runWith(!1);
                }, [e]);
            });
        } else e && Laya.timer.once(1e3, this, function (t) {
            t.runWith(!0);
        }, [e]);
    }, t.shutTopView = function () {
        var t = this;
        window.setTimeout(function () {
            h && (Laya.stage.removeChild(h), Laya.timer.clearAll(t));
        }, 20);
    };
    var h = new Laya.Sprite();
    t.showTopList = function () {
        t.qq && (Laya.timer.once(5, this, function () {
            t.qq.getSystemInfoSync().pixelRatio, window.sharedCanvas.width = Laya.stage.width,
                window.sharedCanvas.height = Laya.stage.height, t.messageSharecanvas("friends", "friends");
        }), h ? ((h = new Laya.Sprite()).zOrder = 999999999, Laya.stage.addChild(h)) : console.log("rankSprite2实例出错了，离屏永远会画不出来"),
            Laya.timer.once(1e3, this, function () {
                var t = new Laya.Texture(Laya.Browser.window.sharedCanvas);
                t.bitmap.alwaysChange = !0, h.graphics.drawTexture(t, 40, 0, t.width, t.height),
                    Laya.timer.frameLoop(2, this, function () {
                        h.graphics.clear(), h.graphics.drawTexture(t, 40, 0, t.width, t.height);
                    });
            }));
    }, t.messageSharecanvas = function (e, i) {
        t.qq.getOpenDataContext().postMessage({
            type: e || "friends",
            text: i
        });
    }, t.upScore = function (e) {
        t.qq && (console.log("提交分为：" + e), t.qq.setUserCloudStorage({
            KVDataList: [{
                key: "score",
                value: "" + e
            }],
            success: function () { },
            fail: function () {
                console.log("提交排行榜失败！");
            }
        }));
    }, t.showToast = function (e) {
        t.qq && t.qq.showToast({
            title: e,
            duration: 1500,
            icon: "none"
        });
    }, t.showModal = function (e, i, n) {
        t.qq && t.qq.showModal({
            title: "系统提示",
            content: e,
            showCancel: !0,
            confirmText: "分享到群",
            success: function (t) {
                t.confirm ? i(!0) : t.cancel && i(!1);
            },
            fail: n
        });
    }, t.setClipboardData = function (e) {
        t.qq ? t.qq.setClipboardData({
            data: e,
            success: function () { },
            fail: function () {
                toast.showToast("复制失败！");
            }
        }) : toast.showToast("点击复制！");
    }, t.getClipboardData = function (e) {
        t.qq && t.qq.getClipboardData({
            success: function (t) {
                e && e.runWith(t.data);
            }
        });
    }, t.setChange = function () {
        t.qq && (t.qq.onHide(function () { }), t.qq.onShow(function (t) {
            t && o && o.run();
        }));
    }, t.onshow = function (e) {
        t.qq && t.qq.onShow(function (t) {
            e && e.runWith(t);
        });
    }, t.vibrateShort = function () {
        t.qq && t.qq.vibrateShort({
            success: function () {
                console.log("振动");
            }
        });
    }, t.updateCheck = function () {
        if (t.qq) {
            var e = t.qq.getUpdateManager();
            e.onCheckForUpdate(function (t) {
                console.log(t.hasUpdate);
            }), e.onUpdateReady(function () {
                t.qq.showModal({
                    title: "更新提示",
                    content: "新版本已经准备好，是否重启应用？",
                    success: function (t) {
                        t.confirm && e.applyUpdate();
                    }
                });
            }), e.onUpdateFailed(function () { });
        }
    };
}(wxapi || (wxapi = {}));

var wxald;

!function (t) {
    t.onUpOpenid = function () {
        window.wx && (window.wx.aldSendOpenid(wxuInfo.openId), console.log("上报openid"));
    }, t.onStart = function (t) {
        window.wx && (window.wx.aldStage.onStart({
            stageId: "" + t,
            stageName: "第" + t + "关",
            userId: "1"
        }), console.log("onstart "));
    }, t.onRunning = function (t, e) {
        window.wx && window.wx.aldStage.onRunning({
            stageId: "" + t,
            stageName: "第" + t + "关",
            userId: "1",
            event: "tools",
            params: {
                itemName: "" + e
            }
        });
    }, t.onEnd = function (t) {
        window.wx && window.wx.aldStage.onEnd({
            stageId: "" + t,
            stageName: "第" + t + "关",
            userId: "1",
            event: "complete",
            params: {
                desc: "关卡完成"
            }
        });
    };
}(wxald || (wxald = {}));

var wxad;

!function (t) {
    t.qq = window.wx, t.isOpenLock = !0;
    var e = [{
        id: "adunit-ec173c6d33758665",
        count: 0
    }, {
        id: "adunit-7054572ba9fc6531",
        count: 0
    }, {
        id: "adunit-fa1fd08903eacb2b",
        count: 0
    }, {
        id: "adunit-eef55385880a852b",
        count: 0
    }, {
        id: "adunit-dda9451b4344c4bf",
        count: 0
    }];
    t.videoAdadUnitId = "adunit-deab5eb226000c56", t.interstitialAdID = "adunit-21eec83853ffdff6";
    var i, n, s = [], a = 0, r = null;
    t.isShowGridAd = !1, t.init = function () {
        if (t.isOpenLock) {
            a = Math.floor(Math.random() * e.length);
            for (var i = 0; i < e.length; i++) !function (i) {
                if (t.isOpenLock && t.qq) {
                    var n = t.qq.createBannerAd({
                        adUnitId: e[i].id,
                        adIntervals: 30,
                        style: {
                            left: 0,
                            top: 0,
                            width: Laya.Browser.clientWidth
                        }
                    });
                    s.push(n), n.onLoad(function () {
                        n.style.top = Laya.Browser.clientHeight - n.style.realHeight, n.style.left = (Laya.Browser.clientWidth - n.style.width) / 2;
                    }), n.onError(function (t) {
                        console.log("广告出错"), console.log(t), n.style.top = Laya.Browser.clientHeight - n.style.realHeight,
                            n.style.left = (Laya.Browser.clientWidth - n.style.width) / 2;
                    }), n.onResize(function (t) {
                        n.style.top = Laya.Browser.clientHeight - t.height, n.style.left = (Laya.Browser.clientWidth - t.width) / 2;
                    });
                }
            }(i);
        }
    }, t.iniloadVideo = function () {
        t.qq && t.qq.createRewardedVideoAd && ((n = t.qq.createRewardedVideoAd({
            adUnitId: t.videoAdadUnitId
        })).load(), n.onError(function (t) {
            console.log("videoAd 加载异常"), console.log(t);
        }));
    }, t.showGridAd = function () {
        gztjapi.isOpenAdAdmin && i && (i.show(), i.onLoad(function () {
            i.show();
        }), t.isShowGridAd = !0);
    }, t.hideGridAd = function () {
        i && (i.hide(), t.isShowGridAd = !1);
    }, t.showInterstitialAd = function (e) {
        t.isOpenLock && t.qq && r && (r.show().catch(function (t) {
            console.error(t), e && e.run();
        }), r.onClose(function (t) {
            console.log("插屏 广告关闭"), e && e.run();
        }));
    }, t.isShowBannerAd = !1, t.showbannerAd = function () {
        if (t.isOpenLock && !(e[a].count >= 4) && t.qq) {
            for (var i = 0; i < s.length; i++) s[i] && s[i].hide();
            var n = s[a];
            n && (e[a].count += 1, n.show(), t.isShowBannerAd = !0);
        }
    }, t.hideBannerAd = function () {
        if (t.isOpenLock && s) {
            for (var i = 0; i < s.length; i++) s[i] && s[i].hide();
            t.isShowBannerAd = !1, e[a].count, a = (a + 1) % e.length;
        }
    }, t.showVideoAd = function (e) {
        t.isOpenLock ? t.qq && (uitiem.setLoadingView(), n || (n = t.qq.createRewardedVideoAd({
            adUnitId: t.videoAdadUnitId
        })), n.show().catch(function () {
            n.load().then(function () {
                return n.show();
            }).catch(function (t) {
                console.log("激励视频 广告显示失败"), toast.showToast("激励视频 广告显示失败"), uitiem.hideLoadingView(),
                    e && e.runWith(!1);
            });
        }), n.onError(function (t) {
            console.log(t);
        }), n.onClose(function (i) {
            i && i.isEnded || void 0 === i ? (e && e.runWith(!0), uitiem.hideLoadingView(),
                wxald.onRunning(data.curLevel, "观看广告"), n.load()) : (t.qq.showModal({
                    title: "提示",
                    content: "看完广告才能获得奖励哦~",
                    showCancel: !1,
                    success: function (t) {
                        t.confirm && e && e.runWith(!1);
                    }
                }), uitiem.hideLoadingView(), n.load());
        })) : toast.showToast("暂不开放");
    }, t.showVideoAd1 = function (e) {
        t.isOpenLock && t.qq && (uitiem.setLoadingView(), n || (n = t.qq.createRewardedVideoAd({
            adUnitId: t.videoAdadUnitId
        })), n.load().then(function () {
            return n.show();
        }).catch(function (t) {
            console.log(t), uitiem.hideLoadingView(), e && e.runWith(-1);
        }), n.onClose(function (t) {
            t && t.isEnded || void 0 === t ? (e && e.runWith(0), uitiem.hideLoadingView()) : (e && e.runWith(1),
                toast.showToast("没有完整观看广告"), uitiem.hideLoadingView());
        }));
    };
}(wxad || (wxad = {}));

var gztjapi;

!function (t) {
    function e(t, e, i) {
        var n = new LHttpConnect(), s = "data=" + base64encode(JSON.stringify(e));
        uitiem.setLoadingView(), n.urlConnectPOST(t, s, function (t) {
            if (t && t.length > 0) {
                var e = JSON.parse(t);
                i && i.runWith(e);
            }
            uitiem.hideLoadingView();
        });
    }
    t.isOpenAdAdmin = !1, t.addrpbi = [], t.PLATFORM_TYPE = "weixin", t.isDebug = !1;
    var i = 1006;
    t.token = "0";
    t.SERVER_URL = "...", t.socketURL = "wss://jiza.h5cp.cn:3443/qqjizaxf/websocket/",
        t.downloadURL = "https://res.h5cp.cn/jz8/", t.initPlatform = function () {
            "qq" == t.PLATFORM_TYPE ? (t.SERVER_URL = "https://jiza.h5cp.cn:8899/weixinShaonao/",
                t.socketURL = "wss://jiza.h5cp.cn:8899/weixinShaonao/websocket/", wxapi.qq = window.qq,
                wxlogin.qq = window.qq) : "weixin" == t.PLATFORM_TYPE ? (t.SERVER_URL = "https://jiza.h5cp.cn:2020/wxmingameservice/",
                    t.socketURL = "wss://jiza.h5cp.cn:2020/perfect_wx/websocket/", wxad.qq = window.wx,
                    wxapi.qq = window.wx, wxlogin.qq = window.wx) : "tt" == t.PLATFORM_TYPE && (t.SERVER_URL = "https://jiza.h5cp.cn:8866/qqjizaxf/",
                        t.socketURL = "wss://jiza.h5cp.cn:8866/qqjizaxf/websocket/", wxapi.qq = window.tt,
                        wxlogin.qq = window.tt), t.isDebug && (t.SERVER_URL = "http://127.0.0.1:8011/",
                            t.socketURL = "ws://127.0.0.1:8011/websocket/"), console.log("初始化参数");
        }, t.login0 = function (n) {
            var s = t.SERVER_URL + "qq/login";
            "weixin" == t.PLATFORM_TYPE && (s = t.SERVER_URL + "wx/login"), new LHttpConnect(),
                e(s, {
                    code: wxuInfo.code,
                    gameid: i
                }, Laya.Handler.create(this, function (e) {
                    0 == e.result ? (t.token = e.token, wxuInfo.openId = e.openid, wxuInfo.userid = e.userid,
                        openId = wxuInfo.openId, t.isOpenAdAdmin = 1 == e.ad, e.addrpbi && (t.addrpbi = e.addrpbi.split("|")),
                        zsapi.init(Laya.Handler.create(this, function () {
                            n && n.runWith(e.result);
                        }))) : n && n.runWith(e.result);
                }));
        }, t.login = function (n) {
            var s = wxuInfo.openId, a = wxuInfo.nickName, r = wxuInfo.avatarUrl, o = t.SERVER_URL + "qq/upuserinfo";
            "weixin" == t.PLATFORM_TYPE && (o = t.SERVER_URL + "wx/upuserinfo"), new LHttpConnect(),
                e(o, {
                    openid: s,
                    nickName: encodeURI(a),
                    avatarUrl: r,
                    code: wxuInfo.code,
                    sex: wxuInfo.gender,
                    country: encodeURI(wxuInfo.country),
                    city: encodeURI(wxuInfo.city),
                    roleid: 0,
                    token: t.token,
                    userid: wxuInfo.userid,
                    gameid: i
                }, n);
        }, t.setMaxLevlUserlog = function (i) {
            var n = t.SERVER_URL + "qq/upuserinfo";
            "weixin" == t.PLATFORM_TYPE && (n = t.SERVER_URL + "wx/upuserinfo"), new LHttpConnect(),
                e(n, {
                    token: t.token,
                    userid: wxuInfo.userid
                }, i);
        };
}(gztjapi || (gztjapi = {}));

var music, swapItems = function (t, e, i) {
    return t[e] = t.splice(i, 1, t[e])[0], t;
}, arr = [1, 2, 3], newArr = [];

!function (t) {
    t.isPlayMusic = !0, t.onPlaySound = function () {
        t.isPlayMusic && Laya.SoundManager.playMusic("res/running.mp3", -1);
    }, t.onPlayStop = function () {
        Laya.SoundManager.stopAll();
    };
}(music || (music = {}));

var draw, LHttpConnect = function () {
    function t() { }
    return t.prototype.connect = function (t, e, i) {
        this.onHttpRequestComplete1 = i, this.hr = new Laya.HttpRequest(), this.hr.once(Laya.Event.PROGRESS, this, this.onHttpRequestProgress),
            this.hr.once(Laya.Event.COMPLETE, this, this.onHttpRequestComplete), this.hr.once(Laya.Event.ERROR, this, this.onHttpRequestError);
    }, t.prototype.iptvConnect = function (t, e, i, n) {
        this.onHttpRequestComplete1 = n, this.hr = new Laya.HttpRequest(), this.hr.once(Laya.Event.PROGRESS, this, this.onHttpRequestProgress),
            this.hr.once(Laya.Event.COMPLETE, this, this.onHttpRequestComplete), this.hr.once(Laya.Event.ERROR, this, this.onHttpRequestError);
        var s = t + "?" + e + "&data=" + encodeURI(i);
        console.log(s), this.hr.send(s, null, "get", "text");
    }, t.prototype.urlConnect = function (t, e) {
        this.onHttpRequestComplete1 = e, this.hr = new Laya.HttpRequest(), this.hr.once(Laya.Event.PROGRESS, this, this.onHttpRequestProgress),
            this.hr.once(Laya.Event.COMPLETE, this, this.onHttpRequestComplete), this.hr.once(Laya.Event.ERROR, this, this.onHttpRequestError);
        var i = t;
        this.hr.send(i, null, "get", "text");
    }, t.prototype.urlConnectPOSTJson = function (t, e, i) {
        var n = new Laya.HttpRequest();
        n.once(Laya.Event.PROGRESS, this, function (t) {
            console.log(t);
        }), n.once(Laya.Event.COMPLETE, this, function () {
            if (i) {
                var t = JSON.parse(n.data);
                i.runWith(t);
            }
        }), n.once(Laya.Event.ERROR, this, function (t) {
            console.log(t);
        });
        var s = t;
        n.send(s, e, "post", "text");
    }, t.prototype.urlConnectPOST = function (t, e, i) {
        var n = new Laya.HttpRequest();
        n.once(Laya.Event.PROGRESS, this, this.onHttpRequestProgress), n.once(Laya.Event.COMPLETE, this, function () {
            i(n.data);
        }), n.once(Laya.Event.ERROR, this, this.onHttpRequestError);
        var s = t;
        n.send(s, e, "post", "text");
    }, t.prototype.urlConnectPOST1 = function (t, e, i) {
        var n = new Laya.HttpRequest();
        n.once(Laya.Event.PROGRESS, this, this.onHttpRequestProgress), n.once(Laya.Event.COMPLETE, this, function () {
            i(n.data);
        }), n.once(Laya.Event.ERROR, this, this.onHttpRequestError);
        var s = t;
        n.send(s, e, "post", "text");
    }, t.prototype.onHttpRequestError = function (t) {
        console.log("连接失败:" + t), toast.showToast("好像网络有点问题，稍候重试"), uitiem.hideLoadingView();
    }, t.prototype.onHttpRequestProgress = function (t) {
        console.log(t);
    }, t.prototype.onHttpRequestComplete = function (t) {
        null != this.onHttpRequestComplete1 && this.onHttpRequestComplete1(this.hr.data);
    }, t;
}();

!function (t) {
    t.fillRoundRect1 = function (t, e, i, n, s, a, r) {
        var o = Laya.Render.canvas.getContext("2d").createLinearGradient(0, 0, 0, 1136);
        o.addColorStop(0, "#FF0000"), o.addColorStop(1, "#0000FF");
        var h = new Laya.Sprite();
        return h.size(i, n), h.pos(t, e), h.graphics.drawPath(0, 0, [["moveTo", a, 0], ["lineTo", i, 0], ["arcTo", i + a, 0, i + a, r, r], ["lineTo", i + a, n], ["arcTo", i + a, n + r, i, n + r, r], ["lineTo", 5, n + r], ["arcTo", 0, n + r, 0, n, r], ["lineTo", 0, 5], ["arcTo", 0, 0, r, 0, r], ["closePath"]], {
            fillStyle: o
        }), h;
    }, t.fillRoundRect_sp = function (t, e, i, n, s, a) {
        return t.size(e + s, i + a), t.graphics.clear(), t.graphics.drawPath(0, 0, [["moveTo", s, 0], ["lineTo", e, 0], ["arcTo", e + s, 0, e + s, a, a], ["lineTo", e + s, i], ["arcTo", e + s, i + a, e, i + a, a], ["lineTo", 5, i + a], ["arcTo", 0, i + a, 0, i, a], ["lineTo", 0, 5], ["arcTo", 0, 0, a, 0, a], ["closePath"]], {
            fillStyle: n
        }), t;
    }, t.fillRoundRect_sp1 = function (t, e, i, n, s, a, r, o) {
        return i.size(n + r, s + o), i.graphics.clear(), i.graphics.drawPath(t, e, [["moveTo", r, 0], ["lineTo", n, 0], ["arcTo", n + r, 0, n + r, o, o], ["lineTo", n + r, s], ["arcTo", n + r, s + o, n, s + o, o], ["lineTo", 5, s + o], ["arcTo", 0, s + o, 0, s, o], ["lineTo", 0, 5], ["arcTo", 0, 0, o, 0, o], ["closePath"]], {
            fillStyle: a
        }), i;
    }, t.fillRoundRect = function (t, e, i, n, s, a, r) {
        var o = new Laya.Image();
        return o.size(i + a, n + r), o.pos(t, e), o.graphics.drawPath(0, 0, [["moveTo", a, 0], ["lineTo", i, 0], ["arcTo", i + a, 0, i + a, r, r], ["lineTo", i + a, n], ["arcTo", i + a, n + r, i, n + r, r], ["lineTo", 5, n + r], ["arcTo", 0, n + r, 0, n, r], ["lineTo", 0, 5], ["arcTo", 0, 0, r, 0, r], ["closePath"]], {
            fillStyle: s
        }), o;
    }, t.fillRoundRectTitle = function (t, e, i, n, s, a, r) {
        var o = new Laya.Sprite();
        return o.size(i, n), o.graphics.drawPath(t, e, [["moveTo", a, 0], ["lineTo", i, 0], ["arcTo", i + a, 0, i + a, r, r], ["lineTo", i + a, n], ["lineTo", 0, n], ["lineTo", 0, 5], ["arcTo", 0, 0, r, 0, r], ["closePath"]], {
            fillStyle: s
        }), o;
    };
}(draw || (draw = {}));

var base64EncodeChars = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=", base64DecodeChars = new Array(-1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, 62, -1, -1, -1, 63, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, -1, -1, -1, -1, -1, -1, -1, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, -1, -1, -1, -1, -1, -1, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, -1, -1, -1, -1, -1), res = function () {
    return function () { };
}();

res.image = ["res/fm.jpg", "res/button1.png", "res/button2.png", "res/button3.png", "res/logo.png", "res/132.png", "res/cl.png", "res/ad-close.png", "res/IcnTutoFingerDwn.png", "res/IcnTutoFingerNor.png", "res/revive.jpg", "res/bg1.png", "res/bg3.png", "res/bg2.png", "res/bg4.png", "res/bg5.png", "res/bg6.png", "res/bg7.png", "res/bg8.png", "res/bg9.png", "res/bg10.png", "res/bg11.png", "res/bg12.png", "res/bg13.png", "res/bg14.png", "res/bg15.png", "res/bg16.png", "res/z1.png", "res/yw.png"],
    res.rolePath = [], res.sound = [], res.version = "1", res.loadAni = [{
        url: "res/zs.atlas",
        type: Laya.Loader.ATLAS
    }, {
        url: "res/zs.png",
        type: Laya.Loader.IMAGE
    }, {
        url: "res/icon.atlas",
        type: Laya.Loader.ATLAS
    }, {
        url: "res/icon.png",
        type: Laya.Loader.IMAGE
    }, {
        url: "res/bg.atlas",
        type: Laya.Loader.ATLAS
    }, {
        url: "res/bg.png",
        type: Laya.Loader.IMAGE
    }, {
        url: "res/sk/role.sk",
        type: Laya.Loader.BUFFER
    }, {
        url: "res/sk/role.png",
        type: Laya.Loader.IMAGE
    }, {
        url: "res/sk/dog.sk",
        type: Laya.Loader.BUFFER
    }, {
        url: "res/sk/dog.png",
        type: Laya.Loader.IMAGE
    }, {
        url: "res/sk/bp.sk",
        type: Laya.Loader.BUFFER
    }, {
        url: "res/sk/bp.png",
        type: Laya.Loader.IMAGE
    }, {
        url: "res/sk/js.sk",
        type: Laya.Loader.BUFFER
    }, {
        url: "res/sk/js.png",
        type: Laya.Loader.IMAGE
    }], res.mappath = [], res.downloadRes = [], res.nativefiles = ["res/ui/"];

var data;

!function (t) {
    t.curLevel = 1, t.level = 1, t.lockMoney = 0, t.addcount = 0, t.isNewUser = 0, t.todayShareNum = 0,
        t.todaytime = 0, t.tlcount = 5, t.tltime = 0, t.eggCount = 3;
    var e = "xjjwkxbxlmyane88x02";
    t.save = function () {
        var i = {
            level: t.level,
            money: t.lockMoney,
            addcount: t.addcount,
            isNewUser: t.isNewUser,
            todayShareNum: t.todayShareNum,
            todaytime: t.todaytime,
            tlcount: t.tlcount,
            tltime: t.tltime,
            curLevel: t.curLevel,
            eggCount: t.eggCount
        }, n = base64encode(JSON.stringify(i));
        localStorage.setItem(e, n);
    }, t.read = function () {
        var i = localStorage.getItem(e);
        if (i) {
            i = base64decode(i);
            var n = JSON.parse(i);
            n.level && (t.level = n.level), (n.money || 0 == n.money) && (t.lockMoney = n.money),
                n.addcount && (t.addcount = n.addcount), n.isNewUser && (t.isNewUser = n.isNewUser),
                n.todayShareNum && (t.todayShareNum = n.todayShareNum), n.todaytime && (t.todaytime = n.todaytime),
                (n.tlcount || 0 == n.tlcount) && (t.tlcount = n.tlcount), n.tltime && (t.tltime = n.tltime),
                n.curLevel && (t.curLevel = n.curLevel), (n.eggCount || n.eggCount <= 0) && (t.eggCount = n.eggCount);
        }
    }, t.ZW_DATA_LIST = [];
}(data || (data = {}));

var tjad;

!function (t) {
    t.listAd = [{
        app_icon: "res/game/2.png",
        app_title: "植物特攻队",
        appid: "wx9ec1732a2a2fb068",
        link_path: "pages/index/index"
    }, {
        app_icon: "res/game/1.png",
        app_title: "天天造车",
        appid: "wxa5022f6650a54463",
        link_path: "pages/index/index"
    }, {
        app_icon: "res/game/2.png",
        app_title: "植物特攻队",
        appid: "wx9ec1732a2a2fb068",
        link_path: "pages/index/index"
    }, {
        app_icon: "res/game/1.png",
        app_title: "天天造车",
        appid: "wxa5022f6650a54463",
        link_path: "pages/index/index"
    }, {
        app_icon: "res/game/2.png",
        app_title: "植物特攻队",
        appid: "wx9ec1732a2a2fb068",
        link_path: "pages/index/index"
    }, {
        app_icon: "res/game/1.png",
        app_title: "天天造车",
        appid: "wxa5022f6650a54463",
        link_path: "pages/index/index"
    }, {
        app_icon: "res/game/2.png",
        app_title: "植物特攻队",
        appid: "wx9ec1732a2a2fb068",
        link_path: "pages/index/index"
    }, {
        app_icon: "res/game/1.png",
        app_title: "天天造车",
        appid: "wxa5022f6650a54463",
        link_path: "pages/index/index"
    }, {
        app_icon: "res/game/2.png",
        app_title: "植物特攻队",
        appid: "wx9ec1732a2a2fb068",
        link_path: "pages/index/index"
    }, {
        app_icon: "res/game/1.png",
        app_title: "天天造车",
        appid: "wxa5022f6650a54463",
        link_path: "pages/index/index"
    }], t.init = function (t) { }, t.sortdata = function () {
        t.listAd.sort(function () {
            return Math.random() - .5;
        });
    }, t.navigate2Mini = function (t, e) {
        var i = t.appid, n = t.link_path;
        wxapi.openMingame(i, n, e);
    };
}(tjad || (tjad = {}));

var conf;

!function (t) {
    t.appId = "wx7fcafc14a96bdd1e", t.secret = "oUWoqruRJhCtgewJ", t.uploadLog = !1;
}(conf || (conf = {}));

var zsapi;

!function (t) {
    function e(e) {
        window.sdk && window.sdk.loadAd(function (i) {
            if (i.promotion) if (i.promotion.length >= 10) for (s = 0; s < i.promotion.length; s++) i.promotion[s] && "{}" != i.promotion[s] && t.listAd.push(i.promotion[s]); else if (i.promotion.length < 10) {
                t.listAd = i.promotion;
                for (var n = [], s = 0; s < 20; s++) {
                    var a = t.listAd[s % t.listAd.length];
                    a && a.app_icon && n.length < 10 && n.push(a);
                }
                t.listAd = n;
            } else t.listAd = i.promotion; else t.listAd = i.promotion;
            !function (e) {
                window.sdk && window.sdk.loadCfg(function (i) {
                    t.confg = i, i && (t.curVersion == i.zs_version ? gztjapi.isOpenAdAdmin = 1 == i.zs_switch : gztjapi.isOpenAdAdmin = !1,
                        console.log("Admin=" + gztjapi.isOpenAdAdmin)), e && e.runWith(!0);
                }, function (t) {
                    console.log("读取配置失败" + t), e && e.runWith(!1);
                });
            }(e);
        });
    }
    t.zsSDKlogin = function (t) {
        window.sdk && (window.wx ? window.sdk.login(function (i) {
            wxuInfo.openId = i, e(t);
        }, function (e) {
            toast.showToast(e), t && t.runWith(!1);
        }) : (wxuInfo.openId = "kddsfsdfsdfsdf", e(t)));
    }, t.listAd = [], t.curIpCityName = "0", t.curVersion = "1.0", t.init = e, t.sortdata = function () {
        t.listAd.sort(function () {
            return Math.random() - .5;
        });
    }, t.navigate2Mini = function (t, e) {
        window.sdk && window.sdk.navigate2Mini(t, wxuInfo.openId, function () {
            e && e.runWith(!0), wxald.onRunning(data.curLevel, "" + t.app_title);
        }, function () {
            console.log("jump fal"), e && e.runWith(!1);
        }, function () {
            console.log("complete");
        });
    }, t.initGetIp = function (e) {
        var i = new Laya.HttpRequest();
        i.send("https://jiza.h5cp.cn/IPservice/IP", null, "get", "text", ["Content-Type", "application/x-www-form-urlencoded;charset=utf-8"]),
            i.once(Laya.Event.COMPLETE, this, function () {
                var n = i.data;
                if (n) {
                    var s = JSON.parse(n);
                    t.curIpCityName = s.cityCode, console.log("sid: " + t.curIpCityName), function () {
                        if (gztjapi.isOpenAdAdmin) if (t.curIpCityName && gztjapi.addrpbi.length > 0) for (var e = 0; e < gztjapi.addrpbi.length; e++) {
                            var i = gztjapi.addrpbi[e];
                            if (i && i.indexOf(t.curIpCityName) > -1) return void (gztjapi.isOpenAdAdmin = !1);
                        } else gztjapi.isOpenAdAdmin = !1;
                    }(), e && e.run();
                }
            }), i.once(Laya.Event.ERROR, this, function (i) {
                t.curIpCityName = null, e && e.run();
            });
    };
}(zsapi || (zsapi = {}));

var zsview, __extends = this && this.__extends || function (t, e) {
    function i() {
        this.constructor = t;
    }
    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n]);
    t.prototype = null === e ? Object.create(e) : (i.prototype = e.prototype, new i());
};

!function (t) {
    function e() {
        if (zsapi.listAd && 0 != zsapi.listAd.length) {
            var t = new a();
            return Laya.stage.addChild(t), t;
        }
    }
    t.drawDialogAd = function (t) {
        var e = new l();
        Laya.stage.addChild(e), e.zOrder = 9999, e.setfinishHandler(t);
    }, t.drawExitAd = function (t, e) {
        if (!zsapi.listAd || 0 == zsapi.listAd.length || !gztjapi.isOpenAdAdmin) return null;
        var i = t;
        if (i) {
            var n = new Laya.Image("zs/icon-back.png");
            return i.addChild(n), n.x = 30, n.y = 160, wxapi.isHasScreenFringe(), n.on(Laya.Event.CLICK, this, function () {
                var t = new a();
                Laya.stage.addChild(t), t.setExitHandler(e);
            }), n;
        }
        return null;
    }, t.drawEndAd = function (t, e, i) {
        if (zsapi.listAd && 0 != zsapi.listAd.length) {
            var s = t;
            if (s) {
                var a = new n();
                s.addChild(a), a.pos(e, i);
            }
        }
    }, t.drawGameAd = function (t) {
        if (zsapi.listAd && 0 != zsapi.listAd.length) {
            var e = t;
            if (e) {
                var i = new Laya.Image("zs/img_cover_slide_ad_btn.png");
                e.addChild(i), i.x = 0, i.y = 200, i.on(Laya.Event.CLICK, this, function () {
                    var t = new r(Laya.stage);
                    Laya.stage.addChild(t);
                });
            }
        }
    }, t.drawLevelAd = function (t) {
        if (zsapi.listAd && 0 != zsapi.listAd.length) {
            var e = t;
            if (e) {
                var i = new Laya.Image("zs/img_cover_slide_ad_btn.png");
                e.addChild(i), i.x = 0, i.y = 270, i.on(Laya.Event.CLICK, this, function () {
                    var t = new r(e);
                    e.addChild(t);
                });
            }
        }
    }, t.drawMoreView = e, t.drawRollingAd = function (t, e) {
        if (zsapi.listAd && 0 != zsapi.listAd.length) {
            var i = new s();
            return t.addChild(i), i.y = e, i;
        }
    };
    var i = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9];
    t.drawHomeAd = function (t) {
        var n = t;
        if (n) {
            if (!zsapi.listAd || 0 == zsapi.listAd.length) return void zsapi.init(null);
            for (i.sort(function () {
                return Math.random() - .5;
            }), a = 0; a < 3; a++) r = new o(zsapi.listAd[i[a]], a), n.addChild(r), r.x = 20,
                r.y = 500 + 180 * a;
            for (var a = 0; a < 3; a++) {
                var r = new o(zsapi.listAd[i[3 + a]], 3 + a);
                n.addChild(r), r.x = Main.width - 140, r.y = 500 + 180 * a;
            }
            t.timerLoop(4e3, this, function () {
                i.sort(function () {
                    return Math.random() - .5;
                });
            });
            var h = new Laya.Image("zs/img_cover_slide_ad_btn.png");
            n.addChild(h), h.x = 0, h.y = 370, h.on(Laya.Event.CLICK, this, function () {
                e();
            });
            var l = new s(), c = Main.height - l.height - 60;
            l.y = c, n.addChild(l);
        }
    };
    var n = function (t) {
        function i() {
            var e = t.call(this) || this, i = Main.width - 40, n = draw.fillRoundRect(0, 0, i - 5, 575, "#ffffff", 10, 10);
            e.addChild(n), n.alpha = .8;
            n = draw.fillRoundRect(5, 5, i - 15, 565, "#211f1e", 10, 10);
            e.addChild(n), n.alpha = .8;
            var s = new Laya.Sprite();
            s.size(i - 10, 550), e.addChild(s);
            var a = new Laya.Panel();
            a.width = i - 10, a.height = 550, a.vScrollBarSkin = "", a.x = 25, a.y = 20, s.addChild(a);
            var r = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9];
            r.sort(function () {
                return Math.random() - .5;
            });
            for (h = 0; h < zsapi.listAd.length; h++) {
                l = e.getIcon(zsapi.listAd[h], h + 1);
                a.addChild(l), l.x = h % 3 * 230, l.y = 270 * Math.floor(h / 3), l.x;
            }
            r.sort(function () {
                return Math.random() - .5;
            });
            for (var o = zsapi.listAd.length, h = 0; h < zsapi.listAd.length; h++) {
                var l = e.getIcon(zsapi.listAd[h], h + 1);
                a.addChild(l), l.x = o % 3 * 230, l.y = 270 * Math.floor(o / 3), o += 1;
            }
            var c = 0;
            return e.timerLoop(100, e, function () {
                0 == c ? a.vScrollBar.value < a.vScrollBar.max ? a.vScrollBar.value += 5 : c = 1 : a.vScrollBar.value > 0 ? a.vScrollBar.value -= 4 : c = 0;
            }), e;
        }
        return __extends(i, t), i.prototype.getIcon = function (t, i) {
            var n = draw.fillRoundRect(0, 0, 190, 240, "#ffffff", 10, 10), s = new Laya.Image(t.app_icon);
            n.addChild(s), s.size(190, 190), s.pos(5, 5), n.on(Laya.Event.MOUSE_DOWN, this, function (t) {
                zsapi.navigate2Mini(t, Laya.Handler.create(this, function (t) {
                    t || e();
                }));
            }, [t]);
            var a = 1 + Math.floor(9 * Math.random()), r = new Laya.Image("zs/" + a + ".png");
            n.addChild(r), r.y = n.height - 55, r.x = 5, r.size(n.width - 10, 50);
            if ((a = Math.floor(10 * Math.random())) < 2) {
                var o = Math.floor(2 * Math.random()), h = new Laya.Image(0 == o ? "zs/icon-hot.png" : "zs/icon-new.png");
                n.addChild(h), h.x = r.width - h.width + 20, h.y = 0;
            }
            var l = drawText("" + t.app_title, "#ffffff", 27);
            return r.addChild(l), l.pivotX = l.width / 2, l.x = r.width / 2, l.y = 15, n;
        }, i;
    }(Laya.Sprite), s = function (t) {
        function i() {
            var e = t.call(this) || this;
            e.isJumpFalInMoreView = !0;
            e.height = 180;
            var i = Main.width - 40, n = draw.fillRoundRect(10, 0, i, 180, "#044943", 20, 20);
            e.addChild(n);
            var s = draw.fillRoundRect(20, 10, i - 10, 170, "#011816", 10, 10);
            e.addChild(s);
            var a = new Laya.Panel();
            a.width = i - 10, a.height = 170, a.hScrollBarSkin = "", a.x = 5, a.y = 5, s.addChild(a);
            for (var r = 0; r < zsapi.listAd.length; r++) {
                var o = e.getIcon(zsapi.listAd[r]);
                a.addChild(o), o.x = r * (o.width + 20), o.y = 5, o.x;
            }
            var h = 0;
            return e.timerLoop(100, e, function () {
                0 == h ? a.hScrollBar.value < a.hScrollBar.max ? a.hScrollBar.value += 3 : h = 1 : a.hScrollBar.value > 0 ? a.hScrollBar.value -= 3 : h = 0;
            }), e;
        }
        return __extends(i, t), i.prototype.getIcon = function (t) {
            var i = new Laya.Image(t.app_icon);
            i.size(160, 160), i.on(Laya.Event.MOUSE_DOWN, this, function (t) {
                zsapi.navigate2Mini(t, Laya.Handler.create(this, function (t) {
                    !t && this.isJumpFalInMoreView && e();
                }));
            }, [t]);
            var n = new Laya.Sprite();
            i.addChild(n), n.alpha = .6, n.y = i.height - 30, n.height = 30, n.graphics.drawRect(0, 0, i.width, n.height, "#000000");
            var s = drawText("" + t.app_title, "#ffffff", 18);
            return i.addChild(s), s.pivotX = s.width / 2, s.pivotY = s.height / 2, s.y = n.y + n.height / 2,
                s.x = i.width / 2, i;
        }, i;
    }(Laya.Sprite);
    t.RollingView = s;
    var a = function (t) {
        function e() {
            var e = t.call(this) || this;
            e.btnexit = !1, e.count = 0, e.isShowBannerAd = !1, e.size(Main.width, 2 * Main.height),
                e.mouseEnabled = !0;
            var i = new Laya.Sprite();
            i.graphics.drawRect(0, 0, Main.width, 2 * Main.height, "#3987c5"), e.addChild(i);
            var n = new LImageButtView(20, 40, "zs/icon-back.png");
            e.addChild(n), n.on(Laya.Event.CLICK, e, function () {
                this.quit();
            }), n.visible = !1;
            var a = new Laya.Image("zs/title-friend.png");
            e.addChild(a), a.pivotY = a.height, a.pivotX = a.width / 2, a.x = Main.halfWidth;
            var r = new s();
            e.addChild(r), r.y = 130, a.y = r.y - 20, r.isJumpFalInMoreView = !1;
            var o = new Laya.Image("zs/title-recommend.png");
            e.addChild(o), o.pivotY = o.height, o.pivotX = o.width / 2, o.x = Main.halfWidth;
            var h = new Laya.Panel();
            h.width = Main.width - 10, h.height = Main.height - 400, h.vScrollBarSkin = "",
                h.x = 40, h.y = 400, o.y = h.y - 10, e.addChild(h);
            var l = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9];
            l.sort(function () {
                return Math.random() - .5;
            });
            for (u = 0; u < zsapi.listAd.length; u++) {
                d = e.getIcon(zsapi.listAd[u]);
                h.addChild(d), d.x = u % 3 * 230, d.y = 270 * Math.floor(u / 3), d.x;
            }
            l.sort(function () {
                return Math.random() - .5;
            });
            for (var c = zsapi.listAd.length, u = 0; u < zsapi.listAd.length; u++) {
                var d = e.getIcon(zsapi.listAd[u]);
                h.addChild(d), d.x = c % 3 * 230, d.y = 270 * Math.floor(c / 3), d.x, c += 1;
            }
            var _ = 0;
            e.timerLoop(100, e, function () {
                0 == _ ? h.vScrollBar.value < h.vScrollBar.max ? h.vScrollBar.value += 5 : _ = 1 : h.vScrollBar.value > 0 ? h.vScrollBar.value -= 5 : _ = 0;
            });
            var f = new LImageButtView(Main.halfWidth, Main.height - 250, "zs/btn-continue-new.png");
            e.addChild(f), f.pivotX = f.width / 2;
            var p = Math.floor(Math.random() * zsapi.listAd.length);
            return gztjapi.isOpenAdAdmin ? (n.visible = !1, f.skin = "zs/btn-continue-new1.png",
                f.pivotX = f.width / 2, f.pivotY = f.height, f.y = Main.height, wxapi.isHasScreenFringe() ? (f.y = Main.height + 220,
                    console.log("更新坐标")) : wxapi.isHasScreenFringeMin() && (f.y = Main.height - 100),
                f.onPos(f.x, f.y), f.on(Laya.Event.MOUSE_DOWN, e, function () {
                    this.goonGame();
                })) : (e.timer.once(1e3, e, function () {
                    n.visible = !0;
                }), f.on(Laya.Event.MOUSE_DOWN, e, function () {
                    p = Math.floor(Math.random() * zsapi.listAd.length), zsapi.navigate2Mini(zsapi.listAd[p], Laya.Handler.create(this, function (t) { }));
                })), wxad.isShowBannerAd && (wxad.hideBannerAd(), e.isShowBannerAd = !0), e;
        }
        return __extends(e, t), e.prototype.goonGame = function () {
            gztjapi.isOpenAdAdmin && !this.btnexit ? (0 == this.count ? this.timer.once(1e3, this, function () {
                wxad.showbannerAd(), window.wx && window.wx.onShow(this.finish), this.timer.once(1e3, this, function () {
                    window.wx && window.wx.offShow(this.finish), wxad.hideBannerAd(), this.btnexit = !0;
                });
            }) : this.count, this.count += 1) : this.quit();
        }, e.prototype.finish = function () {
            this.quit(), window.wx && window.wx.offShow(this.finish);
        }, e.prototype.quit = function () {
            this.isShowBannerAd && wxad.showbannerAd(), this.handler && this.handler.run(),
                this.destroy(), Laya.stage.removeChild(this);
        }, e.prototype.setExitHandler = function (t) {
            this.handler = t;
        }, e.prototype.getIcon = function (t) {
            var e = draw.fillRoundRect(0, 0, 190, 240, "#ffffff", 10, 10), i = new Laya.Image(t.app_icon);
            e.addChild(i), i.size(190, 190), i.pos(5, 5), e.on(Laya.Event.MOUSE_DOWN, this, function (t) {
                zsapi.navigate2Mini(t, Laya.Handler.create(this, function (t) { }));
            }, [t]);
            var n = new Laya.Sprite();
            e.addChild(n), n.graphics.drawRect(5, 0, e.width - 10, 50, "#eead39"), n.y = e.height - 55,
                n.size(e.width - 10, 50);
            var s = drawText("" + t.app_title, "#ffffff", 30);
            return n.addChild(s), s.pivotX = s.width / 2, s.x = n.width / 2, s.y = 15, e;
        }, e;
    }(Laya.Sprite);
    t.MoreView = a;
    var r = function (t) {
        function e(e) {
            var i = t.call(this) || this;
            i.isShowBannerAd = !1, i.bk = e, i.size(Main.width, Main.height), i.mouseEnabled = !0;
            var n = new Laya.Sprite();
            n.graphics.drawRect(0, 0, Main.width, Main.height, "#0baaec"), i.addChild(n);
            var s = new Laya.Image("zs/index-hot.png");
            i.addChild(s), s.pivotX = s.width / 2, s.pivotY = s.height, s.y = 150, s.x = Main.halfWidth;
            var a = new LImageButtView(0, 0, "zs/icon-back.png");
            i.addChild(a), a.x = 20, a.y = 50, a.onPos(a.x, a.y), a.on(Laya.Event.CLICK, i, function () {
                this.destroy(), this.bk.removeChild(this), this.isShowBannerAd && wxad.showbannerAd();
            });
            var r = new Laya.Panel();
            r.width = Main.width - 10, r.height = Main.height - 400, r.vScrollBarSkin = "",
                r.x = 40, r.y = s.y + s.height, i.addChild(r);
            var o = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9];
            o.sort(function () {
                return Math.random() - .5;
            });
            for (l = 0; l < zsapi.listAd.length; l++) {
                c = i.getIcon(zsapi.listAd[l]);
                r.addChild(c), c.x = l % 3 * 230, c.y = 270 * Math.floor(l / 3), c.x;
            }
            o.sort(function () {
                return Math.random() - .5;
            });
            for (var h = zsapi.listAd.length, l = 0; l < zsapi.listAd.length; l++) {
                var c = i.getIcon(zsapi.listAd[l]);
                r.addChild(c), c.x = h % 3 * 230, c.y = 270 * Math.floor(h / 3), c.x, h += 1;
            }
            var u = 0;
            return i.timerLoop(100, i, function () {
                0 == u ? r.vScrollBar.value < r.vScrollBar.max ? r.vScrollBar.value += 5 : u = 1 : r.vScrollBar.value > 0 ? r.vScrollBar.value -= 5 : u = 0;
            }), wxad.isShowBannerAd && (wxad.hideBannerAd(), i.isShowBannerAd = !0), i;
        }
        return __extends(e, t), e.prototype.getIcon = function (t) {
            var e = draw.fillRoundRect(0, 0, 190, 240, "#ffffff", 10, 10), i = new Laya.Image(t.app_icon);
            e.addChild(i), i.size(190, 190), i.pos(5, 5), e.on(Laya.Event.MOUSE_DOWN, this, function (t) {
                zsapi.navigate2Mini(t, Laya.Handler.create(this, function (t) { }));
            }, [t]);
            var n = new Laya.Sprite();
            e.addChild(n), n.graphics.drawRect(5, 0, e.width - 10, 50, "#eead39"), n.y = e.height - 55,
                n.size(e.width - 10, 50);
            var s = drawText("" + t.app_title, "#ffffff", 30);
            return n.addChild(s), s.pivotX = s.width / 2, s.x = n.width / 2, s.y = 15, e;
        }, e;
    }(Laya.Sprite), o = function (t) {
        function n(e, n) {
            var s = t.call(this) || this;
            if (s.data = e, !e) return s;
            var a = new Laya.Image(e.app_icon);
            s.addChild(a), a.size(120, 120), Laya.loader.load([e.app_icon], Laya.Handler.create(s, function () {
                var t = drawText("点击试玩", "#ffffff", 20);
                t.pivotX = t.width / 2, t.y = a.height, t.x = a.width / 2, t.stroke = 2, t.strokeColor = "#000000",
                    this.addChild(t);
            })), a.on(Laya.Event.MOUSE_DOWN, s, s.onMiniClick);
            var r = new Laya.GlowFilter("#ff0000", 10, 0, 0), o = new Laya.GlowFilter("#0000ff", 10, 0, 0), h = 0;
            return s.timerLoop(200, s, function () {
                h = (h + 1) % 2, a.filters = 0 == h ? [r] : [o];
            }), s.timerLoop(5e3, s, function () {
                var t = i[n];
                a.skin = zsapi.listAd[t].app_icon, this.data = zsapi.listAd[t];
            }), s;
        }
        return __extends(n, t), n.prototype.onMiniClick = function () {
            var t = this.data;
            zsapi.navigate2Mini(t, Laya.Handler.create(this, function (t) {
                t || e();
            }));
        }, n;
    }(Laya.Sprite), h = (function (t) {
        function i(e) {
            var i = t.call(this) || this;
            i.data = e;
            var n = new Laya.Image(e.app_icon);
            return i.addChild(n), n.size(120, 120), Laya.loader.load([e.app_icon], Laya.Handler.create(i, function () {
                var t = drawText("" + e.app_title, "#7c7c7c", 20);
                t.pivotX = t.width / 2, t.y = n.height + 10, t.x = n.width / 2, this.addChild(t);
            })), n.on(Laya.Event.CLICK, i, i.onMiniClick), i;
        }
        __extends(i, t), i.prototype.onMiniClick = function () {
            var t = this.data;
            zsapi.navigate2Mini(t, Laya.Handler.create(this, function (t) {
                t || e();
            }));
        };
    }(Laya.Sprite), function (t) {
        function i(i) {
            var n = t.call(this) || this;
            n.isShowBannerAd = !1, n.size(Main.width, 2 * Main.height), n.mouseEnabled = !0;
            var s = new Laya.Sprite();
            s.graphics.drawRect(0, 0, Main.width, 2 * Main.height, "#ffffff"), n.addChild(s);
            var a = new Laya.Sprite();
            s.addChild(a), a.size(Main.width, 100), a.graphics.drawRect(0, 0, a.width, a.height, "#EBEBEB");
            var r = drawText("小程序", "#000000", 35);
            a.addChild(r), r.pivotX = r.width / 2, r.pivotY = r.height / 2, r.x = Main.halfWidth,
                r.y = a.height / 2;
            var o = new LImageButtView(0, 0, "res/back.png");
            a.addChild(o), o.pivotY = o.height / 2, o.x = 30, o.y = a.height / 2, o.alpha = .8,
                o.onPos(o.x, o.y), o.on(Laya.Event.CLICK, n, function () {
                    this.exit(), i && i.run();
                });
            var h = drawText("最近使用", "#B9B9B9", 30);
            s.addChild(h), h.x = 30, h.y = a.height + a.y + 5;
            var l = new Laya.Panel();
            s.addChild(l), l.y = h.y + h.height + 10, l.x = h.x, l.height = Main.height, l.width = Main.width,
                l.vScrollBarSkin = "", zsapi.sortdata();
            for (var c = 0; c < 20; c++) {
                var u = zsapi.listAd[c % 10];
                if (u && u.app_icon) {
                    var d = n.drawIcon(u.app_icon, u.app_title);
                    l.addChild(d), d.y = 120 * c, d.on(Laya.Event.MOUSE_DOWN, n, function (t) {
                        zsapi.navigate2Mini(t, Laya.Handler.create(this, function (t) {
                            !t && this.isJumpFalInMoreView && e();
                        }));
                    }, [u]);
                }
            }
            return l.vScrollBar.value = l.vScrollBar.value + 200, wxad.isShowBannerAd && (wxad.hideBannerAd(),
                n.isShowBannerAd = !0), n;
        }
        return __extends(i, t), i.prototype.exit = function () {
            this.destroy(), Laya.stage.removeChild(this), this.isShowBannerAd && wxad.showbannerAd();
        }, i.prototype.drawIcon = function (t, e) {
            var i = new Laya.Sprite(), n = new Laya.Image(t);
            i.addChild(n), n.size(90, 90);
            var s = new Laya.Sprite();
            s.graphics.drawCircle(0, 0, 40, "#000000"), s.size(100, 120), s.pos(50, 50), n.mask = s,
                i.graphics.drawLine(s.width, 120, Main.width, 120, "#EBEBEB", 2);
            var a = drawText("" + e, "#000000", 30);
            i.addChild(a), a.pivotY = a.height / 2, a.x = s.width + 20, a.y = s.height / 2;
            var r = new Laya.Image("res/xxx.png");
            return r.pivotY = r.height / 2, r.y = s.height / 2, i.addChild(r), r.x = Main.width - r.width - 100,
                i.width = Main.width, i.height = 120, i;
        }, i;
    }(Laya.Sprite));
    t.HistoryView = h, t.kankanfirst = !1;
    var l = function (i) {
        function n() {
            var e = i.call(this) || this;
            e.size(Main.width, 2 * Main.height), e.mouseEnabled = !0;
            var n = new Laya.Sprite();
            n.graphics.drawRect(0, 0, Main.width, 2 * Main.height, "#000000"), e.addChild(n),
                n.alpha = .8, wxad.hideBannerAd();
            var s = Main.halfHeight, a = Main.width - 40, r = draw.fillRoundRect(0, 0, a - 5, s + 15, "#ffffff", 10, 10);
            e.addChild(r);
            var o = draw.fillRoundRect(0, 0, a - 5, 100, "#E84E4C", 10, 10);
            r.addChild(o), r.x = (Main.width - r.width) / 2, r.y = (Main.height - r.height) / 2 - 75;
            var h = drawText("好友都在玩的爆款游戏", "#ffffff", 40);
            o.addChild(h), h.pivotX = h.width / 2, h.pivotY = h.height / 2, h.x = o.width / 2,
                h.y = o.height / 2;
            var l = new Laya.Sprite();
            e.addChild(l), l.x = o.width / 2, l.y = r.y + s + 100;
            var c = new LImageButtView(0, 0, "zs/index-close.png");
            if (l.addChild(c), c.zOrder = r.zOrder + 10, c.pivotX = c.width / 2, c.pivotY = c.height / 2,
                l.graphics.drawCircle(0, 0, c.width, "#ff0000", "#ffffff", 7), t.kankanfirst && gztjapi.isOpenAdAdmin) {
                var u = l.y;
                l.y = Main.height - 90, wxapi.isHasScreenFringe() ? l.y = Main.height + 110 : wxapi.isHasScreenFringeMin() && (l.y = Main.height - 60),
                    e.timer.once(1500, e, function () {
                        wxad.showbannerAd(), this.timer.once(500, this, function () {
                            c.on(Laya.Event.CLICK, this, this.exit), Laya.Tween.to(l, {
                                y: u
                            }, 200, Laya.Ease.backInOut, Laya.Handler.create(this, function () { }));
                        });
                    });
            } else t.kankanfirst = !0, wxad.showbannerAd(), c.on(Laya.Event.CLICK, e, e.exit);
            var d = new Laya.Sprite();
            d.size(a - 10, s - 10), r.addChild(d), d.y = 100;
            var _ = new Laya.Panel();
            _.width = a - 10, _.height = s - 10 - 100, _.vScrollBarSkin = "", _.x = 45, _.y = 20,
                d.addChild(_);
            for (var f = 0; f < zsapi.listAd.length; f++) {
                var p = e.getIcon(zsapi.listAd[f]);
                _.addChild(p), p.x = f % 3 * 220, p.y = 220 * Math.floor(f / 3), p.x;
            }
            var g = 0;
            return e.timerLoop(100, e, function () {
                0 == g ? _.vScrollBar.value < _.vScrollBar.max ? _.vScrollBar.value += 5 : g = 1 : _.vScrollBar.value > 0 ? _.vScrollBar.value -= 4 : g = 0;
            }), e;
        }
        return __extends(n, i), n.prototype.setfinishHandler = function (t) {
            this.handler = t;
        }, n.prototype.exit = function () {
            wxad.hideBannerAd(), this.handler && this.handler.run(), this.destroy(), Laya.stage.removeChild(this);
        }, n.prototype.getIcon = function (t) {
            var i = new Laya.Image("res/132.png");
            i.skin = t.app_icon, i.size(190, 190), i.on(Laya.Event.MOUSE_DOWN, this, function (t) {
                zsapi.navigate2Mini(t, Laya.Handler.create(this, function (t) {
                    !t && this.isJumpFalInMoreView && e();
                }));
            }, [t]);
            var n = new Laya.Sprite();
            i.addChild(n), n.alpha = .6, n.y = i.height - 30, n.height = 30, n.graphics.drawRect(0, 0, i.width, n.height, "#000000");
            var s = drawText("" + t.app_title, "#ffffff", 18);
            return i.addChild(s), s.pivotX = s.width / 2, s.pivotY = s.height / 2, s.y = n.y + n.height / 2,
                s.x = i.width / 2, i;
        }, n;
    }(Laya.Sprite), c = function (t) {
        function e() {
            var e = t.call(this) || this;
            zsapi.sortdata();
            for (var i = 0; i < zsapi.listAd.length; i++) {
                var n = e.getIcon(zsapi.listAd[i]);
                if (e.addChild(n), n.x = i % 3 * 230, n.y = 270 * Math.floor(i / 3), i >= 5) break;
            }
            return e;
        }
        return __extends(e, t), e.prototype.getIcon = function (t) {
            var e = draw.fillRoundRect(0, 0, 190, 240, "#ffffff", 10, 10), i = new Laya.Image(t.app_icon);
            e.addChild(i), i.size(190, 190), i.pos(5, 5), e.on(Laya.Event.MOUSE_DOWN, this, function (t) {
                zsapi.navigate2Mini(t, Laya.Handler.create(this, function (t) { }));
            }, [t]);
            var n = new Laya.Sprite();
            e.addChild(n), n.graphics.drawRect(5, 0, e.width - 10, 50, "#eead39"), n.y = e.height - 55,
                n.size(e.width - 10, 50);
            var s = drawText("" + t.app_title, "#ffffff", 30);
            return n.addChild(s), s.pivotX = s.width / 2, s.x = n.width / 2, s.y = 15, e;
        }, e;
    }(Laya.Sprite);
    t.EndView = c;
    var u = function (t) {
        function i() {
            var e = t.call(this) || this;
            return e.init(), e.timerLoop(3e3, e, e.init), e;
        }
        return __extends(i, t), i.prototype.init = function () {
            this.destroyChildren(), zsapi.sortdata();
            for (var t = 0; t < zsapi.listAd.length; t++) {
                var e = this.getIcon(zsapi.listAd[t]);
                if (this.addChild(e), e.x = t % 3 * 210, e.y = 240 * Math.floor(t / 3), t >= 5) break;
            }
            this.height = 480, this.width = 630, this.x = 15 + (Main.width - this.width) / 2;
        }, i.prototype.getIcon1 = function (t) {
            var i = new Laya.Image("res/132.png");
            i.skin = t.app_icon, i.size(190, 190), i.on(Laya.Event.MOUSE_DOWN, this, function (t) {
                zsapi.navigate2Mini(t, Laya.Handler.create(this, function (t) {
                    !t && this.isJumpFalInMoreView && e();
                }));
            }, [t]);
            var n = new Laya.Sprite();
            i.addChild(n), n.alpha = .6, n.y = i.height - 30, n.height = 30, n.graphics.drawRect(0, 0, i.width, n.height, "#000000");
            var s = drawText("" + t.app_title, "#ffffff", 18);
            return i.addChild(s), s.pivotX = s.width / 2, s.pivotY = s.height / 2, s.y = n.y + n.height / 2,
                s.x = i.width / 2, i;
        }, i.prototype.getIcon = function (t) {
            var e = draw.fillRoundRect(0, 0, 160, 200, "#ffffff", 10, 10), i = new Laya.Image(t.app_icon);
            e.addChild(i), i.size(160, 160), i.pos(5, 5), e.on(Laya.Event.MOUSE_DOWN, this, function (t) {
                zsapi.navigate2Mini(t, Laya.Handler.create(this, function (t) { }));
            }, [t]);
            var n = new Laya.Sprite();
            e.addChild(n), n.size(e.width - 10, 40), n.graphics.drawRect(5, 0, e.width - 10, n.height, "#eead39"),
                n.y = e.height - (n.height + 5);
            var s = drawText("" + t.app_title, "#ffffff", 23);
            return n.addChild(s), s.pivotX = s.width / 2, s.pivotY = s.height / 2, s.x = n.width / 2,
                s.y = n.height / 2, e;
        }, i;
    }(Laya.Sprite);
    t.SixIconView = u;
}(zsview || (zsview = {}));

var tjview, __extends = this && this.__extends || function (t, e) {
    function i() {
        this.constructor = t;
    }
    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n]);
    t.prototype = null === e ? Object.create(e) : (i.prototype = e.prototype, new i());
};

!function (t) {
    function e() {
        if (tjad.listAd && 0 != tjad.listAd.length) {
            var t = new s();
            Laya.stage.addChild(t);
        }
    }
    t.drawExitAd = function (t) {
        tjad.listAd && tjad.listAd.length;
    }, t.drawGameAd = function (t) {
        if (tjad.listAd && 0 != tjad.listAd.length) {
            var e = t;
            if (e) {
                var i = new Laya.Image("zs/img_cover_slide_ad_btn.png");
                e.addChild(i), i.x = 0, i.y = 200, i.on(Laya.Event.CLICK, this, function () {
                    var t = new a(Laya.stage);
                    Laya.stage.addChild(t);
                });
            }
        }
    }, t.drawLevelAd = function (t) {
        if (tjad.listAd && 0 != tjad.listAd.length) {
            var e = t;
            if (e) {
                var i = new Laya.Image("zs/img_cover_slide_ad_btn.png");
                e.addChild(i), i.x = 0, i.y = 270, i.on(Laya.Event.CLICK, this, function () {
                    var t = new a(e);
                    e.addChild(t);
                });
            }
        }
    }, t.drawMoreView = e, t.drawRollingAd = function (t, e) {
        if (tjad.listAd && 0 != tjad.listAd.length) {
            var i = new n(e);
            t.addChild(i);
        }
    }, t.drawBtnLeft = function (t) {
        var e = new Laya.Image("zs/img_cover_slide_ad_btn.png");
        t.addChild(e), e.x = 0, e.y = 550, e.on(Laya.Event.CLICK, this, function () {
            var t = new a(Laya.stage);
            Laya.stage.addChild(t);
        });
    };
    var i = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9];
    t.drawHomeAd = function (t) {
        var e = t;
        if (e) {
            if (!tjad.listAd || 0 == tjad.listAd.length) return void tjad.init(null);
            for (i.sort(function () {
                return Math.random() - .5;
            }), s = 0; s < 3; s++) o = new r(tjad.listAd[i[s]], s), e.addChild(o), o.x = 20,
                o.y = 500 + 180 * s;
            for (var s = 0; s < 3; s++) {
                var o = new r(tjad.listAd[i[3 + s]], 3 + s);
                e.addChild(o), o.x = Main.width - 140, o.y = 500 + 180 * s;
            }
            t.timerLoop(4e3, this, function () {
                i.sort(function () {
                    return Math.random() - .5;
                });
            });
            var h = new Laya.Image("zs/img_cover_slide_ad_btn.png");
            e.addChild(h), h.x = 0, h.y = 370, h.on(Laya.Event.CLICK, this, function () {
                var t = new a(e);
                e.addChild(t);
            });
            var l = Main.height - 30, c = new n(l);
            e.addChild(c);
        }
    };
    var n = function (t) {
        function i(e) {
            var i = t.call(this) || this;
            i.isJumpFalInMoreView = !0;
            var n = Main.width - 40;
            e -= 180;
            var s = draw.fillRoundRect(10, e, n, 180, "#044943", 20, 20);
            i.addChild(s);
            var a = draw.fillRoundRect(20, e + 10, n - 10, 170, "#011816", 10, 10);
            i.addChild(a);
            var r = new Laya.Panel();
            r.width = n - 10, r.height = 170, r.hScrollBarSkin = "", r.x = 5, r.y = 5, a.addChild(r);
            for (var o = 0; o < tjad.listAd.length; o++) {
                var h = i.getIcon(tjad.listAd[o]);
                r.addChild(h), h.x = o * (h.width + 20), h.y = 5, h.x;
            }
            var l = 0;
            return i.timerLoop(100, i, function () {
                0 == l ? r.hScrollBar.value < r.hScrollBar.max ? r.hScrollBar.value += 3 : l = 1 : r.hScrollBar.value > 0 ? r.hScrollBar.value -= 3 : l = 0;
            }), i;
        }
        return __extends(i, t), i.prototype.getIcon = function (t) {
            var i = new Laya.Image(t.app_icon);
            i.size(160, 160), i.on(Laya.Event.CLICK, this, function (t) {
                tjad.navigate2Mini(t, Laya.Handler.create(this, function (t) {
                    !t && this.isJumpFalInMoreView && e();
                }));
            }, [t]);
            var n = new Laya.Sprite();
            i.addChild(n), n.alpha = .6, n.y = i.height - 30, n.height = 30, n.graphics.drawRect(0, 0, i.width, n.height, "#000000");
            var s = drawText("" + t.app_title, "#ffffff", 18);
            return i.addChild(s), s.pivotX = s.width / 2, s.pivotY = s.height / 2, s.y = n.y + n.height / 2,
                s.x = i.width / 2, i;
        }, i;
    }(Laya.Sprite), s = function (t) {
        function e() {
            var e = t.call(this) || this;
            e.size(Main.width, Main.height), e.mouseEnabled = !0;
            var i = new Laya.Sprite();
            i.graphics.drawRect(0, 0, Main.width, Main.height, "#3987c5"), e.addChild(i);
            var s = new LImageButtView(20, 40, "zs/icon-back.png");
            e.addChild(s), s.on(Laya.Event.CLICK, e, function () {
                this.destroy(), Laya.stage.removeChild(this);
            }), s.visible = !1, e.timer.once(1e3, e, function () {
                s.visible = !0;
            });
            var a = new Laya.Image("zs/title-friend.png");
            e.addChild(a), a.pivotY = a.height, a.pivotX = a.width / 2, a.x = Main.halfWidth;
            a.y = 180;
            var r = new n(310);
            e.addChild(r), r.isJumpFalInMoreView = !1;
            var o = new Laya.Image("zs/title-recommend.png");
            e.addChild(o), o.pivotY = o.height, o.pivotX = o.width / 2, o.x = Main.halfWidth;
            var h = new Laya.Panel();
            h.width = Main.width - 10, h.height = Main.height - 400, h.vScrollBarSkin = "",
                h.x = 40, h.y = 400, o.y = h.y - 10, e.addChild(h);
            var l = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9];
            l.sort(function () {
                return Math.random() - .5;
            });
            for (u = 0; u < tjad.listAd.length; u++) {
                d = e.getIcon(tjad.listAd[l[u]]);
                h.addChild(d), d.x = u % 3 * 230, d.y = 270 * Math.floor(u / 3), d.x;
            }
            l.sort(function () {
                return Math.random() - .5;
            });
            for (var c = tjad.listAd.length, u = 0; u < tjad.listAd.length; u++) {
                var d = e.getIcon(tjad.listAd[l[u]]);
                h.addChild(d), d.x = c % 3 * 230, d.y = 270 * Math.floor(c / 3), d.x, c += 1;
            }
            var _ = 0;
            e.timerLoop(100, e, function () {
                0 == _ ? h.vScrollBar.value < h.vScrollBar.max ? h.vScrollBar.value += 5 : _ = 1 : h.vScrollBar.value > 0 ? h.vScrollBar.value -= 5 : _ = 0;
            });
            var f = new LImageButtView(Main.halfWidth, Main.height - 250, "zs/btn-continue-new.png");
            e.addChild(f), f.pivotX = f.width / 2;
            var p = Math.floor(Math.random() * tjad.listAd.length);
            return f.on(Laya.Event.CLICK, e, function () {
                p = Math.floor(Math.random() * tjad.listAd.length), tjad.navigate2Mini(tjad.listAd[p], Laya.Handler.create(this, function (t) { }));
            }), e;
        }
        return __extends(e, t), e.prototype.quit = function () {
            this.destroy(), Laya.stage.removeChild(this);
        }, e.prototype.getIcon = function (t) {
            var e = draw.fillRoundRect(0, 0, 190, 240, "#ffffff", 10, 10), i = new Laya.Image(t.app_icon);
            e.addChild(i), i.size(190, 190), i.pos(5, 5), e.on(Laya.Event.CLICK, this, function (t) {
                tjad.navigate2Mini(t, Laya.Handler.create(this, function (t) { }));
            }, [t]);
            var n = new Laya.Sprite();
            e.addChild(n), n.graphics.drawRect(5, 0, e.width - 10, 50, "#eead39"), n.y = e.height - 55,
                n.size(e.width - 10, 50);
            var s = drawText("" + t.app_title, "#ffffff", 30);
            return n.addChild(s), s.pivotX = s.width / 2, s.x = n.width / 2, s.y = 15, e;
        }, e;
    }(Laya.Sprite), a = function (t) {
        function e(e) {
            var i = t.call(this) || this;
            i.bk = e, i.size(Main.width, Main.height), i.mouseEnabled = !0;
            var n = new Laya.Sprite();
            n.graphics.drawRect(0, 0, Main.width, Main.height, "#0baaec"), i.addChild(n);
            var s = new Laya.Image("zs/index-hot.png");
            i.addChild(s), s.pivotX = s.width / 2, s.pivotY = s.height, s.y = 150, s.x = Main.halfWidth;
            var a = new LImageButtView(0, 0, "zs/icon-back.png");
            i.addChild(a), a.x = 20, a.y = 50, a.onPos(a.x, a.y), a.on(Laya.Event.CLICK, i, function () {
                this.destroy(), this.bk.removeChild(this), wxad.hideBannerAd();
            });
            var r = new Laya.Panel();
            r.width = Main.width - 10, r.height = Main.height - 400, r.vScrollBarSkin = "",
                r.x = 40, r.y = s.y + s.height, i.addChild(r);
            var o = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9];
            o.sort(function () {
                return Math.random() - .5;
            });
            for (l = 0; l < tjad.listAd.length; l++) {
                c = i.getIcon(tjad.listAd[o[l]]);
                r.addChild(c), c.x = l % 3 * 230, c.y = 270 * Math.floor(l / 3), c.x;
            }
            o.sort(function () {
                return Math.random() - .5;
            });
            for (var h = tjad.listAd.length, l = 0; l < tjad.listAd.length; l++) {
                var c = i.getIcon(tjad.listAd[o[l]]);
                r.addChild(c), c.x = h % 3 * 230, c.y = 270 * Math.floor(h / 3), c.x, h += 1;
            }
            var u = 0;
            return i.timerLoop(100, i, function () {
                0 == u ? r.vScrollBar.value < r.vScrollBar.max ? r.vScrollBar.value += 5 : u = 1 : r.vScrollBar.value > 0 ? r.vScrollBar.value -= 5 : u = 0;
            }), wxad.showbannerAd(), i;
        }
        return __extends(e, t), e.prototype.getIcon = function (t) {
            var e = draw.fillRoundRect(0, 0, 190, 240, "#ffffff", 10, 10), i = new Laya.Image(t.app_icon);
            e.addChild(i), i.size(190, 190), i.pos(5, 5), e.on(Laya.Event.CLICK, this, function (t) {
                tjad.navigate2Mini(t, Laya.Handler.create(this, function (t) { }));
            }, [t]);
            var n = new Laya.Sprite();
            e.addChild(n), n.graphics.drawRect(5, 0, e.width - 10, 50, "#eead39"), n.y = e.height - 55,
                n.size(e.width - 10, 50);
            var s = drawText("" + t.app_title, "#ffffff", 30);
            return n.addChild(s), s.pivotX = s.width / 2, s.x = n.width / 2, s.y = 15, e;
        }, e;
    }(Laya.Sprite), r = function (t) {
        function n(e, n) {
            var s = t.call(this) || this;
            if (s.data = e, !e) return s;
            var a = new Laya.Image(e.app_icon);
            s.addChild(a), a.size(120, 120), Laya.loader.load([e.app_icon], Laya.Handler.create(s, function () {
                var t = drawText("点击试玩", "#ffffff", 20);
                t.pivotX = t.width / 2, t.y = a.height, t.x = a.width / 2, t.stroke = 2, t.strokeColor = "#000000",
                    this.addChild(t);
            })), a.on(Laya.Event.CLICK, s, s.onMiniClick);
            var r = new Laya.GlowFilter("#ff0000", 10, 0, 0), o = new Laya.GlowFilter("#0000ff", 10, 0, 0), h = 0;
            return s.timerLoop(200, s, function () {
                h = (h + 1) % 2, a.filters = 0 == h ? [r] : [o];
            }), s.timerLoop(5e3, s, function () {
                var t = i[n];
                a.skin = tjad.listAd[t].app_icon, this.data = tjad.listAd[t];
            }), s;
        }
        return __extends(n, t), n.prototype.onMiniClick = function () {
            var t = this.data;
            console.log("点击了:  " + t.app_title), tjad.navigate2Mini(t, Laya.Handler.create(this, function (t) {
                t || e();
            }));
        }, n;
    }(Laya.Sprite);
    !function (t) {
        function i(e) {
            var i = t.call(this) || this;
            i.data = e;
            var n = new Laya.Image(e.app_icon);
            return i.addChild(n), n.size(120, 120), Laya.loader.load([e.app_icon], Laya.Handler.create(i, function () {
                var t = drawText("" + e.app_title, "#7c7c7c", 20);
                t.pivotX = t.width / 2, t.y = n.height + 10, t.x = n.width / 2, this.addChild(t);
            })), n.on(Laya.Event.CLICK, i, i.onMiniClick), i;
        }
        __extends(i, t), i.prototype.onMiniClick = function () {
            var t = this.data;
            tjad.navigate2Mini(t, Laya.Handler.create(this, function (t) {
                t || e();
            }));
        };
    }(Laya.Sprite);
}(tjview || (tjview = {}));

var dbdialog, __extends = this && this.__extends || function (t, e) {
    function i() {
        this.constructor = t;
    }
    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n]);
    t.prototype = null === e ? Object.create(e) : (i.prototype = e.prototype, new i());
};

!function (t) {
    t.setDialog = function (t, i, n) {
        var s = new e(t, i, n);
        Laya.stage.addChild(s);
    }, t.seteeDialog = function (t, e, n) {
        var s = new i(t, e, n);
        Laya.stage.addChild(s);
    };
    var e = function (e) {
        function i(t, i, n) {
            var s = e.call(this) || this;
            s.curValue = 0, s.curValue = n, s.size(Main.width, 2 * Main.height), s.mouseEnabled = !0;
            var a = new Laya.Sprite();
            a.graphics.drawRect(0, 0, Main.width, 2 * Main.height, "#000000"), a.alpha = .7,
                s.addChild(a);
            var r = s.getBKView("#FEDA82", 0, 0);
            r.pivotX = r.width / 2, r.pivotY = r.height / 2, r.y = Main.halfHeight, r.x = Main.halfWidth,
                s.addChild(r);
            var o = new Laya.Image("icon/tl.png");
            r.addChild(o), o.pivotX = o.width / 2, o.pivotY = o.height / 2, o.x = r.width / 2,
                o.y = r.height / 2 - 50;
            var h = drawText("恭喜获得体力", "#47180c", 35);
            r.addChild(h), h.pivotX = h.width / 2, h.x = r.width / 2, h.y = 50;
            var l = drawText("x" + n, "#046604", 40);
            o.addChild(l), l.pivotY = l.height / 2, l.pivotX = l.width / 2, l.y = o.height / 2 + 50,
                l.x = o.width / 2;
            var c = new LImageButtView(0, 0, "res/ad-close.png");
            s.addChild(c), c.pivotX = c.width / 2, c.x = r.x, c.y = r.y + r.height / 2 + 20,
                c.onPos(c.x, c.y);
            var u = s.getBtn("#fe3b06", 0, 0, "    双倍领取");
            r.addChild(u), u.pivotX = u.width / 2, u.x = r.width / 2, u.y = r.height - u.height - 50;
            var d = new Laya.Image("res/revive.jpg");
            if (u.addChild(d), d.x = 20, d.pivotY = d.height / 2, d.y = u.height / 2, u.on(Laya.Event.CLICK, s, function () {
                wxad.showVideoAd(Laya.Handler.create(this, function (t) {
                    t && (this.curValue = 2 * this.curValue, this.init(), this.exit());
                }));
            }), wxad.hideBannerAd(), gztjapi.isOpenAdAdmin) {
                var _ = c.y;
                c.y = Main.height - 90, wxapi.isHasScreenFringe() ? c.y = Main.height + 50 : wxapi.isHasScreenFringeMin() && (c.y = Main.height - 60),
                    s.timer.once(1500, s, function () {
                        wxad.showbannerAd(), this.timer.once(500, this, function () {
                            c.on(Laya.Event.CLICK, this, this.exitOK), Laya.Tween.to(c, {
                                y: _
                            }, 200, Laya.Ease.backInOut, Laya.Handler.create(this, function () { }));
                        });
                    });
            } else wxad.showbannerAd(), c.on(Laya.Event.CLICK, s, s.exitOK);
            return s;
        }
        return __extends(i, e), i.prototype.exitOK = function () {
            this.init(), this.exit();
        }, i.prototype.init = function () {
            var t = toast.showToastInfo1({
                info1: "Get ",
                info2: " Power x" + this.curValue,
                skin: "icon/tl.png"
            });
            t.zOrder = 99999999, Laya.stage.addChild(t), data.tlcount += this.curValue, data.save(),
                wxald.onRunning(0, "双倍领取");
        }, i.prototype.exit = function () {
            this.timer.clearAll(this), this.destroy(), Laya.stage.removeChild(this), t.finishHandler && t.finishHandler.run();
        }, i.prototype.getBtn = function (t, e, i, n) {
            var s = draw.fillRoundRect(e, i, 270, 120, "#ffffff", 20, 20), a = draw.fillRoundRect(5, 5, 260, 100, t, 20, 20);
            s.addChild(a);
            var r = new Laya.GlowFilter("#553728", 0, 0, 10);
            a.filters = [r];
            var o = drawText(n, "#ffffff", 40);
            return a.addChild(o), o.pivotX = o.width / 2, o.pivotY = o.height / 2, o.y = a.height / 2,
                o.x = a.width / 2, s;
        }, i.prototype.getBKView = function (t, e, i) {
            var n = draw.fillRoundRect(e, i, 610, 480, "#ffffff", 20, 20), s = draw.fillRoundRect(5, 5, 600, 460, t, 20, 20);
            n.addChild(s);
            var a = new Laya.GlowFilter("#553728", 0, 0, 10);
            return s.filters = [a], n;
        }, i;
    }(Laya.Sprite), i = function (e) {
        function i(t, i, n) {
            var s = e.call(this) || this;
            s.curValue = 0, s.curValue = n, s.size(Main.width, 2 * Main.height), s.mouseEnabled = !0;
            var a = new Laya.Sprite();
            a.graphics.drawRect(0, 0, Main.width, 2 * Main.height, "#000000"), a.alpha = .7,
                s.addChild(a);
            var r = s.getBKView("#FEDA82", 0, 0);
            r.pivotX = r.width / 2, r.pivotY = r.height / 2, r.y = Main.halfHeight, r.x = Main.halfWidth,
                s.addChild(r);
            var o = new Laya.Image("res/egg/egg.png");
            r.addChild(o), o.scale(.9, .9), o.pivotX = o.width / 2, o.pivotY = o.height / 2,
                o.x = r.width / 2, o.y = r.height / 2 - 70;
            var h = drawText("次数已用完，再领3次机会", "#47180c", 35);
            r.addChild(h), h.pivotX = h.width / 2, h.x = r.width / 2, h.y = 50;
            var l = drawText("3次砸蛋机会", "#046604", 40);
            o.addChild(l), l.pivotY = l.height / 2, l.pivotX = l.width / 2, l.y = o.height / 2 + 70,
                l.x = o.width / 2;
            var c = new LImageButtView(0, 0, "res/ad-close.png");
            s.addChild(c), c.pivotX = c.width / 2, c.x = r.x, c.y = r.y + r.height / 2 + 20,
                c.onPos(c.x, c.y);
            var u = s.getBtn("#fe3b06", 0, 0, "    领取机会");
            r.addChild(u), u.pivotX = u.width / 2, u.x = r.width / 2, u.y = r.height - u.height - 50;
            var d = new Laya.Image("res/revive.jpg");
            if (u.addChild(d), d.x = 20, d.pivotY = d.height / 2, d.y = u.height / 2, u.on(Laya.Event.CLICK, s, function () {
                wxad.showVideoAd(Laya.Handler.create(this, function (t) {
                    t && (this.init(), this.exit(), egg.useeggcount += 1);
                }));
            }), wxad.hideBannerAd(), gztjapi.isOpenAdAdmin) {
                var _ = c.y;
                c.y = Main.height - 90, wxapi.isHasScreenFringe() ? c.y = Main.height + 50 : wxapi.isHasScreenFringeMin() && (c.y = Main.height - 60),
                    s.timer.once(1500, s, function () {
                        wxad.showbannerAd(), this.timer.once(500, this, function () {
                            c.on(Laya.Event.CLICK, this, this.exit), Laya.Tween.to(c, {
                                y: _
                            }, 200, Laya.Ease.backInOut, Laya.Handler.create(this, function () { }));
                        });
                    });
            } else wxad.showbannerAd(), c.on(Laya.Event.CLICK, s, s.exit);
            return s;
        }
        return __extends(i, e), i.prototype.init = function () {
            data.eggCount += 3, data.save(), toast.showToast("成功获得3次砸蛋机会！"), wxald.onRunning(0, "3次砸蛋机会");
        }, i.prototype.exit = function () {
            this.timer.clearAll(this), this.destroy(), Laya.stage.removeChild(this), t.finishHandler && t.finishHandler.run();
        }, i.prototype.getBtn = function (t, e, i, n) {
            var s = draw.fillRoundRect(e, i, 270, 120, "#ffffff", 20, 20), a = draw.fillRoundRect(5, 5, 260, 100, t, 20, 20);
            s.addChild(a);
            var r = new Laya.GlowFilter("#553728", 0, 0, 10);
            a.filters = [r];
            var o = drawText(n, "#ffffff", 40);
            return a.addChild(o), o.pivotX = o.width / 2, o.pivotY = o.height / 2, o.y = a.height / 2,
                o.x = a.width / 2, s;
        }, i.prototype.getBKView = function (t, e, i) {
            var n = draw.fillRoundRect(e, i, 610, 480, "#ffffff", 20, 20), s = draw.fillRoundRect(5, 5, 600, 460, t, 20, 20);
            n.addChild(s);
            var a = new Laya.GlowFilter("#553728", 0, 0, 10);
            return s.filters = [a], n;
        }, i;
    }(Laya.Sprite);
}(dbdialog || (dbdialog = {}));

var egg, __extends = this && this.__extends || function (t, e) {
    function i() {
        this.constructor = t;
    }
    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n]);
    t.prototype = null === e ? Object.create(e) : (i.prototype = e.prototype, new i());
};

!function (t) {
    t.setEggView = function () {
        var i = new e();
        Laya.stage.addChild(i), t.useeggcount = 0;
    }, t.useeggcount = 0;
    var e = function (e) {
        function n() {
            var t = e.call(this) || this;
            t.list = [], t.count = 0, t.size(Main.width, 2 * Main.height), t.mouseEnabled = !0;
            var n = new Laya.Sprite();
            t.addChild(n), n.graphics.drawRect(0, 0, Main.width, 2 * Main.height, "#33ccff"),
                n.graphics.drawRect(0, Main.halfHeight, Main.width, 2 * Main.height, "#428912");
            var s = new Laya.Image("res/egg/bg.png");
            t.addChild(s), s.x = (Main.width - s.width) / 2, s.y = (Main.height - s.height) / 2 - 40,
                t.bk = s;
            var a = mlevel.drawTlIcon(0, 0, t);
            t.addChild(a), a.pivotX = a.width / 2, a.x = Main.halfWidth - 30, a.y = 30 + Main.autoInitTopHeight;
            var r = new LImageButtView(0, 0, "res/ad-close.png");
            t.addChild(r), r.x = 30, r.y = 30, r.onPos(r.x, r.y), r.on(Laya.Event.CLICK, t, function () {
                this.exit();
            }), r.visible = !1;
            var o = new Laya.Image("res/egg/sy.png");
            t.addChild(o), o.x = 30, o.y = 100;
            var h = drawText("" + data.eggCount, "#ffffff", 40);
            o.addChild(h), h.pivotX = h.width / 2, h.pivotY = h.height / 2, h.y = 20 + o.height / 2,
                h.x = o.width / 2, t.text = h, t.text.text = "" + data.eggCount;
            var l = drawText("砸金蛋获体力", "#ff5300", 50);
            s.addChild(l), l.pivotX = l.width / 2, l.x = Main.halfWidth, l.y = 0;
            var c = drawText("砸蛋越多，获得体力越多", "#ff0000", 30);
            s.addChild(c), c.pivotX = c.width / 2, c.x = Main.halfWidth, c.y = l.y + l.height + 10;
            var u = drawText("点击金蛋开砸吧", "#4e514e", 30);
            s.addChild(u), u.pivotX = u.width / 2, u.x = Main.halfWidth, u.y = c.y + c.height + 30;
            var d = new Laya.Image("res/IcnTutoFingerDwn.png");
            s.addChild(d), d.zOrder = 10, t.handicon = d;
            for (var _ = 0; _ < 4; _++) {
                var f = new i("res/egg/egg.png");
                s.addChild(f), f.pivotX = f.width / 2, f.pivotY = f.height, f.x = 198 + 127 * _,
                    f.y = 319, f.on(Laya.Event.MOUSE_DOWN, t, t.openEggEvent, [f]), t.list.push(f);
            }
            d.x = t.list[Math.floor(4 * Math.random())].x, d.y = t.list[0].y - 70;
            var p = !1;
            t.timerLoop(100, t, function () {
                p = !p, d.skin = p ? "res/IcnTutoFingerDwn.png" : "res/IcnTutoFingerNor.png";
            });
            var g = t.getBtn("#e83e0a", 0, 0, "    再来3次");
            s.addChild(g), g.pivotX = g.width / 2, g.y = s.height - 400, g.x = Main.halfWidth;
            var v = new Laya.Image("res/revive.jpg");
            g.addChild(v), v.x = 20, v.pivotY = v.height / 2, v.y = g.height / 2, g.on(Laya.Event.CLICK, t, function () {
                wxad.showVideoAd(Laya.Handler.create(this, function (t) {
                    t && (toast.showToast("成功获得3次机会！"), data.eggCount += 3, this.text.text = "" + data.eggCount);
                }));
            });
            var m = drawText("点击返回", "#ffffff", 40);
            s.addChild(m), m.pivotX = m.width / 2, m.x = Main.halfWidth, m.y = g.y + g.height + 30,
                m.width = 2 * m.width, m.italic = !0, m.underline = !0, m.visible = !1, m.on(Laya.Event.CLICK, t, function () {
                    this.exit();
                }), t.timer.once(3e3, t, function () {
                    r.visible = !0, m.visible = !0;
                });
            var y = new zsview.RollingView();
            return s.addChild(y), y.y = m.y + m.height + 210, wxad.showbannerAd(), t;
        }
        return __extends(n, e), n.prototype.openEggEvent = function (e) {
            if (data.eggCount > 0) {
                data.eggCount -= 1, data.save(), this.text.text = "" + data.eggCount, e.setOpen(),
                    this.initHand();
                var i = Math.floor(100 * Math.random());
                if (i < 30) toast.showToast("呵哦，砸了一个空蛋！"); else {
                    var n = 1 + t.useeggcount + Math.floor(2 * Math.random());
                    i > 90 && (n = 4 + t.useeggcount), dbdialog.setDialog(this.bk.x + e.x, this.bk.y + e.y, n);
                }
                this.count += 1, this.count >= 4 && (this.count = 0, this.init());
            } else dbdialog.seteeDialog(this.bk.x + e.x, this.bk.y + e.y, 3);
            dbdialog.finishHandler = Laya.Handler.create(this, function () {
                dbdialog.finishHandler.recover(), this.text.text = "" + data.eggCount, mlevel.tltext.text = "" + data.tlcount;
            });
        }, n.prototype.initHand = function () {
            if (this.list) for (var t = 0; t < this.list.length; t++) {
                var e = this.list[t];
                if (!e.isOpen) return void (this.handicon.x = e.x);
            }
        }, n.prototype.init = function () {
            if (this.list) {
                for (var t = 0; t < this.list.length; t++) {
                    this.list[t].init();
                }
                this.initHand();
            }
        }, n.prototype.exit = function () {
            this.destroy(), Laya.stage.removeChild(this), wxad.hideBannerAd(), t.finishHandler && t.finishHandler.run();
        }, n.prototype.getBtn = function (t, e, i, n) {
            var s = draw.fillRoundRect(e, i, 270, 120, "#ffffff", 20, 20), a = draw.fillRoundRect(5, 5, 260, 100, t, 20, 20);
            s.addChild(a);
            var r = new Laya.GlowFilter("#553728", 0, 0, 10);
            a.filters = [r];
            var o = drawText(n, "#ffffff", 40);
            return a.addChild(o), o.pivotX = o.width / 2, o.pivotY = o.height / 2, o.y = a.height / 2,
                o.x = a.width / 2, s;
        }, n;
    }(Laya.Sprite), i = function (t) {
        function e(e) {
            var i = t.call(this, e) || this;
            return i.isOpen = !1, i.init(), i;
        }
        return __extends(e, t), e.prototype.init = function () {
            this.isOpen = !1, this.skin = "res/egg/egg.png", this.pivotY = this.height, this.pivotX = this.width / 2;
            var t = 0 == Math.floor(2 * Math.random());
            this.timerLoop(100, this, function () {
                t ? this.rotation < 10 ? this.rotation += 2 : t = !1 : this.rotation > -10 ? this.rotation -= 2 : t = !0;
            });
        }, e.prototype.setOpen = function () {
            this.isOpen = !0, this.timer.clearAll(this), this.rotation = 0, this.skin = "res/egg/egg2.png",
                this.pivotY = this.height, this.pivotX = this.width / 2;
        }, e;
    }(Laya.Image);
}(egg || (egg = {}));

var uitiem, __extends = this && this.__extends || function (t, e) {
    function i() {
        this.constructor = t;
    }
    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n]);
    t.prototype = null === e ? Object.create(e) : (i.prototype = e.prototype, new i());
}, FmMenuView = function (t) {
    function e() {
        var e = t.call(this) || this;
        e.size(Main.width, 2 * Main.height),
            e.mouseEnabled = !0,
            data.read();
        var i = new Laya.Sprite();
        e.addChild(i),
            i.graphics.drawRect(0, 0, Main.width, 2 * Main.height, "#96674d");
        var n = new Laya.Image("res/fm.jpg");
        e.addChild(n);
        var s = mlevel.drawTlIcon(0, 0, e);
        e.addChild(s),
            s.pivotX = s.width / 2,
            s.x = 100, s.y = 30;
        var a = new LImageButtView(20, 210, "icon/voice2.png");
        let yad     = new Laya.Image();
                            yad.scale(0.8,0.8);
                            yad.skin    = "icon/yad.png";
                            yad.bottom  = 5;
                            yad.centerX = 0;
                            //yad.top   = 10;
                            yad.zOrder  = 1e3;
                            yad.on(Laya.Event.MOUSE_DOWN,yad,()=>{platform.getInstance().navigate("GAME","LOGO")})
                            Laya.stage.addChild(yad);
                            window.yad  = yad;
        e.addChild(a),
            a.on(Laya.Event.CLICK, e, function () {
                music.isPlayMusic = !music.isPlayMusic,
                    music.isPlayMusic ?
                        (a.skin = "icon/voice2.png", music.onPlaySound())
                        : (a.skin = "icon/voice.png", music.onPlayStop());
            }),
            music.isPlayMusic ? a.skin = "icon/voice2.png" : a.skin = "icon/voice.png";
        var r = new LImageButtView(0, 0, "res/button2.png");
        e.addChild(r),
            r.pivotX = r.width / 2,
            r.x = Main.halfWidth,
            r.y = 870,
            r.onPos(r.x, r.y),
            r.name = "1";
        var o = new LImageButtView(0, 0, "res/button1.png");
        e.addChild(o), 
        o.anchorX = 0.5, 
        o.x = Main.halfWidth, 
        o.y = r.y + r.height+20, 
        o.onPos(o.x, o.y), 
        o.width = 0.8*o.width;
        o.height = 0.8*o.height;
        o.name = "0", 
        r.on(Laya.Event.CLICK, e, function () {
            if(platform.getInstance().initialized_){
                platform.getInstance().showInterstitial(()=>{
                    data.tlcount > 0
                    ? (mlevel.useTl(), this.exit(), Laya.stage.destroyChildren(), z6game.setGameView())
                    :
                    dialog.setDialog(Laya.Handler.create(this, function (t) {
                        if (t) {
                            data.tlcount += 3, data.save(), mlevel.tltext.text = "" + data.tlcount;
                            var e = toast.showToastInfo1({
                                info1: "Get ",
                                info2: " Power x3",
                                skin: "icon/tl.png"
                            });
                            e.zOrder = 99999999, Laya.stage.addChild(e);
                        }
                    }, null, !1));
                });
            }else{
                data.tlcount > 0
                ? (mlevel.useTl(), this.exit(), Laya.stage.destroyChildren(), z6game.setGameView())
                :
                dialog.setDialog(Laya.Handler.create(this, function (t) {
                    if (t) {
                        data.tlcount += 3, data.save(), mlevel.tltext.text = "" + data.tlcount;
                        var e = toast.showToastInfo1({
                            info1: "Get ",
                            info2: " Power x3",
                            skin: "icon/tl.png"
                        });
                        e.zOrder = 99999999, Laya.stage.addChild(e);
                    }
                }, null, !1));
            }
        }),
        o.on(Laya.Event.CLICK, e, function () {
            if(platform.getInstance().initialized_){
                platform.getInstance().showInterstitial(()=>{
                    data.tlcount > 0
                    ? (mlevel.useTl(), this.exit(), Laya.stage.destroyChildren(),data.curLevel = 1,data.save(), z6game.setGameView())
                    :
                    dialog.setDialog(Laya.Handler.create(this, function (t) {
                        if (t) {
                            data.tlcount += 3, data.save(), mlevel.tltext.text = "" + data.tlcount;
                            var e = toast.showToastInfo1({
                                info1: "Get ",
                                info2: " Power x3",
                                skin: "icon/tl.png"
                            });
                            e.zOrder = 99999999, Laya.stage.addChild(e);
                        }
                    }, null, !1));
                });
            }
            else{
                data.tlcount > 0
                ? (mlevel.useTl(), this.exit(), Laya.stage.destroyChildren(),data.curLevel = 1,data.save(), z6game.setGameView())
                :
                dialog.setDialog(Laya.Handler.create(this, function (t) {
                    if (t) {
                        data.tlcount += 3, data.save(), mlevel.tltext.text = "" + data.tlcount;
                        var e = toast.showToastInfo1({
                            info1: "Get ",
                            info2: " Power x3",
                            skin: "icon/tl.png"
                        });
                        e.zOrder = 99999999, Laya.stage.addChild(e);
                    }
                }, null, !1));
            }
        }),
            // o.on(Laya.Event.CLICK, e, function() {
            //     zsview.drawMoreView();
            // }), 
            //zsview.drawHomeAd(e);
        // var h = zsview.drawExitAd(e, null);
        // return h && (h.y = 100),
        //     wxapi.isHasScreenFringe() && wxad.showbannerAd(), wxad.iniloadVideo(),
            e;
    }
    return __extends(e, t), e.prototype.setLevelView = function () {
        var t = z6game.setGameView();
        Laya.Tween.to(this, {
            y: Main.height
        }, 300, Laya.Ease.circIn, Laya.Handler.create(this, function () {
            this.exit();
        })), Laya.Tween.to(t, {
            y: 0
        }, 300, Laya.Ease.circIn, Laya.Handler.create(this, function () { }));
    }, e.prototype.exit = function () {
        wxad.hideBannerAd(), this.timer.clearAll(this), this.destroy(), Laya.stage.removeChild(this);
    }, e;
}(Laya.Sprite), __extends = this && this.__extends || function (t, e) {
    function i() {
        this.constructor = t;
    }
    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n]);
    t.prototype = null === e ? Object.create(e) : (i.prototype = e.prototype, new i());
}, DogMonster = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.mSkeleton = new Laya.Skeleton(), e.addChild(e.mSkeleton), e;
    }
    return __extends(e, t), e.prototype.initRoleImage = function () {
        this.mSkeleton.load("res/sk/dog.sk", Laya.Handler.create(this, function () {
            this.width = this.mSkeleton.width, this.height = this.mSkeleton.height, this.loadFinishHandler && this.loadFinishHandler.run();
        }), 0), this.mSkeleton.on(Laya.Event.LABEL, this, this.onEvent);
    }, e.prototype.onEvent = function (t) { }, e.prototype.setPause = function () {
        this.mSkeleton.stop();
    }, e.prototype.setAttactAni1 = function (t) {
        this.mSkeleton.play(t, !0);
    }, e.prototype.setAttactAni2 = function (t, e) {
        this.mSkeleton.play(t, !0), this.mSkeleton.on(Laya.Event.LABEL, this, function (t) {
            t && t.name && "end" == t.name && (e.run(), this.mSkeleton.offAll());
        });
    }, e;
}(Laya.Sprite), __extends = this && this.__extends || function (t, e) {
    function i() {
        this.constructor = t;
    }
    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n]);
    t.prototype = null === e ? Object.create(e) : (i.prototype = e.prototype, new i());
}, GirlRole = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.mSkeleton = new Laya.Skeleton(), e.addChild(e.mSkeleton), e;
    }
    return __extends(e, t), e.prototype.initRoleImage = function () {
        this.mSkeleton.load("res/sk/role.sk", Laya.Handler.create(this, function () {
            this.width = this.mSkeleton.width, this.height = this.mSkeleton.height, this.loadFinishHandler && this.loadFinishHandler.run();
        }), 0), this.mSkeleton.on(Laya.Event.LABEL, this, this.onEvent);
    }, e.prototype.onEvent = function (t) { },
        e.prototype.setPause = function () {
            this.mSkeleton.stop();
        }, e.prototype.setAttactAni1 = function (t) {
            this.mSkeleton.play(t, !0);
        }, e.prototype.setAttactAni2 = function (t, e) {
            this.mSkeleton.play(t, !0), this.mSkeleton.on(Laya.Event.LABEL, this, function (t) {
                t && t.name && "end" == t.name && (e.run(), this.mSkeleton.offAll());
            });
        }, e;
}(Laya.Sprite), __extends = this && this.__extends || function (t, e) {
    function i() {
        this.constructor = t;
    }
    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n]);
    t.prototype = null === e ? Object.create(e) : (i.prototype = e.prototype, new i());
}, ItemBtton = function (t) {
    function e() {
        var e = t.call(this) || this;
        e.isLock = !1;
        var i = new LImageButtView(0, 0, "icon/icon_bg.png");
        return e.addChild(i), e.btn = i, e.width = i.width, e.height = i.height, e;
    }
    return __extends(e, t), e.prototype.initAddIcon = function (t) {
        if (this.btn) {
            var e = new Laya.Image(t);
            this.btn.addChild(e), e.pivotX = e.width / 2, e.pivotY = e.height / 2, e.x = this.btn.width / 2,
                e.y = this.btn.height / 2;
        }
    }, e.prototype.setLock = function () {
        this.isLock = !0;
        var t = new Laya.Image();
        this.btn.addChild(t), t.alpha = .6, t.graphics.drawRect(0, 0, this.btn.width, this.btn.height, "#000000");
    }, e.prototype.setResult = function (t) {
        if (this.btn) {
            var e = t ? "icon/right.png" : "icon/wrong.png", i = new Laya.Image(e);
            this.btn.addChild(i), i.pivotX = i.width / 2, i.pivotY = i.height / 2, i.x = this.btn.width / 2,
                i.y = this.btn.height / 2, i.zOrder = 100;
        }
    }, e;
}(Laya.Sprite), __extends = this && this.__extends || function (t, e) {
    function i() {
        this.constructor = t;
    }
    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n]);
    t.prototype = null === e ? Object.create(e) : (i.prototype = e.prototype, new i());
}, OKEndView = function (t) {
    function e() {
        var e = t.call(this) || this;
        e.size(Main.width, 2 * Main.height), e.mouseEnabled = !0;
        var i = new Laya.Sprite();
        e.addChild(i), i.graphics.drawRect(0, 0, Main.width, 2 * Main.height, "#000000"),
            i.alpha = .7;
        var n = new Laya.Image("icon/a1.png");
        e.addChild(n),
            n.anchorX = 0.5,
            n.centerX = 0,
            n.y = 200;
        var s = new GirlRole();
        return s.initRoleImage(),
            e.addChild(s),
            s.loadFinishHandler = Laya.Handler.create(e, function () {
                s.setAttactAni1("3");
            }),
            s.x = Laya.stage.width / 2 - 20,
            s.y = Laya.stage.height / 2 + 100,
            leveltool.addFireworks(e),
            e.timer.once(3e3, e, function () {
                s.setPause(),
                    this.endfinishHandler && this.endfinishHandler.run(),
                    this.exit();
            }), e;
    }
    return __extends(e, t), e.prototype.exit = function () {
        this.timer.clearAll(this), this.destroy(), Laya.stage.removeChild(this);
    }, e;
}(Laya.Sprite), __extends = this && this.__extends || function (t, e) {
    function i() {
        this.constructor = t;
    }
    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n]);
    t.prototype = null === e ? Object.create(e) : (i.prototype = e.prototype, new i());
}, PdMonster = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.mSkeleton = new Laya.Skeleton(), e.addChild(e.mSkeleton), e;
    }
    return __extends(e, t), e.prototype.initRoleImage = function () {
        this.mSkeleton.load("res/sk/bp.sk", Laya.Handler.create(this, function () {
            this.width = this.mSkeleton.width, this.height = this.mSkeleton.height, this.loadFinishHandler && this.loadFinishHandler.run();
        }), 0), this.mSkeleton.on(Laya.Event.LABEL, this, this.onEvent);
    }, e.prototype.onEvent = function (t) { }, e.prototype.setPause = function () {
        this.mSkeleton.stop();
    }, e.prototype.setAttactAni1 = function (t) {
        this.mSkeleton.play(t, !0);
    }, e.prototype.setAttactAni2 = function (t, e) {
        this.mSkeleton.play(t, !0), this.mSkeleton.on(Laya.Event.LABEL, this, function (t) {
            t && t.name && "end" == t.name && (e.run(), this.mSkeleton.offAll());
        });
    }, e;
}(Laya.Sprite), __extends = this && this.__extends || function (t, e) {
    function i() {
        this.constructor = t;
    }
    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n]);
    t.prototype = null === e ? Object.create(e) : (i.prototype = e.prototype, new i());
}, RoleImage = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.reslist = [], e.isEnd = !1, e.isRun = !1, e.isXrun = !1, e.runWidth = 0,
            e;
    }
    return __extends(e, t), e.prototype.setResList = function (t) {
        t && (this.reslist = t);
    }, e.prototype.init = function (t) {
        if (t) {
            this.reslist = t, this.skin = this.reslist[0], this.pivotX = this.width / 2;
            var e = 0;
            this.timerLoop(100, this, function () {
                e = (e + 1) % this.reslist.length, this.skin = this.reslist[e], this.pivotX = this.width / 2,
                    this.isEnd || this.isXrun && (this.isRun ? this.x > this.x1 ? this.x -= 8 : (this.isRun = !1,
                        this.scaleX = 1) : this.x < this.x2 ? this.x += 8 : (this.isRun = !0, this.scaleX = -1));
            });
        }
    }, e.prototype.setEnd = function () {
        this.isEnd = !0;
    }, e.prototype.setRunX = function (t, e) {
        this.x1 = t, this.x2 = e, this.isXrun = !0, this.runWidth = 0, this.isEnd = !1;
    }, e.prototype.setRunY = function (t, e) {
        this.y1 = t, this.runWidth = 0, this.y2 = e, this.isXrun = !1, this.isEnd = !1;
    }, e;
}(Laya.Image), __extends = this && this.__extends || function (t, e) {
    function i() {
        this.constructor = t;
    }
    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n]);
    t.prototype = null === e ? Object.create(e) : (i.prototype = e.prototype, new i());
}, ZombieMonster = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.mSkeleton = new Laya.Skeleton(), e.addChild(e.mSkeleton), e;
    }
    return __extends(e, t), e.prototype.initRoleImage = function () {
        this.mSkeleton.load("res/sk/js.sk", Laya.Handler.create(this, function () {
            this.width = this.mSkeleton.width, this.height = this.mSkeleton.height, this.loadFinishHandler && this.loadFinishHandler.run();
        }), 0), this.mSkeleton.on(Laya.Event.LABEL, this, this.onEvent);
    }, e.prototype.onEvent = function (t) { }, e.prototype.setPause = function () {
        this.mSkeleton.stop();
    }, e.prototype.setAttactAni1 = function (t) {
        this.mSkeleton.play(t, !0);
    }, e.prototype.setAttactAni2 = function (t, e) {
        this.mSkeleton.play(t, !0), this.mSkeleton.on(Laya.Event.LABEL, this, function (t) {
            t && t.name && "end" == t.name && (e.run(), this.mSkeleton.offAll());
        });
    }, e;
}(Laya.Sprite), __extends = this && this.__extends || function (t, e) {
    function i() {
        this.constructor = t;
    }
    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n]);
    t.prototype = null === e ? Object.create(e) : (i.prototype = e.prototype, new i());
};

!function (t) {
    var e;
    t.setLoadingView = function () {
        e || (e = new i(), Laya.stage.addChild(e));
    }, t.hideLoadingView = function () {
        e && (e.destroy(), Laya.stage.removeChild(e), e = null);
    };
    var i = function (t) {
        function e() {
            var e = t.call(this) || this;
            e.size(Main.width, 2 * Main.height), e.mouseEnabled = !0;
            var i = drawText("请稍候...", "#ffffff", 35);
            return i.bgColor = "#000000", e.addChild(i), i.pivotX = i.width / 2, i.x = Main.halfWidth,
                i.y = 0, e;
        }
        return __extends(e, t), e;
    }(Laya.Sprite);
}(uitiem || (uitiem = {}));

var dialog, __extends = this && this.__extends || function (t, e) {
    function i() {
        this.constructor = t;
    }
    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n]);
    t.prototype = null === e ? Object.create(e) : (i.prototype = e.prototype, new i());
};

!function (t) {
    t.setDialog = function (t) {
        var e = new n("Lack of Power", 3, t);
        Laya.stage.addChild(e);
    }, t.setDialog1 = function (t) {
        var e = new n("Get Power", 2, t);
        Laya.stage.addChild(e);
    }, t.setMoneyView = function (t, i) {
        var n = new e(t, i);
        Laya.stage.addChild(n);
    }, t.setUseLockView = function (t) {
        var e = new i(1, t);
        Laya.stage.addChild(e);
    };
    var e = function (t) {
        function e(e, i) {
            var n = t.call(this) || this;
            n.size(Main.width, Main.height), n.mouseEnabled = !0;
            var s = new Laya.Sprite();
            s.graphics.drawRect(0, 0, Main.width, 2 * Main.height, "#000000"), n.addChild(s),
                s.alpha = .8;
            var a = new Laya.Sprite();
            a.graphics.drawRect(0, 0, Main.width, 460, "#FEDA82"), a.size(Main.width, 460),
                a.y = 600, n.addChild(a);
            var r = drawText("免费钥匙", "#DD5409", 45);
            a.addChild(r), r.x = 15, r.y = 20, r.stroke = 2, r.strokeColor = "#DD5409";
            var o = drawText("恭喜获得免费的钥匙", "#61605E", 30);
            a.addChild(o), o.pivotY = o.height, o.x = r.x + r.width, o.y = 20 + r.height;
            var h = new LImageButtView(Main.width - 100, 20, "zs/index-close.png");
            a.addChild(h), h.on(Laya.Event.CLICK, n, function () {
                i && i.runWith(!1), this.exit();
            });
            var l = new Laya.Image("icon/key.png");
            a.addChild(l), l.pivotX = l.width / 2, l.pivotY = l.height / 2, l.x = Main.halfWidth,
                l.y = a.height / 2;
            var c = drawText("钥匙x" + e, "#000000", 40);
            a.addChild(c), c.pivotX = c.width / 2, c.x = l.x + 20, c.y = l.y + 80;
            var u = draw.fillRoundRect(0, 0, 220, 40, "#F3457A", 40, 40);
            a.addChild(u), u.pivotX = u.width / 2, u.x = a.width / 2, u.y = a.height - u.height - 20;
            var d = new Laya.Image(wxad.isOpenLock ? "icon/vedio.png" : "icon/fx.png");
            u.addChild(d), d.x = 40, d.pivotY = d.height / 2, d.y = u.height / 2;
            var _ = drawText("领取", "#ffffff", 40);
            u.addChild(_), _.pivotY = _.height / 2, _.x = d.x + d.width + 10, _.y = d.y;
            var f = new Laya.GlowFilter("#AB2A52", 0, 0, 8);
            return u.filters = [f], u.on(Laya.Event.CLICK, n, function () {
                wxad.isOpenLock && wxad.showVideoAd(Laya.Handler.create(this, function (t) {
                    i && i.runWith(t), t && this.exit();
                }));
            }), wxad.showbannerAd(), n;
        }
        return __extends(e, t), e.prototype.exit = function () {
            this.destroy(), Laya.stage.removeChild(this), wxad.hideBannerAd();
        }, e;
    }(Laya.Sprite), i = function (t) {
        function e(e, i) {
            var n = t.call(this) || this;
            n.size(Main.width, Main.height), n.mouseEnabled = !0;
            var s = new Laya.Sprite();
            s.graphics.drawRect(0, 0, Main.width, 2 * Main.height, "#000000"), n.addChild(s),
                s.alpha = .8;
            var a = new Laya.Sprite();
            a.graphics.drawRect(0, 0, Main.width, 460, "#FEDA82"), a.size(Main.width, 460),
                a.y = 600, n.addChild(a);
            var r = drawText("获取答案", "#DD5409", 45);
            a.addChild(r), r.x = 15, r.y = 20, r.stroke = 2, r.strokeColor = "#DD5409";
            var o = drawText("消耗1把钥匙", "#61605E", 30);
            a.addChild(o), o.pivotY = o.height, o.x = r.x + r.width, o.y = 20 + r.height;
            var h = new LImageButtView(Main.width - 100, 20, "icon/index-close.png");
            a.addChild(h), h.on(Laya.Event.CLICK, n, function () {
                i && i.runWith(!1), this.exit();
            });
            var l = drawText("" + data.ZW_DATA_LIST[data.curLevel - 1].name, "#000000", 40);
            a.addChild(l), l.pivotX = l.width / 2, l.x = a.width / 2, l.y = a.height / 2;
            var c = draw.fillRoundRect(0, 0, 220, 40, "#F3457A", 40, 40);
            a.addChild(c), c.pivotX = c.width / 2, c.x = a.width / 2, c.y = a.height - c.height - 20;
            var u = drawText("好的", "#ffffff", 40);
            c.addChild(u), u.pivotY = u.height / 2, u.pivotX = u.width / 2, u.x = c.width / 2,
                u.y = c.height / 2;
            var d = new Laya.GlowFilter("#AB2A52", 0, 0, 8);
            return c.filters = [d], c.on(Laya.Event.CLICK, n, function () {
                i && i.run(), this.exit();
            }), wxad.showbannerAd(), n;
        }
        return __extends(e, t), e.prototype.exit = function () {
            this.destroy(), Laya.stage.removeChild(this), wxad.hideBannerAd();
        }, e;
    }(Laya.Sprite), n = function (t) {
        function e(e, i, n) {
            var s = t.call(this) || this;

            s.size(Laya.stage.width, Laya.stage.height),
                s.mouseEnabled = !0;
            var a = new Laya.Sprite();
            a.graphics.drawRect(0, 0, Main.width, 2 * Main.height, "#000000"),
                s.addChild(a),
                a.alpha = .8;
            var r = Main.width - 100,
                o = new Laya.Sprite();
            (o = draw.fillRoundRect(0, 0, r + 10, 470, "#ffffff", 30, 30)).size(Main.width, 460),
                o.y = Main.halfHeight + Main.autoInitTopHeight,
                o.x = Main.halfWidth + 30,
                o.pivotY = o.height / 2,
                o.pivotX = o.width / 2;
            var h = draw.fillRoundRect(5, 5, r, 460, "#5A2AD4", 30, 30);
            o.addChild(h),
                s.addChild(o);
            var l = drawText(e, "#ffffff", 45);
            o.addChild(l),
                l.x = 15,
                l.y = 20;
            var c = drawText("Get Free Power", "#ffffff", 40);
            s.addChild(c),
                //c.pivotY = c.height, 
                c.centerX = 0;
            //c.x = Main.halfWidth - 30, 
            c.centerY = -150;
            var u = new LImageButtView(o.width - 130, 20, "icon/index-close.png");
            o.addChild(u),
                u.on(Laya.Event.CLICK, s, function () {
                    n && n.runWith(!1),
                        this.exit();
                }),
                u.visible = !1,
                s.timer.once(3e3, s, function () {
                    u.visible = !0; s
                });
            var d = new Laya.Image("icon/tl.png");
            s.addChild(d),
                d.centerX = 0;
            d.centerY = -30;

            var _ = drawText("Power x" + i, "#ffffff", 40);
            s.addChild(_),
                _.centerX = 0,
                _.centerY = 50;
            var f = draw.fillRoundRect(0, 0, 220, 40, "#F3457A", 40, 40);
            s.addChild(f),
                //f.pivotX = f.width / 2, 
                f.centerX = 0,
                f.centerY = 150;
            var p = new Laya.Image(wxad.isOpenLock ? "icon/vedio.png" : "icon/fx.png");
            f.addChild(p),
                p.x = 40,
                p.pivotY = p.height / 2,
                p.y = f.height / 2;
            var g = drawText("Get", "#ffffff", 40);
            f.addChild(g),
                g.pivotY = g.height / 2,
                g.x = p.x + p.width + 30,
                g.y = p.y;
            var v = new Laya.GlowFilter("#AB2A52", 0, 0, 8);
            return f.filters = [v],
                f.on(Laya.Event.CLICK, s, function () {
                    // wxad.showVideoAd(Laya.Handler.create(this, function(t) {
                    //     n && n.runWith(t), 
                    //     wxald.onRunning(data.curLevel, "视频得体力"), 
                    //     t && this.exit();
                    // }));
                    if (platform.getInstance().initialized_) {
                        platform.getInstance().showReward(() => {
                            //n && n.runWith(t), 
                            //wxald.onRunning(data.curLevel, "视频得体力"), 
                            n && n.runWith(!0),
                                //data.tlcount+=i;
                                //data.save();
                                this.exit();
                        })
                    }
                }),
                wxad.showbannerAd(),
                s;
        }
        return __extends(e, t),
            e.prototype.exit = function () {
                this.destroy(),
                    Laya.stage.removeChild(this),
                    wxad.hideBannerAd();
            },
            e;
    }(Laya.Sprite);
}(dialog || (dialog = {}));

var dialoginfo, __extends = this && this.__extends || function (t, e) {
    function i() {
        this.constructor = t;
    }
    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n]);
    t.prototype = null === e ? Object.create(e) : (i.prototype = e.prototype, new i());
}, AbstractLevel = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.isOver = !1, e.isLockCaozuo = !1, e.answerlist = [], e.bg = new Laya.Sprite(),
            e.addChild(e.bg), e.progressbar = new Laya.Sprite(), e.bg.addChild(e.progressbar),
            e;
    }
    return __extends(e, t), e.prototype.init = function (t) {
        this.btn1 = new ItemBtton(), this.btn2 = new ItemBtton(), t.addChild(this.btn1),
            t.addChild(this.btn2), this.roleGirl = new GirlRole(), this.roleGirl.initRoleImage(),
            t.addChild(this.roleGirl);
        var e = new Laya.Image("icon/wen.png");
        this.wenhaoicon = e, e.visible = !1, t.addChild(e);
    }, e.prototype.onCurRain = function (t) {
        var e = new Laya.Sprite();
        this.bg.addChild(e), e.zOrder = 999, e.graphics.drawLine(0, 0, 0, 3 + Math.floor(30 * Math.random()), "#ffffff", 3),
            e.x = Math.floor(Math.random() * Main.width), Laya.Tween.to(e, {
                y: t.y + t.height - 20
            }, 1e3, null, Laya.Handler.create(this, function () {
                e.destroy(), this.bg.removeChild(e);
            }));
    }, e.prototype.drawProgressbar = function (t, e, i) {
        this.progressbar.x = (Main.width - 110 * t) / 2, this.progressbar.y = 180, this.progressbar.graphics.clear(),
            this.progressbar.zOrder = 10;
        for (var n = 0; n < t; n++) n <= e
            ?
            i || n != e
                ?
                this.progressbar.graphics.drawRect(0 + 110 * n, 0, 100, 30, "#2ec206", "#333332", 2)
                :
                this.progressbar.graphics.drawRect(0 + 110 * n, 0, 100, 30, "#ff0000", "#333332", 2)
            :
            this.progressbar.graphics.drawRect(0 + 110 * n, 0, 100, 30, "#a9aba9", "#333332", 2);
    }, e.prototype.addGameOverView = function (t) {
        leveltool.setWaitNext(1e3, Laya.Handler.create(this, function () {
            z6game.gmae && z6game.gmae.hideTapView(!1);
            var e = new z6game.EndFuhuoView();
            Laya.stage.addChild(e), e.exitfinishHandler = t;
        }));
    }, e.prototype.setWinView = function () {
        var t = new OKEndView();
        Laya.stage.addChild(t),
            t.endfinishHandler = Laya.Handler.create(this, function () {
                if (this.handler) {
                    this.handler && this.handler.runWith(200);
                } else {
                    var e = z6game.win;
                    Laya.stage.addChild(e);
                }
            });
    }, e.prototype.initAnswer = function (t) { }, e.prototype.getIsOver = function () {
        return this.isOver;
    }, e.prototype.setHandlerFinish = function (t) {
        this.handler = t;
    }, e.prototype.setAnswerHandler = function (t) {
        this.answerHandler = t;
    }, e.prototype.setLockAnswer = function () {
        return !1;
    }, e.prototype.setUnLockAnswer = function () { }, e.prototype.setUnLockAnswer1 = function (t) { },
        e;
}(Laya.Sprite), __extends = this && this.__extends || function (t, e) {
    function i() {
        this.constructor = t;
    }
    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n]);
    t.prototype = null === e ? Object.create(e) : (i.prototype = e.prototype, new i());
};

!function (t) {
    t.setTiliView = function () {
        var t = new e({
            info1: "Get ",
            info2: " Power x2",
            skin: "icon/tl.png"
        }, 2, "icon/tl.png");
        Laya.stage.addChild(t);
    }, t.setFangdjResultView = function (t, i) {
        var n = new e({
            info1: "获得",
            info2: "放大镜  x" + t,
            skin: "icon/ff.png"
        }, t, "icon/ff.png");
        Laya.stage.addChild(n), n.setHandlerFinish(i);
    };
    var e = function (t) {
        function e(e, i, n) {
            var s = t.call(this, e) || this, a = s.getBtn("#47A906", 0, 0, "双倍领取   ");
            s.bk.addChild(a), a.pivotX = a.width / 2, a.x = s.bkWidth / 2, a.y = s.bkHeight - 140;
            var r = new Laya.Image("icon/vedio.png");
            a.addChild(r), r.pivotY = r.height / 2, r.x = 30, r.y = a.height / 2, wxad.isOpenLock || (r.skin = "icon/fx.png",
                r.pivotY = r.height / 2);
            var o = new Laya.Image(n);
            a.addChild(o), o.x = a.width - 130, o.y = a.height / 2, o.pivotY = o.height / 2;
            var h = drawText("x" + 2 * i, "#ffffff", 40);
            return o.addChild(h), h.x = o.width, h.y = o.height, h.pivotY = h.height, a.on(Laya.Event.CLICK, s, function () {
                wxad.isOpenLock && wxad.showVideoAd(Laya.Handler.create(this, function (t) {
                    t && (this.dialogHandler && this.dialogHandler.runWith(2 * i), this.exit());
                }));
            }), s;
        }
        return __extends(e, t), e.prototype.getBtn = function (t, e, i, n) {
            var s = draw.fillRoundRect(e, i, 370, 120, "#ffffff", 20, 20), a = draw.fillRoundRect(5, 5, 360, 100, t, 20, 20);
            s.addChild(a);
            var r = new Laya.GlowFilter("#553728", 0, 0, 10);
            a.filters = [r];
            var o = drawText(n, "#ffffff", 40);
            return a.addChild(o), o.pivotX = o.width / 2, o.pivotY = o.height / 2, o.y = a.height / 2,
                o.x = a.width / 2, s;
        }, e;
    }(function (t) {
        function e(e) {
            var i = t.call(this) || this;
            i.bkHeight = 0, i.bkWidth = 0, i.size(Main.width, 2 * Main.height), i.mouseEnabled = !0;
            var n = new Laya.Sprite();
            n.graphics.drawRect(0, 0, Main.width, 2 * Main.height, "#000000"), i.addChild(n),
                n.alpha = .7;
            i.bkWidth = 500, i.bkHeight = 400;
            var s = draw.fillRoundRect(0, 0, 510, 410, "#ffffff", 30, 30);
            i.addChild(s);
            var a = draw.fillRoundRect(5, 5, 500, 400, "#08A3F7", 30, 30);
            s.addChild(a), s.x = (Main.width - 515) / 2, s.y = (Main.height - 400) / 2 + Main.autoInitTopHeight,
                i.bk = a;
            var r = new LImageButtView(0, 0, "icon/index-close.png");
            s.addChild(r), r.pivotX = r.width / 2, r.x = s.width - 50, r.y = 20, r.onPos(r.x, r.y),
                r.on(Laya.Event.CLICK, i, function () {
                    this.dialogHandler && this.dialogHandler.runWith(0), this.exit();
                });
            var o = new Laya.Sprite();
            a.addChild(o), o.x = a.width / 2, o.y = 150;
            var h = "", l = 0;
            if (e instanceof Object) {
                var c = e, u = c.info1, d = c.skin;
                h = c.info2;
                var _ = drawText(u, "#ffffff", 30);
                o.addChild(_), o.width += _.width, _.pivotY = _.height / 2, l += _.width;
                var f = new Laya.Image(d);
                o.addChild(f), f.pivotY = f.height / 2, f.x = l, l += f.width, o.width += f.width;
            } else h = e;
            var p = drawText(h, "#ffffff", 30);
            return o.addChild(p), o.width += p.width, p.x = l, p.pivotY = p.height / 2, o.pivotX = o.width / 2,
                o.x = a.width / 2, i;
        }
        return __extends(e, t), e.prototype.exit = function () {
            this.destroy(), Laya.stage.removeChild(this);
        }, e.prototype.setHandlerFinish = function (t) {
            this.dialogHandler = t;
        }, e;
    }(Laya.Sprite));
}(dialoginfo || (dialoginfo = {}));

var leveltool, __extends = this && this.__extends || function (t, e) {
    function i() {
        this.constructor = t;
    }
    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n]);
    t.prototype = null === e ? Object.create(e) : (i.prototype = e.prototype, new i());
};

!function (t) {
    t.setWaitNext = function (t, e) {
        var i = new Laya.Sprite();
        i.size(Main.width, 2 * Main.height), Laya.stage.addChild(i), Laya.stage.timer.once(t, this, function () {
            i.destroy(), Laya.stage.removeChild(i), e && e.run();
        });
    }, t.addPonit = function (t, e, n) {
        var s = new i(n);
        n.addChild(s), s.pos(t, e), wxapi.vibrateShort();
    }, t.addPonitMin = function (t, e, i) {
        var s = new n(i);
        i.addChild(s), s.pos(t, e), wxapi.vibrateShort();
    }, t.addFireworks = function (t) {
        var i = new e(t);
        return t.addChild(i), i;
    }, t.setWorks = function (t) {
        if (t instanceof Laya.Image) {
            var e = new Laya.ColorFilter([1, 1, 1, 0, 0, 1, 1, 1, 0, 0, 1, 1, 1, 0, 0, 0, 0, 0, 1, 0]), i = new Laya.Image(t.skin);
            i.filters = [e], i.alpha = .4, t.addChild(i), t.timer.once(400, this, function (e) {
                t.filters = null, e.destroy(), t.removeChild(e);
            }, [i]);
        }
    };
    var e = function (t) {
        function e(e) {
            var i = t.call(this) || this;
            i.caller = e;
            var n = 5;
            return i.launched(), i.timerLoop(1e3, i, function () {
                this.launched(), n > 0 ? n -= 1 : (this.timer.clearAll(this), this.timer.once(5e3, this, function () {
                    this.exit();
                }));
            }), i;
        }
        return __extends(e, t), e.prototype.launched = function () {
            var t = new s(this);
            this.addChild(t);
        }, e.prototype.exit = function () {
            this.timer.clearAll(this), this.destroy(), this.caller.removeChild(this);
        }, e;
    }(Laya.Sprite), i = function (t) {
        function e(e) {
            var i = t.call(this) || this;
            i.caller = e;
            var n = 20, s = .1;
            return i.timerLoop(100, i, function () {
                for (var t = 0; t < 10; t++) {
                    var e = Math.floor(360 * Math.random()) * Math.PI / 180, i = n + Math.floor(30 * Math.random()), a = Math.sin(e) * i, r = Math.cos(e) * i;
                    this.drawStar(r, a, .5 * Math.random());
                }
                n < 140 ? (n += 20, s < .4 && (s += .1)) : this.exit();
            }), i;
        }
        return __extends(e, t), e.prototype.drawStar = function (t, e, i) {
            var n = new Laya.Image("icon/star.png");
            this.addChild(n), n.scale(i, i), n.pos(t, e);
            var s = Math.floor(70 * Math.random());
            Laya.Tween.to(n, {
                alpha: 0
            }, 10 + s, Laya.Ease.bounceOut, Laya.Handler.create(this, function () {
                n.destroy();
            }));
        }, e.prototype.exit = function () {
            this.timer.clearAll(this), this.destroy(), this.caller.removeChild(this);
        }, e;
    }(Laya.Sprite), n = function (t) {
        function e(e) {
            var i = t.call(this) || this;
            i.caller = e;
            var n = 10, s = .1;
            return i.timerLoop(80, i, function () {
                for (var t = 0; t < 20; t++) {
                    var e = Math.floor(360 * Math.random()) * Math.PI / 180, i = n + Math.floor(30 * Math.random()), a = Math.sin(e) * i, r = Math.cos(e) * i;
                    this.drawStar(r, a, .2 * Math.random());
                }
                n < 40 ? (n += 5, s < .4 && (s += .1)) : this.exit();
            }), i;
        }
        return __extends(e, t), e.prototype.drawStar = function (t, e, i) {
            var n = new Laya.Image("icon/star.png");
            this.addChild(n), n.scale(i, i), n.pos(t, e);
            var s = Math.floor(70 * Math.random());
            Laya.Tween.to(n, {
                alpha: 0
            }, 10 + s, Laya.Ease.bounceOut, Laya.Handler.create(this, function () {
                n.destroy();
            }));
        }, e.prototype.exit = function () {
            this.timer.clearAll(this), this.destroy(), this.caller.removeChild(this);
        }, e;
    }(Laya.Sprite), s = function (t) {
        function e(e) {
            var i = t.call(this) || this;
            i.caller = e;
            for (var n = Main.halfWidth + getRandomNum(0, 200) * (Math.random() > .5 ? 1 : -1), s = Main.halfWidth + getRandomNum(0, 200) * (Math.random() > .5 ? 1 : -1), a = 0; a < 50; a++) i.drawStarfashe(n, s, n, s);
            return i;
        }
        return __extends(e, t), e.prototype.drawStar = function (t, e, i) {
            var n = new Laya.Sprite();
            this.addChild(n), n.scale(i, i), n.pos(t, e);
            var s = 10 + Math.floor(80 * Math.random()), a = 10 + Math.floor(50 * Math.random());
            n.graphics.drawRect(0, 0, s, a, this.randomColor());
            var r = Math.floor(70 * Math.random());
            n.rotation = Math.floor(360 * Math.random()), Laya.Tween.to(n, {
                alpha: 0
            }, 30 + r, Laya.Ease.bounceOut, Laya.Handler.create(this, function () {
                n.destroy();
            }));
        }, e.prototype.drawStarfashe = function (t, e, i, n) {
            var s = new a();
            this.addChild(s), s.pos(t, e);
            var r = 5 + Math.floor(20 * Math.random()), o = 5 + Math.floor(15 * Math.random());
            s.graphics.drawPoly(0, 0, [0, -20, 3, 0, 6, -20], null, this.randomColor(), 8);
            Math.floor(300 * Math.random());
            s.rotation = Math.floor(360 * Math.random()), s.scale(.1, .1);
            var h = Main.height + Main.halfHeight;
            Laya.Tween.to(s, {
                x: i,
                y: n,
                scaleX: 1,
                scaleY: 1
            }, 10, null, Laya.Handler.create(this, function (t) {
                t.graphics.clear(), t.graphics.drawRect(0, 0, r, o, this.randomColor());
                var e = this.getxy();
                Laya.Tween.to(t, {
                    x: t.x + e.x,
                    y: e.y + t.y
                }, 100, null, Laya.Handler.create(this, function (t) {
                    var e = 5e3 / h * (h - t.y);
                    t.start(), Laya.Tween.to(t, {
                        y: h
                    }, e, null, Laya.Handler.create(this, function (t) {
                        t.exit();
                    }, [t]));
                }, [t]));
            }, [s]));
        }, e.prototype.getxy = function () {
            var t = Math.floor(360 * Math.random()) * Math.PI / 180, e = Math.floor(Math.random() * Main.halfWidth), i = Math.sin(t) * e;
            return {
                x: Math.cos(t) * e,
                y: i
            };
        }, e.prototype.randomColor = function () {
            var t = "rgb(" + this.random(100, 255) + "," + this.random(10, 255) + "," + this.random(10, 255) + ")";
            return t = colorRGBtoHex(t);
        }, e.prototype.random = function (t, e) {
            return Math.round(Math.random() * (t - e) + e);
        }, e.prototype.exit = function () {
            this.timer.clearAll(this), this.destroy(), this.caller.removeChild(this);
        }, e;
    }(Laya.Sprite), a = function (t) {
        function e() {
            var e = t.call(this) || this;
            return e.isStart = !1, e.isStart = !1, e;
        }
        return __extends(e, t), e.prototype.start = function () {
            this.isStart || (this.isStart = !0, this.timerLoop(100, this, function () {
                this.skewX < 360 ? this.skewX += 60 : this.skewX = 0;
            }));
        }, e.prototype.exit = function () {
            this.timer.clearAll(this), this.destroy();
        }, e;
    }(Laya.Sprite);
}(leveltool || (leveltool = {}));

var tell, __extends = this && this.__extends || function (t, e) {
    function i() {
        this.constructor = t;
    }
    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n]);
    t.prototype = null === e ? Object.create(e) : (i.prototype = e.prototype, new i());
}, LevelView1 = function (t) {
    function e() {
        var e = t.call(this) || this;
        e.graphics.drawRect(0, 0, Main.width, 2 * Main.height, "#3a1721");
        var i = new Laya.Image("res/bg1.png");
        e.addChild(i), i.y = (Main.height - i.height) / 2, 
		e.graphics.drawRect(0, 0, Main.width, Main.halfHeight, "#29426c"), 
        e.graphics.drawRect(0, i.y - 150, Main.width, 150, "#3f4c63"), 
		e.graphics.drawRect(0, Main.halfHeight, Main.width, 2 * Main.height, "#3a1721");
        var n = new Laya.Sprite();
        n.graphics.drawPie(375, 118, 280, 45, 135, "#b5a460"), 
		i.addChild(n), n.alpha = .3;
        var s = new Laya.BlurFilter();
        s.strength = 15;
        var a = new Laya.GlowFilter("#ffff00", 20, 0, 0);
        n.filters = [ s, a ];
        var r = !0;
        return e.timerLoop(30, e, function() {
            r ? n.alpha < .5 ? n.alpha += .013 : r = !1 : n.alpha > .1 ? n.alpha -= .013 : r = !0;
        }), e.init(i), e.roleGirl.x = 140, e.roleGirl.y = 460, e.roleGirl.loadFinishHandler = Laya.Handler.create(e, function () {
            //this.roleGirl.setAttactAni1("1");
            e.roleGirl.setPause();
        }),e.btn1.initAddIcon("icon/1.png"), 
        e.btn2.initAddIcon("icon/2.png"), e.btn1.x = Main.halfWidth - (e.btn1.width + 50), 
        e.btn1.y = i.height + 50, e.btn2.x = Main.halfWidth + 50, e.btn2.y = e.btn1.y, e.btn1.once(Laya.Event.CLICK, e, function() {
            this.btn1.isLock || this.setOK(i);
        }), e.btn2.once(Laya.Event.CLICK, e, function() {
            this.btn2.isLock || this.setFal(i);
        }), e.btn2.visible = !1, e.btn1.visible = !1, e.btn1.scale(0, 0), e.btn2.scale(0, 0), 
        tell.setTalkInfoView([ "Help", "Come on!" ], e.roleGirl.x, 10, i), tell.finishHandler = Laya.Handler.create(e, function() {
            this.btn2.visible = !0, this.btn1.visible = !0, this.wenhaoicon.visible = !0, this.wenhaoicon.pos(this.roleGirl.x - 20, this.roleGirl.y - 370), 
            Laya.Tween.to(this.btn1, {
                scaleX: 1,
                scaleY: 1
            }, 300, null, Laya.Handler.create(this, function() {})), Laya.Tween.to(this.btn2, {
                scaleX: 1,
                scaleY: 1
            }, 300, null, Laya.Handler.create(this, function() {}));
        }), e;
    }
    return __extends(e, t),
        e.prototype.setFal = function (t) {
            this.wenhaoicon.visible = !1;
            var e = new Laya.Image("icon/2.png");
            t.addChild(e), e.x = this.roleGirl.x - 200, e.y = this.roleGirl.y + 100, e.pivotY = e.height,
                this.btn1.setLock(), this.btn2.setLock(), Laya.Tween.to(e, {
                    x: this.roleGirl.x + 50,
                    y: this.roleGirl.y
                }, 300, null, Laya.Handler.create(this, function () {
                    e.visible = !1, e.destroy(), t.removeChild(e);
                    var i = new Laya.ColorFilter([0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 1, 0]);
                    this.roleGirl.filters = [i], this.btn2.setResult(!1), this.roleGirl.setPause(),
                        this.timer.once(1e3, this, function () {
                            this.btn2.visible = !1, this.btn1.visible = !1, this.gameover();
                        });
                }));
        }, e.prototype.setOK = function (t) {
            this.wenhaoicon.visible = !1;
            var e = new Laya.Image("icon/1.png");
            t.addChild(e), e.x = this.roleGirl.x, e.y = this.roleGirl.y - 100, this.btn1.setLock(),
                this.btn2.setLock(), Laya.Tween.to(e, {
                    x: this.roleGirl.x + 100,
                    y: this.roleGirl.y - 200
                }, 300, null, Laya.Handler.create(this, function () {
                    e.visible = !1, e.destroy(), t.removeChild(e), this.roleGirl.setAttactAni1("2"),
                        this.btn1.setResult(!0), Laya.Tween.to(this.roleGirl, {
                            x: this.roleGirl.x + 370
                        }, 3e3, null, Laya.Handler.create(this, function () {
                            this.roleGirl.setPause(), this.timer.clearAll(this), this.btn2.visible = !1, this.btn1.visible = !1,
                                this.setWinView();
                        }));
                }));
        }, e.prototype.gameover = function () {
            this.addGameOverView(Laya.Handler.create(this, function (t) {
                if (t) {
                    this.bg.destroy();
                    var i = new e();
                    this.addChild(i);
                }
            }));
        }, e;
}(AbstractLevel), __extends = this && this.__extends || function (t, e) {
    function i() {
        this.constructor = t;
    }
    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n]);
    t.prototype = null === e ? Object.create(e) : (i.prototype = e.prototype, new i());
}, LevelView10 = function (t) {
    function e() {
        var e = t.call(this) || this;
        e.bg.graphics.drawRect(0, 0, Main.width, 2 * Main.height, "#142035");
        var i = new Laya.Image("res/bg16.png");
        return e.bg.addChild(i), i.y = (Main.height - i.height) / 2, e.bg.graphics.drawRect(0, Main.halfHeight, Main.width, 2 * Main.height, "#313745"),
            e.bg.graphics.drawCircle(466, i.y, 102, "#314c41"), e.bk = i, e.init(i), e.roleGirl.x = -50,
            e.roleGirl.y = 460, e.roleGirl.zOrder = 999, e.roleGirl.loadFinishHandler = Laya.Handler.create(e, function () {
                this.roleGirl.setAttactAni1("2"), Laya.Tween.to(this.roleGirl, {
                    x: Main.width + 60
                }, 2500, null, Laya.Handler.create(this, function () {
                    this.timer.clearAll(this), this.roleGirl.visible = !1, this.nextLevel();
                }));
            }), e.btn2.visible = !1, e.btn1.visible = !1, e;
    }
    return __extends(e, t), e.prototype.nextLevel = function () {
        var t = new LevelView10_1();
        this.addChild(t), t.x = Main.width, t.handler = this.handler, Laya.Tween.to(t, {
            x: 0
        }, 500, null, Laya.Handler.create(this, function () { })), Laya.Tween.to(this.bg, {
            x: -Main.width
        }, 500, null, Laya.Handler.create(this, function () {
            this.timer.clearAll(this);
        }));
    }, e;
}(AbstractLevel), LevelView10_1 = function (t) {
    function e() {
        var e = t.call(this) || this;
        e.bg.graphics.drawRect(0, 0, Main.width, 2 * Main.height, "#142035");
        var i = new Laya.Image("res/bg16.png");
        e.bg.addChild(i), i.y = (Main.height - i.height) / 2, e.bg.graphics.drawRect(0, Main.halfHeight, Main.width, 2 * Main.height, "#313745"),
            e.bg.graphics.drawCircle(466, i.y, 102, "#314c41"), e.init(i), e.roleGirl.x = -50,
            e.roleGirl.y = 460;
        var n = new ZombieMonster();
        return i.addChild(n), e.wolf = n, n.zOrder = 99, n.initRoleImage(), n.x = Main.width,
            n.y = e.roleGirl.y, n.loadFinishHandler = Laya.Handler.create(e, function () {
                n.setAttactAni1("1"), Laya.Tween.to(n, {
                    x: Main.width - 150
                }, 2e3, null, Laya.Handler.create(this, function () {
                    n.setAttactAni1("2");
                }));
            }), e.btn1.initAddIcon("icon/29.png"), e.btn2.initAddIcon("icon/33.png"), e.btn1.x = Main.halfWidth - (e.btn1.width + 50),
            e.btn1.y = i.height + 50, e.btn2.x = Main.halfWidth + 50, e.btn2.y = e.btn1.y, e.btn1.once(Laya.Event.CLICK, e, function () {
                this.btn1.isLock || this.setFal(i);
            }), e.btn2.once(Laya.Event.CLICK, e, function () {
                this.btn2.isLock || this.setOK(i);
            }),
        e.drawProgressbar(2, -1, !1), e.btn2.visible = !1, e.btn1.visible = !1, e.btn1.scale(0, 0),
            e.btn2.scale(0, 0), e.roleGirl.loadFinishHandler = Laya.Handler.create(e, function () {
                this.roleGirl.setAttactAni1("2"), Laya.Tween.to(this.roleGirl, {
                    x: 220
                }, 1e3, null, Laya.Handler.create(this, function () {
                    this.roleGirl.setAttactAni1("9"), tell.setTalkInfoView(["Zombies are here", "Old Iron Save Me!"], this.roleGirl.x, 10, i),
                        tell.finishHandler = Laya.Handler.create(this, function () {
                            this.btn2.visible = !0, this.btn1.visible = !0, this.wenhaoicon.visible = !0, this.wenhaoicon.pos(this.roleGirl.x - 20, this.roleGirl.y - 370),
                                Laya.Tween.to(this.btn1, {
                                    scaleX: 1,
                                    scaleY: 1
                                }, 300, null, Laya.Handler.create(this, function () { })), Laya.Tween.to(this.btn2, {
                                    scaleX: 1,
                                    scaleY: 1
                                }, 300, null, Laya.Handler.create(this, function () { }));
                        });
                }));
            }), e;
    }
    return __extends(e, t), e.prototype.setFal = function (t) {
        this.drawProgressbar(2, 0, !1), this.wenhaoicon.visible = !1;
        var e = new Laya.Image("icon/29.png");
        t.addChild(e), e.x = Main.halfWidth + 50, e.y = this.wolf.y, e.pivotY = e.height / 2,
            e.pivotX = e.width / 2, e.scale(0, 0), this.btn1.setLock(), this.btn2.setLock(),
            Laya.Tween.to(e, {
                scaleX: 1.5,
                scaleY: 1.5
            }, 500, null, Laya.Handler.create(this, function () {
                this.timer.once(300, this, function () {
                    Laya.Tween.to(e, {
                        scaleX: .5,
                        scaleY: .5
                    }, 500, null, Laya.Handler.create(this, function () {
                        this.btn1.setResult(!1), this.timer.once(300, this, function () {
                            this.roleGirl.setAttactAni1("16_2"), this.roleGirl.scaleX = -1, this.wolf.setAttactAni1("1"),
                                Laya.Tween.to(this.wolf, {
                                    x: this.wolf.x - 700
                                }, 1500, null, null), Laya.Tween.to(this.roleGirl, {
                                    x: this.roleGirl.x - 460
                                }, 1e3, null, Laya.Handler.create(this, function () {
                                    this.roleGirl.visible = !1, this.btn2.visible = !1, this.btn1.visible = !1, this.gameover();
                                }));
                        });
                    }));
                });
            }));
    }, e.prototype.setOK = function (t) {
        this.drawProgressbar(2, 0, !0), this.wenhaoicon.visible = !1, this.btn1.setLock(),
            this.btn2.setLock();
        var e = new Laya.Image("icon/33.png");
        e.pivotY = e.height / 2, e.pivotX = e.width / 2, e.x = Main.width + 100, e.y = 300,
            t.addChild(e), e.scale(4, 4), e.alpha = 0, Laya.Tween.to(e, {
                alpha: 1,
                x: Main.width - 300,
                y: 100
            }, 500, null, Laya.Handler.create(this, function () {
                this.timer.once(200, this, function () {
                    this.btn2.setResult(!0), this.wolf.scaleX = -1, this.wolf.setAttactAni1("1"), Laya.Tween.to(this.wolf, {
                        alpha: 1,
                        x: Main.width + 90
                    }, 500, null, Laya.Handler.create(this, function () {
                        this.wolf.setPause(), this.roleGirl.setAttactAni1("2"), this.timer.once(100, this, function () {
                            this.btn2.visible = !1, this.btn1.visible = !1, this.roleGirl.zOrder = 999, Laya.Tween.to(this.roleGirl, {
                                x: Main.width + 60
                            }, 1e3, null, Laya.Handler.create(this, function () {
                                this.roleGirl.visible = !1, this.nextLevel();
                            }));
                        });
                    }));
                });
            }));
    }, e.prototype.gameover = function () {
        this.addGameOverView(Laya.Handler.create(this, function (t) {
            if (t) {
                this.bg.destroy();
                var i = new e();
                this.addChild(i);
            }
        }));
    }, e.prototype.nextLevel = function () {
        var t = new LevelView10_2();
        this.addChild(t), t.x = Main.width, t.handler = this.handler, Laya.Tween.to(t, {
            x: 0
        }, 500, null, Laya.Handler.create(this, function () { })), Laya.Tween.to(this.bg, {
            x: -Main.width
        }, 500, null, Laya.Handler.create(this, function () { }));
    }, e;
}(AbstractLevel), LevelView10_2 = function (t) {
    function e() {
        var e = t.call(this) || this;
        e.bg.graphics.drawRect(0, 0, Main.width, 2 * Main.height, "#142035");
        var i = new Laya.Image("res/bg16.png");
        e.bg.addChild(i), i.y = (Main.height - i.height) / 2, e.bg.graphics.drawRect(0, Main.halfHeight, Main.width, 2 * Main.height, "#313745"),
            e.bg.graphics.drawCircle(466, i.y, 102, "#314c41");
        var n = new Laya.Image("bg/wolf.png");
        return i.addChild(n), n.pivotX = n.width / 2, n.pivotY = n.height / 2, n.scaleX = -1,
            n.rotation = -30, n.x = Main.width, n.y = 380, e.wolf = n, e.init(i), e.roleGirl.x = -50,
            e.roleGirl.y = 460,
            e.drawProgressbar(2, 0, !0), e.btn1.initAddIcon("icon/666.png"),
            e.btn2.initAddIcon("icon/11.png"), e.btn1.x = Main.halfWidth - (e.btn1.width + 50),
            e.btn1.y = i.height + 50, e.btn2.x = Main.halfWidth + 50, e.btn2.y = e.btn1.y, e.btn1.once(Laya.Event.CLICK, e, function () {
                this.btn1.isLock || this.setOK(i);
            }), e.btn2.once(Laya.Event.CLICK, e, function () {
                this.btn2.isLock || this.setFal(i);
            }), e.btn2.visible = !1, e.btn1.visible = !1, e.btn1.scale(0, 0), e.btn2.scale(0, 0),
            e.roleGirl.loadFinishHandler = Laya.Handler.create(e, function () {
                this.roleGirl.setAttactAni1("2"), Laya.Tween.to(this.roleGirl, {
                    x: 220
                }, 600, null, Laya.Handler.create(this, function () {
                    this.roleGirl.setAttactAni1("9"), tell.setTalkInfoView(["Wolf is here", "Old Iron Save Me!"], this.roleGirl.x, 10, i),
                        tell.finishHandler = Laya.Handler.create(this, function () {
                            this.btn2.visible = !0, this.btn1.visible = !0, this.wenhaoicon.visible = !0, this.wenhaoicon.pos(this.roleGirl.x - 20, this.roleGirl.y - 370),
                                Laya.Tween.to(this.btn1, {
                                    scaleX: 1,
                                    scaleY: 1
                                }, 300, null, Laya.Handler.create(this, function () { })), Laya.Tween.to(this.btn2, {
                                    scaleX: 1,
                                    scaleY: 1
                                }, 300, null, Laya.Handler.create(this, function () { }));
                        });
                }));
            }), e;
    }
    return __extends(e, t), e.prototype.setFal = function (t) {
        this.drawProgressbar(2, 1, !1), this.wenhaoicon.visible = !1;
        var e = new Laya.Image("icon/11.png");
        t.addChild(e), e.x = 0, e.y = this.wolf.y, e.pivotY = e.height / 2, e.pivotX = e.width / 2,
            e.scale(1.5, 1.5), this.btn1.setLock(), this.btn2.setLock(), Laya.Tween.to(e, {
                rotation: 360,
                x: this.wolf.x - 50,
                y: this.wolf.y
            }, 500, null, Laya.Handler.create(this, function () {
                this.btn2.setResult(!1), this.timer.once(300, this, function () {
                    e.x = e.x - 50, e.y = e.y + 100, this.roleGirl.setPause(), this.timer.once(1e3, this, function () {
                        e.visible = !1, this.btn2.visible = !1, this.btn1.visible = !1, this.gameover();
                    });
                });
            }));
    }, e.prototype.setOK = function (t) {
        this.drawProgressbar(2, 1, !0), this.wenhaoicon.visible = !1;
        var e = new Laya.Image("icon/666.png");
        t.addChild(e), e.x = 0, e.y = this.wolf.y, e.pivotY = e.height / 2, e.pivotX = e.width / 2,
            e.scale(1.5, 1.5), this.btn1.setLock(), this.btn2.setLock(), Laya.Tween.to(e, {
                rotation: 360,
                x: this.wolf.x - 50,
                y: this.wolf.y
            }, 500, null, Laya.Handler.create(this, function () {
                this.btn1.setResult(!0), this.timer.once(300, this, function () {
                    this.wolf.visible = !1, e.x = e.x - 50, e.y = e.y + 100, e.rotation = -120, this.roleGirl.setAttactAni1("2"),
                        Laya.Tween.to(this.roleGirl, {
                            x: Main.width + 70
                        }, 3e3, null, Laya.Handler.create(this, function () {
                            e.visible = !1, this.roleGirl.setPause(), this.timer.clearAll(this), this.btn2.visible = !1,
                                this.btn1.visible = !1, this.setWinView();
                        }));
                });
            }));
    }, e.prototype.gameover = function () {
        this.addGameOverView(Laya.Handler.create(this, function (t) {
            if (t) {
                this.bg.destroy();
                var i = new e();
                this.addChild(i);
            }
        }));
    }, e.prototype.nextLevel = function () {
        var t = new LevelView10_3();
        this.addChild(t), t.x = Main.width, t.handler = this.handler, Laya.Tween.to(t, {
            x: 0
        }, 500, null, Laya.Handler.create(this, function () { })), Laya.Tween.to(this.bg, {
            x: -Main.width
        }, 500, null, Laya.Handler.create(this, function () { }));
    }, e;
}(AbstractLevel), LevelView10_3 = function (t) {
    function e() {
        var e = t.call(this) || this;
        e.bg.graphics.drawRect(0, 0, Main.width, 2 * Main.height, "#36141e");
        var i = new Laya.Image("res/bg15.png");
        e.bg.addChild(i), i.y = (Main.height - i.height) / 2, i.width = i.width + 40, e.init(i);
        var n = new Laya.Image("bg/14_1.png");
        i.addChild(n), n.pivotY = n.height / 2, n.pivotX = n.width / 2, n.y = Main.halfHeight - 40,
            n.x = Main.width - 260, e.fly = n;
        var s = new ZombieMonster();
        return i.addChild(s), e.m = s, s.initRoleImage(), s.x = Main.width - 150, s.y = Main.halfHeight,
            s.loadFinishHandler = Laya.Handler.create(e, function () {
                s.setAttactAni1("2");
            }), e.roleGirl.x = 0, e.roleGirl.y = Main.halfHeight, e.roleGirl.zOrder = 999,
            e.drawProgressbar(3, 1, !0),
            e.btn1.initAddIcon("icon/35.png"), e.btn2.initAddIcon("icon/36.png"), e.btn1.x = Main.halfWidth - (e.btn1.width + 50),
            e.btn1.y = Main.halfHeight + 180, e.btn2.x = Main.halfWidth + 50, e.btn2.y = e.btn1.y,
            e.btn1.once(Laya.Event.CLICK, e, function () {
                this.btn1.isLock || this.setOK(i);
            }), e.btn2.once(Laya.Event.CLICK, e, function () {
                this.btn2.isLock || this.setFal(i);
            }), e.btn2.visible = !1, e.btn1.visible = !1, e.btn1.scale(0, 0), e.btn2.scale(0, 0),
            e.roleGirl.loadFinishHandler = Laya.Handler.create(e, function () {
                this.roleGirl.setAttactAni1("2"), Laya.Tween.to(this.roleGirl, {
                    x: 150
                }, 2500, null, Laya.Handler.create(this, function () {
                    this.roleGirl.setAttactAni1("9");
                    tell.setTalkInfoView(["Ah!!!", "A zombie again?"], this.roleGirl.x, this.roleGirl.y - 390, i).zOrder = this.roleGirl.zOrder + 1,
                        tell.finishHandler = Laya.Handler.create(this, function () {
                            this.btn2.visible = !0, this.btn1.visible = !0, this.wenhaoicon.visible = !0, this.wenhaoicon.pos(this.roleGirl.x - 20, this.roleGirl.y - 370),
                                Laya.Tween.to(this.btn1, {
                                    scaleX: 1,
                                    scaleY: 1
                                }, 300, null, Laya.Handler.create(this, function () { })), Laya.Tween.to(this.btn2, {
                                    scaleX: 1,
                                    scaleY: 1
                                }, 300, null, Laya.Handler.create(this, function () { }));
                        });
                }));
            }), e;
    }
    return __extends(e, t), e.prototype.setFal = function (t) {
        this.drawProgressbar(3, 2, !1), this.wenhaoicon.visible = !1, this.btn1.setLock(),
            this.btn2.setLock();
        var e = new Laya.Image("icon/36.png");
        e.pivotX = e.width / 2, e.pivotY = e.height / 2, e.x = this.roleGirl.x, e.y = this.roleGirl.y - 90,
            t.addChild(e), e.zOrder = 999999, this.timer.once(300, this, function () {
                e.visible = !1, this.roleGirl.setAttactAni1("15"), this.btn2.setResult(!1), this.timer.once(300, this, function () {
                    this.roleGirl.setPause(), this.timer.once(1e3, this, function () {
                        this.btn2.visible = !1, this.btn1.visible = !1, this.gameover();
                    });
                });
            });
    }, e.prototype.setOK = function (t) {
        this.drawProgressbar(3, 1, !0), this.wenhaoicon.visible = !1, this.btn1.setLock(),
            this.btn2.setLock();
        var e = new Laya.Image("icon/35.png");
        e.pivotY = e.height / 2, e.pivotX = e.width / 2, e.x = this.roleGirl.x, e.y = this.roleGirl.y - 90,
            t.addChild(e), e.zOrder = 999999, e.scale(2, 2), this.timer.once(200, this, function () {
                e.visible = !1, this.roleGirl.setAttactAni1("14"), this.timer.once(500, this, function () {
                    this.btn1.setResult(!0), this.m.setPause(), this.btn2.visible = !1, this.btn1.visible = !1,
                        Laya.Tween.to(this.roleGirl, {
                            x: Main.width + 60,
                            y: this.roleGirl.y + 60
                        }, 2e3, null, Laya.Handler.create(this, function () {
                            this.roleGirl.visible = !1, this.setWinView();
                        }));
                });
            });
    }, e.prototype.gameover = function () {
        this.addGameOverView(Laya.Handler.create(this, function (t) {
            if (t) {
                this.bg.destroy();
                var i = new e();
                this.addChild(i);
            }
        }));
    }, e;
}(AbstractLevel), __extends = this && this.__extends || function (t, e) {
    function i() {
        this.constructor = t;
    }
    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n]);
    t.prototype = null === e ? Object.create(e) : (i.prototype = e.prototype, new i());
}, LevelView11 = function (t) {
    function e() {
        var e = t.call(this) || this;
        e.bg.graphics.drawRect(0, 0, Main.width, 2 * Main.height, "#142035");
        var i = new Laya.Image("res/bg16.png");
        e.bg.addChild(i), i.y = (Main.height - i.height) / 2, e.bg.graphics.drawRect(0, Main.halfHeight, Main.width, 2 * Main.height, "#313745"),
            e.bg.graphics.drawCircle(466, i.y, 102, "#314c41"), e.bk = i, e.init(i);
        var h = new LImageButtView(310,667,"icon/home.png");
        e.addChild(h);
        h.on(Laya.Event.CLICK, i, function () {
            if (!this.isLock) {
                if(platform.getInstance().initialized_){
                    platform.getInstance().showInterstitial(()=>{
                        Laya.stage.destroyChildren();
                        var t = new FmMenuView();
                        Laya.stage.addChild(t);
                    })
                }else{
                    Laya.stage.destroyChildren();
                    var t = new FmMenuView();
                    Laya.stage.addChild(t);
                }
            }
        });
        h.visible = !1;
        var n = drawText("Subsequent levels \nare not yet open...", "#ffffff", 50);
        return i.addChild(n), n.pivotX = n.width / 2, n.x = Main.halfWidth, n.y = Main.halfHeight - 100,
            n.visible = !1, e.roleGirl.x = -50, e.roleGirl.y = 460, e.roleGirl.zOrder = 999,
            e.roleGirl.loadFinishHandler = Laya.Handler.create(e, function () {
                this.roleGirl.setAttactAni1("2"), Laya.Tween.to(this.roleGirl, {
                    x: Main.width + 60
                }, 2500, null, Laya.Handler.create(this, function () {
                    this.timer.clearAll(this), this.roleGirl.visible = !1, n.visible = !0,h.visible = !0;;
                }));
            }), e.btn2.visible = !1, e.btn1.visible = !1, e;
    }
    return __extends(e, t), e.prototype.nextLevel = function () {
        var t = new LevelView11_1();
        this.addChild(t), t.x = Main.width, t.handler = this.handler, Laya.Tween.to(t, {
            x: 0
        }, 500, null, Laya.Handler.create(this, function () { })), Laya.Tween.to(this.bg, {
            x: -Main.width
        }, 500, null, Laya.Handler.create(this, function () {
            this.timer.clearAll(this);
        }));
    }, e;
}(AbstractLevel), LevelView11_1 = function (t) {
    function e() {
        var e = t.call(this) || this;
        e.bg.graphics.drawRect(0, 0, Main.width, 2 * Main.height, "#142035");
        var i = new Laya.Image("res/bg16.png");
        e.bg.addChild(i), i.y = (Main.height - i.height) / 2, e.bg.graphics.drawRect(0, Main.halfHeight, Main.width, 2 * Main.height, "#313745"),
            e.bg.graphics.drawCircle(466, i.y, 102, "#314c41"), e.init(i), e.roleGirl.x = -50,
            e.roleGirl.y = 460;
        var n = new ZombieMonster();
        return i.addChild(n), e.wolf = n, n.zOrder = 99, n.initRoleImage(), n.x = Main.width,
            n.y = e.roleGirl.y, n.loadFinishHandler = Laya.Handler.create(e, function () {
                n.setAttactAni1("1"), Laya.Tween.to(n, {
                    x: Main.width - 150
                }, 2e3, null, Laya.Handler.create(this, function () {
                    n.setAttactAni1("2");
                }));
            }), e.btn1.initAddIcon("icon/29.png"), e.btn2.initAddIcon("icon/33.png"), e.btn1.x = Main.halfWidth - (e.btn1.width + 50),
            e.btn1.y = i.height + 50, e.btn2.x = Main.halfWidth + 50, e.btn2.y = e.btn1.y, e.btn1.once(Laya.Event.CLICK, e, function () {
                this.btn1.isLock || this.setFal(i);
            }), e.btn2.once(Laya.Event.CLICK, e, function () {
                this.btn2.isLock || this.setOK(i);
            }),
            e.drawProgressbar(2, -1, !1), e.btn2.visible = !1, e.btn1.visible = !1, e.btn1.scale(0, 0),
            e.btn2.scale(0, 0), e.roleGirl.loadFinishHandler = Laya.Handler.create(e, function () {
                this.roleGirl.setAttactAni1("2"), Laya.Tween.to(this.roleGirl, {
                    x: 220
                }, 1e3, null, Laya.Handler.create(this, function () {
                    this.roleGirl.setAttactAni1("9"), tell.setTalkInfoView(["僵尸来了", "老铁救我!"], this.roleGirl.x, 10, i),
                        tell.finishHandler = Laya.Handler.create(this, function () {
                            this.btn2.visible = !0, this.btn1.visible = !0, this.wenhaoicon.visible = !0, this.wenhaoicon.pos(this.roleGirl.x - 20, this.roleGirl.y - 370),
                                Laya.Tween.to(this.btn1, {
                                    scaleX: 1,
                                    scaleY: 1
                                }, 300, null, Laya.Handler.create(this, function () { })), Laya.Tween.to(this.btn2, {
                                    scaleX: 1,
                                    scaleY: 1
                                }, 300, null, Laya.Handler.create(this, function () { }));
                        });
                }));
            }), e;
    }
    return __extends(e, t), e.prototype.setFal = function (t) {
        this.drawProgressbar(2, 0, !1), this.wenhaoicon.visible = !1;
        var e = new Laya.Image("icon/29.png");
        t.addChild(e), e.x = Main.halfWidth + 50, e.y = this.wolf.y, e.pivotY = e.height / 2,
            e.pivotX = e.width / 2, e.scale(0, 0), this.btn1.setLock(), this.btn2.setLock(),
            Laya.Tween.to(e, {
                scaleX: 1.5,
                scaleY: 1.5
            }, 500, null, Laya.Handler.create(this, function () {
                this.timer.once(300, this, function () {
                    Laya.Tween.to(e, {
                        scaleX: .5,
                        scaleY: .5
                    }, 500, null, Laya.Handler.create(this, function () {
                        this.btn1.setResult(!1), this.timer.once(300, this, function () {
                            this.roleGirl.setAttactAni1("16_2"), this.roleGirl.scaleX = -1, this.wolf.setAttactAni1("1"),
                                Laya.Tween.to(this.wolf, {
                                    x: this.wolf.x - 700
                                }, 1500, null, null), Laya.Tween.to(this.roleGirl, {
                                    x: this.roleGirl.x - 460
                                }, 1e3, null, Laya.Handler.create(this, function () {
                                    this.roleGirl.visible = !1, this.btn2.visible = !1, this.btn1.visible = !1, this.gameover();
                                }));
                        });
                    }));
                });
            }));
    }, e.prototype.setOK = function (t) {
        this.drawProgressbar(2, 0, !0), this.wenhaoicon.visible = !1, this.btn1.setLock(),
            this.btn2.setLock();
        var e = new Laya.Image("icon/33.png");
        e.pivotY = e.height / 2, e.pivotX = e.width / 2, e.x = Main.width + 100, e.y = 300,
            t.addChild(e), e.scale(4, 4), e.alpha = 0, Laya.Tween.to(e, {
                alpha: 1,
                x: Main.width - 300,
                y: 100
            }, 500, null, Laya.Handler.create(this, function () {
                this.timer.once(200, this, function () {
                    this.btn2.setResult(!0), this.wolf.scaleX = -1, this.wolf.setAttactAni1("1"), Laya.Tween.to(this.wolf, {
                        alpha: 1,
                        x: Main.width + 90
                    }, 500, null, Laya.Handler.create(this, function () {
                        this.wolf.setPause(), this.roleGirl.setAttactAni1("2"), this.timer.once(100, this, function () {
                            this.btn2.visible = !1, this.btn1.visible = !1, this.roleGirl.zOrder = 999, Laya.Tween.to(this.roleGirl, {
                                x: Main.width + 60
                            }, 1e3, null, Laya.Handler.create(this, function () {
                                this.roleGirl.visible = !1, this.nextLevel();
                            }));
                        });
                    }));
                });
            }));
    }, e.prototype.gameover = function () {
        this.addGameOverView(Laya.Handler.create(this, function (t) {
            if (t) {
                this.bg.destroy();
                var i = new e();
                this.addChild(i);
            }
        }));
    }, e.prototype.nextLevel = function () {
        var t = new LevelView11_2();
        this.addChild(t), t.x = Main.width, t.handler = this.handler, Laya.Tween.to(t, {
            x: 0
        }, 500, null, Laya.Handler.create(this, function () { })), Laya.Tween.to(this.bg, {
            x: -Main.width
        }, 500, null, Laya.Handler.create(this, function () { }));
    }, e;
}(AbstractLevel), LevelView11_2 = function (t) {
    function e() {
        var e = t.call(this) || this;
        e.bg.graphics.drawRect(0, 0, Main.width, 2 * Main.height, "#142035");
        var i = new Laya.Image("res/bg16.png");
        e.bg.addChild(i), i.y = (Main.height - i.height) / 2, e.bg.graphics.drawRect(0, Main.halfHeight, Main.width, 2 * Main.height, "#313745"),
            e.bg.graphics.drawCircle(466, i.y, 102, "#314c41");
        var n = new Laya.Image("bg/wolf.png");
        return i.addChild(n), n.pivotX = n.width / 2, n.pivotY = n.height / 2, n.scaleX = -1,
            n.rotation = -30, n.x = Main.width, n.y = 380, e.wolf = n, e.init(i), e.roleGirl.x = -50,
            e.roleGirl.y = 460,
            e.drawProgressbar(2, 0, !0), e.btn1.initAddIcon("icon/666.png"),
            e.btn2.initAddIcon("icon/11.png"), e.btn1.x = Main.halfWidth - (e.btn1.width + 50),
            e.btn1.y = i.height + 50, e.btn2.x = Main.halfWidth + 50, e.btn2.y = e.btn1.y, e.btn1.once(Laya.Event.CLICK, e, function () {
                this.btn1.isLock || this.setOK(i);
            }), e.btn2.once(Laya.Event.CLICK, e, function () {
                this.btn2.isLock || this.setFal(i);
            }), e.btn2.visible = !1, e.btn1.visible = !1, e.btn1.scale(0, 0), e.btn2.scale(0, 0),
            e.roleGirl.loadFinishHandler = Laya.Handler.create(e, function () {
                this.roleGirl.setAttactAni1("2"), Laya.Tween.to(this.roleGirl, {
                    x: 220
                }, 600, null, Laya.Handler.create(this, function () {
                    this.roleGirl.setAttactAni1("9"), tell.setTalkInfoView(["狼来了", "老铁救我!"], this.roleGirl.x, 10, i),
                        tell.finishHandler = Laya.Handler.create(this, function () {
                            this.btn2.visible = !0, this.btn1.visible = !0, this.wenhaoicon.visible = !0, this.wenhaoicon.pos(this.roleGirl.x - 20, this.roleGirl.y - 370),
                                Laya.Tween.to(this.btn1, {
                                    scaleX: 1,
                                    scaleY: 1
                                }, 300, null, Laya.Handler.create(this, function () { })), Laya.Tween.to(this.btn2, {
                                    scaleX: 1,
                                    scaleY: 1
                                }, 300, null, Laya.Handler.create(this, function () { }));
                        });
                }));
            }), e;
    }
    return __extends(e, t), e.prototype.setFal = function (t) {
        this.drawProgressbar(2, 1, !1), this.wenhaoicon.visible = !1;
        var e = new Laya.Image("icon/11.png");
        t.addChild(e), e.x = 0, e.y = this.wolf.y, e.pivotY = e.height / 2, e.pivotX = e.width / 2,
            e.scale(1.5, 1.5), this.btn1.setLock(), this.btn2.setLock(), Laya.Tween.to(e, {
                rotation: 360,
                x: this.wolf.x - 50,
                y: this.wolf.y
            }, 500, null, Laya.Handler.create(this, function () {
                this.btn2.setResult(!1), this.timer.once(300, this, function () {
                    e.x = e.x - 50, e.y = e.y + 100, this.roleGirl.setPause(), this.timer.once(1e3, this, function () {
                        e.visible = !1, this.btn2.visible = !1, this.btn1.visible = !1, this.gameover();
                    });
                });
            }));
    }, e.prototype.setOK = function (t) {
        this.drawProgressbar(2, 1, !0), this.wenhaoicon.visible = !1;
        var e = new Laya.Image("icon/666.png");
        t.addChild(e), e.x = 0, e.y = this.wolf.y, e.pivotY = e.height / 2, e.pivotX = e.width / 2,
            e.scale(1.5, 1.5), this.btn1.setLock(), this.btn2.setLock(), Laya.Tween.to(e, {
                rotation: 360,
                x: this.wolf.x - 50,
                y: this.wolf.y
            }, 500, null, Laya.Handler.create(this, function () {
                this.btn1.setResult(!0), this.timer.once(300, this, function () {
                    this.wolf.visible = !1, e.x = e.x - 50, e.y = e.y + 100, e.rotation = -120, this.roleGirl.setAttactAni1("2"),
                        Laya.Tween.to(this.roleGirl, {
                            x: Main.width + 70
                        }, 3e3, null, Laya.Handler.create(this, function () {
                            e.visible = !1, this.roleGirl.setPause(), this.timer.clearAll(this), this.btn2.visible = !1,
                                this.btn1.visible = !1, this.setWinView();
                        }));
                });
            }));
    }, e.prototype.gameover = function () {
        this.addGameOverView(Laya.Handler.create(this, function (t) {
            if (t) {
                this.bg.destroy();
                var i = new e();
                this.addChild(i);
            }
        }));
    }, e.prototype.nextLevel = function () {
        var t = new LevelView11_3();
        this.addChild(t), t.x = Main.width, t.handler = this.handler, Laya.Tween.to(t, {
            x: 0
        }, 500, null, Laya.Handler.create(this, function () { })), Laya.Tween.to(this.bg, {
            x: -Main.width
        }, 500, null, Laya.Handler.create(this, function () { }));
    }, e;
}(AbstractLevel), LevelView11_3 = function (t) {
    function e() {
        var e = t.call(this) || this;
        e.bg.graphics.drawRect(0, 0, Main.width, 2 * Main.height, "#36141e");
        var i = new Laya.Image("res/bg15.png");
        e.bg.addChild(i), i.y = (Main.height - i.height) / 2, i.width = i.width + 40, e.init(i);
        var n = new Laya.Image("bg/14_1.png");
        i.addChild(n), n.pivotY = n.height / 2, n.pivotX = n.width / 2, n.y = Main.halfHeight - 40,
            n.x = Main.width - 260, e.fly = n;
        var s = new ZombieMonster();
        return i.addChild(s), e.m = s, s.initRoleImage(), s.x = Main.width - 150, s.y = Main.halfHeight,
            s.loadFinishHandler = Laya.Handler.create(e, function () {
                s.setAttactAni1("2");
            }), e.roleGirl.x = 0, e.roleGirl.y = Main.halfHeight, e.roleGirl.zOrder = 999,
            e.drawProgressbar(3, 1, !0),
            e.btn1.initAddIcon("icon/35.png"), e.btn2.initAddIcon("icon/36.png"), e.btn1.x = Main.halfWidth - (e.btn1.width + 50),
            e.btn1.y = Main.halfHeight + 180, e.btn2.x = Main.halfWidth + 50, e.btn2.y = e.btn1.y,
            e.btn1.once(Laya.Event.CLICK, e, function () {
                this.btn1.isLock || this.setOK(i);
            }), e.btn2.once(Laya.Event.CLICK, e, function () {
                this.btn2.isLock || this.setFal(i);
            }), e.btn2.visible = !1, e.btn1.visible = !1, e.btn1.scale(0, 0), e.btn2.scale(0, 0),
            e.roleGirl.loadFinishHandler = Laya.Handler.create(e, function () {
                this.roleGirl.setAttactAni1("2"), Laya.Tween.to(this.roleGirl, {
                    x: 150
                }, 2500, null, Laya.Handler.create(this, function () {
                    this.roleGirl.setAttactAni1("9");
                    tell.setTalkInfoView(["啊！！", "又是僵尸？"], this.roleGirl.x, this.roleGirl.y - 390, i).zOrder = this.roleGirl.zOrder + 1,
                        tell.finishHandler = Laya.Handler.create(this, function () {
                            this.btn2.visible = !0, this.btn1.visible = !0, this.wenhaoicon.visible = !0, this.wenhaoicon.pos(this.roleGirl.x - 20, this.roleGirl.y - 370),
                                Laya.Tween.to(this.btn1, {
                                    scaleX: 1,
                                    scaleY: 1
                                }, 300, null, Laya.Handler.create(this, function () { })), Laya.Tween.to(this.btn2, {
                                    scaleX: 1,
                                    scaleY: 1
                                }, 300, null, Laya.Handler.create(this, function () { }));
                        });
                }));
            }), e;
    }
    return __extends(e, t), e.prototype.setFal = function (t) {
        this.drawProgressbar(3, 2, !1), this.wenhaoicon.visible = !1, this.btn1.setLock(),
            this.btn2.setLock();
        var e = new Laya.Image("icon/36.png");
        e.pivotX = e.width / 2, e.pivotY = e.height / 2, e.x = this.roleGirl.x, e.y = this.roleGirl.y - 90,
            t.addChild(e), e.zOrder = 999999, this.timer.once(300, this, function () {
                e.visible = !1, this.roleGirl.setAttactAni1("15"), this.btn2.setResult(!1), this.timer.once(300, this, function () {
                    this.roleGirl.setPause(), this.timer.once(1e3, this, function () {
                        this.btn2.visible = !1, this.btn1.visible = !1, this.gameover();
                    });
                });
            });
    }, e.prototype.setOK = function (t) {
        this.drawProgressbar(3, 1, !0), this.wenhaoicon.visible = !1, this.btn1.setLock(),
            this.btn2.setLock();
        var e = new Laya.Image("icon/35.png");
        e.pivotY = e.height / 2, e.pivotX = e.width / 2, e.x = this.roleGirl.x, e.y = this.roleGirl.y - 90,
            t.addChild(e), e.zOrder = 999999, e.scale(2, 2), this.timer.once(200, this, function () {
                e.visible = !1, this.roleGirl.setAttactAni1("14"), this.timer.once(500, this, function () {
                    this.btn1.setResult(!0), this.m.setPause(), this.btn2.visible = !1, this.btn1.visible = !1,
                        Laya.Tween.to(this.roleGirl, {
                            x: Main.width + 60,
                            y: this.roleGirl.y + 60
                        }, 2e3, null, Laya.Handler.create(this, function () {
                            this.roleGirl.visible = !1, this.setWinView();
                        }));
                });
            });
    }, e.prototype.gameover = function () {
        this.addGameOverView(Laya.Handler.create(this, function (t) {
            if (t) {
                this.bg.destroy();
                var i = new e();
                this.addChild(i);
            }
        }));
    }, e;
}(AbstractLevel), __extends = this && this.__extends || function (t, e) {
    function i() {
        this.constructor = t;
    }
    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n]);
    t.prototype = null === e ? Object.create(e) : (i.prototype = e.prototype, new i());
}, LevelView12 = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.graphics.drawRect(0, 0, Main.width, 2 * Main.height, "#E3DEE4"), e;
    }
    return __extends(e, t), e;
}(AbstractLevel), __extends = this && this.__extends || function (t, e) {
    function i() {
        this.constructor = t;
    }
    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n]);
    t.prototype = null === e ? Object.create(e) : (i.prototype = e.prototype, new i());
}, LevelView13 = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.graphics.drawRect(0, 0, Main.width, 2 * Main.height, "#E3DEE4"), e;
    }
    return __extends(e, t), e;
}(AbstractLevel), __extends = this && this.__extends || function (t, e) {
    function i() {
        this.constructor = t;
    }
    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n]);
    t.prototype = null === e ? Object.create(e) : (i.prototype = e.prototype, new i());
}, LevelView14 = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.graphics.drawRect(0, 0, Main.width, 2 * Main.height, "#E3DEE4"), e;
    }
    return __extends(e, t), e;
}(AbstractLevel), __extends = this && this.__extends || function (t, e) {
    function i() {
        this.constructor = t;
    }
    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n]);
    t.prototype = null === e ? Object.create(e) : (i.prototype = e.prototype, new i());
}, LevelView15 = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.graphics.drawRect(0, 0, Main.width, 2 * Main.height, "#E3DEE4"), e;
    }
    return __extends(e, t), e;
}(AbstractLevel), __extends = this && this.__extends || function (t, e) {
    function i() {
        this.constructor = t;
    }
    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n]);
    t.prototype = null === e ? Object.create(e) : (i.prototype = e.prototype, new i());
}, LevelView16 = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.graphics.drawRect(0, 0, Main.width, 2 * Main.height, "#E3DEE4"), e;
    }
    return __extends(e, t), e;
}(AbstractLevel), __extends = this && this.__extends || function (t, e) {
    function i() {
        this.constructor = t;
    }
    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n]);
    t.prototype = null === e ? Object.create(e) : (i.prototype = e.prototype, new i());
}, LevelView17 = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.graphics.drawRect(0, 0, Main.width, 2 * Main.height, "#E3DEE4"), e;
    }
    return __extends(e, t), e;
}(AbstractLevel), __extends = this && this.__extends || function (t, e) {
    function i() {
        this.constructor = t;
    }
    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n]);
    t.prototype = null === e ? Object.create(e) : (i.prototype = e.prototype, new i());
}, LevelView18 = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.graphics.drawRect(0, 0, Main.width, 2 * Main.height, "#E3DEE4"), e;
    }
    return __extends(e, t), e;
}(AbstractLevel), __extends = this && this.__extends || function (t, e) {
    function i() {
        this.constructor = t;
    }
    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n]);
    t.prototype = null === e ? Object.create(e) : (i.prototype = e.prototype, new i());
}, LevelView19 = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.graphics.drawRect(0, 0, Main.width, 2 * Main.height, "#E3DEE4"), e;
    }
    return __extends(e, t), e;
}(AbstractLevel), __extends = this && this.__extends || function (t, e) {
    function i() {
        this.constructor = t;
    }
    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n]);
    t.prototype = null === e ? Object.create(e) : (i.prototype = e.prototype, new i());
}, LevelView2 = function (t) {
    function e() {
        var e = t.call(this) || this;
        e.graphics.drawRect(0, 0, Main.width, 2 * Main.height, "#3a1721");
        var i = new Laya.Image("res/bg1.png");
        e.addChild(i), i.y = (Main.height - i.height) / 2, e.graphics.drawRect(0, 0, Main.width, Main.halfHeight, "#29426c"),
            e.graphics.drawRect(0, i.y - 150, Main.width, 150, "#3f4c63"), e.graphics.drawRect(0, Main.halfHeight, Main.width, 2 * Main.height, "#3a1721");
        var n = new Laya.Sprite();
        n.graphics.drawPie(375, 118, 280, 45, 135, "#b5a460"), i.addChild(n), n.alpha = .3;
        var s = new Laya.BlurFilter();
        s.strength = 15;
        var a = new Laya.GlowFilter("#ffff00", 20, 0, 0);
        n.filters = [s, a];
        var r = !0;
        return e.timerLoop(30, e, function () {
            r ? n.alpha < .5 ? n.alpha += .013 : r = !1 : n.alpha > .1 ? n.alpha -= .013 : r = !0;
        }), e.init(i), e.roleGirl.x = 560, e.roleGirl.y = 460, e.roleGirl.loadFinishHandler = Laya.Handler.create(e, function () {
            this.roleGirl.setAttactAni1("9");
        }),
            e.btn1.initAddIcon("icon/ms.png"), e.btn2.initAddIcon("icon/ft.png"), e.btn1.x = Main.halfWidth - (e.btn1.width + 50),
            e.btn1.y = i.height + 50, e.btn2.x = Main.halfWidth + 50, e.btn2.y = e.btn1.y, e.btn2.once(Laya.Event.CLICK, e, function () {
                this.btn1.isLock || this.setOK(i);
            }), e.btn1.once(Laya.Event.CLICK, e, function () {
                this.btn2.isLock || this.setFal(i);
            }), e.btn2.visible = !1, e.btn1.visible = !1, e.btn1.scale(0, 0), e.btn2.scale(0, 0),
            tell.setTalkInfoView(["Let me go out", "How to open \nthe door?"], e.roleGirl.x, 10, i), tell.finishHandler = Laya.Handler.create(e, function () {
                this.btn2.visible = !0, this.btn1.visible = !0, this.wenhaoicon.visible = !0, this.wenhaoicon.pos(this.roleGirl.x - 20, this.roleGirl.y - 370),
                    Laya.Tween.to(this.btn1, {
                        scaleX: 1,
                        scaleY: 1
                    }, 300, null, Laya.Handler.create(this, function () { })), Laya.Tween.to(this.btn2, {
                        scaleX: 1,
                        scaleY: 1
                    }, 300, null, Laya.Handler.create(this, function () { }));
            }), e;
    }
    return __extends(e, t), e.prototype.setFal = function (t) {
        this.wenhaoicon.visible = !1, this.roleGirl.setAttactAni1("6"), this.btn1.setLock(),
            this.btn2.setLock(), this.timer.once(1e3, this, function () {
                this.btn1.setResult(!1), this.roleGirl.setPause(), this.timer.once(1e3, this, function () {
                    this.btn2.visible = !1, this.btn1.visible = !1, this.gameover();
                });
            });
    }, e.prototype.setOK = function (t) {
        this.wenhaoicon.visible = !1, this.roleGirl.setAttactAni1("6_2"), this.btn1.setLock(),
            this.btn2.setLock(), this.timer.once(1e3, this, function () {
                this.btn2.setResult(!0);
                var e = new Laya.Image("icon/1_bg.png");
                t.addChild(e), e.x = 630, e.y = 158, this.roleGirl.zOrder = 100, this.roleGirl.setAttactAni1("2"),
                    Laya.Tween.to(this.roleGirl, {
                        scaleX: 1,
                        scaleY: 1,
                        x: this.roleGirl.x + 100,
                        alpha: 0
                    }, 300, null, Laya.Handler.create(this, function () {
                        this.roleGirl.setPause(), this.timer.once(1e3, this, function () {
                            this.btn2.visible = !1, this.btn1.visible = !1, this.setWinView();
                        });
                    }));
            });
    }, e.prototype.gameover = function () {
        this.addGameOverView(Laya.Handler.create(this, function (t) {
            if (t) {
                this.bg.destroy();
                var i = new e();
                this.addChild(i);
            }
        }));
    }, e;
}(AbstractLevel), __extends = this && this.__extends || function (t, e) {
    function i() {
        this.constructor = t;
    }
    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n]);
    t.prototype = null === e ? Object.create(e) : (i.prototype = e.prototype, new i());
}, LevelView20 = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.graphics.drawRect(0, 0, Main.width, 2 * Main.height, "#E3DEE4"), e;
    }
    return __extends(e, t), e;
}(AbstractLevel), __extends = this && this.__extends || function (t, e) {
    function i() {
        this.constructor = t;
    }
    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n]);
    t.prototype = null === e ? Object.create(e) : (i.prototype = e.prototype, new i());
}, LevelView21 = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.graphics.drawRect(0, 0, Main.width, 2 * Main.height, "#E3DEE4"), e;
    }
    return __extends(e, t), e;
}(AbstractLevel), __extends = this && this.__extends || function (t, e) {
    function i() {
        this.constructor = t;
    }
    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n]);
    t.prototype = null === e ? Object.create(e) : (i.prototype = e.prototype, new i());
}, LevelView22 = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.graphics.drawRect(0, 0, Main.width, 2 * Main.height, "#E3DEE4"), e;
    }
    return __extends(e, t), e;
}(AbstractLevel), __extends = this && this.__extends || function (t, e) {
    function i() {
        this.constructor = t;
    }
    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n]);
    t.prototype = null === e ? Object.create(e) : (i.prototype = e.prototype, new i());
}, LevelView23 = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.graphics.drawRect(0, 0, Main.width, 2 * Main.height, "#E3DEE4"), e;
    }
    return __extends(e, t), e;
}(AbstractLevel), __extends = this && this.__extends || function (t, e) {
    function i() {
        this.constructor = t;
    }
    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n]);
    t.prototype = null === e ? Object.create(e) : (i.prototype = e.prototype, new i());
}, LevelView24 = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.graphics.drawRect(0, 0, Main.width, 2 * Main.height, "#E3DEE4"), e;
    }
    return __extends(e, t), e;
}(AbstractLevel), __extends = this && this.__extends || function (t, e) {
    function i() {
        this.constructor = t;
    }
    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n]);
    t.prototype = null === e ? Object.create(e) : (i.prototype = e.prototype, new i());
}, LevelView25 = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.graphics.drawRect(0, 0, Main.width, 2 * Main.height, "#E3DEE4"), e;
    }
    return __extends(e, t), e;
}(AbstractLevel), __extends = this && this.__extends || function (t, e) {
    function i() {
        this.constructor = t;
    }
    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n]);
    t.prototype = null === e ? Object.create(e) : (i.prototype = e.prototype, new i());
}, LevelView26 = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.graphics.drawRect(0, 0, Main.width, 2 * Main.height, "#E3DEE4"), e;
    }
    return __extends(e, t), e;
}(AbstractLevel), __extends = this && this.__extends || function (t, e) {
    function i() {
        this.constructor = t;
    }
    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n]);
    t.prototype = null === e ? Object.create(e) : (i.prototype = e.prototype, new i());
}, LevelView27 = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.graphics.drawRect(0, 0, Main.width, 2 * Main.height, "#E3DEE4"), e;
    }
    return __extends(e, t), e;
}(AbstractLevel), __extends = this && this.__extends || function (t, e) {
    function i() {
        this.constructor = t;
    }
    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n]);
    t.prototype = null === e ? Object.create(e) : (i.prototype = e.prototype, new i());
}, LevelView28 = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.graphics.drawRect(0, 0, Main.width, 2 * Main.height, "#E3DEE4"), e;
    }
    return __extends(e, t), e;
}(AbstractLevel), __extends = this && this.__extends || function (t, e) {
    function i() {
        this.constructor = t;
    }
    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n]);
    t.prototype = null === e ? Object.create(e) : (i.prototype = e.prototype, new i());
}, LevelView29 = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.graphics.drawRect(0, 0, Main.width, 2 * Main.height, "#E3DEE4"), e;
    }
    return __extends(e, t), e;
}(AbstractLevel), __extends = this && this.__extends || function (t, e) {
    function i() {
        this.constructor = t;
    }
    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n]);
    t.prototype = null === e ? Object.create(e) : (i.prototype = e.prototype, new i());
}, LevelView3 = function (t) {
    function e() {
        var e = t.call(this) || this;
        e.graphics.drawRect(0, 0, Main.width, 2 * Main.height, "#3a1721");
        var i = new Laya.Image("res/bg2.png");
        return e.addChild(i), i.y = (Main.height - i.height) / 2, e.graphics.drawRect(0, 0, Main.width, Main.halfHeight, "#29426c"),
            e.graphics.drawRect(0, i.y - 150, Main.width, 150, "#3f4c63"), e.graphics.drawRect(0, Main.halfHeight, Main.width, 2 * Main.height, "#3a1721"),
            e.init(i), e.roleGirl.x = 70, e.roleGirl.y = 460, e.roleGirl.loadFinishHandler = Laya.Handler.create(e, function () {
                this.roleGirl.setAttactAni1("9");
            }), e.btn1.initAddIcon("icon/3.png"), e.btn2.initAddIcon("icon/4.png"), e.btn1.x = Main.halfWidth - (e.btn1.width + 50),
            e.btn1.y = i.height + 50, e.btn2.x = Main.halfWidth + 50, e.btn2.y = e.btn1.y, e.btn2.once(Laya.Event.CLICK, e, function () {
                this.btn1.isLock || this.setOK(i);
            }), e.btn1.once(Laya.Event.CLICK, e, function () {
                this.btn2.isLock || this.setFal(i);
            }),
            e.btn2.visible = !1, e.btn1.visible = !1, e.btn1.scale(0, 0), e.btn2.scale(0, 0),
            tell.setTalkInfoView(["Why are there holes in the ground", "How do I pass?"], e.roleGirl.x, 10, i), tell.finishHandler = Laya.Handler.create(e, function () {
                this.btn2.visible = !0, this.btn1.visible = !0, this.wenhaoicon.visible = !0, this.wenhaoicon.pos(this.roleGirl.x - 20, this.roleGirl.y - 370),
                    Laya.Tween.to(this.btn1, {
                        scaleX: 1,
                        scaleY: 1
                    }, 300, null, Laya.Handler.create(this, function () { })), Laya.Tween.to(this.btn2, {
                        scaleX: 1,
                        scaleY: 1
                    }, 300, null, Laya.Handler.create(this, function () { }));
            }), e;
    }
    return __extends(e, t), e.prototype.setFal = function (t) {
        this.wenhaoicon.visible = !1, this.btn1.setLock(), this.btn2.setLock();
        var e = new Laya.Sprite();
        t.addChild(e), e.size(400, 200), e.graphics.drawPoly(0, 0, [0, 0, 330, 0, 380, 50, 30, 50, 0, 0], "#8e5c3b"),
            e.pivotX = e.width / 2, e.x = t.width / 2, e.y = 440, e.alpha = 0, Laya.Tween.to(e, {
                alpha: 1
            }, 300, null, Laya.Handler.create(this, function () {
                this.roleGirl.setAttactAni1("2"), this.roleGirl.zOrder = 9999, Laya.Tween.to(this.roleGirl, {
                    x: Main.halfWidth - 60
                }, 1e3, null, Laya.Handler.create(this, function () {
                    this.btn1.setResult(!1), Laya.Tween.to(e, {
                        alpha: 0
                    }, 200, null, Laya.Handler.create(this, function () {
                        this.roleGirl.setPause(), Laya.Tween.to(this.roleGirl, {
                            scaleY: 0,
                            alpha: 1,
                            y: this.roleGirl.y + 50
                        }, 200, null, Laya.Handler.create(this, function () {
                            this.roleGirl.alpha = 0, this.timer.once(500, this, function () {
                                this.btn2.visible = !1, this.btn1.visible = !1, this.gameover();
                            });
                        }));
                    }));
                }));
            }));
    }, e.prototype.setOK = function (t) {
        this.wenhaoicon.visible = !1, this.btn1.setLock(), this.btn2.setLock();
        var e = new Laya.Image("icon/mm.png");
        t.addChild(e), e.pivotX = e.width / 2, e.pivotY = e.height / 2, e.x = t.width / 2 - 23,
            e.y = 500, e.scale(0, 0);
        var i = new Laya.Image("icon/4.png");
        t.addChild(i), i.pivotX = i.width / 2, i.x = t.width / 2 + 30, i.y = 340, i.scale(2, 2);
        var n = new Laya.Sprite();
        t.addChild(n), n.x = t.width / 2 + 70, n.y = 340, Laya.Tween.to(i, {
            rotation: -120
        }, 300, null, Laya.Handler.create(this, function () {
            for (var t = 0; t < 7; t++) n.graphics.drawCircle(-10 * t, 20 * t, 32 + 2 * t, "#54585a");
            Laya.Tween.to(e, {
                scaleX: 1,
                scaleY: 1,
                y: 459
            }, 300, null, Laya.Handler.create(this, function () {
                n.visible = !1, i.visible = !1, this.roleGirl.setAttactAni1("2"), this.roleGirl.zOrder = 9999,
                    this.roleGirl.scale(.9, .9), Laya.Tween.to(this.roleGirl, {
                        x: this.roleGirl.x + 530,
                        scaleX: .9,
                        scaleY: .9
                    }, 2e3, null, Laya.Handler.create(this, function () {
                        this.roleGirl.alpha = 0, this.roleGirl.setPause(), this.timer.once(100, this, function () {
                            this.btn2.visible = !1, this.btn1.visible = !1, this.setWinView();
                        });
                    }));
            }));
        }));
    }, e.prototype.gameover = function () {
        this.addGameOverView(Laya.Handler.create(this, function (t) {
            if (t) {
                this.bg.destroy();
                var i = new e();
                this.addChild(i);
            }
        }));
    }, e;
}(AbstractLevel), __extends = this && this.__extends || function (t, e) {
    function i() {
        this.constructor = t;
    }
    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n]);
    t.prototype = null === e ? Object.create(e) : (i.prototype = e.prototype, new i());
}, LevelView30 = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.graphics.drawRect(0, 0, Main.width, 2 * Main.height, "#E3DEE4"), e;
    }
    return __extends(e, t), e;
}(AbstractLevel), __extends = this && this.__extends || function (t, e) {
    function i() {
        this.constructor = t;
    }
    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n]);
    t.prototype = null === e ? Object.create(e) : (i.prototype = e.prototype, new i());
}, LevelView31 = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.graphics.drawRect(0, 0, Main.width, 2 * Main.height, "#E3DEE4"), e;
    }
    return __extends(e, t), e;
}(AbstractLevel), __extends = this && this.__extends || function (t, e) {
    function i() {
        this.constructor = t;
    }
    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n]);
    t.prototype = null === e ? Object.create(e) : (i.prototype = e.prototype, new i());
}, LevelView32 = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.graphics.drawRect(0, 0, Main.width, 2 * Main.height, "#E3DEE4"), e;
    }
    return __extends(e, t), e;
}(AbstractLevel), __extends = this && this.__extends || function (t, e) {
    function i() {
        this.constructor = t;
    }
    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n]);
    t.prototype = null === e ? Object.create(e) : (i.prototype = e.prototype, new i());
}, LevelView33 = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.graphics.drawRect(0, 0, Main.width, 2 * Main.height, "#E3DEE4"), e;
    }
    return __extends(e, t), e;
}(AbstractLevel), __extends = this && this.__extends || function (t, e) {
    function i() {
        this.constructor = t;
    }
    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n]);
    t.prototype = null === e ? Object.create(e) : (i.prototype = e.prototype, new i());
}, LevelView34 = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.graphics.drawRect(0, 0, Main.width, 2 * Main.height, "#E3DEE4"), e;
    }
    return __extends(e, t), e;
}(AbstractLevel), __extends = this && this.__extends || function (t, e) {
    function i() {
        this.constructor = t;
    }
    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n]);
    t.prototype = null === e ? Object.create(e) : (i.prototype = e.prototype, new i());
}, LevelView35 = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.graphics.drawRect(0, 0, Main.width, 2 * Main.height, "#E3DEE4"), e;
    }
    return __extends(e, t), e;
}(AbstractLevel), __extends = this && this.__extends || function (t, e) {
    function i() {
        this.constructor = t;
    }
    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n]);
    t.prototype = null === e ? Object.create(e) : (i.prototype = e.prototype, new i());
}, LevelView36 = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.graphics.drawRect(0, 0, Main.width, 2 * Main.height, "#E3DEE4"), e;
    }
    return __extends(e, t), e;
}(AbstractLevel), __extends = this && this.__extends || function (t, e) {
    function i() {
        this.constructor = t;
    }
    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n]);
    t.prototype = null === e ? Object.create(e) : (i.prototype = e.prototype, new i());
}, LevelView37 = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.graphics.drawRect(0, 0, Main.width, 2 * Main.height, "#E3DEE4"), e;
    }
    return __extends(e, t), e;
}(AbstractLevel), __extends = this && this.__extends || function (t, e) {
    function i() {
        this.constructor = t;
    }
    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n]);
    t.prototype = null === e ? Object.create(e) : (i.prototype = e.prototype, new i());
}, LevelView38 = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.graphics.drawRect(0, 0, Main.width, 2 * Main.height, "#E3DEE4"), e;
    }
    return __extends(e, t), e;
}(AbstractLevel), __extends = this && this.__extends || function (t, e) {
    function i() {
        this.constructor = t;
    }
    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n]);
    t.prototype = null === e ? Object.create(e) : (i.prototype = e.prototype, new i());
}, LevelView39 = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.graphics.drawRect(0, 0, Main.width, 2 * Main.height, "#E3DEE4"), e;
    }
    return __extends(e, t), e;
}(AbstractLevel), __extends = this && this.__extends || function (t, e) {
    function i() {
        this.constructor = t;
    }
    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n]);
    t.prototype = null === e ? Object.create(e) : (i.prototype = e.prototype, new i());
}, LevelView4 = function (t) {
    function e() {
        var e = t.call(this) || this;
        e.bg.graphics.drawRect(0, 0, Main.width, 2 * Main.height, "#3a1721");
        var i = new Laya.Image("res/bg3.png");
        e.bg.addChild(i), i.y = (Main.height - i.height) / 2;
        var n = new Laya.Image("icon/bg3_t.png");
        i.addChild(n), n.pivotX = n.width / 2, n.pivotY = n.height, n.x = 300, n.y = 326,
            e.hand = n;
        var s = new Laya.Image("icon/bg3_tv2.png");
        i.addChild(s), s.x = 456, s.y = 252, e.tv = s, e.graphics.drawRect(0, 0, Main.width, Main.halfHeight, "#29426c"),
            e.graphics.drawRect(0, i.y - 150, Main.width, 150, "#3f4c63"), e.graphics.drawRect(0, Main.halfHeight, Main.width, 2 * Main.height, "#3a1721");
        var a = new Laya.Sprite();
        e.deng = a, a.graphics.drawPoly(275, 208, [0, 0, 200, 50, 170, 200, 0, 200, 0, 0], "#b5a460"),
            i.addChild(a), a.alpha = .3;
        var r = new Laya.BlurFilter();
        r.strength = 15;
        var o = new Laya.GlowFilter("#ffff00", 20, 0, 0);
        a.filters = [r, o];
        var h = !0;
        return e.timerLoop(30, e, function () {
            h ? a.alpha < .6 ? a.alpha += .033 : h = !1 : a.alpha > .2 ? a.alpha -= .033 : h = !0;
        }), e.init(i), e.roleGirl.x = 90, e.roleGirl.y = 490, e.roleGirl.loadFinishHandler = Laya.Handler.create(e, function () {
            this.roleGirl.setAttactAni1("9");
        }),
            e.drawProgressbar(2, -1, !1), e.btn1.initAddIcon("icon/5.png"), e.btn2.initAddIcon("icon/6.png"),
            e.btn1.x = Main.halfWidth - (e.btn1.width + 50), e.btn1.y = i.height + 50, e.btn2.x = Main.halfWidth + 50,
            e.btn2.y = e.btn1.y, e.btn1.once(Laya.Event.CLICK, e, function () {
                this.btn1.isLock || this.setOK(i);
            }), e.btn2.once(Laya.Event.CLICK, e, function () {
                this.btn2.isLock || this.setFal(i);
            }), e.btn2.visible = !1, e.btn1.visible = !1, e.btn1.scale(0, 0), e.btn2.scale(0, 0),
            tell.setTalkInfoView(["That guy who kidnapped me", "I have to find a way to escape"], e.roleGirl.x, 10, i), tell.finishHandler = Laya.Handler.create(e, function () {
                this.btn2.visible = !0, this.btn1.visible = !0, this.wenhaoicon.visible = !0, this.wenhaoicon.pos(this.roleGirl.x - 20, this.roleGirl.y - 370),
                    Laya.Tween.to(this.btn1, {
                        scaleX: 1,
                        scaleY: 1
                    }, 300, null, Laya.Handler.create(this, function () { })), Laya.Tween.to(this.btn2, {
                        scaleX: 1,
                        scaleY: 1
                    }, 300, null, Laya.Handler.create(this, function () { }));
            }), e;
    }
    return __extends(e, t), e.prototype.setFal = function (t) {
        this.drawProgressbar(2, 0, !1), this.wenhaoicon.visible = !1, this.roleGirl.setAttactAni1("8"),
            this.roleGirl.zOrder = 9999, this.btn1.setLock(), this.btn2.setLock();
        var e = new Laya.Sprite();
        t.addChild(e), e.graphics.drawLine(this.roleGirl.x + 150, this.roleGirl.y - 140, this.roleGirl.x + 410, this.roleGirl.y - 110, "#ff0000", 3),
            this.timer.once(300, this, function () {
                e.visible = !1, this.roleGirl.setAttactAni1("4"), this.deng.visible = !1, this.hand.scaleX = -1,
                    this.tv.skin = "icon/bg3_tv1.png", this.btn2.setResult(!1), this.timer.once(500, this, function () {
                        this.btn2.visible = !1, this.btn1.visible = !1, this.gameover();
                    });
            });
    }, e.prototype.setOK = function (t) {
        this.drawProgressbar(2, 0, !0), this.wenhaoicon.visible = !1;
        var e = new Laya.Image("icon/5.png");
        e.pivotY = e.height, e.pivotX = e.width / 2, e.x = this.roleGirl.x, e.y = this.roleGirl.y,
            t.addChild(e), e.scale(1.9, 1.9), e.zOrder = 99, this.timer.once(500, this, function () {
                e.visible = !1, this.roleGirl.setAttactAni1("7"), this.roleGirl.zOrder = 100, this.btn1.setLock(),
                    this.btn2.setLock(), Laya.Tween.to(this.roleGirl, {
                        scaleX: 1,
                        scaleY: 1,
                        x: this.roleGirl.x + 500
                    }, 2e3, null, Laya.Handler.create(this, function () {
                        this.btn1.setResult(!0), this.roleGirl.setAttactAni1("2"), Laya.Tween.to(this.roleGirl, {
                            scaleX: 1,
                            scaleY: 1,
                            x: this.roleGirl.x + 60
                        }, 500, null, Laya.Handler.create(this, function () {
                            this.roleGirl.setPause(), this.roleGirl.visible = !1, this.timer.once(1e3, this, function () {
                                this.btn2.visible = !1, this.btn1.visible = !1, this.nextLvel();
                            });
                        }));
                    }));
            });
    }, e.prototype.gameover = function () {
        this.addGameOverView(Laya.Handler.create(this, function (t) {
            if (t) {
                this.bg.destroy();
                var i = new e();
                this.addChild(i);
            }
        }));
    }, e.prototype.nextLvel = function () {
        var t = new LevelView4_2();
        this.addChild(t), t.x = Main.width, t.handler = this.handler, Laya.Tween.to(t, {
            x: 0
        }, 500, null, Laya.Handler.create(this, function () { })), Laya.Tween.to(this.bg, {
            x: -Main.width
        }, 500, null, Laya.Handler.create(this, function () { }));
    }, e;
}(AbstractLevel), LevelView4_2 = function (t) {
    function e() {
        var e = t.call(this) || this;
        e.bg.graphics.drawRect(0, 0, Main.width, 2 * Main.height, "#29416c");
        var i = new Laya.Image("res/bg4.png");
        return e.bg.addChild(i), e.bk = i, i.y = (Main.height - i.height) / 2, e.bg.graphics.drawRect(0, Main.halfHeight, Main.width, 2 * Main.height, "#313745"),
            e.bg.graphics.drawCircle(486, i.y, 262, "#1b352e"), e.init(i), e.roleGirl.x = 90,
            e.roleGirl.y = 490, e.roleGirl.loadFinishHandler = Laya.Handler.create(e, function () {
                this.roleGirl.setAttactAni1("9");
            }),
            e.drawProgressbar(2, 0, !0), e.btn1.initAddIcon("icon/9.png"), e.btn2.initAddIcon("icon/10.png"),
            e.btn1.x = Main.halfWidth - (e.btn1.width + 50), e.btn1.y = i.height + 50, e.btn2.x = Main.halfWidth + 50,
            e.btn2.y = e.btn1.y, e.btn2.once(Laya.Event.CLICK, e, function () {
                this.btn2.isLock || this.setOK(i);
            }), e.btn1.once(Laya.Event.CLICK, e, function () {
                this.btn1.isLock || this.setFal(i);
            }), e.btn2.visible = !1, e.btn1.visible = !1, e.btn1.scale(0, 0), e.btn2.scale(0, 0),
            tell.setTalkInfoView(["Finally escaped", "What a heavy rain!"], e.roleGirl.x, 10, i), tell.finishHandler = Laya.Handler.create(e, function () {
                this.btn2.visible = !0, this.btn1.visible = !0, this.wenhaoicon.visible = !0, this.wenhaoicon.pos(this.roleGirl.x - 20, this.roleGirl.y - 370),
                    Laya.Tween.to(this.btn1, {
                        scaleX: 1,
                        scaleY: 1
                    }, 300, null, Laya.Handler.create(this, function () { })), Laya.Tween.to(this.btn2, {
                        scaleX: 1,
                        scaleY: 1
                    }, 300, null, Laya.Handler.create(this, function () { }));
            }), e.timerLoop(60, e, e.onRain), e;
    }
    return __extends(e, t), e.prototype.onRain = function () {
        var t = new Laya.Sprite();
        this.bg.addChild(t), t.graphics.drawLine(0, 0, 0, 3 + Math.floor(30 * Math.random()), "#ffffff", 3),
            t.x = Math.floor(Math.random() * Main.width), Laya.Tween.to(t, {
                y: this.bk.y + this.bk.height - 20
            }, 1e3, null, Laya.Handler.create(this, function () {
                t.destroy(), this.bg.removeChild(t);
            }));
    }, e.prototype.setFal = function (t) {
        this.drawProgressbar(2, 1, !1), this.wenhaoicon.visible = !1, this.btn1.setLock(),
            this.btn2.setLock();
        var e = new Laya.Image("icon/9.png");
        e.pivotY = e.height, e.pivotX = e.width / 2, e.x = this.roleGirl.x, e.y = this.roleGirl.y - 200,
            t.addChild(e), e.scale(2.2, 2.2), e.zOrder = 999999, this.timer.once(500, this, function () {
                this.btn1.setResult(!1), this.roleGirl.setAttactAni1("2"), Laya.Tween.to(e, {
                    x: e.x + 160
                }, 500, null, null), Laya.Tween.to(this.roleGirl, {
                    x: this.roleGirl.x + 160
                }, 500, null, Laya.Handler.create(this, function () {
                    var t = new Laya.Sprite();
                    t.graphics.drawRect(0, 0, Main.width, 2 * Main.height, "#ffffff"), this.bg.addChild(t),
                        e.visible = !1, this.roleGirl.setAttactAni1("10");
                    var i = 0;
                    wxapi.vibrateShort(), this.timerLoop(20, this, function () {
                        t.graphics.clear(), 0 == i ? t.graphics.drawRect(0, 0, Main.width, 2 * Main.height, "#000000") : 1 == i ? t.graphics.drawRect(0, 0, Main.width, 2 * Main.height, "#ffffff") : 2 == i ? t.graphics.drawRect(0, 0, Main.width, 2 * Main.height, "#000000") : 3 == i ? t.graphics.drawRect(0, 0, Main.width, 2 * Main.height, "#ffffff") : (t.visible = !1,
                            this.timer.clearAll(this), this.roleGirl.setPause(), this.timer.once(500, this, function () {
                                this.btn2.visible = !1, this.btn1.visible = !1, this.gameover();
                            })), i += 1;
                    });
                }));
            });
    }, e.prototype.setOK = function (t) {
        this.drawProgressbar(2, 1, !0), this.wenhaoicon.visible = !1;
        var e = new Laya.Image("icon/10.png");
        e.pivotY = e.height, e.pivotX = e.width / 2, e.x = this.roleGirl.x, e.y = this.roleGirl.y,
            t.addChild(e), e.scale(1.9, 1.9), e.zOrder = 99, this.timer.once(500, this, function () {
                e.visible = !1, this.roleGirl.setAttactAni1("7_2"), this.roleGirl.zOrder = 100,
                    this.btn1.setLock(), this.btn2.setLock(), this.btn2.setResult(!0), Laya.Tween.to(this.roleGirl, {
                        x: Main.width + 60
                    }, 2e3, null, Laya.Handler.create(this, function () {
                        this.roleGirl.setPause(), this.roleGirl.visible = !1, this.timer.once(1e3, this, function () {
                            this.btn2.visible = !1, this.btn1.visible = !1, this.timer.clearAll(this), this.setWinView();
                        });
                    }));
            });
    }, e.prototype.gameover = function () {
        this.addGameOverView(Laya.Handler.create(this, function (t) {
            if (t) {
                this.bg.destroy();
                var i = new e();
                this.addChild(i);
            }
        }));
    }, e;
}(AbstractLevel), __extends = this && this.__extends || function (t, e) {
    function i() {
        this.constructor = t;
    }
    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n]);
    t.prototype = null === e ? Object.create(e) : (i.prototype = e.prototype, new i());
}, LevelView40 = function (t) {
    function e() {
        var e = t.call(this) || this;
        return e.graphics.drawRect(0, 0, Main.width, 2 * Main.height, "#E3DEE4"), e;
    }
    return __extends(e, t), e;
}(AbstractLevel), __extends = this && this.__extends || function (t, e) {
    function i() {
        this.constructor = t;
    }
    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n]);
    t.prototype = null === e ? Object.create(e) : (i.prototype = e.prototype, new i());
}, LevelView5 = function (t) {
    function e() {
        var e = t.call(this) || this;
        e.bg.graphics.drawRect(0, 0, Main.width, 2 * Main.height, "#2a416d");
        var i = new Laya.Sprite();
        e.bg.addChild(i), i.size(Main.width, 540), e.bk = i, i.y = (Main.height - i.height) / 2;
        var n = new Laya.Image("icon/bb.jpg");
        i.addChild(n), i.graphics.drawRect(0, 326, i.width, 100, "#2b524f"), i.graphics.drawRect(0, 426, i.width, 83, "#57617c"),
            n.y = 509, e.bg.graphics.drawRect(0, Main.halfHeight, Main.width, 2 * Main.halfHeight, "#313745"),
            e.init(i);
        var s = new Laya.Image("icon/z2.png");
        i.addChild(s), s.pivotY = s.height, s.pivotX = s.width / 2, s.x = -s.width, s.rotation = 20;
        var a = 0;
        return e.timerLoop(100, e, function () {
            a = (a + 1) % 4, s.y = 1 == a ? 485 : 480;
        }), e.roleGirl.x = 0, e.roleGirl.y = 480, s.y = e.roleGirl.y, e.roleGirl.loadFinishHandler = Laya.Handler.create(e, function () {
            this.roleGirl.setAttactAni1("2"), this.roleGirl.rotation = 15, Laya.Tween.to(this.roleGirl, {
                x: Main.width
            }, 1500, null, Laya.Handler.create(this, this.nextLevel)), Laya.Tween.to(s, {
                x: -30
            }, 300, null, Laya.Handler.create(this, function () { }));
        }), e.btn2.visible = !1, e.btn1.visible = !1, e.timerLoop(60, e, e.onRain), e;
    }
    return __extends(e, t), e.prototype.onRain = function () {
        var t = new Laya.Sprite();
        this.bg.addChild(t), t.graphics.drawLine(0, 0, 0, 3 + Math.floor(30 * Math.random()), "#ffffff", 3),
            t.x = Math.floor(Math.random() * Main.width), Laya.Tween.to(t, {
                y: this.bk.y + this.bk.height - 20
            }, 1e3, null, Laya.Handler.create(this, function () {
                t.destroy(), this.bg.removeChild(t);
            }));
    }, e.prototype.nextLevel = function () {
        var t = new LevelView5_1();
        this.addChild(t), t.x = Main.width, t.handler = this.handler, Laya.Tween.to(t, {
            x: 0
        }, 500, null, Laya.Handler.create(this, function () { })), Laya.Tween.to(this.bg, {
            x: -Main.width
        }, 500, null, Laya.Handler.create(this, function () {
            this.timer.clearAll(this);
        }));
    }, e;
}(AbstractLevel), LevelView5_1 = function (t) {
    function e() {
        var e = t.call(this) || this;
        e.bg.graphics.drawRect(0, 0, Main.width, 2 * Main.height, "#3a1721");
        var i = new Laya.Image("res/z1.png");
        return e.bg.addChild(i), i.width = i.width + 30, i.y = (Main.height - i.height) / 2,
            e.bg.graphics.drawRect(0, 0, Main.width, Main.halfHeight, "#29426c"), e.bg.graphics.drawRect(0, i.y - 150, Main.width, 150, "#3f4c63"),
            e.bg.graphics.drawRect(0, Main.halfHeight, Main.width, 2 * Main.height, "#3a1721"),
            e.init(i), e.roleGirl.x = 190, e.roleGirl.y = 460, e.roleGirl.loadFinishHandler = Laya.Handler.create(e, function () {
                this.roleGirl.setAttactAni1("9");
            }), e.btn1.initAddIcon("icon/z3.png"), e.btn2.initAddIcon("icon/z4.png"), e.btn1.x = Main.halfWidth - (e.btn1.width + 50),
            e.btn1.y = i.height + 50, e.btn2.x = Main.halfWidth + 50, e.btn2.y = e.btn1.y, e.btn1.once(Laya.Event.CLICK, e, function () {
                this.btn1.isLock || this.setOK(i);
            }), e.btn2.once(Laya.Event.CLICK, e, function () {
                this.btn2.isLock || this.setFal(i);
            }),
            e.drawProgressbar(3, -1, !1), e.btn2.visible = !1, e.btn1.visible = !1, e.btn1.scale(0, 0),
            e.btn2.scale(0, 0), tell.setTalkInfoView(["The bandits are about to hit the door", "What should I do?"], e.roleGirl.x, 10, i),
            tell.finishHandler = Laya.Handler.create(e, function () {
                this.btn2.visible = !0, this.btn1.visible = !0, this.wenhaoicon.visible = !0, this.wenhaoicon.pos(this.roleGirl.x - 20, this.roleGirl.y - 370),
                    Laya.Tween.to(this.btn1, {
                        scaleX: 1,
                        scaleY: 1
                    }, 300, null, Laya.Handler.create(this, function () { })), Laya.Tween.to(this.btn2, {
                        scaleX: 1,
                        scaleY: 1
                    }, 300, null, Laya.Handler.create(this, function () { }));
            }), e;
    }
    return __extends(e, t), e.prototype.setFal = function (t) {
        this.drawProgressbar(3, 0, !1), this.wenhaoicon.visible = !1, this.btn1.setLock(),
            this.btn2.setLock();
        var e = new Laya.Image("icon/z4.png");
        e.pivotY = e.height, e.x = 30, e.y = this.roleGirl.y + 50, t.addChild(e), e.scale(1.5, 1.5),
            e.zOrder = 999999, this.timer.once(500, this, function () {
                this.roleGirl.setAttactAni1("5"), this.btn2.setResult(!1), this.timer.once(500, this, function () {
                    this.btn2.visible = !1, this.btn1.visible = !1, this.gameover();
                });
            });
    }, e.prototype.setOK = function (t) {
        this.drawProgressbar(3, 0, !0), this.wenhaoicon.visible = !1, this.btn1.setLock(),
            this.btn2.setLock();
        var e = new Laya.Image("icon/z3.png");
        e.pivotY = e.height, e.x = 30, e.y = this.roleGirl.y + 50, t.addChild(e), e.scale(2.2, 2.2),
            e.zOrder = 999999, this.timer.once(500, this, function () {
                this.roleGirl.setAttactAni1("2"), this.btn1.setResult(!0), Laya.Tween.to(this.roleGirl, {
                    x: Main.width + 120
                }, 2e3, null, Laya.Handler.create(this, function () {
                    this.btn2.visible = !1, this.btn1.visible = !1, this.timer.once(500, this, this.nextLevel);
                }));
            });
    }, e.prototype.gameover = function () {
        this.addGameOverView(Laya.Handler.create(this, function (t) {
            if (t) {
                this.bg.destroy();
                Laya.stage.removeChild(this);
                var i = new e();
                this.addChild(i);
            }
        }));
    }, e.prototype.nextLevel = function () {
        var t = new LevelView5_2();
        this.addChild(t), t.x = Main.width, t.handler = this.handler, Laya.Tween.to(t, {
            x: 0
        }, 500, null, Laya.Handler.create(this, function () { })), Laya.Tween.to(this.bg, {
            x: -Main.width
        }, 500, null, Laya.Handler.create(this, function () { }));
    }, e;
}(AbstractLevel), LevelView5_2 = function (t) {
    function e() {
        var e = t.call(this) || this;
        e.bg.graphics.drawRect(0, 0, Main.width, 2 * Main.height, "#424d61");
        var i = new Laya.Image("res/z1.png");
        e.bg.addChild(i), i.width = i.width + 70, i.x = -40, i.y = (Main.height - i.height) / 2;
        var n = new Laya.Image("icon/li.png");
        i.addChild(n), n.x = i.width / 2, n.y = 90, n.pivotX = n.width / 2, n.zOrder = 99999;
        var s = new Laya.Sprite();
        n.addChild(s), s.graphics.drawPoly(15, 10, [20, 20, 120, 20, 270, 400, -120, 400, 0, 0], "#36cf06"),
            s.alpha = .6;
        var a = new Laya.BlurFilter();
        a.strength = 15;
        var r = new Laya.GlowFilter("#36cf06", 20, 0, 0);
        s.filters = [a, r], e.bg.graphics.drawRect(0, 0, Main.width, Main.halfHeight, "#29426c"),
            e.bg.graphics.drawRect(0, i.y - 150, Main.width, 150, "#3f4c63"), e.bg.graphics.drawRect(0, Main.halfHeight, Main.width, 2 * Main.height, "#3a1721");
        var o = new Laya.Sprite();
        return o.graphics.drawRect(0, 60, Main.width + 100, i.height - 60, "#000000"), i.addChild(o),
            o.alpha = .7, o.zOrder = 9999, e.init(i), e.roleGirl.x = 60, e.roleGirl.y = 460,

            e.drawProgressbar(3, 0, !0), e.btn2.initAddIcon("icon/j4.png"), e.btn1.initAddIcon("icon/j5.png"),
            e.btn1.x = Main.halfWidth - (e.btn1.width + 50), e.btn1.y = i.height + 50, e.btn2.x = Main.halfWidth + 50,
            e.btn2.y = e.btn1.y, e.btn2.once(Laya.Event.CLICK, e, function () {
                this.btn2.isLock || this.setOK(i);
            }), e.btn1.once(Laya.Event.CLICK, e, function () {
                this.btn1.isLock || this.setFal(i);
            }), e.btn2.visible = !1, e.btn1.visible = !1, e.btn1.scale(0, 0), e.btn2.scale(0, 0),
            e.roleGirl.loadFinishHandler = Laya.Handler.create(e, function () {
                this.roleGirl.setAttactAni1("2"), Laya.Tween.to(this.roleGirl, {
                    x: n.x
                }, 1e3, null, Laya.Handler.create(this, function () {
                    this.roleGirl.setAttactAni1("9"), this.roleGirl.zOrder = n.zOrder - 1;
                    tell.setTalkInfoView(["It's so dark and scary", "What should I do?"], this.roleGirl.x, 10, i).zOrder = n.zOrder + 1,
                        tell.finishHandler = Laya.Handler.create(this, function () {
                            this.btn2.visible = !0, this.btn1.visible = !0, this.wenhaoicon.visible = !0, this.wenhaoicon.pos(this.roleGirl.x - 20, this.roleGirl.y - 370),
                                Laya.Tween.to(this.btn1, {
                                    scaleX: 1,
                                    scaleY: 1
                                }, 300, null, Laya.Handler.create(this, function () { })), Laya.Tween.to(this.btn2, {
                                    scaleX: 1,
                                    scaleY: 1
                                }, 300, null, Laya.Handler.create(this, function () { }));
                        });
                }));
            }), e;
    }
    return __extends(e, t), e.prototype.setFal = function (t) {
        this.drawProgressbar(3, 1, !1), this.wenhaoicon.visible = !1, this.btn1.setLock(),
            this.btn2.setLock();
        var e = new Laya.Image("icon/j5.png");
        e.pivotY = e.height, e.pivotX = e.width / 2, e.x = this.roleGirl.x, e.y = this.roleGirl.y - 200,
            t.addChild(e), e.scale(2.2, 2.2), e.zOrder = 999999, this.timer.once(500, this, function () {
                this.btn1.setResult(!1), this.roleGirl.setAttactAni1("2"), Laya.Tween.to(e, {
                    x: e.x + 60
                }, 500, null, null), Laya.Tween.to(this.roleGirl, {
                    x: this.roleGirl.x + 60
                }, 500, null, Laya.Handler.create(this, function () {
                    var t = new Laya.Sprite();
                    t.graphics.drawRect(0, 0, Main.width, 2 * Main.height, "#ffffff"), this.bg.addChild(t),
                        e.visible = !1, this.roleGirl.setAttactAni1("10");
                    var i = 0;
                    this.timerLoop(20, this, function () {
                        t.graphics.clear(), 0 == i ? t.graphics.drawRect(0, 0, Main.width, 2 * Main.height, "#000000") : 1 == i ? t.graphics.drawRect(0, 0, Main.width, 2 * Main.height, "#ffffff") : 2 == i ? t.graphics.drawRect(0, 0, Main.width, 2 * Main.height, "#000000") : 3 == i ? t.graphics.drawRect(0, 0, Main.width, 2 * Main.height, "#ffffff") : (t.visible = !1,
                            this.timer.clearAll(this), this.roleGirl.setPause(), this.timer.once(500, this, function () {
                                this.btn2.visible = !1, this.btn1.visible = !1, this.gameover();
                            })), i += 1;
                    });
                }));
            });
    }, e.prototype.setOK = function (t) {
        this.drawProgressbar(3, 1, !0), this.wenhaoicon.visible = !1, this.btn1.setLock(),
            this.btn2.setLock();
        var e = new Laya.Image("icon/j4.png");
        e.pivotY = e.height, e.x = this.roleGirl.x, e.y = this.roleGirl.y - 50, t.addChild(e),
            e.zOrder = 999999, this.timer.once(500, this, function () {
                e.visible = !1, this.roleGirl.setAttactAni1("2_1"), this.roleGirl.zOrder = 10, this.btn2.setResult(!0);
                var i = new Laya.Sprite();
                t.addChild(i), i.graphics.drawRect(0, 0, 400, 20, "#f9eb0a");
                var n = new Laya.BlurFilter();
                n.strength = 9;
                var s = new Laya.GlowFilter("#f4e4a5", 20, 0, 0);
                i.filters = [n, s], i.x = this.roleGirl.x + 160, i.y = this.roleGirl.y - 120,
                    Laya.Tween.to(i, {
                        x: Main.width + 70
                    }, 2e3, null, null), Laya.Tween.to(this.roleGirl, {
                        x: Main.width + 120
                    }, 2e3, null, Laya.Handler.create(this, function () {
                        this.btn2.visible = !1, this.btn1.visible = !1, this.timer.once(500, this, function () {
                            this.btn2.visible = !1, this.btn1.visible = !1, this.nextLevel();
                        });
                    }));
            });
    }, e.prototype.gameover = function () {
        this.addGameOverView(Laya.Handler.create(this, function (t) {
            if (t) {
                this.bg.destroy();
                Laya.stage.removeChild(this);
                var i = new e();
                this.addChild(i);
            }
        }));
    }, e.prototype.nextLevel = function () {
        var t = new LevelView5_3();
        this.addChild(t), t.x = Main.width, t.handler = this.handler, Laya.Tween.to(t, {
            x: 0
        }, 500, null, Laya.Handler.create(this, function () { })), Laya.Tween.to(this.bg, {
            x: -Main.width
        }, 500, null, Laya.Handler.create(this, function () { }));
    }, e;
}(AbstractLevel), LevelView5_3 = function (t) {
    function e() {
        var e = t.call(this) || this;
        e.bg.graphics.drawRect(0, 0, Main.width, 2 * Main.height, "#29416b");
        var i = new Laya.Image("res/bg5.png");
        e.bg.addChild(i), i.width = i.width + 70, i.x = -40, i.y = (Main.height - i.height) / 2,
            e.bg.graphics.drawRect(0, 0, 83, i.y, "#58636e"), e.bg.graphics.drawRect(0, Main.halfHeight, Main.width, 2 * Main.height, "#3a1721"),
            e.bg.graphics.drawCircle(520, i.y, 262, "#1d3631"), e.init(i), e.roleGirl.x = 60,
            e.roleGirl.y = 460;
        var n = new DogMonster();
        return i.addChild(n), n.initRoleImage(), n.x = Main.width - 160, n.y = e.roleGirl.y,
            e.dog = n,
            e.drawProgressbar(3, 1, !0), e.btn2.initAddIcon("icon/12.png"), e.btn1.initAddIcon("icon/11.png"),
            e.btn1.x = Main.halfWidth - (e.btn1.width + 50), e.btn1.y = i.height + 50, e.btn2.x = Main.halfWidth + 50,
            e.btn2.y = e.btn1.y, e.btn1.once(Laya.Event.CLICK, e, function () {
                this.btn1.isLock || this.setFal(i);
            }), e.btn2.once(Laya.Event.CLICK, e, function () {
                this.btn2.isLock || this.setOK(i);
            }), e.btn2.visible = !1, e.btn1.visible = !1, e.btn1.scale(0, 0), e.btn2.scale(0, 0),
            e.roleGirl.loadFinishHandler = Laya.Handler.create(e, function () {
                this.roleGirl.setAttactAni1("2"), Laya.Tween.to(this.roleGirl, {
                    x: 200
                }, 1e3, null, Laya.Handler.create(this, function () {
                    this.roleGirl.setAttactAni1("9");
                    tell.setTalkInfoView(["Wow, what a fierce dog", "What should I do?"], this.roleGirl.x, 10, i);
                    tell.finishHandler = Laya.Handler.create(this, function () {
                        this.btn2.visible = !0, this.btn1.visible = !0, this.wenhaoicon.visible = !0, this.wenhaoicon.pos(this.roleGirl.x - 20, this.roleGirl.y - 370),
                            Laya.Tween.to(this.btn1, {
                                scaleX: 1,
                                scaleY: 1
                            }, 300, null, Laya.Handler.create(this, function () { })), Laya.Tween.to(this.btn2, {
                                scaleX: 1,
                                scaleY: 1
                            }, 300, null, Laya.Handler.create(this, function () { }));
                    });
                }));
            }), e;
    }
    return __extends(e, t), e.prototype.setFal = function (t) {
        this.drawProgressbar(3, 2, !1), this.wenhaoicon.visible = !1, this.btn1.setLock(),
            this.btn2.setLock();
        var e = new Laya.Image("icon/11.png");
        e.pivotY = e.height, e.x = this.roleGirl.x, e.y = this.roleGirl.y - 50, t.addChild(e),
            e.zOrder = 999999, Laya.Tween.to(e, {
                x: this.dog.x,
                y: this.dog.y
            }, 400, null, Laya.Handler.create(this, function () {
                e.visible = !1, this.dog.setAttactAni1("2"), this.btn1.setResult(!1), this.timer.once(300, this, function () {
                    this.dog.setAttactAni1("1"), this.roleGirl.setAttactAni1("5"), this.dog.setPause(),
                        this.roleGirl.zOrder = 10, this.timer.once(600, this, function () {
                            this.btn2.visible = !1, this.btn1.visible = !1, this.gameover();
                        });
                });
            }));
    }, e.prototype.setOK = function (t) {
        this.drawProgressbar(3, 2, !0), this.wenhaoicon.visible = !1, this.btn1.setLock(),
            this.btn2.setLock();
        var e = new Laya.Image("icon/12.png");
        e.pivotY = e.height, e.x = this.roleGirl.x, e.y = this.roleGirl.y - 50, t.addChild(e),
            e.zOrder = 999999, Laya.Tween.to(e, {
                x: this.dog.x,
                y: this.dog.y
            }, 400, null, Laya.Handler.create(this, function () {
                e.visible = !1, this.dog.setAttactAni1("3"), this.timer.once(300, this, function () {
                    this.btn2.setResult(!0),
                        this.dog.setAttactAni1("4"),
                        Laya.Tween.to(this.dog, { x: 10 }, 1500, null, Laya.Handler.create(this, function () {
                            this.dog.visible = !1,
                                this.roleGirl.setAttactAni1("2"),
                                this.roleGirl.zOrder = 10,
                                Laya.Tween.to(this.roleGirl, { x: Main.width + 170 }, 2e3, null, Laya.Handler.create(this, function () {
                                    this.btn2.visible = !1,
                                        this.btn1.visible = !1,
                                        this.timer.once(500, this, function () {
                                            this.btn2.visible = !1,
                                                this.btn1.visible = !1,
                                                this.setWinView();
                                        });
                                }));
                        }));
                });
            }));
    }, e.prototype.gameover = function () {
        this.addGameOverView(Laya.Handler.create(this, function (t) {
            if (t) {
                // this.bg.destroy();
                // Laya.stage.removeChild(this);
                var e = new LevelView5_3();
                this.addChild(e);
            }
        }));
    }, e;
}(AbstractLevel), __extends = this && this.__extends || function (t, e) {
    function i() {
        this.constructor = t;
    }
    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n]);
    t.prototype = null === e ? Object.create(e) : (i.prototype = e.prototype, new i());
}, LevelView6 = function (t) {
    function e() {
        var e = t.call(this) || this;
        e.bg.graphics.drawRect(0, 0, Main.width, 2 * Main.height, "#d9f6fe");
        var i = new Laya.Image("res/bg6.png");
        e.bg.addChild(i), i.x = 0, i.y = (Main.height - i.height) / 2, i.width = i.width + 40,
            e.bk = i;
        var n = Main.halfHeight - 400;
        e.bg.graphics.drawRect(0, n, Main.width, 2 * Main.height, "#96674b"), e.bg.graphics.drawRect(0, n - 50, Main.width, 50, "#99a8bd");
        for (var s = 0; s < 30; s++) e.bg.graphics.drawLine(0, n + 90 * s, Main.width, n + 90 * s, "#825840", 4),
            s % 2 == 0 ? e.bg.graphics.drawLine(Main.halfWidth, n + 90 * s, Main.halfWidth, n + 90 * s + 90, "#825840", 4) : e.bg.graphics.drawLine(Main.halfWidth + 200, n + 90 * s, Main.halfWidth + 200, n + 90 * s + 90, "#825840", 4);
        return e.init(i), e.roleGirl.x = 80, e.roleGirl.y = 460, e.roleGirl.loadFinishHandler = Laya.Handler.create(e, function () {
            this.roleGirl.setAttactAni1("2"), this.roleGirl.setPause();
        }), e.btn2.visible = !1, e.btn1.visible = !1, e.drawFire(i), e;
    }
    return __extends(e, t), e.prototype.drawFire = function (t) {
        var e = new Laya.Image("icon/fir_1.png");
        t.addChild(e), e.x = 230, e.y = 210, e.scale(.6, .6), this.timer.once(1e3, this, function () {
            for (var e = 0; e < 9; e++) {
                var i = new Laya.Image("icon/fir_1.png");
                t.addChild(i), i.x = 30 + Math.floor(500 * Math.random()), i.y = 290, i.pivotY = i.height;
                var n = .6 + Math.random();
                i.scale(n, n);
            }
            this.roleGirl.zOrder = 999, this.roleGirl.setAttactAni1("2"), Laya.Tween.to(this.roleGirl, {
                x: Main.width + 50
            }, 1500, null, Laya.Handler.create(this, function () {
                this.timer.clearAll(this), this.nextLevel();
            }));
        });
    }, e.prototype.nextLevel = function () {
        var t = new LevelView6_1();
        this.addChild(t), t.x = Main.width, t.handler = this.handler, Laya.Tween.to(t, {
            x: 0
        }, 500, null, Laya.Handler.create(this, function () { })), Laya.Tween.to(this.bg, {
            x: -Main.width
        }, 500, null, Laya.Handler.create(this, function () {
            this.timer.clearAll(this);
        }));
    }, e;
}(AbstractLevel), LevelView6_1 = function (t) {
    function e() {
        var e = t.call(this) || this;
        e.bg.graphics.drawRect(0, 0, Main.width, 2 * Main.height, "#d9f6fe");
        var i = new Laya.Image("res/bg7.png");
        e.bg.addChild(i), i.width = i.width + 30, i.y = (Main.height - i.height) / 2;
        var n = Main.halfHeight - 400;
        e.bg.graphics.drawRect(0, n, Main.width, 2 * Main.height, "#96674b"), e.bg.graphics.drawRect(0, n - 50, Main.width, 50, "#99a8bd");
        var s = new Laya.Sprite();
        i.addChild(s), s.graphics.drawPoly(0, 0, [30, 161, 93, 201, 93, 434, 30, 475, 30, 161], "#ffffff");
        for (o = 0; o < 30; o++) e.bg.graphics.drawLine(0, n + 90 * o, Main.width, n + 90 * o, "#825840", 4),
            o % 2 == 0 ? e.bg.graphics.drawLine(Main.halfWidth, n + 90 * o, Main.halfWidth, n + 90 * o + 90, "#825840", 4) : e.bg.graphics.drawLine(Main.halfWidth + 200, n + 90 * o, Main.halfWidth + 200, n + 90 * o + 90, "#825840", 4);
        var a = new Laya.Image("icon/fir_1.png");
        i.addChild(a), a.pivotY = a.height, a.x = 10, a.y = 266, a.scale(.6, .6), a.alpha = .6;
        var r = new Laya.Image("icon/fir_1.png");
        i.addChild(r), r.pivotY = r.height, r.x = 10, r.y = 376, a.scale(.7, .7), e.init(i),
            e.roleGirl.x = 0, e.roleGirl.y = 460;
        for (var o = 0; o < 30; o++) {
            var h = new Laya.Image("res/yw.png");
            i.addChild(h), h.x = 60 + o % 6 * 110, h.y = 80 + Math.floor(250 * Math.random());
        }
        return e.btn1.initAddIcon("icon/13.png"), e.btn2.initAddIcon("icon/14.png"), e.btn1.x = Main.halfWidth - (e.btn1.width + 50),
            e.btn1.y = i.height + 50, e.btn2.x = Main.halfWidth + 50, e.btn2.y = e.btn1.y, e.btn1.once(Laya.Event.CLICK, e, function () {
                this.btn1.isLock || this.setOK(i);
            }), e.btn2.once(Laya.Event.CLICK, e, function () {
                this.btn2.isLock || this.setFal(i);
            }),
            e.drawProgressbar(3, -1, !1), e.btn2.visible = !1, e.btn1.visible = !1, e.btn1.scale(0, 0),
            e.btn2.scale(0, 0), e.roleGirl.loadFinishHandler = Laya.Handler.create(e, function () {
                this.roleGirl.setAttactAni1("2"), Laya.Tween.to(this.roleGirl, {
                    x: 210
                }, 1500, null, Laya.Handler.create(this, function () {
                    this.roleGirl.setAttactAni1("9"), tell.setTalkInfoView(["Too much smoke", "What should I do?"], this.roleGirl.x, 10, i),
                        tell.finishHandler = Laya.Handler.create(this, function () {
                            this.btn2.visible = !0, this.btn1.visible = !0, this.wenhaoicon.visible = !0, this.wenhaoicon.pos(this.roleGirl.x - 20, this.roleGirl.y - 370),
                                Laya.Tween.to(this.btn1, {
                                    scaleX: 1,
                                    scaleY: 1
                                }, 300, null, Laya.Handler.create(this, function () { })), Laya.Tween.to(this.btn2, {
                                    scaleX: 1,
                                    scaleY: 1
                                }, 300, null, Laya.Handler.create(this, function () { }));
                        });
                }));
            }), e;
    }
    return __extends(e, t), e.prototype.setFal = function (t) {
        this.drawProgressbar(3, 0, !1), this.wenhaoicon.visible = !1, this.btn1.setLock(),
            this.btn2.setLock();
        var e = new Laya.Image("icon/14.png");
        e.pivotY = e.height, e.x = 60, e.y = this.roleGirl.y + 50, t.addChild(e), e.scale(1.5, 1.5),
            this.timerLoop(100, this, function () {
                var i = new Laya.Image("res/yw.png");
                t.addChild(i), i.pos(e.x + e.width, e.y - e.height / 2 - 30), i.pivotX = i.width / 2,
                    i.pivotY = i.height / 2;
                var n = i.x + Math.floor(500 * Math.random()), s = 80 + Math.floor(300 * Math.random());
                i.scale(.3, .3), Laya.Tween.to(i, {
                    x: n,
                    y: s,
                    scaleX: 1,
                    scaleY: 1
                }, 1e3, null, Laya.Handler.create(this, function () {
                    i.destroy();
                }, [i]));
            }), this.timer.once(500, this, function () {
                this.btn2.setResult(!1), this.timer.once(1e3, this, function () {
                    this.btn2.visible = !1, this.btn1.visible = !1, this.gameover();
                });
            });
    }, e.prototype.setOK = function (t) {
        this.drawProgressbar(3, 0, !0), this.wenhaoicon.visible = !1, this.btn1.setLock(),
            this.btn2.setLock();
        var e = new Laya.Image("icon/13.png");
        e.pivotY = e.height, e.x = this.roleGirl.x, e.y = this.roleGirl.y - 150, t.addChild(e),
            e.zOrder = 999999, this.timer.once(500, this, function () {
                e.visible = !1, this.roleGirl.setAttactAni1("2_2"), this.btn1.setResult(!0), Laya.Tween.to(this.roleGirl, {
                    x: Main.width + 120
                }, 2e3, null, Laya.Handler.create(this, function () {
                    this.btn2.visible = !1, this.btn1.visible = !1, this.timer.once(500, this, this.nextLevel);
                }));
            });
    }, e.prototype.gameover = function () {
        this.addGameOverView(Laya.Handler.create(this, function (t) {
            if (t) {
                this.timer.clearAll(this), this.bg.destroy();
                var i = new e();
                this.addChild(i);
            }
        }));
    }, e.prototype.nextLevel = function () {
        var t = new LevelView6_2();
        this.addChild(t),
            t.x = Main.width, t.handler = this.handler, Laya.Tween.to(t, {
                x: 0
            }, 500, null, Laya.Handler.create(this, function () { })), Laya.Tween.to(this.bg, {
                x: -Main.width
            }, 500, null, Laya.Handler.create(this, function () { }));
    }, e;
}(AbstractLevel), LevelView6_2 = function (t) {
    function e() {
        var e = t.call(this) || this;
        e.bg.graphics.drawRect(0, 0, Main.width, 2 * Main.height, "#424d61");
        var i = new Laya.Image("res/bg8.png");
        e.bg.addChild(i),
            i.width = i.width + 70,
            i.x = -40,
            i.y = (Main.height - i.height) / 2;
        var n = Main.halfHeight - 280;
        e.bg.graphics.drawRect(0, n, Main.width, 2 * Main.height, "#96674b"),
            e.bg.graphics.drawRect(0, n - 50, Main.width, 50, "#99a8bd");
        for (var s = 0; s < 30; s++)
            e.bg.graphics.drawLine(0, n + 90 * s, Main.width, n + 90 * s, "#825840", 4),
                s % 2 == 0 ? e.bg.graphics.drawLine(Main.halfWidth, n + 90 * s, Main.halfWidth, n + 90 * s + 90, "#825840", 4) : e.bg.graphics.drawLine(Main.halfWidth + 200, n + 90 * s, Main.halfWidth + 200, n + 90 * s + 90, "#825840", 4);
        var a = new Laya.Sprite();
        return a.graphics.drawRect(0, 60, Main.width + 100, i.height - 60, "#000000"), i.addChild(a),
            a.alpha = .7, a.zOrder = 9999, e.bbbbk = a, e.init(i), e.roleGirl.x = 60, e.roleGirl.y = 460,
            e.drawProgressbar(3, 0, !0), e.btn1.initAddIcon("icon/16.png"), e.btn2.initAddIcon("icon/j4.png"),
            e.btn1.x = Main.halfWidth - (e.btn1.width + 50), e.btn1.y = i.height + 50, e.btn2.x = Main.halfWidth + 50,
            e.btn2.y = e.btn1.y, e.btn2.once(Laya.Event.CLICK, e, function () {
                this.btn2.isLock || this.setOK(i);
            }), e.btn1.once(Laya.Event.CLICK, e, function () {
                this.btn1.isLock || this.setFal(i);
            }), e.btn2.visible = !1, e.btn1.visible = !1, e.btn1.scale(0, 0), e.btn2.scale(0, 0),
            e.roleGirl.loadFinishHandler = Laya.Handler.create(e, function () {
                this.roleGirl.setAttactAni1("2"), Laya.Tween.to(this.roleGirl, {
                    x: Main.halfWidth
                }, 1e3, null, Laya.Handler.create(this, function () {
                    this.roleGirl.setAttactAni1("9"), this.roleGirl.zOrder = 1;
                    tell.setTalkInfoView(["No electricity", "Darkness"], this.roleGirl.x, 10, i).zOrder = a.zOrder + 1,
                        tell.finishHandler = Laya.Handler.create(this, function () {
                            this.btn2.visible = !0, this.btn1.visible = !0, this.wenhaoicon.visible = !0, this.wenhaoicon.pos(this.roleGirl.x - 20, this.roleGirl.y - 370),
                                Laya.Tween.to(this.btn1, {
                                    scaleX: 1,
                                    scaleY: 1
                                }, 300, null, Laya.Handler.create(this, function () { })), Laya.Tween.to(this.btn2, {
                                    scaleX: 1,
                                    scaleY: 1
                                }, 300, null, Laya.Handler.create(this, function () { }));
                        });
                }));
            }), e;
    }
    return __extends(e, t), e.prototype.setFal = function (t) {
        this.drawProgressbar(3, 1, !1), this.wenhaoicon.visible = !1, this.btn1.setLock(),
            this.btn2.setLock();
        var e = new Laya.Image("icon/16.png");
        e.pivotY = e.height, e.pivotX = e.width / 2, e.x = this.roleGirl.x + 50, e.y = this.roleGirl.y - 90,
            t.addChild(e), e.zOrder = 999999, this.timer.once(500, this, function () {
                e.visible = !1, this.btn1.setResult(!1), this.roleGirl.setAttactAni1("5_2"), this.timer.once(300, this, function () {
                    this.btn1.setResult(!1);
                    var i = new Laya.Image("icon/fir_1.png");
                    t.addChild(i), i.pivotY = i.height, i.x = e.x, i.y = e.y, this.bbbbk.visible = !1,
                        Laya.Tween.to(i, {
                            y: i.y + 85
                        }, 300, null, Laya.Handler.create(this, function () {
                            for (var e = 0; e < 3; e++) {
                                var n = new Laya.Image("icon/fir_1.png");
                                t.addChild(n), n.pivotY = n.height, n.x = i.x + 110 * e - 200, n.y = i.y, n.scale(.1, .1),
                                    Laya.Tween.to(n, {
                                        scaleY: 1,
                                        scaleX: 1
                                    }, 500, null, null);
                            }
                            this.roleGirl.setPause(), this.timer.once(600, this, function () {
                                this.btn2.visible = !1, this.btn1.visible = !1, this.gameover();
                            });
                        }));
                });
            });
    }, e.prototype.setOK = function (t) {
        this.drawProgressbar(3, 1, !0), this.wenhaoicon.visible = !1, this.btn1.setLock(),
            this.btn2.setLock();
        var e = new Laya.Image("icon/j4.png");
        e.pivotY = e.height, e.x = this.roleGirl.x, e.y = this.roleGirl.y - 50, t.addChild(e),
            e.zOrder = 999999, this.timer.once(500, this, function () {
                e.visible = !1, this.roleGirl.setAttactAni1("2_1"), this.roleGirl.zOrder = 10, this.btn2.setResult(!0);
                var i = new Laya.Sprite();
                t.addChild(i), i.graphics.drawRect(0, 0, 400, 20, "#f9eb0a");
                var n = new Laya.BlurFilter();
                n.strength = 9;
                var s = new Laya.GlowFilter("#f4e4a5", 20, 0, 0);
                i.filters = [n, s], i.x = this.roleGirl.x + 160, i.y = this.roleGirl.y - 120,
                    Laya.Tween.to(i, {
                        x: Main.width + 70
                    }, 2e3, null, null), Laya.Tween.to(this.roleGirl, {
                        x: Main.width + 120
                    }, 2e3, null, Laya.Handler.create(this, function () {
                        this.btn2.visible = !1, this.btn1.visible = !1, this.timer.once(500, this, function () {
                            this.btn2.visible = !1, this.btn1.visible = !1, this.nextLevel();
                        });
                    }));
            });
    }, e.prototype.gameover = function () {
        this.addGameOverView(Laya.Handler.create(this, function (t) {
            if (t) {
                this.bg.destroy();
                var i = new e();
                this.addChild(i);
            }
        }));
    }, e.prototype.nextLevel = function () {
        var t = new LevelView6_3();
        this.addChild(t), t.x = Main.width, t.handler = this.handler, Laya.Tween.to(t, {
            x: 0
        }, 500, null, Laya.Handler.create(this, function () { })), Laya.Tween.to(this.bg, {
            x: -Main.width
        }, 500, null, Laya.Handler.create(this, function () { }));
    }, e;
}(AbstractLevel), LevelView6_3 = function (t) {
    function e() {
        var e = t.call(this) || this;
        e.bg.graphics.drawRect(0, 0, Main.width, 2 * Main.height, "#c7b881");
        var i = new Laya.Image("res/bg9.png");
        e.bg.addChild(i), i.width = i.width + 70, i.x = -40, i.y = (Main.height - i.height) / 2;
        var n = Main.halfHeight - 280;
        e.bg.graphics.drawRect(0, n, Main.width, 2 * Main.height, "#96674b"), e.bg.graphics.drawRect(0, n - 50, Main.width, 50, "#99a8bd");
        for (s = 0; s < 30; s++) e.bg.graphics.drawLine(0, n + 90 * s, Main.width, n + 90 * s, "#825840", 4),
            s % 2 == 0 ? e.bg.graphics.drawLine(Main.halfWidth, n + 90 * s, Main.halfWidth, n + 90 * s + 90, "#825840", 4) : e.bg.graphics.drawLine(Main.halfWidth + 200, n + 90 * s, Main.halfWidth + 200, n + 90 * s + 90, "#825840", 4);
        for (var s = 0; s < 10; s++) {
            var a = new Laya.Image("res/yw.png");
            i.addChild(a), a.x = 60 + s % 6 * 110, a.y = 80, a.rotation = Math.floor(60 * Math.random()),
                a.zOrder = 9999999;
        }
        return e.init(i), e.roleGirl.x = 60, e.roleGirl.y = 460,
            e.drawProgressbar(3, 1, !0),
            e.btn2.initAddIcon("icon/18.png"), e.btn1.initAddIcon("icon/17.png"), e.btn1.x = Main.halfWidth - (e.btn1.width + 50),
            e.btn1.y = i.height + 50, e.btn2.x = Main.halfWidth + 50, e.btn2.y = e.btn1.y, e.btn1.once(Laya.Event.CLICK, e, function () {
                this.btn1.isLock || this.setOK(i);
            }), e.btn2.once(Laya.Event.CLICK, e, function () {
                this.btn2.isLock || this.setFal(i);
            }), e.btn2.visible = !1, e.btn1.visible = !1, e.btn1.scale(0, 0), e.btn2.scale(0, 0),
            e.roleGirl.loadFinishHandler = Laya.Handler.create(e, function () {
                this.roleGirl.setAttactAni1("2"), Laya.Tween.to(this.roleGirl, {
                    x: 400
                }, 1e3, null, Laya.Handler.create(this, function () {
                    this.roleGirl.setAttactAni1("9");
                    tell.setTalkInfoView(["Smoke can't see clearly", "How to get out?"], this.roleGirl.x, 10, i);
                    tell.finishHandler = Laya.Handler.create(this, function () {
                        this.btn2.visible = !0, this.btn1.visible = !0, this.wenhaoicon.visible = !0, this.wenhaoicon.pos(this.roleGirl.x - 20, this.roleGirl.y - 370),
                            Laya.Tween.to(this.btn1, {
                                scaleX: 1,
                                scaleY: 1
                            }, 300, null, Laya.Handler.create(this, function () { })), Laya.Tween.to(this.btn2, {
                                scaleX: 1,
                                scaleY: 1
                            }, 300, null, Laya.Handler.create(this, function () { }));
                    });
                }));
            }), e;
    }
    return __extends(e, t), e.prototype.setFal = function (t) {
        this.drawProgressbar(3, 2, !1), this.wenhaoicon.visible = !1, this.btn1.setLock(),
            this.btn2.setLock();
        var e = new Laya.Image("icon/18.png");
        e.pivotY = e.height, e.x = this.roleGirl.x, e.y = this.roleGirl.y - 50, t.addChild(e),
            e.zOrder = 999999, this.timer.once(300, this, function () {
                e.visible = !1, this.btn2.setResult(!1), this.roleGirl.setAttactAni1("2_3"), this.roleGirl.zOrder = 999,
                    this.roleGirl.rotation = -90;
                var t = this.roleGirl.y;
                Laya.Tween.to(this.roleGirl, {
                    rotation: -45,
                    y: this.roleGirl.y - 200,
                    x: this.roleGirl.x + 50
                }, 500, null, Laya.Handler.create(this, function () {
                    Laya.Tween.to(this.roleGirl, {
                        rotation: 0,
                        y: t,
                        x: this.roleGirl.x + 50
                    }, 500, null, Laya.Handler.create(this, function () {
                        this.btn2.visible = !1, this.btn1.visible = !1, this.gameover();
                    }));
                }));
            });
    }, e.prototype.setOK = function (t) {
        this.drawProgressbar(3, 2, !0), this.wenhaoicon.visible = !1, this.btn1.setLock(),
            this.btn2.setLock();
        var e = new Laya.Image("icon/a18.png");
        e.pivotY = e.height, e.x = this.roleGirl.x + 80, e.y = this.roleGirl.y, t.addChild(e),
            this.timer.once(300, this, function () {
                this.btn1.setResult(!0), this.roleGirl.setAttactAni1("2-4"), this.roleGirl.zOrder = 999,
                    this.roleGirl.rotation = 20, Laya.Tween.to(this.roleGirl, {
                        y: this.roleGirl.y - 250
                    }, 1500, null, Laya.Handler.create(this, function () {
                        this.roleGirl.setPause(),
                            this.btn2.visible = !1,
                            this.btn1.visible = !1,
                            this.setWinView();
                    }));
            });
    }, e.prototype.gameover = function () {
        this.addGameOverView(Laya.Handler.create(this, function (t) {
            if (t) {
                this.bg.destroy();
                var i = new e();
                this.addChild(i);
            }
        }));
    }, e;
}(AbstractLevel), __extends = this && this.__extends || function (t, e) {
    function i() {
        this.constructor = t;
    }
    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n]);
    t.prototype = null === e ? Object.create(e) : (i.prototype = e.prototype, new i());
}, LevelView7 = function (t) {
    function e() {
        var e = t.call(this) || this;
        e.bg.graphics.drawRect(0, 0, Main.width, 2 * Main.height, "#00caf2");
        var i = new Laya.Image("res/bg11.png");
        e.bg.addChild(i), i.y = (Main.height - i.height) / 2, i.width = i.width + 40, e.bk = i;
        var n = new Laya.Image("res/bg11.png");
        i.addChild(n);
        var s = new Laya.Image("res/bg11.png");
        i.addChild(s), s.x = n.width, e.timerLoop(100, e, function () {
            n.x > -n.width ? n.x -= 20 : n.x = Main.width - 20, s.x > -s.width ? s.x -= 20 : s.x = Main.width - 20;
        });
        var a = Main.height - 100;
        e.bg.graphics.drawRect(0, a, Main.width, 2 * Main.height, "#1083b7"), e.init(i);
        var r = new Laya.Image("bg/ban.png");
        return i.addChild(r), r.pivotY = r.height / 2, r.pivotX = r.width / 2, r.y = Main.halfHeight,
            r.x = 0, e.roleGirl.x = r.x, e.roleGirl.y = r.y, e.roleGirl.zOrder = 999, e.roleGirl.loadFinishHandler = Laya.Handler.create(e, function () {
                this.roleGirl.setAttactAni1("11_2"), Laya.Tween.to(this.roleGirl, {
                    x: Main.width
                }, 2500, null, null), Laya.Tween.to(r, {
                    x: Main.width
                }, 2500, null, Laya.Handler.create(this, function () {
                    this.timer.clearAll(this), this.nextLevel();
                }));
            }), e.btn2.visible = !1, e.btn1.visible = !1, e.timerLoop(60, e, e.onCurRain, [i]),
            e;
    }
    return __extends(e, t), e.prototype.nextLevel = function () {
        var t = new LevelView7_1();
        this.addChild(t), t.x = Main.width, t.handler = this.handler, Laya.Tween.to(t, {
            x: 0
        }, 500, null, Laya.Handler.create(this, function () { })), Laya.Tween.to(this.bg, {
            x: -Main.width
        }, 500, null, Laya.Handler.create(this, function () {
            this.timer.clearAll(this);
        }));
    }, e;
}(AbstractLevel), LevelView7_1 = function (t) {
    function e() {
        var e = t.call(this) || this;
        e.bg.graphics.drawRect(0, 0, Main.width, 2 * Main.height, "#00caf2");
        var i = new Laya.Image("res/bg11.png");
        e.bg.addChild(i), i.y = (Main.height - i.height) / 2, i.width = i.width + 40;
        var n = new Laya.Image("res/bg11.png");
        i.addChild(n);
        var s = new Laya.Image("res/bg11.png");
        i.addChild(s), s.x = n.width, e.timerLoop(100, e, function () {
            n.x > -n.width ? n.x -= 20 : n.x = Main.width - 20, s.x > -s.width ? s.x -= 20 : s.x = Main.width - 20;
        });
        var a = Main.height - 100;
        e.bg.graphics.drawRect(0, a, Main.width, 2 * Main.height, "#1083b7"), e.init(i);
        var r = new Laya.Image("bg/ban.png");
        return i.addChild(r), r.pivotY = r.height / 2, r.pivotX = r.width / 2, r.y = Main.halfHeight,
            r.x = 0, e.ban = r, e.roleGirl.x = r.x, e.roleGirl.y = r.y, e.roleGirl.zOrder = 999,
            e.btn1.initAddIcon("icon/19.png"), e.btn2.initAddIcon("icon/20.png"), e.btn1.x = Main.halfWidth - (e.btn1.width + 50),
            e.btn1.y = Main.halfHeight + 180, e.btn2.x = Main.halfWidth + 50, e.btn2.y = e.btn1.y,
            e.btn1.once(Laya.Event.CLICK, e, function () {
                this.btn1.isLock || this.setOK(i);
            }), e.btn2.once(Laya.Event.CLICK, e, function () {
                this.btn2.isLock || this.setFal(i);
            }),
            e.drawProgressbar(3, -1, !1), e.btn2.visible = !1, e.btn1.visible = !1, e.btn1.scale(0, 0),
            e.btn2.scale(0, 0), e.roleGirl.loadFinishHandler = Laya.Handler.create(e, function () {
                this.roleGirl.setAttactAni1("11_2"), Laya.Tween.to(this.roleGirl, {
                    x: Main.halfWidth
                }, 2500, null, null), Laya.Tween.to(r, {
                    x: Main.halfWidth
                }, 2500, null, Laya.Handler.create(this, function () {
                    tell.setTalkInfoView(["I'm so cold", "It's too cold..."], this.roleGirl.x, this.roleGirl.y - 390, i).zOrder = this.roleGirl.zOrder + 1,
                        tell.finishHandler = Laya.Handler.create(this, function () {
                            this.btn2.visible = !0, this.btn1.visible = !0, this.wenhaoicon.visible = !0, this.wenhaoicon.pos(this.roleGirl.x - 20, this.roleGirl.y - 340),
                                Laya.Tween.to(this.btn1, {
                                    scaleX: 1,
                                    scaleY: 1
                                }, 300, null, Laya.Handler.create(this, function () { })), Laya.Tween.to(this.btn2, {
                                    scaleX: 1,
                                    scaleY: 1
                                }, 300, null, Laya.Handler.create(this, function () { }));
                        });
                }));
            }), e.timerLoop(60, e, e.onCurRain, [i]), e;
    }
    return __extends(e, t), e.prototype.setFal = function (t) {
        this.drawProgressbar(3, 0, !1), this.wenhaoicon.visible = !1, this.btn1.setLock(),
            this.btn2.setLock();
        var e = new Laya.Image("icon/20.png");
        e.pivotY = e.height, e.pivotX = e.width / 2, e.x = this.roleGirl.x, e.y = this.roleGirl.y - 200,
            t.addChild(e), e.scale(2.2, 2.2), e.zOrder = 999999, this.timer.once(500, this, function () {
                this.btn2.setResult(!1), this.roleGirl.setAttactAni1("5"), Laya.Tween.to(this.roleGirl, {
                    x: this.roleGirl.x
                }, 500, null, Laya.Handler.create(this, function () {
                    var t = new Laya.Sprite();
                    t.graphics.drawRect(0, 0, Main.width, 2 * Main.height, "#ffffff"), this.bg.addChild(t),
                        e.visible = !1, this.roleGirl.setAttactAni1("10");
                    var i = 0;
                    wxapi.vibrateShort(), this.timerLoop(20, this, function () {
                        t.graphics.clear(), 0 == i ? t.graphics.drawRect(0, 0, Main.width, 2 * Main.height, "#000000") : 1 == i ? t.graphics.drawRect(0, 0, Main.width, 2 * Main.height, "#ffffff") : 2 == i ? t.graphics.drawRect(0, 0, Main.width, 2 * Main.height, "#000000") : 3 == i ? t.graphics.drawRect(0, 0, Main.width, 2 * Main.height, "#ffffff") : (t.visible = !1,
                            this.timer.clearAll(this), this.roleGirl.setPause(), this.timer.once(500, this, function () {
                                this.btn2.visible = !1, this.btn1.visible = !1, this.gameover();
                            })), i += 1;
                    });
                }));
            });
    }, e.prototype.setOK = function (t) {
        this.drawProgressbar(3, 0, !0), this.wenhaoicon.visible = !1, this.btn1.setLock(),
            this.btn2.setLock();
        var e = new Laya.Image("icon/19.png");
        e.pivotY = e.height, e.pivotX = e.width / 2, e.x = this.ban.width / 2 + 50, e.y = this.ban.height,
            this.ban.addChild(e), e.scale(3, 3), e.zOrder = 999999, Laya.Tween.to(this.roleGirl, {
                alpha: 0,
                scaleX: 0,
                scaleY: 0
            }, 450, null, null), this.timer.once(500, this, function () {
                this.roleGirl.visible = !1, this.btn1.setResult(!0), Laya.Tween.to(this.ban, {
                    x: Main.width + 120
                }, 1e3, null, Laya.Handler.create(this, function () {
                    this.btn2.visible = !1, this.btn1.visible = !1, this.timer.once(500, this, this.nextLevel);
                }));
            });
    }, e.prototype.gameover = function () {
        this.addGameOverView(Laya.Handler.create(this, function (t) {
            if (t) {
                this.timer.clearAll(this), this.bg.destroy();
                var i = new e();
                this.addChild(i);
            }
        }));
    }, e.prototype.nextLevel = function () {
        var t = new LevelView7_2();
        this.addChild(t), t.x = Main.width, t.handler = this.handler, Laya.Tween.to(t, {
            x: 0
        }, 500, null, Laya.Handler.create(this, function () { })), Laya.Tween.to(this.bg, {
            x: -Main.width
        }, 500, null, Laya.Handler.create(this, function () { }));
    }, e;
}(AbstractLevel), LevelView7_2 = function (t) {
    function e() {
        var e = t.call(this) || this;
        e.bg.graphics.drawRect(0, 0, Main.width, 2 * Main.height, "#00caf2");
        var i = new Laya.Image("res/bg11.png");
        e.bg.addChild(i), i.y = (Main.height - i.height) / 2, i.width = i.width + 40;
        var n = new Laya.Image("res/bg11.png");
        i.addChild(n);
        var s = new Laya.Image("res/bg11.png");
        i.addChild(s), 
        s.x = n.width, 
        nw = n.width,
        sw = s.width,
        e.timerLoop(100, e, function () 
        {
            n.x > -nw
            ? n.x -= 20 
            : n.x = Laya.stage.width - 20, 
            s.x > -sw 
            ? s.x -= 20 
            : s.x = Laya.stage.width - 20;
        });
        var a = Main.height - 100;
        e.bg.graphics.drawRect(0, a, Main.width, 2 * Main.height, "#1083b7"), e.init(i);
        var r = new Laya.Image("bg/ban.png");
        return i.addChild(r), 
            r.pivotY = r.height / 2, 
            r.pivotX = r.width / 2, 
            r.y = Main.halfHeight,
            r.x = 0,
            e.ban = r, 
            e.roleGirl.x = r.x, 
            e.roleGirl.y = r.y, 
            e.roleGirl.zOrder = 999,
            e.btn1.initAddIcon("icon/22.png"), 
            e.btn2.initAddIcon("icon/21.png"), 
            e.btn1.x = Main.halfWidth - (e.btn1.width + 50),
            e.btn1.y = Main.halfHeight + 180, 
            e.btn2.x = Main.halfWidth + 50, 
            e.btn2.y = e.btn1.y,
            e.btn1.once(Laya.Event.CLICK, e, function () {
                this.btn1.isLock || this.setFal(i);
            }), e.btn2.once(Laya.Event.CLICK, e, function () {
                this.btn2.isLock || this.setOK(i);
            }),
            e.drawProgressbar(3, 0, !0), 
            e.btn2.visible = !1, 
            e.btn1.visible = !1, 
            e.btn1.scale(0, 0),
            e.btn2.scale(0, 0), 
            e.roleGirl.loadFinishHandler = Laya.Handler.create(e, function () {
                this.roleGirl.setAttactAni1("11_2"), Laya.Tween.to(this.roleGirl, {
                    x: Main.halfWidth
                }, 2500, null, null), Laya.Tween.to(r, {
                    x: Main.halfWidth
                }, 2500, null, Laya.Handler.create(this, function () 
                {
                    tell.setTalkInfoView(["Hungry", "What should I do?"], 
                    this.roleGirl.x, 
                    this.roleGirl.y - 390, i).zOrder = this.roleGirl.zOrder + 1,
                        tell.finishHandler = Laya.Handler.create(this, function () 
                        {
                            this.btn2.visible = !0, 
                            this.btn1.visible = !0, 
                            this.wenhaoicon.visible = !0, 
                            this.wenhaoicon.pos(this.roleGirl.x - 20, this.roleGirl.y - 340),
                                Laya.Tween.to(this.btn1, {
                                    scaleX: 1,
                                    scaleY: 1
                                }, 300, null, Laya.Handler.create(this, function () { })), Laya.Tween.to(this.btn2, {
                                    scaleX: 1,
                                    scaleY: 1
                                }, 300, null, Laya.Handler.create(this, function () { }));
                        });
                }));
            }), e;
    }
    return __extends(e, t), e.prototype.setFal = function (t) {
        this.drawProgressbar(3, 1, !1), this.wenhaoicon.visible = !1, this.btn1.setLock(),
            this.btn2.setLock();
        var e = new Laya.Image("icon/22.png");
        e.pivotY = e.height, e.pivotX = e.width / 2, e.x = this.roleGirl.x + 50, e.y = this.roleGirl.y - 90,
            t.addChild(e), e.scale(2.2, 2.2), e.zOrder = 999999, this.timer.once(300, this, function () {
                e.visible = !1, this.btn1.setResult(!1), this.roleGirl.setAttactAni1("12"), this.timer.once(200, this, function () {
                    this.btn1.setResult(!1), this.roleGirl.setPause();
                    var i = new Laya.Sprite();
                    this.roleGirl.addChild(i), i.graphics.drawLine(0, 0, 200, 0, "#000000", 1), i.y = -100,
                        i.x = 280, i.rotation = 90, this.timer.once(200, this, function () {
                            var n = new Laya.Panel();
                            t.addChild(n), n.zOrder = 9999;
                            var s = new Laya.Image("bg/kl.png");
                            n.addChild(s), n.x = e.x, n.y = e.y + 150 - s.height, n.width = s.width, n.height = s.height,
                                s.y = s.height, Laya.Tween.to(s, {
                                    y: 0
                                }, 300, null, Laya.Handler.create(this, function () {
                                    this.roleGirl.setAttactAni1("11_2"), i.visible = !1, this.timer.once(200, this, function () {
                                        this.btn2.visible = !1, this.btn1.visible = !1, this.gameover();
                                    });
                                }));
                        });
                });
            });
    }, e.prototype.setOK = function (t) {
        this.drawProgressbar(3, 1, !0), this.wenhaoicon.visible = !1, this.btn1.setLock(),
            this.btn2.setLock();
        var e = new Laya.Image("icon/21.png");
        e.pivotY = e.height, e.x = this.roleGirl.x, e.y = this.roleGirl.y - 350, t.addChild(e),
            e.zOrder = 999999, e.scale(2, 2), e.rotation = 110, this.roleGirl.setAttactAni1("12_meat"),
            this.timer.once(200, this, function () {
                this.roleGirl.setAttactAni1("11"), this.btn2.setResult(!0), Laya.Tween.to(e, {
                    x: this.roleGirl.x + 100,
                    y: this.roleGirl.y - 100
                }, 200, null, Laya.Handler.create(this, function () {
                    var t = new Laya.Image("icon/2_1.png");
                    t.x = 40, e.addChild(t), Laya.Tween.to(e, {
                        rotation: 40,
                        x: this.roleGirl.x - 70,
                        y: this.roleGirl.y
                    }, 100, null, Laya.Handler.create(this, function () {
                        this.btn2.visible = !1, this.btn1.visible = !1, this.timer.once(500, this, function () {
                            e.visible = !1, this.btn2.visible = !1, this.btn1.visible = !1, Laya.Tween.to(this.ban, {
                                x: this.ban.x + 400
                            }, 300, null, null), Laya.Tween.to(this.roleGirl, {
                                x: this.roleGirl.x + 400
                            }, 300, null, Laya.Handler.create(this, function () {
                                this.nextLevel();
                            }));
                        });
                    }));
                }));
            });
    }, e.prototype.gameover = function () {
        this.addGameOverView(Laya.Handler.create(this, function (t) {
            if (t) {
                this.bg.destroy();
                var i = new e();
                this.addChild(i);
            }
        }));
    }, e.prototype.nextLevel = function () {
        var t = new LevelView7_3();
        this.addChild(t), t.x = Main.width, t.handler = this.handler, Laya.Tween.to(t, {
            x: 0
        }, 500, null, Laya.Handler.create(this, function () { })), Laya.Tween.to(this.bg, {
            x: -Main.width
        }, 500, null, Laya.Handler.create(this, function () { }));
    }, e;
}(AbstractLevel), LevelView7_3 = function (t) {
    function e() {
        var e = t.call(this) || this;
        e.bg.graphics.drawRect(0, 0, Main.width, 2 * Main.height, "#00caf2");
        var i = new Laya.Image("res/bg11.png");
        e.bg.addChild(i), i.y = (Main.height - i.height) / 2, i.width = i.width + 40;
        var n = new Laya.Image("res/bg11.png");
        i.addChild(n);
        var s = new Laya.Image("res/bg11.png");
        i.addChild(s), 
        s.x = n.width, 
        sw = s.width,
        nw = n.width,
        e.timerLoop(100, e, function () 
        {
            n.x > -nw ? n.x -= 20 : n.x = Main.width - 20, 
            s.x > -sw ? s.x -= 20 : s.x = Main.width - 20;
        });
        var a = Main.height - 100;
        e.bg.graphics.drawRect(0, a, Main.width, 2 * Main.height, "#1083b7"), e.init(i);
        var r = new Laya.Image("bg/ban.png");
        i.addChild(r), r.pivotY = r.height / 2, r.pivotX = r.width / 2, r.y = Main.halfHeight,
            r.x = 0, e.ban = r;
        var o = new Laya.Image("bg/sy.png");
        return i.addChild(o), o.x = Main.width, o.y = Main.halfHeight, e.fish = o, e.roleGirl.x = r.x,
            e.roleGirl.y = r.y, e.roleGirl.zOrder = 999,
            e.drawProgressbar(3, 1, !0), e.btn1.initAddIcon("icon/12.png"),
            e.btn2.initAddIcon("icon/24.png"), e.btn1.x = Main.halfWidth - (e.btn1.width + 50),
            e.btn1.y = Main.halfHeight + 180, e.btn2.x = Main.halfWidth + 50, e.btn2.y = e.btn1.y,
            e.btn1.once(Laya.Event.CLICK, e, function () {
                this.btn1.isLock || this.setOK(i);
            }), e.btn2.once(Laya.Event.CLICK, e, function () {
                this.btn2.isLock || this.setFal(i);
            }), e.btn2.visible = !1, e.btn1.visible = !1, e.btn1.scale(0, 0), e.btn2.scale(0, 0),
            e.roleGirl.loadFinishHandler = Laya.Handler.create(e, function () {
                this.roleGirl.setAttactAni1("11_2"), Laya.Tween.to(o, {
                    x: Main.halfWidth
                }, 1e3, null, null), Laya.Tween.to(this.roleGirl, {
                    x: this.roleGirl.x + 260
                }, 2500, null, null), Laya.Tween.to(r, {
                    x: r.x + 260
                }, 2500, null, Laya.Handler.create(this, function () {
                    tell.setTalkInfoView(["Ah, the shark is here", "What should I do?"], this.roleGirl.x, this.roleGirl.y - 390, i).zOrder = this.roleGirl.zOrder + 1,
                        tell.finishHandler = Laya.Handler.create(this, function () {
                            this.btn2.visible = !0, this.btn1.visible = !0, this.wenhaoicon.visible = !0, this.wenhaoicon.pos(this.roleGirl.x - 20, this.roleGirl.y - 340),
                                Laya.Tween.to(this.btn1, {
                                    scaleX: 1,
                                    scaleY: 1
                                }, 300, null, Laya.Handler.create(this, function () { })), Laya.Tween.to(this.btn2, {
                                    scaleX: 1,
                                    scaleY: 1
                                }, 300, null, Laya.Handler.create(this, function () { }));
                        });
                }));
            }), e;
    }
    return __extends(e, t), e.prototype.setFal = function (t) {
        this.drawProgressbar(3, 2, !1), this.wenhaoicon.visible = !1, this.btn1.setLock(),
            this.btn2.setLock();
        var e = new Laya.Image("icon/24.png");
        e.pivotY = e.height, e.x = this.roleGirl.x, e.y = this.roleGirl.y - 50, t.addChild(e),
            e.zOrder = 999999, this.timer.once(300, this, function () {
                e.visible = !1, this.btn2.setResult(!1), this.roleGirl.setAttactAni1("12_gun"),
                    this.roleGirl.zOrder = 999;
                this.roleGirl.y;
                this.timer.once(300, this, function () {
                    this.roleGirl.setPause();
                    var t = new Laya.Sprite();
                    this.roleGirl.addChild(t), t.graphics.drawLine(0, 0, 200, 0, "#000000", 2), t.y = -120,
                        t.x = 150, t.rotation = 70, this.timer.once(200, this, function () {
                            t.visible = !1, this.fish.scaleX = -1, Laya.Tween.to(this.roleGirl, {
                                rotation: 20,
                                x: this.roleGirl.x + 170,
                                y: this.roleGirl.y + 60
                            }, 200, null, Laya.Handler.create(this, function () {
                                this.roleGirl.visible = !1;
                            })), Laya.Tween.to(this.fish, {
                                x: Main.width + 270
                            }, 600, null, Laya.Handler.create(this, function () {
                                this.btn2.visible = !1, this.btn1.visible = !1, this.gameover();
                            }));
                        });
                });
            });
    }, e.prototype.setOK = function (t) {
        this.drawProgressbar(3, 2, !0), this.wenhaoicon.visible = !1, this.btn1.setLock(),
            this.btn2.setLock();
        var e = new Laya.Image("icon/12.png");
        e.pivotY = e.height, e.x = this.roleGirl.x, e.y = this.roleGirl.y - 350, t.addChild(e),
            e.zOrder = 999999, e.rotation = 110, this.roleGirl.setAttactAni1("12_meat"), this.timer.once(200, this, function () {
                this.roleGirl.setAttactAni1("11"), this.btn1.setResult(!0), Laya.Tween.to(e, {
                    x: this.roleGirl.x + 360,
                    y: this.roleGirl.y
                }, 200, null, Laya.Handler.create(this, function () {
                    e.visible = !1, this.fish.scaleX = -1, Laya.Tween.to(this.fish, {
                        x: Main.width + 270
                    }, 600, null, Laya.Handler.create(this, function () {
                        this.fish.visible = !1, this.btn2.visible = !1, this.btn1.visible = !1, this.timer.once(500, this, function () {
                            e.visible = !1, this.btn2.visible = !1, this.btn1.visible = !1, Laya.Tween.to(this.ban, {
                                x: this.ban.x + 700
                            }, 700, null, null), Laya.Tween.to(this.roleGirl, {
                                x: this.roleGirl.x + 700
                            }, 700, null, Laya.Handler.create(this, function () {
                                this.setWinView();
                            }));
                        });
                    }));
                }));
            });
    }, e.prototype.gameover = function () {
        this.addGameOverView(Laya.Handler.create(this, function (t) {
            if (t) {
                this.bg.destroy();
                var i = new e();
                this.addChild(i);
            }
        }));
    }, e;
}(AbstractLevel), __extends = this && this.__extends || function (t, e) {
    function i() {
        this.constructor = t;
    }
    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n]);
    t.prototype = null === e ? Object.create(e) : (i.prototype = e.prototype, new i());
}, LevelView8 = function (t) {
    function e() {
        var e = t.call(this) || this;
        e.bg.graphics.drawRect(0, 0, Main.width, 2 * Main.height, "#00caf2");
        var i = new Laya.Image("res/bg11.png");
        e.bg.addChild(i), i.y = (Main.height - i.height) / 2, i.width = i.width + 40, e.bk = i;
        var n = new Laya.Image("res/bg11.png");
        i.addChild(n);
        var s = new Laya.Image("res/bg11.png");
        i.addChild(s), s.x = n.width, e.timerLoop(100, e, function () {
            n.x > -n.width ? n.x -= 20 : n.x = Main.width - 20, s.x > -s.width ? s.x -= 20 : s.x = Main.width - 20;
        });
        var a = Main.height - 100;
        e.bg.graphics.drawRect(0, a, Main.width, 2 * Main.height, "#1083b7"), e.init(i);
        var r = new Laya.Image("bg/ban.png");
        return i.addChild(r), r.pivotY = r.height / 2, r.pivotX = r.width / 2, r.y = Main.halfHeight,
            r.x = 0, e.roleGirl.x = r.x, e.roleGirl.y = r.y, e.roleGirl.zOrder = 999, e.roleGirl.loadFinishHandler = Laya.Handler.create(e, function () {
                this.roleGirl.setAttactAni1("11_2"), Laya.Tween.to(this.roleGirl, {
                    x: Main.width
                }, 2500, null, null), Laya.Tween.to(r, {
                    x: Main.width
                }, 2500, null, Laya.Handler.create(this, function () {
                    this.timer.clearAll(this), this.nextLevel();
                }));
            }), e.btn2.visible = !1, e.btn1.visible = !1, e;
    }
    return __extends(e, t), e.prototype.nextLevel = function () {
        var t = new LevelView8_1();
        this.addChild(t), t.x = Main.width, t.handler = this.handler, Laya.Tween.to(t, {
            x: 0
        }, 500, null, Laya.Handler.create(this, function () { })), Laya.Tween.to(this.bg, {
            x: -Main.width
        }, 500, null, Laya.Handler.create(this, function () {
            this.timer.clearAll(this);
        }));
    }, e;
}(AbstractLevel), LevelView8_1 = function (t) {
    function e() {
        var e = t.call(this) || this;
        e.bg.graphics.drawRect(0, 0, Main.width, 2 * Main.height, "#00caf2");
        var i = new Laya.Image("res/bg12.png");
        e.bg.addChild(i), i.y = (Main.height - i.height) / 2, i.width = i.width + 40;
        var n = new Laya.Image("icon/yz.png");
        i.addChild(n), n.pivotX = n.width / 2, n.pivotY = n.height / 2, n.x = 468, n.y = 590,
            e.yzicon = n;
        var s = Main.height - 100;
        e.bg.graphics.drawRect(0, s, Main.width, 2 * Main.height, "#1083b7"), e.init(i);
        var a = new Laya.Image("bg/ban.png");
        return i.addChild(a), a.pivotY = a.height / 2, a.pivotX = a.width, a.y = Main.halfHeight,
            a.x = 0, e.ban = a, e.roleGirl.x = a.x, e.roleGirl.y = a.y, e.roleGirl.zOrder = 999,
            e.btn1.initAddIcon("icon/26.png"), e.btn2.initAddIcon("icon/25.png"), e.btn1.x = Main.halfWidth - (e.btn1.width + 50),
            e.btn1.y = Main.halfHeight + 250, e.btn2.x = Main.halfWidth + 50, e.btn2.y = e.btn1.y,
            e.btn1.once(Laya.Event.CLICK, e, function () {
                this.btn1.isLock || this.setFal(i);
            }), e.btn2.once(Laya.Event.CLICK, e, function () {
                this.btn2.isLock || this.setOK(i);
            }),
            e.drawProgressbar(3, -1, !1), e.btn2.visible = !1, e.btn1.visible = !1, e.btn1.scale(0, 0),
            e.btn2.scale(0, 0), e.roleGirl.loadFinishHandler = Laya.Handler.create(e, function () {
                this.roleGirl.setAttactAni1("2"), Laya.Tween.to(a, {
                    x: 170
                }, 500, null, null), Laya.Tween.to(this.roleGirl, {
                    x: 300,
                    y: this.roleGirl.y + 160
                }, 2500, null, Laya.Handler.create(this, function () {
                    this.roleGirl.setAttactAni1("9");
                    tell.setTalkInfoView(["Super handsome coconut tree", "Just thirsty"], this.roleGirl.x, this.roleGirl.y - 390, i).zOrder = this.roleGirl.zOrder + 1,
                        tell.finishHandler = Laya.Handler.create(this, function () {
                            this.btn2.visible = !0, this.btn1.visible = !0, this.wenhaoicon.visible = !0, this.wenhaoicon.pos(this.roleGirl.x - 20, this.roleGirl.y - 370),
                                Laya.Tween.to(this.btn1, {
                                    scaleX: 1,
                                    scaleY: 1
                                }, 300, null, Laya.Handler.create(this, function () { })), Laya.Tween.to(this.btn2, {
                                    scaleX: 1,
                                    scaleY: 1
                                }, 300, null, Laya.Handler.create(this, function () { }));
                        });
                }));
            }), e;
    }
    return __extends(e, t), e.prototype.setFal = function (t) {
        this.drawProgressbar(3, 0, !1), this.wenhaoicon.visible = !1, this.btn1.setLock(),
            this.btn2.setLock();
        var e = new Laya.Image("icon/26.png");
        e.pivotY = e.height, e.pivotX = e.width / 2, e.x = this.roleGirl.x + 100, e.y = this.roleGirl.y - 200,
            t.addChild(e), e.scale(1.2, 1.2), e.zOrder = 999999, this.timer.once(500, this, function () {
                e.visible = !1, this.btn1.setResult(!1), this.roleGirl.setAttactAni1("6_5"), this.timer.once(200, this, function () {
                    this.roleGirl.setAttactAni1("9"), e.visible = !0, e.x = e.x + 100, e.y = e.y - 50,
                        Laya.Tween.to(e, {
                            x: Main.width + 80,
                            y: e.y - 200
                        }, 300, null, Laya.Handler.create(this, function () {
                            Laya.Tween.to(e, {
                                rotation: 180,
                                x: Main.width - 100,
                                y: this.roleGirl.y - 120
                            }, 300, null, Laya.Handler.create(this, function () {
                                this.btn2.visible = !1, this.btn1.visible = !1, this.gameover();
                            }));
                        }));
                });
            });
    }, e.prototype.setOK = function (t) {
        this.drawProgressbar(3, 0, !0), this.wenhaoicon.visible = !1, this.btn1.setLock(),
            this.btn2.setLock();
        var e = new Laya.Image("icon/25.png");
        e.pivotY = e.height / 2, e.pivotX = e.width / 2, e.x = this.roleGirl.x, e.y = this.roleGirl.y - 200,
            t.addChild(e), e.zOrder = 999999, this.timer.once(500, this, function () {
                e.visible = !1, this.btn2.setResult(!0), this.roleGirl.setAttactAni1("6_4"), this.timer.once(500, this, function () {
                    this.roleGirl.setAttactAni1("11"), Laya.Tween.to(this.yzicon, {
                        y: this.yzicon.y + 180
                    }, 400, Laya.Ease.bounceOut, Laya.Handler.create(this, function () {
                        this.btn2.visible = !1, this.btn1.visible = !1;
                        var e = new Laya.Sprite();
                        t.addChild(e), e.x = this.yzicon.x - 120, e.y = this.yzicon.y - 80, e.zOrder = this.roleGirl.zOrder + 1,
                            e.graphics.drawLine(0, 0, 90, 80, "#ffffff", 9), this.timer.once(600, this, function () {
                                e.visible = !1, this.roleGirl.setAttactAni1("2"), Laya.Tween.to(this.roleGirl, {
                                    x: Main.width + 200
                                }, 1e3, null, Laya.Handler.create(this, function () {
                                    this.roleGirl.visible = !1, this.nextLevel();
                                }));
                            });
                    }));
                });
            });
    }, e.prototype.gameover = function () {
        this.addGameOverView(Laya.Handler.create(this, function (t) {
            if (t) {
                this.timer.clearAll(this), this.bg.destroy();
                var i = new e();
                this.addChild(i);
            }
        }));
    }, e.prototype.nextLevel = function () {
        var t = new LevelView8_2();
        this.addChild(t), t.x = Main.width, t.handler = this.handler, Laya.Tween.to(t, {
            x: 0
        }, 500, null, Laya.Handler.create(this, function () { })), Laya.Tween.to(this.bg, {
            x: -Main.width
        }, 500, null, Laya.Handler.create(this, function () { }));
    }, e;
}(AbstractLevel), LevelView8_2 = function (t) {
    function e() {
        var e = t.call(this) || this;
        e.bg.graphics.drawRect(0, 0, Main.width, 2 * Main.height, "#0f87bc");
        var i = new Laya.Image("res/bg13.png");
        e.bg.addChild(i), i.y = (Main.height - i.height) / 2, i.width = i.width + 40;
        var n = Main.height - 100;
        e.bg.graphics.drawRect(0, n, Main.width, 2 * Main.height, "#1083b7"), e.init(i),
            e.roleGirl.x = 0, e.roleGirl.y = Main.halfHeight + 100, e.roleGirl.zOrder = 999;
        var s = new PdMonster();
        return i.addChild(s), e.m = s, s.initRoleImage(), s.x = Main.width, s.y = e.roleGirl.y,
            s.loadFinishHandler = Laya.Handler.create(e, function () {
                s.setAttactAni1("1_3"), Laya.Tween.to(s, {
                    x: Main.halfWidth + 150
                }, 2500, null, Laya.Handler.create(this, function () {
                    s.setAttactAni1("1_2");
                }));
            }), e.btn1.initAddIcon("icon/28.png"), e.btn2.initAddIcon("icon/27.png"), e.btn1.x = Main.halfWidth - (e.btn1.width + 50),
            e.btn1.y = Main.halfHeight + 180, e.btn2.x = Main.halfWidth + 50, e.btn2.y = e.btn1.y,
            e.btn1.once(Laya.Event.CLICK, e, function () {
                this.btn1.isLock || this.setOK(i);
            }), e.btn2.once(Laya.Event.CLICK, e, function () {
                this.btn2.isLock || this.setFal(i);
            }),
            e.drawProgressbar(3, 0, !0), e.btn2.visible = !1, e.btn1.visible = !1, e.btn1.scale(0, 0),
            e.btn2.scale(0, 0), e.roleGirl.loadFinishHandler = Laya.Handler.create(e, function () {
                this.roleGirl.setAttactAni1("2"), Laya.Tween.to(this.roleGirl, {
                    x: Main.halfWidth - 150
                }, 2500, null, Laya.Handler.create(this, function () {
                    this.roleGirl.setAttactAni1("9");
                    tell.setTalkInfoView(["I can't understand what to say", "What should I do?"], this.roleGirl.x, this.roleGirl.y - 390, i).zOrder = this.roleGirl.zOrder + 1,
                        tell.finishHandler = Laya.Handler.create(this, function () {
                            this.btn2.visible = !0, this.btn1.visible = !0, this.wenhaoicon.visible = !0, this.wenhaoicon.pos(this.roleGirl.x - 20, this.roleGirl.y - 370),
                                Laya.Tween.to(this.btn1, {
                                    scaleX: 1,
                                    scaleY: 1
                                }, 300, null, Laya.Handler.create(this, function () { })), Laya.Tween.to(this.btn2, {
                                    scaleX: 1,
                                    scaleY: 1
                                }, 300, null, Laya.Handler.create(this, function () { }));
                        });
                }));
            }), e;
    }
    return __extends(e, t), e.prototype.setFal = function (t) {
        this.drawProgressbar(3, 1, !1), this.wenhaoicon.visible = !1, this.btn1.setLock(),
            this.btn2.setLock();
        var e = new Laya.Image("icon/27.png");
        e.pivotY = e.height, e.pivotX = e.width / 2, e.x = this.m.x - 50, e.y = this.m.y - 90,
            t.addChild(e), e.scale(.6, .6), e.zOrder = 999999, this.timer.once(300, this, function () {
                e.visible = !1, this.btn2.setResult(!1), this.m.setAttactAni1("1_5"), this.roleGirl.setAttactAni1("5"),
                    this.timer.once(200, this, function () {
                        this.btn2.setResult(!1), this.roleGirl.setPause();
                        var i = new Laya.Sprite();
                        this.roleGirl.addChild(i), i.graphics.drawLine(0, 0, 200, 0, "#000000", 1), i.y = -100,
                            i.x = 280, i.rotation = 90, this.timer.once(200, this, function () {
                                this.m.setAttactAni1("1_2");
                                var n = new Laya.Image("icon/27.png");
                                t.addChild(n), n.scale(.6, .6), n.x = e.x, n.y = e.y, Laya.Tween.to(n, {
                                    y: n.y + 80,
                                    x: n.x - 100
                                }, 300, Laya.Ease.bounceOut, Laya.Handler.create(this, function () {
                                    this.roleGirl.setAttactAni1("11_2"), i.visible = !1, this.timer.once(200, this, function () {
                                        this.btn2.visible = !1, this.btn1.visible = !1, this.gameover();
                                    });
                                }));
                            });
                    });
            });
    }, e.prototype.setOK = function (t) {
        this.drawProgressbar(3, 1, !0), this.wenhaoicon.visible = !1, this.btn1.setLock(),
            this.btn2.setLock();
        var e = new Laya.Image("icon/28.png");
        e.pivotY = e.height, e.x = this.m.x - 50, e.y = this.m.y - 90, t.addChild(e), e.zOrder = 999999,
            e.scale(.7, .7), this.timer.once(200, this, function () {
                e.visible = !1, this.m.setAttactAni1("1_4"), this.timer.once(500, this, function () {
                    this.btn1.setResult(!0), this.timer.once(500, this, function () {
                        this.m.setPause(), this.btn2.visible = !1, this.btn1.visible = !1, this.roleGirl.setAttactAni1("2"),
                            Laya.Tween.to(this.roleGirl, {
                                x: this.roleGirl.x + 400,
                                y: this.roleGirl.y + 60
                            }, 1e3, null, Laya.Handler.create(this, function () {
                                this.roleGirl.visible = !1;
                                this.nextLevel();
                            }));
                    });
                });
            });
    }, e.prototype.gameover = function () {
        this.addGameOverView(Laya.Handler.create(this, function (t) {
            if (t) {
                this.bg.destroy();
                var i = new e();
                this.addChild(i);
            }
        }));
    }, e.prototype.nextLevel = function () {
        var t = new LevelView8_3();
        this.addChild(t), t.x = Main.width, t.handler = this.handler, Laya.Tween.to(t, {
            x: 0
        }, 500, null, Laya.Handler.create(this, function () { })), Laya.Tween.to(this.bg, {
            x: -Main.width
        }, 500, null, Laya.Handler.create(this, function () { }));
    }, e;
}(AbstractLevel), LevelView8_3 = function (t) {
    function e() {
        var e = t.call(this) || this;
        e.bg.graphics.drawRect(0, 0, Main.width, 2 * Main.height, "#0f87bc");
        var i = new Laya.Image("res/bg14.png");
        e.bg.addChild(i), i.y = (Main.height - i.height) / 2, i.width = i.width + 40, e.init(i);
        var n = new Laya.Image("bg/14_3.png");
        return i.addChild(n), n.pivotY = n.height / 2, n.pivotX = n.width / 2, n.y = Main.halfHeight - 500,
            n.x = Main.width, n.scale(.2, .2), e.fly = n, Laya.Tween.to(n, {
                x: Main.halfWidth,
                y: Main.halfHeight - 300,
                scaleX: 1,
                scaleY: 1
            }, 3e3, null, Laya.Handler.create(e, function () { })), e.roleGirl.x = 0, e.roleGirl.y = Main.halfHeight + 100,
            e.roleGirl.zOrder = 999,
            e.drawProgressbar(3, 1, !0), e.btn1.initAddIcon("icon/30.png"),
            e.btn2.initAddIcon("icon/29.png"), e.btn1.x = Main.halfWidth - (e.btn1.width + 50),
            e.btn1.y = Main.halfHeight + 180, e.btn2.x = Main.halfWidth + 50, e.btn2.y = e.btn1.y,
            e.btn1.once(Laya.Event.CLICK, e, function () {
                this.btn1.isLock || this.setFal(i);
            }), e.btn2.once(Laya.Event.CLICK, e, function () {
                this.btn2.isLock || this.setOK(i);
            }), e.btn2.visible = !1, e.btn1.visible = !1, e.btn1.scale(0, 0), e.btn2.scale(0, 0),
            e.roleGirl.loadFinishHandler = Laya.Handler.create(e, function () {
                this.roleGirl.setAttactAni1("2"), Laya.Tween.to(this.roleGirl, {
                    x: 150
                }, 2500, null, Laya.Handler.create(this, function () {
                    this.roleGirl.setAttactAni1("12_meat");
                    tell.setTalkInfoView(["help me!", "Save me! Save me!"], this.roleGirl.x, this.roleGirl.y - 390, i).zOrder = this.roleGirl.zOrder + 1,
                        tell.finishHandler = Laya.Handler.create(this, function () {
                            this.roleGirl.setAttactAni1("9"), this.btn2.visible = !0, this.btn1.visible = !0,
                                this.wenhaoicon.visible = !0, this.wenhaoicon.pos(this.roleGirl.x - 20, this.roleGirl.y - 370),
                                Laya.Tween.to(this.btn1, {
                                    scaleX: 1,
                                    scaleY: 1
                                }, 300, null, Laya.Handler.create(this, function () { })), Laya.Tween.to(this.btn2, {
                                    scaleX: 1,
                                    scaleY: 1
                                }, 300, null, Laya.Handler.create(this, function () { }));
                        });
                }));
            }), e;
    }
    return __extends(e, t), e.prototype.setFal = function (t) {
        this.drawProgressbar(3, 2, !1), this.wenhaoicon.visible = !1, this.btn1.setLock(),
            this.btn2.setLock();
        var e = new Laya.Image("icon/30.png");
        e.pivotX = e.width / 2, e.pivotY = e.height / 2, e.x = this.roleGirl.x, e.y = this.roleGirl.y + 50,
            t.addChild(e), e.zOrder = 999999, Laya.Tween.to(e, {
                y: -260
            }, 300, null, Laya.Handler.create(this, function () {
                e.rotation = 180, Laya.Tween.to(e, {
                    y: this.fly.y,
                    x: this.fly.x
                }, 300, null, Laya.Handler.create(this, function () {
                    e.visible = !1, this.btn1.setResult(!1);
                    var i = new Laya.Image("bg/14_4.png");
                    t.addChild(i), i.pivotX = i.width / 2, i.pivotY = i.height / 2, i.pos(e.x, e.y),
                        i.scale(0, 0), Laya.Tween.to(i, {
                            scaleX: 2,
                            scaleY: 2
                        }, 200, null, Laya.Handler.create(this, function () {
                            i.visible = !1, this.fly.visible = !1, this.roleGirl.setAttactAni1("11_2"), this.timer.once(400, this, function () {
                                this.btn2.visible = !1, this.btn1.visible = !1, this.gameover();
                            });
                        }));
                }));
            }));
    }, e.prototype.setOK = function (t) {
        this.drawProgressbar(3, 2, !0), this.wenhaoicon.visible = !1, this.btn1.setLock(),
            this.btn2.setLock();
        var e = new Laya.Image("icon/29.png");
        e.pivotY = e.height, e.x = this.roleGirl.x + 80, e.y = this.roleGirl.y, t.addChild(e),
            e.zOrder = 999999, this.timer.once(200, this, function () {
                Laya.Tween.to(this.fly, {
                    x: Main.halfWidth,
                    y: Main.halfHeight - 200,
                    scaleX: 2,
                    scaleY: 2
                }, 200, null, Laya.Handler.create(this, function () {
                    e.visible = !1, this.btn2.setResult(!0);
                    var i = new Laya.Image("icon/a18.png");
                    t.addChild(i), i.pivotX = i.width / 2, i.x = this.fly.x, i.y = this.fly.y, i.scale(.5, .5),
                        this.roleGirl.setAttactAni1("2-4"), this.roleGirl.x = this.roleGirl.x + 120, this.roleGirl.y = this.roleGirl.y - 70,
                        this.roleGirl.scale(.6, .6), Laya.Tween.to(this.roleGirl, {
                            x: this.roleGirl.x + 70,
                            y: this.roleGirl.y - 50
                        }, 700, null, Laya.Handler.create(this, function () {
                            this.btn2.visible = !1, this.btn1.visible = !1, this.roleGirl.setPause(), this.setWinView();
                        }));
                }));
            });
    }, e.prototype.gameover = function () {
        this.addGameOverView(Laya.Handler.create(this, function (t) {
            if (t) {
                this.bg.destroy();
                var i = new e();
                this.addChild(i);
            }
        }));
    }, e;
}(AbstractLevel), __extends = this && this.__extends || function (t, e) {
    function i() {
        this.constructor = t;
    }
    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n]);
    t.prototype = null === e ? Object.create(e) : (i.prototype = e.prototype, new i());
}, LevelView9 = function (t) {
    function e() {
        var e = t.call(this) || this;
        e.bg.graphics.drawRect(0, 0, Main.width, 2 * Main.height, "#36141e");
        var i = new Laya.Image("res/bg15.png");
        return e.bg.addChild(i), i.y = 0, e.bk = i, e.init(i), e.roleGirl.x = 0, e.roleGirl.y = Main.halfHeight,
            e.roleGirl.zOrder = 999, e.roleGirl.loadFinishHandler = Laya.Handler.create(e, function () {
                this.roleGirl.setAttactAni1("2"), Laya.Tween.to(this.roleGirl, {
                    x: Main.width + 60
                }, 2500, null, Laya.Handler.create(this, function () {
                    this.timer.clearAll(this), this.roleGirl.visible = !1, this.nextLevel();
                }));
            }), e.btn2.visible = !1, e.btn1.visible = !1, e;
    }
    return __extends(e, t), e.prototype.nextLevel = function () {
        var t = new LevelView9_1();
        this.addChild(t), t.x = Main.width, t.handler = this.handler, Laya.Tween.to(t, {
            x: 0
        }, 500, null, Laya.Handler.create(this, function () { })), Laya.Tween.to(this.bg, {
            x: -Main.width
        }, 500, null, Laya.Handler.create(this, function () {
            this.timer.clearAll(this);
        }));
    }, e;
}(AbstractLevel), LevelView9_1 = function (t) {
    function e() {
        var e = t.call(this) || this;
        e.sth = ["bg/mu2.png", "bg/mu3.png", "bg/mu4.png"], e.bg.graphics.drawRect(0, 0, Main.width, 2 * Main.height, "#36141e");
        var i = new Laya.Image("res/bg15.png");
        e.bg.addChild(i), i.y = (Main.height - i.height) / 2;
        var n = new Laya.Image("bg/eye1.png");
        i.addChild(n), n.x = 600, n.y = 500;
        var s = new Laya.Image("bg/eye1.png");
        i.addChild(s), s.x = 400, s.y = 520;
        var a = new Laya.Image("bg/eye1.png");
        return i.addChild(a), a.x = 500, a.y = 560, e.e1 = n, e.e2 = s, e.e3 = a, e.init(i),
            e.roleGirl.x = 0, e.roleGirl.y = Main.halfHeight, e.roleGirl.zOrder = 999, e.btn1.initAddIcon("icon/31.png"),
            e.btn2.initAddIcon("icon/32.png"), e.btn1.x = Main.halfWidth - (e.btn1.width + 50),
            e.btn1.y = Main.halfHeight + 250, e.btn2.x = Main.halfWidth + 50, e.btn2.y = e.btn1.y,
            e.btn1.once(Laya.Event.CLICK, e, function () {
                this.btn1.isLock || this.setOK(i);
            }), e.btn2.once(Laya.Event.CLICK, e, function () {
                this.btn2.isLock || this.setFal(i);
            }),
            e.drawProgressbar(3, -1, !1), e.btn2.visible = !1, e.btn1.visible = !1, e.btn1.scale(0, 0),
            e.btn2.scale(0, 0), e.roleGirl.loadFinishHandler = Laya.Handler.create(e, function () {
                this.roleGirl.setAttactAni1("2"), Laya.Tween.to(this.roleGirl, {
                    x: 200
                }, 2500, null, Laya.Handler.create(this, function () {
                    this.roleGirl.setAttactAni1("9");
                    tell.setTalkInfoView(["It's a little weird", "What should I do?"], this.roleGirl.x, this.roleGirl.y - 390, i).zOrder = this.roleGirl.zOrder + 1,
                        tell.finishHandler = Laya.Handler.create(this, function () {
                            this.btn2.visible = !0, this.btn1.visible = !0, this.wenhaoicon.visible = !0, this.wenhaoicon.pos(this.roleGirl.x - 20, this.roleGirl.y - 370),
                                Laya.Tween.to(this.btn1, {
                                    scaleX: 1,
                                    scaleY: 1
                                }, 300, null, Laya.Handler.create(this, function () { })), Laya.Tween.to(this.btn2, {
                                    scaleX: 1,
                                    scaleY: 1
                                }, 300, null, Laya.Handler.create(this, function () { }));
                        });
                }));
            }), e;
    }
    return __extends(e, t), e.prototype.setFal = function (t) {
        this.drawProgressbar(3, 0, !1), this.wenhaoicon.visible = !1, this.btn1.setLock(),
            this.btn2.setLock();
        var e = new Laya.Image("icon/32.png");
        e.pivotY = e.height, e.pivotX = e.width / 2, e.x = this.roleGirl.x + 100, e.y = this.roleGirl.y - 100,
            t.addChild(e), e.zOrder = 999999, this.timer.once(200, this, function () {
                e.visible = !1, this.btn2.setResult(!1), this.roleGirl.setAttactAni1("13"), this.timer.once(500, this, function () {
                    this.e1.skin = "bg/eye2.png", this.e2.skin = "bg/eye2.png", this.e3.skin = "bg/eye2.png",
                        this.roleGirl.setAttactAni1("13_1"), this.timer.once(500, this, function () {
                            this.btn2.visible = !1, this.btn1.visible = !1, this.gameover();
                        });
                });
            });
    }, e.prototype.setOK = function (t) {
        this.drawProgressbar(3, 0, !0), this.wenhaoicon.visible = !1, this.btn1.setLock(),
            this.btn2.setLock();
        var e = new Laya.Image("icon/31.png");
        e.pivotY = e.height / 2, e.pivotX = e.width / 2, e.x = this.roleGirl.x + 250, e.y = this.roleGirl.y,
            t.addChild(e), e.scale(2, 2), e.zOrder = 999999, this.timer.once(500, this, function () {
                this.btn1.setResult(!0), this.roleGirl.setAttactAni1("5"), this.timerLoop(200, this, this.drawMusic, [e]),
                    this.timer.once(600, this, function () {
                        var e = new Laya.Image("bg/b1.png");
                        t.addChild(e), e.x = Main.halfWidth, e.y = 410, Laya.Tween.to(e, {
                            scaleX: .1,
                            scaleY: .1,
                            y: e.y - 180
                        }, 1e3, null, Laya.Handler.create(this, function () {
                            e.visible = !1, this.e1.visible = !1, this.e2.visible = !1, this.e3.visible = !1,
                                this.btn1.visible = !1, this.btn2.visible = !1, this.timer.once(300, this, function () {
                                    this.roleGirl.setAttactAni1("2"), Laya.Tween.to(this.roleGirl, {
                                        x: Main.width + 100
                                    }, 1e3, null, Laya.Handler.create(this, function () {
                                        this.roleGirl.visible = !1, this.nextLevel();
                                    }));
                                });
                        }));
                    });
            });
    }, e.prototype.drawMusic = function (t) {
        var e = new Laya.Image(this.sth[Math.floor(Math.random() * this.sth.length)]);
        t.addChild(e), Laya.Tween.to(e, {
            y: -200,
            x: Math.floor((Math.random() < .5 ? -1 : 1) * (110 * Math.random())),
            alpha: 0
        }, 1e3, null, Laya.Handler.create(this, function () {
            e.visible = !1, e.destroy(), t.removeChild(e);
        }));
    }, e.prototype.gameover = function () {
        this.addGameOverView(Laya.Handler.create(this, function (t) {
            if (t) {
                this.timer.clearAll(this), this.bg.destroy();
                var i = new e();
                this.addChild(i);
            }
        }));
    }, e.prototype.nextLevel = function () {
        var t = new LevelView9_2();
        this.addChild(t), t.x = Main.width, t.handler = this.handler, Laya.Tween.to(t, {
            x: 0
        }, 500, null, Laya.Handler.create(this, function () { })), Laya.Tween.to(this.bg, {
            x: -Main.width
        }, 500, null, Laya.Handler.create(this, function () { }));
    }, e;
}(AbstractLevel), LevelView9_2 = function (t) {
    function e() {
        var e = t.call(this) || this;
        e.bg.graphics.drawRect(0, 0, Main.width, 2 * Main.height, "#36141e");
        var i = new Laya.Image("res/bg15.png");
        e.bg.addChild(i), i.y = (Main.height - i.height) / 2, e.init(i), e.roleGirl.x = 0,
            e.roleGirl.y = Main.halfHeight, e.roleGirl.zOrder = 999;
        var n = new ZombieMonster();
        return i.addChild(n), e.m = n, n.initRoleImage(), n.x = Main.width, n.y = e.roleGirl.y,
            n.loadFinishHandler = Laya.Handler.create(e, function () {
                n.setAttactAni1("1"), Laya.Tween.to(n, {
                    x: Main.halfWidth + 150
                }, 2500, null, Laya.Handler.create(this, function () {
                    n.setAttactAni1("2");
                }));
            }), e.btn1.initAddIcon("icon/15.png"), e.btn2.initAddIcon("icon/33.png"), e.btn1.x = Main.halfWidth - (e.btn1.width + 50),
            e.btn1.y = Main.halfHeight + 180, e.btn2.x = Main.halfWidth + 50, e.btn2.y = e.btn1.y,
            e.btn1.once(Laya.Event.CLICK, e, function () {
                this.btn1.isLock || this.setFal(i);
            }), e.btn2.once(Laya.Event.CLICK, e, function () {
                this.btn2.isLock || this.setOK(i);
            }),
            e.drawProgressbar(3, 0, !0), e.btn2.visible = !1, e.btn1.visible = !1, e.btn1.scale(0, 0),
            e.btn2.scale(0, 0), e.roleGirl.loadFinishHandler = Laya.Handler.create(e, function () {
                this.roleGirl.setAttactAni1("2"), Laya.Tween.to(this.roleGirl, {
                    x: Main.halfWidth - 150
                }, 2500, null, Laya.Handler.create(this, function () {
                    this.roleGirl.setAttactAni1("9");
                    tell.setTalkInfoView(["What kind of monster is this", "Help"], this.roleGirl.x, this.roleGirl.y - 390, i).zOrder = this.roleGirl.zOrder + 1,
                        tell.finishHandler = Laya.Handler.create(this, function () {
                            this.btn2.visible = !0, this.btn1.visible = !0, this.wenhaoicon.visible = !0, this.wenhaoicon.pos(this.roleGirl.x - 20, this.roleGirl.y - 370),
                                Laya.Tween.to(this.btn1, {
                                    scaleX: 1,
                                    scaleY: 1
                                }, 300, null, Laya.Handler.create(this, function () { })), Laya.Tween.to(this.btn2, {
                                    scaleX: 1,
                                    scaleY: 1
                                }, 300, null, Laya.Handler.create(this, function () { }));
                        });
                }));
            }), e;
    }
    return __extends(e, t), e.prototype.setFal = function (t) {
        this.drawProgressbar(3, 1, !1), this.wenhaoicon.visible = !1, this.btn1.setLock(),
            this.btn2.setLock();
        var e = new Laya.Image("icon/15.png");
        e.pivotY = e.height, e.pivotX = e.width / 2, e.x = this.roleGirl.x + 50, e.y = this.roleGirl.y - 90,
            t.addChild(e), e.scale(1, 1), e.zOrder = 999999,
            this.timer.once(300, this, function () {
                e.visible = !1,
                    //this.btn2.setResult(!1), 
                    this.roleGirl.setAttactAni1("2_1"),
                    this.timer.once(200, this, function () {
                        this.btn1.setResult(!1),
                            this.roleGirl.setPause(),
                            this.timer.once(200, this, function () {
                                this.m.setAttactAni1("1"),
                                    this.m.zOrder = 99999,
                                    Laya.Tween.to(this.m, { x: this.roleGirl.x + 100 }, 1e3, null, Laya.Handler.create(this, function () {
                                        this.m.setAttactAni1("2"),
                                            this.m.setPause(),
                                            this.timer.once(200, this, function () {
                                                this.btn2.visible = !1,
                                                    this.btn1.visible = !1,
                                                    this.gameover();
                                            });
                                    }));
                            });
                    });
            });
    }, e.prototype.setOK = function (t) {
        this.drawProgressbar(3, 1, !0), this.wenhaoicon.visible = !1, this.btn1.setLock(),
            this.btn2.setLock();
        var e = new Laya.Image("icon/33.png");
        e.pivotY = e.height / 2, e.pivotX = e.width / 2, e.x = Main.width + 100, e.y = 300,
            t.addChild(e), e.zOrder = 999999, e.scale(3, 3), e.alpha = 0, Laya.Tween.to(e, {
                alpha: 1,
                x: Main.width - 200
            }, 500, null, Laya.Handler.create(this, function () {
                this.timer.once(200, this, function () {
                    this.btn2.setResult(!0), this.m.setPause(), this.roleGirl.setAttactAni1("2"), this.timer.once(100, this, function () {
                        this.btn2.visible = !1, this.btn1.visible = !1, Laya.Tween.to(this.roleGirl, {
                            x: Main.width + 60,
                            y: this.roleGirl.y + 60
                        }, 1e3, null, Laya.Handler.create(this, function () {
                            this.roleGirl.visible = !1, this.nextLevel();
                        }));
                    });
                });
            }));
    }, e.prototype.gameover = function () {
        this.addGameOverView(Laya.Handler.create(this, function (t) {
            if (t) {
                this.bg.destroy();
                var i = new e();
                this.addChild(i);
            }
        }));
    }, e.prototype.nextLevel = function () {
        var t = new LevelView9_3();
        this.addChild(t), t.x = Main.width, t.handler = this.handler, Laya.Tween.to(t, {
            x: 0
        }, 500, null, Laya.Handler.create(this, function () { })), Laya.Tween.to(this.bg, {
            x: -Main.width
        }, 500, null, Laya.Handler.create(this, function () { }));
    }, e;
}(AbstractLevel), LevelView9_3 = function (t) {
    function e() {
        var e = t.call(this) || this;
        e.bg.graphics.drawRect(0, 0, Main.width, 2 * Main.height, "#36141e");
        var i = new Laya.Image("res/bg15.png");
        e.bg.addChild(i), i.y = (Main.height - i.height) / 2, i.width = i.width + 40, e.init(i);
        var n = new Laya.Image("bg/14_1.png");
        i.addChild(n), n.pivotY = n.height / 2, n.pivotX = n.width / 2, n.y = Main.halfHeight - 40,
            n.x = Main.width - 260, e.fly = n;
        var s = new ZombieMonster();
        return i.addChild(s), e.m = s, s.initRoleImage(), s.x = Main.width - 150, s.y = Main.halfHeight,
            s.loadFinishHandler = Laya.Handler.create(e, function () {
                s.setAttactAni1("2");
            }), e.roleGirl.x = 0, e.roleGirl.y = Main.halfHeight, e.roleGirl.zOrder = 999,
            e.drawProgressbar(3, 1, !0),
            e.btn1.initAddIcon("icon/35.png"), e.btn2.initAddIcon("icon/36.png"), e.btn1.x = Main.halfWidth - (e.btn1.width + 50),
            e.btn1.y = Main.halfHeight + 180, e.btn2.x = Main.halfWidth + 50, e.btn2.y = e.btn1.y,
            e.btn1.once(Laya.Event.CLICK, e, function () {
                this.btn1.isLock || this.setOK(i);
            }), e.btn2.once(Laya.Event.CLICK, e, function () {
                this.btn2.isLock || this.setFal(i);
            }), e.btn2.visible = !1, e.btn1.visible = !1, e.btn1.scale(0, 0), e.btn2.scale(0, 0),
            e.roleGirl.loadFinishHandler = Laya.Handler.create(e, function () {
                this.roleGirl.setAttactAni1("2"), Laya.Tween.to(this.roleGirl, {
                    x: 150
                }, 2500, null, Laya.Handler.create(this, function () {
                    this.roleGirl.setAttactAni1("9");
                    tell.setTalkInfoView(["Ah!!!", "A zombie again?"], this.roleGirl.x, this.roleGirl.y - 390, i).zOrder = this.roleGirl.zOrder + 1,
                        tell.finishHandler = Laya.Handler.create(this, function () {
                            this.btn2.visible = !0, this.btn1.visible = !0, this.wenhaoicon.visible = !0, this.wenhaoicon.pos(this.roleGirl.x - 20, this.roleGirl.y - 370),
                                Laya.Tween.to(this.btn1, {
                                    scaleX: 1,
                                    scaleY: 1
                                }, 300, null, Laya.Handler.create(this, function () { })), Laya.Tween.to(this.btn2, {
                                    scaleX: 1,
                                    scaleY: 1
                                }, 300, null, Laya.Handler.create(this, function () { }));
                        });
                }));
            }), e;
    }
    return __extends(e, t), e.prototype.setFal = function (t) {
        this.drawProgressbar(3, 2, !1), this.wenhaoicon.visible = !1, this.btn1.setLock(),
            this.btn2.setLock();
        var e = new Laya.Image("icon/36.png");
        e.pivotX = e.width / 2, e.pivotY = e.height / 2, e.x = this.roleGirl.x, e.y = this.roleGirl.y - 90,
            t.addChild(e), e.zOrder = 999999, this.timer.once(300, this, function () {
                e.visible = !1, this.roleGirl.setAttactAni1("15"), this.btn2.setResult(!1), 
                this.timer.once(300, this, function () {
                    this.roleGirl.setPause(), this.timer.once(1e3, this, function () {
                        this.btn2.visible = !1, this.btn1.visible = !1, this.gameover();
                    });
                });
            });
    }, e.prototype.setOK = function (t) {
        this.drawProgressbar(3, 2, !0), this.wenhaoicon.visible = !1, this.btn1.setLock(),
            this.btn2.setLock();
        var e = new Laya.Image("icon/35.png");
        e.pivotY = e.height / 2, e.pivotX = e.width / 2, e.x = this.roleGirl.x, e.y = this.roleGirl.y - 90,
            t.addChild(e), e.zOrder = 999999, e.scale(2, 2), this.timer.once(200, this, function () {
                e.visible = !1, this.btn1.setResult(!0), this.roleGirl.setAttactAni1("14"), this.timer.once(500, this, function () {
                    this.btn1.setResult(!0), this.m.setPause(), this.btn2.visible = !1, this.btn1.visible = !1,
                        Laya.Tween.to(this.roleGirl, {
                            x: Main.width + 60,
                            y: this.roleGirl.y + 60
                        }, 2e3, null, Laya.Handler.create(this, function () {
                            this.roleGirl.visible = !1, this.setWinView();
                        }));
                });
            });
    }, e.prototype.gameover = function () {
        this.addGameOverView(Laya.Handler.create(this, function (t) {
            if (t) {
                this.bg.destroy();
                var i = new e();
                this.addChild(i);
            }
        }));
    }, e;
}(AbstractLevel), __extends = this && this.__extends || function (t, e) {
    function i() {
        this.constructor = t;
    }
    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n]);
    t.prototype = null === e ? Object.create(e) : (i.prototype = e.prototype, new i());
};

!function (t) {
    t.setTalkInfoView = function (t, i, n, s) {
        var a = new e(t);
        s.addChild(a), a.x = i, a.y = n;
        return  a;
    };
    var e = function (e) {
        function i(i) {
            var n = e.call(this) || this, s = new Laya.Image("icon/tel.png");
            n.addChild(s), n.graphics.drawCircle(s.width / 2, s.height + 20, 20, "#ffffff"),
                n.graphics.drawCircle(s.width / 2 - 40, s.height + 50, 10, "#ffffff");
            var a = drawText(i[0], "#000000", 23);
           
            a.width = s.width-10;
            a.wordWrap =true;
            a.align = "center";
            a.valign = "middle";
            s.addChild(a),
            a.anchorY = a.anchorX = 0.5;
             a.centerX = 0;
             a.centerY = 0;
             if(i[0].length > 20){
                 a.fontSize = 20
             }
         
            var r = !1;
            return n.timerLoop(1500, n, function () {
                r ? (t.finishHandler && t.finishHandler.run(), this.exit()) : (a.text = "" + i[1],
                    a.pivotX = a.width / 2, r = !0);
            }), n;
        }
        return __extends(i, e), i.prototype.exit = function () {
            this.timer.clearAll(this), this.visible = !1, this.destroy();
        }, i;
    }(Laya.Sprite);
}(tell || (tell = {}));

var mlevel, __extends = this && this.__extends || function (t, e) {
    function i() {
        this.constructor = t;
    }
    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n]);
    t.prototype = null === e ? Object.create(e) : (i.prototype = e.prototype, new i());
};

!function (t) {
    t.setLevelView = function () {
        var t = new e();
        Laya.stage.addChild(t);
    }, t.useTl = function () {
        return data.tlcount > 0 && (data.tlcount -= 1, 0 == data.tltime && (data.tltime = getCurTime()),
            data.save(), !0);
    }, t.drawTlIcon = function (e, i, n) {
        var s = (getCurTime() - data.tltime) / 1e3;
        if (s > 0 && data.tltime > 0) {
            var a = Math.floor(s / 600);
            if (a > 0) {
                var r = data.tlcount;
                data.tlcount += a, data.tlcount > 5 && (data.tlcount = 5, a = 5 - r);
                var o = toast.showToastInfo1({
                    info1: "Get ",
                    info2: " Power x" + a,
                    skin: "icon/tl.png"
                });
                o.zOrder = 99999999, Laya.stage.addChild(o), data.tltime = 0, data.save();
            }
        }
        var h = draw.fillRoundRect(0, 0, 140, 30, "#FFF7DF", 20, 20), l = new Laya.Image("icon/tl.png");
        h.addChild(l), l.scale(.75, .75);
        var c = drawText("" + data.tlcount, "#000000", 50);
        h.addChild(c), t.tltext = c, c.pivotX = c.width / 2, c.pivotY = c.height / 2, c.x = h.width / 2,
            c.y = h.height / 2;
        var u = drawText("", "#ff0000", 20);
        h.addChild(u), u.y = h.height - 10, u.x = h.width / 2;
        if(data.tlcount>=5){u.visible = !1;}
        var d = new LImageButtView(0, 0, "icon/add.png");
        h.addChild(d), d.pivotX = d.width, d.pivotY = d.height / 2, d.x = h.width + 10,
            d.y = h.height / 2, d.onPos(d.x, d.y), d.on(Laya.Event.CLICK, this, function () {
                wxad.isOpenLock ? dialog.setDialog1(Laya.Handler.create(this, function (e) {
                    if (e) {
                        data.tlcount += 2, data.save(), t.tltext.text = "" + data.tlcount;
                        var i = toast.showToastInfo1({
                            info1: "Get ",
                            info2: " Power x2",
                            skin: "icon/tl.png"
                        });
                        i.zOrder = 99999999, Laya.stage.addChild(i);
                    }
                })) : wxapi.sysytemfxshareApp(Laya.Handler.create(this, function (e) {
                    if (e) {
                        data.tlcount += 1, t.tltext.text = "" + data.tlcount;
                        var i = toast.showToastInfo1({
                            info1: "Get ",
                            info2: " Power x1",
                            skin: "icon/tl.png"
                        });
                        i.zOrder = 99999999, Laya.stage.addChild(i), data.save();
                    }
                }));
            });
        var _ = 600 - (getCurTime() - data.tltime) / 1e3;
        if (_ > 0) {
            var f = Math.floor(_ / 60), p = Math.floor(_ % 60);
            u.text = (f < 10 ? "0" + f : f) + ":" + (p < 10 ? "0" + p : p), u.pivotX = u.width / 2;
        }
        return h.timerLoop(1e3, h, function () {
            if (u) if (data.tlcount < 5) {
                var t = 600 - (getCurTime() - data.tltime) / 1e3;
                if (t > 0) {
                    var e = Math.floor(t / 60), i = Math.floor(t % 60);
                    u.text = (e < 10 ? "0" + e : e) + ":" + (i < 10 ? "0" + i : i), u.pivotX = u.width / 2;
                } else {
                    data.tlcount += 1, c.text = "" + data.tlcount, data.tlcount >= 5 ? (data.tlcount = 5,
                        data.tltime = 0, data.save(), u.visible = !1) : data.tltime = getCurTime();
                    var n = toast.showToastInfo1({
                        info1: "Get ",
                        info2: " Power x1",
                        skin: "icon/tl.png"
                    });
                    n.zOrder = 99999999, Laya.stage.addChild(n), data.save();
                }
            } else {
                data.tltime = 0;
                u.visible = !1;
            }
        }), h;
    };
    var e = function (t) {
        function e() {
            var e = t.call(this) || this;
            e.size(Main.width, Main.height), e.mouseEnabled = !0;
            var i = new Laya.Sprite();
            return e.addChild(i), i.graphics.drawRect(0, 0, Main.width, 2 * Main.height, "#9BDFFF"),
                e;
        }
        return __extends(e, t), e.prototype.updateItem = function (t, e) {
            t.setRefurbish();
        }, e.prototype.onSelect = function (t) { }, e.prototype.exit = function () { }, e.prototype.hideview = function () {
            wxad.hideBannerAd(), this.timer.clearAll(this), this.destroy(), Laya.stage.removeChild(this);
        }, e;
    }(Laya.Sprite);
    t.LevelView = e;
    !function (t) {
        function e() {
            var e = t.call(this) || this;
            return e.glowFilter1 = new Laya.GlowFilter("#522A25", 0, 0, 10), e.grayscaleMat = [.3086, .6094, .082, 0, 0, .3086, .6094, .082, 0, 0, .3086, .6094, .082, 0, 0, 0, 0, 0, 1, 0],
                e.width = 160, e.height = 176, e;
        }
        __extends(e, t), e.prototype.setRefurbish = function () {
            var t = this.dataSource, e = this.infoText;
            e.text = "" + t, e.pivotX = e.width / 2, e.pivotY = e.height / 2, data.level >= t ? this.icon.visible = !1 : this.icon.visible = !0;
        };
    }(Laya.Box);
}(mlevel || (mlevel = {}));

var libao, __extends = this && this.__extends || function (t, e) {
    function i() {
        this.constructor = t;
    }
    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n]);
    t.prototype = null === e ? Object.create(e) : (i.prototype = e.prototype, new i());
};

!function (t) {
    var e;
    (libao || (libao = {})).setLibaoView = function (t) {
        var n = new i();
        Laya.stage.addChild(n), n.zOrder = 999, e = t;
    };
    var i = function (t) {
        function e() {
            var e = t.call(this) || this;
            e.size(Main.width, Main.height), e.mouseEnabled = !0;
            var i = new Laya.Sprite();
            e.addChild(i), i.graphics.drawRect(0, 0, Main.width, 2 * Main.height, "#9BDFFF");
            var s = new LImageButtView(0, 0, "icon/index-close.png");
            e.addChild(s), s.pivotX = s.width, s.x = Main.width - 100, s.y = 150 + Main.autoInitTopHeight,
                s.onPos(s.x, s.y), s.on(Laya.Event.CLICK, e, function () {
                    this.exit();
                });
            var a = drawText("恭喜被礼包砸中", "#6D270C", 70);
            a.pivotX = a.width / 2, a.x = Main.halfWidth, a.y = 300 + Main.autoInitTopHeight,
                e.addChild(a);
            var r = new Laya.Image("icon/lb.png");
            e.addChild(r), r.pivotX = r.width / 2, r.pivotY = r.height / 2, r.x = Main.halfWidth,
                r.y = a.y + 300;
            var o = draw.fillRoundRect(0, 0, 500, 20, "#ffffff", 20, 20);
            e.addChild(o), o.pivotX = o.width / 2, o.x = Main.halfWidth, o.y = r.y + r.height / 2 + 20;
            var h = new Laya.GlowFilter("#000000", 5, 0, 0);
            o.filters = [h];
            var l = draw.fillRoundRect(0, 0, 40, 20, "#ff0000", 20, 20);
            o.addChild(l), l.pivotY = l.height / 2, l.y = o.height / 2, l.x = 0;
            var c = drawText("点得越快，奖励越多哦", "#ffffff", 50);
            c.filters = [h], e.addChild(c), c.pivotX = c.width / 2, c.x = Main.halfWidth,
                c.y = o.y + 100;
            var u = draw.fillRoundRect(0, 0, 220, 70, "#F3457A", 40, 40);
            e.addChild(u), u.pivotX = u.width / 2, u.x = Main.halfWidth, u.y = Main.height - u.height - 100,
                wxapi.isHasScreenFringe() && (u.y = Main.height - u.height + 70 + Main.autoInitTopHeight);
            var d = new Laya.GlowFilter("#AB2A52", 0, 0, 8);
            u.filters = [d];
            var _ = drawText("狂点打开", "#ffffff", 40);
            u.addChild(_), _.pivotY = _.height / 2, _.pivotX = _.width / 2, _.x = u.width / 2,
                _.y = u.height / 2, e.btn = u;
            var f = new Laya.Image("icon/ddd.png");
            u.addChild(f), f.x = u.width - 60, f.y = u.height / 2, e.hand = f, e.hand.visible = !1;
            var p = 0;
            u.on(Laya.Event.CLICK, e, function () {
                l.visible = !0, l.width += 25, draw.fillRoundRect_sp(l, l.width, 20, "#ff0000", 20, 20),
                    p += 1, l.width > o.width - 250 && (wxad.showbannerAd(), function () {
                        var t = new n();
                        Laya.stage.addChild(t), t.zOrder = 999;
                    }(), this.exit());
            });
            return e.timerLoop(1e3, e, function () {
                l.width > 42 ? (l.width -= 22, console.log("..  " + l.width), draw.fillRoundRect_sp(l, 0, 20, "#ff0000", 20, 20)) : (l.visible = !1,
                    draw.fillRoundRect_sp(l, l.width, 20, "#ff0000", 20, 20));
            }), e.autoBtn1(), e;
        }
        return __extends(e, t), e.prototype.exit = function () {
            this.destroy(), Laya.stage.removeChild(this);
        }, e.prototype.autoBtn1 = function () {
            Laya.Tween.to(this.btn, {
                scaleX: 1.2,
                scaleY: 1.2
            }, 200, Laya.Ease.linearNone, Laya.Handler.create(this, function () {
                this.timer.once(300, this, function () {
                    this.autoBtn2();
                });
            }));
        }, e.prototype.autoBtn2 = function () {
            this.hand.visible = !0, Laya.Tween.to(this.btn, {
                scaleX: 1.1,
                scaleY: 1.1
            }, 200, Laya.Ease.linearNone, Laya.Handler.create(this, function () {
                this.timer.once(300, this, function () {
                    this.hand.visible = !1, this.autoBtn1();
                });
            }));
        }, e;
    }(Laya.Sprite), n = function (t) {
        function i() {
            var e = t.call(this) || this;
            e.size(Main.width, Main.height), e.mouseEnabled = !0;
            var i = new Laya.Sprite();
            e.addChild(i), i.graphics.drawRect(0, 0, Main.width, 2 * Main.height, "#9BDFFF");
            var n = new Laya.Image("icon/index-close.png");
            e.addChild(n), n.pivotX = n.width, n.x = Main.width - 100, n.y = 200 + Main.autoInitTopHeight,
                n.on(Laya.Event.CLICK, e, e.exit);
            var s = drawText("获得奖励", "#6D270C", 70);
            s.pivotX = s.width / 2, s.x = Main.halfWidth, s.y = 300 + Main.autoInitTopHeight,
                e.addChild(s);
            var a = new Laya.Image("icon/tl.png");
            e.addChild(a), a.pivotX = a.width / 2, a.pivotY = a.height / 2, a.x = Main.halfWidth,
                a.y = s.y + 300;
            var r = 3 + Math.floor(4 * Math.random()), o = drawText("x" + r, "#000000", 50);
            a.addChild(o), o.pivotY = o.height, o.y = a.height, o.x = a.width;
            var h = draw.fillRoundRect(0, 0, 220, 70, "#F3457A", 40, 40);
            e.addChild(h), h.pivotX = h.width / 2, h.x = Main.halfWidth, h.y = a.y + a.height + 100;
            var l = new Laya.GlowFilter("#AB2A52", 0, 0, 8);
            h.filters = [l];
            c = drawText("领取奖励", "#ffffff", 40);
            h.addChild(c), c.pivotY = c.height / 2, c.pivotX = c.width / 2, c.x = h.width / 2,
                c.y = h.height / 2;
            var c = drawText("放弃奖励", "#153E89", 35);
            return e.addChild(c), c.italic = !0, c.underline = !0, c.pivotX = c.width / 2, c.x = Main.halfWidth,
                c.y = h.y + h.height + 100, c.on(Laya.Event.CLICK, e, function () {
                    this.exit();
                }), h.on(Laya.Event.CLICK, e, function () {
                    wxad.showVideoAd(Laya.Handler.create(this, function (t) {
                        if (t) {
                            var e = toast.showToastInfo1({
                                info1: "Get ",
                                info2: " Power x" + r,
                                skin: "icon/tl.png"
                            });
                            e.zOrder = 99999999, Laya.stage.addChild(e), data.tlcount += r, data.save(), this.exit();
                        }
                    }));
                }), e;
        }
        return __extends(i, t), i.prototype.exit = function () {
            e && (e.run(), e.recover()), wxad.hideBannerAd(), this.destroy(), Laya.stage.removeChild(this);
        }, i;
    }(Laya.Sprite);
}();

var z6game, __extends = this && this.__extends || function (t, e) {
    function i() {
        this.constructor = t;
    }
    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n]);
    t.prototype = null === e ? Object.create(e) : (i.prototype = e.prototype, new i());
};

!function (t) {
    t.setGameView = function () {
        data.read();
        var i = new e();
        var o = new n();
        Laya.stage.addChild(i), t.gmae = i, t.win = o;
    };
    var e = function (t) {
        function e() {
            var e = t.call(this) || this;
            e.countStarNum = 3,
                e.startxgdata = [0, 0, 0],
                e.endHandler = Laya.Handler.create(e, function (t) {
                    if (!this.isEndLock)
                        if (this.isEndLock = !0, 200 == t) {
                            this.top && (this.top.visible = !1),
                            this.hideTapView(!1);
                            var e = new n();
                            Laya.stage.addChild(e);
                        } else 404 == t && leveltool.setWaitNext(1e3, Laya.Handler.create(this, function () {
                            this.hideTapView(!1),
                            this.top && (this.top.visible = !1);
                            var t = new r();
                            Laya.stage.addChild(t);
                        }));
                }, null, !1), e.isEndLock = !1, e.size(Main.width, Main.height), e.mouseEnabled = !0,
                data.read();
            var i = new Laya.Sprite();
            let yad     = new Laya.Image();
                            yad.scale(0.8,0.8);
                            yad.skin    = "icon/yad.png";
                            yad.bottom  = 5;
                            yad.centerX = 0;
                            //yad.top   = 10;
                            yad.zOrder  = 1e3;
                            yad.on(Laya.Event.MOUSE_DOWN,yad,()=>{platform.getInstance().navigate("GAME","LOGO")})
                            Laya.stage.addChild(yad);
                            window.yad  = yad;
            e.addChild(i), i.graphics.drawRect(0, 0, Main.width, 2 * Main.height, "#ffffff"),
                e.loadLevel();
            var s = new Laya.Sprite();
            e.addChild(s), s.height = 100, s.width = Main.width, s.y = Main.autoInitTopHeight;
            var a = new Laya.Sprite();
            e.addChild(a), a.height = 100, a.width = Main.width, a.zOrder = 9999, a.y = Main.height + Main.autoInitTopHeight - 100;
            var o = drawText("Level " + data.curLevel, "#ffffff", 45);
            o.pivotX = o.width / 2, o.x = Main.halfWidth, o.y = 100, o.name = "leveltext", e.addChild(o);
            var h = new LImageButtView(50, 20, "icon/voice2.png");
            e.addChild(h),
                h.on(Laya.Event.CLICK, e, function () {
                    music.isPlayMusic = !music.isPlayMusic, music.isPlayMusic ? (h.skin = "icon/voice2.png",
                        music.onPlaySound()) : (h.skin = "icon/voice.png", music.onPlayStop());
                }),
                e.top = zsview.drawExitAd(e, Laya.Handler.create(e, function () {
                    Laya.stage.destroyChildren();
                    var t = new FmMenuView();
                    Laya.stage.addChild(t);
                })),
                wxald.onStart(data.curLevel);
            var l = Main.height,
                c = zsview.drawRollingAd(e, l);
            return c && (c.y = Main.height - c.height - 10, wxapi.isHasScreenFringe() && (c.y = c.y + 100)),
                e.rowAd = c, e;
        }
        return __extends(e, t), e.prototype.getIconHome = function (t, e) {
            var i = new Laya.Image(e), n = drawText(t, "#ffffff", 30);
            i.addChild(n), n.pivotX = n.width / 2, n.x = i.width / 2, n.y = i.height;
            var s = new Laya.GlowFilter("#05E2F0", 5, 0, 0);
            return n.filters = [s], i;
        }, e.prototype.hideTapView = function (t) {
            // var e = this.getChildByName("leveltext");
            // e && (e.visible = t), 
            // this.rowAd && (this.rowAd.visible = !1), 
            // this.top && (this.top.visible = !1),
            // this.info && (this.info.visible = !1), 
            // this.btn1 && (this.btn1.visible = !1), 
            // this.btn2 && (this.btn2.visible = !1);
        }, e.prototype.loadLevel = function () {
            var t;
            //data.curLevel = 11;
            1 == data.curLevel
                ? t = new LevelView1() : 2 == data.curLevel
                    ? t = new LevelView2() : 3 == data.curLevel
                        ? t = new LevelView3() : 4 == data.curLevel
                            ? t = new LevelView4() : 5 == data.curLevel
                                ? t = new LevelView5() : 6 == data.curLevel
                                    ? t = new LevelView6() : 7 == data.curLevel
                                        ? t = new LevelView7() : 8 == data.curLevel
                                            ? t = new LevelView8() : 9 == data.curLevel
                                                ? t = new LevelView9() : 10 == data.curLevel
                                                    ? t = new LevelView10() : 11 == data.curLevel
                                                        ? t = new LevelView11() : 12 == data.curLevel
                                                            ? t = new LevelView12() : 13 == data.curLevel
                                                                ? t = new LevelView13() : 14 == data.curLevel
                                                                    ? t = new LevelView14() : 15 == data.curLevel
                                                                        ? t = new LevelView15() : 16 == data.curLevel
                                                                            ? t = new LevelView16() : 17 == data.curLevel
                                                                                ? t = new LevelView17() : 18 == data.curLevel
                                                                                    ? t = new LevelView18() : 19 == data.curLevel
                                                                                        ? t = new LevelView19() : 20 == data.curLevel
                                                                                            ? t = new LevelView20() : 21 == data.curLevel
                                                                                                ? t = new LevelView21() : 22 == data.curLevel
                                                                                                    ? t = new LevelView22() : 23 == data.curLevel
                                                                                                        ? t = new LevelView23() : 24 == data.curLevel
                                                                                                            ? t = new LevelView24() : 25 == data.curLevel
                                                                                                                ? t = new LevelView25() : 26 == data.curLevel
                                                                                                                    ? t = new LevelView26() : 27 == data.curLevel
                                                                                                                        ? t = new LevelView27() : 28 == data.curLevel
                                                                                                                            ? t = new LevelView28() : 29 == data.curLevel
                                                                                                                                ? t = new LevelView29() : 30 == data.curLevel
                                                                                                                                    ? t = new LevelView30() : 31 == data.curLevel
                                                                                                                                        ? t = new LevelView31() : 32 == data.curLevel
                                                                                                                                            ? t = new LevelView32() : 33 == data.curLevel
                                                                                                                                                ? t = new LevelView33() : 34 == data.curLevel
                                                                                                                                                    ? t = new LevelView34() : 35 == data.curLevel
                                                                                                                                                        ? t = new LevelView35() : 36 == data.curLevel
                                                                                                                                                            ? t = new LevelView36() : 37 == data.curLevel
                                                                                                                                                                ? t = new LevelView37() : 38 == data.curLevel
                                                                                                                                                                    ? t = new LevelView38() : 39 == data.curLevel
                                                                                                                                                                        ? t = new LevelView39() : 40 == data.curLevel
                                                                                                                                                                        && (t = new LevelView40()),
                t && (this.mLevelView = t, t.name = "levelfff",
                    this.addChild(t), t.setHandlerFinish(this.endHandler));
        }, e.prototype.exit = function () {
            this.endHandler && this.endHandler.recover(), this.destroy(), Laya.stage.removeChild(this);
        }, e;
    }(Laya.Sprite), i = 0, n = function (t) {
        function e() {
            var e = t.call(this) || this;
            e.isLock = !1,
                e.size(Main.width, 2 * Main.height),
                e.mouseEnabled = !0;
            var n = new Laya.Sprite();
            n.graphics.drawRect(0, 0, Main.width, 2 * Main.height, "#000000"),
                e.addChild(n),
                n.alpha = .8;
            var s = new Laya.Image("icon/a1.png");
            e.addChild(s),
                //s.pivotX = s.width / 2, 
                //s.x = Main.halfWidth, 
                s.centerX = 0;
            s.y = 100;
            var a = new GirlRole();
            a.initRoleImage(),
                e.addChild(a),
                a.loadFinishHandler = Laya.Handler.create(e, function () {
                    a.setAttactAni1("3"),
                        a.setPause();
                }),
                a.x = Laya.stage.width / 2 - 20,
                a.y = Laya.stage.height / 2 + 100;
            var r = a.y + 30,
                o = zsview.drawRollingAd(e, r),
                h = r + 130;
            o && (h = r + o.height);
            var l = e.getBtn("#e27d05", 0, 0, "Claim Reward");
            e.addChild(l),
                l.pivotX = l.width / 2,
                l.x = Main.halfWidth,
                l.y = h+30,
                wxapi.isHasScreenFringe() && (l.y = l.y + 100);
            //var c = drawText("Give Up", "#b3afaf", 30);
            //e.addChild(c),
                // c.pivotX = c.width / 2,
                // c.x = Main.halfWidth,
                // c.y = l.y + l.height + 50,
                // c.visible = !1;
            var u;
            if (i % 2 != 0 && gztjapi.isOpenAdAdmin) {
                // c.visible = !0, 
                // c.text = "领取", 
                // c.on(Laya.Event.MOUSE_DOWN, e, e.onOKClick), 
                u = new Laya.Image("icon/index-close.png"),
                e.addChild(u), 
                u.x = 50, 
                u.y = 150;
                var d = drawText("确认放弃", "#b3afaf", 20);
                u.addChild(d), d.pivotX = d.width / 2, d.x = u.width / 2, d.y = u.height, d.on(Laya.Event.CLICK, e, e.exit),
                    u.on(Laya.Event.CLICK, e, e.exit), u.visible = !1;
            } //else
                // c.on(Laya.Event.CLICK, e, e.exit);
            if (l.on(Laya.Event.MOUSE_DOWN, e, e.onOKClick), gztjapi.isOpenAdAdmin) {
                wxad.hideBannerAd();
                var _ = l.y;
                //c.y;
                l.y = Main.height - l.height,
                    wxapi.isHasScreenFringe() ? l.y = Main.height : wxapi.isHasScreenFringeMin()
                        && (l.y = Main.height - (l.height - 30)),
                    //c.visible = !1,
                    e.isLock = !0,
                    e.timer.once(1e3, e, function () {
                        wxad.showbannerAd(),
                            this.timer.once(200, this, function () {
                                Laya.Tween.to(l, { y: _ }, 200, Laya.Ease.linearInOut, Laya.Handler.create(this, function () {
                                    this.isLock = !1,
                                        this.timer.once(2e3, this, function () {
                                            //c.visible = !0, 
                                            u && (u.visible = !0);
                                        });
                                }));
                            });
                    });
            } else
                e.isLock = !1,
                    wxad.showbannerAd(),
                    e.timer.once(2e3,
                        e,
                        function () {
                            //c.visible = !0, 
                            u && (u.visible = !0);
                        });
            return e;
        }
        return __extends(e, t),
            e.prototype.onOKClick = function () {
                if(!this.isLock){
                    // (platform.getInstance().initialized_ &&
                    //     platform.getInstance().showReward(() => {
                            data.tlcount += 1, data.save();
                            var e = toast.showToastInfo1({
                                info1: "Get ",
                                info2: " Power x1",
                                skin: "icon/tl.png"
                            });
                            e.zOrder = 99999999, Laya.stage.addChild(e),// wxald.onRunning(data.curLevel, "领取过关奖励"), 
                                this.exit();
                            }
                    //     })
                    // );
            }, e.prototype.exit = function () {
                i += 1, this.quit(); //wxad.hideBannerAd();
                //var t = new zsview.MoreView();
                // Laya.stage.addChild(t), t.setExitHandler(Laya.Handler.create(this, function() {

                // }));
            }, e.prototype.quit = function () {
                this.finishHandler && this.finishHandler.run(), this.timer.clearAll(this), this.destroy(),
                    Laya.stage.removeChild(this);
                var t = new a();
                Laya.stage.addChild(t);
            }, e.prototype.getBtn = function (t, e, i, n) {
                var s = draw.fillRoundRect(e, i, 370, 120, "#ffffff", 20, 20), a = draw.fillRoundRect(5, 5, 360, 100, t, 20, 20);
                s.addChild(a);
                var r = new Laya.GlowFilter("#553728", 0, 0, 10);
                a.filters = [r];
                var o = drawText(n, "#ffffff", 40);
                a.addChild(o), o.pivotX = o.width / 2, o.y = 20, o.x = a.width / 2;
                var h = new Laya.Image("icon/t00.png");
                return h.pivotX = h.width / 2, h.x = a.width / 2, h.y = o.y + o.height + 10, a.addChild(h),
                    s;
            }, e;
    }(Laya.Sprite);
    t.VedioEndWinView2 = n;
    var s = 0, a = function (e) {
        function i() {
            var t = e.call(this) || this;
            t.isLock = !1, t.size(Main.width, 2 * Main.height), t.mouseEnabled = !0;
            var i = new Laya.Sprite();
            i.graphics.drawRect(0, 0, Main.width, 2 * Main.height, "#000000"), t.addChild(i),
                i.alpha = .7;
            var n = mlevel.drawTlIcon(0, 0, t);
            t.addChild(n), n.pivotX = n.width / 2, n.x = 100, n.y = 30;
            var a = new Laya.Image("zs/end-pass.png");
            t.addChild(a), a.x = (Main.width - a.width) / 2, a.y = 150;
            var r = new zsview.SixIconView();
            t.addChild(r), r.y = a.y + 90, data.curLevel < 38 && (data.level += 1, data.curLevel += 1,
            data.save(), wxapi.upScore(data.level), wxald.onEnd(data.curLevel));
            let list = new Laya.List();
            let item = class extends Laya.Box {
                constructor() {
                    super();
                    this.width = 320;
                    this.height = 240;
                    var thum = new Laya.Image();
                    thum.name = "thumb";
                    this.addChild(thum);
                    thum.left = 10;
                    thum.right = 10;
                    thum.top = 10;
                    thum.bottom = 10;
                }
            };
            list.itemRender = item;
            t.addChild(list);
            list.x = 40;
            list.y = 400;
            list.width = 640;
            list.height = 480;
            platform.getInstance().initList(list);
            var o = new Laya.Sprite();
            t.addChild(o), o.y = Main.halfHeight + 300;
            var h = new LImageButtView(0, 0, "icon/home.png");
            o.addChild(h);
            var l = t.getBtn("#21b105", 90, 0, "Next           ");
            o.addChild(l), l.x = h.width + 30, o.width = h.width + l.width + 30, o.height = l.height,
                o.pivotX = o.width / 2, o.x = Main.halfWidth;
            var c = new Laya.Image("icon/tl.png");
            l.addChild(c), c.pivotY = c.height / 2, c.pivotX = c.width, c.y = l.height / 2,
                c.x = l.width - 80, c.pivotY = c.height / 2;
            var u = drawText("x1", "#ffffff", 40);
            c.addChild(u), u.x = c.width, u.y = c.height, u.pivotY = u.height;
            var d = new Laya.Image("icon/x1.jpg");
            t.addChild(d), d.y = o.y + l.height + 100;
            var _ = drawText("  观看广告，领取过关奖励", "#959494", 20);
            d.addChild(_), _.x = d.width, _.pivotY = _.height / 2, _.y = d.height / 2, d.x = (Main.width - (d.width + _.width)) / 2;
            var f = !0;
            if (s % 2 != 0 && (_.text = "  不看广告，放弃过关奖励"), d.on(Laya.Event.MOUSE_DOWN, t, function () {
                f = !f, d.skin = f ? "icon/x1.jpg" : "icon/x2.jpg";
            }), h.on(Laya.Event.CLICK, t, function () {
                if (!this.isLock) {
                    if(platform.getInstance().initialized_){
                        platform.getInstance().showInterstitial(()=>{
                            this.exit(),
                            Laya.stage.destroyChildren();
                            var t = new FmMenuView();
                            Laya.stage.addChild(t);
                        });
                    }else{
                        this.exit(),
                        Laya.stage.destroyChildren();
                        var t = new FmMenuView();
                        Laya.stage.addChild(t);
                    }
                }
            }), l.on(Laya.Event.CLICK, t, function () {
                if (!this.isLock) 
                if (platform.getInstance().initialized_) {
                    platform.getInstance().showInterstitial(() => {
                        if (data.tlcount > 0) {
                            this.nextLevel();
                        } else dialog.setDialog(Laya.Handler.create(this, function (t) {
                            if (t) {
                                data.tlcount += 3, data.save(), mlevel.tltext.text = "" + data.tlcount;
                                var e = toast.showToastInfo1({
                                    info1: "Get ",
                                    info2: " Power x3",
                                    skin: "icon/tl.png"
                                });
                                e.zOrder = 99999999, Laya.stage.addChild(e);
                            }
                        }, null, !1));
                    });
                }else {
                    if (data.tlcount > 0) {
                        this.nextLevel();
                    } else dialog.setDialog(Laya.Handler.create(this, function (t) {
                        if (t) {
                            data.tlcount += 3, data.save(), mlevel.tltext.text = "" + data.tlcount;
                            var e = toast.showToastInfo1({
                                info1: "Get ",
                                info2: " Power x3",
                                skin: "icon/tl.png"
                            });
                            e.zOrder = 99999999, Laya.stage.addChild(e);
                        }
                    }, null, !1));
                }
            }), gztjapi.isOpenAdAdmin) {
                wxad.hideBannerAd();
                var p = o.y;
                o.y = Main.height - o.height, wxapi.isHasScreenFringe() ? o.y = Main.height : wxapi.isHasScreenFringeMin() && (o.y = Main.height - (o.height - 30)),
                    d.visible = !1, t.isLock = !0, t.timer.once(1e3, t, function () {
                        wxad.showbannerAd(), this.timer.once(200, this, function () {
                            Laya.Tween.to(o, {
                                y: p
                            }, 200, Laya.Ease.linearInOut, Laya.Handler.create(this, function () {
                                this.isLock = !1, d.visible = !0;
                            }));
                        });
                    });
            } else t.isLock = !1, wxad.showbannerAd(), d.visible = !1, f = !1, s = 0;
            return t;
        }
        return __extends(i, e), i.prototype.nextLevel = function () {
            mlevel.useTl(), t.gmae && t.gmae.exit(), this.exit(), Laya.stage.destroyChildren(),
                t.setGameView();
            // zsview.drawDialogAd(Laya.Handler.create(this, function() {

            // }));
        }, i.prototype.exit = function () {
            wxad.hideGridAd(), wxad.hideBannerAd(), this.destroy(), Laya.stage.removeChild(this);
        }, i.prototype.getBtn = function (t, e, i, n) {
            var s = draw.fillRoundRect(e, i, 270, 120, "#ffffff", 20, 20), a = draw.fillRoundRect(5, 5, 260, 100, t, 20, 20);
            s.addChild(a);
            var r = new Laya.GlowFilter("#553728", 0, 0, 10);
            a.filters = [r];
            var o = drawText(n, "#ffffff", 40);
            return a.addChild(o), o.pivotX = o.width / 2, o.pivotY = o.height / 2, o.y = a.height / 2,
                o.x = a.width / 2, s;
        }, i;
    }(Laya.Sprite), r = function (t) {
        function e() {
            var e = t.call(this) || this;
            e.size(Main.width, 2 * Main.height),
                e.mouseEnabled = !0;
            var i = new Laya.Sprite();
            i.graphics.drawRect(0, 0, Main.width, 2 * Main.height, "#000000"),
                e.addChild(i),
                i.alpha = .8;
            var n = new Laya.Image("zs/end-over2.png");
            e.addChild(n),
                n.x = (Main.width - n.width) / 2,
                n.y = 150;
            var s = new zsview.SixIconView();
            e.addChild(s),
                s.y = n.y + 90;
                let list = new Laya.List();
                let item = class extends Laya.Box {
                    constructor() {
                        super();
                        this.width = 320;
                        this.height = 240;
                        var thum = new Laya.Image();
                        thum.name = "thumb";
                        this.addChild(thum);
                        thum.left = 10;
                        thum.right = 10;
                        thum.top = 10;
                        thum.bottom = 10;
                    }
                };
                list.itemRender = item;
                e.addChild(list);
                list.x = 40;
                list.y = 400;
                list.width = 640;
                list.height = 480;
                platform.getInstance().initList(list);
            var a = new LImageButtView(0, 0, "zs/btn-revive.png");
            e.addChild(a),
                a.pivotX = a.width / 2,
                a.y = s.y + s.height + 200,
                a.x = Main.halfWidth,
                a.onPos(a.x, a.y),
                a.on(Laya.Event.CLICK, e, e.onOK);
            var r = new LImageButtView(Main.halfWidth, a.y + a.height + 10, "zs/end-jump.png");
            return r.pivotX = r.width / 2,
                e.addChild(r),
                r.y = a.y + a.height + 50,
                r.onPos(r.x, r.y),
                gztjapi.isOpenAdAdmin
                    ?
                    (r.y = Main.height - 90, wxapi.isHasScreenFringe()
                        ? r.y = Main.height + 100
                        : wxapi.isHasScreenFringeMin() && (r.y = Main.height - 50),
                        r.onPos(r.x, r.y),
                        e.timer.once(1e3, e, function () {
                            //wxad.showbannerAd(), 
                            this.timer.once(200, this, function () {
                                r.on(Laya.Event.CLICK, this, this.exit),
                                    r.y = a.y + a.height + 50,
                                    r.onPos(r.x, r.y);
                            });
                        }))
                    : (r.on(Laya.Event.CLICK, e, e.exit)),
                e;
        }
        return __extends(e, t), e.prototype.onOK = function () {
            // wxad.showVideoAd(Laya.Handler.create(this, function(t) {
            //     t && (this.exitfinishHandler && this.exitfinishHandler.runWith(!0), 
            //     this.quit(), 
            //     toast.showToast("恭喜！复活成功!"), 
            //     wxald.onRunning(data.curLevel, "广告复活"));
            // }));
            if (platform.getInstance().initialized_) {
                platform.getInstance().showReward(() => {
                    this.exitfinishHandler && this.exitfinishHandler.runWith(!0);
                    this.quit();
                    //platform.getInstance().prompt("Congratulation！Revived!"));
                    //this.exit(), 
                    // Laya.stage.destroyChildren(), 
                    // z6game.setGameView();
                });
            }
        }, e.prototype.quit = function () {
            //wxad.hideBannerAd(), 
            this.destroy(),
                Laya.stage.removeChild(this);
        }, e.prototype.exit = function () {
            this.exitfinishHandler && this.exitfinishHandler.runWith(!1),
                this.quit();
            var t = new o();
            Laya.stage.addChild(t);
            //var t = new zsview.MoreView();
            // Laya.stage.addChild(t), t.setExitHandler(Laya.Handler.create(this, function() {
            //     wxad.hideBannerAd();
            //     var t = new o();
            //     Laya.stage.addChild(t);
            // }));
        }, e;
    }(Laya.Sprite);
    t.EndFuhuoView = r;
    var o = function (e) {
        function i() {
            var i = e.call(this) || this;
            i.isLock = !1, i.size(Main.width, 2 * Main.height), i.mouseEnabled = !0;
            var n = new Laya.Sprite();
            n.graphics.drawRect(0, 0, Main.width, 2 * Main.height, "#000000"), i.addChild(n),
                n.alpha = .8;
            var s = mlevel.drawTlIcon(0, 0, i);
            i.addChild(s),
                s.pivotX = s.width / 2,
                s.x = 100,
                s.y = 30;
            var a = new Laya.Image("zs/end-over.png");
            i.addChild(a),
                a.x = (Main.width - a.width) / 2,
                a.y = 150;
            var r = new zsview.SixIconView();
            i.addChild(r),
                r.y = a.y + 90;
                let list = new Laya.List();
                let item = class extends Laya.Box {
                    constructor() {
                        super();
                        this.width = 320;
                        this.height = 240;
                        var thum = new Laya.Image();
                        thum.name = "thumb";
                        this.addChild(thum);
                        thum.left = 10;
                        thum.right = 10;
                        thum.top = 10;
                        thum.bottom = 10;
                    }
                };
                list.itemRender = item;
                i.addChild(list);
                list.x = 40;
                list.y = 400;
                list.width = 640;
                list.height = 480;
                platform.getInstance().initList(list);
            var o = new Laya.Sprite();
            i.addChild(o),
                o.y = Main.halfHeight + 300;
            var h = new LImageButtView(0, 0, "icon/home.png");
            o.addChild(h);
            var l = i.getBtn("#21b105", 0, 0, "Restart         ");
            o.addChild(l),
                l.x = h.width + 30,
                o.width = h.width + l.width + 30,
                o.pivotX = o.width / 2,
                o.x = Main.halfWidth;
            var c = new Laya.Image("icon/tl.png");
            l.addChild(c),
                c.pivotY = c.height / 2,
                c.pivotX = c.width,
                c.y = l.height / 2,
                c.x = l.width - 60,
                c.pivotY = c.height / 2;
            var u = drawText("x1", "#ffffff", 40);
            if (c.addChild(u), u.x = c.width, u.y = c.height, u.pivotY = u.height, 
            h.on(Laya.Event.CLICK, i, function () {
                if (!this.isLock) {
                    if(platform.getInstance().initialized_){
                        platform.getInstance().showInterstitial(()=>{
                            this.exit(), Laya.stage.destroyChildren();
                            var t = new FmMenuView();
                            Laya.stage.addChild(t);
                        })
                    }else{
                        this.exit(), Laya.stage.destroyChildren();
                        var t = new FmMenuView();
                        Laya.stage.addChild(t);
                    }
                    
                }
            }), l.on(Laya.Event.CLICK, i, function () {
                this.isLock ||
                    (
                        platform.getInstance().initialized_
                        && platform.getInstance().showInterstitial(()=>{
                            data.tlcount > 0
                            ? (
                                l.offAll(Laya.Event.CLICK),
                                mlevel.useTl(),
                                this.exit(),
                                Laya.stage.destroyChildren(),
                                t.setGameView()
                            )
                            :
                            dialog.setDialog(Laya.Handler.create(this, function (t) {
                                if (t) {
                                    data.tlcount += 3,
                                        data.save(),
                                        mlevel.tltext.text = "" + data.tlcount;
                                    var e = toast.showToastInfo1({
                                        info1: "Get ",
                                        info2: " Power x3",
                                        skin: "icon/tl.png"
                                    });
                                    e.zOrder = 99999999,
                                        Laya.stage.addChild(e);
                                }
                            },
                                null,
                                !1))
                        })
                        // ||
                        // data.tlcount > 0
                        //     ? (
                        //         l.offAll(Laya.Event.CLICK),
                        //         mlevel.useTl(),
                        //         this.exit(),
                        //         Laya.stage.destroyChildren(),
                        //         t.setGameView()
                        //     )
                        //     :
                        //     dialog.setDialog(Laya.Handler.create(this, function (t) {
                        //         if (t) {
                        //             data.tlcount += 3,
                        //                 data.save(),
                        //                 mlevel.tltext.text = "" + data.tlcount;
                        //             var e = toast.showToastInfo1({
                        //                 info1: "Get ",
                        //                 info2: " Power x3",
                        //                 skin: "icon/tl.png"
                        //             });
                        //             e.zOrder = 99999999,
                        //                 Laya.stage.addChild(e);
                        //         }
                        //     },
                        //         null,
                        //         !1))
                    );
            }), gztjapi.isOpenAdAdmin) {
                wxad.hideBannerAd();
                var d = o.y;
                o.y = Main.height - l.height, wxapi.isHasScreenFringe() ? o.y = Main.height : wxapi.isHasScreenFringeMin() && (o.y = Main.height - (l.height - 30)),
                    i.isLock = !0, i.timer.once(1e3, i, function () {
                        wxad.showbannerAd(), this.timer.once(200, this, function () {
                            Laya.Tween.to(o, {
                                y: d
                            }, 200, Laya.Ease.linearInOut, Laya.Handler.create(this, function () {
                                this.isLock = !1;
                            }));
                        });
                    });
            } else i.isLock = !1, wxad.showbannerAd();
            return i;
        }
        return __extends(i, e), i.prototype.exit = function () {
            wxad.hideGridAd(), wxad.hideBannerAd(), this.destroy(), Laya.stage.removeChild(this);
        }, i.prototype.setHandlerOK = function (t) {
            this.handlerfi = t;
        }, i.prototype.getBtn = function (t, e, i, n) {
            var s = draw.fillRoundRect(e, i, 270, 120, "#ffffff", 20, 20), a = draw.fillRoundRect(5, 5, 260, 100, t, 20, 20);
            s.addChild(a);
            var r = new Laya.GlowFilter("#553728", 0, 0, 10);
            a.filters = [r];
            var o = drawText(n, "#ffffff", 40);
            return a.addChild(o), o.pivotX = o.width / 2, o.pivotY = o.height / 2, o.y = a.height / 2,
                o.x = a.width / 2, s;
        }, i;
    }(Laya.Sprite);
}(z6game || (z6game = {}));

var toast, __extends = this && this.__extends || function (t, e) {
    function i() {
        this.constructor = t;
    }
    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n]);
    t.prototype = null === e ? Object.create(e) : (i.prototype = e.prototype, new i());
}, LoadView = function (t) {
    function e() {
        var e = t.call(this) || this;
        e.indexX = 0, e.countWidth = 0;
        var i = new Laya.Sprite();
        i.graphics.drawRect(0, 0, Main.width, 2 * Main.height, "#5A2AD4"), e.addChild(i);
        var n = new Laya.Image("res/logo.png");
        e.addChild(n),
            n.pivotX = 283.5,
            n.x = Main.halfWidth, n.y = 300 + Main.autoInitTopHeight;
        var s = drawText("Loading...1%", "#ffffff", 40);
        s.pivotX = s.width / 2, s.pivotY = s.height / 2, s.x = Main.halfWidth, s.y = 300 + Main.height / 2 + Main.autoInitTopHeight,
            e.addChild(s), e.load = s;
        for (var a = [], r = 0; r < res.image.length; r++) a.push({
            url: res.image[r],
            type: Laya.Loader.IMAGE
        });
        for (r = 0; r < res.rolePath.length; r++) a.push({
            url: res.rolePath[r],
            type: Laya.Loader.IMAGE
        });
        for (r = 0; r < res.loadAni.length; r++) a.push({
            url: res.loadAni[r].url,
            type: res.loadAni[r].type
        });
        for (r = 0; r < res.sound.length; r++) a.push({
            url: res.sound[r],
            type: Laya.Loader.SOUND
        });
        for (r = 0; r < res.mappath.length; r++) a.push({
            url: res.mappath[r],
            type: Laya.Loader.IMAGE
        });
        for (r = 0; r < res.downloadRes.length; r++) a.push({
            url: res.downloadRes[r],
            type: Laya.Loader.IMAGE
        });
        return Laya.loader.load(a, Laya.Handler.create(e, function () {
            this.finishhandler && this.finishhandler.run();
        }), Laya.Handler.create(e, e.onLoading, null, !1)), e;
    }
    return __extends(e, t), e.prototype.setFinish = function (t) {
        this.finishhandler = t;
    }, e.prototype.onLoading = function (t) {
        var e = Math.floor(100 * t);
        this.load && e > 1 && (e > 99 && (e = 99), this.load.text = "Loading..." + e + "%",
            this.load.pivotY = this.load.height / 2, this.load.pivotX = this.load.width / 2);
    }, e;
}(Laya.Sprite), __extends = this && this.__extends || function (t, e) {
    function i() {
        this.constructor = t;
    }
    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n]);
    t.prototype = null === e ? Object.create(e) : (i.prototype = e.prototype, new i());
}, LImageButtView = function (t) {
    function e(e, i, n) {
        var s = t.call(this) || this;
        return s.curX = 0, s.curY = 0, s.scaleValue = 2, s.isLock = !1, s.curScaleX = 1,
            null != n && (s.skin = n), s.pos(e, i), s.curX = e, s.curY = i, s.on(Laya.Event.MOUSE_DOWN, s, s.onApePress),
            s.on(Laya.Event.MOUSE_UP, s, s.onApeRelease), s.on(Laya.Event.MOUSE_OUT, s, s.onApeRelease),
            s;
    }
    return __extends(e, t), e.prototype.init = function (t, e, i) {
        this.loadImage(i), this.pos(t, e), this.curX = t, this.curY = e, this.on(Laya.Event.MOUSE_DOWN, this, this.onApePress),
            this.on(Laya.Event.MOUSE_UP, this, this.onApeRelease);
    }, e.prototype.onPos = function (t, e) {
        this.pos(t, e), this.curX = t, this.curY = e;
    }, e.prototype.onApePress = function (t) {
        this.isLock || (this.scale(.95 * this.curScaleX, .95), this.handlerLongClickListener);
    }, e.prototype.setLongClickListener = function (t) {
        this.handlerLongClickListener = t;
    }, e.prototype.setLongReClickListener = function (t) {
        this.handlerLongReClickListener = t;
    }, e.prototype.onApeRelease = function () {
        this.isLock || (this.scale(1 * this.curScaleX, 1), this.pos(this.curX, this.curY),
            Laya.stage.off(Laya.Event.MOUSE_UP, this, this.onApeRelease));
    }, e.prototype.setCurScale = function (t) {
        this.scaleValue = t;
    }, e.prototype.setXscale = function (t) {
        this.curScaleX = t, this.onApeRelease();
    }, e.prototype.setLock = function () {
        this.gray = !0, this.isLock = !0;
    }, e.prototype.setUnLock = function () {
        this.gray = !1, this.isLock = !1;
    }, e;
}(Laya.Image), __extends = this && this.__extends || function (t, e) {
    function i() {
        this.constructor = t;
    }
    for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n]);
    t.prototype = null === e ? Object.create(e) : (i.prototype = e.prototype, new i());
};

!function (t) {
    function e(t) {
        var e = new a(t);
        e.scale(.3, .3), e.y = Main.halfHeight, e.pivotX = e.width / 2, e.x = Main.halfWidth;
        var i = 600 + 80 * n;
        s.push(e);
        for (var r = 0; r < s.length; r++) {
            var o = s[r];
            o && getCurTime() - o.time >= 3e3 && (o.destroy(), s.splice(r, 1));
        }
        return Laya.Tween.to(e, {
            scaleX: 1.4,
            scaleY: 1.4,
            y: i
        }, 500, Laya.Ease.bounceOut, Laya.Handler.create(this, function () {
            s.pop(e);
            e.scale(.3,.3),
            e.y = Main.HalfHeight
         })), e;
    }
    function i(t) {
        Laya.stage.addChild(e(t));
    }
    t.showlog = function (t) {
        var e = drawText("" + t, "#ffffff", 50);
        e.pivotX = e.width / 2, e.x = Main.halfWidth, e.y = Main.height, e.stroke = 3, e.strokeColor = "#000000",
            Laya.stage.addChild(e), Laya.Tween.to(e, {
                y: Main.height / 2
            }, 500, Laya.Ease.linearInOut, Laya.Handler.create(this, function () {
                Laya.stage.timerOnce(5e3, this, function () {
                    Laya.stage.removeChild(e), e.destroy();
                });
            }));
    }, t.showToast = function (t) {
        i(t);
    }, t.showmoneyadd = function (t, e, i) {
        var n = drawText("" + t, "#ffffff", 20);
        n.pivotX = n.width / 2, n.x = e, n.y = i, n.stroke = 3, n.strokeColor = "#000000",
            Laya.stage.addChild(n), Laya.Tween.to(n, {
                y: Main.height / 2
            }, 500, Laya.Ease.linearInOut, Laya.Handler.create(this, function () {
                Laya.stage.timerOnce(5e3, this, function () {
                    Laya.stage.removeChild(n), n.destroy();
                });
            }));
    };
    !function (t) {
        function e(e) {
            var i = t.call(this) || this, n = new Laya.Sprite();
            i.addChild(n), i.bk = n, n.size(500, 200);
            var s = new Laya.GlowFilter("#09e5f3", 10, 0, 0);
            n.filters = [s], n.x = (Main.width - n.width) / 2, n.y = (Main.height - n.height) / 2;
            var a = drawText(e, "#ffffff", 35);
            n.addChild(a), a.width > n.width - 40 && (a.wordWrap = !0, a.width = n.width - 40,
                a.leading = 10), a.pivotX = a.width / 2, a.pivotY = a.height / 2, a.x = n.width / 2,
                a.y = n.height / 2, a.visible = !1;
            var r = 0;
            return i.timerLoop(10, i, function () {
                n.graphics.drawRect(0, 100 - r / 2, 500, r, "#055d76"), n.graphics.drawRect(0, 100 - r / 2, 500, r, null, "#06f0f9", 2),
                    r < 200 ? (r += 20) >= 100 && (a.visible = !0) : (this.timer.clearAll(this), this.exit());
            }), i;
        }
        __extends(e, t), e.prototype.exit = function () {
            this.timer.once(2e3, this, function () {
                Laya.Tween.to(this.bk, {
                    scaleX: 0,
                    scaleY: 0
                }, 200, Laya.Ease.bounceOut, Laya.Handler.create(this, function () {
                    this.destroy(), Laya.stage.removeChild(this);
                }));
            });
        };
    }(Laya.Sprite);
    var n = 0, s = [];
    t.showToastInfo1 = e, t.showToastInfo = i;
    var a = function (t) {
        function e(e) {
            var i = t.call(this) || this;
            i.time = 0;
            var a = new Laya.Image("icon/tbk.png");
            
            i.width = a.width;// a.height = a.height + 20;
            a.height = 64;
            i.addChild(a);
            var r = new Laya.Sprite();
            a.addChild(r);
            var o = "", h = 0;
            if (e instanceof Object) {
                var l = e, c = l.info1, u = l.skin;
                o = l.info2;
                var d = drawText(c, "#ffffff", 30);
                r.addChild(d), r.width += d.width, d.pivotY = d.height / 2, h += d.width;
                var _ = new Laya.Image(u);
                r.addChild(_), _.pivotY = _.height / 2, _.x = h, h += _.width, r.width += _.width;
            } else o = e;
            var f = drawText(o, "#ffffff", 30);
            return r.addChild(f), r.width += f.width, f.x = h, f.pivotY = f.height / 2, f.stroke = 2,
                f.strokeColor = "#000000", i.time = getCurTime(), i.timer.once(3e3, i, function () {
                    this.destroy(), Laya.stage.removeChild(this), s.splice(0, 1), 0 == s.length && (n = 0);
                }), r.pivotX = r.width / 2, r.x = a.width / 2, r.y = a.height / 2, i;
        }
        return __extends(e, t), e;
    }(Laya.Sprite);
    t.showToastRollInfo = function (t) {
        var e = new r(t);
        return Laya.stage.addChild(e), e.y = 400, e.pivotX = e.width / 2, e.x = Main.halfWidth,
            e.zOrder = 99999999, e.alpha = 0, Laya.Tween.to(e, {
                alpha: 1
            }, 300, Laya.Ease.bounceOut, Laya.Handler.create(this, function () { })), e;
    };
    var r = function (t) {
        function e(e) {
            var i = t.call(this) || this, n = new Laya.Image("home/tbk.png");
            i.width = n.width;
            var s = i.width;
            n.height = n.height + 20;
            var a = n.height, r = new Laya.Panel();
            r.width = n.width, r.height = n.height, i.addChild(r), r.addChild(n), n.alpha = .6;
            var o = drawText(e, "#ffffff", 30);
            r.addChild(o), o.x = s, o.pivotY = o.height / 2, o.y = a / 2, o.stroke = 2, o.strokeColor = "#000000";
            var h = !0, l = 0;
            return i.timerLoop(100, i, function () {
                h && (0 == l ? o.x > -o.width ? o.x -= 10 : l = 1 : o.x < 0 ? o.x += 10 : (h = !1,
                    this.timer.once(1e3, this, function () {
                        this.timer.clearAll(this), this.endhandler && this.endhandler.run(), this.destroy(),
                            Laya.stage.removeChild(this);
                    })));
            }), i;
        }
        return __extends(e, t), e.prototype.setEndHandler = function (t) {
            this.endhandler = t;
        }, e;
    }(Laya.Sprite);
    t.ToastRollInfoView = r;
}(toast || (toast = {}));

var Main = function () {
    function t() {
        Laya.MiniAdpter.nativefiles = res.nativefiles;
        Laya.MiniAdpter.init(!0, !1),
            Laya.init(t.width, t.height, Laya.WebGL),
            Laya.stage.alignV = Laya.Stage.ALIGN_MIDDLE,
            Laya.stage.alignH = Laya.Stage.ALIGN_CENTER,
            t.halfWidth = t.width / 2,
            t.halfHeight = t.height / 2,
            t.halfWidthFour = t.width / 4,
            t.halfHeightFour = t.height / 4,
            Laya.stage.scaleMode = "showall",
            //Laya.stage.screenMode = Laya.Stage.SCREEN_VERTICAL,
            Laya.stage.alignH = "center",
            Laya.stage.alignV = "middle",
            Laya.stage.bgColor = "#000000";
        //localStorage.clear();
        var e = new LoadView();
        Laya.stage.addChild(e),
            e.setFinish(Laya.Handler.create(this,
                function () {
                    Laya.loader.load("cnf.json",Laya.Handler.create(this,(res)=>{
                        platform.getInstance().startup("Save-The-Girl", res["id"], () => 
                        {
                            data.read(),
                            e.destroy(),
                            Laya.stage.removeChild(e),
                            data.read();
                            var i = new FmMenuView();
                            Laya.stage.addChild(i),
                            music.onPlaySound(),
                            data.isNewUser = 1,
                            data.save();
                        });
                    }))
                }
            ));
    }
    return t.prototype.updataCheck = function () {
        wxapi.updateCheck();
    }, t.prototype.autoInitHasScreen = function () {
        (wxapi.isHasScreenFringe() || wxapi.isHasScreenFringeMin()) && (t.autoInitTopHeight = 100);
    }, t;
}();

Main.halfWidth = 0, Main.halfWidthFour = 0, Main.halfHeightFour = 0, Main.halfHeight = 0,
    Main.width = 750, Main.height = 1334, Main.autoInitTopHeight = 0, new Main();